{"/home/travis/build/npmtest/node-npmtest-tchannel/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_tchannel */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/lib.npmtest_tchannel.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/lib.npmtest_tchannel.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":53}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":59}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_tchannel */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_tchannel = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_tchannel = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":52}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":66},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-tchannel && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_tchannel */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_tchannel","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_tchannel.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_tchannel.rollup.js'] =","            local.assetsDict['/assets.npmtest_tchannel.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_tchannel.__dirname + '/lib.npmtest_tchannel.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/channel.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/channel.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1,"129":0,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":1,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":1,"150":0,"151":0,"152":0,"153":0,"154":1,"155":0,"156":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":1,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":1,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":1,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":1,"192":0,"193":0,"194":0,"195":0,"196":1,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":1,"204":0,"205":1,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":1,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":1,"228":0,"229":0,"230":1,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":1,"240":0,"241":1,"242":0,"243":1,"244":0,"245":1,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":1,"264":0,"265":1,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":1,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":1,"288":0,"289":0,"290":0,"291":0,"292":0,"293":1,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":1,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":1,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":1,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":1,"368":0,"369":0,"370":0,"371":0,"372":1,"373":0,"374":0,"375":0,"376":0,"377":0,"378":1,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":1,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":1,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":1,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":1,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":1,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":0,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"486":0,"487":1,"488":0,"489":0,"490":0,"491":1,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":1,"513":0,"514":0,"515":0,"516":0,"517":0,"518":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":0,"526":0,"527":0,"528":0,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":0,"544":0,"545":0,"546":0,"547":0,"548":0,"549":0,"550":0,"551":1,"552":0,"553":0,"554":1,"555":0,"556":0,"557":0,"558":0,"559":0,"560":1,"561":0,"562":0,"563":0,"564":0,"565":1,"566":0,"567":0,"568":0,"569":1,"570":0,"571":0,"572":0,"573":0,"574":0,"575":0,"576":0,"577":0,"578":0,"579":0,"580":1,"581":0,"582":0,"583":0,"584":0,"585":0,"586":0,"587":0,"588":0,"589":1,"590":0,"591":1,"592":0,"593":0,"594":0,"595":0,"596":0,"597":0,"598":0,"599":0,"600":1,"601":0,"602":0,"603":0,"604":0,"605":1},"b":{"1":[0,1],"2":[1,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0],"126":[0,0],"127":[0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0],"145":[0,0],"146":[0,0],"147":[0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[0,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},"fnMap":{"1":{"name":"TChannel","line":95,"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":27}}},"2":{"name":"fuzzedMinTimeout","line":162,"loc":{"start":{"line":162,"column":4},"end":{"line":162,"column":32}}},"3":{"name":"doSanitySweep","line":278,"loc":{"start":{"line":278,"column":4},"end":{"line":278,"column":29}}},"4":{"name":"sweepDone","line":283,"loc":{"start":{"line":283,"column":4},"end":{"line":283,"column":25}}},"5":{"name":"setMaximumRelayTTL","line":307,"loc":{"start":{"line":307,"column":0},"end":{"line":307,"column":35}}},"6":{"name":"channelToString","line":321,"loc":{"start":{"line":321,"column":0},"end":{"line":321,"column":27}}},"7":{"name":"tchannelInspect","line":330,"loc":{"start":{"line":330,"column":0},"end":{"line":330,"column":27}}},"8":{"name":"setPreferConnectionDirection","line":336,"loc":{"start":{"line":336,"column":0},"end":{"line":336,"column":49}}},"9":{"name":"extendLogInfo","line":348,"loc":{"start":{"line":348,"column":0},"end":{"line":348,"column":29}}},"10":{"name":"eachConnection","line":360,"loc":{"start":{"line":360,"column":36},"end":{"line":360,"column":66}}},"11":{"name":"setObservePeerScoreEvents","line":381,"loc":{"start":{"line":381,"column":0},"end":{"line":381,"column":40}}},"12":{"name":"setWriteBufferMode","line":394,"loc":{"start":{"line":394,"column":0},"end":{"line":394,"column":34}}},"13":{"name":"setChoosePeerWithHeap","line":399,"loc":{"start":{"line":399,"column":0},"end":{"line":399,"column":40}}},"14":{"name":"setLazyHandling","line":408,"loc":{"start":{"line":408,"column":0},"end":{"line":408,"column":34}}},"15":{"name":"updateEachConn","line":419,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":34}}},"16":{"name":"setLazyRelaying","line":425,"loc":{"start":{"line":425,"column":0},"end":{"line":425,"column":34}}},"17":{"name":"drain","line":444,"loc":{"start":{"line":444,"column":27},"end":{"line":444,"column":60}}},"18":{"name":"drainEachConn","line":466,"loc":{"start":{"line":466,"column":4},"end":{"line":466,"column":33}}},"19":{"name":"getServer","line":472,"loc":{"start":{"line":472,"column":31},"end":{"line":472,"column":52}}},"20":{"name":"onServerSocketConnection","line":485,"loc":{"start":{"line":485,"column":4},"end":{"line":485,"column":44}}},"21":{"name":"onServerSocketListening","line":489,"loc":{"start":{"line":489,"column":4},"end":{"line":489,"column":39}}},"22":{"name":"onServerSocketError","line":493,"loc":{"start":{"line":493,"column":4},"end":{"line":493,"column":38}}},"23":{"name":"onServerSocketConnection","line":498,"loc":{"start":{"line":498,"column":46},"end":{"line":498,"column":86}}},"24":{"name":"onSocketClose","line":532,"loc":{"start":{"line":532,"column":4},"end":{"line":532,"column":29}}},"25":{"name":"onConnectionError","line":537,"loc":{"start":{"line":537,"column":4},"end":{"line":537,"column":36}}},"26":{"name":"onServerSocketListening","line":554,"loc":{"start":{"line":554,"column":45},"end":{"line":554,"column":80}}},"27":{"name":"onServerSocketError","line":581,"loc":{"start":{"line":581,"column":41},"end":{"line":581,"column":75}}},"28":{"name":"makeSubChannel","line":598,"loc":{"start":{"line":598,"column":36},"end":{"line":598,"column":69}}},"29":{"name":"listen","line":652,"loc":{"start":{"line":652,"column":28},"end":{"line":652,"column":66}}},"30":{"name":"register","line":679,"loc":{"start":{"line":679,"column":30},"end":{"line":679,"column":72}}},"31":{"name":"address","line":704,"loc":{"start":{"line":704,"column":29},"end":{"line":704,"column":48}}},"32":{"name":"updatePeers","line":716,"loc":{"start":{"line":716,"column":0},"end":{"line":716,"column":31}}},"33":{"name":"drainPeer","line":749,"loc":{"start":{"line":749,"column":31},"end":{"line":749,"column":56}}},"34":{"name":"thenDeleteIt","line":762,"loc":{"start":{"line":762,"column":4},"end":{"line":762,"column":31}}},"35":{"name":"requestOptions","line":788,"loc":{"start":{"line":788,"column":36},"end":{"line":788,"column":69}}},"36":{"name":"waitForIdentified","line":828,"loc":{"start":{"line":828,"column":0},"end":{"line":828,"column":46}}},"37":{"name":"fastRequestDefaults","line":849,"loc":{"start":{"line":849,"column":0},"end":{"line":849,"column":38}}},"38":{"name":"RequestDefaults","line":896,"loc":{"start":{"line":896,"column":0},"end":{"line":896,"column":38}}},"39":{"name":"channelRequest","line":919,"loc":{"start":{"line":919,"column":29},"end":{"line":919,"column":62}}},"40":{"name":"RequestOptions","line":938,"loc":{"start":{"line":938,"column":0},"end":{"line":938,"column":39}}},"41":{"name":"RequestHeaders","line":973,"loc":{"start":{"line":973,"column":0},"end":{"line":973,"column":26}}},"42":{"name":"_request","line":979,"loc":{"start":{"line":979,"column":30},"end":{"line":979,"column":54}}},"43":{"name":"close","line":1014,"loc":{"start":{"line":1014,"column":27},"end":{"line":1014,"column":52}}},"44":{"name":"each","line":1058,"loc":{"start":{"line":1058,"column":29},"end":{"line":1058,"column":56}}},"45":{"name":"closeServerSocket","line":1079,"loc":{"start":{"line":1079,"column":4},"end":{"line":1079,"column":33}}},"46":{"name":"onClose","line":1084,"loc":{"start":{"line":1084,"column":4},"end":{"line":1084,"column":23}}},"47":{"name":"emitFastStat","line":1099,"loc":{"start":{"line":1099,"column":0},"end":{"line":1099,"column":47}}},"48":{"name":"flushStats","line":1108,"loc":{"start":{"line":1108,"column":32},"end":{"line":1108,"column":54}}},"49":{"name":"sanitySweep","line":1117,"loc":{"start":{"line":1117,"column":0},"end":{"line":1117,"column":31}}},"50":{"name":"connSweepDone","line":1127,"loc":{"start":{"line":1127,"column":31},"end":{"line":1127,"column":59}}},"51":{"name":"nextConn","line":1136,"loc":{"start":{"line":1136,"column":4},"end":{"line":1136,"column":49}}},"52":{"name":"opsSweepDone","line":1146,"loc":{"start":{"line":1146,"column":39},"end":{"line":1146,"column":63}}},"53":{"name":"deferNextConn","line":1151,"loc":{"start":{"line":1151,"column":8},"end":{"line":1151,"column":33}}},"54":{"name":"setMaxTombstoneTTL","line":1158,"loc":{"start":{"line":1158,"column":0},"end":{"line":1158,"column":33}}},"55":{"name":"isUnhealthyError","line":1173,"loc":{"start":{"line":1173,"column":38},"end":{"line":1173,"column":69}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":33}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":48}},"4":{"start":{"line":28,"column":0},"end":{"line":38,"column":1}},"5":{"start":{"line":31,"column":4},"end":{"line":35,"column":6}},"6":{"start":{"line":37,"column":4},"end":{"line":37,"column":37}},"7":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}},"8":{"start":{"line":41,"column":0},"end":{"line":43,"column":3}},"9":{"start":{"line":44,"column":0},"end":{"line":44,"column":50}},"10":{"start":{"line":45,"column":0},"end":{"line":45,"column":31}},"11":{"start":{"line":46,"column":0},"end":{"line":46,"column":25}},"12":{"start":{"line":47,"column":0},"end":{"line":47,"column":36}},"13":{"start":{"line":48,"column":0},"end":{"line":48,"column":40}},"14":{"start":{"line":49,"column":0},"end":{"line":49,"column":38}},"15":{"start":{"line":51,"column":0},"end":{"line":51,"column":41}},"16":{"start":{"line":52,"column":0},"end":{"line":52,"column":45}},"17":{"start":{"line":53,"column":0},"end":{"line":53,"column":55}},"18":{"start":{"line":54,"column":0},"end":{"line":54,"column":43}},"19":{"start":{"line":55,"column":0},"end":{"line":55,"column":67}},"20":{"start":{"line":56,"column":0},"end":{"line":56,"column":33}},"21":{"start":{"line":57,"column":0},"end":{"line":57,"column":53}},"22":{"start":{"line":58,"column":0},"end":{"line":58,"column":46}},"23":{"start":{"line":59,"column":0},"end":{"line":59,"column":61}},"24":{"start":{"line":61,"column":0},"end":{"line":61,"column":46}},"25":{"start":{"line":62,"column":0},"end":{"line":62,"column":42}},"26":{"start":{"line":63,"column":0},"end":{"line":63,"column":49}},"27":{"start":{"line":64,"column":0},"end":{"line":64,"column":48}},"28":{"start":{"line":65,"column":0},"end":{"line":65,"column":46}},"29":{"start":{"line":66,"column":0},"end":{"line":66,"column":45}},"30":{"start":{"line":67,"column":0},"end":{"line":67,"column":45}},"31":{"start":{"line":68,"column":0},"end":{"line":68,"column":38}},"32":{"start":{"line":69,"column":0},"end":{"line":69,"column":57}},"33":{"start":{"line":70,"column":0},"end":{"line":70,"column":45}},"34":{"start":{"line":71,"column":0},"end":{"line":71,"column":56}},"35":{"start":{"line":73,"column":0},"end":{"line":73,"column":44}},"36":{"start":{"line":75,"column":0},"end":{"line":75,"column":29}},"37":{"start":{"line":76,"column":0},"end":{"line":76,"column":30}},"38":{"start":{"line":78,"column":0},"end":{"line":82,"column":2}},"39":{"start":{"line":84,"column":0},"end":{"line":84,"column":40}},"40":{"start":{"line":85,"column":0},"end":{"line":85,"column":29}},"41":{"start":{"line":91,"column":0},"end":{"line":91,"column":43}},"42":{"start":{"line":92,"column":0},"end":{"line":92,"column":34}},"43":{"start":{"line":95,"column":0},"end":{"line":302,"column":1}},"44":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"45":{"start":{"line":97,"column":8},"end":{"line":97,"column":37}},"46":{"start":{"line":100,"column":4},"end":{"line":100,"column":20}},"47":{"start":{"line":101,"column":4},"end":{"line":101,"column":28}},"48":{"start":{"line":102,"column":4},"end":{"line":102,"column":48}},"49":{"start":{"line":103,"column":4},"end":{"line":103,"column":56}},"50":{"start":{"line":104,"column":4},"end":{"line":104,"column":58}},"51":{"start":{"line":105,"column":4},"end":{"line":105,"column":46}},"52":{"start":{"line":106,"column":4},"end":{"line":106,"column":32}},"53":{"start":{"line":107,"column":4},"end":{"line":107,"column":32}},"54":{"start":{"line":109,"column":4},"end":{"line":119,"column":16}},"55":{"start":{"line":121,"column":4},"end":{"line":121,"column":52}},"56":{"start":{"line":122,"column":4},"end":{"line":122,"column":54}},"57":{"start":{"line":123,"column":4},"end":{"line":123,"column":54}},"58":{"start":{"line":124,"column":4},"end":{"line":124,"column":56}},"59":{"start":{"line":125,"column":4},"end":{"line":125,"column":44}},"60":{"start":{"line":126,"column":4},"end":{"line":126,"column":44}},"61":{"start":{"line":127,"column":4},"end":{"line":129,"column":51}},"62":{"start":{"line":130,"column":4},"end":{"line":131,"column":47}},"63":{"start":{"line":132,"column":4},"end":{"line":132,"column":70}},"64":{"start":{"line":133,"column":4},"end":{"line":133,"column":76}},"65":{"start":{"line":134,"column":4},"end":{"line":134,"column":78}},"66":{"start":{"line":136,"column":4},"end":{"line":136,"column":72}},"67":{"start":{"line":139,"column":4},"end":{"line":139,"column":21}},"68":{"start":{"line":140,"column":4},"end":{"line":140,"column":30}},"69":{"start":{"line":143,"column":4},"end":{"line":143,"column":25}},"70":{"start":{"line":146,"column":4},"end":{"line":146,"column":26}},"71":{"start":{"line":147,"column":4},"end":{"line":150,"column":5}},"72":{"start":{"line":148,"column":8},"end":{"line":148,"column":52}},"73":{"start":{"line":149,"column":8},"end":{"line":149,"column":40}},"74":{"start":{"line":152,"column":4},"end":{"line":152,"column":54}},"75":{"start":{"line":153,"column":4},"end":{"line":153,"column":51}},"76":{"start":{"line":156,"column":4},"end":{"line":160,"column":7}},"77":{"start":{"line":162,"column":4},"end":{"line":168,"column":5}},"78":{"start":{"line":163,"column":8},"end":{"line":163,"column":44}},"79":{"start":{"line":164,"column":8},"end":{"line":166,"column":9}},"80":{"start":{"line":165,"column":12},"end":{"line":165,"column":60}},"81":{"start":{"line":167,"column":8},"end":{"line":167,"column":56}},"82":{"start":{"line":171,"column":4},"end":{"line":183,"column":5}},"83":{"start":{"line":172,"column":8},"end":{"line":179,"column":9}},"84":{"start":{"line":173,"column":12},"end":{"line":176,"column":15}},"85":{"start":{"line":178,"column":12},"end":{"line":178,"column":61}},"86":{"start":{"line":181,"column":8},"end":{"line":181,"column":44}},"87":{"start":{"line":182,"column":8},"end":{"line":182,"column":36}},"88":{"start":{"line":189,"column":4},"end":{"line":193,"column":5}},"89":{"start":{"line":190,"column":8},"end":{"line":190,"column":63}},"90":{"start":{"line":192,"column":8},"end":{"line":192,"column":62}},"91":{"start":{"line":196,"column":4},"end":{"line":196,"column":43}},"92":{"start":{"line":197,"column":4},"end":{"line":199,"column":5}},"93":{"start":{"line":198,"column":8},"end":{"line":198,"column":59}},"94":{"start":{"line":200,"column":4},"end":{"line":202,"column":5}},"95":{"start":{"line":201,"column":8},"end":{"line":201,"column":79}},"96":{"start":{"line":205,"column":4},"end":{"line":205,"column":26}},"97":{"start":{"line":206,"column":4},"end":{"line":206,"column":27}},"98":{"start":{"line":207,"column":4},"end":{"line":207,"column":27}},"99":{"start":{"line":208,"column":4},"end":{"line":208,"column":26}},"100":{"start":{"line":211,"column":4},"end":{"line":211,"column":26}},"101":{"start":{"line":212,"column":4},"end":{"line":212,"column":28}},"102":{"start":{"line":214,"column":4},"end":{"line":215,"column":34}},"103":{"start":{"line":217,"column":4},"end":{"line":224,"column":5}},"104":{"start":{"line":218,"column":8},"end":{"line":223,"column":11}},"105":{"start":{"line":226,"column":4},"end":{"line":230,"column":5}},"106":{"start":{"line":227,"column":8},"end":{"line":227,"column":52}},"107":{"start":{"line":229,"column":8},"end":{"line":229,"column":32}},"108":{"start":{"line":233,"column":4},"end":{"line":233,"column":29}},"109":{"start":{"line":234,"column":4},"end":{"line":234,"column":34}},"110":{"start":{"line":236,"column":4},"end":{"line":236,"column":45}},"111":{"start":{"line":237,"column":4},"end":{"line":237,"column":41}},"112":{"start":{"line":239,"column":4},"end":{"line":239,"column":38}},"113":{"start":{"line":240,"column":4},"end":{"line":240,"column":27}},"114":{"start":{"line":242,"column":4},"end":{"line":243,"column":65}},"115":{"start":{"line":245,"column":4},"end":{"line":264,"column":5}},"116":{"start":{"line":246,"column":8},"end":{"line":259,"column":9}},"117":{"start":{"line":247,"column":12},"end":{"line":247,"column":54}},"118":{"start":{"line":248,"column":12},"end":{"line":248,"column":45}},"119":{"start":{"line":250,"column":12},"end":{"line":255,"column":15}},"120":{"start":{"line":256,"column":12},"end":{"line":256,"column":44}},"121":{"start":{"line":258,"column":12},"end":{"line":258,"column":41}},"122":{"start":{"line":261,"column":8},"end":{"line":261,"column":80}},"123":{"start":{"line":263,"column":8},"end":{"line":263,"column":53}},"124":{"start":{"line":266,"column":4},"end":{"line":273,"column":5}},"125":{"start":{"line":267,"column":8},"end":{"line":272,"column":11}},"126":{"start":{"line":275,"column":4},"end":{"line":275,"column":47}},"127":{"start":{"line":276,"column":4},"end":{"line":276,"column":24}},"128":{"start":{"line":278,"column":4},"end":{"line":281,"column":5}},"129":{"start":{"line":279,"column":8},"end":{"line":279,"column":32}},"130":{"start":{"line":280,"column":8},"end":{"line":280,"column":36}},"131":{"start":{"line":283,"column":4},"end":{"line":288,"column":5}},"132":{"start":{"line":284,"column":8},"end":{"line":286,"column":9}},"133":{"start":{"line":285,"column":12},"end":{"line":285,"column":19}},"134":{"start":{"line":287,"column":8},"end":{"line":287,"column":80}},"135":{"start":{"line":291,"column":4},"end":{"line":291,"column":98}},"136":{"start":{"line":292,"column":4},"end":{"line":292,"column":79}},"137":{"start":{"line":293,"column":4},"end":{"line":293,"column":76}},"138":{"start":{"line":294,"column":4},"end":{"line":294,"column":34}},"139":{"start":{"line":295,"column":4},"end":{"line":301,"column":5}},"140":{"start":{"line":296,"column":8},"end":{"line":300,"column":11}},"141":{"start":{"line":303,"column":0},"end":{"line":303,"column":33}},"142":{"start":{"line":306,"column":0},"end":{"line":318,"column":2}},"143":{"start":{"line":308,"column":4},"end":{"line":308,"column":20}},"144":{"start":{"line":310,"column":4},"end":{"line":310,"column":33}},"145":{"start":{"line":312,"column":4},"end":{"line":312,"column":45}},"146":{"start":{"line":313,"column":4},"end":{"line":317,"column":5}},"147":{"start":{"line":314,"column":8},"end":{"line":314,"column":48}},"148":{"start":{"line":316,"column":8},"end":{"line":316,"column":40}},"149":{"start":{"line":320,"column":0},"end":{"line":327,"column":2}},"150":{"start":{"line":322,"column":4},"end":{"line":322,"column":20}},"151":{"start":{"line":323,"column":4},"end":{"line":325,"column":5}},"152":{"start":{"line":324,"column":8},"end":{"line":324,"column":49}},"153":{"start":{"line":326,"column":4},"end":{"line":326,"column":73}},"154":{"start":{"line":329,"column":0},"end":{"line":333,"column":2}},"155":{"start":{"line":331,"column":4},"end":{"line":331,"column":20}},"156":{"start":{"line":332,"column":4},"end":{"line":332,"column":63}},"157":{"start":{"line":335,"column":0},"end":{"line":345,"column":2}},"158":{"start":{"line":337,"column":4},"end":{"line":337,"column":20}},"159":{"start":{"line":339,"column":4},"end":{"line":339,"column":53}},"160":{"start":{"line":340,"column":4},"end":{"line":340,"column":36}},"161":{"start":{"line":342,"column":4},"end":{"line":344,"column":5}},"162":{"start":{"line":343,"column":8},"end":{"line":343,"column":57}},"163":{"start":{"line":347,"column":0},"end":{"line":358,"column":2}},"164":{"start":{"line":349,"column":4},"end":{"line":349,"column":20}},"165":{"start":{"line":351,"column":4},"end":{"line":351,"column":34}},"166":{"start":{"line":352,"column":4},"end":{"line":352,"column":41}},"167":{"start":{"line":353,"column":4},"end":{"line":353,"column":43}},"168":{"start":{"line":354,"column":4},"end":{"line":354,"column":43}},"169":{"start":{"line":355,"column":4},"end":{"line":355,"column":41}},"170":{"start":{"line":357,"column":4},"end":{"line":357,"column":16}},"171":{"start":{"line":360,"column":0},"end":{"line":378,"column":2}},"172":{"start":{"line":361,"column":4},"end":{"line":361,"column":20}},"173":{"start":{"line":363,"column":4},"end":{"line":363,"column":36}},"174":{"start":{"line":364,"column":4},"end":{"line":364,"column":10}},"175":{"start":{"line":365,"column":4},"end":{"line":370,"column":5}},"176":{"start":{"line":366,"column":8},"end":{"line":366,"column":28}},"177":{"start":{"line":367,"column":8},"end":{"line":369,"column":9}},"178":{"start":{"line":368,"column":12},"end":{"line":368,"column":38}},"179":{"start":{"line":372,"column":4},"end":{"line":377,"column":5}},"180":{"start":{"line":373,"column":8},"end":{"line":373,"column":59}},"181":{"start":{"line":374,"column":8},"end":{"line":376,"column":9}},"182":{"start":{"line":375,"column":12},"end":{"line":375,"column":54}},"183":{"start":{"line":380,"column":0},"end":{"line":391,"column":2}},"184":{"start":{"line":382,"column":4},"end":{"line":382,"column":20}},"185":{"start":{"line":384,"column":4},"end":{"line":390,"column":5}},"186":{"start":{"line":385,"column":8},"end":{"line":385,"column":62}},"187":{"start":{"line":386,"column":8},"end":{"line":386,"column":62}},"188":{"start":{"line":388,"column":8},"end":{"line":388,"column":36}},"189":{"start":{"line":389,"column":8},"end":{"line":389,"column":36}},"190":{"start":{"line":393,"column":0},"end":{"line":396,"column":2}},"191":{"start":{"line":398,"column":0},"end":{"line":405,"column":2}},"192":{"start":{"line":400,"column":4},"end":{"line":400,"column":20}},"193":{"start":{"line":401,"column":4},"end":{"line":401,"column":38}},"194":{"start":{"line":402,"column":4},"end":{"line":404,"column":5}},"195":{"start":{"line":403,"column":8},"end":{"line":403,"column":50}},"196":{"start":{"line":407,"column":0},"end":{"line":422,"column":2}},"197":{"start":{"line":409,"column":4},"end":{"line":409,"column":20}},"198":{"start":{"line":411,"column":4},"end":{"line":414,"column":5}},"199":{"start":{"line":412,"column":8},"end":{"line":412,"column":49}},"200":{"start":{"line":413,"column":8},"end":{"line":413,"column":15}},"201":{"start":{"line":416,"column":4},"end":{"line":416,"column":43}},"202":{"start":{"line":417,"column":4},"end":{"line":417,"column":40}},"203":{"start":{"line":419,"column":4},"end":{"line":421,"column":5}},"204":{"start":{"line":420,"column":8},"end":{"line":420,"column":38}},"205":{"start":{"line":424,"column":0},"end":{"line":442,"column":2}},"206":{"start":{"line":426,"column":4},"end":{"line":426,"column":20}},"207":{"start":{"line":428,"column":4},"end":{"line":431,"column":5}},"208":{"start":{"line":429,"column":8},"end":{"line":429,"column":49}},"209":{"start":{"line":430,"column":8},"end":{"line":430,"column":15}},"210":{"start":{"line":433,"column":4},"end":{"line":433,"column":43}},"211":{"start":{"line":435,"column":4},"end":{"line":435,"column":45}},"212":{"start":{"line":436,"column":4},"end":{"line":441,"column":5}},"213":{"start":{"line":437,"column":8},"end":{"line":437,"column":48}},"214":{"start":{"line":438,"column":8},"end":{"line":440,"column":9}},"215":{"start":{"line":439,"column":12},"end":{"line":439,"column":50}},"216":{"start":{"line":444,"column":0},"end":{"line":470,"column":2}},"217":{"start":{"line":445,"column":4},"end":{"line":445,"column":20}},"218":{"start":{"line":451,"column":4},"end":{"line":451,"column":67}},"219":{"start":{"line":452,"column":4},"end":{"line":452,"column":55}},"220":{"start":{"line":454,"column":4},"end":{"line":454,"column":25}},"221":{"start":{"line":455,"column":4},"end":{"line":455,"column":30}},"222":{"start":{"line":457,"column":4},"end":{"line":457,"column":40}},"223":{"start":{"line":458,"column":4},"end":{"line":458,"column":22}},"224":{"start":{"line":459,"column":4},"end":{"line":459,"column":39}},"225":{"start":{"line":460,"column":4},"end":{"line":460,"column":37}},"226":{"start":{"line":461,"column":4},"end":{"line":464,"column":8}},"227":{"start":{"line":466,"column":4},"end":{"line":469,"column":5}},"228":{"start":{"line":467,"column":8},"end":{"line":467,"column":26}},"229":{"start":{"line":468,"column":8},"end":{"line":468,"column":53}},"230":{"start":{"line":472,"column":0},"end":{"line":496,"column":2}},"231":{"start":{"line":473,"column":4},"end":{"line":473,"column":20}},"232":{"start":{"line":474,"column":4},"end":{"line":476,"column":5}},"233":{"start":{"line":475,"column":8},"end":{"line":475,"column":33}},"234":{"start":{"line":478,"column":4},"end":{"line":478,"column":49}},"235":{"start":{"line":479,"column":4},"end":{"line":479,"column":67}},"236":{"start":{"line":480,"column":4},"end":{"line":480,"column":63}},"237":{"start":{"line":481,"column":4},"end":{"line":481,"column":55}},"238":{"start":{"line":483,"column":4},"end":{"line":483,"column":29}},"239":{"start":{"line":485,"column":4},"end":{"line":487,"column":5}},"240":{"start":{"line":486,"column":8},"end":{"line":486,"column":44}},"241":{"start":{"line":489,"column":4},"end":{"line":491,"column":5}},"242":{"start":{"line":490,"column":8},"end":{"line":490,"column":39}},"243":{"start":{"line":493,"column":4},"end":{"line":495,"column":5}},"244":{"start":{"line":494,"column":8},"end":{"line":494,"column":38}},"245":{"start":{"line":498,"column":0},"end":{"line":552,"column":2}},"246":{"start":{"line":499,"column":4},"end":{"line":499,"column":20}},"247":{"start":{"line":501,"column":4},"end":{"line":507,"column":5}},"248":{"start":{"line":502,"column":8},"end":{"line":505,"column":12}},"249":{"start":{"line":506,"column":8},"end":{"line":506,"column":15}},"250":{"start":{"line":509,"column":4},"end":{"line":509,"column":70}},"251":{"start":{"line":510,"column":4},"end":{"line":510,"column":39}},"252":{"start":{"line":511,"column":4},"end":{"line":511,"column":74}},"253":{"start":{"line":513,"column":4},"end":{"line":515,"column":5}},"254":{"start":{"line":514,"column":8},"end":{"line":514,"column":43}},"255":{"start":{"line":517,"column":4},"end":{"line":517,"column":42}},"256":{"start":{"line":519,"column":4},"end":{"line":525,"column":5}},"257":{"start":{"line":520,"column":8},"end":{"line":520,"column":63}},"258":{"start":{"line":521,"column":8},"end":{"line":523,"column":12}},"259":{"start":{"line":524,"column":8},"end":{"line":524,"column":56}},"260":{"start":{"line":527,"column":4},"end":{"line":527,"column":36}},"261":{"start":{"line":529,"column":4},"end":{"line":529,"column":52}},"262":{"start":{"line":530,"column":4},"end":{"line":530,"column":42}},"263":{"start":{"line":532,"column":4},"end":{"line":534,"column":5}},"264":{"start":{"line":533,"column":8},"end":{"line":533,"column":56}},"265":{"start":{"line":537,"column":4},"end":{"line":551,"column":5}},"266":{"start":{"line":538,"column":8},"end":{"line":538,"column":44}},"267":{"start":{"line":540,"column":8},"end":{"line":542,"column":11}},"268":{"start":{"line":544,"column":8},"end":{"line":549,"column":9}},"269":{"start":{"line":546,"column":12},"end":{"line":546,"column":67}},"270":{"start":{"line":548,"column":12},"end":{"line":548,"column":80}},"271":{"start":{"line":550,"column":8},"end":{"line":550,"column":56}},"272":{"start":{"line":554,"column":0},"end":{"line":579,"column":2}},"273":{"start":{"line":555,"column":4},"end":{"line":555,"column":20}},"274":{"start":{"line":557,"column":4},"end":{"line":562,"column":5}},"275":{"start":{"line":558,"column":8},"end":{"line":560,"column":12}},"276":{"start":{"line":561,"column":8},"end":{"line":561,"column":15}},"277":{"start":{"line":564,"column":4},"end":{"line":564,"column":46}},"278":{"start":{"line":565,"column":4},"end":{"line":565,"column":51}},"279":{"start":{"line":566,"column":4},"end":{"line":566,"column":26}},"280":{"start":{"line":568,"column":4},"end":{"line":576,"column":5}},"281":{"start":{"line":569,"column":8},"end":{"line":569,"column":57}},"282":{"start":{"line":570,"column":8},"end":{"line":575,"column":9}},"283":{"start":{"line":571,"column":12},"end":{"line":571,"column":57}},"284":{"start":{"line":572,"column":12},"end":{"line":574,"column":13}},"285":{"start":{"line":573,"column":16},"end":{"line":573,"column":46}},"286":{"start":{"line":578,"column":4},"end":{"line":578,"column":35}},"287":{"start":{"line":581,"column":0},"end":{"line":596,"column":2}},"288":{"start":{"line":582,"column":4},"end":{"line":582,"column":20}},"289":{"start":{"line":584,"column":4},"end":{"line":589,"column":5}},"290":{"start":{"line":585,"column":8},"end":{"line":588,"column":11}},"291":{"start":{"line":590,"column":4},"end":{"line":594,"column":8}},"292":{"start":{"line":595,"column":4},"end":{"line":595,"column":36}},"293":{"start":{"line":598,"column":0},"end":{"line":650,"column":2}},"294":{"start":{"line":599,"column":4},"end":{"line":599,"column":20}},"295":{"start":{"line":600,"column":4},"end":{"line":602,"column":5}},"296":{"start":{"line":601,"column":8},"end":{"line":601,"column":21}},"297":{"start":{"line":603,"column":4},"end":{"line":603,"column":78}},"298":{"start":{"line":604,"column":4},"end":{"line":604,"column":60}},"299":{"start":{"line":605,"column":4},"end":{"line":605,"column":85}},"300":{"start":{"line":606,"column":4},"end":{"line":606,"column":36}},"301":{"start":{"line":607,"column":4},"end":{"line":607,"column":36}},"302":{"start":{"line":608,"column":4},"end":{"line":615,"column":5}},"303":{"start":{"line":609,"column":8},"end":{"line":614,"column":9}},"304":{"start":{"line":611,"column":16},"end":{"line":611,"column":22}},"305":{"start":{"line":613,"column":16},"end":{"line":613,"column":49}},"306":{"start":{"line":617,"column":4},"end":{"line":617,"column":27}},"307":{"start":{"line":618,"column":4},"end":{"line":618,"column":34}},"308":{"start":{"line":620,"column":4},"end":{"line":620,"column":59}},"309":{"start":{"line":621,"column":4},"end":{"line":621,"column":47}},"310":{"start":{"line":623,"column":4},"end":{"line":623,"column":30}},"311":{"start":{"line":625,"column":4},"end":{"line":631,"column":5}},"312":{"start":{"line":626,"column":8},"end":{"line":630,"column":9}},"313":{"start":{"line":627,"column":12},"end":{"line":629,"column":13}},"314":{"start":{"line":628,"column":16},"end":{"line":628,"column":49}},"315":{"start":{"line":632,"column":4},"end":{"line":632,"column":46}},"316":{"start":{"line":636,"column":4},"end":{"line":636,"column":30}},"317":{"start":{"line":638,"column":4},"end":{"line":640,"column":5}},"318":{"start":{"line":639,"column":8},"end":{"line":639,"column":38}},"319":{"start":{"line":642,"column":4},"end":{"line":647,"column":5}},"320":{"start":{"line":643,"column":8},"end":{"line":646,"column":11}},"321":{"start":{"line":649,"column":4},"end":{"line":649,"column":16}},"322":{"start":{"line":652,"column":0},"end":{"line":677,"column":2}},"323":{"start":{"line":657,"column":4},"end":{"line":657,"column":20}},"324":{"start":{"line":659,"column":4},"end":{"line":659,"column":68}},"325":{"start":{"line":660,"column":4},"end":{"line":660,"column":60}},"326":{"start":{"line":662,"column":4},"end":{"line":662,"column":15}},"327":{"start":{"line":663,"column":4},"end":{"line":663,"column":41}},"328":{"start":{"line":664,"column":4},"end":{"line":666,"column":5}},"329":{"start":{"line":665,"column":8},"end":{"line":665,"column":30}},"330":{"start":{"line":668,"column":4},"end":{"line":668,"column":47}},"331":{"start":{"line":669,"column":4},"end":{"line":671,"column":5}},"332":{"start":{"line":670,"column":8},"end":{"line":670,"column":30}},"333":{"start":{"line":673,"column":4},"end":{"line":673,"column":25}},"334":{"start":{"line":674,"column":4},"end":{"line":674,"column":30}},"335":{"start":{"line":675,"column":4},"end":{"line":675,"column":21}},"336":{"start":{"line":676,"column":4},"end":{"line":676,"column":50}},"337":{"start":{"line":679,"column":0},"end":{"line":702,"column":2}},"338":{"start":{"line":680,"column":4},"end":{"line":680,"column":20}},"339":{"start":{"line":682,"column":4},"end":{"line":682,"column":56}},"340":{"start":{"line":684,"column":4},"end":{"line":701,"column":5}},"341":{"start":{"line":686,"column":12},"end":{"line":686,"column":58}},"342":{"start":{"line":687,"column":12},"end":{"line":687,"column":18}},"343":{"start":{"line":690,"column":12},"end":{"line":690,"column":49}},"344":{"start":{"line":693,"column":12},"end":{"line":700,"column":13}},"345":{"start":{"line":694,"column":16},"end":{"line":694,"column":62}},"346":{"start":{"line":696,"column":16},"end":{"line":699,"column":19}},"347":{"start":{"line":704,"column":0},"end":{"line":713,"column":2}},"348":{"start":{"line":705,"column":4},"end":{"line":705,"column":20}},"349":{"start":{"line":706,"column":4},"end":{"line":712,"column":5}},"350":{"start":{"line":707,"column":8},"end":{"line":707,"column":51}},"351":{"start":{"line":708,"column":11},"end":{"line":712,"column":5}},"352":{"start":{"line":709,"column":8},"end":{"line":709,"column":41}},"353":{"start":{"line":711,"column":8},"end":{"line":711,"column":20}},"354":{"start":{"line":715,"column":0},"end":{"line":747,"column":2}},"355":{"start":{"line":719,"column":4},"end":{"line":719,"column":45}},"356":{"start":{"line":721,"column":4},"end":{"line":721,"column":10}},"357":{"start":{"line":724,"column":4},"end":{"line":728,"column":5}},"358":{"start":{"line":725,"column":8},"end":{"line":727,"column":9}},"359":{"start":{"line":726,"column":12},"end":{"line":726,"column":40}},"360":{"start":{"line":731,"column":4},"end":{"line":742,"column":5}},"361":{"start":{"line":732,"column":8},"end":{"line":741,"column":9}},"362":{"start":{"line":733,"column":12},"end":{"line":735,"column":15}},"363":{"start":{"line":737,"column":12},"end":{"line":737,"column":51}},"364":{"start":{"line":738,"column":12},"end":{"line":738,"column":43}},"365":{"start":{"line":740,"column":12},"end":{"line":740,"column":33}},"366":{"start":{"line":744,"column":4},"end":{"line":746,"column":7}},"367":{"start":{"line":749,"column":0},"end":{"line":778,"column":2}},"368":{"start":{"line":750,"column":4},"end":{"line":750,"column":20}},"369":{"start":{"line":751,"column":4},"end":{"line":753,"column":5}},"370":{"start":{"line":752,"column":8},"end":{"line":752,"column":15}},"371":{"start":{"line":755,"column":4},"end":{"line":760,"column":21}},"372":{"start":{"line":762,"column":4},"end":{"line":777,"column":5}},"373":{"start":{"line":763,"column":8},"end":{"line":770,"column":9}},"374":{"start":{"line":764,"column":12},"end":{"line":769,"column":14}},"375":{"start":{"line":772,"column":8},"end":{"line":776,"column":9}},"376":{"start":{"line":773,"column":12},"end":{"line":773,"column":56}},"377":{"start":{"line":775,"column":12},"end":{"line":775,"column":45}},"378":{"start":{"line":788,"column":0},"end":{"line":825,"column":2}},"379":{"start":{"line":789,"column":4},"end":{"line":789,"column":20}},"380":{"start":{"line":790,"column":4},"end":{"line":790,"column":13}},"381":{"start":{"line":791,"column":4},"end":{"line":791,"column":18}},"382":{"start":{"line":792,"column":4},"end":{"line":798,"column":5}},"383":{"start":{"line":793,"column":8},"end":{"line":795,"column":9}},"384":{"start":{"line":794,"column":12},"end":{"line":794,"column":21}},"385":{"start":{"line":797,"column":8},"end":{"line":797,"column":48}},"386":{"start":{"line":799,"column":4},"end":{"line":799,"column":22}},"387":{"start":{"line":800,"column":4},"end":{"line":806,"column":5}},"388":{"start":{"line":802,"column":8},"end":{"line":804,"column":9}},"389":{"start":{"line":803,"column":12},"end":{"line":803,"column":68}},"390":{"start":{"line":808,"column":4},"end":{"line":815,"column":5}},"391":{"start":{"line":809,"column":8},"end":{"line":814,"column":9}},"392":{"start":{"line":810,"column":12},"end":{"line":812,"column":13}},"393":{"start":{"line":811,"column":16},"end":{"line":811,"column":25}},"394":{"start":{"line":813,"column":12},"end":{"line":813,"column":39}},"395":{"start":{"line":816,"column":4},"end":{"line":823,"column":5}},"396":{"start":{"line":817,"column":8},"end":{"line":817,"column":36}},"397":{"start":{"line":819,"column":8},"end":{"line":821,"column":9}},"398":{"start":{"line":820,"column":12},"end":{"line":820,"column":55}},"399":{"start":{"line":824,"column":4},"end":{"line":824,"column":16}},"400":{"start":{"line":827,"column":0},"end":{"line":837,"column":2}},"401":{"start":{"line":829,"column":4},"end":{"line":829,"column":20}},"402":{"start":{"line":830,"column":4},"end":{"line":836,"column":5}},"403":{"start":{"line":831,"column":8},"end":{"line":831,"column":50}},"404":{"start":{"line":833,"column":8},"end":{"line":833,"column":77}},"405":{"start":{"line":834,"column":8},"end":{"line":834,"column":48}},"406":{"start":{"line":835,"column":8},"end":{"line":835,"column":41}},"407":{"start":{"line":848,"column":0},"end":{"line":894,"column":2}},"408":{"start":{"line":850,"column":4},"end":{"line":850,"column":20}},"409":{"start":{"line":852,"column":4},"end":{"line":852,"column":40}},"410":{"start":{"line":853,"column":4},"end":{"line":855,"column":5}},"411":{"start":{"line":854,"column":8},"end":{"line":854,"column":15}},"412":{"start":{"line":857,"column":4},"end":{"line":859,"column":5}},"413":{"start":{"line":858,"column":8},"end":{"line":858,"column":43}},"414":{"start":{"line":860,"column":4},"end":{"line":862,"column":5}},"415":{"start":{"line":861,"column":8},"end":{"line":861,"column":49}},"416":{"start":{"line":863,"column":4},"end":{"line":865,"column":5}},"417":{"start":{"line":864,"column":8},"end":{"line":864,"column":51}},"418":{"start":{"line":866,"column":4},"end":{"line":868,"column":5}},"419":{"start":{"line":867,"column":8},"end":{"line":867,"column":53}},"420":{"start":{"line":869,"column":4},"end":{"line":871,"column":5}},"421":{"start":{"line":870,"column":8},"end":{"line":870,"column":53}},"422":{"start":{"line":872,"column":4},"end":{"line":874,"column":5}},"423":{"start":{"line":873,"column":8},"end":{"line":873,"column":51}},"424":{"start":{"line":875,"column":4},"end":{"line":877,"column":5}},"425":{"start":{"line":876,"column":8},"end":{"line":876,"column":39}},"426":{"start":{"line":878,"column":4},"end":{"line":880,"column":5}},"427":{"start":{"line":879,"column":8},"end":{"line":879,"column":49}},"428":{"start":{"line":881,"column":4},"end":{"line":885,"column":5}},"429":{"start":{"line":884,"column":8},"end":{"line":884,"column":73}},"430":{"start":{"line":887,"column":4},"end":{"line":893,"column":5}},"431":{"start":{"line":888,"column":8},"end":{"line":892,"column":9}},"432":{"start":{"line":889,"column":12},"end":{"line":891,"column":13}},"433":{"start":{"line":890,"column":16},"end":{"line":890,"column":61}},"434":{"start":{"line":896,"column":0},"end":{"line":917,"column":1}},"435":{"start":{"line":897,"column":4},"end":{"line":897,"column":44}},"436":{"start":{"line":898,"column":4},"end":{"line":898,"column":50}},"437":{"start":{"line":899,"column":4},"end":{"line":899,"column":53}},"438":{"start":{"line":901,"column":4},"end":{"line":901,"column":80}},"439":{"start":{"line":902,"column":4},"end":{"line":902,"column":49}},"440":{"start":{"line":904,"column":4},"end":{"line":904,"column":79}},"441":{"start":{"line":905,"column":4},"end":{"line":905,"column":54}},"442":{"start":{"line":907,"column":4},"end":{"line":907,"column":78}},"443":{"start":{"line":908,"column":4},"end":{"line":908,"column":56}},"444":{"start":{"line":910,"column":4},"end":{"line":910,"column":66}},"445":{"start":{"line":911,"column":4},"end":{"line":911,"column":44}},"446":{"start":{"line":913,"column":4},"end":{"line":913,"column":53}},"447":{"start":{"line":914,"column":4},"end":{"line":914,"column":77}},"448":{"start":{"line":916,"column":4},"end":{"line":916,"column":39}},"449":{"start":{"line":919,"column":0},"end":{"line":936,"column":2}},"450":{"start":{"line":920,"column":4},"end":{"line":920,"column":20}},"451":{"start":{"line":922,"column":4},"end":{"line":922,"column":28}},"452":{"start":{"line":924,"column":4},"end":{"line":924,"column":49}},"453":{"start":{"line":925,"column":4},"end":{"line":925,"column":35}},"454":{"start":{"line":927,"column":4},"end":{"line":933,"column":5}},"455":{"start":{"line":928,"column":8},"end":{"line":932,"column":9}},"456":{"start":{"line":929,"column":12},"end":{"line":929,"column":30}},"457":{"start":{"line":931,"column":12},"end":{"line":931,"column":31}},"458":{"start":{"line":935,"column":4},"end":{"line":935,"column":31}},"459":{"start":{"line":938,"column":0},"end":{"line":971,"column":1}},"460":{"start":{"line":940,"column":4},"end":{"line":940,"column":27}},"461":{"start":{"line":942,"column":4},"end":{"line":942,"column":32}},"462":{"start":{"line":943,"column":4},"end":{"line":943,"column":43}},"463":{"start":{"line":944,"column":4},"end":{"line":944,"column":37}},"464":{"start":{"line":945,"column":4},"end":{"line":945,"column":43}},"465":{"start":{"line":946,"column":4},"end":{"line":946,"column":46}},"466":{"start":{"line":947,"column":4},"end":{"line":947,"column":73}},"467":{"start":{"line":948,"column":4},"end":{"line":948,"column":51}},"468":{"start":{"line":949,"column":4},"end":{"line":949,"column":50}},"469":{"start":{"line":950,"column":4},"end":{"line":950,"column":71}},"470":{"start":{"line":951,"column":4},"end":{"line":951,"column":49}},"471":{"start":{"line":952,"column":4},"end":{"line":952,"column":51}},"472":{"start":{"line":953,"column":4},"end":{"line":953,"column":59}},"473":{"start":{"line":954,"column":4},"end":{"line":954,"column":58}},"474":{"start":{"line":955,"column":4},"end":{"line":955,"column":50}},"475":{"start":{"line":956,"column":4},"end":{"line":956,"column":61}},"476":{"start":{"line":957,"column":4},"end":{"line":957,"column":70}},"477":{"start":{"line":958,"column":4},"end":{"line":958,"column":38}},"478":{"start":{"line":959,"column":4},"end":{"line":959,"column":40}},"479":{"start":{"line":960,"column":4},"end":{"line":960,"column":34}},"480":{"start":{"line":961,"column":4},"end":{"line":961,"column":57}},"481":{"start":{"line":962,"column":4},"end":{"line":962,"column":42}},"482":{"start":{"line":965,"column":4},"end":{"line":965,"column":56}},"483":{"start":{"line":967,"column":4},"end":{"line":967,"column":24}},"484":{"start":{"line":968,"column":4},"end":{"line":968,"column":25}},"485":{"start":{"line":969,"column":4},"end":{"line":969,"column":27}},"486":{"start":{"line":970,"column":4},"end":{"line":970,"column":25}},"487":{"start":{"line":973,"column":0},"end":{"line":977,"column":1}},"488":{"start":{"line":974,"column":4},"end":{"line":974,"column":17}},"489":{"start":{"line":975,"column":4},"end":{"line":975,"column":17}},"490":{"start":{"line":976,"column":4},"end":{"line":976,"column":17}},"491":{"start":{"line":979,"column":0},"end":{"line":1011,"column":2}},"492":{"start":{"line":980,"column":4},"end":{"line":980,"column":20}},"493":{"start":{"line":982,"column":4},"end":{"line":982,"column":70}},"494":{"start":{"line":983,"column":4},"end":{"line":985,"column":5}},"495":{"start":{"line":984,"column":8},"end":{"line":984,"column":44}},"496":{"start":{"line":987,"column":4},"end":{"line":987,"column":19}},"497":{"start":{"line":989,"column":4},"end":{"line":1008,"column":5}},"498":{"start":{"line":990,"column":8},"end":{"line":990,"column":28}},"499":{"start":{"line":991,"column":8},"end":{"line":991,"column":38}},"500":{"start":{"line":992,"column":11},"end":{"line":1008,"column":5}},"501":{"start":{"line":993,"column":8},"end":{"line":993,"column":28}},"502":{"start":{"line":994,"column":8},"end":{"line":994,"column":46}},"503":{"start":{"line":995,"column":8},"end":{"line":995,"column":38}},"504":{"start":{"line":997,"column":11},"end":{"line":1008,"column":5}},"505":{"start":{"line":998,"column":8},"end":{"line":998,"column":28}},"506":{"start":{"line":1000,"column":8},"end":{"line":1000,"column":44}},"507":{"start":{"line":1001,"column":8},"end":{"line":1004,"column":9}},"508":{"start":{"line":1003,"column":12},"end":{"line":1003,"column":43}},"509":{"start":{"line":1005,"column":8},"end":{"line":1005,"column":38}},"510":{"start":{"line":1007,"column":8},"end":{"line":1007,"column":40}},"511":{"start":{"line":1010,"column":4},"end":{"line":1010,"column":15}},"512":{"start":{"line":1013,"column":0},"end":{"line":1096,"column":2}},"513":{"start":{"line":1015,"column":4},"end":{"line":1015,"column":20}},"514":{"start":{"line":1016,"column":4},"end":{"line":1016,"column":53}},"515":{"start":{"line":1017,"column":4},"end":{"line":1017,"column":26}},"516":{"start":{"line":1019,"column":4},"end":{"line":1019,"column":20}},"517":{"start":{"line":1021,"column":4},"end":{"line":1023,"column":5}},"518":{"start":{"line":1022,"column":8},"end":{"line":1022,"column":31}},"519":{"start":{"line":1025,"column":4},"end":{"line":1027,"column":5}},"520":{"start":{"line":1026,"column":8},"end":{"line":1026,"column":27}},"521":{"start":{"line":1029,"column":4},"end":{"line":1032,"column":5}},"522":{"start":{"line":1030,"column":8},"end":{"line":1030,"column":51}},"523":{"start":{"line":1031,"column":8},"end":{"line":1031,"column":32}},"524":{"start":{"line":1034,"column":4},"end":{"line":1036,"column":5}},"525":{"start":{"line":1035,"column":8},"end":{"line":1035,"column":41}},"526":{"start":{"line":1038,"column":4},"end":{"line":1045,"column":5}},"527":{"start":{"line":1039,"column":8},"end":{"line":1039,"column":18}},"528":{"start":{"line":1040,"column":8},"end":{"line":1044,"column":9}},"529":{"start":{"line":1041,"column":12},"end":{"line":1041,"column":32}},"530":{"start":{"line":1043,"column":12},"end":{"line":1043,"column":67}},"531":{"start":{"line":1047,"column":4},"end":{"line":1054,"column":5}},"532":{"start":{"line":1048,"column":8},"end":{"line":1048,"column":64}},"533":{"start":{"line":1049,"column":8},"end":{"line":1053,"column":9}},"534":{"start":{"line":1050,"column":12},"end":{"line":1050,"column":22}},"535":{"start":{"line":1051,"column":12},"end":{"line":1051,"column":72}},"536":{"start":{"line":1052,"column":12},"end":{"line":1052,"column":40}},"537":{"start":{"line":1056,"column":4},"end":{"line":1065,"column":5}},"538":{"start":{"line":1057,"column":8},"end":{"line":1057,"column":57}},"539":{"start":{"line":1058,"column":8},"end":{"line":1064,"column":11}},"540":{"start":{"line":1059,"column":12},"end":{"line":1059,"column":56}},"541":{"start":{"line":1060,"column":12},"end":{"line":1063,"column":13}},"542":{"start":{"line":1061,"column":16},"end":{"line":1061,"column":26}},"543":{"start":{"line":1062,"column":16},"end":{"line":1062,"column":39}},"544":{"start":{"line":1067,"column":4},"end":{"line":1072,"column":5}},"545":{"start":{"line":1068,"column":8},"end":{"line":1070,"column":9}},"546":{"start":{"line":1069,"column":12},"end":{"line":1069,"column":38}},"547":{"start":{"line":1071,"column":8},"end":{"line":1071,"column":30}},"548":{"start":{"line":1074,"column":4},"end":{"line":1074,"column":14}},"549":{"start":{"line":1075,"column":4},"end":{"line":1075,"column":30}},"550":{"start":{"line":1077,"column":4},"end":{"line":1077,"column":14}},"551":{"start":{"line":1079,"column":4},"end":{"line":1082,"column":5}},"552":{"start":{"line":1080,"column":8},"end":{"line":1080,"column":49}},"553":{"start":{"line":1081,"column":8},"end":{"line":1081,"column":34}},"554":{"start":{"line":1084,"column":4},"end":{"line":1095,"column":5}},"555":{"start":{"line":1085,"column":8},"end":{"line":1094,"column":9}},"556":{"start":{"line":1086,"column":12},"end":{"line":1090,"column":13}},"557":{"start":{"line":1087,"column":16},"end":{"line":1089,"column":20}},"558":{"start":{"line":1091,"column":12},"end":{"line":1093,"column":13}},"559":{"start":{"line":1092,"column":16},"end":{"line":1092,"column":27}},"560":{"start":{"line":1098,"column":0},"end":{"line":1106,"column":2}},"561":{"start":{"line":1100,"column":4},"end":{"line":1100,"column":20}},"562":{"start":{"line":1102,"column":4},"end":{"line":1102,"column":65}},"563":{"start":{"line":1104,"column":4},"end":{"line":1104,"column":62}},"564":{"start":{"line":1105,"column":4},"end":{"line":1105,"column":48}},"565":{"start":{"line":1108,"column":0},"end":{"line":1114,"column":2}},"566":{"start":{"line":1109,"column":4},"end":{"line":1109,"column":20}},"567":{"start":{"line":1111,"column":4},"end":{"line":1113,"column":5}},"568":{"start":{"line":1112,"column":8},"end":{"line":1112,"column":37}},"569":{"start":{"line":1116,"column":0},"end":{"line":1155,"column":2}},"570":{"start":{"line":1118,"column":4},"end":{"line":1118,"column":20}},"571":{"start":{"line":1120,"column":4},"end":{"line":1123,"column":5}},"572":{"start":{"line":1121,"column":8},"end":{"line":1121,"column":41}},"573":{"start":{"line":1122,"column":8},"end":{"line":1122,"column":15}},"574":{"start":{"line":1125,"column":4},"end":{"line":1125,"column":60}},"575":{"start":{"line":1127,"column":4},"end":{"line":1134,"column":7}},"576":{"start":{"line":1128,"column":8},"end":{"line":1131,"column":9}},"577":{"start":{"line":1129,"column":12},"end":{"line":1129,"column":26}},"578":{"start":{"line":1130,"column":12},"end":{"line":1130,"column":19}},"579":{"start":{"line":1133,"column":8},"end":{"line":1133,"column":41}},"580":{"start":{"line":1136,"column":4},"end":{"line":1154,"column":5}},"581":{"start":{"line":1137,"column":8},"end":{"line":1140,"column":9}},"582":{"start":{"line":1138,"column":12},"end":{"line":1138,"column":21}},"583":{"start":{"line":1139,"column":12},"end":{"line":1139,"column":19}},"584":{"start":{"line":1142,"column":8},"end":{"line":1142,"column":71}},"585":{"start":{"line":1143,"column":8},"end":{"line":1149,"column":9}},"586":{"start":{"line":1144,"column":12},"end":{"line":1144,"column":40}},"587":{"start":{"line":1146,"column":12},"end":{"line":1148,"column":15}},"588":{"start":{"line":1147,"column":16},"end":{"line":1147,"column":44}},"589":{"start":{"line":1151,"column":8},"end":{"line":1153,"column":9}},"590":{"start":{"line":1152,"column":12},"end":{"line":1152,"column":52}},"591":{"start":{"line":1157,"column":0},"end":{"line":1171,"column":2}},"592":{"start":{"line":1159,"column":4},"end":{"line":1159,"column":20}},"593":{"start":{"line":1161,"column":4},"end":{"line":1163,"column":5}},"594":{"start":{"line":1162,"column":8},"end":{"line":1162,"column":15}},"595":{"start":{"line":1165,"column":4},"end":{"line":1165,"column":39}},"596":{"start":{"line":1166,"column":4},"end":{"line":1166,"column":36}},"597":{"start":{"line":1167,"column":4},"end":{"line":1170,"column":5}},"598":{"start":{"line":1168,"column":8},"end":{"line":1168,"column":28}},"599":{"start":{"line":1169,"column":8},"end":{"line":1169,"column":37}},"600":{"start":{"line":1173,"column":0},"end":{"line":1179,"column":2}},"601":{"start":{"line":1174,"column":4},"end":{"line":1176,"column":5}},"602":{"start":{"line":1175,"column":8},"end":{"line":1175,"column":21}},"603":{"start":{"line":1177,"column":4},"end":{"line":1177,"column":40}},"604":{"start":{"line":1178,"column":4},"end":{"line":1178,"column":40}},"605":{"start":{"line":1181,"column":0},"end":{"line":1181,"column":26}}},"branchMap":{"1":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":0},"end":{"line":28,"column":0}},{"start":{"line":28,"column":0},"end":{"line":28,"column":0}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":46}},{"start":{"line":29,"column":4},"end":{"line":29,"column":38}}]},"3":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"4":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":18},"end":{"line":121,"column":37}},{"start":{"line":121,"column":41},"end":{"line":121,"column":51}}]},"5":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":18},"end":{"line":122,"column":37}},{"start":{"line":122,"column":41},"end":{"line":122,"column":53}}]},"6":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":18},"end":{"line":123,"column":37}},{"start":{"line":123,"column":41},"end":{"line":123,"column":53}}]},"7":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":23},"end":{"line":124,"column":47}},{"start":{"line":124,"column":51},"end":{"line":124,"column":55}}]},"8":{"line":128,"type":"cond-expr","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":42}},{"start":{"line":129,"column":45},"end":{"line":129,"column":50}}]},"9":{"line":130,"type":"cond-expr","locations":[{"start":{"line":131,"column":8},"end":{"line":131,"column":39}},{"start":{"line":131,"column":42},"end":{"line":131,"column":46}}]},"10":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":4},"end":{"line":147,"column":4}},{"start":{"line":147,"column":4},"end":{"line":147,"column":4}}]},"11":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":22},"end":{"line":152,"column":45}},{"start":{"line":152,"column":49},"end":{"line":152,"column":53}}]},"12":{"line":153,"type":"cond-expr","locations":[{"start":{"line":153,"column":41},"end":{"line":153,"column":45}},{"start":{"line":153,"column":48},"end":{"line":153,"column":50}}]},"13":{"line":156,"type":"binary-expr","locations":[{"start":{"line":156,"column":20},"end":{"line":156,"column":41}},{"start":{"line":156,"column":45},"end":{"line":160,"column":6}}]},"14":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":164,"column":8}},{"start":{"line":164,"column":8},"end":{"line":164,"column":8}}]},"15":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":4},"end":{"line":171,"column":4}},{"start":{"line":171,"column":4},"end":{"line":171,"column":4}}]},"16":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":8},"end":{"line":172,"column":8}},{"start":{"line":172,"column":8},"end":{"line":172,"column":8}}]},"17":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":4},"end":{"line":189,"column":4}},{"start":{"line":189,"column":4},"end":{"line":189,"column":4}}]},"18":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":197,"column":4}},{"start":{"line":197,"column":4},"end":{"line":197,"column":4}}]},"19":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":4},"end":{"line":200,"column":4}},{"start":{"line":200,"column":4},"end":{"line":200,"column":4}}]},"20":{"line":214,"type":"cond-expr","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":26}},{"start":{"line":215,"column":29},"end":{"line":215,"column":33}}]},"21":{"line":217,"type":"if","locations":[{"start":{"line":217,"column":4},"end":{"line":217,"column":4}},{"start":{"line":217,"column":4},"end":{"line":217,"column":4}}]},"22":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":4},"end":{"line":226,"column":4}},{"start":{"line":226,"column":4},"end":{"line":226,"column":4}}]},"23":{"line":242,"type":"cond-expr","locations":[{"start":{"line":243,"column":8},"end":{"line":243,"column":57}},{"start":{"line":243,"column":60},"end":{"line":243,"column":64}}]},"24":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":4},"end":{"line":245,"column":4}},{"start":{"line":245,"column":4},"end":{"line":245,"column":4}}]},"25":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"26":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":4},"end":{"line":266,"column":4}},{"start":{"line":266,"column":4},"end":{"line":266,"column":4}}]},"27":{"line":271,"type":"cond-expr","locations":[{"start":{"line":271,"column":50},"end":{"line":271,"column":54}},{"start":{"line":271,"column":57},"end":{"line":271,"column":62}}]},"28":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":8},"end":{"line":284,"column":8}},{"start":{"line":284,"column":8},"end":{"line":284,"column":8}}]},"29":{"line":291,"type":"binary-expr","locations":[{"start":{"line":291,"column":31},"end":{"line":291,"column":63}},{"start":{"line":291,"column":67},"end":{"line":291,"column":97}}]},"30":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":25},"end":{"line":292,"column":51}},{"start":{"line":292,"column":55},"end":{"line":292,"column":78}}]},"31":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":4},"end":{"line":295,"column":4}},{"start":{"line":295,"column":4},"end":{"line":295,"column":4}}]},"32":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":8},"end":{"line":295,"column":32}},{"start":{"line":295,"column":36},"end":{"line":295,"column":51}}]},"33":{"line":323,"type":"if","locations":[{"start":{"line":323,"column":4},"end":{"line":323,"column":4}},{"start":{"line":323,"column":4},"end":{"line":323,"column":4}}]},"34":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":4},"end":{"line":372,"column":4}},{"start":{"line":372,"column":4},"end":{"line":372,"column":4}}]},"35":{"line":384,"type":"if","locations":[{"start":{"line":384,"column":4},"end":{"line":384,"column":4}},{"start":{"line":384,"column":4},"end":{"line":384,"column":4}}]},"36":{"line":402,"type":"if","locations":[{"start":{"line":402,"column":4},"end":{"line":402,"column":4}},{"start":{"line":402,"column":4},"end":{"line":402,"column":4}}]},"37":{"line":411,"type":"if","locations":[{"start":{"line":411,"column":4},"end":{"line":411,"column":4}},{"start":{"line":411,"column":4},"end":{"line":411,"column":4}}]},"38":{"line":428,"type":"if","locations":[{"start":{"line":428,"column":4},"end":{"line":428,"column":4}},{"start":{"line":428,"column":4},"end":{"line":428,"column":4}}]},"39":{"line":438,"type":"if","locations":[{"start":{"line":438,"column":8},"end":{"line":438,"column":8}},{"start":{"line":438,"column":8},"end":{"line":438,"column":8}}]},"40":{"line":474,"type":"if","locations":[{"start":{"line":474,"column":4},"end":{"line":474,"column":4}},{"start":{"line":474,"column":4},"end":{"line":474,"column":4}}]},"41":{"line":501,"type":"if","locations":[{"start":{"line":501,"column":4},"end":{"line":501,"column":4}},{"start":{"line":501,"column":4},"end":{"line":501,"column":4}}]},"42":{"line":510,"type":"binary-expr","locations":[{"start":{"line":510,"column":15},"end":{"line":510,"column":30}},{"start":{"line":510,"column":34},"end":{"line":510,"column":38}}]},"43":{"line":513,"type":"if","locations":[{"start":{"line":513,"column":4},"end":{"line":513,"column":4}},{"start":{"line":513,"column":4},"end":{"line":513,"column":4}}]},"44":{"line":519,"type":"if","locations":[{"start":{"line":519,"column":4},"end":{"line":519,"column":4}},{"start":{"line":519,"column":4},"end":{"line":519,"column":4}}]},"45":{"line":544,"type":"if","locations":[{"start":{"line":544,"column":8},"end":{"line":544,"column":8}},{"start":{"line":544,"column":8},"end":{"line":544,"column":8}}]},"46":{"line":544,"type":"binary-expr","locations":[{"start":{"line":544,"column":12},"end":{"line":544,"column":34}},{"start":{"line":545,"column":12},"end":{"line":545,"column":39}}]},"47":{"line":557,"type":"if","locations":[{"start":{"line":557,"column":4},"end":{"line":557,"column":4}},{"start":{"line":557,"column":4},"end":{"line":557,"column":4}}]},"48":{"line":568,"type":"if","locations":[{"start":{"line":568,"column":4},"end":{"line":568,"column":4}},{"start":{"line":568,"column":4},"end":{"line":568,"column":4}}]},"49":{"line":572,"type":"if","locations":[{"start":{"line":572,"column":12},"end":{"line":572,"column":12}},{"start":{"line":572,"column":12},"end":{"line":572,"column":12}}]},"50":{"line":584,"type":"if","locations":[{"start":{"line":584,"column":4},"end":{"line":584,"column":4}},{"start":{"line":584,"column":4},"end":{"line":584,"column":4}}]},"51":{"line":600,"type":"if","locations":[{"start":{"line":600,"column":4},"end":{"line":600,"column":4}},{"start":{"line":600,"column":4},"end":{"line":600,"column":4}}]},"52":{"line":609,"type":"switch","locations":[{"start":{"line":610,"column":12},"end":{"line":611,"column":22}},{"start":{"line":612,"column":12},"end":{"line":613,"column":49}}]},"53":{"line":625,"type":"if","locations":[{"start":{"line":625,"column":4},"end":{"line":625,"column":4}},{"start":{"line":625,"column":4},"end":{"line":625,"column":4}}]},"54":{"line":627,"type":"if","locations":[{"start":{"line":627,"column":12},"end":{"line":627,"column":12}},{"start":{"line":627,"column":12},"end":{"line":627,"column":12}}]},"55":{"line":638,"type":"if","locations":[{"start":{"line":638,"column":4},"end":{"line":638,"column":4}},{"start":{"line":638,"column":4},"end":{"line":638,"column":4}}]},"56":{"line":642,"type":"if","locations":[{"start":{"line":642,"column":4},"end":{"line":642,"column":4}},{"start":{"line":642,"column":4},"end":{"line":642,"column":4}}]},"57":{"line":664,"type":"if","locations":[{"start":{"line":664,"column":4},"end":{"line":664,"column":4}},{"start":{"line":664,"column":4},"end":{"line":664,"column":4}}]},"58":{"line":669,"type":"if","locations":[{"start":{"line":669,"column":4},"end":{"line":669,"column":4}},{"start":{"line":669,"column":4},"end":{"line":669,"column":4}}]},"59":{"line":682,"type":"binary-expr","locations":[{"start":{"line":682,"column":22},"end":{"line":682,"column":34}},{"start":{"line":682,"column":38},"end":{"line":682,"column":55}}]},"60":{"line":684,"type":"switch","locations":[{"start":{"line":685,"column":8},"end":{"line":687,"column":18}},{"start":{"line":689,"column":8},"end":{"line":690,"column":49}},{"start":{"line":692,"column":8},"end":{"line":700,"column":13}}]},"61":{"line":693,"type":"if","locations":[{"start":{"line":693,"column":12},"end":{"line":693,"column":12}},{"start":{"line":693,"column":12},"end":{"line":693,"column":12}}]},"62":{"line":706,"type":"if","locations":[{"start":{"line":706,"column":4},"end":{"line":706,"column":4}},{"start":{"line":706,"column":4},"end":{"line":706,"column":4}}]},"63":{"line":707,"type":"binary-expr","locations":[{"start":{"line":707,"column":15},"end":{"line":707,"column":42}},{"start":{"line":707,"column":46},"end":{"line":707,"column":50}}]},"64":{"line":708,"type":"if","locations":[{"start":{"line":708,"column":11},"end":{"line":708,"column":11}},{"start":{"line":708,"column":11},"end":{"line":708,"column":11}}]},"65":{"line":725,"type":"if","locations":[{"start":{"line":725,"column":8},"end":{"line":725,"column":8}},{"start":{"line":725,"column":8},"end":{"line":725,"column":8}}]},"66":{"line":732,"type":"if","locations":[{"start":{"line":732,"column":8},"end":{"line":732,"column":8}},{"start":{"line":732,"column":8},"end":{"line":732,"column":8}}]},"67":{"line":751,"type":"if","locations":[{"start":{"line":751,"column":4},"end":{"line":751,"column":4}},{"start":{"line":751,"column":4},"end":{"line":751,"column":4}}]},"68":{"line":763,"type":"if","locations":[{"start":{"line":763,"column":8},"end":{"line":763,"column":8}},{"start":{"line":763,"column":8},"end":{"line":763,"column":8}}]},"69":{"line":772,"type":"if","locations":[{"start":{"line":772,"column":8},"end":{"line":772,"column":8}},{"start":{"line":772,"column":8},"end":{"line":772,"column":8}}]},"70":{"line":793,"type":"if","locations":[{"start":{"line":793,"column":8},"end":{"line":793,"column":8}},{"start":{"line":793,"column":8},"end":{"line":793,"column":8}}]},"71":{"line":800,"type":"if","locations":[{"start":{"line":800,"column":4},"end":{"line":800,"column":4}},{"start":{"line":800,"column":4},"end":{"line":800,"column":4}}]},"72":{"line":808,"type":"if","locations":[{"start":{"line":808,"column":4},"end":{"line":808,"column":4}},{"start":{"line":808,"column":4},"end":{"line":808,"column":4}}]},"73":{"line":810,"type":"if","locations":[{"start":{"line":810,"column":12},"end":{"line":810,"column":12}},{"start":{"line":810,"column":12},"end":{"line":810,"column":12}}]},"74":{"line":816,"type":"if","locations":[{"start":{"line":816,"column":4},"end":{"line":816,"column":4}},{"start":{"line":816,"column":4},"end":{"line":816,"column":4}}]},"75":{"line":816,"type":"binary-expr","locations":[{"start":{"line":816,"column":8},"end":{"line":816,"column":15}},{"start":{"line":816,"column":19},"end":{"line":816,"column":34}}]},"76":{"line":830,"type":"if","locations":[{"start":{"line":830,"column":4},"end":{"line":830,"column":4}},{"start":{"line":830,"column":4},"end":{"line":830,"column":4}}]},"77":{"line":853,"type":"if","locations":[{"start":{"line":853,"column":4},"end":{"line":853,"column":4}},{"start":{"line":853,"column":4},"end":{"line":853,"column":4}}]},"78":{"line":857,"type":"if","locations":[{"start":{"line":857,"column":4},"end":{"line":857,"column":4}},{"start":{"line":857,"column":4},"end":{"line":857,"column":4}}]},"79":{"line":857,"type":"binary-expr","locations":[{"start":{"line":857,"column":8},"end":{"line":857,"column":24}},{"start":{"line":857,"column":28},"end":{"line":857,"column":44}}]},"80":{"line":860,"type":"if","locations":[{"start":{"line":860,"column":4},"end":{"line":860,"column":4}},{"start":{"line":860,"column":4},"end":{"line":860,"column":4}}]},"81":{"line":860,"type":"binary-expr","locations":[{"start":{"line":860,"column":8},"end":{"line":860,"column":27}},{"start":{"line":860,"column":31},"end":{"line":860,"column":50}}]},"82":{"line":863,"type":"if","locations":[{"start":{"line":863,"column":4},"end":{"line":863,"column":4}},{"start":{"line":863,"column":4},"end":{"line":863,"column":4}}]},"83":{"line":863,"type":"binary-expr","locations":[{"start":{"line":863,"column":8},"end":{"line":863,"column":28}},{"start":{"line":863,"column":32},"end":{"line":863,"column":52}}]},"84":{"line":866,"type":"if","locations":[{"start":{"line":866,"column":4},"end":{"line":866,"column":4}},{"start":{"line":866,"column":4},"end":{"line":866,"column":4}}]},"85":{"line":866,"type":"binary-expr","locations":[{"start":{"line":866,"column":8},"end":{"line":866,"column":39}},{"start":{"line":866,"column":43},"end":{"line":866,"column":74}}]},"86":{"line":869,"type":"if","locations":[{"start":{"line":869,"column":4},"end":{"line":869,"column":4}},{"start":{"line":869,"column":4},"end":{"line":869,"column":4}}]},"87":{"line":869,"type":"binary-expr","locations":[{"start":{"line":869,"column":8},"end":{"line":869,"column":39}},{"start":{"line":869,"column":43},"end":{"line":869,"column":72}}]},"88":{"line":872,"type":"if","locations":[{"start":{"line":872,"column":4},"end":{"line":872,"column":4}},{"start":{"line":872,"column":4},"end":{"line":872,"column":4}}]},"89":{"line":872,"type":"binary-expr","locations":[{"start":{"line":872,"column":8},"end":{"line":872,"column":38}},{"start":{"line":872,"column":42},"end":{"line":872,"column":72}}]},"90":{"line":875,"type":"if","locations":[{"start":{"line":875,"column":4},"end":{"line":875,"column":4}},{"start":{"line":875,"column":4},"end":{"line":875,"column":4}}]},"91":{"line":875,"type":"binary-expr","locations":[{"start":{"line":875,"column":8},"end":{"line":875,"column":32}},{"start":{"line":875,"column":36},"end":{"line":875,"column":60}}]},"92":{"line":878,"type":"if","locations":[{"start":{"line":878,"column":4},"end":{"line":878,"column":4}},{"start":{"line":878,"column":4},"end":{"line":878,"column":4}}]},"93":{"line":878,"type":"binary-expr","locations":[{"start":{"line":878,"column":8},"end":{"line":878,"column":27}},{"start":{"line":878,"column":31},"end":{"line":878,"column":60}}]},"94":{"line":881,"type":"if","locations":[{"start":{"line":881,"column":4},"end":{"line":881,"column":4}},{"start":{"line":881,"column":4},"end":{"line":881,"column":4}}]},"95":{"line":881,"type":"binary-expr","locations":[{"start":{"line":881,"column":8},"end":{"line":881,"column":39}},{"start":{"line":882,"column":8},"end":{"line":882,"column":39}}]},"96":{"line":887,"type":"if","locations":[{"start":{"line":887,"column":4},"end":{"line":887,"column":4}},{"start":{"line":887,"column":4},"end":{"line":887,"column":4}}]},"97":{"line":889,"type":"if","locations":[{"start":{"line":889,"column":12},"end":{"line":889,"column":12}},{"start":{"line":889,"column":12},"end":{"line":889,"column":12}}]},"98":{"line":897,"type":"binary-expr","locations":[{"start":{"line":897,"column":19},"end":{"line":897,"column":38}},{"start":{"line":897,"column":42},"end":{"line":897,"column":43}}]},"99":{"line":898,"type":"binary-expr","locations":[{"start":{"line":898,"column":22},"end":{"line":898,"column":44}},{"start":{"line":898,"column":48},"end":{"line":898,"column":49}}]},"100":{"line":899,"type":"binary-expr","locations":[{"start":{"line":899,"column":23},"end":{"line":899,"column":46}},{"start":{"line":899,"column":50},"end":{"line":899,"column":52}}]},"101":{"line":905,"type":"binary-expr","locations":[{"start":{"line":905,"column":24},"end":{"line":905,"column":48}},{"start":{"line":905,"column":52},"end":{"line":905,"column":53}}]},"102":{"line":908,"type":"binary-expr","locations":[{"start":{"line":908,"column":23},"end":{"line":908,"column":46}},{"start":{"line":908,"column":50},"end":{"line":908,"column":55}}]},"103":{"line":911,"type":"binary-expr","locations":[{"start":{"line":911,"column":17},"end":{"line":911,"column":34}},{"start":{"line":911,"column":38},"end":{"line":911,"column":43}}]},"104":{"line":913,"type":"binary-expr","locations":[{"start":{"line":913,"column":22},"end":{"line":913,"column":44}},{"start":{"line":913,"column":48},"end":{"line":913,"column":52}}]},"105":{"line":914,"type":"binary-expr","locations":[{"start":{"line":914,"column":34},"end":{"line":914,"column":68}},{"start":{"line":914,"column":72},"end":{"line":914,"column":76}}]},"106":{"line":922,"type":"binary-expr","locations":[{"start":{"line":922,"column":14},"end":{"line":922,"column":21}},{"start":{"line":922,"column":25},"end":{"line":922,"column":27}}]},"107":{"line":927,"type":"if","locations":[{"start":{"line":927,"column":4},"end":{"line":927,"column":4}},{"start":{"line":927,"column":4},"end":{"line":927,"column":4}}]},"108":{"line":927,"type":"binary-expr","locations":[{"start":{"line":927,"column":8},"end":{"line":927,"column":18}},{"start":{"line":927,"column":22},"end":{"line":927,"column":38}}]},"109":{"line":928,"type":"if","locations":[{"start":{"line":928,"column":8},"end":{"line":928,"column":8}},{"start":{"line":928,"column":8},"end":{"line":928,"column":8}}]},"110":{"line":942,"type":"binary-expr","locations":[{"start":{"line":942,"column":16},"end":{"line":942,"column":25}},{"start":{"line":942,"column":29},"end":{"line":942,"column":31}}]},"111":{"line":943,"type":"binary-expr","locations":[{"start":{"line":943,"column":20},"end":{"line":943,"column":33}},{"start":{"line":943,"column":37},"end":{"line":943,"column":42}}]},"112":{"line":944,"type":"binary-expr","locations":[{"start":{"line":944,"column":19},"end":{"line":944,"column":31}},{"start":{"line":944,"column":35},"end":{"line":944,"column":36}}]},"113":{"line":945,"type":"binary-expr","locations":[{"start":{"line":945,"column":22},"end":{"line":945,"column":37}},{"start":{"line":945,"column":41},"end":{"line":945,"column":42}}]},"114":{"line":946,"type":"binary-expr","locations":[{"start":{"line":946,"column":23},"end":{"line":946,"column":39}},{"start":{"line":946,"column":43},"end":{"line":946,"column":45}}]},"115":{"line":948,"type":"binary-expr","locations":[{"start":{"line":948,"column":24},"end":{"line":948,"column":41}},{"start":{"line":948,"column":45},"end":{"line":948,"column":50}}]},"116":{"line":949,"type":"binary-expr","locations":[{"start":{"line":949,"column":24},"end":{"line":949,"column":41}},{"start":{"line":949,"column":45},"end":{"line":949,"column":49}}]},"117":{"line":951,"type":"binary-expr","locations":[{"start":{"line":951,"column":23},"end":{"line":951,"column":39}},{"start":{"line":951,"column":43},"end":{"line":951,"column":48}}]},"118":{"line":952,"type":"binary-expr","locations":[{"start":{"line":952,"column":24},"end":{"line":952,"column":41}},{"start":{"line":952,"column":45},"end":{"line":952,"column":50}}]},"119":{"line":954,"type":"cond-expr","locations":[{"start":{"line":954,"column":40},"end":{"line":954,"column":50}},{"start":{"line":954,"column":53},"end":{"line":954,"column":57}}]},"120":{"line":956,"type":"binary-expr","locations":[{"start":{"line":956,"column":22},"end":{"line":956,"column":37}},{"start":{"line":956,"column":41},"end":{"line":956,"column":60}}]},"121":{"line":957,"type":"binary-expr","locations":[{"start":{"line":957,"column":34},"end":{"line":957,"column":61}},{"start":{"line":957,"column":65},"end":{"line":957,"column":69}}]},"122":{"line":958,"type":"binary-expr","locations":[{"start":{"line":958,"column":18},"end":{"line":958,"column":29}},{"start":{"line":958,"column":33},"end":{"line":958,"column":37}}]},"123":{"line":959,"type":"binary-expr","locations":[{"start":{"line":959,"column":19},"end":{"line":959,"column":31}},{"start":{"line":959,"column":35},"end":{"line":959,"column":39}}]},"124":{"line":960,"type":"binary-expr","locations":[{"start":{"line":960,"column":16},"end":{"line":960,"column":25}},{"start":{"line":960,"column":29},"end":{"line":960,"column":33}}]},"125":{"line":961,"type":"binary-expr","locations":[{"start":{"line":961,"column":29},"end":{"line":961,"column":51}},{"start":{"line":961,"column":55},"end":{"line":961,"column":56}}]},"126":{"line":962,"type":"binary-expr","locations":[{"start":{"line":962,"column":20},"end":{"line":962,"column":33}},{"start":{"line":962,"column":37},"end":{"line":962,"column":41}}]},"127":{"line":965,"type":"binary-expr","locations":[{"start":{"line":965,"column":19},"end":{"line":965,"column":31}},{"start":{"line":965,"column":35},"end":{"line":965,"column":55}}]},"128":{"line":983,"type":"if","locations":[{"start":{"line":983,"column":4},"end":{"line":983,"column":4}},{"start":{"line":983,"column":4},"end":{"line":983,"column":4}}]},"129":{"line":989,"type":"if","locations":[{"start":{"line":989,"column":4},"end":{"line":989,"column":4}},{"start":{"line":989,"column":4},"end":{"line":989,"column":4}}]},"130":{"line":992,"type":"if","locations":[{"start":{"line":992,"column":11},"end":{"line":992,"column":11}},{"start":{"line":992,"column":11},"end":{"line":992,"column":11}}]},"131":{"line":997,"type":"if","locations":[{"start":{"line":997,"column":11},"end":{"line":997,"column":11}},{"start":{"line":997,"column":11},"end":{"line":997,"column":11}}]},"132":{"line":1001,"type":"if","locations":[{"start":{"line":1001,"column":8},"end":{"line":1001,"column":8}},{"start":{"line":1001,"column":8},"end":{"line":1001,"column":8}}]},"133":{"line":1021,"type":"if","locations":[{"start":{"line":1021,"column":4},"end":{"line":1021,"column":4}},{"start":{"line":1021,"column":4},"end":{"line":1021,"column":4}}]},"134":{"line":1025,"type":"if","locations":[{"start":{"line":1025,"column":4},"end":{"line":1025,"column":4}},{"start":{"line":1025,"column":4},"end":{"line":1025,"column":4}}]},"135":{"line":1029,"type":"if","locations":[{"start":{"line":1029,"column":4},"end":{"line":1029,"column":4}},{"start":{"line":1029,"column":4},"end":{"line":1029,"column":4}}]},"136":{"line":1034,"type":"if","locations":[{"start":{"line":1034,"column":4},"end":{"line":1034,"column":4}},{"start":{"line":1034,"column":4},"end":{"line":1034,"column":4}}]},"137":{"line":1038,"type":"if","locations":[{"start":{"line":1038,"column":4},"end":{"line":1038,"column":4}},{"start":{"line":1038,"column":4},"end":{"line":1038,"column":4}}]},"138":{"line":1040,"type":"if","locations":[{"start":{"line":1040,"column":8},"end":{"line":1040,"column":8}},{"start":{"line":1040,"column":8},"end":{"line":1040,"column":8}}]},"139":{"line":1047,"type":"if","locations":[{"start":{"line":1047,"column":4},"end":{"line":1047,"column":4}},{"start":{"line":1047,"column":4},"end":{"line":1047,"column":4}}]},"140":{"line":1056,"type":"if","locations":[{"start":{"line":1056,"column":4},"end":{"line":1056,"column":4}},{"start":{"line":1056,"column":4},"end":{"line":1056,"column":4}}]},"141":{"line":1060,"type":"if","locations":[{"start":{"line":1060,"column":12},"end":{"line":1060,"column":12}},{"start":{"line":1060,"column":12},"end":{"line":1060,"column":12}}]},"142":{"line":1067,"type":"if","locations":[{"start":{"line":1067,"column":4},"end":{"line":1067,"column":4}},{"start":{"line":1067,"column":4},"end":{"line":1067,"column":4}}]},"143":{"line":1068,"type":"if","locations":[{"start":{"line":1068,"column":8},"end":{"line":1068,"column":8}},{"start":{"line":1068,"column":8},"end":{"line":1068,"column":8}}]},"144":{"line":1085,"type":"if","locations":[{"start":{"line":1085,"column":8},"end":{"line":1085,"column":8}},{"start":{"line":1085,"column":8},"end":{"line":1085,"column":8}}]},"145":{"line":1086,"type":"if","locations":[{"start":{"line":1086,"column":12},"end":{"line":1086,"column":12}},{"start":{"line":1086,"column":12},"end":{"line":1086,"column":12}}]},"146":{"line":1091,"type":"if","locations":[{"start":{"line":1091,"column":12},"end":{"line":1091,"column":12}},{"start":{"line":1091,"column":12},"end":{"line":1091,"column":12}}]},"147":{"line":1104,"type":"cond-expr","locations":[{"start":{"line":1104,"column":39},"end":{"line":1104,"column":54}},{"start":{"line":1104,"column":57},"end":{"line":1104,"column":61}}]},"148":{"line":1111,"type":"if","locations":[{"start":{"line":1111,"column":4},"end":{"line":1111,"column":4}},{"start":{"line":1111,"column":4},"end":{"line":1111,"column":4}}]},"149":{"line":1120,"type":"if","locations":[{"start":{"line":1120,"column":4},"end":{"line":1120,"column":4}},{"start":{"line":1120,"column":4},"end":{"line":1120,"column":4}}]},"150":{"line":1128,"type":"if","locations":[{"start":{"line":1128,"column":8},"end":{"line":1128,"column":8}},{"start":{"line":1128,"column":8},"end":{"line":1128,"column":8}}]},"151":{"line":1137,"type":"if","locations":[{"start":{"line":1137,"column":8},"end":{"line":1137,"column":8}},{"start":{"line":1137,"column":8},"end":{"line":1137,"column":8}}]},"152":{"line":1143,"type":"if","locations":[{"start":{"line":1143,"column":8},"end":{"line":1143,"column":8}},{"start":{"line":1143,"column":8},"end":{"line":1143,"column":8}}]},"153":{"line":1143,"type":"binary-expr","locations":[{"start":{"line":1143,"column":12},"end":{"line":1143,"column":23}},{"start":{"line":1143,"column":27},"end":{"line":1143,"column":42}}]},"154":{"line":1161,"type":"if","locations":[{"start":{"line":1161,"column":4},"end":{"line":1161,"column":4}},{"start":{"line":1161,"column":4},"end":{"line":1161,"column":4}}]},"155":{"line":1174,"type":"if","locations":[{"start":{"line":1174,"column":4},"end":{"line":1174,"column":4}},{"start":{"line":1174,"column":4},"end":{"line":1174,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var process = require('process');","var version = require('./package.json').version;","","/*global global*/","if (typeof global.tchannelVersion === 'string' &&","    version !== global.tchannelVersion",") {","    assert(false,","        'Must use only a single version of tchannel.\\n' +","        'Found two versions: ' + version + ' and ' +","            global.tchannelVersion + '\\n'","    );","} else {","    global.tchannelVersion = version;","}","","var extend = require('xtend');","var globalTimers = extend(require('timers'), {","    now: Date.now","});","var setImmediate = require('timers').setImmediate;","var globalRandom = Math.random;","var net = require('net');","var format = require('util').format;","var inherits = require('util').inherits;","var inspect = require('util').inspect;","","var HostPort = require('./host-port.js');","var nullLogger = require('./null-logger.js');","var EndpointHandler = require('./endpoint-handler.js');","var TChannelRequest = require('./request');","var TChannelServiceNameHandler = require('./service-name-handler');","var errors = require('./errors');","var EventEmitter = require('./lib/event_emitter.js');","var ObjectPool = require('./lib/object_pool');","var RetryRatioTracker = require('./lib/retry_ratio_tracker');","","var TChannelAsThrift = require('./as/thrift');","var TChannelAsJSON = require('./as/json');","var TChannelConnection = require('./connection');","var TChannelRootPeers = require('./root_peers');","var TChannelSubPeers = require('./sub_peers');","var TChannelServices = require('./services');","var RetryFlags = require('./retry-flags.js');","var TimeHeap = require('./time_heap');","var CountedReadySignal = require('ready-signal/counted');","var BatchStatsd = require('./lib/statsd.js');","var PeerFileWatcher = require('./peer-file-watcher.js');","","var TracingAgent = require('./trace/agent');","","var CONN_STALE_PERIOD = 1500;","var SANITY_PERIOD = 10 * 1000;","","var DEFAULT_RETRY_FLAGS = new RetryFlags(","    /*never:*/ false,","    /*onConnectionError*/ true,","    /*onTimeout*/ false",");","","var MAXIMUM_TTL_ALLOWED = 2 * 60 * 1000;","var MAX_TOMBSTONE_TTL = 5000;","","// TODO restore spying","// var Spy = require('./v2/spy');","// var dumpEnabled = /\\btchannel_dump\\b/.test(process.env.NODE_DEBUG || '');","","var DEFAULT_ENABLE_MAX_RETRY_RATIO = false;","var DEFAULT_MAX_RETRY_RATIO = 0.1;","","/*eslint-disable max-statements*/","function TChannel(options) {","    if (!(this instanceof TChannel)) {","        return new TChannel(options);","    }","","    var self = this;","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.listeningEvent = this.defineEvent('listening');","    this.connectionEvent = this.defineEvent('connection');","    this.statEvent = this.defineEvent('stat');","    this.peerChosenEvent = null;","    this.peerScoredEvent = null;","","    this.options = extend({","        useLazyHandling: false,","        useLazyRelaying: true,","        timeoutCheckInterval: 100,","        timeoutFuzz: 100,","        connectionStalePeriod: CONN_STALE_PERIOD,","        maxTombstoneTTL: MAX_TOMBSTONE_TTL,","","        // TODO: maybe we should always add pid to user-supplied?","        processName: format('%s[%s]', process.title, process.pid)","    }, options);","","    this.logger = this.options.logger || nullLogger;","    this.random = this.options.random || globalRandom;","    this.timers = this.options.timers || globalTimers;","    this.initTimeout = this.options.initTimeout || 2000;","    this.requireAs = this.options.requireAs;","    this.requireCn = this.options.requireCn;","    this.emitConnectionMetrics =","        typeof this.options.emitConnectionMetrics === 'boolean' ?","        this.options.emitConnectionMetrics : false;","    this.choosePeerWithHeap = typeof this.options.choosePeerWithHeap === 'boolean' ?","        this.options.choosePeerWithHeap : true;","    this.connectionAttemptDelay = this.options.connectionAttemptDelay;","    this.maxConnectionAttemptDelay = this.options.maxConnectionAttemptDelay;","    this.refreshConnectedPeersDelay = this.options.refreshConnectedPeersDelay;","","    this.setObservePeerScoreEvents(this.options.observePeerScoreEvents);","","    // Filled in by the listen call:","    this.host = null;","    this.requestedPort = null;","","    // Filled in by listening event:","    this.hostPort = null;","","    // name of the service running over this channel","    this.serviceName = '';","    if (this.options.serviceName) {","        this.serviceName = this.options.serviceName;","        delete this.options.serviceName;","    }","","    this.topChannel = this.options.topChannel || null;","    this.subChannels = this.topChannel ? null : {};","","    // for processing operation timeouts","    this.timeHeap = this.options.timeHeap || new TimeHeap({","        timers: this.timers,","        // TODO: do we still need/want fuzzing?","        minTimeout: fuzzedMinTimeout","    });","","    function fuzzedMinTimeout() {","        var fuzz = self.options.timeoutFuzz;","        if (fuzz) {","            fuzz = Math.floor(fuzz * (self.random() - 0.5));","        }","        return self.options.timeoutCheckInterval + fuzz;","    }","","    // how to handle incoming requests","    if (!this.options.handler) {","        if (!this.serviceName) {","            this.handler = TChannelServiceNameHandler({","                channel: this,","                isBusy: this.options.isBusy","            });","        } else {","            this.handler = EndpointHandler(this.serviceName);","        }","    } else {","        this.handler = this.options.handler;","        delete this.options.handler;","    }","","    // populated by:","    // - manually api (.peers.add etc)","    // - incoming connections on any listening socket","","    if (!this.topChannel) {","        this.peers = new TChannelRootPeers(this, this.options);","    } else {","        this.peers = new TChannelSubPeers(this, this.options);","    }","","    // For tracking the number of pending requests to any service","    this.services = new TChannelServices();","    if (this.options.maxPending !== undefined) {","        this.services.maxPending = this.options.maxPending;","    }","    if (this.options.maxPendingForService !== undefined) {","        this.services.maxPendingForService = this.options.maxPendingForService;","    }","","    // TChannel advances through the following states.","    this.listened = false;","    this.listening = false;","    this.destroyed = false;","    this.draining = false;","","    // set when draining (e.g. graceful shutdown)","    this.drainReason = '';","    this.drainExempt = null;","","    var trace = typeof this.options.trace === 'boolean' ?","        this.options.trace : true;","","    if (trace) {","        this.tracer = new TracingAgent({","            logger: this.logger,","            forceTrace: this.options.forceTrace,","            serviceName: this.options.serviceNameOverwrite,","            reporter: this.options.traceReporter","        });","    }","","    if (typeof this.options.traceSample === 'number') {","        this.traceSample = this.options.traceSample;","    } else {","        this.traceSample = 0.01;","    }","","    // lazily created by .getServer (usually from .listen)","    this.serverSocket = null;","    this.serverConnections = null;","","    this.TChannelAsThrift = TChannelAsThrift;","    this.TChannelAsJSON = TChannelAsJSON;","","    this.statsd = this.options.statsd;","    this.batchStats = null;","","    this.requestDefaults = this.options.requestDefaults ?","        new RequestDefaults(this.options.requestDefaults) : null;","","    if (!this.topChannel) {","        if (this.options.batchStats) {","            this.batchStats = this.options.batchStats;","            this.batchStatsAllocated = false;","        } else {","            this.batchStats = new BatchStatsd({","                logger: this.logger,","                timers: this.timers,","                statsd: this.statsd,","                baseTags: this.options.statTags","            });","            this.batchStatsAllocated = true;","","            this.batchStats.flushStats();","        }","","        this.sanityTimer = this.timers.setTimeout(doSanitySweep, SANITY_PERIOD);","    } else {","        this.batchStats = this.topChannel.batchStats;","    }","","    if (this.batchStats) {","        ObjectPool.bootstrap({","            channel: this,","            reportInterval: 5000,","            timers: this.timers,","            debug: this.options.objectPoolDebug ? true : false","        });","    }","","    this.maximumRelayTTL = MAXIMUM_TTL_ALLOWED;","    this.watcher = null;","","    function doSanitySweep() {","        self.sanityTimer = null;","        self.sanitySweep(sweepDone);","    }","","    function sweepDone() {","        if (self.destroyed) {","            return;","        }","        self.sanityTimer = self.timers.setTimeout(doSanitySweep, SANITY_PERIOD);","    }","","    // for client retry budget","    this.enableMaxRetryRatio = this.options.enableMaxRetryRatio || DEFAULT_ENABLE_MAX_RETRY_RATIO;","    this.maxRetryRatio = this.options.maxRetryRatio || DEFAULT_MAX_RETRY_RATIO; // retries to requests","    assert(this.maxRetryRatio >= 0.0, 'maxRetryRatio must be non-negative');","    this.retryRatioTracker = null;","    if (this.enableMaxRetryRatio && this.topChannel) { // only track ratio in sub channel","        this.retryRatioTracker = new RetryRatioTracker({","            rateCounterInterval: this.options.rateCounterInterval,","            rateCounterNumOfBuckets: this.options.rateCounterNumOfBuckets,","            timers: this.timers","        });","    }","}","inherits(TChannel, EventEmitter);","/*eslint-enable max-statements*/","","TChannel.prototype.setMaximumRelayTTL =","function setMaximumRelayTTL(value) {","    var self = this;","","    self.maximumRelayTTL = value;","","    var keys = Object.keys(self.subChannels);","    for (var i = 0; i < keys.length; i++) {","        var subChan = self.subChannels[keys[i]];","","        subChan.maximumRelayTTL = value;","    }","};","","TChannel.prototype.toString =","function channelToString() {","    var self = this;","    if (!self.topChannel) {","        return 'TChannel(' + self.hostPort + ')';","    }","    return 'TSubChannel(' + self.serviceName + ',' + self.hostPort + ')';","};","","TChannel.prototype.inspect =","function tchannelInspect() {","    var self = this;","    return 'TChannel(' + inspect(self.extendLogInfo({})) + ')';","};","","TChannel.prototype.setPreferConnectionDirection =","function setPreferConnectionDirection(direction) {","    var self = this;","","    self.peers.preferConnectionDirection = direction;","    var peers = self.peers.values();","","    for (var i = 0; i < peers.length; i++) {","        peers[i].setPreferConnectionDirection(direction);","    }","};","","TChannel.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    info.hostPort = self.hostPort;","    info.channelListened = self.listened;","    info.channelListening = self.listening;","    info.channelDestroyed = self.destroyed;","    info.channelDraining = self.draining;","","    return info;","};","","TChannel.prototype.eachConnection = function eachConnection(each) {","    var self = this;","","    var peers = self.peers.values();","    var i;","    for (i = 0; i < peers.length; i++) {","        var peer = peers[i];","        for (var j = 0; j < peer.connections.length; j++) {","            each(peer.connections[j]);","        }","    }","","    if (self.serverConnections) {","        var connKeys = Object.keys(self.serverConnections);","        for (i = 0; i < connKeys.length; i++) {","            each(self.serverConnections[connKeys[i]]);","        }","    }","};","","TChannel.prototype.setObservePeerScoreEvents =","function setObservePeerScoreEvents(obs) {","    var self = this;","","    if (obs) {","        self.peerChosenEvent = self.defineEvent('peerChosen');","        self.peerScoredEvent = self.defineEvent('peerScored');","    } else {","        self.peerChosenEvent = null;","        self.peerScoredEvent = null;","    }","};","","TChannel.prototype.setWriteBufferMode =","function setWriteBufferMode(mode) {","    // No-op for back-compat","};","","TChannel.prototype.setChoosePeerWithHeap =","function setChoosePeerWithHeap(enabled) {","    var self = this;","    self.choosePeerWithHeap = enabled;","    if (self.topChannel) {","        self.peers.setChoosePeerWithHeap(enabled);","    }","};","","TChannel.prototype.setLazyHandling =","function setLazyHandling(enabled) {","    var self = this;","","    if (self.topChannel) {","        self.topChannel.setLazyHandling(enabled);","        return;","    }","","    self.options.useLazyHandling = enabled;","    self.eachConnection(updateEachConn);","","    function updateEachConn(conn) {","        conn.setLazyHandling(enabled);","    }","};","","TChannel.prototype.setLazyRelaying =","function setLazyRelaying(enabled) {","    var self = this;","","    if (self.topChannel) {","        self.topChannel.setLazyRelaying(enabled);","        return;","    }","","    self.options.useLazyRelaying = enabled;","","    var keys = Object.keys(self.subChannels);","    for (var i = 0; i < keys.length; i++) {","        var subChan = self.subChannels[keys[i]];","        if (subChan.handler.type === 'tchannel.relay-handler') {","            subChan.handler.lazyEnabled = enabled;","        }","    }","};","","TChannel.prototype.drain = function drain(reason, callback) {","    var self = this;","","    // TODO: we could do this by defaulting and/or forcing you into an","    // exemption function that exempting anything not matching the given sub","    // channel's service name; however there are many other complications to","    // consider to implement sub channel draining, so for now:","    assert(!self.topChannel, 'sub channel draining not supported');","    assert(!self.draining, 'channel already draining');","","    self.draining = true;","    self.drainReason = reason;","","    var drained = CountedReadySignal(1);","    drained(callback);","    self.eachConnection(drainEachConn);","    process.nextTick(drained.signal);","    self.logger.info('draining channel', self.extendLogInfo({","        reason: self.drainReason,","        count: drained.counter","    }));","","    function drainEachConn(conn) {","        drained.counter++;","        conn.drain(self.drainReason, drained.signal);","    }","};","","TChannel.prototype.getServer = function getServer() {","    var self = this;","    if (self.serverSocket) {","        return self.serverSocket;","    }","","    self.serverConnections = Object.create(null);","    self.serverSocket = net.createServer(onServerSocketConnection);","    self.serverSocket.on('listening', onServerSocketListening);","    self.serverSocket.on('error', onServerSocketError);","","    return self.serverSocket;","","    function onServerSocketConnection(sock) {","        self.onServerSocketConnection(sock);","    }","","    function onServerSocketListening() {","        self.onServerSocketListening();","    }","","    function onServerSocketError(err) {","        self.onServerSocketError(err);","    }","};","","TChannel.prototype.onServerSocketConnection = function onServerSocketConnection(sock) {","    var self = this;","","    if (self.destroyed) {","        self.logger.error('got incoming socket whilst destroyed', self.extendLogInfo({","            remoteAddress: sock.remoteAddress,","            remotePort: sock.remotePort","        }));","        return;","    }","","    var socketRemoteAddr = sock.remoteAddress + ':' + sock.remotePort;","    var chan = self.topChannel || self;","    var conn = new TChannelConnection(chan, sock, 'in', socketRemoteAddr);","","    if (self.draining) {","        conn.drain(self.drainReason, null);","    }","","    conn.errorEvent.on(onConnectionError);","","    if (self.serverConnections[socketRemoteAddr]) {","        var oldConn = self.serverConnections[socketRemoteAddr];","        oldConn.resetAll(errors.SocketClosedError({","            reason: 'duplicate socketRemoteAddr incoming conn'","        }));","        delete self.serverConnections[socketRemoteAddr];","    }","","    sock.on('close', onSocketClose);","","    self.serverConnections[socketRemoteAddr] = conn;","    self.connectionEvent.emit(self, conn);","","    function onSocketClose() {","        delete self.serverConnections[socketRemoteAddr];","    }","","    // TODO: move method","    function onConnectionError(err) {","        var codeName = errors.classify(err);","","        var loggerInfo = conn.extendLogInfo({","            error: err","        });","","        if (codeName === 'Timeout' ||","            codeName === 'NetworkError') {","            self.logger.warn('Got a connection error', loggerInfo);","        } else {","            self.logger.error('Got an unexpected connection error', loggerInfo);","        }","        delete self.serverConnections[socketRemoteAddr];","    }","};","","TChannel.prototype.onServerSocketListening = function onServerSocketListening() {","    var self = this;","","    if (self.destroyed) {","        self.logger.error('got serverSocket listen whilst destroyed', self.extendLogInfo({","            requestedPort: self.requestedPort","        }));","        return;","    }","","    var address = self.serverSocket.address();","    self.hostPort = self.host + ':' + address.port;","    self.listening = true;","","    if (self.subChannels) {","        var subChanNames = Object.keys(self.subChannels);","        for (var i = 0; i < subChanNames.length; i++) {","            var chan = self.subChannels[subChanNames[i]];","            if (!chan.hostPort) {","                chan.hostPort = self.hostPort;","            }","        }","    }","","    self.listeningEvent.emit(self);","};","","TChannel.prototype.onServerSocketError = function onServerSocketError(err) {","    var self = this;","","    if (err.code === 'EADDRINUSE') {","        err = errors.TChannelListenError(err, {","            requestedPort: self.requestedPort,","            host: self.host","        });","    }","    self.logger.error('server socket error', self.extendLogInfo({","        requestedPort: self.requestedPort,","        host: self.host,","        error: err","    }));","    self.errorEvent.emit(self, err);","};","","TChannel.prototype.makeSubChannel = function makeSubChannel(options) {","    var self = this;","    if (!options) {","        options = {};","    }","    assert(!self.serviceName, 'arbitrary-depth sub channels are unsupported');","    assert(options.serviceName, 'must specify serviceName');","    assert(!self.subChannels[options.serviceName], 'duplicate sub channel creation');","    var opts = extend(self.options);","    var keys = Object.keys(options);","    for (var i = 0; i < keys.length; i++) {","        switch (keys[i]) {","            case 'peers':","                break;","            default:","                opts[keys[i]] = options[keys[i]];","        }","    }","","    opts.topChannel = self;","    opts.timeHeap = self.timeHeap;","","    opts.enableMaxRetryRatio = options.enableMaxRetryRatio;","    opts.maxRetryRatio = options.maxRetryRatio;","","    var chan = TChannel(opts);","","    if (options.peers) {","        for (i = 0; i < options.peers.length; i++) {","            if (typeof options.peers[i] === 'string') {","                chan.peers.add(options.peers[i]);","            }","        }","    }","    self.subChannels[chan.serviceName] = chan;","","    // Subchannels should not have tracers; all tracing goes","    // through the top channel.","    chan.tracer = self.tracer;","","    if (self.hostPort) {","        chan.hostPort = self.hostPort;","    }","","    if (options.peerFile) {","        chan.watcher = new PeerFileWatcher(chan, {","            peerFile: options.peerFile,","            refreshInterval: options.refreshInterval","        });","    }","","    return chan;","};","","TChannel.prototype.listen = function listen(port, host, callback) {","    // Note:","    // - 0 is a valid port number, indicating that the system must assign an","    //   available ephemeral port","    // - 127.0.0.1 is a valid host, primarily for testing","    var self = this;","","    assert(!self.topChannel, 'TChannel must listen on top channel');","    assert(!self.listened, 'TChannel can only listen once');","","    var reason;","    reason = HostPort.validateHost(host);","    if (reason) {","        assert(false, reason);","    }","","    reason = HostPort.validatePort(port, true);","    if (reason) {","        assert(false, reason);","    }","","    self.listened = true;","    self.requestedPort = port;","    self.host = host;","    self.getServer().listen(port, host, callback);","};","","TChannel.prototype.register = function register(name, options, handler) {","    var self = this;","","    var handlerType = self.handler && self.handler.type;","","    switch (handlerType) {","        case 'tchannel.endpoint-handler':","            self.handler.register(name, options, handler);","            break;","","        case 'tchannel.service-name-handler':","            throw errors.TopLevelRegisterError();","","        default:","            if (typeof self.handler.register === 'function') {","                self.handler.register(name, options, handler);","            } else {","                throw errors.InvalidHandlerForRegister({","                    handlerType: handlerType,","                    handler: self.handler","                });","            }","    }","};","","TChannel.prototype.address = function address() {","    var self = this;","    if (self.serverSocket) {","        return self.serverSocket.address() || null;","    } else if (self.topChannel) {","        return self.topChannel.address();","    } else {","        return null;","    }","};","","TChannel.prototype.updatePeers =","function updatePeers(newPeers) {","    // Take a snapshot of current, existing peers. This is used to delete old","    // peers later.","    var oldPeers = this.peers.keys().slice();","","    var i;","","    // Load new peers; duplicates are ignored","    for (i = 0; i < newPeers.length; i++) {","        if (typeof newPeers[i] === 'string') {","            this.peers.add(newPeers[i]);","        }","    }","","    // Drain and delete existing peers that are not in the new peer list","    for (i = 0; i < oldPeers.length; i++) {","        if (newPeers.indexOf(oldPeers[i]) === -1) {","            this.logger.info('TChannel: Removing old peer', {","                peer: oldPeers[i]","            });","","            var peer = this.peers.get(oldPeers[i]);","            this.peers.delete(oldPeers[i]);","","            this.drainPeer(peer);","        }","    }","","    this.logger.info('TChannel: Loaded peers', {","        newPeers: newPeers","    });","};","","TChannel.prototype.drainPeer = function drainPeer(peer) {","    var self = this;","    if (peer.draining) {","        return;","    }","","    peer.drain({","        goal: peer.DRAIN_GOAL_CLOSE_PEER,","        reason: 'peer has been removed from the peer list',","        direction: 'both',","        timeout: 5 * 1000","    }, thenDeleteIt);","","    function thenDeleteIt(err) {","        if (err) {","            self.logger.warn(","                'TChannel: error closing peer, deleting anyhow',","                peer.extendLogInfo(peer.draining.extendLogInfo({","                    error: err","                }))","            );","        }","","        if (self.topChannel) {","            self.topChannel.peers.delete(peer.hostPort);","        } else {","            self.peers.delete(peer.hostPort);","        }","    }","};","","/*","    Build a new opts","    Copy all props from defaults over.","    Build a new opts.headers","    Copy all headers from defaults.headers over","    For each key in per request options; assign","    For each key in per request headers; assign","*/","TChannel.prototype.requestOptions = function requestOptions(options) {","    var self = this;","    var prop;","    var opts = {};","    for (prop in self.requestDefaults) {","        if (prop === 'headers') {","            continue;","        }","","        opts[prop] = self.requestDefaults[prop];","    }","    opts.headers = {};","    if (self.requestDefaults.headers) {","        /*eslint-disable guard-for-in*/","        for (prop in self.requestDefaults.headers) {","            opts.headers[prop] = self.requestDefaults.headers[prop];","        }","        /*eslint-enable guard-for-in*/","    }","","    if (options) {","        for (prop in options) {","            if (prop === 'headers') {","                continue;","            }","            opts[prop] = options[prop];","        }","    }","    if (options && options.headers) {","        opts.headers = opts.headers;","        /*eslint-disable guard-for-in*/","        for (prop in options.headers) {","            opts.headers[prop] = options.headers[prop];","        }","        /*eslint-enable guard-for-in*/","    }","    return opts;","};","","TChannel.prototype.waitForIdentified =","function waitForIdentified(options, callback) {","    var self = this;","    if (self.destroyed) {","        callback(errors.TChannelDestroyedError());","    } else {","        assert(typeof options.host === 'string', 'options.host is required');","        var peer = self.peers.add(options.host);","        peer.waitForIdentified(callback);","    }","};","","/*","    Build a new opts","    Copy all props from defaults over.","    Build a new opts.headers","    Copy all headers from defaults.headers over","    For each key in per request options; assign","    For each key in per request headers; assign","*/","/*eslint max-statements: [2, 50]*/","TChannel.prototype.fastRequestDefaults =","function fastRequestDefaults(reqOpts) {","    var self = this;","","    var defaults = self.requestDefaults;","    if (!defaults) {","        return;","    }","","    if (defaults.timeout && !reqOpts.timeout) {","        reqOpts.timeout = defaults.timeout;","    }","    if (defaults.retryLimit && !reqOpts.retryLimit) {","        reqOpts.retryLimit = defaults.retryLimit;","    }","    if (defaults.serviceName && !reqOpts.serviceName) {","        reqOpts.serviceName = defaults.serviceName;","    }","    if (defaults._trackPendingSpecified && !reqOpts._trackPendingSpecified) {","        reqOpts.trackPending = defaults.trackPending;","    }","    if (defaults._checkSumTypeSpecified && reqOpts.checksumType === null) {","        reqOpts.checksumType = defaults.checksumType;","    }","    if (defaults._hasNoParentSpecified && !reqOpts._hasNoParentSpecified) {","        reqOpts.hasNoParent = defaults.hasNoParent;","    }","    if (defaults._traceSpecified && !reqOpts._traceSpecified) {","        reqOpts.trace = defaults.trace;","    }","    if (defaults.retryFlags && !reqOpts._retryFlagsSpecified) {","        reqOpts.retryFlags = defaults.retryFlags;","    }","    if (defaults.shouldApplicationRetry &&","        !reqOpts.shouldApplicationRetry","    ) {","        reqOpts.shouldApplicationRetry = defaults.shouldApplicationRetry;","    }","","    if (defaults.headers) {","        for (var key in defaults.headers) {","            if (!reqOpts.headers[key]) {","                reqOpts.headers[key] = defaults.headers[key];","            }","        }","    }","};","","function RequestDefaults(reqDefaults) {","    this.timeout = reqDefaults.timeout || 0;","    this.retryLimit = reqDefaults.retryLimit || 0;","    this.serviceName = reqDefaults.serviceName || '';","","    this._trackPendingSpecified = typeof reqDefaults.trackPending === 'boolean';","    this.trackPending = reqDefaults.trackPending;","","    this._checkSumTypeSpecified = typeof reqDefaults.checksumType === 'number';","    this.checksumType = reqDefaults.checksumType || 0;","","    this._hasNoParentSpecified = typeof reqDefaults.hasNoParent === 'boolean';","    this.hasNoParent = reqDefaults.hasNoParent || false;","","    this._traceSpecified = typeof reqDefaults.trace === 'boolean';","    this.trace = reqDefaults.trace || false;","","    this.retryFlags = reqDefaults.retryFlags || null;","    this.shouldApplicationRetry = reqDefaults.shouldApplicationRetry || null;","","    this.headers = reqDefaults.headers;","}","","TChannel.prototype.request = function channelRequest(options) {","    var self = this;","","    options = options || {};","","    var opts = new RequestOptions(self, options);","    self.fastRequestDefaults(opts);","","    if (opts.trace && opts.hasNoParent) {","        if (Math.random() < self.traceSample) {","            opts.trace = true;","        } else {","            opts.trace = false;","        }","    }","","    return self._request(opts);","};","","function RequestOptions(channel, opts) {","    /*eslint complexity: [2, 30]*/","    this.channel = channel;","","    this.host = opts.host || '';","    this.streamed = opts.streamed || false;","    this.timeout = opts.timeout || 0;","    this.retryLimit = opts.retryLimit || 0;","    this.serviceName = opts.serviceName || '';","    this._trackPendingSpecified = typeof opts.trackPending === 'boolean';","    this.trackPending = opts.trackPending || false;","    this.checksumType = opts.checksumType || null;","    this._hasNoParentSpecified = typeof opts.hasNoParent === 'boolean';","    this.hasNoParent = opts.hasNoParent || false;","    this.forwardTrace = opts.forwardTrace || false;","    this._traceSpecified = typeof opts.trace === 'boolean';","    this.trace = this._traceSpecified ? opts.trace : true;","    this._retryFlagsSpecified = !!opts.retryFlags;","    this.retryFlags = opts.retryFlags || DEFAULT_RETRY_FLAGS;","    this.shouldApplicationRetry = opts.shouldApplicationRetry || null;","    this.parent = opts.parent || null;","    this.tracing = opts.tracing || null;","    this.peer = opts.peer || null;","    this.timeoutPerAttempt = opts.timeoutPerAttempt || 0;","    this.checksum = opts.checksum || null;","","    // TODO optimize?","    this.headers = opts.headers || new RequestHeaders();","","    this.retryCount = 0;","    this.logical = false;","    this.remoteAddr = null;","    this.hostPort = null;","}","","function RequestHeaders() {","    this.cn = '';","    this.as = '';","    this.re = '';","}","","TChannel.prototype._request = function _request(opts) {","    var self = this;","","    assert(!self.destroyed, 'cannot request() to destroyed tchannel');","    if (!self.topChannel) {","        throw errors.TopLevelRequestError();","    }","","    var req = null;","    // retries are only between hosts","    if (opts.peer) {","        opts.retryCount = 0;","        req = opts.peer.request(opts);","    } else if (opts.host) {","        opts.retryCount = 0;","        opts.peer = self.peers.add(opts.host);","        req = opts.peer.request(opts);","    // streaming retries not yet implemented","    } else if (opts.streamed) {","        opts.retryCount = 0;","","        opts.peer = self.peers.choosePeer();","        if (!opts.peer) {","            // TODO: operational error?","            throw errors.NoPeerAvailable();","        }","        req = opts.peer.request(opts);","    } else {","        req = new TChannelRequest(opts);","    }","","    return req;","};","","TChannel.prototype.quit = // to provide backward compatibility.","TChannel.prototype.close = function close(callback) {","    var self = this;","    assert(!self.destroyed, 'TChannel double close');","    self.destroyed = true;","","    var counter = 1;","","    if (self.watcher) {","        self.watcher.destroy();","    }","","    if (self.batchStats) {","        ObjectPool.unref();","    }","","    if (self.sanityTimer) {","        self.timers.clearTimeout(self.sanityTimer);","        self.sanityTimer = null;","    }","","    if (self.retryRatioTracker) {","        self.retryRatioTracker.destroy();","    }","","    if (self.serverSocket) {","        ++counter;","        if (self.serverSocket.address()) {","            closeServerSocket();","        } else {","            self.serverSocket.once('listening', closeServerSocket);","        }","    }","","    if (self.serverConnections) {","        var incomingConns = Object.keys(self.serverConnections);","        for (var i = 0; i < incomingConns.length; i++) {","            ++counter;","            var incomingConn = self.serverConnections[incomingConns[i]];","            incomingConn.close(onClose);","        }","    }","","    if (self.subChannels) {","        var serviceNames = Object.keys(self.subChannels);","        serviceNames.forEach(function each(serviceName) {","            var svcchan = self.subChannels[serviceName];","            if (!svcchan.destroyed) {","                counter++;","                svcchan.close(onClose);","            }","        });","    }","","    if (!self.topChannel) {","        if (self.batchStatsAllocated) {","            self.batchStats.destroy();","        }","        self.timeHeap.clear();","    }","","    counter++;","    self.peers.close(onClose);","","    onClose();","","    function closeServerSocket() {","        self.serverSocket.once('close', onClose);","        self.serverSocket.close();","    }","","    function onClose() {","        if (--counter <= 0) {","            if (counter < 0) {","                self.logger.error('closed more channel sockets than expected', self.extendLogInfo({","                    counter: counter","                }));","            }","            if (typeof callback === 'function') {","                callback();","            }","        }","    }","};","","TChannel.prototype.emitFastStat =","function emitFastStat(name, type, value, tags) {","    var self = this;","","    var stat = self.batchStats.pushStat(name, type, value, tags);","","    var topChannel = self.topChannel ? self.topChannel : self;","    topChannel.statEvent.emit(topChannel, stat);","};","","TChannel.prototype.flushStats = function flushStats() {","    var self = this;","","    if (self.batchStats) {","        self.batchStats.flushStats();","    }","};","","TChannel.prototype.sanitySweep =","function sanitySweep(callback) {","    var self = this;","","    if (!self.serverConnections) {","        self.peers.sanitySweep(callback);","        return;","    }","","    var incomingConns = Object.keys(self.serverConnections);","","    nextConn(incomingConns, 0, function connSweepDone(err) {","        if (err) {","            callback(err);","            return;","        }","","        self.peers.sanitySweep(callback);","    });","","    function nextConn(connectionKeys, index, cb) {","        if (index >= connectionKeys.length) {","            cb(null);","            return;","        }","","        var connection = self.serverConnections[connectionKeys[index]];","        if (!connection || !connection.ops) {","            setImmediate(deferNextConn);","        } else {","            connection.ops.sanitySweep(function opsSweepDone() {","                setImmediate(deferNextConn);","            });","        }","","        function deferNextConn() {","            nextConn(connectionKeys, index + 1, cb);","        }","    }","};","","TChannel.prototype.setMaxTombstoneTTL =","function setMaxTombstoneTTL(ttl) {","    var self = this;","","    if (ttl === self.options.maxTombstoneTTL) {","        return;","    }","","    self.options.maxTombstoneTTL = ttl;","    var peers = self.peers.values();","    for (var i = 0; i < peers.length; i++) {","        var peer = peers[i];","        peer.setMaxTombstoneTTL(ttl);","    }","};","","TChannel.prototype.isUnhealthyError = function isUnhealthyError(err) {","    if (!err) {","        return false;","    }","    var codeName = errors.classify(err);","    return errors.isUnhealthy(codeName);","};","","module.exports = TChannel;",""],"l":{"23":1,"24":1,"25":1,"28":1,"31":0,"37":1,"40":1,"41":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"73":1,"75":1,"76":1,"78":1,"84":1,"85":1,"91":1,"92":1,"95":1,"96":0,"97":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"109":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"130":0,"132":0,"133":0,"134":0,"136":0,"139":0,"140":0,"143":0,"146":0,"147":0,"148":0,"149":0,"152":0,"153":0,"156":0,"162":1,"163":0,"164":0,"165":0,"167":0,"171":0,"172":0,"173":0,"178":0,"181":0,"182":0,"189":0,"190":0,"192":0,"196":0,"197":0,"198":0,"200":0,"201":0,"205":0,"206":0,"207":0,"208":0,"211":0,"212":0,"214":0,"217":0,"218":0,"226":0,"227":0,"229":0,"233":0,"234":0,"236":0,"237":0,"239":0,"240":0,"242":0,"245":0,"246":0,"247":0,"248":0,"250":0,"256":0,"258":0,"261":0,"263":0,"266":0,"267":0,"275":0,"276":0,"278":1,"279":0,"280":0,"283":1,"284":0,"285":0,"287":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"303":1,"306":1,"308":0,"310":0,"312":0,"313":0,"314":0,"316":0,"320":1,"322":0,"323":0,"324":0,"326":0,"329":1,"331":0,"332":0,"335":1,"337":0,"339":0,"340":0,"342":0,"343":0,"347":1,"349":0,"351":0,"352":0,"353":0,"354":0,"355":0,"357":0,"360":1,"361":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"372":0,"373":0,"374":0,"375":0,"380":1,"382":0,"384":0,"385":0,"386":0,"388":0,"389":0,"393":1,"398":1,"400":0,"401":0,"402":0,"403":0,"407":1,"409":0,"411":0,"412":0,"413":0,"416":0,"417":0,"419":1,"420":0,"424":1,"426":0,"428":0,"429":0,"430":0,"433":0,"435":0,"436":0,"437":0,"438":0,"439":0,"444":1,"445":0,"451":0,"452":0,"454":0,"455":0,"457":0,"458":0,"459":0,"460":0,"461":0,"466":1,"467":0,"468":0,"472":1,"473":0,"474":0,"475":0,"478":0,"479":0,"480":0,"481":0,"483":0,"485":1,"486":0,"489":1,"490":0,"493":1,"494":0,"498":1,"499":0,"501":0,"502":0,"506":0,"509":0,"510":0,"511":0,"513":0,"514":0,"517":0,"519":0,"520":0,"521":0,"524":0,"527":0,"529":0,"530":0,"532":1,"533":0,"537":1,"538":0,"540":0,"544":0,"546":0,"548":0,"550":0,"554":1,"555":0,"557":0,"558":0,"561":0,"564":0,"565":0,"566":0,"568":0,"569":0,"570":0,"571":0,"572":0,"573":0,"578":0,"581":1,"582":0,"584":0,"585":0,"590":0,"595":0,"598":1,"599":0,"600":0,"601":0,"603":0,"604":0,"605":0,"606":0,"607":0,"608":0,"609":0,"611":0,"613":0,"617":0,"618":0,"620":0,"621":0,"623":0,"625":0,"626":0,"627":0,"628":0,"632":0,"636":0,"638":0,"639":0,"642":0,"643":0,"649":0,"652":1,"657":0,"659":0,"660":0,"662":0,"663":0,"664":0,"665":0,"668":0,"669":0,"670":0,"673":0,"674":0,"675":0,"676":0,"679":1,"680":0,"682":0,"684":0,"686":0,"687":0,"690":0,"693":0,"694":0,"696":0,"704":1,"705":0,"706":0,"707":0,"708":0,"709":0,"711":0,"715":1,"719":0,"721":0,"724":0,"725":0,"726":0,"731":0,"732":0,"733":0,"737":0,"738":0,"740":0,"744":0,"749":1,"750":0,"751":0,"752":0,"755":0,"762":1,"763":0,"764":0,"772":0,"773":0,"775":0,"788":1,"789":0,"790":0,"791":0,"792":0,"793":0,"794":0,"797":0,"799":0,"800":0,"802":0,"803":0,"808":0,"809":0,"810":0,"811":0,"813":0,"816":0,"817":0,"819":0,"820":0,"824":0,"827":1,"829":0,"830":0,"831":0,"833":0,"834":0,"835":0,"848":1,"850":0,"852":0,"853":0,"854":0,"857":0,"858":0,"860":0,"861":0,"863":0,"864":0,"866":0,"867":0,"869":0,"870":0,"872":0,"873":0,"875":0,"876":0,"878":0,"879":0,"881":0,"884":0,"887":0,"888":0,"889":0,"890":0,"896":1,"897":0,"898":0,"899":0,"901":0,"902":0,"904":0,"905":0,"907":0,"908":0,"910":0,"911":0,"913":0,"914":0,"916":0,"919":1,"920":0,"922":0,"924":0,"925":0,"927":0,"928":0,"929":0,"931":0,"935":0,"938":1,"940":0,"942":0,"943":0,"944":0,"945":0,"946":0,"947":0,"948":0,"949":0,"950":0,"951":0,"952":0,"953":0,"954":0,"955":0,"956":0,"957":0,"958":0,"959":0,"960":0,"961":0,"962":0,"965":0,"967":0,"968":0,"969":0,"970":0,"973":1,"974":0,"975":0,"976":0,"979":1,"980":0,"982":0,"983":0,"984":0,"987":0,"989":0,"990":0,"991":0,"992":0,"993":0,"994":0,"995":0,"997":0,"998":0,"1000":0,"1001":0,"1003":0,"1005":0,"1007":0,"1010":0,"1013":1,"1015":0,"1016":0,"1017":0,"1019":0,"1021":0,"1022":0,"1025":0,"1026":0,"1029":0,"1030":0,"1031":0,"1034":0,"1035":0,"1038":0,"1039":0,"1040":0,"1041":0,"1043":0,"1047":0,"1048":0,"1049":0,"1050":0,"1051":0,"1052":0,"1056":0,"1057":0,"1058":0,"1059":0,"1060":0,"1061":0,"1062":0,"1067":0,"1068":0,"1069":0,"1071":0,"1074":0,"1075":0,"1077":0,"1079":1,"1080":0,"1081":0,"1084":1,"1085":0,"1086":0,"1087":0,"1091":0,"1092":0,"1098":1,"1100":0,"1102":0,"1104":0,"1105":0,"1108":1,"1109":0,"1111":0,"1112":0,"1116":1,"1118":0,"1120":0,"1121":0,"1122":0,"1125":0,"1127":0,"1128":0,"1129":0,"1130":0,"1133":0,"1136":1,"1137":0,"1138":0,"1139":0,"1142":0,"1143":0,"1144":0,"1146":0,"1147":0,"1151":1,"1152":0,"1157":1,"1159":0,"1161":0,"1162":0,"1165":0,"1166":0,"1167":0,"1168":0,"1169":0,"1173":1,"1174":0,"1175":0,"1177":0,"1178":0,"1181":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/host-port.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/host-port.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"validateHost","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":45}}},"2":{"name":"validatePort","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":48}}},"3":{"name":"validateHostPort","line":61,"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":53}}},"4":{"name":"stringIsValidNumber","line":92,"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":39}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":39}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":51}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":43}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":43}},"5":{"start":{"line":29,"column":0},"end":{"line":43,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":46}},"8":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"9":{"start":{"line":35,"column":8},"end":{"line":35,"column":47}},"10":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"11":{"start":{"line":39,"column":8},"end":{"line":39,"column":49}},"12":{"start":{"line":42,"column":4},"end":{"line":42,"column":16}},"13":{"start":{"line":45,"column":0},"end":{"line":59,"column":1}},"14":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"15":{"start":{"line":47,"column":8},"end":{"line":47,"column":46}},"16":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"17":{"start":{"line":51,"column":8},"end":{"line":51,"column":58}},"18":{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},"19":{"start":{"line":55,"column":8},"end":{"line":55,"column":43}},"20":{"start":{"line":58,"column":4},"end":{"line":58,"column":16}},"21":{"start":{"line":61,"column":0},"end":{"line":90,"column":1}},"22":{"start":{"line":62,"column":4},"end":{"line":62,"column":15}},"23":{"start":{"line":63,"column":4},"end":{"line":65,"column":5}},"24":{"start":{"line":64,"column":8},"end":{"line":64,"column":96}},"25":{"start":{"line":67,"column":4},"end":{"line":67,"column":36}},"26":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"27":{"start":{"line":69,"column":8},"end":{"line":69,"column":100}},"28":{"start":{"line":72,"column":4},"end":{"line":72,"column":24}},"29":{"start":{"line":73,"column":4},"end":{"line":73,"column":49}},"30":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"31":{"start":{"line":75,"column":8},"end":{"line":75,"column":58}},"32":{"start":{"line":78,"column":4},"end":{"line":78,"column":27}},"33":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"34":{"start":{"line":80,"column":8},"end":{"line":80,"column":83}},"35":{"start":{"line":83,"column":4},"end":{"line":83,"column":40}},"36":{"start":{"line":84,"column":4},"end":{"line":84,"column":52}},"37":{"start":{"line":85,"column":4},"end":{"line":87,"column":5}},"38":{"start":{"line":86,"column":8},"end":{"line":86,"column":58}},"39":{"start":{"line":89,"column":4},"end":{"line":89,"column":16}},"40":{"start":{"line":92,"column":0},"end":{"line":95,"column":1}},"41":{"start":{"line":93,"column":4},"end":{"line":93,"column":37}},"42":{"start":{"line":94,"column":4},"end":{"line":94,"column":39}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":24}},{"start":{"line":38,"column":28},"end":{"line":38,"column":46}}]},"5":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"6":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"7":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":10},"end":{"line":50,"column":22}},{"start":{"line":50,"column":26},"end":{"line":50,"column":41}}]},"8":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"9":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":24}},{"start":{"line":54,"column":28},"end":{"line":54,"column":41}}]},"10":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"11":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"12":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"13":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"14":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var validIPv4 = /^\\d+\\.\\d+\\.\\d+\\.\\d+$/;","","module.exports.validateHostPort = validateHostPort;","module.exports.validateHost = validateHost;","module.exports.validatePort = validatePort;","","function validateHost(host, allowEmphemeral) {","    if (typeof host !== 'string') {","        return 'Expected host to be a string';","    }","","    if (!validIPv4.test(host)) {","        return 'Expected host to contain IPv4';","    }","","    if (!allowEmphemeral && host === '0.0.0.0') {","        return 'Expected host to not be 0.0.0.0';","    }","","    return null;","}","","function validatePort(portNum, allowEmphemeral) {","    if (typeof portNum !== 'number') {","        return 'Expected port to be a number';","    }","","    if (!(portNum >= 0 && portNum < 65536)) {","        return 'Expected port to be between >=0 & <65536';","    }","","    if (!allowEmphemeral && portNum === 0) {","        return 'Expected port to not be 0';","    }","","    return null;","}","","function validateHostPort(hostPort, allowEmphemeral) {","    var reason;","    if (typeof hostPort !== 'string') {","        return 'Expected hostPort to be a string, got ' + JSON.stringify(hostPort) + ' instead';","    }","","    var parts = hostPort.split(':');","    if (parts.length !== 2) {","        return 'Expected hostPort to be {ipv4}:{port}, got ' + JSON.stringify(hostPort) + 'instead';","    }","","    var host = parts[0];","    reason = validateHost(host, allowEmphemeral);","    if (reason) {","        return reason + ' in ' + JSON.stringify(hostPort);","    }","","    var portStr = parts[1];","    if (!stringIsValidNumber(portStr)) {","        return 'Expected port to be a valid number in ' + JSON.stringify(hostPort);","    }","","    var portNum = parseInt(portStr, 10);","    reason = validatePort(portNum, allowEmphemeral);","    if (reason) {","        return reason + ' in ' + JSON.stringify(hostPort);","    }","","    return null;","}","","function stringIsValidNumber(numAsStr) {","    var num = parseInt(numAsStr, 10);","    return num.toString() === numAsStr;","}",""],"l":{"23":1,"25":1,"26":1,"27":1,"29":1,"30":0,"31":0,"34":0,"35":0,"38":0,"39":0,"42":0,"45":1,"46":0,"47":0,"50":0,"51":0,"54":0,"55":0,"58":0,"61":1,"62":0,"63":0,"64":0,"67":0,"68":0,"69":0,"72":0,"73":0,"74":0,"75":0,"78":0,"79":0,"80":0,"83":0,"84":0,"85":0,"86":0,"89":0,"92":1,"93":0,"94":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/null-logger.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/null-logger.js","s":{"1":1,"2":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"noop","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":16}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":18}},"2":{"start":{"line":25,"column":0},"end":{"line":31,"column":2}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","function noop() {}","","module.exports = {","    debug: noop,","    error: noop,","    fatal: noop,","    info: noop,","    warn: noop","};",""],"l":{"23":1,"25":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/endpoint-handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/endpoint-handler.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"TChannelEndpointHandler","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":46}}},"2":{"name":"register","line":44,"loc":{"start":{"line":44,"column":45},"end":{"line":44,"column":87}}},"3":{"name":"handleRequest","line":60,"loc":{"start":{"line":60,"column":50},"end":{"line":60,"column":93}}},"4":{"name":"withArg23","line":77,"loc":{"start":{"line":77,"column":46},"end":{"line":77,"column":94}}},"5":{"name":"gotArg23","line":78,"loc":{"start":{"line":78,"column":18},"end":{"line":78,"column":53}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":27}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":56}},"6":{"start":{"line":29,"column":0},"end":{"line":39,"column":1}},"7":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"8":{"start":{"line":31,"column":8},"end":{"line":31,"column":56}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"10":{"start":{"line":34,"column":4},"end":{"line":34,"column":28}},"11":{"start":{"line":35,"column":4},"end":{"line":35,"column":66}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":35}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":41}},"14":{"start":{"line":40,"column":0},"end":{"line":40,"column":48}},"15":{"start":{"line":42,"column":0},"end":{"line":42,"column":69}},"16":{"start":{"line":44,"column":0},"end":{"line":58,"column":2}},"17":{"start":{"line":45,"column":4},"end":{"line":45,"column":20}},"18":{"start":{"line":46,"column":4},"end":{"line":49,"column":5}},"19":{"start":{"line":47,"column":8},"end":{"line":47,"column":26}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":21}},"21":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"22":{"start":{"line":51,"column":8},"end":{"line":51,"column":43}},"23":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"24":{"start":{"line":54,"column":8},"end":{"line":54,"column":33}},"25":{"start":{"line":56,"column":4},"end":{"line":56,"column":72}},"26":{"start":{"line":57,"column":4},"end":{"line":57,"column":19}},"27":{"start":{"line":60,"column":0},"end":{"line":75,"column":2}},"28":{"start":{"line":61,"column":4},"end":{"line":61,"column":20}},"29":{"start":{"line":63,"column":4},"end":{"line":63,"column":47}},"30":{"start":{"line":64,"column":4},"end":{"line":67,"column":7}},"31":{"start":{"line":68,"column":4},"end":{"line":74,"column":5}},"32":{"start":{"line":69,"column":8},"end":{"line":71,"column":44}},"33":{"start":{"line":73,"column":8},"end":{"line":73,"column":50}},"34":{"start":{"line":77,"column":0},"end":{"line":89,"column":2}},"35":{"start":{"line":78,"column":4},"end":{"line":88,"column":7}},"36":{"start":{"line":79,"column":8},"end":{"line":79,"column":51}},"37":{"start":{"line":80,"column":8},"end":{"line":87,"column":9}},"38":{"start":{"line":82,"column":12},"end":{"line":84,"column":52}},"39":{"start":{"line":86,"column":12},"end":{"line":86,"column":56}},"40":{"start":{"line":91,"column":0},"end":{"line":91,"column":41}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"4":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"5":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"6":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var EventEmitter = require('./lib/event_emitter');","var inherits = require('util').inherits;","var util = require('util');","var errors = require('./errors');","var coerceRequestHandler = require('./request-handler');","","function TChannelEndpointHandler(serviceName) {","    if (!(this instanceof TChannelEndpointHandler)) {","        return new TChannelEndpointHandler(serviceName);","    }","    var self = this;","    EventEmitter.call(self);","    self.handleEndpointEvent = self.defineEvent('handleEndpoint');","","    self.serviceName = serviceName;","    self.endpoints = Object.create(null);","}","inherits(TChannelEndpointHandler, EventEmitter);","","TChannelEndpointHandler.prototype.type = 'tchannel.endpoint-handler';","","TChannelEndpointHandler.prototype.register = function register(name, options, handler) {","    var self = this;","    if (typeof options === 'function') {","        handler = options;","        options = {};","    }","    if (typeof handler !== 'function') {","        throw errors.InvalidHandlerError();","    }","    if (options.streamed) {","        handler.canStream = true;","    }","    self.endpoints[name] = coerceRequestHandler(handler, self, options);","    return handler;","};","","TChannelEndpointHandler.prototype.handleRequest = function handleRequest(req, buildResponse) {","    var self = this;","","    var handler = self.endpoints[req.endpoint];","    self.handleEndpointEvent.emit(self, {","        name: req.endpoint,","        handler: handler","    });","    if (!handler) {","        buildResponse({streamed: false}).sendError('BadRequest', util.format(","            'no such endpoint service=%j endpoint=%j',","            req.serviceName, req.endpoint));","    } else {","        handler.handleRequest(req, buildResponse);","    }","};","","TChannelEndpointHandler.prototype.withArg23 = function withArg23(req, buildResponse, handler) {","    req.withArg23(function gotArg23(err, arg2, arg3) {","        var res = buildResponse({streamed: false});","        if (err) {","            // TODO: log error","            res.sendError('UnexpectedError', util.format(","                'error accumulating arg2/arg3: %s: %s',","                err.constructor.name, err.message));","        } else {","            handler.handleRequest(req, res, arg2, arg3);","        }","    });","};","","module.exports = TChannelEndpointHandler;",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"29":1,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"38":0,"40":1,"42":1,"44":1,"45":0,"46":0,"47":0,"48":0,"50":0,"51":0,"53":0,"54":0,"56":0,"57":0,"60":1,"61":0,"63":0,"64":0,"68":0,"69":0,"73":0,"77":1,"78":0,"79":0,"80":0,"82":0,"86":0,"91":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/event_emitter.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/event_emitter.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":1,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":1,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"EventEmitter","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}}},"2":{"name":"defineEvent","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":44}}},"3":{"name":"addListener","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}}},"4":{"name":"listenerCompatShim","line":41,"loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":46}}},"5":{"name":"removeListener","line":47,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":40}}},"6":{"name":"removeAllListeners","line":66,"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":34}}},"7":{"name":"emit","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":25}}},"8":{"name":"DefinedEvent","line":76,"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":45}}},"9":{"name":"emit","line":84,"loc":{"start":{"line":84,"column":0},"end":{"line":84,"column":25}}},"10":{"name":"addListener","line":99,"loc":{"start":{"line":99,"column":0},"end":{"line":99,"column":31}}},"11":{"name":"removeListener","line":111,"loc":{"start":{"line":111,"column":0},"end":{"line":111,"column":34}}},"12":{"name":"removeAllListeners","line":131,"loc":{"start":{"line":131,"column":0},"end":{"line":131,"column":30}}},"13":{"name":"defaultErrorListener","line":136,"loc":{"start":{"line":136,"column":0},"end":{"line":136,"column":35}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":25,"column":0},"end":{"line":26,"column":1}},"3":{"start":{"line":28,"column":0},"end":{"line":34,"column":2}},"4":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"5":{"start":{"line":31,"column":8},"end":{"line":31,"column":47}},"6":{"start":{"line":33,"column":4},"end":{"line":33,"column":51}},"7":{"start":{"line":36,"column":0},"end":{"line":44,"column":2}},"8":{"start":{"line":39,"column":4},"end":{"line":39,"column":57}},"9":{"start":{"line":40,"column":4},"end":{"line":40,"column":43}},"10":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"11":{"start":{"line":42,"column":8},"end":{"line":42,"column":36}},"12":{"start":{"line":46,"column":0},"end":{"line":63,"column":2}},"13":{"start":{"line":48,"column":4},"end":{"line":48,"column":35}},"14":{"start":{"line":49,"column":4},"end":{"line":62,"column":5}},"15":{"start":{"line":50,"column":8},"end":{"line":50,"column":28}},"16":{"start":{"line":51,"column":11},"end":{"line":62,"column":5}},"17":{"start":{"line":52,"column":8},"end":{"line":52,"column":27}},"18":{"start":{"line":53,"column":8},"end":{"line":57,"column":9}},"19":{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},"20":{"start":{"line":55,"column":16},"end":{"line":55,"column":49}},"21":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"22":{"start":{"line":59,"column":12},"end":{"line":59,"column":43}},"23":{"start":{"line":61,"column":8},"end":{"line":61,"column":34}},"24":{"start":{"line":65,"column":0},"end":{"line":69,"column":2}},"25":{"start":{"line":67,"column":4},"end":{"line":67,"column":81}},"26":{"start":{"line":68,"column":4},"end":{"line":68,"column":46}},"27":{"start":{"line":71,"column":0},"end":{"line":74,"column":2}},"28":{"start":{"line":73,"column":4},"end":{"line":73,"column":41}},"29":{"start":{"line":76,"column":0},"end":{"line":81,"column":1}},"30":{"start":{"line":77,"column":4},"end":{"line":77,"column":21}},"31":{"start":{"line":78,"column":4},"end":{"line":78,"column":43}},"32":{"start":{"line":79,"column":4},"end":{"line":79,"column":25}},"33":{"start":{"line":80,"column":4},"end":{"line":80,"column":24}},"34":{"start":{"line":83,"column":0},"end":{"line":95,"column":2}},"35":{"start":{"line":85,"column":4},"end":{"line":94,"column":5}},"36":{"start":{"line":86,"column":8},"end":{"line":86,"column":33}},"37":{"start":{"line":87,"column":11},"end":{"line":94,"column":5}},"38":{"start":{"line":88,"column":8},"end":{"line":88,"column":39}},"39":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"40":{"start":{"line":90,"column":12},"end":{"line":90,"column":36}},"41":{"start":{"line":92,"column":11},"end":{"line":94,"column":5}},"42":{"start":{"line":93,"column":8},"end":{"line":93,"column":40}},"43":{"start":{"line":97,"column":0},"end":{"line":108,"column":2}},"44":{"start":{"line":100,"column":4},"end":{"line":107,"column":5}},"45":{"start":{"line":101,"column":8},"end":{"line":101,"column":38}},"46":{"start":{"line":102,"column":11},"end":{"line":107,"column":5}},"47":{"start":{"line":103,"column":8},"end":{"line":103,"column":53}},"48":{"start":{"line":104,"column":8},"end":{"line":104,"column":29}},"49":{"start":{"line":106,"column":8},"end":{"line":106,"column":33}},"50":{"start":{"line":110,"column":0},"end":{"line":128,"column":2}},"51":{"start":{"line":112,"column":4},"end":{"line":127,"column":5}},"52":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"53":{"start":{"line":114,"column":12},"end":{"line":114,"column":33}},"54":{"start":{"line":116,"column":11},"end":{"line":127,"column":5}},"55":{"start":{"line":117,"column":8},"end":{"line":117,"column":27}},"56":{"start":{"line":118,"column":8},"end":{"line":122,"column":9}},"57":{"start":{"line":119,"column":12},"end":{"line":121,"column":13}},"58":{"start":{"line":120,"column":16},"end":{"line":120,"column":50}},"59":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"60":{"start":{"line":124,"column":12},"end":{"line":124,"column":44}},"61":{"start":{"line":126,"column":8},"end":{"line":126,"column":35}},"62":{"start":{"line":130,"column":0},"end":{"line":134,"column":2}},"63":{"start":{"line":132,"column":4},"end":{"line":132,"column":25}},"64":{"start":{"line":133,"column":4},"end":{"line":133,"column":24}},"65":{"start":{"line":136,"column":0},"end":{"line":141,"column":1}},"66":{"start":{"line":137,"column":4},"end":{"line":139,"column":5}},"67":{"start":{"line":138,"column":8},"end":{"line":138,"column":68}},"68":{"start":{"line":140,"column":4},"end":{"line":140,"column":14}},"69":{"start":{"line":143,"column":0},"end":{"line":143,"column":30}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":24}},{"start":{"line":30,"column":28},"end":{"line":30,"column":44}}]},"3":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"4":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":20}},{"start":{"line":49,"column":24},"end":{"line":49,"column":58}}]},"5":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":11},"end":{"line":51,"column":11}},{"start":{"line":51,"column":11},"end":{"line":51,"column":11}}]},"6":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":54,"column":12}},{"start":{"line":54,"column":12},"end":{"line":54,"column":12}}]},"7":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":8}},{"start":{"line":58,"column":8},"end":{"line":58,"column":8}}]},"8":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"9":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":11},"end":{"line":87,"column":11}},{"start":{"line":87,"column":11},"end":{"line":87,"column":11}}]},"10":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":11},"end":{"line":92,"column":11}},{"start":{"line":92,"column":11},"end":{"line":92,"column":11}}]},"11":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"12":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":11},"end":{"line":102,"column":11}},{"start":{"line":102,"column":11},"end":{"line":102,"column":11}}]},"13":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]},"14":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"15":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":11},"end":{"line":116,"column":11}},{"start":{"line":116,"column":11},"end":{"line":116,"column":11}}]},"16":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":119,"column":12}},{"start":{"line":119,"column":12},"end":{"line":119,"column":12}}]},"17":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":123,"column":8}},{"start":{"line":123,"column":8},"end":{"line":123,"column":8}}]},"18":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":4},"end":{"line":137,"column":4}},{"start":{"line":137,"column":4},"end":{"line":137,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","","function EventEmitter() {","}","","EventEmitter.prototype.defineEvent =","function defineEvent(type, defaultListener) {","    if (!defaultListener && type === 'error') {","        defaultListener = defaultErrorListener;","    }","    return new DefinedEvent(type, defaultListener);","};","","EventEmitter.prototype.on =","EventEmitter.prototype.addListener =","function addListener(type, listener) {","    this[type + 'Event'].addListener(listenerCompatShim);","    listenerCompatShim.listener = listener;","    function listenerCompatShim(arg, context) {","        listener.call(context, arg);","    }","};","","EventEmitter.prototype.removeListener =","function removeListener(type, listener) {","    var evt = this[type + 'Event'];","    if (evt.listener && evt.listener.listener === listener) {","        evt.listener = null;","    } else if (evt.listeners.length) {","        var listeners = [];","        for (var i = 0; i < evt.listeners.length; i++) {","            if (evt.listeners[i].listener !== listener) {","                listeners.push(evt.listeners[i]);","            }","        }","        if (listeners.length === 1) {","            evt.listener = listeners.pop();","        }","        evt.listeners = listeners;","    }","};","","EventEmitter.prototype.removeAllListeners =","function removeAllListeners(type) {","    assert(type, 'not implemented: removing all listeners from all event types');","    this[type + 'Event'].removeAllListeners();","};","","EventEmitter.prototype.emit =","function emit(type, arg) {","    this[type + 'Event'].emit(this, arg);","};","","function DefinedEvent(type, defaultListener) {","    this.type = type;","    this.defaultListener = defaultListener;","    this.listener = null;","    this.listeners = [];","}","","DefinedEvent.prototype.emit =","function emit(that, arg) {","    if (this.listener) {","        this.listener(arg, that);","    } else if (this.listeners.length) {","        var listeners = this.listeners;","        for (var i = 0; i < listeners.length; i++) {","            listeners[i](arg, that);","        }","    } else if (this.defaultListener) {","        this.defaultListener(arg, that);","    }","};","","DefinedEvent.prototype.on =","DefinedEvent.prototype.addListener =","function addListener(listener) {","    if (this.listeners.length) {","        this.listeners.push(listener);","    } else if (this.listener) {","        this.listeners.push(this.listener, listener);","        this.listener = null;","    } else {","        this.listener = listener;","    }","};","","DefinedEvent.prototype.removeListener =","function removeListener(listener) {","    if (this.listener) {","        if (this.listener === listener) {","            this.listener = null;","        }","    } else if (this.listeners.length) {","        var listeners = [];","        for (var i = 0; i < this.listeners.length; i++) {","            if (this.listeners[i] !== listener) {","                listeners.push(this.listeners[i]);","            }","        }","        if (listeners.length === 1) {","            this.listener = listeners.pop();","        }","        this.listeners = listeners;","    }","};","","DefinedEvent.prototype.removeAllListeners =","function removeAllListeners() {","    this.listener = null;","    this.listeners = [];","};","","function defaultErrorListener(err) {","    if (!err) {","        err = new TypeError('Uncaught, unspecified \"error\" event.');","    }","    throw err;","}","","module.exports = EventEmitter;",""],"l":{"23":1,"25":1,"28":1,"30":0,"31":0,"33":0,"36":1,"39":0,"40":0,"41":1,"42":0,"46":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"58":0,"59":0,"61":0,"65":1,"67":0,"68":0,"71":1,"73":0,"76":1,"77":0,"78":0,"79":0,"80":0,"83":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"92":0,"93":0,"97":1,"100":0,"101":0,"102":0,"103":0,"104":0,"106":0,"110":1,"112":0,"113":0,"114":0,"116":0,"117":0,"118":0,"119":0,"120":0,"123":0,"124":0,"126":0,"130":1,"132":0,"133":0,"136":1,"137":0,"138":0,"140":0,"143":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/errors.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/errors.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1,"129":0,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":1,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"5":[0,0],"6":[0,0,0,0],"7":[0,0,0,0,0,0,0,0,0,0],"8":[0,0,0,0,0,0,0,0,0,0],"9":[0,0,0,0,0,0,0,0,0,0],"10":[0,0],"11":[0,0,0,0,0,0,0,0,0,0],"12":[0,0,0,0,0,0,0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0,0,0,0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"classify","line":653,"loc":{"start":{"line":653,"column":18},"end":{"line":653,"column":41}}},"2":{"name":"classifyBurwError","line":783,"loc":{"start":{"line":783,"column":0},"end":{"line":783,"column":32}}},"3":{"name":"isUnhealthy","line":801,"loc":{"start":{"line":801,"column":21},"end":{"line":801,"column":52}}},"4":{"name":"shouldRetry","line":822,"loc":{"start":{"line":822,"column":21},"end":{"line":822,"column":64}}},"5":{"name":"HTTPInfo","line":846,"loc":{"start":{"line":846,"column":0},"end":{"line":846,"column":45}}},"6":{"name":"toHTTPCode","line":851,"loc":{"start":{"line":851,"column":20},"end":{"line":851,"column":50}}},"7":{"name":"isFatal","line":883,"loc":{"start":{"line":883,"column":17},"end":{"line":883,"column":49}}},"8":{"name":"errorLogLevel","line":907,"loc":{"start":{"line":907,"column":18},"end":{"line":907,"column":56}}},"9":{"name":"isPendingError","line":937,"loc":{"start":{"line":937,"column":24},"end":{"line":937,"column":58}}},"10":{"name":"isParseError","line":957,"loc":{"start":{"line":957,"column":22},"end":{"line":957,"column":51}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":44}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":42}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":28}},"5":{"start":{"line":31,"column":0},"end":{"line":34,"column":3}},"6":{"start":{"line":36,"column":0},"end":{"line":41,"column":3}},"7":{"start":{"line":43,"column":0},"end":{"line":48,"column":3}},"8":{"start":{"line":50,"column":0},"end":{"line":55,"column":3}},"9":{"start":{"line":57,"column":0},"end":{"line":60,"column":3}},"10":{"start":{"line":62,"column":0},"end":{"line":65,"column":3}},"11":{"start":{"line":67,"column":0},"end":{"line":70,"column":3}},"12":{"start":{"line":72,"column":0},"end":{"line":75,"column":3}},"13":{"start":{"line":77,"column":0},"end":{"line":81,"column":3}},"14":{"start":{"line":83,"column":0},"end":{"line":86,"column":3}},"15":{"start":{"line":88,"column":0},"end":{"line":91,"column":3}},"16":{"start":{"line":93,"column":0},"end":{"line":96,"column":3}},"17":{"start":{"line":98,"column":0},"end":{"line":101,"column":3}},"18":{"start":{"line":103,"column":0},"end":{"line":109,"column":3}},"19":{"start":{"line":111,"column":0},"end":{"line":116,"column":3}},"20":{"start":{"line":118,"column":0},"end":{"line":125,"column":3}},"21":{"start":{"line":127,"column":0},"end":{"line":135,"column":3}},"22":{"start":{"line":137,"column":0},"end":{"line":141,"column":3}},"23":{"start":{"line":143,"column":0},"end":{"line":151,"column":3}},"24":{"start":{"line":153,"column":0},"end":{"line":156,"column":3}},"25":{"start":{"line":158,"column":0},"end":{"line":161,"column":3}},"26":{"start":{"line":163,"column":0},"end":{"line":169,"column":3}},"27":{"start":{"line":171,"column":0},"end":{"line":176,"column":3}},"28":{"start":{"line":178,"column":0},"end":{"line":183,"column":3}},"29":{"start":{"line":185,"column":0},"end":{"line":190,"column":3}},"30":{"start":{"line":192,"column":0},"end":{"line":197,"column":3}},"31":{"start":{"line":199,"column":0},"end":{"line":203,"column":3}},"32":{"start":{"line":205,"column":0},"end":{"line":208,"column":3}},"33":{"start":{"line":210,"column":0},"end":{"line":215,"column":3}},"34":{"start":{"line":217,"column":0},"end":{"line":222,"column":3}},"35":{"start":{"line":224,"column":0},"end":{"line":228,"column":3}},"36":{"start":{"line":230,"column":0},"end":{"line":233,"column":3}},"37":{"start":{"line":235,"column":0},"end":{"line":242,"column":3}},"38":{"start":{"line":244,"column":0},"end":{"line":250,"column":3}},"39":{"start":{"line":252,"column":0},"end":{"line":256,"column":3}},"40":{"start":{"line":258,"column":0},"end":{"line":264,"column":3}},"41":{"start":{"line":266,"column":0},"end":{"line":271,"column":3}},"42":{"start":{"line":273,"column":0},"end":{"line":282,"column":3}},"43":{"start":{"line":284,"column":0},"end":{"line":292,"column":3}},"44":{"start":{"line":294,"column":0},"end":{"line":303,"column":3}},"45":{"start":{"line":305,"column":0},"end":{"line":313,"column":3}},"46":{"start":{"line":315,"column":0},"end":{"line":318,"column":3}},"47":{"start":{"line":320,"column":0},"end":{"line":324,"column":3}},"48":{"start":{"line":326,"column":0},"end":{"line":331,"column":3}},"49":{"start":{"line":333,"column":0},"end":{"line":337,"column":3}},"50":{"start":{"line":339,"column":0},"end":{"line":342,"column":3}},"51":{"start":{"line":344,"column":0},"end":{"line":348,"column":3}},"52":{"start":{"line":350,"column":0},"end":{"line":355,"column":3}},"53":{"start":{"line":357,"column":0},"end":{"line":361,"column":3}},"54":{"start":{"line":363,"column":0},"end":{"line":367,"column":3}},"55":{"start":{"line":369,"column":0},"end":{"line":372,"column":3}},"56":{"start":{"line":374,"column":0},"end":{"line":377,"column":3}},"57":{"start":{"line":379,"column":0},"end":{"line":387,"column":3}},"58":{"start":{"line":389,"column":0},"end":{"line":395,"column":3}},"59":{"start":{"line":397,"column":0},"end":{"line":401,"column":3}},"60":{"start":{"line":403,"column":0},"end":{"line":407,"column":3}},"61":{"start":{"line":409,"column":0},"end":{"line":413,"column":3}},"62":{"start":{"line":415,"column":0},"end":{"line":420,"column":3}},"63":{"start":{"line":422,"column":0},"end":{"line":426,"column":3}},"64":{"start":{"line":428,"column":0},"end":{"line":437,"column":3}},"65":{"start":{"line":439,"column":0},"end":{"line":445,"column":3}},"66":{"start":{"line":447,"column":0},"end":{"line":451,"column":3}},"67":{"start":{"line":453,"column":0},"end":{"line":458,"column":3}},"68":{"start":{"line":460,"column":0},"end":{"line":463,"column":3}},"69":{"start":{"line":465,"column":0},"end":{"line":468,"column":3}},"70":{"start":{"line":470,"column":0},"end":{"line":473,"column":3}},"71":{"start":{"line":475,"column":0},"end":{"line":478,"column":3}},"72":{"start":{"line":480,"column":0},"end":{"line":484,"column":3}},"73":{"start":{"line":486,"column":0},"end":{"line":492,"column":3}},"74":{"start":{"line":494,"column":0},"end":{"line":498,"column":3}},"75":{"start":{"line":500,"column":0},"end":{"line":503,"column":3}},"76":{"start":{"line":505,"column":0},"end":{"line":508,"column":3}},"77":{"start":{"line":510,"column":0},"end":{"line":513,"column":3}},"78":{"start":{"line":515,"column":0},"end":{"line":520,"column":3}},"79":{"start":{"line":522,"column":0},"end":{"line":525,"column":3}},"80":{"start":{"line":527,"column":0},"end":{"line":532,"column":3}},"81":{"start":{"line":534,"column":0},"end":{"line":538,"column":3}},"82":{"start":{"line":540,"column":0},"end":{"line":545,"column":3}},"83":{"start":{"line":547,"column":0},"end":{"line":558,"column":3}},"84":{"start":{"line":560,"column":0},"end":{"line":569,"column":3}},"85":{"start":{"line":571,"column":0},"end":{"line":582,"column":3}},"86":{"start":{"line":584,"column":0},"end":{"line":593,"column":3}},"87":{"start":{"line":595,"column":0},"end":{"line":602,"column":3}},"88":{"start":{"line":604,"column":0},"end":{"line":608,"column":3}},"89":{"start":{"line":610,"column":0},"end":{"line":614,"column":3}},"90":{"start":{"line":616,"column":0},"end":{"line":623,"column":3}},"91":{"start":{"line":625,"column":0},"end":{"line":630,"column":3}},"92":{"start":{"line":632,"column":0},"end":{"line":637,"column":3}},"93":{"start":{"line":639,"column":0},"end":{"line":644,"column":3}},"94":{"start":{"line":646,"column":0},"end":{"line":649,"column":3}},"95":{"start":{"line":653,"column":0},"end":{"line":780,"column":2}},"96":{"start":{"line":654,"column":4},"end":{"line":656,"column":5}},"97":{"start":{"line":655,"column":8},"end":{"line":655,"column":28}},"98":{"start":{"line":658,"column":4},"end":{"line":660,"column":5}},"99":{"start":{"line":659,"column":8},"end":{"line":659,"column":38}},"100":{"start":{"line":662,"column":4},"end":{"line":779,"column":5}},"101":{"start":{"line":664,"column":12},"end":{"line":664,"column":31}},"102":{"start":{"line":671,"column":12},"end":{"line":671,"column":30}},"103":{"start":{"line":676,"column":12},"end":{"line":676,"column":29}},"104":{"start":{"line":699,"column":12},"end":{"line":699,"column":32}},"105":{"start":{"line":738,"column":12},"end":{"line":738,"column":35}},"106":{"start":{"line":748,"column":12},"end":{"line":748,"column":34}},"107":{"start":{"line":775,"column":12},"end":{"line":775,"column":37}},"108":{"start":{"line":778,"column":12},"end":{"line":778,"column":24}},"109":{"start":{"line":783,"column":0},"end":{"line":796,"column":1}},"110":{"start":{"line":784,"column":4},"end":{"line":784,"column":47}},"111":{"start":{"line":785,"column":4},"end":{"line":795,"column":5}},"112":{"start":{"line":786,"column":8},"end":{"line":794,"column":9}},"113":{"start":{"line":788,"column":16},"end":{"line":788,"column":38}},"114":{"start":{"line":790,"column":16},"end":{"line":790,"column":39}},"115":{"start":{"line":793,"column":16},"end":{"line":793,"column":41}},"116":{"start":{"line":801,"column":0},"end":{"line":820,"column":2}},"117":{"start":{"line":802,"column":4},"end":{"line":819,"column":5}},"118":{"start":{"line":806,"column":12},"end":{"line":806,"column":25}},"119":{"start":{"line":815,"column":12},"end":{"line":815,"column":24}},"120":{"start":{"line":818,"column":12},"end":{"line":818,"column":24}},"121":{"start":{"line":822,"column":0},"end":{"line":844,"column":2}},"122":{"start":{"line":823,"column":4},"end":{"line":843,"column":5}},"123":{"start":{"line":827,"column":12},"end":{"line":827,"column":25}},"124":{"start":{"line":831,"column":12},"end":{"line":831,"column":24}},"125":{"start":{"line":834,"column":12},"end":{"line":834,"column":42}},"126":{"start":{"line":839,"column":12},"end":{"line":839,"column":50}},"127":{"start":{"line":842,"column":12},"end":{"line":842,"column":24}},"128":{"start":{"line":846,"column":0},"end":{"line":849,"column":1}},"129":{"start":{"line":847,"column":4},"end":{"line":847,"column":33}},"130":{"start":{"line":848,"column":4},"end":{"line":848,"column":39}},"131":{"start":{"line":851,"column":0},"end":{"line":881,"column":2}},"132":{"start":{"line":852,"column":4},"end":{"line":880,"column":5}},"133":{"start":{"line":854,"column":12},"end":{"line":854,"column":59}},"134":{"start":{"line":858,"column":12},"end":{"line":858,"column":60}},"135":{"start":{"line":861,"column":12},"end":{"line":861,"column":56}},"136":{"start":{"line":864,"column":12},"end":{"line":864,"column":52}},"137":{"start":{"line":867,"column":12},"end":{"line":867,"column":58}},"138":{"start":{"line":870,"column":12},"end":{"line":870,"column":64}},"139":{"start":{"line":873,"column":12},"end":{"line":873,"column":63}},"140":{"start":{"line":876,"column":12},"end":{"line":876,"column":66}},"141":{"start":{"line":879,"column":12},"end":{"line":879,"column":62}},"142":{"start":{"line":883,"column":0},"end":{"line":904,"column":2}},"143":{"start":{"line":884,"column":4},"end":{"line":886,"column":5}},"144":{"start":{"line":885,"column":8},"end":{"line":885,"column":40}},"145":{"start":{"line":887,"column":4},"end":{"line":903,"column":5}},"146":{"start":{"line":894,"column":12},"end":{"line":894,"column":25}},"147":{"start":{"line":899,"column":12},"end":{"line":899,"column":24}},"148":{"start":{"line":902,"column":12},"end":{"line":902,"column":24}},"149":{"start":{"line":907,"column":0},"end":{"line":930,"column":2}},"150":{"start":{"line":908,"column":4},"end":{"line":929,"column":5}},"151":{"start":{"line":911,"column":12},"end":{"line":913,"column":13}},"152":{"start":{"line":912,"column":16},"end":{"line":912,"column":30}},"153":{"start":{"line":914,"column":12},"end":{"line":914,"column":27}},"154":{"start":{"line":921,"column":12},"end":{"line":921,"column":26}},"155":{"start":{"line":925,"column":12},"end":{"line":925,"column":26}},"156":{"start":{"line":928,"column":12},"end":{"line":928,"column":27}},"157":{"start":{"line":937,"column":0},"end":{"line":955,"column":2}},"158":{"start":{"line":938,"column":4},"end":{"line":954,"column":5}},"159":{"start":{"line":942,"column":12},"end":{"line":942,"column":24}},"160":{"start":{"line":950,"column":12},"end":{"line":950,"column":25}},"161":{"start":{"line":953,"column":12},"end":{"line":953,"column":25}},"162":{"start":{"line":957,"column":0},"end":{"line":959,"column":2}},"163":{"start":{"line":958,"column":4},"end":{"line":958,"column":39}}},"branchMap":{"1":{"line":654,"type":"if","locations":[{"start":{"line":654,"column":4},"end":{"line":654,"column":4}},{"start":{"line":654,"column":4},"end":{"line":654,"column":4}}]},"2":{"line":658,"type":"if","locations":[{"start":{"line":658,"column":4},"end":{"line":658,"column":4}},{"start":{"line":658,"column":4},"end":{"line":658,"column":4}}]},"3":{"line":658,"type":"binary-expr","locations":[{"start":{"line":658,"column":8},"end":{"line":658,"column":16}},{"start":{"line":658,"column":20},"end":{"line":658,"column":51}}]},"4":{"line":662,"type":"switch","locations":[{"start":{"line":663,"column":8},"end":{"line":664,"column":31}},{"start":{"line":666,"column":8},"end":{"line":666,"column":36}},{"start":{"line":667,"column":8},"end":{"line":667,"column":48}},{"start":{"line":668,"column":8},"end":{"line":668,"column":42}},{"start":{"line":669,"column":8},"end":{"line":669,"column":43}},{"start":{"line":670,"column":8},"end":{"line":671,"column":30}},{"start":{"line":673,"column":8},"end":{"line":673,"column":49}},{"start":{"line":674,"column":8},"end":{"line":674,"column":43}},{"start":{"line":675,"column":8},"end":{"line":676,"column":29}},{"start":{"line":678,"column":8},"end":{"line":678,"column":50}},{"start":{"line":679,"column":8},"end":{"line":679,"column":61}},{"start":{"line":680,"column":8},"end":{"line":680,"column":61}},{"start":{"line":681,"column":8},"end":{"line":681,"column":63}},{"start":{"line":682,"column":8},"end":{"line":682,"column":63}},{"start":{"line":683,"column":8},"end":{"line":683,"column":38}},{"start":{"line":684,"column":8},"end":{"line":684,"column":47}},{"start":{"line":685,"column":8},"end":{"line":685,"column":40}},{"start":{"line":686,"column":8},"end":{"line":686,"column":47}},{"start":{"line":687,"column":8},"end":{"line":687,"column":55}},{"start":{"line":688,"column":8},"end":{"line":688,"column":41}},{"start":{"line":689,"column":8},"end":{"line":689,"column":51}},{"start":{"line":690,"column":8},"end":{"line":690,"column":33}},{"start":{"line":691,"column":8},"end":{"line":691,"column":45}},{"start":{"line":692,"column":8},"end":{"line":692,"column":64}},{"start":{"line":693,"column":8},"end":{"line":693,"column":64}},{"start":{"line":694,"column":8},"end":{"line":694,"column":63}},{"start":{"line":695,"column":8},"end":{"line":695,"column":63}},{"start":{"line":696,"column":8},"end":{"line":696,"column":33}},{"start":{"line":697,"column":8},"end":{"line":697,"column":45}},{"start":{"line":698,"column":8},"end":{"line":699,"column":32}},{"start":{"line":701,"column":8},"end":{"line":701,"column":43}},{"start":{"line":702,"column":8},"end":{"line":702,"column":48}},{"start":{"line":707,"column":8},"end":{"line":707,"column":49}},{"start":{"line":711,"column":8},"end":{"line":711,"column":50}},{"start":{"line":714,"column":8},"end":{"line":714,"column":57}},{"start":{"line":715,"column":8},"end":{"line":715,"column":58}},{"start":{"line":717,"column":8},"end":{"line":717,"column":62}},{"start":{"line":718,"column":8},"end":{"line":718,"column":67}},{"start":{"line":719,"column":8},"end":{"line":719,"column":64}},{"start":{"line":720,"column":8},"end":{"line":720,"column":69}},{"start":{"line":721,"column":8},"end":{"line":721,"column":52}},{"start":{"line":722,"column":8},"end":{"line":722,"column":53}},{"start":{"line":723,"column":8},"end":{"line":723,"column":53}},{"start":{"line":724,"column":8},"end":{"line":724,"column":66}},{"start":{"line":725,"column":8},"end":{"line":725,"column":71}},{"start":{"line":726,"column":8},"end":{"line":726,"column":67}},{"start":{"line":727,"column":8},"end":{"line":727,"column":72}},{"start":{"line":728,"column":8},"end":{"line":728,"column":43}},{"start":{"line":729,"column":8},"end":{"line":729,"column":43}},{"start":{"line":730,"column":8},"end":{"line":730,"column":47}},{"start":{"line":731,"column":8},"end":{"line":731,"column":44}},{"start":{"line":732,"column":8},"end":{"line":732,"column":45}},{"start":{"line":733,"column":8},"end":{"line":733,"column":45}},{"start":{"line":734,"column":8},"end":{"line":734,"column":50}},{"start":{"line":735,"column":8},"end":{"line":735,"column":46}},{"start":{"line":736,"column":8},"end":{"line":736,"column":50}},{"start":{"line":737,"column":8},"end":{"line":738,"column":35}},{"start":{"line":740,"column":8},"end":{"line":740,"column":41}},{"start":{"line":741,"column":8},"end":{"line":741,"column":41}},{"start":{"line":742,"column":8},"end":{"line":742,"column":34}},{"start":{"line":743,"column":8},"end":{"line":743,"column":36}},{"start":{"line":744,"column":8},"end":{"line":744,"column":31}},{"start":{"line":745,"column":8},"end":{"line":745,"column":38}},{"start":{"line":746,"column":8},"end":{"line":746,"column":44}},{"start":{"line":747,"column":8},"end":{"line":748,"column":34}},{"start":{"line":750,"column":8},"end":{"line":750,"column":65}},{"start":{"line":751,"column":8},"end":{"line":751,"column":65}},{"start":{"line":752,"column":8},"end":{"line":752,"column":67}},{"start":{"line":753,"column":8},"end":{"line":753,"column":67}},{"start":{"line":754,"column":8},"end":{"line":754,"column":63}},{"start":{"line":755,"column":8},"end":{"line":755,"column":49}},{"start":{"line":756,"column":8},"end":{"line":756,"column":45}},{"start":{"line":757,"column":8},"end":{"line":757,"column":64}},{"start":{"line":758,"column":8},"end":{"line":758,"column":64}},{"start":{"line":759,"column":8},"end":{"line":759,"column":65}},{"start":{"line":760,"column":8},"end":{"line":760,"column":65}},{"start":{"line":761,"column":8},"end":{"line":761,"column":52}},{"start":{"line":762,"column":8},"end":{"line":762,"column":41}},{"start":{"line":763,"column":8},"end":{"line":763,"column":40}},{"start":{"line":764,"column":8},"end":{"line":764,"column":57}},{"start":{"line":765,"column":8},"end":{"line":765,"column":44}},{"start":{"line":766,"column":8},"end":{"line":766,"column":49}},{"start":{"line":767,"column":8},"end":{"line":767,"column":46}},{"start":{"line":768,"column":8},"end":{"line":768,"column":49}},{"start":{"line":769,"column":8},"end":{"line":769,"column":45}},{"start":{"line":770,"column":8},"end":{"line":770,"column":45}},{"start":{"line":771,"column":8},"end":{"line":771,"column":43}},{"start":{"line":772,"column":8},"end":{"line":772,"column":42}},{"start":{"line":773,"column":8},"end":{"line":773,"column":47}},{"start":{"line":774,"column":8},"end":{"line":775,"column":37}},{"start":{"line":777,"column":8},"end":{"line":778,"column":24}}]},"5":{"line":785,"type":"if","locations":[{"start":{"line":785,"column":4},"end":{"line":785,"column":4}},{"start":{"line":785,"column":4},"end":{"line":785,"column":4}}]},"6":{"line":786,"type":"switch","locations":[{"start":{"line":787,"column":12},"end":{"line":788,"column":38}},{"start":{"line":789,"column":12},"end":{"line":790,"column":39}},{"start":{"line":791,"column":12},"end":{"line":791,"column":28}},{"start":{"line":792,"column":12},"end":{"line":793,"column":41}}]},"7":{"line":802,"type":"switch","locations":[{"start":{"line":804,"column":8},"end":{"line":804,"column":26}},{"start":{"line":805,"column":8},"end":{"line":806,"column":25}},{"start":{"line":808,"column":8},"end":{"line":808,"column":25}},{"start":{"line":809,"column":8},"end":{"line":809,"column":23}},{"start":{"line":810,"column":8},"end":{"line":810,"column":20}},{"start":{"line":811,"column":8},"end":{"line":811,"column":24}},{"start":{"line":812,"column":8},"end":{"line":812,"column":31}},{"start":{"line":813,"column":8},"end":{"line":813,"column":28}},{"start":{"line":814,"column":8},"end":{"line":815,"column":24}},{"start":{"line":817,"column":8},"end":{"line":818,"column":24}}]},"8":{"line":823,"type":"switch","locations":[{"start":{"line":824,"column":8},"end":{"line":824,"column":26}},{"start":{"line":825,"column":8},"end":{"line":825,"column":25}},{"start":{"line":826,"column":8},"end":{"line":827,"column":25}},{"start":{"line":829,"column":8},"end":{"line":829,"column":20}},{"start":{"line":830,"column":8},"end":{"line":831,"column":24}},{"start":{"line":833,"column":8},"end":{"line":834,"column":42}},{"start":{"line":836,"column":8},"end":{"line":836,"column":28}},{"start":{"line":837,"column":8},"end":{"line":837,"column":29}},{"start":{"line":838,"column":8},"end":{"line":839,"column":50}},{"start":{"line":841,"column":8},"end":{"line":842,"column":24}}]},"9":{"line":852,"type":"switch","locations":[{"start":{"line":853,"column":8},"end":{"line":854,"column":59}},{"start":{"line":856,"column":8},"end":{"line":856,"column":25}},{"start":{"line":857,"column":8},"end":{"line":858,"column":60}},{"start":{"line":860,"column":8},"end":{"line":861,"column":56}},{"start":{"line":863,"column":8},"end":{"line":864,"column":52}},{"start":{"line":866,"column":8},"end":{"line":867,"column":58}},{"start":{"line":869,"column":8},"end":{"line":870,"column":64}},{"start":{"line":872,"column":8},"end":{"line":873,"column":63}},{"start":{"line":875,"column":8},"end":{"line":876,"column":66}},{"start":{"line":878,"column":8},"end":{"line":879,"column":62}}]},"10":{"line":884,"type":"if","locations":[{"start":{"line":884,"column":4},"end":{"line":884,"column":4}},{"start":{"line":884,"column":4},"end":{"line":884,"column":4}}]},"11":{"line":887,"type":"switch","locations":[{"start":{"line":888,"column":8},"end":{"line":888,"column":20}},{"start":{"line":889,"column":8},"end":{"line":889,"column":25}},{"start":{"line":890,"column":8},"end":{"line":890,"column":24}},{"start":{"line":891,"column":8},"end":{"line":891,"column":28}},{"start":{"line":892,"column":8},"end":{"line":892,"column":23}},{"start":{"line":893,"column":8},"end":{"line":894,"column":25}},{"start":{"line":896,"column":8},"end":{"line":896,"column":26}},{"start":{"line":897,"column":8},"end":{"line":897,"column":29}},{"start":{"line":898,"column":8},"end":{"line":899,"column":24}},{"start":{"line":901,"column":8},"end":{"line":902,"column":24}}]},"12":{"line":908,"type":"switch","locations":[{"start":{"line":909,"column":8},"end":{"line":909,"column":29}},{"start":{"line":910,"column":8},"end":{"line":914,"column":27}},{"start":{"line":916,"column":8},"end":{"line":916,"column":20}},{"start":{"line":917,"column":8},"end":{"line":917,"column":25}},{"start":{"line":918,"column":8},"end":{"line":918,"column":24}},{"start":{"line":919,"column":8},"end":{"line":919,"column":28}},{"start":{"line":920,"column":8},"end":{"line":921,"column":26}},{"start":{"line":923,"column":8},"end":{"line":923,"column":26}},{"start":{"line":924,"column":8},"end":{"line":925,"column":26}},{"start":{"line":927,"column":8},"end":{"line":928,"column":27}}]},"13":{"line":911,"type":"if","locations":[{"start":{"line":911,"column":12},"end":{"line":911,"column":12}},{"start":{"line":911,"column":12},"end":{"line":911,"column":12}}]},"14":{"line":911,"type":"binary-expr","locations":[{"start":{"line":911,"column":16},"end":{"line":911,"column":32}},{"start":{"line":911,"column":36},"end":{"line":911,"column":60}}]},"15":{"line":938,"type":"switch","locations":[{"start":{"line":939,"column":8},"end":{"line":939,"column":20}},{"start":{"line":940,"column":8},"end":{"line":940,"column":24}},{"start":{"line":941,"column":8},"end":{"line":942,"column":24}},{"start":{"line":944,"column":8},"end":{"line":944,"column":26}},{"start":{"line":945,"column":8},"end":{"line":945,"column":25}},{"start":{"line":946,"column":8},"end":{"line":946,"column":28}},{"start":{"line":947,"column":8},"end":{"line":947,"column":29}},{"start":{"line":948,"column":8},"end":{"line":948,"column":23}},{"start":{"line":949,"column":8},"end":{"line":950,"column":25}},{"start":{"line":952,"column":8},"end":{"line":953,"column":25}}]},"16":{"line":958,"type":"binary-expr","locations":[{"start":{"line":958,"column":11},"end":{"line":958,"column":29}},{"start":{"line":958,"column":33},"end":{"line":958,"column":38}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var TypedError = require('error/typed');","var WrappedError = require('error/wrapped');","var bufrwErrors = require('bufrw/errors');","","var Errors = module.exports;","","// All exported errors must be in sorted order","","Errors.Arg1Fragmented = TypedError({","    type: 'tchannel.arg1-fragmented',","    message: 'arg1 must not be fragmented'","});","","Errors.Arg1OverLengthLimit = TypedError({","    type: 'tchannel.arg1-over-length-limit',","    message: 'arg1 length {length} is larger than the limit {limit}',","    length: null,","    limit: null","});","","Errors.ArgChunkGapError = TypedError({","    type: 'tchannel.arg-chunk.gap',","    message: 'arg chunk gap, current: {current} got: {got}',","    current: null,","    got: null","});","","Errors.ArgChunkOutOfOrderError = TypedError({","    type: 'tchannel.arg-chunk.out-of-order',","    message: 'out of order arg chunk, current: {current} got: {got}',","    current: null,","    got: null","});","","Errors.ArgStreamExceededFramePartsError = TypedError({","    type: 'tchannel.argstream.exceeded-frame-parts',","    message: 'frame parts exceeded stream arity'","});","","Errors.ArgStreamFinishedError = TypedError({","    type: 'tchannel.argstream.finished',","    message: 'arg stream already finished'","});","","Errors.ArgStreamUnimplementedError = TypedError({","    type: 'tchannel.argstream.unimplemented',","    message: 'un-streamed argument defragmentation is not implemented'","});","","Errors.ArgStreamUnknownFrameHandlingStateError = TypedError({","    type: 'tchannel.argstream.unknown-frame-handling-state',","    message: 'unknown frame handling state'","});","","Errors.BadCallRequestFrameError = TypedError({","    type: 'tchannel.bad-call-request',","    message: 'Bad call request: {reason}',","    reason: null","});","","Errors.CallReqBeforeInitReqError = TypedError({","    type: 'tchannel.init.call-request-before-init-request',","    message: 'call request before init request'","});","","Errors.CallReqContBeforeInitReqError = TypedError({","    type: 'tchannel.init.call-request-cont-before-init-request',","    message: 'call request cont before init request'","});","","Errors.CallResBeforeInitResError = TypedError({","    type: 'tchannel.init.call-response-before-init-response',","    message: 'call response before init response'","});","","Errors.CallResContBeforeInitResError = TypedError({","    type: 'tchannel.init.call-response-cont-before-init-response',","    message: 'call response cont before init response'","});","","Errors.ChecksumError = TypedError({","    type: 'tchannel.checksum',","    message: 'invalid checksum (type {checksumType}) expected: {expectedValue} actual: {actualValue}',","    checksumType: null,","    expectedValue: null,","    actualValue: null","});","","Errors.ChecksumTypeChanged = TypedError({","    type: 'tchannel.call.checksum-type-changed',","    message: 'checksum type changed mid-stream',","    initialChecksumType: null,","    newChecksumType: null","});","","Errors.ConnectionStaleTimeoutError = TypedError({","    type: 'tchannel.connection-stale.timeout',","    message: 'Connection got two timeouts in a row.\\n' +","        'Connection has been marked as stale and will be timed out',","    period: null,","    elapsed: null,","    lastTimeoutTime: null","});","","Errors.ConnectionTimeoutError = TypedError({","    type: 'tchannel.connection.timeout',","    message: 'connection timed out after {elapsed}ms ' +","        '(limit was {timeout}ms)',","    id: null,","    start: null,","    elapsed: null,","    timeout: null","});","","Errors.CorruptWriteLazyFrame = TypedError({","    type: 'tchannel.lazy-frame.write-corrupt',","    message: 'could not serialize lazy frame due to {context}',","    context: null","});","","Errors.DuplicateHeaderKeyError = TypedError({","    type: 'tchannel.duplicate-header-key',","    message: 'duplicate header key {key}',","    offset: null,","    endOffset: null,","    key: null,","    value: null,","    priorValue: null","});","","Errors.DuplicateInitRequestError = TypedError({","    type: 'tchannel.init.duplicate-init-request',","    message: 'tchannel: duplicate init request'","});","","Errors.DuplicateInitResponseError = TypedError({","    type: 'tchannel.init.duplicate-init-response',","    message: 'tchannel: duplicate init response'","});","","Errors.EphemeralInitResponse = TypedError({","    type: 'tchannel.init.ephemeral-init-response',","    message: 'tchannel: got invalid 0.0.0.0:0 as hostPort in Init Response',","    hostPort: null,","    socketRemoteAddr: null,","    processName: null","});","","Errors.HTTPReqArg2fromBufferError = WrappedError({","    type: 'tchannel.http-handler.from-buffer-arg2.req-failed',","    message: 'Could not read from buffer when sending request.',","    isSerializationError: true,","    arg2: null","});","","Errors.HTTPReqArg2toBufferError = WrappedError({","    type: 'tchannel.http-handler.to-buffer-arg2.req-failed',","    message: 'Could not write to buffer when sending request.',","    isSerializationError: true,","    head: null","});","","Errors.HTTPResArg2fromBufferError = WrappedError({","    type: 'tchannel.http-handler.from-buffer-arg2.res-failed',","    message: 'Could not read from buffer when sending response.',","    isSerializationError: true,","    arg2: null","});","","Errors.HTTPResArg2toBufferError = WrappedError({","    type: 'tchannel.http-handler.to-buffer-arg2.res-failed',","    message: 'Could not write to buffer when sending response.',","    isSerializationError: true,","    head: null","});","","Errors.InAsHeaderRequired = TypedError({","    type: 'tchannel.handler.incoming-req-as-header-required',","    message: 'Expected incoming call {frame} to have \"as\" header set.',","    frame: null","});","","Errors.InCnHeaderRequired = TypedError({","    type: 'tchannel.handler.incoming-req-cn-header-required',","    message: 'Expected incoming call request to have \"cn\" header set.'","});","","Errors.InvalidArgumentError = TypedError({","    type: 'tchannel.invalid-argument',","    message: 'invalid argument, expected array or null',","    argType: null,","    argConstructor: null","});","","Errors.InvalidErrorCodeError = TypedError({","    type: 'tchannel.invalid-error-code',","    message: 'invalid tchannel error code {errorCode}',","    errorCode: null,","    originalId: null","});","","Errors.InvalidFrameTypeError = TypedError({","    type: 'tchannel.invalid-frame-type',","    message: 'invalid frame type {typeNumber}',","    typeNumber: null","});","","Errors.InvalidHandlerError = TypedError({","    type: 'tchannel.invalid-handler',","    message: 'invalid handler function'","});","","Errors.InvalidHandlerForRegister = TypedError({","    type: 'tchannel.invalid-handler.for-registration',","    message: 'Found unexpected handler when calling `.register()`.\\n' +","        'You cannot set a custom handler when using `.register()`.\\n' +","        '`.register()` is deprecated; use a proper handler.',","    handlerType: null,","    handler: null","});","","Errors.InvalidHeaderTypeError = TypedError({","    type: 'tchannel.invalid-header-type',","    message: 'invalid header type for header {name}; ' +","        'expected string, got {headerType}',","    headerType: null,","    name: null","});","","Errors.InvalidInitHostPortError = TypedError({","    type: 'tchannel.invalid-init-host-port',","    message: 'invalid host:port string in init header',","    hostPort: null","});","","Errors.InvalidJSONBody = TypedError({","    type: 'tchannel-handler.json.invalid-body',","    message: 'Invalid error body, expected a typed-error',","    isSerializationError: true,","    head: null,","    body: null","});","","Errors.InvalidTTL = TypedError({","    type: 'tchannel.protocol.invalid-ttl',","    message: 'Got an invalid ttl. Expected positive ttl but got {ttl}',","    ttl: null,","    isParseError: null","});","","Errors.JSONBodyParserError = WrappedError({","    type: 'tchannel-json-handler.parse-error.body-failed',","    message: 'Could not parse body (arg3) argument.\\n' +","        'Expected JSON encoded arg3 for endpoint {endpoint}.\\n' +","        'Got {bodyStr} instead of JSON.',","    isSerializationError: true,","    endpoint: null,","    direction: null,","    bodyStr: null","});","","Errors.JSONBodyStringifyError = WrappedError({","    type: 'tchannel-json-handler.stringify-error.body-failed',","    message: 'Could not stringify body (res2) argument.\\n' +","        'Expected JSON serializable res2 for endpoint {endpoint}.',","    isSerializationError: true,","    endpoint: null,","    body: null,","    direction: null","});","","Errors.JSONHeadParserError = WrappedError({","    type: 'tchannel-json-handler.parse-error.head-failed',","    message: 'Could not parse head (arg2) argument.\\n' +","        'Expected JSON encoded arg2 for endpoint {endpoint}.\\n' +","        'Got {headStr} instead of JSON.',","    isSerializationError: true,","    endpoint: null,","    direction: null,","    headStr: null","});","","Errors.JSONHeadStringifyError = WrappedError({","    type: 'tchannel-json-handler.stringify-error.head-failed',","    message: 'Could not stringify head (res1) argument.\\n' +","        'Expected JSON serializable res1 for endpoint {endpoint}.',","    isSerializationError: true,","    endpoint: null,","    head: null,","    direction: null","});","","Errors.LocalSocketCloseError = TypedError({","    type: 'tchannel.socket-local-closed',","    message: 'tchannel: Connection was manually closed.'","});","","Errors.MaxPendingError = TypedError({","    type: 'tchannel.max-pending',","    message: 'maximum pending requests exceeded (limit was {pending})',","    pending: null","});","","Errors.MaxPendingForServiceError = TypedError({","    type: 'tchannel.max-pending-for-service',","    message: 'maximum pending requests exceeded for service (limit was {pending} for service {serviceName})',","    pending: null,","    serviceName: null","});","","Errors.MissingInitHeaderError = TypedError({","    type: 'tchannel.missing-init-header',","    message: 'missing init frame header {field}',","    field: null","});","","Errors.NoPeerAvailable = TypedError({","    type: 'tchannel.no-peer-available',","    message: 'no peer available for request'","});","","Errors.NoServiceHandlerError = TypedError({","    type: 'tchannel.no-service-handler',","    message: 'unknown service {serviceName}',","    serviceName: null","});","","Errors.NullKeyError = TypedError({","    type: 'tchannel.null-key',","    message: 'null key',","    offset: null,","    endOffset: null","});","","Errors.OrphanCallRequestCont = TypedError({","    type: 'tchannel.call-request.orphan-cont',","    message: 'orphaned call request cont',","    frameId: null","});","","Errors.OrphanCallResponseCont = TypedError({","    type: 'tchannel.call-response.orphan-cont',","    message: 'orphaned call response cont',","    frameId: null","});","","Errors.OutAsHeaderRequired = TypedError({","    type: 'tchannel.handler.outgoing-req-as-header-required',","    message: 'Expected outgoing call request to have \"as\" header set.'","});","","Errors.OutCnHeaderRequired = TypedError({","    type: 'tchannel.handler.outgoing-req-cn-header-required',","    message: 'Expected outgoing call request to have \"cn\" header set.'","});","","Errors.ParentRequired = TypedError({","    type: 'tchannel.tracer.parent-required',","    message: 'parent not specified for outgoing call req.\\n' +","        'Expected either a parent or hasNoParent.\\n' +","        'For the call to {serviceName}.\\n',","    parentSpan: null,","    hasNoParent: null,","    serviceName: null","});","","Errors.PeerDrainTimedOutError = TypedError({","    type: 'tchannel.drain.peer.timed-out',","    message: 'peer drain timed out',","    direction: null,","    elapsed: null,","    timeout: null","});","","Errors.ReconstructedError = TypedError({","    type: 'tchannel.hydrated-error.default-type',","    message: 'TChannel json hydrated error;' +","        ' this message should be replaced with an upstream error message'","});","","Errors.RequestAlreadyDone = TypedError({","    type: 'tchannel.request-already-done',","    message: 'cannot {attempted}, request already done',","    attempted: null","});","","Errors.RequestDrained = TypedError({","    type: 'tchannel.request.drained',","    message: 'refusing to send drained request: {reason}',","    reason: null","});","","Errors.RequestFrameState = TypedError({","    type: 'tchannel.request-frame-state',","    message: 'cannot send {attempted} in {state} request state',","    attempted: null,","    state: null","});","","Errors.RequestRetryLimitExceeded = TypedError({","    type: 'tchannel.request.retry-limit-exceeded',","    message: 'exceeded retry limit',","    limit: null","});","","Errors.RequestTimeoutError = TypedError({","    type: 'tchannel.request.timeout',","    message: 'request timed out after {elapsed}ms ' +","        '(limit was {timeout}ms)',","    id: null,","    start: null,","    elapsed: null,","    timeout: null,","    logical: false","});","","Errors.ResponseAlreadyDone = TypedError({","    type: 'tchannel.response-already-done',","    message: 'cannot send {attempted}, response already done ' +","        'in state: {currentState}',","    attempted: null,","    currentState: null","});","","Errors.ResponseAlreadyStarted = TypedError({","    type: 'tchannel.response-already-started',","    message: 'response already started (state {state})',","    state: null","});","","Errors.ResponseFrameState = TypedError({","    type: 'tchannel.response-frame-state',","    message: 'cannot send {attempted} in {state} response state',","    attempted: null,","    state: null","});","","Errors.SendCallReqBeforeIdentifiedError = TypedError({","    type: 'tchannel.init.send-call-request-before-indentified',","    message: 'cannot send call request before the connection is identified'","});","","Errors.SendCallReqContBeforeIdentifiedError = TypedError({","    type: 'tchannel.init.send-call-request-cont-before-indentified',","    message: 'cannot send call request cont before the connection is identified'","});","","Errors.SendCallResBeforeIdentifiedError = TypedError({","    type: 'tchannel.init.send-call-response-before-indentified',","    message: 'cannot send call response before the connection is identified'","});","","Errors.SendCallResContBeforeIdentifiedError = TypedError({","    type: 'tchannel.init.send-call-response-cont-before-indentified',","    message: 'cannot send call response cont before the connection is identified'","});","","Errors.SocketClosedError = TypedError({","    type: 'tchannel.socket-closed',","    message: 'socket closed, {reason}',","    reason: null","});","","Errors.SocketError = WrappedError({","    type: 'tchannel.socket',","    message: 'tchannel socket error ({code} from {syscall}): {origMessage}',","    hostPort: null,","    direction: null,","    remoteAddr: null","});","","Errors.SocketWriteFullError = TypedError({","    type: 'tchannel.socket.write-full',","    message: 'Could not write to socket; socket has {pendingWrites} writes',","    pendingWrites: null","});","","Errors.TChannelConnectionCloseError = TypedError({","    type: 'tchannel.connection.close',","    message: 'connection closed'","});","","Errors.TChannelConnectionResetError = WrappedError({","    type: 'tchannel.connection.reset',","    message: 'tchannel: {causeMessage}'","});","","Errors.TChannelDestroyedError = TypedError({","    type: 'tchannel.destroyed',","    message: 'the channel is destroyed'","});","","Errors.TChannelListenError = WrappedError({","    type: 'tchannel.server.listen-failed',","    message: 'tchannel: {origMessage}, {host}:{requestedPort}',","    requestedPort: null,","    host: null","});","","Errors.TChannelLocalResetError = WrappedError({","    type: 'tchannel.local.reset',","    message: 'tchannel: {causeMessage}'","});","","Errors.TChannelReadProtocolError = WrappedError({","    type: 'tchannel.protocol.read-failed',","    message: 'tchannel read failure: {origMessage}',","    remoteName: null,","    localName: null","});","","Errors.TChannelUnhandledFrameTypeError = TypedError({","    type: 'tchannel.unhandled-frame-type',","    message: 'unhandled frame type {typeCode}',","    typeCode: null","});","","Errors.TChannelWriteProtocolError = WrappedError({","    type: 'tchannel.protocol.write-failed',","    message: 'tchannel write failure: {origMessage}',","    remoteName: null,","    localName: null","});","","Errors.ThriftBodyParserError = WrappedError({","    type: 'tchannel-thrift-handler.parse-error.body-failed',","    message: 'Could not parse body (arg3) argument.\\n' +","        'Expected Thrift encoded arg3 for endpoint {endpoint}.\\n' +","        'Got {bodyBuf} instead of Thrift.\\n' +","        'Parsing error was: {causeMessage}.\\n',","    isSerializationError: true,","    endpoint: null,","    direction: null,","    ok: null,","    bodyBuf: null","});","","Errors.ThriftBodyStringifyError = WrappedError({","    type: 'tchannel-thrift-handler.stringify-error.body-failed',","    message: 'Could not stringify body (res2) argument.\\n' +","        'Expected Thrift serializable res2 for endpoint {endpoint}.',","    isSerializationError: true,","    endpoint: null,","    ok: null,","    body: null,","    direction: null","});","","Errors.ThriftHeadParserError = WrappedError({","    type: 'tchannel-thrift-handler.parse-error.head-failed',","    message: 'Could not parse head (arg2) argument.\\n' +","        'Expected Thrift encoded arg2 for endpoint {endpoint}.\\n' +","        'Got {headBuf} instead of Thrift.\\n' +","        'Parsing error was: {causeMessage}.\\n',","    isSerializationError: true,","    endpoint: null,","    ok: null,","    direction: null,","    headBuf: null","});","","Errors.ThriftHeadStringifyError = WrappedError({","    type: 'tchannel-thrift-handler.stringify-error.head-failed',","    message: 'Could not stringify head (res1) argument.\\n' +","        'Expected Thrift serializable res1 for endpoint {endpoint}.',","    isSerializationError: true,","    endpoint: null,","    ok: null,","    head: null,","    direction: null","});","","Errors.TooManyHeaders = TypedError({","    type: 'tchannel.protocol.too-many-headers',","    message: 'too many transport headers, got {count}, expected at most {maxHeaderCount}',","    count: null,","    maxHeaderCount: null,","    offset: null,","    endOffset: null","});","","Errors.TopLevelRegisterError = TypedError({","    type: 'tchannel.top-level-register',","    message: 'Cannot register endpoints points on top-level channel.\\n' +","        'Provide serviceName to constructor, or create a sub-channel.'","});","","Errors.TopLevelRequestError = TypedError({","    type: 'tchannel.top-level-request',","    message: 'Cannot make request() on top level tchannel.\\n' +","        'Must use a sub channel directly.'","});","","Errors.TransportHeaderTooLong = TypedError({","    type: 'tchannel.transport-header-too-long',","    message: 'transport header: {headerName} exceeds {maxLength} bytes',","    maxLength: null,","    headerName: null,","    offset: null,","    endOffset: null","});","","Errors.UnexpectedCallFrameAfterDone = TypedError({","    type: 'tchannel.call.frame-unexpected.after-done',","    message: 'got call frame (type {frameType}) in done state',","    frameId: null,","    frameType: null","});","","Errors.UnexpectedCallFrameAfterError = TypedError({","    type: 'tchannel.call.frame-unexpected.after-error',","    message: 'got call frame (type {frameType}) in error state',","    frameId: null,","    frameType: null","});","","Errors.UnimplementedMethod = TypedError({","    message: 'Unimplemented {className}#{methodName}',","    type: 'tchannel.unimplemented-method',","    className: null,","    methodName: null","});","","Errors.UnknownConnectionReset = TypedError({","    type: 'tchannel.connection.unknown-reset',","    message: 'unknown connection reset'","});","","// utilities","/*eslint-disable complexity*/","Errors.classify = function classify(err) {","    if (err.isErrorFrame) {","        return err.codeName;","    }","","    if (err.type && err.type.indexOf('bufrw.') > -1) {","        return classifyBurwError(err);","    }","","    switch (err.type) {","        case 'tchannel.request.retry-limit-exceeded':","            return 'Cancelled';","","        case 'tchannel.max-pending':","        case 'tchannel.max-pending-for-service':","        case 'tchannel.no-peer-available':","        case 'tchannel.no-service-handler':","        case 'tchannel.request.drained':","            return 'Declined';","","        case 'tchannel.connection-stale.timeout':","        case 'tchannel.connection.timeout':","        case 'tchannel.request.timeout':","            return 'Timeout';","","        case 'tchannel-handler.json.invalid-body':","        case 'tchannel-json-handler.parse-error.body-failed':","        case 'tchannel-json-handler.parse-error.head-failed':","        case 'tchannel-thrift-handler.parse-error.body-failed':","        case 'tchannel-thrift-handler.parse-error.head-failed':","        case 'tchannel.arg-chunk.gap':","        case 'tchannel.arg-chunk.out-of-order':","        case 'tchannel.arg1-fragmented':","        case 'tchannel.arg1-over-length-limit':","        case 'tchannel.argstream.exceeded-frame-parts':","        case 'tchannel.bad-call-request':","        case 'tchannel.call.checksum-type-changed':","        case 'tchannel.checksum':","        case 'tchannel.duplicate-header-key':","        case 'tchannel.handler.incoming-req-as-header-required':","        case 'tchannel.handler.incoming-req-cn-header-required':","        case 'tchannel.http-handler.to-buffer-arg2.req-failed':","        case 'tchannel.http-handler.to-buffer-arg2.res-failed':","        case 'tchannel.null-key':","        case 'tchannel.request-already-done':","        case 'tchannel.request-frame-state':","            return 'BadRequest';","","        case 'tchannel.argstream.finished':","        case 'tchannel.argstream.unimplemented':","","        // TODO: really we'd rather classify as BadRequest. see note in","        // TChannelV2Handler#handleCallRequestCont wrt frame id association","        // support","        case 'tchannel.call-request.orphan-cont':","","        // TODO: can BadRequest be used for a response error? Maybe instead we","        // could use UnexpectedError rather than terminate the connection?","        case 'tchannel.call-response.orphan-cont':","","        // TODO: classify as BadRequest/UnexpectedError for req/res?","        case 'tchannel.call.frame-unexpected.after-done':","        case 'tchannel.call.frame-unexpected.after-error':","","        case 'tchannel.init.call-request-before-init-request':","        case 'tchannel.init.call-request-cont-before-init-request':","        case 'tchannel.init.call-response-before-init-response':","        case 'tchannel.init.call-response-cont-before-init-response':","        case 'tchannel.init.duplicate-init-request':","        case 'tchannel.init.duplicate-init-response':","        case 'tchannel.init.ephemeral-init-response':","        case 'tchannel.init.send-call-request-before-indentified':","        case 'tchannel.init.send-call-request-cont-before-indentified':","        case 'tchannel.init.send-call-response-before-indentified':","        case 'tchannel.init.send-call-response-cont-before-indentified':","        case 'tchannel.invalid-error-code':","        case 'tchannel.invalid-frame-type':","        case 'tchannel.invalid-init-host-port':","        case 'tchannel.missing-init-header':","        case 'tchannel.protocol.invalid-ttl':","        case 'tchannel.protocol.read-failed':","        case 'tchannel.protocol.too-many-headers':","        case 'tchannel.protocol.write-failed':","        case 'tchannel.transport-header-too-long':","        case 'tchannel.unhandled-frame-type':","            return 'ProtocolError';","","        case 'tchannel.connection.close':","        case 'tchannel.connection.reset':","        case 'tchannel.destroyed':","        case 'tchannel.local.reset':","        case 'tchannel.socket':","        case 'tchannel.socket-closed':","        case 'tchannel.socket-local-closed':","        case 'tchannel.socket.write-full':","            return 'NetworkError';","","        case 'tchannel-json-handler.stringify-error.body-failed':","        case 'tchannel-json-handler.stringify-error.head-failed':","        case 'tchannel-thrift-handler.stringify-error.body-failed':","        case 'tchannel-thrift-handler.stringify-error.head-failed':","        case 'tchannel.argstream.unknown-frame-handling-state':","        case 'tchannel.connection.unknown-reset':","        case 'tchannel.drain.peer.timed-out':","        case 'tchannel.handler.outgoing-req-as-header-required':","        case 'tchannel.handler.outgoing-req-cn-header-required':","        case 'tchannel.http-handler.from-buffer-arg2.req-failed':","        case 'tchannel.http-handler.from-buffer-arg2.res-failed':","        case 'tchannel.hydrated-error.default-type':","        case 'tchannel.invalid-argument':","        case 'tchannel.invalid-handler':","        case 'tchannel.invalid-handler.for-registration':","        case 'tchannel.invalid-header-type':","        case 'tchannel.lazy-frame.write-corrupt':","        case 'tchannel.response-already-done':","        case 'tchannel.response-already-started':","        case 'tchannel.response-frame-state':","        case 'tchannel.server.listen-failed':","        case 'tchannel.top-level-register':","        case 'tchannel.top-level-request':","        case 'tchannel.tracer.parent-required':","        case 'tchannel.unimplemented-method':","            return 'UnexpectedError';","","        default:","            return null;","    }","};","/*eslint-enable complexity*/","","function classifyBurwError(err) {","    var bufrwClass = bufrwErrors.classify(err);","    if (bufrwClass !== null) {","        switch (bufrwClass) {","            case 'Read':","                return 'NetworkError';","            case 'Write':","                return 'ProtocolError';","            case 'Internal':","            default:","                return 'UnexpectedError';","        }","    }","}","","// To determine whether a circuit should break for each response code.","// TODO consider whether to keep a circuit healthy if a downstream circuit is","// unhealthy.","Errors.isUnhealthy = function isUnhealthy(codeName) {","    switch (codeName) {","        // not an indicator of bad health","        case 'BadRequest':","        case 'Cancelled':","            return false;","","        case 'Unhealthy':","        case 'Timeout':","        case 'Busy':","        case 'Declined':","        case 'UnexpectedError':","        case 'NetworkError':","        case 'ProtocolError':","            return true;","","        default:","            return null;","    }","};","","Errors.shouldRetry = function shouldRetry(codeName, retryFlags) {","    switch (codeName) {","        case 'BadRequest':","        case 'Cancelled':","        case 'Unhealthy':","            return false;","","        case 'Busy':","        case 'Declined':","            return true;","","        case 'Timeout':","            return !!retryFlags.onTimeout;","","        case 'NetworkError':","        case 'ProtocolError':","        case 'UnexpectedError':","            return !!retryFlags.onConnectionError;","","        default:","            return null;","    }","};","","function HTTPInfo(statusCode, statusMessage) {","    this.statusCode = statusCode;","    this.statusMessage = statusMessage;","}","","Errors.toHTTPCode = function toHTTPCode(codeName) {","    switch (codeName) {","        case 'Cancelled':","            return new HTTPInfo(500, 'TChannel Cancelled');","","        case 'Unhealthy':","        case 'Declined':","            return new HTTPInfo(503, 'Service Unavailable');","","        case 'Timeout':","            return new HTTPInfo(504, 'Gateway Timeout');","","        case 'BadRequest':","            return new HTTPInfo(400, 'Bad Request');","","        case 'Busy':","            return new HTTPInfo(429, 'Too Many Requests');","","        case 'ProtocolError':","            return new HTTPInfo(500, 'TChannel Protocol Error');","","        case 'NetworkError':","            return new HTTPInfo(500, 'TChannel Network Error');","","        case 'UnexpectedError':","            return new HTTPInfo(500, 'TChannel Unexpected Error');","","        default:","            return new HTTPInfo(500, 'Internal Server Error');","    }","};","","Errors.isFatal = function isFatal(err, codeName) {","    if (!codeName) {","        codeName = Errors.classify(err);","    }","    switch (codeName) {","        case 'Busy':","        case 'Cancelled':","        case 'Declined':","        case 'NetworkError':","        case 'Timeout':","        case 'Unhealthy':","            return false;","","        case 'BadRequest':","        case 'ProtocolError':","        case 'UnexpectedError':","            return true;","","        default:","            return true;","    }","};","","/*eslint complexity: [2, 15]*/","Errors.logLevel = function errorLogLevel(err, codeName) {","    switch (codeName) {","        case 'ProtocolError':","        case 'UnexpectedError':","            if (err.isErrorFrame || Errors.isParseError(err)) {","                return 'warn';","            }","            return 'error';","","        case 'Busy':","        case 'Cancelled':","        case 'Declined':","        case 'NetworkError':","        case 'Unhealthy':","            return 'warn';","","        case 'BadRequest':","        case 'Timeout':","            return 'info';","","        default:","            return 'error';","    }","};","","/*  Whether we should increase peer.pending on an error frame.","","    On Busy & Declined we increase the pending count for a peer","    to allow peer selection to favor less loaded peers.","*/","Errors.isPendingError = function isPendingError(codeName) {","    switch (codeName) {","        case 'Busy':","        case 'Declined':","        case 'Unhealthy':","            return true;","","        case 'BadRequest':","        case 'Cancelled':","        case 'NetworkError':","        case 'ProtocolError':","        case 'Timeout':","        case 'UnexpectedError':","            return false;","","        default:","            return false;","    }","};","","Errors.isParseError = function isParseError(error) {","    return error.isParseError || false;","};",""],"l":{"23":1,"24":1,"25":1,"27":1,"31":1,"36":1,"43":1,"50":1,"57":1,"62":1,"67":1,"72":1,"77":1,"83":1,"88":1,"93":1,"98":1,"103":1,"111":1,"118":1,"127":1,"137":1,"143":1,"153":1,"158":1,"163":1,"171":1,"178":1,"185":1,"192":1,"199":1,"205":1,"210":1,"217":1,"224":1,"230":1,"235":1,"244":1,"252":1,"258":1,"266":1,"273":1,"284":1,"294":1,"305":1,"315":1,"320":1,"326":1,"333":1,"339":1,"344":1,"350":1,"357":1,"363":1,"369":1,"374":1,"379":1,"389":1,"397":1,"403":1,"409":1,"415":1,"422":1,"428":1,"439":1,"447":1,"453":1,"460":1,"465":1,"470":1,"475":1,"480":1,"486":1,"494":1,"500":1,"505":1,"510":1,"515":1,"522":1,"527":1,"534":1,"540":1,"547":1,"560":1,"571":1,"584":1,"595":1,"604":1,"610":1,"616":1,"625":1,"632":1,"639":1,"646":1,"653":1,"654":0,"655":0,"658":0,"659":0,"662":0,"664":0,"671":0,"676":0,"699":0,"738":0,"748":0,"775":0,"778":0,"783":1,"784":0,"785":0,"786":0,"788":0,"790":0,"793":0,"801":1,"802":0,"806":0,"815":0,"818":0,"822":1,"823":0,"827":0,"831":0,"834":0,"839":0,"842":0,"846":1,"847":0,"848":0,"851":1,"852":0,"854":0,"858":0,"861":0,"864":0,"867":0,"870":0,"873":0,"876":0,"879":0,"883":1,"884":0,"885":0,"887":0,"894":0,"899":0,"902":0,"907":1,"908":0,"911":0,"912":0,"914":0,"921":0,"925":0,"928":0,"937":1,"938":0,"942":0,"950":0,"953":0,"957":1,"958":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/request-handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/request-handler.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"coerceRequestHandler","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":55}}},"2":{"name":"RequestCallbackHandler","line":46,"loc":{"start":{"line":46,"column":0},"end":{"line":46,"column":49}}},"3":{"name":"handleRequest","line":52,"loc":{"start":{"line":52,"column":49},"end":{"line":52,"column":92}}},"4":{"name":"onArg23","line":56,"loc":{"start":{"line":56,"column":22},"end":{"line":56,"column":56}}},"5":{"name":"StreamedRequestCallbackHandler","line":86,"loc":{"start":{"line":86,"column":0},"end":{"line":86,"column":57}}},"6":{"name":"handleRequest","line":92,"loc":{"start":{"line":92,"column":57},"end":{"line":92,"column":100}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":28,"column":0},"end":{"line":28,"column":38}},"3":{"start":{"line":30,"column":0},"end":{"line":41,"column":1}},"4":{"start":{"line":31,"column":4},"end":{"line":40,"column":5}},"5":{"start":{"line":32,"column":8},"end":{"line":36,"column":9}},"6":{"start":{"line":33,"column":12},"end":{"line":33,"column":70}},"7":{"start":{"line":35,"column":12},"end":{"line":35,"column":62}},"8":{"start":{"line":38,"column":8},"end":{"line":38,"column":102}},"9":{"start":{"line":39,"column":8},"end":{"line":39,"column":23}},"10":{"start":{"line":46,"column":0},"end":{"line":50,"column":1}},"11":{"start":{"line":47,"column":4},"end":{"line":47,"column":20}},"12":{"start":{"line":48,"column":4},"end":{"line":48,"column":29}},"13":{"start":{"line":49,"column":4},"end":{"line":49,"column":31}},"14":{"start":{"line":52,"column":0},"end":{"line":80,"column":2}},"15":{"start":{"line":53,"column":4},"end":{"line":53,"column":20}},"16":{"start":{"line":54,"column":4},"end":{"line":54,"column":12}},"17":{"start":{"line":55,"column":4},"end":{"line":79,"column":5}},"18":{"start":{"line":56,"column":8},"end":{"line":75,"column":11}},"19":{"start":{"line":57,"column":12},"end":{"line":67,"column":13}},"20":{"start":{"line":58,"column":16},"end":{"line":63,"column":18}},"21":{"start":{"line":65,"column":16},"end":{"line":65,"column":35}},"22":{"start":{"line":66,"column":16},"end":{"line":66,"column":23}},"23":{"start":{"line":69,"column":12},"end":{"line":71,"column":13}},"24":{"start":{"line":70,"column":16},"end":{"line":70,"column":23}},"25":{"start":{"line":73,"column":12},"end":{"line":73,"column":51}},"26":{"start":{"line":74,"column":12},"end":{"line":74,"column":65}},"27":{"start":{"line":77,"column":8},"end":{"line":77,"column":47}},"28":{"start":{"line":78,"column":8},"end":{"line":78,"column":69}},"29":{"start":{"line":86,"column":0},"end":{"line":90,"column":1}},"30":{"start":{"line":87,"column":4},"end":{"line":87,"column":20}},"31":{"start":{"line":88,"column":4},"end":{"line":88,"column":29}},"32":{"start":{"line":89,"column":4},"end":{"line":89,"column":31}},"33":{"start":{"line":92,"column":0},"end":{"line":95,"column":2}},"34":{"start":{"line":93,"column":4},"end":{"line":93,"column":20}},"35":{"start":{"line":94,"column":4},"end":{"line":94,"column":62}}},"branchMap":{"1":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"3":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":17},"end":{"line":49,"column":22}},{"start":{"line":49,"column":26},"end":{"line":49,"column":30}}]},"4":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":55,"column":4}},{"start":{"line":55,"column":4},"end":{"line":55,"column":4}}]},"5":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":57,"column":12}},{"start":{"line":57,"column":12},"end":{"line":57,"column":12}}]},"6":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":12}},{"start":{"line":69,"column":12},"end":{"line":69,"column":12}}]},"7":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":16},"end":{"line":69,"column":23}},{"start":{"line":69,"column":27},"end":{"line":69,"column":56}}]},"8":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":17},"end":{"line":89,"column":22}},{"start":{"line":89,"column":26},"end":{"line":89,"column":30}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","","// This function allows EndpointHandler to accept either a callback or a","// RequestHandler object that implements handleRequest.","","module.exports = coerceRequestHandler;","","function coerceRequestHandler(handler, thisp, options) {","    if (typeof handler === 'function') {","        if (options.streamed) {","            return new StreamedRequestCallbackHandler(handler, thisp);","        } else {","            return new RequestCallbackHandler(handler, thisp);","        }","    } else {","        assert(typeof handler.handleRequest === 'function', 'handler must have handleRequest method');","        return handler;","    }","}","","// The non-streamed request handler is only for the cases where neither the","// request or response can have streams. In this case, a req.stream indicates","// that the request is fragmented across multiple frames.","function RequestCallbackHandler(callback, thisp) {","    var self = this;","    self.callback = callback;","    self.thisp = thisp || self;","}","","RequestCallbackHandler.prototype.handleRequest = function handleRequest(req, buildResponse) {","    var self = this;","    var res;","    if (req.streamed) {","        req.withArg23(function onArg23(err, arg2, arg3) {","            if (err) {","                req.channel.logger.warn(","                    'Could not parse arg2/arg3 for streaming inreq',","                    req.extendLogInfo({","                        error: err","                    })","                );","","                req.emitError(err);","                return;","            }","","            if (req.res && req.res.responseAlreadyDone()) {","                return;","            }","","            res = buildResponse({streamed: false});","            self.callback.call(self.thisp, req, res, arg2, arg3);","        });","    } else {","        res = buildResponse({streamed: false});","        self.callback.call(self.thisp, req, res, req.arg2, req.arg3);","    }","};","","// The streamed request handler is for cases where the handler function elects","// to deal with whether req.streamed and whether res.streamed.","// req.streamed may indicated either a streaming request or a fragmented","// request and the handler must distinguish the cases.","function StreamedRequestCallbackHandler(callback, thisp) {","    var self = this;","    self.callback = callback;","    self.thisp = thisp || self;","}","","StreamedRequestCallbackHandler.prototype.handleRequest = function handleRequest(req, buildResponse) {","    var self = this;","    return self.callback.call(self.thisp, req, buildResponse);","};",""],"l":{"23":1,"28":1,"30":1,"31":0,"32":0,"33":0,"35":0,"38":0,"39":0,"46":1,"47":0,"48":0,"49":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"65":0,"66":0,"69":0,"70":0,"73":0,"74":0,"77":0,"78":0,"86":1,"87":0,"88":0,"89":0,"92":1,"93":0,"94":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":1,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":1,"123":0,"124":0,"125":1,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":1,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":1,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":1,"190":0,"191":1,"192":0,"193":1,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":1,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":1,"210":0,"211":0,"212":0,"213":0,"214":1,"215":0,"216":1,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":1,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":1,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":1,"256":0,"257":0,"258":1,"259":0,"260":0,"261":0,"262":1,"263":0,"264":0,"265":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"fnMap":{"1":{"name":"TChannelRequest","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":34}}},"2":{"name":"RequestOperation","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":69}}},"3":{"name":"onTimeout","line":92,"loc":{"start":{"line":92,"column":39},"end":{"line":92,"column":63}}},"4":{"name":"emitError","line":102,"loc":{"start":{"line":102,"column":38},"end":{"line":102,"column":62}}},"5":{"name":"emitErrorStat","line":117,"loc":{"start":{"line":117,"column":0},"end":{"line":117,"column":28}}},"6":{"name":"emitLatency","line":149,"loc":{"start":{"line":149,"column":0},"end":{"line":149,"column":23}}},"7":{"name":"emitResponse","line":166,"loc":{"start":{"line":166,"column":41},"end":{"line":166,"column":68}}},"8":{"name":"emitResponseStat","line":185,"loc":{"start":{"line":185,"column":0},"end":{"line":185,"column":31}}},"9":{"name":"hookupCallback","line":214,"loc":{"start":{"line":214,"column":49},"end":{"line":214,"column":83}}},"10":{"name":"hookupCallback","line":218,"loc":{"start":{"line":218,"column":43},"end":{"line":218,"column":77}}},"11":{"name":"onError","line":228,"loc":{"start":{"line":228,"column":4},"end":{"line":228,"column":26}}},"12":{"name":"onResponse","line":237,"loc":{"start":{"line":237,"column":4},"end":{"line":237,"column":29}}},"13":{"name":"gotArg23","line":242,"loc":{"start":{"line":242,"column":22},"end":{"line":242,"column":57}}},"14":{"name":"choosePeer","line":250,"loc":{"start":{"line":250,"column":39},"end":{"line":250,"column":61}}},"15":{"name":"send","line":255,"loc":{"start":{"line":255,"column":33},"end":{"line":255,"column":75}}},"16":{"name":"emitOutboundCallsSent","line":275,"loc":{"start":{"line":275,"column":0},"end":{"line":275,"column":33}}},"17":{"name":"resend","line":290,"loc":{"start":{"line":290,"column":35},"end":{"line":290,"column":53}}},"18":{"name":"onIdentified","line":340,"loc":{"start":{"line":340,"column":4},"end":{"line":340,"column":31}}},"19":{"name":"onIdentified","line":362,"loc":{"start":{"line":362,"column":41},"end":{"line":362,"column":69}}},"20":{"name":"onError","line":409,"loc":{"start":{"line":409,"column":4},"end":{"line":409,"column":26}}},"21":{"name":"onResponse","line":413,"loc":{"start":{"line":413,"column":4},"end":{"line":413,"column":29}}},"22":{"name":"onSubreqError","line":418,"loc":{"start":{"line":418,"column":42},"end":{"line":418,"column":70}}},"23":{"name":"onSubreqResponse","line":430,"loc":{"start":{"line":430,"column":45},"end":{"line":430,"column":76}}},"24":{"name":"deferResend","line":444,"loc":{"start":{"line":444,"column":40},"end":{"line":444,"column":63}}},"25":{"name":"doResend","line":453,"loc":{"start":{"line":453,"column":4},"end":{"line":453,"column":24}}},"26":{"name":"checkPending","line":458,"loc":{"start":{"line":458,"column":41},"end":{"line":458,"column":65}}},"27":{"name":"checkTimeout","line":468,"loc":{"start":{"line":468,"column":41},"end":{"line":468,"column":73}}},"28":{"name":"shouldRetryError","line":494,"loc":{"start":{"line":494,"column":45},"end":{"line":494,"column":76}}},"29":{"name":"maybeAppRetry","line":540,"loc":{"start":{"line":540,"column":42},"end":{"line":540,"column":70}}},"30":{"name":"retry","line":544,"loc":{"start":{"line":544,"column":4},"end":{"line":544,"column":21}}},"31":{"name":"done","line":552,"loc":{"start":{"line":552,"column":4},"end":{"line":552,"column":23}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":50}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":40}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":37}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":45}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":33}},"9":{"start":{"line":34,"column":0},"end":{"line":76,"column":1}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":78}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":28}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":48}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":54}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":35}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":27}},"16":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"17":{"start":{"line":47,"column":4},"end":{"line":47,"column":22}},"18":{"start":{"line":48,"column":4},"end":{"line":48,"column":74}},"19":{"start":{"line":49,"column":4},"end":{"line":55,"column":5}},"20":{"start":{"line":50,"column":8},"end":{"line":54,"column":10}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":76}},"22":{"start":{"line":57,"column":4},"end":{"line":57,"column":78}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":19}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":17}},"25":{"start":{"line":60,"column":4},"end":{"line":60,"column":21}},"26":{"start":{"line":61,"column":4},"end":{"line":61,"column":26}},"27":{"start":{"line":62,"column":4},"end":{"line":62,"column":59}},"28":{"start":{"line":64,"column":4},"end":{"line":64,"column":49}},"29":{"start":{"line":65,"column":4},"end":{"line":65,"column":66}},"30":{"start":{"line":67,"column":4},"end":{"line":67,"column":40}},"31":{"start":{"line":69,"column":4},"end":{"line":69,"column":25}},"32":{"start":{"line":70,"column":4},"end":{"line":70,"column":21}},"33":{"start":{"line":71,"column":4},"end":{"line":71,"column":21}},"34":{"start":{"line":72,"column":4},"end":{"line":72,"column":21}},"35":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}},"36":{"start":{"line":75,"column":4},"end":{"line":75,"column":20}},"37":{"start":{"line":78,"column":0},"end":{"line":78,"column":40}},"38":{"start":{"line":80,"column":0},"end":{"line":80,"column":38}},"39":{"start":{"line":81,"column":0},"end":{"line":81,"column":37}},"40":{"start":{"line":83,"column":0},"end":{"line":90,"column":1}},"41":{"start":{"line":84,"column":4},"end":{"line":84,"column":19}},"42":{"start":{"line":85,"column":4},"end":{"line":85,"column":27}},"43":{"start":{"line":86,"column":4},"end":{"line":86,"column":21}},"44":{"start":{"line":87,"column":4},"end":{"line":89,"column":35}},"45":{"start":{"line":92,"column":0},"end":{"line":98,"column":2}},"46":{"start":{"line":93,"column":4},"end":{"line":95,"column":5}},"47":{"start":{"line":94,"column":8},"end":{"line":94,"column":71}},"48":{"start":{"line":97,"column":4},"end":{"line":97,"column":28}},"49":{"start":{"line":100,"column":0},"end":{"line":100,"column":52}},"50":{"start":{"line":102,"column":0},"end":{"line":114,"column":2}},"51":{"start":{"line":103,"column":4},"end":{"line":103,"column":20}},"52":{"start":{"line":104,"column":4},"end":{"line":106,"column":5}},"53":{"start":{"line":105,"column":8},"end":{"line":105,"column":45}},"54":{"start":{"line":107,"column":4},"end":{"line":107,"column":19}},"55":{"start":{"line":109,"column":4},"end":{"line":109,"column":28}},"56":{"start":{"line":110,"column":4},"end":{"line":110,"column":23}},"57":{"start":{"line":112,"column":4},"end":{"line":112,"column":47}},"58":{"start":{"line":113,"column":4},"end":{"line":113,"column":36}},"59":{"start":{"line":116,"column":0},"end":{"line":146,"column":2}},"60":{"start":{"line":118,"column":4},"end":{"line":118,"column":20}},"61":{"start":{"line":120,"column":4},"end":{"line":145,"column":5}},"62":{"start":{"line":121,"column":8},"end":{"line":132,"column":10}},"63":{"start":{"line":134,"column":8},"end":{"line":144,"column":10}},"64":{"start":{"line":148,"column":0},"end":{"line":164,"column":2}},"65":{"start":{"line":150,"column":4},"end":{"line":150,"column":20}},"66":{"start":{"line":152,"column":4},"end":{"line":152,"column":40}},"67":{"start":{"line":154,"column":4},"end":{"line":163,"column":6}},"68":{"start":{"line":166,"column":0},"end":{"line":182,"column":2}},"69":{"start":{"line":167,"column":4},"end":{"line":167,"column":20}},"70":{"start":{"line":168,"column":4},"end":{"line":170,"column":5}},"71":{"start":{"line":169,"column":8},"end":{"line":169,"column":45}},"72":{"start":{"line":171,"column":4},"end":{"line":171,"column":19}},"73":{"start":{"line":173,"column":4},"end":{"line":173,"column":21}},"74":{"start":{"line":174,"column":4},"end":{"line":174,"column":21}},"75":{"start":{"line":175,"column":4},"end":{"line":175,"column":21}},"76":{"start":{"line":177,"column":4},"end":{"line":177,"column":31}},"77":{"start":{"line":178,"column":4},"end":{"line":178,"column":23}},"78":{"start":{"line":180,"column":4},"end":{"line":180,"column":50}},"79":{"start":{"line":181,"column":4},"end":{"line":181,"column":39}},"80":{"start":{"line":184,"column":0},"end":{"line":212,"column":2}},"81":{"start":{"line":186,"column":4},"end":{"line":186,"column":20}},"82":{"start":{"line":188,"column":4},"end":{"line":211,"column":5}},"83":{"start":{"line":189,"column":8},"end":{"line":198,"column":10}},"84":{"start":{"line":200,"column":8},"end":{"line":210,"column":10}},"85":{"start":{"line":214,"column":0},"end":{"line":216,"column":2}},"86":{"start":{"line":215,"column":4},"end":{"line":215,"column":39}},"87":{"start":{"line":218,"column":0},"end":{"line":248,"column":2}},"88":{"start":{"line":219,"column":4},"end":{"line":219,"column":20}},"89":{"start":{"line":220,"column":4},"end":{"line":222,"column":5}},"90":{"start":{"line":221,"column":8},"end":{"line":221,"column":51}},"91":{"start":{"line":223,"column":4},"end":{"line":223,"column":23}},"92":{"start":{"line":225,"column":4},"end":{"line":225,"column":32}},"93":{"start":{"line":226,"column":4},"end":{"line":226,"column":38}},"94":{"start":{"line":228,"column":4},"end":{"line":235,"column":5}},"95":{"start":{"line":229,"column":8},"end":{"line":231,"column":9}},"96":{"start":{"line":230,"column":12},"end":{"line":230,"column":19}},"97":{"start":{"line":232,"column":8},"end":{"line":232,"column":22}},"98":{"start":{"line":234,"column":8},"end":{"line":234,"column":40}},"99":{"start":{"line":237,"column":4},"end":{"line":245,"column":5}},"100":{"start":{"line":238,"column":8},"end":{"line":240,"column":9}},"101":{"start":{"line":239,"column":12},"end":{"line":239,"column":19}},"102":{"start":{"line":241,"column":8},"end":{"line":241,"column":22}},"103":{"start":{"line":242,"column":8},"end":{"line":244,"column":11}},"104":{"start":{"line":243,"column":12},"end":{"line":243,"column":43}},"105":{"start":{"line":247,"column":4},"end":{"line":247,"column":16}},"106":{"start":{"line":250,"column":0},"end":{"line":253,"column":2}},"107":{"start":{"line":251,"column":4},"end":{"line":251,"column":20}},"108":{"start":{"line":252,"column":4},"end":{"line":252,"column":47}},"109":{"start":{"line":255,"column":0},"end":{"line":272,"column":2}},"110":{"start":{"line":256,"column":4},"end":{"line":256,"column":20}},"111":{"start":{"line":258,"column":4},"end":{"line":258,"column":33}},"112":{"start":{"line":259,"column":4},"end":{"line":259,"column":21}},"113":{"start":{"line":260,"column":4},"end":{"line":260,"column":21}},"114":{"start":{"line":261,"column":4},"end":{"line":261,"column":21}},"115":{"start":{"line":262,"column":4},"end":{"line":264,"column":5}},"116":{"start":{"line":263,"column":8},"end":{"line":263,"column":38}},"117":{"start":{"line":265,"column":4},"end":{"line":265,"column":43}},"118":{"start":{"line":266,"column":4},"end":{"line":266,"column":35}},"119":{"start":{"line":268,"column":4},"end":{"line":268,"column":33}},"120":{"start":{"line":270,"column":4},"end":{"line":270,"column":42}},"121":{"start":{"line":271,"column":4},"end":{"line":271,"column":18}},"122":{"start":{"line":274,"column":0},"end":{"line":288,"column":2}},"123":{"start":{"line":276,"column":4},"end":{"line":276,"column":20}},"124":{"start":{"line":278,"column":4},"end":{"line":287,"column":6}},"125":{"start":{"line":290,"column":0},"end":{"line":360,"column":2}},"126":{"start":{"line":291,"column":4},"end":{"line":291,"column":20}},"127":{"start":{"line":293,"column":4},"end":{"line":296,"column":5}},"128":{"start":{"line":294,"column":8},"end":{"line":294,"column":46}},"129":{"start":{"line":295,"column":8},"end":{"line":295,"column":65}},"130":{"start":{"line":298,"column":4},"end":{"line":300,"column":5}},"131":{"start":{"line":299,"column":8},"end":{"line":299,"column":15}},"132":{"start":{"line":302,"column":4},"end":{"line":304,"column":5}},"133":{"start":{"line":303,"column":8},"end":{"line":303,"column":15}},"134":{"start":{"line":306,"column":4},"end":{"line":306,"column":33}},"135":{"start":{"line":307,"column":4},"end":{"line":322,"column":5}},"136":{"start":{"line":308,"column":8},"end":{"line":309,"column":60}},"137":{"start":{"line":310,"column":8},"end":{"line":320,"column":9}},"138":{"start":{"line":311,"column":12},"end":{"line":311,"column":53}},"139":{"start":{"line":312,"column":15},"end":{"line":320,"column":9}},"140":{"start":{"line":313,"column":12},"end":{"line":313,"column":40}},"141":{"start":{"line":314,"column":15},"end":{"line":320,"column":9}},"142":{"start":{"line":315,"column":12},"end":{"line":315,"column":43}},"143":{"start":{"line":319,"column":12},"end":{"line":319,"column":53}},"144":{"start":{"line":321,"column":8},"end":{"line":321,"column":15}},"145":{"start":{"line":324,"column":4},"end":{"line":324,"column":42}},"146":{"start":{"line":325,"column":4},"end":{"line":325,"column":19}},"147":{"start":{"line":326,"column":4},"end":{"line":338,"column":5}},"148":{"start":{"line":327,"column":8},"end":{"line":327,"column":32}},"149":{"start":{"line":329,"column":8},"end":{"line":329,"column":73}},"150":{"start":{"line":331,"column":8},"end":{"line":331,"column":44}},"151":{"start":{"line":332,"column":8},"end":{"line":332,"column":40}},"152":{"start":{"line":333,"column":8},"end":{"line":333,"column":50}},"153":{"start":{"line":334,"column":8},"end":{"line":336,"column":10}},"154":{"start":{"line":337,"column":8},"end":{"line":337,"column":62}},"155":{"start":{"line":340,"column":4},"end":{"line":359,"column":5}},"156":{"start":{"line":341,"column":8},"end":{"line":341,"column":28}},"157":{"start":{"line":343,"column":8},"end":{"line":356,"column":9}},"158":{"start":{"line":346,"column":12},"end":{"line":348,"column":15}},"159":{"start":{"line":349,"column":12},"end":{"line":351,"column":13}},"160":{"start":{"line":350,"column":16},"end":{"line":350,"column":43}},"161":{"start":{"line":352,"column":12},"end":{"line":353,"column":64}},"162":{"start":{"line":355,"column":12},"end":{"line":355,"column":43}},"163":{"start":{"line":358,"column":8},"end":{"line":358,"column":32}},"164":{"start":{"line":362,"column":0},"end":{"line":416,"column":2}},"165":{"start":{"line":363,"column":4},"end":{"line":363,"column":20}},"166":{"start":{"line":365,"column":4},"end":{"line":367,"column":5}},"167":{"start":{"line":366,"column":8},"end":{"line":366,"column":15}},"168":{"start":{"line":369,"column":4},"end":{"line":369,"column":18}},"169":{"start":{"line":370,"column":4},"end":{"line":370,"column":41}},"170":{"start":{"line":371,"column":4},"end":{"line":374,"column":5}},"171":{"start":{"line":372,"column":8},"end":{"line":372,"column":26}},"172":{"start":{"line":373,"column":8},"end":{"line":373,"column":38}},"173":{"start":{"line":375,"column":4},"end":{"line":375,"column":47}},"174":{"start":{"line":376,"column":4},"end":{"line":378,"column":5}},"175":{"start":{"line":377,"column":8},"end":{"line":377,"column":46}},"176":{"start":{"line":380,"column":4},"end":{"line":380,"column":21}},"177":{"start":{"line":381,"column":4},"end":{"line":381,"column":42}},"178":{"start":{"line":382,"column":4},"end":{"line":382,"column":24}},"179":{"start":{"line":384,"column":4},"end":{"line":384,"column":36}},"180":{"start":{"line":385,"column":4},"end":{"line":385,"column":30}},"181":{"start":{"line":387,"column":4},"end":{"line":398,"column":5}},"182":{"start":{"line":388,"column":8},"end":{"line":397,"column":15}},"183":{"start":{"line":400,"column":4},"end":{"line":402,"column":5}},"184":{"start":{"line":401,"column":8},"end":{"line":401,"column":35}},"185":{"start":{"line":403,"column":4},"end":{"line":404,"column":60}},"186":{"start":{"line":405,"column":4},"end":{"line":405,"column":40}},"187":{"start":{"line":406,"column":4},"end":{"line":406,"column":34}},"188":{"start":{"line":407,"column":4},"end":{"line":407,"column":49}},"189":{"start":{"line":409,"column":4},"end":{"line":411,"column":5}},"190":{"start":{"line":410,"column":8},"end":{"line":410,"column":32}},"191":{"start":{"line":413,"column":4},"end":{"line":415,"column":5}},"192":{"start":{"line":414,"column":8},"end":{"line":414,"column":35}},"193":{"start":{"line":418,"column":0},"end":{"line":428,"column":2}},"194":{"start":{"line":419,"column":4},"end":{"line":419,"column":20}},"195":{"start":{"line":420,"column":4},"end":{"line":422,"column":5}},"196":{"start":{"line":421,"column":8},"end":{"line":421,"column":15}},"197":{"start":{"line":423,"column":4},"end":{"line":427,"column":5}},"198":{"start":{"line":424,"column":8},"end":{"line":424,"column":27}},"199":{"start":{"line":426,"column":8},"end":{"line":426,"column":28}},"200":{"start":{"line":430,"column":0},"end":{"line":442,"column":2}},"201":{"start":{"line":431,"column":4},"end":{"line":431,"column":20}},"202":{"start":{"line":432,"column":4},"end":{"line":434,"column":5}},"203":{"start":{"line":433,"column":8},"end":{"line":433,"column":15}},"204":{"start":{"line":435,"column":4},"end":{"line":441,"column":5}},"205":{"start":{"line":436,"column":8},"end":{"line":436,"column":31}},"206":{"start":{"line":437,"column":11},"end":{"line":441,"column":5}},"207":{"start":{"line":438,"column":8},"end":{"line":438,"column":32}},"208":{"start":{"line":440,"column":8},"end":{"line":440,"column":31}},"209":{"start":{"line":444,"column":0},"end":{"line":456,"column":2}},"210":{"start":{"line":445,"column":4},"end":{"line":445,"column":20}},"211":{"start":{"line":446,"column":4},"end":{"line":452,"column":5}},"212":{"start":{"line":447,"column":8},"end":{"line":449,"column":12}},"213":{"start":{"line":451,"column":8},"end":{"line":451,"column":35}},"214":{"start":{"line":453,"column":4},"end":{"line":455,"column":5}},"215":{"start":{"line":454,"column":8},"end":{"line":454,"column":22}},"216":{"start":{"line":458,"column":0},"end":{"line":466,"column":2}},"217":{"start":{"line":459,"column":4},"end":{"line":459,"column":20}},"218":{"start":{"line":460,"column":4},"end":{"line":460,"column":67}},"219":{"start":{"line":461,"column":4},"end":{"line":464,"column":5}},"220":{"start":{"line":462,"column":8},"end":{"line":462,"column":28}},"221":{"start":{"line":463,"column":8},"end":{"line":463,"column":20}},"222":{"start":{"line":465,"column":4},"end":{"line":465,"column":17}},"223":{"start":{"line":468,"column":0},"end":{"line":492,"column":2}},"224":{"start":{"line":469,"column":4},"end":{"line":469,"column":20}},"225":{"start":{"line":470,"column":4},"end":{"line":470,"column":40}},"226":{"start":{"line":471,"column":4},"end":{"line":471,"column":36}},"227":{"start":{"line":472,"column":4},"end":{"line":474,"column":5}},"228":{"start":{"line":473,"column":8},"end":{"line":473,"column":21}},"229":{"start":{"line":476,"column":4},"end":{"line":490,"column":5}},"230":{"start":{"line":477,"column":8},"end":{"line":479,"column":9}},"231":{"start":{"line":478,"column":12},"end":{"line":478,"column":32}},"232":{"start":{"line":480,"column":11},"end":{"line":490,"column":5}},"233":{"start":{"line":481,"column":8},"end":{"line":483,"column":9}},"234":{"start":{"line":482,"column":12},"end":{"line":482,"column":35}},"235":{"start":{"line":484,"column":11},"end":{"line":490,"column":5}},"236":{"start":{"line":485,"column":8},"end":{"line":489,"column":12}},"237":{"start":{"line":491,"column":4},"end":{"line":491,"column":16}},"238":{"start":{"line":494,"column":0},"end":{"line":538,"column":2}},"239":{"start":{"line":495,"column":4},"end":{"line":495,"column":20}},"240":{"start":{"line":497,"column":4},"end":{"line":499,"column":5}},"241":{"start":{"line":498,"column":8},"end":{"line":498,"column":21}},"242":{"start":{"line":501,"column":4},"end":{"line":503,"column":5}},"243":{"start":{"line":502,"column":8},"end":{"line":502,"column":21}},"244":{"start":{"line":505,"column":4},"end":{"line":521,"column":5}},"245":{"start":{"line":509,"column":8},"end":{"line":519,"column":10}},"246":{"start":{"line":520,"column":8},"end":{"line":520,"column":21}},"247":{"start":{"line":523,"column":4},"end":{"line":535,"column":5}},"248":{"start":{"line":524,"column":8},"end":{"line":524,"column":44}},"249":{"start":{"line":526,"column":8},"end":{"line":526,"column":80}},"250":{"start":{"line":527,"column":8},"end":{"line":532,"column":9}},"251":{"start":{"line":528,"column":12},"end":{"line":530,"column":15}},"252":{"start":{"line":531,"column":12},"end":{"line":531,"column":24}},"253":{"start":{"line":534,"column":8},"end":{"line":534,"column":27}},"254":{"start":{"line":537,"column":4},"end":{"line":537,"column":17}},"255":{"start":{"line":540,"column":0},"end":{"line":559,"column":2}},"256":{"start":{"line":541,"column":4},"end":{"line":541,"column":20}},"257":{"start":{"line":542,"column":4},"end":{"line":542,"column":64}},"258":{"start":{"line":544,"column":4},"end":{"line":550,"column":5}},"259":{"start":{"line":545,"column":8},"end":{"line":547,"column":9}},"260":{"start":{"line":546,"column":12},"end":{"line":546,"column":19}},"261":{"start":{"line":549,"column":8},"end":{"line":549,"column":27}},"262":{"start":{"line":552,"column":4},"end":{"line":558,"column":5}},"263":{"start":{"line":553,"column":8},"end":{"line":557,"column":9}},"264":{"start":{"line":554,"column":12},"end":{"line":554,"column":32}},"265":{"start":{"line":556,"column":12},"end":{"line":556,"column":35}}},"branchMap":{"1":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":19},"end":{"line":48,"column":39}},{"start":{"line":48,"column":43},"end":{"line":48,"column":73}}]},"2":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"3":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":29},"end":{"line":56,"column":59}},{"start":{"line":56,"column":63},"end":{"line":56,"column":75}}]},"4":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":17},"end":{"line":57,"column":40}},{"start":{"line":57,"column":44},"end":{"line":57,"column":77}}]},"5":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":24},"end":{"line":62,"column":49}},{"start":{"line":62,"column":53},"end":{"line":62,"column":58}}]},"6":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":23},"end":{"line":64,"column":42}},{"start":{"line":64,"column":46},"end":{"line":64,"column":48}}]},"7":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":22},"end":{"line":65,"column":37}},{"start":{"line":65,"column":41},"end":{"line":65,"column":59}},{"start":{"line":65,"column":63},"end":{"line":65,"column":65}}]},"8":{"line":88,"type":"cond-expr","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":29}},{"start":{"line":89,"column":32},"end":{"line":89,"column":34}}]},"9":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":4},"end":{"line":93,"column":4}},{"start":{"line":93,"column":4},"end":{"line":93,"column":4}}]},"10":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"11":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":4},"end":{"line":120,"column":4}},{"start":{"line":120,"column":4},"end":{"line":120,"column":4}}]},"12":{"line":142,"type":"binary-expr","locations":[{"start":{"line":142,"column":16},"end":{"line":142,"column":24}},{"start":{"line":142,"column":28},"end":{"line":142,"column":37}}]},"13":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":4},"end":{"line":168,"column":4}},{"start":{"line":168,"column":4},"end":{"line":168,"column":4}}]},"14":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":4},"end":{"line":188,"column":4}},{"start":{"line":188,"column":4},"end":{"line":188,"column":4}}]},"15":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":4},"end":{"line":220,"column":4}},{"start":{"line":220,"column":4},"end":{"line":220,"column":4}}]},"16":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":8},"end":{"line":229,"column":8}},{"start":{"line":229,"column":8},"end":{"line":229,"column":8}}]},"17":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":8},"end":{"line":238,"column":8}},{"start":{"line":238,"column":8},"end":{"line":238,"column":8}}]},"18":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":4},"end":{"line":262,"column":4}},{"start":{"line":262,"column":4},"end":{"line":262,"column":4}}]},"19":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":4},"end":{"line":293,"column":4}},{"start":{"line":293,"column":4},"end":{"line":293,"column":4}}]},"20":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":4},"end":{"line":298,"column":4}},{"start":{"line":298,"column":4},"end":{"line":298,"column":4}}]},"21":{"line":298,"type":"binary-expr","locations":[{"start":{"line":298,"column":8},"end":{"line":298,"column":25}},{"start":{"line":298,"column":29},"end":{"line":298,"column":48}}]},"22":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":4},"end":{"line":302,"column":4}},{"start":{"line":302,"column":4},"end":{"line":302,"column":4}}]},"23":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":4}},{"start":{"line":307,"column":4},"end":{"line":307,"column":4}}]},"24":{"line":308,"type":"binary-expr","locations":[{"start":{"line":308,"column":22},"end":{"line":308,"column":41}},{"start":{"line":309,"column":22},"end":{"line":309,"column":59}}]},"25":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8}},{"start":{"line":310,"column":8},"end":{"line":310,"column":8}}]},"26":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":15},"end":{"line":312,"column":15}},{"start":{"line":312,"column":15},"end":{"line":312,"column":15}}]},"27":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":15},"end":{"line":314,"column":15}},{"start":{"line":314,"column":15},"end":{"line":314,"column":15}}]},"28":{"line":326,"type":"if","locations":[{"start":{"line":326,"column":4},"end":{"line":326,"column":4}},{"start":{"line":326,"column":4},"end":{"line":326,"column":4}}]},"29":{"line":326,"type":"binary-expr","locations":[{"start":{"line":326,"column":8},"end":{"line":326,"column":12}},{"start":{"line":326,"column":16},"end":{"line":326,"column":31}},{"start":{"line":326,"column":35},"end":{"line":326,"column":48}}]},"30":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":8},"end":{"line":343,"column":8}},{"start":{"line":343,"column":8},"end":{"line":343,"column":8}}]},"31":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":12},"end":{"line":349,"column":12}},{"start":{"line":349,"column":12},"end":{"line":349,"column":12}}]},"32":{"line":353,"type":"binary-expr","locations":[{"start":{"line":353,"column":17},"end":{"line":353,"column":53}},{"start":{"line":353,"column":57},"end":{"line":353,"column":58}}]},"33":{"line":365,"type":"if","locations":[{"start":{"line":365,"column":4},"end":{"line":365,"column":4}},{"start":{"line":365,"column":4},"end":{"line":365,"column":4}}]},"34":{"line":376,"type":"if","locations":[{"start":{"line":376,"column":4},"end":{"line":376,"column":4}},{"start":{"line":376,"column":4},"end":{"line":376,"column":4}}]},"35":{"line":387,"type":"if","locations":[{"start":{"line":387,"column":4},"end":{"line":387,"column":4}},{"start":{"line":387,"column":4},"end":{"line":387,"column":4}}]},"36":{"line":400,"type":"if","locations":[{"start":{"line":400,"column":4},"end":{"line":400,"column":4}},{"start":{"line":400,"column":4},"end":{"line":400,"column":4}}]},"37":{"line":404,"type":"binary-expr","locations":[{"start":{"line":404,"column":9},"end":{"line":404,"column":49}},{"start":{"line":404,"column":53},"end":{"line":404,"column":54}}]},"38":{"line":420,"type":"if","locations":[{"start":{"line":420,"column":4},"end":{"line":420,"column":4}},{"start":{"line":420,"column":4},"end":{"line":420,"column":4}}]},"39":{"line":423,"type":"if","locations":[{"start":{"line":423,"column":4},"end":{"line":423,"column":4}},{"start":{"line":423,"column":4},"end":{"line":423,"column":4}}]},"40":{"line":432,"type":"if","locations":[{"start":{"line":432,"column":4},"end":{"line":432,"column":4}},{"start":{"line":432,"column":4},"end":{"line":432,"column":4}}]},"41":{"line":435,"type":"if","locations":[{"start":{"line":435,"column":4},"end":{"line":435,"column":4}},{"start":{"line":435,"column":4},"end":{"line":435,"column":4}}]},"42":{"line":437,"type":"if","locations":[{"start":{"line":437,"column":11},"end":{"line":437,"column":11}},{"start":{"line":437,"column":11},"end":{"line":437,"column":11}}]},"43":{"line":446,"type":"if","locations":[{"start":{"line":446,"column":4},"end":{"line":446,"column":4}},{"start":{"line":446,"column":4},"end":{"line":446,"column":4}}]},"44":{"line":461,"type":"if","locations":[{"start":{"line":461,"column":4},"end":{"line":461,"column":4}},{"start":{"line":461,"column":4},"end":{"line":461,"column":4}}]},"45":{"line":472,"type":"if","locations":[{"start":{"line":472,"column":4},"end":{"line":472,"column":4}},{"start":{"line":472,"column":4},"end":{"line":472,"column":4}}]},"46":{"line":476,"type":"if","locations":[{"start":{"line":476,"column":4},"end":{"line":476,"column":4}},{"start":{"line":476,"column":4},"end":{"line":476,"column":4}}]},"47":{"line":477,"type":"if","locations":[{"start":{"line":477,"column":8},"end":{"line":477,"column":8}},{"start":{"line":477,"column":8},"end":{"line":477,"column":8}}]},"48":{"line":480,"type":"if","locations":[{"start":{"line":480,"column":11},"end":{"line":480,"column":11}},{"start":{"line":480,"column":11},"end":{"line":480,"column":11}}]},"49":{"line":481,"type":"if","locations":[{"start":{"line":481,"column":8},"end":{"line":481,"column":8}},{"start":{"line":481,"column":8},"end":{"line":481,"column":8}}]},"50":{"line":481,"type":"binary-expr","locations":[{"start":{"line":481,"column":12},"end":{"line":481,"column":21}},{"start":{"line":481,"column":25},"end":{"line":481,"column":34}}]},"51":{"line":484,"type":"if","locations":[{"start":{"line":484,"column":11},"end":{"line":484,"column":11}},{"start":{"line":484,"column":11},"end":{"line":484,"column":11}}]},"52":{"line":497,"type":"if","locations":[{"start":{"line":497,"column":4},"end":{"line":497,"column":4}},{"start":{"line":497,"column":4},"end":{"line":497,"column":4}}]},"53":{"line":501,"type":"if","locations":[{"start":{"line":501,"column":4},"end":{"line":501,"column":4}},{"start":{"line":501,"column":4},"end":{"line":501,"column":4}}]},"54":{"line":505,"type":"if","locations":[{"start":{"line":505,"column":4},"end":{"line":505,"column":4}},{"start":{"line":505,"column":4},"end":{"line":505,"column":4}}]},"55":{"line":505,"type":"binary-expr","locations":[{"start":{"line":505,"column":8},"end":{"line":505,"column":40}},{"start":{"line":506,"column":8},"end":{"line":506,"column":51}},{"start":{"line":507,"column":8},"end":{"line":507,"column":88}}]},"56":{"line":523,"type":"if","locations":[{"start":{"line":523,"column":4},"end":{"line":523,"column":4}},{"start":{"line":523,"column":4},"end":{"line":523,"column":4}}]},"57":{"line":527,"type":"if","locations":[{"start":{"line":527,"column":8},"end":{"line":527,"column":8}},{"start":{"line":527,"column":8},"end":{"line":527,"column":8}}]},"58":{"line":545,"type":"if","locations":[{"start":{"line":545,"column":8},"end":{"line":545,"column":8}},{"start":{"line":545,"column":8},"end":{"line":545,"column":8}}]},"59":{"line":553,"type":"if","locations":[{"start":{"line":553,"column":8},"end":{"line":553,"column":8}},{"start":{"line":553,"column":8},"end":{"line":553,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = TChannelRequest;","","var assert = require('assert');","var EventEmitter = require('./lib/event_emitter');","var inherits = require('util').inherits;","var process = require('process');","var stat = require('./stat-tags.js');","","var RetryFlags = require('./retry-flags.js');","var errors = require('./errors');","","function TChannelRequest(options) {","    /*eslint max-statements: [2, 40]*/","    assert(!options.streamed, 'streaming request federation not implemented');","","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.responseEvent = this.defineEvent('response');","","    this.channel = options.channel;","","    this.options = options;","","    this.triedRemoteAddrs = null;","    this.outReqs = [];","    this.timeout = this.options.timeout || TChannelRequest.defaultTimeout;","    if (this.options.timeoutPerAttempt) {","        this.options.retryFlags = new RetryFlags(","            this.options.retryFlags.never,","            this.options.retryFlags.onConnectionError,","            true","        );","    }","    this.timeoutPerAttempt = this.options.timeoutPerAttempt || this.timeout;","    this.limit = this.options.retryLimit || TChannelRequest.defaultRetryLimit;","    this.start = 0;","    this.end = 0;","    this.elapsed = 0;","    this.resendSanity = 0;","    this.trackPending = this.options.trackPending || false;","","    this.serviceName = options.serviceName || '';","    this.callerName = options.headers && options.headers.cn || '';","    // so that as-foo can punch req.headers.X","    this.headers = this.options.headers;","","    this.endpoint = null;","    this.arg1 = null;","    this.arg2 = null;","    this.arg3 = null;","","    this.err = null;","    this.res = null;","}","","inherits(TChannelRequest, EventEmitter);","","TChannelRequest.defaultRetryLimit = 5;","TChannelRequest.defaultTimeout = 100;","","function RequestOperation(req, timeout, peer, waitForIdentifiedSlot) {","    this.req = req;","    this.timeout = timeout;","    this.peer = peer;","    this.waitForIdentifiedSlot =","        typeof waitForIdentifiedSlot === 'number' ?","        waitForIdentifiedSlot : -1;","}","","RequestOperation.prototype.onTimeout = function onTimeout(now) {","    if (this.waitForIdentifiedSlot !== -1) {","        this.peer.stopWaitingForIdentified(this.waitForIdentifiedSlot);","    }","","    this.req.checkTimeout();","};","","TChannelRequest.prototype.type = 'tchannel.request';","","TChannelRequest.prototype.emitError = function emitError(err) {","    var self = this;","    if (!self.end) {","        self.end = self.channel.timers.now();","    }","    self.err = err;","","    self.emitErrorStat(err);","    self.emitLatency();","","    self.channel.services.onRequestError(self);","    self.errorEvent.emit(self, err);","};","","TChannelRequest.prototype.emitErrorStat =","function emitErrorStat(err) {","    var self = this;","","    if (err.isErrorFrame) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.system-errors',","            'counter',","            1,","            new stat.OutboundCallsSystemErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                err.codeName,","                self.retryCount","            )","        );","    } else {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.operational-errors',","            'counter',","            1,","            new stat.OutboundCallsOperationalErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                err.type || 'unknown'","            )","        );","    }","};","","TChannelRequest.prototype.emitLatency =","function emitLatency() {","    var self = this;","","    var latency = self.end - self.start;","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.latency',","        'timing',","        latency,","        new stat.OutboundCallsLatencyTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","};","","TChannelRequest.prototype.emitResponse = function emitResponse(res) {","    var self = this;","    if (!self.end) {","        self.end = self.channel.timers.now();","    }","    self.res = res;","","    self.arg1 = null;","    self.arg2 = null;","    self.arg3 = null;","","    self.emitResponseStat(res);","    self.emitLatency();","","    self.channel.services.onRequestResponse(self);","    self.responseEvent.emit(self, res);","};","","TChannelRequest.prototype.emitResponseStat =","function emitResponseStat(res) {","    var self = this;","","    if (res.ok) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.success',","            'counter',","            1,","            new stat.OutboundCallsSuccessTags(","                self.serviceName,","                self.callerName,","                self.endpoint","            )","        );","    } else {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.app-errors',","            'counter',","            1,","            new stat.OutboundCallsAppErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                'unknown'","            )","        );","    }","};","","TChannelRequest.prototype.hookupStreamCallback = function hookupCallback(callback) {","    throw new Error('not implemented');","};","","TChannelRequest.prototype.hookupCallback = function hookupCallback(callback) {","    var self = this;","    if (callback.canStream) {","        return self.hookupStreamCallback(callback);","    }","    var called = false;","","    self.errorEvent.on(onError);","    self.responseEvent.on(onResponse);","","    function onError(err) {","        if (called) {","            return;","        }","        called = true;","","        callback(err, null, null, null);","    }","","    function onResponse(res) {","        if (called) {","            return;","        }","        called = true;","        res.withArg23(function gotArg23(err, arg2, arg3) {","            callback(err, res, arg2, arg3);","        });","    }","","    return self;","};","","TChannelRequest.prototype.choosePeer = function choosePeer() {","    var self = this;","    return self.channel.peers.choosePeer(self);","};","","TChannelRequest.prototype.send = function send(arg1, arg2, arg3, callback) {","    var self = this;","","    self.endpoint = String(arg1);","    self.arg1 = arg1;","    self.arg2 = arg2;","    self.arg3 = arg3;","    if (callback) {","        self.hookupCallback(callback);","    }","    self.start = self.channel.timers.now();","    self.resendSanity = self.limit;","","    self.emitOutboundCallsSent();","","    self.channel.services.onRequest(self);","    self.resend();","};","","TChannelRequest.prototype.emitOutboundCallsSent =","function emitOutboundCallsSent() {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.sent',","        'counter',","        1,","        new stat.OutboundCallsSentTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","};","","TChannelRequest.prototype.resend = function resend() {","    var self = this;","","    if (self.channel.enableMaxRetryRatio) {","        var isRetry = self.outReqs.length > 0;","        self.channel.retryRatioTracker.incrementRequest(isRetry);","    }","","    if (self.trackPending && self.checkPending()) {","        return;","    }","","    if (self.checkTimeout()) {","        return;","    }","","    var peer = self.choosePeer();","    if (!peer) {","        var lastReq = self.outReqs.length &&","                      self.outReqs[self.outReqs.length - 1];","        if (!lastReq) {","            self.emitError(errors.NoPeerAvailable());","        } else if (lastReq.err) {","            self.emitError(lastReq.err);","        } else if (lastReq.res) {","            self.emitResponse(lastReq.res);","        } else {","            // TODO: perhaps a different typed error \"last request didn't even","            // error?\"","            self.emitError(errors.NoPeerAvailable());","        }","        return;","    }","","    var conn = peer.getInConnection(true);","    var reqTimeout;","    if (conn && conn.remoteName && !conn.closing) {","        self.onIdentified(peer);","    } else {","        var waitForIdentifiedSlot = peer.waitForIdentified(onIdentified);","","        var now = self.channel.timers.now();","        self.elapsed = now - self.start;","        var timeout = self.timeout - self.elapsed;","        var reqOp = new RequestOperation(","            self, timeout, peer, waitForIdentifiedSlot","        );","        reqTimeout = self.channel.timeHeap.update(reqOp, now);","    }","","    function onIdentified(err) {","        reqTimeout.cancel();","","        if (err) {","            /* emulate outReq failure */","","            self.outReqs.push({","                err: err","            });","            if (!self.triedRemoteAddrs) {","                self.triedRemoteAddrs = {};","            }","            self.triedRemoteAddrs[peer.hostPort] =","                (self.triedRemoteAddrs[peer.hostPort] || 0) + 1;","","            return self.onSubreqError(err);","        }","","        self.onIdentified(peer);","    }","};","","TChannelRequest.prototype.onIdentified = function onIdentified(peer) {","    var self = this;","","    if (self.checkTimeout()) {","        return;","    }","","    var opts = {};","    var keys = Object.keys(self.options);","    for (var i = 0; i < keys.length; i++) {","        var key = keys[i];","        opts[key] = self.options[key];","    }","    opts.timeout = self.timeout - self.elapsed;","    if (opts.timeout > self.timeoutPerAttempt) {","        opts.timeout = self.timeoutPerAttempt;","    }","","    opts.peer = peer;","    opts.retryCount = self.outReqs.length;","    opts.logical = true;","","    var outReq = peer.request(opts);","    self.outReqs.push(outReq);","","    if (self.outReqs.length !== 1) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.retries',","            'counter',","            1,","            new stat.OutboundCallsRetriesTags(","                outReq.serviceName,","                outReq.callerName,","                String(self.arg1),","                self.outReqs.length - 1","            ));","    }","","    if (!self.triedRemoteAddrs) {","        self.triedRemoteAddrs = {};","    }","    self.triedRemoteAddrs[outReq.remoteAddr] =","        (self.triedRemoteAddrs[outReq.remoteAddr] || 0) + 1;","    outReq.responseEvent.on(onResponse);","    outReq.errorEvent.on(onError);","    outReq.send(self.arg1, self.arg2, self.arg3);","","    function onError(err) {","        self.onSubreqError(err);","    }","","    function onResponse(res) {","        self.onSubreqResponse(res);","    }","};","","TChannelRequest.prototype.onSubreqError = function onSubreqError(err) {","    var self = this;","    if (self.checkTimeout(err)) {","        return;","    }","    if (self.shouldRetryError(err)) {","        self.deferResend();","    } else {","        self.emitError(err);","    }","};","","TChannelRequest.prototype.onSubreqResponse = function onSubreqResponse(res) {","    var self = this;","    if (self.checkTimeout(null, res)) {","        return;","    }","    if (res.ok) {","        self.emitResponse(res);","    } else if (self.options.shouldApplicationRetry) {","        self.maybeAppRetry(res);","    } else {","        self.emitResponse(res);","    }","};","","TChannelRequest.prototype.deferResend = function deferResend() {","    var self = this;","    if (--self.resendSanity < 0) {","        self.emitError(errors.RequestRetryLimitExceeded({","            limit: self.limit","        }));","    } else {","        process.nextTick(doResend);","    }","    function doResend() {","        self.resend();","    }","};","","TChannelRequest.prototype.checkPending = function checkPending() {","    var self = this;","    var err = self.channel.services.errorIfExceedsMaxPending(self);","    if (err) {","        self.emitError(err);","        return true;","    }","    return false;","};","","TChannelRequest.prototype.checkTimeout = function checkTimeout(err, res) {","    var self = this;","    var now = self.channel.timers.now();","    self.elapsed = now - self.start;","    if (self.elapsed < self.timeout) {","        return false;","    }","","    if (err) {","        if (!self.err) {","            self.emitError(err);","        }","    } else if (res) {","        if (!self.err && !self.res) {","            self.emitResponse(res);","        }","    } else if (!self.err) {","        self.emitError(errors.RequestTimeoutError({","            start: self.start,","            elapsed: self.elapsed,","            timeout: self.timeout","        }));","    }","    return true;","};","","TChannelRequest.prototype.shouldRetryError = function shouldRetryError(err) {","    var self = this;","","    if (self.outReqs.length > self.limit) {","        return false;","    }","","    if (self.options.retryFlags.never) {","        return false;","    }","","    if (self.channel.enableMaxRetryRatio &&","        self.channel.retryRatioTracker.isWarmedUp() &&","        self.channel.retryRatioTracker.currentRetryRatio() >= self.channel.maxRetryRatio","    ) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.retries-rejected-by-max-retry-ratio',","            'counter',","            1,","            new stat.OutboundCallsRetriesTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                self.outReqs.length - 1","            )","        );","        return false;","    }","","    if (err) {","        var codeName = errors.classify(err);","","        var shouldRetry = errors.shouldRetry(codeName, self.options.retryFlags);","        if (shouldRetry === null) {","            self.channel.logger.error('unknown error type in request retry', {","                error: err","            });","            return true;","        }","","        return shouldRetry;","    }","","    return false;","};","","TChannelRequest.prototype.maybeAppRetry = function maybeAppRetry(res) {","    var self = this;","    self.options.shouldApplicationRetry(self, res, retry, done);","","    function retry() {","        if (self.checkTimeout(null, res)) {","            return;","        }","","        self.deferResend();","    }","","    function done(err) {","        if (err) {","            self.emitError(err);","        } else {","            self.emitResponse(res);","        }","    }","};",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":1,"34":1,"36":0,"38":0,"39":0,"40":0,"42":0,"44":0,"46":0,"47":0,"48":0,"49":0,"50":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"65":0,"67":0,"69":0,"70":0,"71":0,"72":0,"74":0,"75":0,"78":1,"80":1,"81":1,"83":1,"84":0,"85":0,"86":0,"87":0,"92":1,"93":0,"94":0,"97":0,"100":1,"102":1,"103":0,"104":0,"105":0,"107":0,"109":0,"110":0,"112":0,"113":0,"116":1,"118":0,"120":0,"121":0,"134":0,"148":1,"150":0,"152":0,"154":0,"166":1,"167":0,"168":0,"169":0,"171":0,"173":0,"174":0,"175":0,"177":0,"178":0,"180":0,"181":0,"184":1,"186":0,"188":0,"189":0,"200":0,"214":1,"215":0,"218":1,"219":0,"220":0,"221":0,"223":0,"225":0,"226":0,"228":1,"229":0,"230":0,"232":0,"234":0,"237":1,"238":0,"239":0,"241":0,"242":0,"243":0,"247":0,"250":1,"251":0,"252":0,"255":1,"256":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"265":0,"266":0,"268":0,"270":0,"271":0,"274":1,"276":0,"278":0,"290":1,"291":0,"293":0,"294":0,"295":0,"298":0,"299":0,"302":0,"303":0,"306":0,"307":0,"308":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"319":0,"321":0,"324":0,"325":0,"326":0,"327":0,"329":0,"331":0,"332":0,"333":0,"334":0,"337":0,"340":1,"341":0,"343":0,"346":0,"349":0,"350":0,"352":0,"355":0,"358":0,"362":1,"363":0,"365":0,"366":0,"369":0,"370":0,"371":0,"372":0,"373":0,"375":0,"376":0,"377":0,"380":0,"381":0,"382":0,"384":0,"385":0,"387":0,"388":0,"400":0,"401":0,"403":0,"405":0,"406":0,"407":0,"409":1,"410":0,"413":1,"414":0,"418":1,"419":0,"420":0,"421":0,"423":0,"424":0,"426":0,"430":1,"431":0,"432":0,"433":0,"435":0,"436":0,"437":0,"438":0,"440":0,"444":1,"445":0,"446":0,"447":0,"451":0,"453":1,"454":0,"458":1,"459":0,"460":0,"461":0,"462":0,"463":0,"465":0,"468":1,"469":0,"470":0,"471":0,"472":0,"473":0,"476":0,"477":0,"478":0,"480":0,"481":0,"482":0,"484":0,"485":0,"491":0,"494":1,"495":0,"497":0,"498":0,"501":0,"502":0,"505":0,"509":0,"520":0,"523":0,"524":0,"526":0,"527":0,"528":0,"531":0,"534":0,"537":0,"540":1,"541":0,"542":0,"544":1,"545":0,"546":0,"549":0,"552":1,"553":0,"554":0,"556":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/stat-tags.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/stat-tags.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":1,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":1,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":1,"135":0,"136":1,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":1,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":1,"156":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":1,"167":0,"168":1,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":1,"177":0,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":1,"186":0,"187":1,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":1,"196":0,"197":1,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":1,"206":0,"207":1,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":1,"215":0,"216":1,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":1,"225":0,"226":1,"227":0,"228":0,"229":0,"230":0,"231":0,"232":1,"233":0,"234":1,"235":0,"236":0,"237":0,"238":0,"239":0,"240":1,"241":0,"242":1,"243":0,"244":0,"245":0,"246":0,"247":1,"248":0,"249":1,"250":0,"251":0,"252":0,"253":0,"254":0,"255":1,"256":0,"257":1,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":1,"265":0,"266":1,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":1,"274":0,"275":1,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":1,"283":0,"284":1,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":1,"292":0,"293":1,"294":0,"295":0,"296":0,"297":0,"298":0,"299":1,"300":0,"301":1,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":1,"309":0,"310":1,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":1,"319":0,"320":1,"321":0,"322":0,"323":0,"324":0,"325":1,"326":0,"327":1,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":1,"336":0,"337":1,"338":6,"339":6,"340":6,"341":6,"342":6,"343":6,"344":6,"345":6,"346":1,"347":0,"348":0,"349":0,"350":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":6,"70":0},"fnMap":{"1":{"name":"InboundCallsRecvdTags","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":58}}},"2":{"name":"toStatKey","line":76,"loc":{"start":{"line":76,"column":44},"end":{"line":76,"column":71}}},"3":{"name":"OutboundCallsAppErrorsTags","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":69}}},"4":{"name":"toStatKey","line":95,"loc":{"start":{"line":95,"column":49},"end":{"line":95,"column":76}}},"5":{"name":"OutboundCallsSuccessTags","line":103,"loc":{"start":{"line":103,"column":0},"end":{"line":103,"column":61}}},"6":{"name":"toStatKey","line":114,"loc":{"start":{"line":114,"column":47},"end":{"line":114,"column":74}}},"7":{"name":"OutboundCallsPerAttemptAppErrorsTags","line":121,"loc":{"start":{"line":121,"column":0},"end":{"line":123,"column":2}}},"8":{"name":"toStatKey","line":137,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":27}}},"9":{"name":"OutboundCallsSystemErrorsTags","line":146,"loc":{"start":{"line":146,"column":0},"end":{"line":148,"column":2}}},"10":{"name":"toStatKey","line":162,"loc":{"start":{"line":162,"column":0},"end":{"line":162,"column":27}}},"11":{"name":"OutboundCallsOperationalErrorsTags","line":170,"loc":{"start":{"line":170,"column":0},"end":{"line":172,"column":2}}},"12":{"name":"toStatKey","line":185,"loc":{"start":{"line":185,"column":0},"end":{"line":185,"column":27}}},"13":{"name":"OutboundCallsPerAttemptOperationalErrorsTags","line":193,"loc":{"start":{"line":193,"column":0},"end":{"line":195,"column":2}}},"14":{"name":"toStatKey","line":209,"loc":{"start":{"line":209,"column":0},"end":{"line":209,"column":27}}},"15":{"name":"OutboundCallsRetriesTags","line":218,"loc":{"start":{"line":218,"column":0},"end":{"line":220,"column":2}}},"16":{"name":"toStatKey","line":233,"loc":{"start":{"line":233,"column":0},"end":{"line":233,"column":27}}},"17":{"name":"OutboundCallsPerAttemptLatencyTags","line":241,"loc":{"start":{"line":241,"column":0},"end":{"line":243,"column":2}}},"18":{"name":"toStatKey","line":257,"loc":{"start":{"line":257,"column":0},"end":{"line":257,"column":27}}},"19":{"name":"OutboundCallsLatencyTags","line":265,"loc":{"start":{"line":265,"column":0},"end":{"line":265,"column":61}}},"20":{"name":"toStatKey","line":276,"loc":{"start":{"line":276,"column":47},"end":{"line":276,"column":74}}},"21":{"name":"OutboundCallsSentTags","line":283,"loc":{"start":{"line":283,"column":0},"end":{"line":283,"column":58}}},"22":{"name":"toStatKey","line":294,"loc":{"start":{"line":294,"column":44},"end":{"line":294,"column":71}}},"23":{"name":"InboundCallsLatencyTags","line":301,"loc":{"start":{"line":301,"column":0},"end":{"line":301,"column":60}}},"24":{"name":"toStatKey","line":312,"loc":{"start":{"line":312,"column":46},"end":{"line":312,"column":73}}},"25":{"name":"InboundCallsSuccessTags","line":319,"loc":{"start":{"line":319,"column":0},"end":{"line":319,"column":60}}},"26":{"name":"toStatKey","line":330,"loc":{"start":{"line":330,"column":46},"end":{"line":330,"column":73}}},"27":{"name":"InboundCallsAppErrorsTags","line":337,"loc":{"start":{"line":337,"column":0},"end":{"line":337,"column":68}}},"28":{"name":"toStatKey","line":349,"loc":{"start":{"line":349,"column":48},"end":{"line":349,"column":75}}},"29":{"name":"InboundCallsSystemErrorsTags","line":357,"loc":{"start":{"line":357,"column":0},"end":{"line":357,"column":71}}},"30":{"name":"toStatKey","line":369,"loc":{"start":{"line":369,"column":51},"end":{"line":369,"column":78}}},"31":{"name":"InboundRequestSizeTags","line":377,"loc":{"start":{"line":377,"column":0},"end":{"line":377,"column":59}}},"32":{"name":"toStatKey","line":388,"loc":{"start":{"line":388,"column":45},"end":{"line":388,"column":72}}},"33":{"name":"ConnectionsBytesRcvdTags","line":395,"loc":{"start":{"line":395,"column":0},"end":{"line":395,"column":58}}},"34":{"name":"toStatKey","line":405,"loc":{"start":{"line":405,"column":47},"end":{"line":405,"column":74}}},"35":{"name":"InboundResponseSizeTags","line":410,"loc":{"start":{"line":410,"column":0},"end":{"line":410,"column":60}}},"36":{"name":"toStatKey","line":421,"loc":{"start":{"line":421,"column":46},"end":{"line":421,"column":73}}},"37":{"name":"OutboundRequestSizeTags","line":428,"loc":{"start":{"line":428,"column":0},"end":{"line":428,"column":60}}},"38":{"name":"toStatKey","line":439,"loc":{"start":{"line":439,"column":46},"end":{"line":439,"column":73}}},"39":{"name":"ConnectionsBytesSentTags","line":446,"loc":{"start":{"line":446,"column":0},"end":{"line":446,"column":50}}},"40":{"name":"toStatKey","line":456,"loc":{"start":{"line":456,"column":47},"end":{"line":456,"column":74}}},"41":{"name":"OutboundResponseSizeTags","line":461,"loc":{"start":{"line":461,"column":0},"end":{"line":461,"column":61}}},"42":{"name":"toStatKey","line":472,"loc":{"start":{"line":472,"column":47},"end":{"line":472,"column":74}}},"43":{"name":"RateLimiterServiceTags","line":479,"loc":{"start":{"line":479,"column":0},"end":{"line":479,"column":45}}},"44":{"name":"toStatKey","line":488,"loc":{"start":{"line":488,"column":45},"end":{"line":488,"column":72}}},"45":{"name":"RateLimiterEdgeTags","line":493,"loc":{"start":{"line":493,"column":0},"end":{"line":493,"column":39}}},"46":{"name":"toStatKey","line":502,"loc":{"start":{"line":502,"column":42},"end":{"line":502,"column":69}}},"47":{"name":"RateLimiterEmptyTags","line":507,"loc":{"start":{"line":507,"column":0},"end":{"line":507,"column":32}}},"48":{"name":"toStatKey","line":514,"loc":{"start":{"line":514,"column":43},"end":{"line":514,"column":70}}},"49":{"name":"InboundProtocolErrorsTags","line":518,"loc":{"start":{"line":518,"column":0},"end":{"line":518,"column":49}}},"50":{"name":"toStatKey","line":527,"loc":{"start":{"line":527,"column":48},"end":{"line":527,"column":75}}},"51":{"name":"ConnectionsActiveTags","line":532,"loc":{"start":{"line":532,"column":0},"end":{"line":532,"column":55}}},"52":{"name":"toStatKey","line":542,"loc":{"start":{"line":542,"column":44},"end":{"line":542,"column":71}}},"53":{"name":"ConnectionsInitiatedTags","line":547,"loc":{"start":{"line":547,"column":0},"end":{"line":547,"column":58}}},"54":{"name":"toStatKey","line":557,"loc":{"start":{"line":557,"column":47},"end":{"line":557,"column":74}}},"55":{"name":"ConnectionsConnectErrorsTags","line":562,"loc":{"start":{"line":562,"column":0},"end":{"line":562,"column":62}}},"56":{"name":"toStatKey","line":572,"loc":{"start":{"line":572,"column":51},"end":{"line":572,"column":78}}},"57":{"name":"ConnectionsAcceptedTags","line":577,"loc":{"start":{"line":577,"column":0},"end":{"line":577,"column":57}}},"58":{"name":"toStatKey","line":587,"loc":{"start":{"line":587,"column":46},"end":{"line":587,"column":73}}},"59":{"name":"ConnectionsAcceptErrorsTags","line":592,"loc":{"start":{"line":592,"column":0},"end":{"line":592,"column":47}}},"60":{"name":"toStatKey","line":601,"loc":{"start":{"line":601,"column":50},"end":{"line":601,"column":77}}},"61":{"name":"ConnectionsErrorsTags","line":606,"loc":{"start":{"line":606,"column":0},"end":{"line":606,"column":51}}},"62":{"name":"toStatKey","line":616,"loc":{"start":{"line":616,"column":44},"end":{"line":616,"column":71}}},"63":{"name":"ConnectionsClosedTags","line":622,"loc":{"start":{"line":622,"column":0},"end":{"line":622,"column":63}}},"64":{"name":"toStatKey","line":633,"loc":{"start":{"line":633,"column":44},"end":{"line":633,"column":71}}},"65":{"name":"RelayLatencyTags","line":639,"loc":{"start":{"line":639,"column":0},"end":{"line":639,"column":28}}},"66":{"name":"toStatKey","line":646,"loc":{"start":{"line":646,"column":39},"end":{"line":646,"column":66}}},"67":{"name":"HTTPHanlderBuildLatencyTags","line":650,"loc":{"start":{"line":650,"column":0},"end":{"line":650,"column":72}}},"68":{"name":"toStatKey","line":661,"loc":{"start":{"line":661,"column":50},"end":{"line":661,"column":77}}},"69":{"name":"ObjectPoolTags","line":668,"loc":{"start":{"line":668,"column":0},"end":{"line":668,"column":44}}},"70":{"name":"toStatKey","line":681,"loc":{"start":{"line":681,"column":37},"end":{"line":681,"column":64}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":45}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":30}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":27,"column":0},"end":{"line":63,"column":2}},"5":{"start":{"line":65,"column":0},"end":{"line":74,"column":1}},"6":{"start":{"line":66,"column":4},"end":{"line":66,"column":20}},"7":{"start":{"line":67,"column":4},"end":{"line":67,"column":21}},"8":{"start":{"line":68,"column":4},"end":{"line":68,"column":24}},"9":{"start":{"line":69,"column":4},"end":{"line":69,"column":24}},"10":{"start":{"line":71,"column":4},"end":{"line":71,"column":35}},"11":{"start":{"line":72,"column":4},"end":{"line":72,"column":31}},"12":{"start":{"line":73,"column":4},"end":{"line":73,"column":29}},"13":{"start":{"line":76,"column":0},"end":{"line":81,"column":2}},"14":{"start":{"line":77,"column":4},"end":{"line":80,"column":44}},"15":{"start":{"line":83,"column":0},"end":{"line":93,"column":1}},"16":{"start":{"line":84,"column":4},"end":{"line":84,"column":18}},"17":{"start":{"line":85,"column":4},"end":{"line":85,"column":19}},"18":{"start":{"line":86,"column":4},"end":{"line":86,"column":22}},"19":{"start":{"line":87,"column":4},"end":{"line":87,"column":22}},"20":{"start":{"line":89,"column":4},"end":{"line":89,"column":37}},"21":{"start":{"line":90,"column":4},"end":{"line":90,"column":22}},"22":{"start":{"line":91,"column":4},"end":{"line":91,"column":35}},"23":{"start":{"line":92,"column":4},"end":{"line":92,"column":21}},"24":{"start":{"line":95,"column":0},"end":{"line":101,"column":2}},"25":{"start":{"line":96,"column":4},"end":{"line":100,"column":36}},"26":{"start":{"line":103,"column":0},"end":{"line":112,"column":1}},"27":{"start":{"line":104,"column":4},"end":{"line":104,"column":18}},"28":{"start":{"line":105,"column":4},"end":{"line":105,"column":19}},"29":{"start":{"line":106,"column":4},"end":{"line":106,"column":22}},"30":{"start":{"line":107,"column":4},"end":{"line":107,"column":22}},"31":{"start":{"line":109,"column":4},"end":{"line":109,"column":37}},"32":{"start":{"line":110,"column":4},"end":{"line":110,"column":22}},"33":{"start":{"line":111,"column":4},"end":{"line":111,"column":35}},"34":{"start":{"line":114,"column":0},"end":{"line":119,"column":2}},"35":{"start":{"line":115,"column":4},"end":{"line":118,"column":50}},"36":{"start":{"line":121,"column":0},"end":{"line":134,"column":1}},"37":{"start":{"line":124,"column":4},"end":{"line":124,"column":18}},"38":{"start":{"line":125,"column":4},"end":{"line":125,"column":19}},"39":{"start":{"line":126,"column":4},"end":{"line":126,"column":22}},"40":{"start":{"line":127,"column":4},"end":{"line":127,"column":22}},"41":{"start":{"line":129,"column":4},"end":{"line":129,"column":37}},"42":{"start":{"line":130,"column":4},"end":{"line":130,"column":22}},"43":{"start":{"line":131,"column":4},"end":{"line":131,"column":35}},"44":{"start":{"line":132,"column":4},"end":{"line":132,"column":21}},"45":{"start":{"line":133,"column":4},"end":{"line":133,"column":33}},"46":{"start":{"line":136,"column":0},"end":{"line":144,"column":2}},"47":{"start":{"line":138,"column":4},"end":{"line":143,"column":24}},"48":{"start":{"line":146,"column":0},"end":{"line":159,"column":1}},"49":{"start":{"line":149,"column":4},"end":{"line":149,"column":18}},"50":{"start":{"line":150,"column":4},"end":{"line":150,"column":19}},"51":{"start":{"line":151,"column":4},"end":{"line":151,"column":22}},"52":{"start":{"line":152,"column":4},"end":{"line":152,"column":22}},"53":{"start":{"line":154,"column":4},"end":{"line":154,"column":37}},"54":{"start":{"line":155,"column":4},"end":{"line":155,"column":22}},"55":{"start":{"line":156,"column":4},"end":{"line":156,"column":35}},"56":{"start":{"line":157,"column":4},"end":{"line":157,"column":21}},"57":{"start":{"line":158,"column":4},"end":{"line":158,"column":33}},"58":{"start":{"line":161,"column":0},"end":{"line":168,"column":2}},"59":{"start":{"line":163,"column":4},"end":{"line":167,"column":36}},"60":{"start":{"line":170,"column":0},"end":{"line":182,"column":1}},"61":{"start":{"line":173,"column":4},"end":{"line":173,"column":18}},"62":{"start":{"line":174,"column":4},"end":{"line":174,"column":19}},"63":{"start":{"line":175,"column":4},"end":{"line":175,"column":22}},"64":{"start":{"line":176,"column":4},"end":{"line":176,"column":22}},"65":{"start":{"line":178,"column":4},"end":{"line":178,"column":37}},"66":{"start":{"line":179,"column":4},"end":{"line":179,"column":22}},"67":{"start":{"line":180,"column":4},"end":{"line":180,"column":35}},"68":{"start":{"line":181,"column":4},"end":{"line":181,"column":21}},"69":{"start":{"line":184,"column":0},"end":{"line":191,"column":2}},"70":{"start":{"line":186,"column":4},"end":{"line":190,"column":36}},"71":{"start":{"line":193,"column":0},"end":{"line":206,"column":1}},"72":{"start":{"line":196,"column":4},"end":{"line":196,"column":18}},"73":{"start":{"line":197,"column":4},"end":{"line":197,"column":19}},"74":{"start":{"line":198,"column":4},"end":{"line":198,"column":22}},"75":{"start":{"line":199,"column":4},"end":{"line":199,"column":22}},"76":{"start":{"line":201,"column":4},"end":{"line":201,"column":37}},"77":{"start":{"line":202,"column":4},"end":{"line":202,"column":22}},"78":{"start":{"line":203,"column":4},"end":{"line":203,"column":35}},"79":{"start":{"line":204,"column":4},"end":{"line":204,"column":21}},"80":{"start":{"line":205,"column":4},"end":{"line":205,"column":33}},"81":{"start":{"line":208,"column":0},"end":{"line":216,"column":2}},"82":{"start":{"line":210,"column":4},"end":{"line":215,"column":24}},"83":{"start":{"line":218,"column":0},"end":{"line":230,"column":1}},"84":{"start":{"line":221,"column":4},"end":{"line":221,"column":18}},"85":{"start":{"line":222,"column":4},"end":{"line":222,"column":19}},"86":{"start":{"line":223,"column":4},"end":{"line":223,"column":22}},"87":{"start":{"line":224,"column":4},"end":{"line":224,"column":22}},"88":{"start":{"line":226,"column":4},"end":{"line":226,"column":37}},"89":{"start":{"line":227,"column":4},"end":{"line":227,"column":22}},"90":{"start":{"line":228,"column":4},"end":{"line":228,"column":35}},"91":{"start":{"line":229,"column":4},"end":{"line":229,"column":33}},"92":{"start":{"line":232,"column":0},"end":{"line":239,"column":2}},"93":{"start":{"line":234,"column":4},"end":{"line":238,"column":24}},"94":{"start":{"line":241,"column":0},"end":{"line":254,"column":1}},"95":{"start":{"line":244,"column":4},"end":{"line":244,"column":18}},"96":{"start":{"line":245,"column":4},"end":{"line":245,"column":19}},"97":{"start":{"line":246,"column":4},"end":{"line":246,"column":22}},"98":{"start":{"line":247,"column":4},"end":{"line":247,"column":22}},"99":{"start":{"line":249,"column":4},"end":{"line":249,"column":37}},"100":{"start":{"line":250,"column":4},"end":{"line":250,"column":22}},"101":{"start":{"line":251,"column":4},"end":{"line":251,"column":35}},"102":{"start":{"line":252,"column":4},"end":{"line":252,"column":27}},"103":{"start":{"line":253,"column":4},"end":{"line":253,"column":33}},"104":{"start":{"line":256,"column":0},"end":{"line":263,"column":2}},"105":{"start":{"line":258,"column":4},"end":{"line":262,"column":24}},"106":{"start":{"line":265,"column":0},"end":{"line":274,"column":1}},"107":{"start":{"line":266,"column":4},"end":{"line":266,"column":18}},"108":{"start":{"line":267,"column":4},"end":{"line":267,"column":19}},"109":{"start":{"line":268,"column":4},"end":{"line":268,"column":22}},"110":{"start":{"line":269,"column":4},"end":{"line":269,"column":22}},"111":{"start":{"line":271,"column":4},"end":{"line":271,"column":37}},"112":{"start":{"line":272,"column":4},"end":{"line":272,"column":22}},"113":{"start":{"line":273,"column":4},"end":{"line":273,"column":35}},"114":{"start":{"line":276,"column":0},"end":{"line":281,"column":2}},"115":{"start":{"line":277,"column":4},"end":{"line":280,"column":50}},"116":{"start":{"line":283,"column":0},"end":{"line":292,"column":1}},"117":{"start":{"line":284,"column":4},"end":{"line":284,"column":18}},"118":{"start":{"line":285,"column":4},"end":{"line":285,"column":19}},"119":{"start":{"line":286,"column":4},"end":{"line":286,"column":22}},"120":{"start":{"line":287,"column":4},"end":{"line":287,"column":22}},"121":{"start":{"line":289,"column":4},"end":{"line":289,"column":37}},"122":{"start":{"line":290,"column":4},"end":{"line":290,"column":22}},"123":{"start":{"line":291,"column":4},"end":{"line":291,"column":35}},"124":{"start":{"line":294,"column":0},"end":{"line":299,"column":2}},"125":{"start":{"line":295,"column":4},"end":{"line":298,"column":50}},"126":{"start":{"line":301,"column":0},"end":{"line":310,"column":1}},"127":{"start":{"line":302,"column":4},"end":{"line":302,"column":18}},"128":{"start":{"line":303,"column":4},"end":{"line":303,"column":19}},"129":{"start":{"line":304,"column":4},"end":{"line":304,"column":22}},"130":{"start":{"line":305,"column":4},"end":{"line":305,"column":22}},"131":{"start":{"line":307,"column":4},"end":{"line":307,"column":29}},"132":{"start":{"line":308,"column":4},"end":{"line":308,"column":31}},"133":{"start":{"line":309,"column":4},"end":{"line":309,"column":29}},"134":{"start":{"line":312,"column":0},"end":{"line":317,"column":2}},"135":{"start":{"line":313,"column":4},"end":{"line":316,"column":44}},"136":{"start":{"line":319,"column":0},"end":{"line":328,"column":1}},"137":{"start":{"line":320,"column":4},"end":{"line":320,"column":18}},"138":{"start":{"line":321,"column":4},"end":{"line":321,"column":19}},"139":{"start":{"line":322,"column":4},"end":{"line":322,"column":22}},"140":{"start":{"line":323,"column":4},"end":{"line":323,"column":22}},"141":{"start":{"line":325,"column":4},"end":{"line":325,"column":29}},"142":{"start":{"line":326,"column":4},"end":{"line":326,"column":31}},"143":{"start":{"line":327,"column":4},"end":{"line":327,"column":29}},"144":{"start":{"line":330,"column":0},"end":{"line":335,"column":2}},"145":{"start":{"line":331,"column":4},"end":{"line":334,"column":44}},"146":{"start":{"line":337,"column":0},"end":{"line":347,"column":1}},"147":{"start":{"line":338,"column":4},"end":{"line":338,"column":18}},"148":{"start":{"line":339,"column":4},"end":{"line":339,"column":19}},"149":{"start":{"line":340,"column":4},"end":{"line":340,"column":22}},"150":{"start":{"line":341,"column":4},"end":{"line":341,"column":22}},"151":{"start":{"line":343,"column":4},"end":{"line":343,"column":29}},"152":{"start":{"line":344,"column":4},"end":{"line":344,"column":31}},"153":{"start":{"line":345,"column":4},"end":{"line":345,"column":29}},"154":{"start":{"line":346,"column":4},"end":{"line":346,"column":21}},"155":{"start":{"line":349,"column":0},"end":{"line":355,"column":2}},"156":{"start":{"line":350,"column":4},"end":{"line":354,"column":36}},"157":{"start":{"line":357,"column":0},"end":{"line":367,"column":1}},"158":{"start":{"line":358,"column":4},"end":{"line":358,"column":18}},"159":{"start":{"line":359,"column":4},"end":{"line":359,"column":19}},"160":{"start":{"line":360,"column":4},"end":{"line":360,"column":22}},"161":{"start":{"line":361,"column":4},"end":{"line":361,"column":22}},"162":{"start":{"line":363,"column":4},"end":{"line":363,"column":29}},"163":{"start":{"line":364,"column":4},"end":{"line":364,"column":31}},"164":{"start":{"line":365,"column":4},"end":{"line":365,"column":29}},"165":{"start":{"line":366,"column":4},"end":{"line":366,"column":21}},"166":{"start":{"line":369,"column":0},"end":{"line":375,"column":2}},"167":{"start":{"line":370,"column":4},"end":{"line":374,"column":36}},"168":{"start":{"line":377,"column":0},"end":{"line":386,"column":1}},"169":{"start":{"line":378,"column":4},"end":{"line":378,"column":20}},"170":{"start":{"line":379,"column":4},"end":{"line":379,"column":21}},"171":{"start":{"line":380,"column":4},"end":{"line":380,"column":24}},"172":{"start":{"line":381,"column":4},"end":{"line":381,"column":24}},"173":{"start":{"line":383,"column":4},"end":{"line":383,"column":29}},"174":{"start":{"line":384,"column":4},"end":{"line":384,"column":31}},"175":{"start":{"line":385,"column":4},"end":{"line":385,"column":29}},"176":{"start":{"line":388,"column":0},"end":{"line":393,"column":2}},"177":{"start":{"line":389,"column":4},"end":{"line":392,"column":44}},"178":{"start":{"line":395,"column":0},"end":{"line":403,"column":1}},"179":{"start":{"line":396,"column":4},"end":{"line":396,"column":20}},"180":{"start":{"line":397,"column":4},"end":{"line":397,"column":21}},"181":{"start":{"line":398,"column":4},"end":{"line":398,"column":24}},"182":{"start":{"line":399,"column":4},"end":{"line":399,"column":24}},"183":{"start":{"line":401,"column":4},"end":{"line":401,"column":29}},"184":{"start":{"line":402,"column":4},"end":{"line":402,"column":37}},"185":{"start":{"line":405,"column":0},"end":{"line":408,"column":2}},"186":{"start":{"line":406,"column":4},"end":{"line":407,"column":62}},"187":{"start":{"line":410,"column":0},"end":{"line":419,"column":1}},"188":{"start":{"line":411,"column":4},"end":{"line":411,"column":20}},"189":{"start":{"line":412,"column":4},"end":{"line":412,"column":21}},"190":{"start":{"line":413,"column":4},"end":{"line":413,"column":24}},"191":{"start":{"line":414,"column":4},"end":{"line":414,"column":24}},"192":{"start":{"line":416,"column":4},"end":{"line":416,"column":29}},"193":{"start":{"line":417,"column":4},"end":{"line":417,"column":31}},"194":{"start":{"line":418,"column":4},"end":{"line":418,"column":29}},"195":{"start":{"line":421,"column":0},"end":{"line":426,"column":2}},"196":{"start":{"line":422,"column":4},"end":{"line":425,"column":44}},"197":{"start":{"line":428,"column":0},"end":{"line":437,"column":1}},"198":{"start":{"line":429,"column":4},"end":{"line":429,"column":20}},"199":{"start":{"line":430,"column":4},"end":{"line":430,"column":21}},"200":{"start":{"line":431,"column":4},"end":{"line":431,"column":24}},"201":{"start":{"line":432,"column":4},"end":{"line":432,"column":24}},"202":{"start":{"line":434,"column":4},"end":{"line":434,"column":37}},"203":{"start":{"line":435,"column":4},"end":{"line":435,"column":22}},"204":{"start":{"line":436,"column":4},"end":{"line":436,"column":35}},"205":{"start":{"line":439,"column":0},"end":{"line":444,"column":2}},"206":{"start":{"line":440,"column":4},"end":{"line":443,"column":50}},"207":{"start":{"line":446,"column":0},"end":{"line":454,"column":1}},"208":{"start":{"line":447,"column":4},"end":{"line":447,"column":20}},"209":{"start":{"line":448,"column":4},"end":{"line":448,"column":21}},"210":{"start":{"line":449,"column":4},"end":{"line":449,"column":24}},"211":{"start":{"line":450,"column":4},"end":{"line":450,"column":24}},"212":{"start":{"line":452,"column":4},"end":{"line":452,"column":29}},"213":{"start":{"line":453,"column":4},"end":{"line":453,"column":29}},"214":{"start":{"line":456,"column":0},"end":{"line":459,"column":2}},"215":{"start":{"line":457,"column":4},"end":{"line":458,"column":62}},"216":{"start":{"line":461,"column":0},"end":{"line":470,"column":1}},"217":{"start":{"line":462,"column":4},"end":{"line":462,"column":20}},"218":{"start":{"line":463,"column":4},"end":{"line":463,"column":21}},"219":{"start":{"line":464,"column":4},"end":{"line":464,"column":24}},"220":{"start":{"line":465,"column":4},"end":{"line":465,"column":24}},"221":{"start":{"line":467,"column":4},"end":{"line":467,"column":37}},"222":{"start":{"line":468,"column":4},"end":{"line":468,"column":22}},"223":{"start":{"line":469,"column":4},"end":{"line":469,"column":35}},"224":{"start":{"line":472,"column":0},"end":{"line":477,"column":2}},"225":{"start":{"line":473,"column":4},"end":{"line":476,"column":50}},"226":{"start":{"line":479,"column":0},"end":{"line":486,"column":1}},"227":{"start":{"line":480,"column":4},"end":{"line":480,"column":20}},"228":{"start":{"line":481,"column":4},"end":{"line":481,"column":21}},"229":{"start":{"line":482,"column":4},"end":{"line":482,"column":24}},"230":{"start":{"line":483,"column":4},"end":{"line":483,"column":24}},"231":{"start":{"line":485,"column":4},"end":{"line":485,"column":37}},"232":{"start":{"line":488,"column":0},"end":{"line":491,"column":2}},"233":{"start":{"line":489,"column":4},"end":{"line":490,"column":55}},"234":{"start":{"line":493,"column":0},"end":{"line":500,"column":1}},"235":{"start":{"line":494,"column":4},"end":{"line":494,"column":20}},"236":{"start":{"line":495,"column":4},"end":{"line":495,"column":21}},"237":{"start":{"line":496,"column":4},"end":{"line":496,"column":24}},"238":{"start":{"line":497,"column":4},"end":{"line":497,"column":24}},"239":{"start":{"line":499,"column":4},"end":{"line":499,"column":29}},"240":{"start":{"line":502,"column":0},"end":{"line":505,"column":2}},"241":{"start":{"line":503,"column":4},"end":{"line":504,"column":45}},"242":{"start":{"line":507,"column":0},"end":{"line":512,"column":1}},"243":{"start":{"line":508,"column":4},"end":{"line":508,"column":20}},"244":{"start":{"line":509,"column":4},"end":{"line":509,"column":21}},"245":{"start":{"line":510,"column":4},"end":{"line":510,"column":24}},"246":{"start":{"line":511,"column":4},"end":{"line":511,"column":24}},"247":{"start":{"line":514,"column":0},"end":{"line":516,"column":2}},"248":{"start":{"line":515,"column":4},"end":{"line":515,"column":18}},"249":{"start":{"line":518,"column":0},"end":{"line":525,"column":1}},"250":{"start":{"line":519,"column":4},"end":{"line":519,"column":20}},"251":{"start":{"line":520,"column":4},"end":{"line":520,"column":21}},"252":{"start":{"line":521,"column":4},"end":{"line":521,"column":24}},"253":{"start":{"line":522,"column":4},"end":{"line":522,"column":24}},"254":{"start":{"line":524,"column":4},"end":{"line":524,"column":37}},"255":{"start":{"line":527,"column":0},"end":{"line":530,"column":2}},"256":{"start":{"line":528,"column":4},"end":{"line":529,"column":62}},"257":{"start":{"line":532,"column":0},"end":{"line":540,"column":1}},"258":{"start":{"line":533,"column":4},"end":{"line":533,"column":20}},"259":{"start":{"line":534,"column":4},"end":{"line":534,"column":21}},"260":{"start":{"line":535,"column":4},"end":{"line":535,"column":24}},"261":{"start":{"line":536,"column":4},"end":{"line":536,"column":24}},"262":{"start":{"line":538,"column":4},"end":{"line":538,"column":29}},"263":{"start":{"line":539,"column":4},"end":{"line":539,"column":37}},"264":{"start":{"line":542,"column":0},"end":{"line":545,"column":2}},"265":{"start":{"line":543,"column":4},"end":{"line":544,"column":62}},"266":{"start":{"line":547,"column":0},"end":{"line":555,"column":1}},"267":{"start":{"line":548,"column":4},"end":{"line":548,"column":20}},"268":{"start":{"line":549,"column":4},"end":{"line":549,"column":21}},"269":{"start":{"line":550,"column":4},"end":{"line":550,"column":24}},"270":{"start":{"line":551,"column":4},"end":{"line":551,"column":24}},"271":{"start":{"line":553,"column":4},"end":{"line":553,"column":29}},"272":{"start":{"line":554,"column":4},"end":{"line":554,"column":37}},"273":{"start":{"line":557,"column":0},"end":{"line":560,"column":2}},"274":{"start":{"line":558,"column":4},"end":{"line":559,"column":62}},"275":{"start":{"line":562,"column":0},"end":{"line":570,"column":1}},"276":{"start":{"line":563,"column":4},"end":{"line":563,"column":20}},"277":{"start":{"line":564,"column":4},"end":{"line":564,"column":21}},"278":{"start":{"line":565,"column":4},"end":{"line":565,"column":24}},"279":{"start":{"line":566,"column":4},"end":{"line":566,"column":24}},"280":{"start":{"line":568,"column":4},"end":{"line":568,"column":29}},"281":{"start":{"line":569,"column":4},"end":{"line":569,"column":37}},"282":{"start":{"line":572,"column":0},"end":{"line":575,"column":2}},"283":{"start":{"line":573,"column":4},"end":{"line":574,"column":62}},"284":{"start":{"line":577,"column":0},"end":{"line":585,"column":1}},"285":{"start":{"line":578,"column":4},"end":{"line":578,"column":20}},"286":{"start":{"line":579,"column":4},"end":{"line":579,"column":21}},"287":{"start":{"line":580,"column":4},"end":{"line":580,"column":24}},"288":{"start":{"line":581,"column":4},"end":{"line":581,"column":24}},"289":{"start":{"line":583,"column":4},"end":{"line":583,"column":29}},"290":{"start":{"line":584,"column":4},"end":{"line":584,"column":37}},"291":{"start":{"line":587,"column":0},"end":{"line":590,"column":2}},"292":{"start":{"line":588,"column":4},"end":{"line":589,"column":62}},"293":{"start":{"line":592,"column":0},"end":{"line":599,"column":1}},"294":{"start":{"line":593,"column":4},"end":{"line":593,"column":20}},"295":{"start":{"line":594,"column":4},"end":{"line":594,"column":21}},"296":{"start":{"line":595,"column":4},"end":{"line":595,"column":24}},"297":{"start":{"line":596,"column":4},"end":{"line":596,"column":24}},"298":{"start":{"line":598,"column":4},"end":{"line":598,"column":29}},"299":{"start":{"line":601,"column":0},"end":{"line":604,"column":2}},"300":{"start":{"line":602,"column":4},"end":{"line":603,"column":53}},"301":{"start":{"line":606,"column":0},"end":{"line":614,"column":1}},"302":{"start":{"line":607,"column":4},"end":{"line":607,"column":20}},"303":{"start":{"line":608,"column":4},"end":{"line":608,"column":21}},"304":{"start":{"line":609,"column":4},"end":{"line":609,"column":24}},"305":{"start":{"line":610,"column":4},"end":{"line":610,"column":24}},"306":{"start":{"line":612,"column":4},"end":{"line":612,"column":37}},"307":{"start":{"line":613,"column":4},"end":{"line":613,"column":21}},"308":{"start":{"line":616,"column":0},"end":{"line":620,"column":2}},"309":{"start":{"line":617,"column":4},"end":{"line":619,"column":36}},"310":{"start":{"line":622,"column":0},"end":{"line":631,"column":1}},"311":{"start":{"line":623,"column":4},"end":{"line":623,"column":20}},"312":{"start":{"line":624,"column":4},"end":{"line":624,"column":21}},"313":{"start":{"line":625,"column":4},"end":{"line":625,"column":24}},"314":{"start":{"line":626,"column":4},"end":{"line":626,"column":24}},"315":{"start":{"line":628,"column":4},"end":{"line":628,"column":29}},"316":{"start":{"line":629,"column":4},"end":{"line":629,"column":37}},"317":{"start":{"line":630,"column":4},"end":{"line":630,"column":25}},"318":{"start":{"line":633,"column":0},"end":{"line":637,"column":2}},"319":{"start":{"line":634,"column":4},"end":{"line":636,"column":40}},"320":{"start":{"line":639,"column":0},"end":{"line":644,"column":1}},"321":{"start":{"line":640,"column":4},"end":{"line":640,"column":20}},"322":{"start":{"line":641,"column":4},"end":{"line":641,"column":21}},"323":{"start":{"line":642,"column":4},"end":{"line":642,"column":24}},"324":{"start":{"line":643,"column":4},"end":{"line":643,"column":24}},"325":{"start":{"line":646,"column":0},"end":{"line":648,"column":2}},"326":{"start":{"line":647,"column":4},"end":{"line":647,"column":18}},"327":{"start":{"line":650,"column":0},"end":{"line":659,"column":1}},"328":{"start":{"line":651,"column":4},"end":{"line":651,"column":18}},"329":{"start":{"line":652,"column":4},"end":{"line":652,"column":19}},"330":{"start":{"line":653,"column":4},"end":{"line":653,"column":22}},"331":{"start":{"line":654,"column":4},"end":{"line":654,"column":22}},"332":{"start":{"line":656,"column":4},"end":{"line":656,"column":37}},"333":{"start":{"line":657,"column":4},"end":{"line":657,"column":33}},"334":{"start":{"line":658,"column":4},"end":{"line":658,"column":29}},"335":{"start":{"line":661,"column":0},"end":{"line":666,"column":2}},"336":{"start":{"line":662,"column":4},"end":{"line":665,"column":52}},"337":{"start":{"line":668,"column":0},"end":{"line":679,"column":1}},"338":{"start":{"line":669,"column":4},"end":{"line":669,"column":18}},"339":{"start":{"line":670,"column":4},"end":{"line":670,"column":19}},"340":{"start":{"line":671,"column":4},"end":{"line":671,"column":22}},"341":{"start":{"line":672,"column":4},"end":{"line":672,"column":22}},"342":{"start":{"line":674,"column":4},"end":{"line":674,"column":29}},"343":{"start":{"line":675,"column":4},"end":{"line":675,"column":29}},"344":{"start":{"line":677,"column":4},"end":{"line":677,"column":28}},"345":{"start":{"line":678,"column":4},"end":{"line":678,"column":19}},"346":{"start":{"line":681,"column":0},"end":{"line":688,"column":2}},"347":{"start":{"line":683,"column":4},"end":{"line":686,"column":5}},"348":{"start":{"line":684,"column":8},"end":{"line":684,"column":71}},"349":{"start":{"line":685,"column":8},"end":{"line":685,"column":36}},"350":{"start":{"line":687,"column":4},"end":{"line":687,"column":21}}},"branchMap":{"1":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":26},"end":{"line":71,"column":28}},{"start":{"line":71,"column":32},"end":{"line":71,"column":34}}]},"2":{"line":665,"type":"cond-expr","locations":[{"start":{"line":665,"column":25},"end":{"line":665,"column":35}},{"start":{"line":665,"column":38},"end":{"line":665,"column":50}}]},"3":{"line":683,"type":"if","locations":[{"start":{"line":683,"column":4},"end":{"line":683,"column":4}},{"start":{"line":683,"column":4},"end":{"line":683,"column":4}}]},"4":{"line":683,"type":"binary-expr","locations":[{"start":{"line":683,"column":8},"end":{"line":683,"column":18}},{"start":{"line":683,"column":22},"end":{"line":683,"column":51}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var BatchStatsd = require('./lib/statsd.js');","var clean = BatchStatsd.clean;","var cleanHostPort = BatchStatsd.cleanHostPort;","","module.exports = {","    InboundCallsRecvdTags: InboundCallsRecvdTags,","    OutboundCallsSuccessTags: OutboundCallsSuccessTags,","    OutboundCallsLatencyTags: OutboundCallsLatencyTags,","    OutboundCallsSentTags: OutboundCallsSentTags,","    OutboundCallsAppErrorsTags: OutboundCallsAppErrorsTags,","    OutboundCallsPerAttemptLatencyTags: OutboundCallsPerAttemptLatencyTags,","    OutboundCallsPerAttemptAppErrorsTags: OutboundCallsPerAttemptAppErrorsTags,","    OutboundCallsSystemErrorsTags: OutboundCallsSystemErrorsTags,","    OutboundCallsOperationalErrorsTags: OutboundCallsOperationalErrorsTags,","    OutboundCallsPerAttemptOperationalErrorsTags: OutboundCallsPerAttemptOperationalErrorsTags,","    OutboundCallsRetriesTags: OutboundCallsRetriesTags,","    InboundCallsLatencyTags: InboundCallsLatencyTags,","    InboundCallsSuccessTags: InboundCallsSuccessTags,","    InboundCallsAppErrorsTags: InboundCallsAppErrorsTags,","    InboundCallsSystemErrorsTags: InboundCallsSystemErrorsTags,","    InboundRequestSizeTags: InboundRequestSizeTags,","    ConnectionsBytesRcvdTags: ConnectionsBytesRcvdTags,","    InboundResponseSizeTags: InboundResponseSizeTags,","    OutboundRequestSizeTags: OutboundRequestSizeTags,","    ConnectionsBytesSentTags: ConnectionsBytesSentTags,","    OutboundResponseSizeTags: OutboundResponseSizeTags,","    RateLimiterServiceTags: RateLimiterServiceTags,","    RateLimiterEdgeTags: RateLimiterEdgeTags,","    RateLimiterEmptyTags: RateLimiterEmptyTags,","    InboundProtocolErrorsTags: InboundProtocolErrorsTags,","    ConnectionsActiveTags: ConnectionsActiveTags,","    ConnectionsInitiatedTags: ConnectionsInitiatedTags,","    ConnectionsConnectErrorsTags: ConnectionsConnectErrorsTags,","    ConnectionsAcceptedTags: ConnectionsAcceptedTags,","    ConnectionsAcceptErrorsTags: ConnectionsAcceptErrorsTags,","    ConnectionsErrorsTags: ConnectionsErrorsTags,","    ConnectionsClosedTags: ConnectionsClosedTags,","    RelayLatencyTags: RelayLatencyTags,","    HTTPHanlderBuildLatencyTags: HTTPHanlderBuildLatencyTags,","    ObjectPoolTags: ObjectPoolTags","};","","function InboundCallsRecvdTags(cn, serviceName, endpoint) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.callingService = cn || '';","    this.service = serviceName;","    this.endpoint = endpoint;","}","","InboundCallsRecvdTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint');","};","","function OutboundCallsAppErrorsTags(serviceName, cn, endpoint, type) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.type = type;","}","","OutboundCallsAppErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type');","};","","function OutboundCallsSuccessTags(serviceName, cn, endpoint) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","}","","OutboundCallsSuccessTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint');","};","","function OutboundCallsPerAttemptAppErrorsTags(","    serviceName, cn, endpoint, type, retryCount",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.type = type;","    this.retryCount = retryCount;","}","","OutboundCallsPerAttemptAppErrorsTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type') + '.' +","        this.retryCount;","};","","function OutboundCallsSystemErrorsTags(","    serviceName, cn, endpoint, type, retryCount",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.type = type;","    this.retryCount = retryCount;","}","","OutboundCallsSystemErrorsTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type');","};","","function OutboundCallsOperationalErrorsTags(","    serviceName, cn, endpoint, type",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.type = type;","}","","OutboundCallsOperationalErrorsTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type');","};","","function OutboundCallsPerAttemptOperationalErrorsTags(","    serviceName, cn, endpoint, type, retryCount",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.type = type;","    this.retryCount = retryCount;","}","","OutboundCallsPerAttemptOperationalErrorsTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type') + '.' +","        this.retryCount;","};","","function OutboundCallsRetriesTags(","    serviceName, cn, endpoint, retryCount",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.retryCount = retryCount;","}","","OutboundCallsRetriesTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        this.retryCount;","};","","function OutboundCallsPerAttemptLatencyTags(","    serviceName, cn, endpoint, remoteAddr, retryCount",") {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","    this.peer = remoteAddr;","    this.retryCount = retryCount;","}","","OutboundCallsPerAttemptLatencyTags.prototype.toStatKey =","function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint') + '.' +","        this.retryCount;","};","","function OutboundCallsLatencyTags(serviceName, cn, endpoint) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","}","","OutboundCallsLatencyTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint');","};","","function OutboundCallsSentTags(serviceName, cn, endpoint) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","}","","OutboundCallsSentTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint');","};","","function InboundCallsLatencyTags(cn, serviceName, endpoint) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","}","","InboundCallsLatencyTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint');","};","","function InboundCallsSuccessTags(cn, serviceName, endpoint) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","}","","InboundCallsSuccessTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint');","};","","function InboundCallsAppErrorsTags(cn, serviceName, endpoint, type) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","    this.type = type;","}","","InboundCallsAppErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type');","};","","function InboundCallsSystemErrorsTags(cn, serviceName, endpoint, type) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","    this.type = type;","}","","InboundCallsSystemErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint') + '.' +","        clean(this.type, 'no-type');","};","","function InboundRequestSizeTags(cn, serviceName, endpoint) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","}","","InboundRequestSizeTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint');","};","","function ConnectionsBytesRcvdTags(hostPort, peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","}","","ConnectionsBytesRcvdTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function InboundResponseSizeTags(cn, serviceName, endpoint) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.callingService = cn;","    this.service = serviceName;","    this.endpoint = endpoint;","}","","InboundResponseSizeTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callingService, 'no-calling-service') + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.endpoint, 'no-endpoint');","};","","function OutboundRequestSizeTags(serviceName, cn, endpoint) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","}","","OutboundRequestSizeTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint');","};","","function ConnectionsBytesSentTags(hostPort, peer) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peer;","}","","ConnectionsBytesSentTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function OutboundResponseSizeTags(serviceName, cn, endpoint) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.targetService = serviceName;","    this.service = cn;","    this.targetEndpoint = endpoint;","}","","OutboundResponseSizeTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.service, 'no-service') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        clean(this.targetEndpoint, 'no-endpoint');","};","","function RateLimiterServiceTags(serviceName) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.targetService = serviceName;","}","","RateLimiterServiceTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.targetService, 'no-target-service');","};","","function RateLimiterEdgeTags(edgeName) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.edgeName = edgeName;","}","","RateLimiterEdgeTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.edgeName, 'no-edge-name');","};","","function RateLimiterEmptyTags() {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","}","","RateLimiterEmptyTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix;","};","","function InboundProtocolErrorsTags(peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.peerHostPort = peerHostPort;","}","","InboundProtocolErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function ConnectionsActiveTags(hostPort, peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","}","","ConnectionsActiveTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function ConnectionsInitiatedTags(hostPort, peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","}","","ConnectionsInitiatedTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function ConnectionsConnectErrorsTags(hostPort, peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","}","","ConnectionsConnectErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function ConnectionsAcceptedTags(hostPort, peerHostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","}","","ConnectionsAcceptedTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port');","};","","function ConnectionsAcceptErrorsTags(hostPort) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","}","","ConnectionsAcceptErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.hostPort, 'no-host-port');","};","","function ConnectionsErrorsTags(peerHostPort, type) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.peerHostPort = peerHostPort;","    this.type = type;","}","","ConnectionsErrorsTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port') + '.' +","        clean(this.type, 'no-type');","};","","function ConnectionsClosedTags(hostPort, peerHostPort, reason) {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","","    this.hostPort = hostPort;","    this.peerHostPort = peerHostPort;","    this.reason = reason;","}","","ConnectionsClosedTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        cleanHostPort(this.peerHostPort, 'no-peer-host-port') + '.' +","        clean(this.reason, 'no-reason');","};","","function RelayLatencyTags() {","    this.app = null;","    this.host = null;","    this.cluster = null;","    this.version = null;","}","","RelayLatencyTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix;","};","","function HTTPHanlderBuildLatencyTags(serviceName, callerName, streamed) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.targetService = serviceName;","    this.callerName = callerName;","    this.streamed = streamed;","}","","HTTPHanlderBuildLatencyTags.prototype.toStatKey = function toStatKey(prefix) {","    return prefix + '.' +","        clean(this.callerName, 'no-caller-name') + '.' +","        clean(this.targetService, 'no-target-service') + '.' +","        (this.streamed ? 'streamed' : 'unstreamed');","};","","function ObjectPoolTags(poolName, statType) {","    this.app = '';","    this.host = '';","    this.cluster = '';","    this.version = '';","","    this.poolName = poolName;","    this.statType = statType;","","    this._cachedPrefix = '';","    this._key = '';","}","","ObjectPoolTags.prototype.toStatKey = function toStatKey(prefix) {","    // prefix should never change but we store it in _cachedPrefix just in case","    if (!this._key || prefix !== this._cachedPrefix) {","        this._key = prefix + '.' + this.poolName + '.' + this.statType;","        this._cachedPrefix = prefix;","    }","    return this._key;","};",""],"l":{"23":1,"24":1,"25":1,"27":1,"65":1,"66":0,"67":0,"68":0,"69":0,"71":0,"72":0,"73":0,"76":1,"77":0,"83":1,"84":0,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"92":0,"95":1,"96":0,"103":1,"104":0,"105":0,"106":0,"107":0,"109":0,"110":0,"111":0,"114":1,"115":0,"121":1,"124":0,"125":0,"126":0,"127":0,"129":0,"130":0,"131":0,"132":0,"133":0,"136":1,"138":0,"146":1,"149":0,"150":0,"151":0,"152":0,"154":0,"155":0,"156":0,"157":0,"158":0,"161":1,"163":0,"170":1,"173":0,"174":0,"175":0,"176":0,"178":0,"179":0,"180":0,"181":0,"184":1,"186":0,"193":1,"196":0,"197":0,"198":0,"199":0,"201":0,"202":0,"203":0,"204":0,"205":0,"208":1,"210":0,"218":1,"221":0,"222":0,"223":0,"224":0,"226":0,"227":0,"228":0,"229":0,"232":1,"234":0,"241":1,"244":0,"245":0,"246":0,"247":0,"249":0,"250":0,"251":0,"252":0,"253":0,"256":1,"258":0,"265":1,"266":0,"267":0,"268":0,"269":0,"271":0,"272":0,"273":0,"276":1,"277":0,"283":1,"284":0,"285":0,"286":0,"287":0,"289":0,"290":0,"291":0,"294":1,"295":0,"301":1,"302":0,"303":0,"304":0,"305":0,"307":0,"308":0,"309":0,"312":1,"313":0,"319":1,"320":0,"321":0,"322":0,"323":0,"325":0,"326":0,"327":0,"330":1,"331":0,"337":1,"338":0,"339":0,"340":0,"341":0,"343":0,"344":0,"345":0,"346":0,"349":1,"350":0,"357":1,"358":0,"359":0,"360":0,"361":0,"363":0,"364":0,"365":0,"366":0,"369":1,"370":0,"377":1,"378":0,"379":0,"380":0,"381":0,"383":0,"384":0,"385":0,"388":1,"389":0,"395":1,"396":0,"397":0,"398":0,"399":0,"401":0,"402":0,"405":1,"406":0,"410":1,"411":0,"412":0,"413":0,"414":0,"416":0,"417":0,"418":0,"421":1,"422":0,"428":1,"429":0,"430":0,"431":0,"432":0,"434":0,"435":0,"436":0,"439":1,"440":0,"446":1,"447":0,"448":0,"449":0,"450":0,"452":0,"453":0,"456":1,"457":0,"461":1,"462":0,"463":0,"464":0,"465":0,"467":0,"468":0,"469":0,"472":1,"473":0,"479":1,"480":0,"481":0,"482":0,"483":0,"485":0,"488":1,"489":0,"493":1,"494":0,"495":0,"496":0,"497":0,"499":0,"502":1,"503":0,"507":1,"508":0,"509":0,"510":0,"511":0,"514":1,"515":0,"518":1,"519":0,"520":0,"521":0,"522":0,"524":0,"527":1,"528":0,"532":1,"533":0,"534":0,"535":0,"536":0,"538":0,"539":0,"542":1,"543":0,"547":1,"548":0,"549":0,"550":0,"551":0,"553":0,"554":0,"557":1,"558":0,"562":1,"563":0,"564":0,"565":0,"566":0,"568":0,"569":0,"572":1,"573":0,"577":1,"578":0,"579":0,"580":0,"581":0,"583":0,"584":0,"587":1,"588":0,"592":1,"593":0,"594":0,"595":0,"596":0,"598":0,"601":1,"602":0,"606":1,"607":0,"608":0,"609":0,"610":0,"612":0,"613":0,"616":1,"617":0,"622":1,"623":0,"624":0,"625":0,"626":0,"628":0,"629":0,"630":0,"633":1,"634":0,"639":1,"640":0,"641":0,"642":0,"643":0,"646":1,"647":0,"650":1,"651":0,"652":0,"653":0,"654":0,"656":0,"657":0,"658":0,"661":1,"662":0,"668":1,"669":6,"670":6,"671":6,"672":6,"674":6,"675":6,"677":6,"678":6,"681":1,"683":0,"684":0,"685":0,"687":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/statsd.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/statsd.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":1,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"BatchStatsd","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":30}}},"2":{"name":"boundFlushStats","line":53,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":31}}},"3":{"name":"pushStat","line":58,"loc":{"start":{"line":58,"column":33},"end":{"line":58,"column":76}}},"4":{"name":"handleStat","line":73,"loc":{"start":{"line":73,"column":35},"end":{"line":73,"column":61}}},"5":{"name":"flushStats","line":96,"loc":{"start":{"line":96,"column":35},"end":{"line":96,"column":57}}},"6":{"name":"destroy","line":113,"loc":{"start":{"line":113,"column":32},"end":{"line":113,"column":51}}},"7":{"name":"BaseStat","line":123,"loc":{"start":{"line":123,"column":0},"end":{"line":123,"column":43}}},"8":{"name":"StatTags","line":132,"loc":{"start":{"line":132,"column":0},"end":{"line":132,"column":24}}},"9":{"name":"clean","line":156,"loc":{"start":{"line":156,"column":0},"end":{"line":156,"column":27}}},"10":{"name":"cleanHostPort","line":186,"loc":{"start":{"line":186,"column":0},"end":{"line":186,"column":35}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":27}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":26}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":42}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":32}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":23}},"7":{"start":{"line":33,"column":0},"end":{"line":56,"column":1}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":54}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":54}},"10":{"start":{"line":39,"column":4},"end":{"line":40,"column":45}},"11":{"start":{"line":42,"column":4},"end":{"line":42,"column":33}},"12":{"start":{"line":43,"column":4},"end":{"line":43,"column":33}},"13":{"start":{"line":44,"column":4},"end":{"line":44,"column":33}},"14":{"start":{"line":45,"column":4},"end":{"line":45,"column":51}},"15":{"start":{"line":47,"column":4},"end":{"line":47,"column":25}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":31}},"17":{"start":{"line":49,"column":4},"end":{"line":49,"column":43}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":20}},"19":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"20":{"start":{"line":54,"column":8},"end":{"line":54,"column":26}},"21":{"start":{"line":58,"column":0},"end":{"line":71,"column":2}},"22":{"start":{"line":59,"column":4},"end":{"line":59,"column":20}},"23":{"start":{"line":61,"column":4},"end":{"line":61,"column":33}},"24":{"start":{"line":62,"column":4},"end":{"line":62,"column":35}},"25":{"start":{"line":63,"column":4},"end":{"line":63,"column":41}},"26":{"start":{"line":64,"column":4},"end":{"line":64,"column":41}},"27":{"start":{"line":66,"column":4},"end":{"line":66,"column":53}},"28":{"start":{"line":68,"column":4},"end":{"line":68,"column":31}},"29":{"start":{"line":70,"column":4},"end":{"line":70,"column":16}},"30":{"start":{"line":73,"column":0},"end":{"line":94,"column":2}},"31":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}},"32":{"start":{"line":76,"column":4},"end":{"line":78,"column":5}},"33":{"start":{"line":77,"column":8},"end":{"line":77,"column":15}},"34":{"start":{"line":80,"column":4},"end":{"line":80,"column":45}},"35":{"start":{"line":82,"column":4},"end":{"line":93,"column":5}},"36":{"start":{"line":83,"column":8},"end":{"line":83,"column":47}},"37":{"start":{"line":84,"column":11},"end":{"line":93,"column":5}},"38":{"start":{"line":85,"column":8},"end":{"line":85,"column":43}},"39":{"start":{"line":86,"column":11},"end":{"line":93,"column":5}},"40":{"start":{"line":87,"column":8},"end":{"line":87,"column":44}},"41":{"start":{"line":89,"column":8},"end":{"line":92,"column":11}},"42":{"start":{"line":96,"column":0},"end":{"line":111,"column":2}},"43":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"44":{"start":{"line":99,"column":4},"end":{"line":101,"column":5}},"45":{"start":{"line":100,"column":8},"end":{"line":100,"column":54}},"46":{"start":{"line":103,"column":4},"end":{"line":105,"column":5}},"47":{"start":{"line":104,"column":8},"end":{"line":104,"column":44}},"48":{"start":{"line":106,"column":4},"end":{"line":106,"column":31}},"49":{"start":{"line":108,"column":4},"end":{"line":110,"column":6}},"50":{"start":{"line":113,"column":0},"end":{"line":119,"column":2}},"51":{"start":{"line":114,"column":4},"end":{"line":114,"column":20}},"52":{"start":{"line":116,"column":4},"end":{"line":116,"column":22}},"53":{"start":{"line":118,"column":4},"end":{"line":118,"column":50}},"54":{"start":{"line":121,"column":0},"end":{"line":121,"column":29}},"55":{"start":{"line":123,"column":0},"end":{"line":130,"column":1}},"56":{"start":{"line":124,"column":4},"end":{"line":124,"column":20}},"57":{"start":{"line":126,"column":4},"end":{"line":126,"column":21}},"58":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}},"59":{"start":{"line":128,"column":4},"end":{"line":128,"column":23}},"60":{"start":{"line":129,"column":4},"end":{"line":129,"column":27}},"61":{"start":{"line":132,"column":0},"end":{"line":154,"column":1}},"62":{"start":{"line":133,"column":4},"end":{"line":133,"column":20}},"63":{"start":{"line":135,"column":4},"end":{"line":135,"column":18}},"64":{"start":{"line":136,"column":4},"end":{"line":136,"column":19}},"65":{"start":{"line":137,"column":4},"end":{"line":137,"column":22}},"66":{"start":{"line":138,"column":4},"end":{"line":138,"column":22}},"67":{"start":{"line":140,"column":4},"end":{"line":153,"column":5}},"68":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"69":{"start":{"line":142,"column":12},"end":{"line":142,"column":32}},"70":{"start":{"line":144,"column":8},"end":{"line":146,"column":9}},"71":{"start":{"line":145,"column":12},"end":{"line":145,"column":34}},"72":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"73":{"start":{"line":148,"column":12},"end":{"line":148,"column":40}},"74":{"start":{"line":150,"column":8},"end":{"line":152,"column":9}},"75":{"start":{"line":151,"column":12},"end":{"line":151,"column":40}},"76":{"start":{"line":156,"column":0},"end":{"line":184,"column":1}},"77":{"start":{"line":157,"column":4},"end":{"line":157,"column":13}},"78":{"start":{"line":159,"column":4},"end":{"line":161,"column":5}},"79":{"start":{"line":160,"column":8},"end":{"line":160,"column":21}},"80":{"start":{"line":163,"column":4},"end":{"line":163,"column":37}},"81":{"start":{"line":164,"column":4},"end":{"line":166,"column":5}},"82":{"start":{"line":165,"column":8},"end":{"line":165,"column":46}},"83":{"start":{"line":168,"column":4},"end":{"line":181,"column":5}},"84":{"start":{"line":169,"column":8},"end":{"line":169,"column":26}},"85":{"start":{"line":171,"column":8},"end":{"line":180,"column":9}},"86":{"start":{"line":177,"column":12},"end":{"line":177,"column":26}},"87":{"start":{"line":179,"column":12},"end":{"line":179,"column":27}},"88":{"start":{"line":183,"column":4},"end":{"line":183,"column":25}},"89":{"start":{"line":186,"column":0},"end":{"line":214,"column":1}},"90":{"start":{"line":187,"column":4},"end":{"line":187,"column":13}},"91":{"start":{"line":189,"column":4},"end":{"line":191,"column":5}},"92":{"start":{"line":190,"column":8},"end":{"line":190,"column":21}},"93":{"start":{"line":193,"column":4},"end":{"line":193,"column":34}},"94":{"start":{"line":195,"column":4},"end":{"line":195,"column":33}},"95":{"start":{"line":196,"column":4},"end":{"line":198,"column":5}},"96":{"start":{"line":197,"column":8},"end":{"line":197,"column":42}},"97":{"start":{"line":199,"column":4},"end":{"line":211,"column":5}},"98":{"start":{"line":200,"column":8},"end":{"line":200,"column":26}},"99":{"start":{"line":202,"column":8},"end":{"line":210,"column":9}},"100":{"start":{"line":207,"column":12},"end":{"line":207,"column":26}},"101":{"start":{"line":209,"column":12},"end":{"line":209,"column":27}},"102":{"start":{"line":213,"column":4},"end":{"line":213,"column":25}}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":11},"end":{"line":39,"column":28}},{"start":{"line":39,"column":32},"end":{"line":39,"column":52}}]},"2":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"3":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"4":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":11},"end":{"line":84,"column":11}},{"start":{"line":84,"column":11},"end":{"line":84,"column":11}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":11},"end":{"line":86,"column":11}},{"start":{"line":86,"column":11},"end":{"line":86,"column":11}}]},"6":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"7":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":20}},{"start":{"line":129,"column":24},"end":{"line":129,"column":26}}]},"8":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":140,"column":4}},{"start":{"line":140,"column":4},"end":{"line":140,"column":4}}]},"9":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"10":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":144,"column":8}},{"start":{"line":144,"column":8},"end":{"line":144,"column":8}}]},"11":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"12":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":8}},{"start":{"line":150,"column":8},"end":{"line":150,"column":8}}]},"13":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"14":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":4},"end":{"line":164,"column":4}},{"start":{"line":164,"column":4},"end":{"line":164,"column":4}}]},"15":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":8},"end":{"line":171,"column":8}},{"start":{"line":171,"column":8},"end":{"line":171,"column":8}}]},"16":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":12},"end":{"line":171,"column":24}},{"start":{"line":172,"column":12},"end":{"line":172,"column":24}},{"start":{"line":173,"column":12},"end":{"line":173,"column":24}},{"start":{"line":174,"column":12},"end":{"line":174,"column":24}},{"start":{"line":175,"column":12},"end":{"line":175,"column":24}}]},"17":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":4},"end":{"line":189,"column":4}},{"start":{"line":189,"column":4},"end":{"line":189,"column":4}}]},"18":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":196,"column":4}},{"start":{"line":196,"column":4},"end":{"line":196,"column":4}}]},"19":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":8},"end":{"line":202,"column":8}},{"start":{"line":202,"column":8},"end":{"line":202,"column":8}}]},"20":{"line":202,"type":"binary-expr","locations":[{"start":{"line":202,"column":12},"end":{"line":202,"column":24}},{"start":{"line":203,"column":12},"end":{"line":203,"column":24}},{"start":{"line":204,"column":12},"end":{"line":204,"column":24}},{"start":{"line":205,"column":12},"end":{"line":205,"column":24}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","","var STAT_EMIT_PERIOD = 100;","","BatchStatsd.clean = clean;","BatchStatsd.cleanHostPort = cleanHostPort;","BatchStatsd.BaseStat = BaseStat;","","var LENGTH_ARRAYS = {};","","function BatchStatsd(options) {","    assert(options.logger, 'options.logger required');","    assert(options.timers, 'options.timers required');","","    // required: 'app'","    // optional: 'host', 'cluster', 'version'","    assert(!options.baseTags || options.baseTags.app,","        'the stats must have the \"app\" tag');","","    this.statsd = options.statsd;","    this.logger = options.logger;","    this.timers = options.timers;","    this.baseTags = new StatTags(options.baseTags);","","    this.statsQueue = [];","    this.batchStatTimer = null;","    this.boundFlushStats = boundFlushStats;","","    var self = this;","","    function boundFlushStats() {","        self.flushStats();","    }","}","","BatchStatsd.prototype.pushStat = function pushStat(name, type, value, tags) {","    var self = this;","","    tags.app = self.baseTags.app;","    tags.host = self.baseTags.host;","    tags.cluster = self.baseTags.cluster;","    tags.version = self.baseTags.version;","","    var stat = new BaseStat(name, type, value, tags);","","    self.statsQueue.push(stat);","","    return stat;","};","","BatchStatsd.prototype.handleStat = function handleStat(stat) {","    var self = this;","","    if (!self.statsd) {","        return;","    }","","    var key = stat.tags.toStatKey(stat.name);","","    if (stat.type === 'counter') {","        self.statsd.increment(key, stat.value);","    } else if (stat.type === 'gauge') {","        self.statsd.gauge(key, stat.value);","    } else if (stat.type === 'timing') {","        self.statsd.timing(key, stat.value);","    } else {","        self.logger.error('Trying to emit an invalid stat object', {","            statType: stat.type,","            statName: stat.name","        });","    }","};","","BatchStatsd.prototype.flushStats = function flushStats() {","    var self = this;","","    if (self.batchStatTimer) {","        self.timers.clearTimeout(self.batchStatTimer);","    }","","    for (var i = 0; i < self.statsQueue.length; i++) {","        self.handleStat(self.statsQueue[i]);","    }","    self.statsQueue.length = 0;","","    self.batchStatTimer = self.timers.setTimeout(","        self.boundFlushStats, STAT_EMIT_PERIOD","    );","};","","BatchStatsd.prototype.destroy = function destroy() {","    var self = this;","","    self.flushStats();","","    self.timers.clearTimeout(self.batchStatTimer);","};","","module.exports = BatchStatsd;","","function BaseStat(name, type, value, tags) {","    var self = this;","","    self.name = name;","    self.type = type;","    self.value = value;","    self.tags = tags || {};","}","","function StatTags(opts) {","    var self = this;","","    self.app = '';","    self.host = '';","    self.cluster = '';","    self.version = '';","","    if (opts) {","        if (opts.app) {","            self.app = opts.app;","        }","        if (opts.host) {","            self.host = opts.host;","        }","        if (opts.cluster) {","            self.cluster = opts.cluster;","        }","        if (opts.version) {","            self.version = opts.version;","        }","    }","}","","function clean(str, field) {","    var copy;","","    if (!str) {","        return field;","    }","","    copy = LENGTH_ARRAYS[str.length];","    if (!copy) {","        copy = LENGTH_ARRAYS[str.length] = [];","    }","","    for (var i = 0; i < str.length; i++) {","        var char = str[i];","","        if (char === ':' ||","            char === '/' ||","            char === '.' ||","            char === '{' ||","            char === '}'","        ) {","            copy[i] = '-';","        } else {","            copy[i] = char;","        }","    }","","    return copy.join('');","}","","function cleanHostPort(str, field) {","    var copy;","","    if (!str) {","        return field;","    }","","    var length = str.indexOf(':');","","    copy = LENGTH_ARRAYS[length];","    if (!copy) {","        copy = LENGTH_ARRAYS[length] = [];","    }","    for (var i = 0; i < length; i++) {","        var char = str[i];","","        if (char === '/' ||","            char === '.' ||","            char === '{' ||","            char === '}'","        ) {","            copy[i] = '-';","        } else {","            copy[i] = char;","        }","    }","","    return copy.join('');","}",""],"l":{"23":1,"25":1,"27":1,"28":1,"29":1,"31":1,"33":1,"34":0,"35":0,"39":0,"42":0,"43":0,"44":0,"45":0,"47":0,"48":0,"49":0,"51":0,"53":1,"54":0,"58":1,"59":0,"61":0,"62":0,"63":0,"64":0,"66":0,"68":0,"70":0,"73":1,"74":0,"76":0,"77":0,"80":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"96":1,"97":0,"99":0,"100":0,"103":0,"104":0,"106":0,"108":0,"113":1,"114":0,"116":0,"118":0,"121":1,"123":1,"124":0,"126":0,"127":0,"128":0,"129":0,"132":1,"133":0,"135":0,"136":0,"137":0,"138":0,"140":0,"141":0,"142":0,"144":0,"145":0,"147":0,"148":0,"150":0,"151":0,"156":1,"157":0,"159":0,"160":0,"163":0,"164":0,"165":0,"168":0,"169":0,"171":0,"177":0,"179":0,"183":0,"186":1,"187":0,"189":0,"190":0,"193":0,"195":0,"196":0,"197":0,"199":0,"200":0,"202":0,"207":0,"209":0,"213":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/retry-flags.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/retry-flags.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1},"b":{},"f":{"1":1},"fnMap":{"1":{"name":"RetryFlags","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":57}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":28}},"2":{"start":{"line":25,"column":0},"end":{"line":29,"column":1}},"3":{"start":{"line":26,"column":4},"end":{"line":26,"column":23}},"4":{"start":{"line":27,"column":4},"end":{"line":27,"column":47}},"5":{"start":{"line":28,"column":4},"end":{"line":28,"column":31}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = RetryFlags;","","function RetryFlags(never, onConnectionError, onTimeout) {","    this.never = never;","    this.onConnectionError = onConnectionError;","    this.onTimeout = onTimeout;","}",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/service-name-handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/service-name-handler.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":1,"50":0,"51":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"TChannelServiceNameHandler","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":45}}},"2":{"name":"handleLazily","line":48,"loc":{"start":{"line":48,"column":52},"end":{"line":48,"column":90}}},"3":{"name":"handleRequest","line":80,"loc":{"start":{"line":80,"column":53},"end":{"line":80,"column":91}}},"4":{"name":"handleDefault","line":103,"loc":{"start":{"line":103,"column":53},"end":{"line":103,"column":91}}},"5":{"name":"register","line":108,"loc":{"start":{"line":108,"column":48},"end":{"line":108,"column":68}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":31}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":45}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":31}},"5":{"start":{"line":29,"column":0},"end":{"line":44,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":55}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":60}},"10":{"start":{"line":37,"column":4},"end":{"line":37,"column":35}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":87}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":41}},"13":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"14":{"start":{"line":42,"column":8},"end":{"line":42,"column":92}},"15":{"start":{"line":46,"column":0},"end":{"line":46,"column":76}},"16":{"start":{"line":48,"column":0},"end":{"line":78,"column":2}},"17":{"start":{"line":49,"column":4},"end":{"line":49,"column":20}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":70}},"19":{"start":{"line":52,"column":4},"end":{"line":60,"column":5}},"20":{"start":{"line":54,"column":8},"end":{"line":56,"column":12}},"21":{"start":{"line":58,"column":8},"end":{"line":58,"column":92}},"22":{"start":{"line":59,"column":8},"end":{"line":59,"column":21}},"23":{"start":{"line":62,"column":4},"end":{"line":62,"column":32}},"24":{"start":{"line":63,"column":4},"end":{"line":69,"column":5}},"25":{"start":{"line":66,"column":8},"end":{"line":66,"column":95}},"26":{"start":{"line":67,"column":8},"end":{"line":67,"column":85}},"27":{"start":{"line":68,"column":8},"end":{"line":68,"column":21}},"28":{"start":{"line":71,"column":4},"end":{"line":71,"column":53}},"29":{"start":{"line":73,"column":4},"end":{"line":77,"column":5}},"30":{"start":{"line":74,"column":8},"end":{"line":74,"column":57}},"31":{"start":{"line":76,"column":8},"end":{"line":76,"column":21}},"32":{"start":{"line":80,"column":0},"end":{"line":101,"column":2}},"33":{"start":{"line":81,"column":4},"end":{"line":81,"column":20}},"34":{"start":{"line":83,"column":4},"end":{"line":89,"column":5}},"35":{"start":{"line":84,"column":8},"end":{"line":84,"column":40}},"36":{"start":{"line":85,"column":8},"end":{"line":88,"column":9}},"37":{"start":{"line":86,"column":12},"end":{"line":86,"column":51}},"38":{"start":{"line":87,"column":12},"end":{"line":87,"column":19}},"39":{"start":{"line":91,"column":4},"end":{"line":94,"column":5}},"40":{"start":{"line":92,"column":8},"end":{"line":92,"column":68}},"41":{"start":{"line":93,"column":8},"end":{"line":93,"column":15}},"42":{"start":{"line":95,"column":4},"end":{"line":95,"column":57}},"43":{"start":{"line":96,"column":4},"end":{"line":100,"column":5}},"44":{"start":{"line":97,"column":8},"end":{"line":97,"column":50}},"45":{"start":{"line":99,"column":8},"end":{"line":99,"column":42}},"46":{"start":{"line":103,"column":0},"end":{"line":106,"column":2}},"47":{"start":{"line":104,"column":4},"end":{"line":104,"column":75}},"48":{"start":{"line":105,"column":4},"end":{"line":105,"column":52}},"49":{"start":{"line":108,"column":0},"end":{"line":110,"column":2}},"50":{"start":{"line":109,"column":4},"end":{"line":109,"column":41}},"51":{"start":{"line":112,"column":0},"end":{"line":112,"column":44}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":18},"end":{"line":40,"column":32}},{"start":{"line":40,"column":36},"end":{"line":40,"column":40}}]},"3":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]},"4":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"5":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"6":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"7":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":12}},{"start":{"line":73,"column":16},"end":{"line":73,"column":41}}]},"8":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"9":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"10":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"11":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var errors = require('./errors');","var assert = require('assert');","var ReadResult = require('bufrw').ReadResult;","","var readRes = new ReadResult();","","function TChannelServiceNameHandler(options) {","    if (!(this instanceof TChannelServiceNameHandler)) {","        return new TChannelServiceNameHandler(options);","    }","    var self = this;","","    assert(typeof options === 'object', 'options required');","","    self.channel = options.channel;","    assert(typeof self.channel === 'object', 'expected options.tchannel to be object');","","    self.isBusy = options.isBusy || null;","    if (self.isBusy) {","        assert(typeof self.isBusy === 'function', 'expected options.isBusy to be function');","    }","}","","TChannelServiceNameHandler.prototype.type = 'tchannel.service-name-handler';","","TChannelServiceNameHandler.prototype.handleLazily = function handleLazily(conn, reqFrame) {","    var self = this;","","    var res = reqFrame.bodyRW.lazy.poolReadService(readRes, reqFrame);","    if (res.err) {","        // TODO: stat?","        self.channel.logger.warn('failed to lazy read frame serviceName', conn.extendLogInfo({","            error: res.err","        }));","        // TODO: protocol error instead?","        conn.sendLazyErrorFrameForReq(reqFrame, 'BadRequest', 'failed to read serviceName');","        return false;","    }","","    var serviceName = res.value;","    if (!serviceName) {","        // TODO: reqFrame.extendLogInfo would be nice, especially if it added","        // things like callerName and arg1","        self.channel.logger.warn('missing service name in lazy frame', conn.extendLogInfo({}));","        conn.sendLazyErrorFrameForReq(reqFrame, 'BadRequest', 'missing serviceName');","        return false;","    }","","    var chan = self.channel.subChannels[serviceName];","","    if (chan && chan.handler.handleLazily) {","        return chan.handler.handleLazily(conn, reqFrame);","    } else {","        return false;","    }","};","","TChannelServiceNameHandler.prototype.handleRequest = function handleRequest(req, buildRes) {","    var self = this;","","    if (self.isBusy) {","        var busyInfo = self.isBusy(req);","        if (busyInfo) {","            buildRes().sendError('Busy', busyInfo);","            return;","        }","    }","","    if (!req.serviceName) {","        buildRes().sendError('BadRequest', 'no service name given');","        return;","    }","    var chan = self.channel.subChannels[req.serviceName];","    if (chan) {","        chan.handler.handleRequest(req, buildRes);","    } else {","        self.handleDefault(req, buildRes);","    }","};","","TChannelServiceNameHandler.prototype.handleDefault = function handleDefault(req, buildRes) {","    var err = errors.NoServiceHandlerError({serviceName: req.serviceName});","    buildRes().sendError('BadRequest', err.message);","};","","TChannelServiceNameHandler.prototype.register = function register() {","    throw errors.TopLevelRegisterError();","};","","module.exports = TChannelServiceNameHandler;",""],"l":{"23":1,"24":1,"25":1,"27":1,"29":1,"30":0,"31":0,"33":0,"35":0,"37":0,"38":0,"40":0,"41":0,"42":0,"46":1,"48":1,"49":0,"51":0,"52":0,"54":0,"58":0,"59":0,"62":0,"63":0,"66":0,"67":0,"68":0,"71":0,"73":0,"74":0,"76":0,"80":1,"81":0,"83":0,"84":0,"85":0,"86":0,"87":0,"91":0,"92":0,"93":0,"95":0,"96":0,"97":0,"99":0,"103":1,"104":0,"105":0,"108":1,"109":0,"112":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/object_pool.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/object_pool.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":3,"8":3,"9":3,"10":3,"11":3,"12":3,"13":3,"14":3,"15":3,"16":3,"17":3,"18":3,"19":3,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":3,"29":3,"30":3,"31":0,"32":3,"33":3,"34":1,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0},"b":{"1":[3,0],"2":[3,3],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":3,"2":3,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"ObjectPool","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":29}}},"2":{"name":"setup","line":69,"loc":{"start":{"line":69,"column":19},"end":{"line":69,"column":43}}},"3":{"name":"freeThisObj","line":73,"loc":{"start":{"line":73,"column":34},"end":{"line":73,"column":57}}},"4":{"name":"alloc","line":81,"loc":{"start":{"line":81,"column":4},"end":{"line":81,"column":21}}},"5":{"name":"bootstrap","line":87,"loc":{"start":{"line":87,"column":23},"end":{"line":87,"column":51}}},"6":{"name":"unref","line":127,"loc":{"start":{"line":127,"column":19},"end":{"line":127,"column":36}}},"7":{"name":"reportStats","line":135,"loc":{"start":{"line":135,"column":25},"end":{"line":135,"column":48}}},"8":{"name":"reportStats","line":149,"loc":{"start":{"line":149,"column":35},"end":{"line":149,"column":65}}},"9":{"name":"get","line":165,"loc":{"start":{"line":165,"column":27},"end":{"line":165,"column":42}}},"10":{"name":"free","line":190,"loc":{"start":{"line":190,"column":28},"end":{"line":190,"column":48}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":28}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":28}},"5":{"start":{"line":30,"column":0},"end":{"line":59,"column":1}},"6":{"start":{"line":31,"column":4},"end":{"line":31,"column":67}},"7":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":96}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":106}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":106}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":55}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":86}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":47}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":80}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":23}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":25}},"17":{"start":{"line":47,"column":4},"end":{"line":50,"column":6}},"18":{"start":{"line":52,"column":4},"end":{"line":55,"column":6}},"19":{"start":{"line":58,"column":4},"end":{"line":58,"column":30}},"20":{"start":{"line":61,"column":0},"end":{"line":61,"column":26}},"21":{"start":{"line":62,"column":0},"end":{"line":62,"column":33}},"22":{"start":{"line":63,"column":0},"end":{"line":63,"column":25}},"23":{"start":{"line":64,"column":0},"end":{"line":64,"column":22}},"24":{"start":{"line":65,"column":0},"end":{"line":65,"column":24}},"25":{"start":{"line":66,"column":0},"end":{"line":66,"column":20}},"26":{"start":{"line":67,"column":0},"end":{"line":67,"column":25}},"27":{"start":{"line":69,"column":0},"end":{"line":85,"column":2}},"28":{"start":{"line":70,"column":4},"end":{"line":70,"column":39}},"29":{"start":{"line":71,"column":4},"end":{"line":71,"column":31}},"30":{"start":{"line":73,"column":4},"end":{"line":75,"column":6}},"31":{"start":{"line":74,"column":8},"end":{"line":74,"column":24}},"32":{"start":{"line":77,"column":4},"end":{"line":77,"column":32}},"33":{"start":{"line":79,"column":4},"end":{"line":79,"column":16}},"34":{"start":{"line":81,"column":4},"end":{"line":84,"column":5}},"35":{"start":{"line":82,"column":8},"end":{"line":82,"column":29}},"36":{"start":{"line":83,"column":8},"end":{"line":83,"column":19}},"37":{"start":{"line":87,"column":0},"end":{"line":125,"column":2}},"38":{"start":{"line":88,"column":4},"end":{"line":91,"column":5}},"39":{"start":{"line":89,"column":8},"end":{"line":89,"column":29}},"40":{"start":{"line":90,"column":8},"end":{"line":90,"column":15}},"41":{"start":{"line":93,"column":4},"end":{"line":93,"column":25}},"42":{"start":{"line":95,"column":4},"end":{"line":95,"column":67}},"43":{"start":{"line":97,"column":4},"end":{"line":101,"column":6}},"44":{"start":{"line":102,"column":4},"end":{"line":102,"column":41}},"45":{"start":{"line":104,"column":4},"end":{"line":107,"column":6}},"46":{"start":{"line":108,"column":4},"end":{"line":108,"column":55}},"47":{"start":{"line":110,"column":4},"end":{"line":114,"column":6}},"48":{"start":{"line":115,"column":4},"end":{"line":115,"column":39}},"49":{"start":{"line":117,"column":4},"end":{"line":119,"column":5}},"50":{"start":{"line":118,"column":8},"end":{"line":118,"column":41}},"51":{"start":{"line":121,"column":4},"end":{"line":124,"column":6}},"52":{"start":{"line":127,"column":0},"end":{"line":133,"column":2}},"53":{"start":{"line":128,"column":4},"end":{"line":128,"column":55}},"54":{"start":{"line":129,"column":4},"end":{"line":132,"column":5}},"55":{"start":{"line":130,"column":8},"end":{"line":130,"column":57}},"56":{"start":{"line":131,"column":8},"end":{"line":131,"column":32}},"57":{"start":{"line":135,"column":0},"end":{"line":147,"column":2}},"58":{"start":{"line":138,"column":4},"end":{"line":138,"column":10}},"59":{"start":{"line":139,"column":4},"end":{"line":141,"column":5}},"60":{"start":{"line":140,"column":8},"end":{"line":140,"column":60}},"61":{"start":{"line":143,"column":4},"end":{"line":146,"column":6}},"62":{"start":{"line":149,"column":0},"end":{"line":163,"column":2}},"63":{"start":{"line":150,"column":4},"end":{"line":155,"column":6}},"64":{"start":{"line":157,"column":4},"end":{"line":162,"column":6}},"65":{"start":{"line":165,"column":0},"end":{"line":188,"column":2}},"66":{"start":{"line":166,"column":4},"end":{"line":166,"column":13}},"67":{"start":{"line":167,"column":4},"end":{"line":167,"column":26}},"68":{"start":{"line":168,"column":4},"end":{"line":187,"column":5}},"69":{"start":{"line":169,"column":8},"end":{"line":169,"column":35}},"70":{"start":{"line":170,"column":8},"end":{"line":170,"column":80}},"71":{"start":{"line":171,"column":8},"end":{"line":171,"column":40}},"72":{"start":{"line":173,"column":8},"end":{"line":175,"column":9}},"73":{"start":{"line":174,"column":12},"end":{"line":174,"column":44}},"74":{"start":{"line":177,"column":8},"end":{"line":177,"column":20}},"75":{"start":{"line":179,"column":8},"end":{"line":179,"column":31}},"76":{"start":{"line":180,"column":8},"end":{"line":180,"column":40}},"77":{"start":{"line":182,"column":8},"end":{"line":184,"column":9}},"78":{"start":{"line":183,"column":12},"end":{"line":183,"column":44}},"79":{"start":{"line":186,"column":8},"end":{"line":186,"column":20}},"80":{"start":{"line":190,"column":0},"end":{"line":209,"column":2}},"81":{"start":{"line":191,"column":4},"end":{"line":191,"column":64}},"82":{"start":{"line":192,"column":4},"end":{"line":192,"column":35}},"83":{"start":{"line":194,"column":4},"end":{"line":194,"column":17}},"84":{"start":{"line":195,"column":4},"end":{"line":197,"column":5}},"85":{"start":{"line":196,"column":8},"end":{"line":196,"column":33}},"86":{"start":{"line":198,"column":4},"end":{"line":198,"column":26}},"87":{"start":{"line":200,"column":4},"end":{"line":200,"column":10}},"88":{"start":{"line":201,"column":4},"end":{"line":208,"column":5}},"89":{"start":{"line":202,"column":8},"end":{"line":207,"column":9}},"90":{"start":{"line":203,"column":12},"end":{"line":206,"column":13}},"91":{"start":{"line":204,"column":16},"end":{"line":204,"column":50}},"92":{"start":{"line":205,"column":16},"end":{"line":205,"column":23}}},"branchMap":{"1":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":19},"end":{"line":38,"column":34}},{"start":{"line":38,"column":38},"end":{"line":38,"column":54}}]},"2":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":28}},{"start":{"line":41,"column":32},"end":{"line":41,"column":46}}]},"3":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]},"4":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":43}},{"start":{"line":99,"column":8},"end":{"line":99,"column":58}}]},"5":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":42}},{"start":{"line":112,"column":8},"end":{"line":112,"column":55}}]},"6":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":117,"column":4}},{"start":{"line":117,"column":4},"end":{"line":117,"column":4}}]},"7":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"8":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":4},"end":{"line":168,"column":4}},{"start":{"line":168,"column":4},"end":{"line":168,"column":4}}]},"9":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":8},"end":{"line":173,"column":8}},{"start":{"line":173,"column":8},"end":{"line":173,"column":8}}]},"10":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":182,"column":8}},{"start":{"line":182,"column":8},"end":{"line":182,"column":8}}]},"11":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":4},"end":{"line":195,"column":4}},{"start":{"line":195,"column":4},"end":{"line":195,"column":4}}]},"12":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":4},"end":{"line":201,"column":4}},{"start":{"line":201,"column":4},"end":{"line":201,"column":4}}]},"13":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":12},"end":{"line":203,"column":12}},{"start":{"line":203,"column":12},"end":{"line":203,"column":12}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var stat = require('../stat-tags');","","var DEFAULT_MAX_SIZE = 1000;","","module.exports = ObjectPool;","","function ObjectPool(options) {","    assert(typeof options === 'object', 'expected options object');","","    this.Type = options.Type;","    assert(typeof this.Type === 'function', 'expected options.Type to be constructor function');","    assert(typeof this.Type.prototype.reset === 'function', 'expected options.Type to have reset method');","    assert(typeof this.Type.prototype.clear === 'function', 'expected options.Type to have clear method');","","    this.maxSize = options.maxSize || DEFAULT_MAX_SIZE;","    assert(typeof this.maxSize === 'number', 'expected options.maxSize to be number');","","    this.name = options.name || this.Type.name;","    assert(typeof this.name === 'string', 'expected options.name to be string');","","    this.freeList = [];","    this.outstanding = 0;","","    this.freeListStatTags = new stat.ObjectPoolTags(","        this.name,","        'free'","    );","","    this.outstandingStatTags = new stat.ObjectPoolTags(","        this.name,","        'outstanding'","    );","","    // only used in debug mode","    this.outstandingList = [];","}","","ObjectPool.channel = null;","ObjectPool.reportInterval = null;","ObjectPool.timers = null;","ObjectPool.pools = [];","ObjectPool.timer = null;","ObjectPool.refs = 0;","ObjectPool.debug = false;","","ObjectPool.setup = function setup(options) {","    var pool = new ObjectPool(options);","    options.Type.alloc = alloc;","","    options.Type.prototype.free = function freeThisObj() {","        pool.free(this);","    };","","    ObjectPool.pools.push(pool);","","    return pool;","","    function alloc() {","        var obj = pool.get();","        return obj;","    }","};","","ObjectPool.bootstrap = function bootstrap(options) {","    if (ObjectPool.refs >= 1) {","        ObjectPool.refs += 1;","        return;","    }","","    ObjectPool.refs += 1;","","    assert(typeof options === 'object', 'expected options object');","","    assert(","        typeof options.channel === 'object' &&","        typeof options.channel.emitFastStat === 'function',","        'expected options.channel to be TChannel instance'","    );","    ObjectPool.channel = options.channel;","","    assert(","        typeof options.reportInterval === 'number',","        'expected options.reportInterval to be number'","    );","    ObjectPool.reportInterval = options.reportInterval;","","    assert(","        typeof options.timers === 'object' &&","        typeof options.timers.setTimeout === 'function',","        'expected options.timers to be timers object'","    );","    ObjectPool.timers = options.timers;","","    if (typeof options.debug === 'boolean') {","        ObjectPool.debug = options.debug;","    }","","    ObjectPool.timer = ObjectPool.timers.setTimeout(","        ObjectPool.reportStats,","        ObjectPool.reportInterval","    );","};","","ObjectPool.unref = function unref() {","    ObjectPool.refs = Math.max(0, ObjectPool.refs - 1);","    if (ObjectPool.refs === 0) {","        ObjectPool.timers.clearTimeout(ObjectPool.timer);","        ObjectPool.timer = null;","    }","};","","ObjectPool.reportStats = function reportStats() {","    // Iterate over pools, report their current size","","    var i;","    for (i = 0; i < ObjectPool.pools.length; i++) {","        ObjectPool.pools[i].reportStats(ObjectPool.channel);","    }","","    ObjectPool.timer = ObjectPool.timers.setTimeout(","        ObjectPool.reportStats,","        ObjectPool.reportInterval","    );","};","","ObjectPool.prototype.reportStats = function reportStats(channel) {","    channel.emitFastStat(","        'tchannel.object-pool',","        'gauge',","        this.freeList.length,","        this.freeListStatTags","    );","","    channel.emitFastStat(","        'tchannel.object-pool',","        'gauge',","        this.outstanding,","        this.outstandingStatTags","    );","};","","ObjectPool.prototype.get = function get() {","    var inst;","    this.outstanding += 1;","    if (this.freeList.length) {","        inst = this.freeList.pop();","        assert(inst._objectPoolIsFreed, 'instance retreived from pool is free');","        inst._objectPoolIsFreed = false;","","        if (ObjectPool.debug) {","            this.outstandingList.push(inst);","        }","","        return inst;","    } else {","        inst = new this.Type();","        inst._objectPoolIsFreed = false;","","        if (ObjectPool.debug) {","            this.outstandingList.push(inst);","        }","","        return inst;","    }","};","","ObjectPool.prototype.free = function free(inst) {","    assert(!inst._objectPoolIsFreed, 'object pool double free');","    inst._objectPoolIsFreed = true;","","    inst.clear();","    if (this.outstanding <= this.maxSize) {","        this.freeList.push(inst);","    }","    this.outstanding -= 1;","","    var i;","    if (ObjectPool.debug) {","        for (i = 0; i < this.outstandingList.length; i++) {","            if (this.outstandingList[i] === inst) {","                this.outstandingList.splice(i, 1);","                return;","            }","        }","    }","};",""],"l":{"23":1,"24":1,"26":1,"28":1,"30":1,"31":3,"33":3,"34":3,"35":3,"36":3,"38":3,"39":3,"41":3,"42":3,"44":3,"45":3,"47":3,"52":3,"58":3,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"69":1,"70":3,"71":3,"73":3,"74":0,"77":3,"79":3,"81":1,"82":0,"83":0,"87":1,"88":0,"89":0,"90":0,"93":0,"95":0,"97":0,"102":0,"104":0,"108":0,"110":0,"115":0,"117":0,"118":0,"121":0,"127":1,"128":0,"129":0,"130":0,"131":0,"135":1,"138":0,"139":0,"140":0,"143":0,"149":1,"150":0,"157":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"173":0,"174":0,"177":0,"179":0,"180":0,"182":0,"183":0,"186":0,"190":1,"191":0,"192":0,"194":0,"195":0,"196":0,"198":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/retry_ratio_tracker.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/retry_ratio_tracker.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"RetryRatioTracker","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":36}}},"2":{"name":"isWarmedUp","line":41,"loc":{"start":{"line":41,"column":41},"end":{"line":41,"column":63}}},"3":{"name":"currentRetryRatio","line":45,"loc":{"start":{"line":45,"column":48},"end":{"line":45,"column":77}}},"4":{"name":"incrementRequest","line":52,"loc":{"start":{"line":52,"column":47},"end":{"line":52,"column":82}}},"5":{"name":"destroy","line":60,"loc":{"start":{"line":60,"column":38},"end":{"line":60,"column":57}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":35}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":44}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":46}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":50}},"5":{"start":{"line":30,"column":0},"end":{"line":39,"column":1}},"6":{"start":{"line":31,"column":4},"end":{"line":35,"column":6}},"7":{"start":{"line":37,"column":4},"end":{"line":37,"column":61}},"8":{"start":{"line":38,"column":4},"end":{"line":38,"column":63}},"9":{"start":{"line":41,"column":0},"end":{"line":43,"column":2}},"10":{"start":{"line":42,"column":4},"end":{"line":42,"column":86}},"11":{"start":{"line":45,"column":0},"end":{"line":50,"column":2}},"12":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"13":{"start":{"line":47,"column":8},"end":{"line":47,"column":17}},"14":{"start":{"line":49,"column":4},"end":{"line":49,"column":75}},"15":{"start":{"line":52,"column":0},"end":{"line":58,"column":2}},"16":{"start":{"line":53,"column":4},"end":{"line":57,"column":5}},"17":{"start":{"line":54,"column":8},"end":{"line":54,"column":42}},"18":{"start":{"line":56,"column":8},"end":{"line":56,"column":44}},"19":{"start":{"line":60,"column":0},"end":{"line":63,"column":2}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":36}},"21":{"start":{"line":62,"column":4},"end":{"line":62,"column":38}}},"branchMap":{"1":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":22},"end":{"line":32,"column":49}},{"start":{"line":32,"column":53},"end":{"line":32,"column":82}}]},"2":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":20},"end":{"line":33,"column":51}},{"start":{"line":33,"column":55},"end":{"line":33,"column":90}}]},"3":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":11},"end":{"line":42,"column":47}},{"start":{"line":42,"column":51},"end":{"line":42,"column":85}}]},"4":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"5":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = RetryRatioTracker;","","var RateCounter = require('./rate_counter');","","var DEFAULT_RATE_COUNTER_INTERVAL = 30 * 1000;","var DEFAULT_RATE_COUNTER_NUM_OF_BUCKETS = 30 * 20;","","function RetryRatioTracker(options) {","    var rateCounterOpts = {","        rateInterval: options.rateCounterInterval || DEFAULT_RATE_COUNTER_INTERVAL,","        numBuckets: options.rateCounterNumOfBuckets || DEFAULT_RATE_COUNTER_NUM_OF_BUCKETS,","        timers: options.timers","    };","","    this.retryRateCounter = new RateCounter(rateCounterOpts);","    this.requestRateCounter = new RateCounter(rateCounterOpts); // counts non-retry requests only","}","","RetryRatioTracker.prototype.isWarmedUp = function isWarmedUp() {","    return this.requestRateCounter.isWarmedUp() && this.retryRateCounter.isWarmedUp();","};","","RetryRatioTracker.prototype.currentRetryRatio = function currentRetryRatio() {","    if (this.requestRateCounter.rate === 0) {","        return 0;","    }","    return 1.0 * this.retryRateCounter.rate / this.requestRateCounter.rate;","};","","RetryRatioTracker.prototype.incrementRequest = function incrementRequest(isRetry) {","    if (isRetry) {","        this.retryRateCounter.increment();","    } else {","        this.requestRateCounter.increment();","    }","};","","RetryRatioTracker.prototype.destroy = function destroy() {","    this.retryRateCounter.destroy();","    this.requestRateCounter.destroy();","};",""],"l":{"23":1,"25":1,"27":1,"28":1,"30":1,"31":0,"37":0,"38":0,"41":1,"42":0,"45":1,"46":0,"47":0,"49":0,"52":1,"53":0,"54":0,"56":0,"60":1,"61":0,"62":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/rate_counter.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/rate_counter.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":1,"23":0,"24":0,"25":1,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"RateCounter","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":30}}},"2":{"name":"_refreshAndScheduleNext","line":47,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":39}}},"3":{"name":"isWarmedUp","line":53,"loc":{"start":{"line":53,"column":35},"end":{"line":53,"column":57}}},"4":{"name":"increment","line":57,"loc":{"start":{"line":57,"column":34},"end":{"line":57,"column":55}}},"5":{"name":"destory","line":62,"loc":{"start":{"line":62,"column":32},"end":{"line":62,"column":51}}},"6":{"name":"_refresh","line":67,"loc":{"start":{"line":67,"column":33},"end":{"line":67,"column":53}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":32}},"5":{"start":{"line":30,"column":0},"end":{"line":51,"column":1}},"6":{"start":{"line":31,"column":4},"end":{"line":31,"column":54}},"7":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"8":{"start":{"line":35,"column":4},"end":{"line":35,"column":19}},"9":{"start":{"line":36,"column":4},"end":{"line":36,"column":18}},"10":{"start":{"line":37,"column":4},"end":{"line":37,"column":71}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":22}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":24}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":70}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":65}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":30}},"17":{"start":{"line":47,"column":4},"end":{"line":50,"column":5}},"18":{"start":{"line":48,"column":8},"end":{"line":48,"column":24}},"19":{"start":{"line":49,"column":8},"end":{"line":49,"column":98}},"20":{"start":{"line":53,"column":0},"end":{"line":55,"column":2}},"21":{"start":{"line":54,"column":4},"end":{"line":54,"column":53}},"22":{"start":{"line":57,"column":0},"end":{"line":60,"column":2}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":34}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":19}},"25":{"start":{"line":62,"column":0},"end":{"line":65,"column":2}},"26":{"start":{"line":63,"column":4},"end":{"line":63,"column":48}},"27":{"start":{"line":64,"column":4},"end":{"line":64,"column":29}},"28":{"start":{"line":67,"column":0},"end":{"line":78,"column":2}},"29":{"start":{"line":69,"column":4},"end":{"line":69,"column":52}},"30":{"start":{"line":70,"column":4},"end":{"line":73,"column":5}},"31":{"start":{"line":72,"column":8},"end":{"line":72,"column":40}},"32":{"start":{"line":75,"column":4},"end":{"line":75,"column":70}},"33":{"start":{"line":76,"column":4},"end":{"line":76,"column":22}},"34":{"start":{"line":77,"column":4},"end":{"line":77,"column":33}}},"branchMap":{"1":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":24},"end":{"line":37,"column":44}},{"start":{"line":37,"column":48},"end":{"line":37,"column":70}}]},"2":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":24},"end":{"line":42,"column":44}},{"start":{"line":42,"column":48},"end":{"line":42,"column":69}}]},"3":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = RateCounter;","","var assert = require('assert');","","var DEFAULT_RATE_INTERVAL = 1000;","var DEFAULT_NUM_OF_BUCKETS = 20;","","function RateCounter(options) {","    assert(options.timers, 'options.timers required');","","    var self = this;","","    this.index = 0;","    this.rate = 0; // requests per interval","    this.numOfBuckets = options.numOfBuckets || DEFAULT_NUM_OF_BUCKETS;","    this.buckets = [];","    this.buckets[0] = 0;","","    this.timers = options.timers;","    this.rateInterval = options.rateInterval || DEFAULT_RATE_INTERVAL;","    this.refreshInterval = this.rateInterval / this.numOfBuckets;","","    _refreshAndScheduleNext();","","    function _refreshAndScheduleNext() {","        self._refresh();","        self.refreshTimer = self.timers.setTimeout(_refreshAndScheduleNext, self.refreshInterval);","    }","}","","RateCounter.prototype.isWarmedUp = function isWarmedUp() {","    return this.buckets.length === this.numOfBuckets;","};","","RateCounter.prototype.increment = function increment() {","    this.buckets[this.index] += 1;","    this.rate += 1;","};","","RateCounter.prototype.destroy = function destory() {","    this.timers.clearTimeout(this.refreshTimer);","    this.refreshTimer = null;","};","","RateCounter.prototype._refresh = function _refresh() {","    // update the sliding window","    var next = (this.index + 1) % this.numOfBuckets;","    if (this.buckets[next]) {","        // offset the bucket being moved out","        this.rate -= this.buckets[next];","    }","","    assert(this.rate >= 0, 'rate should always be larger equal to 0');","    this.index = next;","    this.buckets[this.index] = 0;","};",""],"l":{"23":1,"25":1,"27":1,"28":1,"30":1,"31":0,"33":0,"35":0,"36":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"45":0,"47":1,"48":0,"49":0,"53":1,"54":0,"57":1,"58":0,"59":0,"62":1,"63":0,"64":0,"67":1,"69":0,"70":0,"72":0,"75":0,"76":0,"77":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/thrift.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/thrift.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":1,"144":0,"145":1,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":1,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":0,"216":0,"217":0,"218":1,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":1,"226":0,"227":0,"228":0,"229":0,"230":1,"231":0,"232":1,"233":0,"234":0,"235":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0,0],"55":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"fnMap":{"1":{"name":"TChannelAsThrift","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":32}}},"2":{"name":"registerHealthAsync","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":31}}},"3":{"name":"onFile","line":94,"loc":{"start":{"line":94,"column":4},"end":{"line":94,"column":39}}},"4":{"name":"parseException","line":107,"loc":{"start":{"line":107,"column":0},"end":{"line":107,"column":47}}},"5":{"name":"onArgs","line":112,"loc":{"start":{"line":112,"column":4},"end":{"line":112,"column":37}}},"6":{"name":"parseArgs","line":120,"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":35}}},"7":{"name":"registerHealthSync","line":139,"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":30}}},"8":{"name":"registerMeta","line":147,"loc":{"start":{"line":147,"column":0},"end":{"line":147,"column":34}}},"9":{"name":"request","line":158,"loc":{"start":{"line":158,"column":37},"end":{"line":158,"column":66}}},"10":{"name":"wrappedShouldRetry","line":180,"loc":{"start":{"line":180,"column":4},"end":{"line":180,"column":56}}},"11":{"name":"onException","line":183,"loc":{"start":{"line":183,"column":8},"end":{"line":183,"column":40}}},"12":{"name":"waitForIdentified","line":199,"loc":{"start":{"line":199,"column":0},"end":{"line":199,"column":40}}},"13":{"name":"register","line":208,"loc":{"start":{"line":208,"column":0},"end":{"line":208,"column":53}}},"14":{"name":"handleThriftRequest","line":231,"loc":{"start":{"line":231,"column":4},"end":{"line":231,"column":71}}},"15":{"name":"handleThriftResponse","line":254,"loc":{"start":{"line":254,"column":8},"end":{"line":254,"column":54}}},"16":{"name":"send","line":303,"loc":{"start":{"line":303,"column":0},"end":{"line":303,"column":61}}},"17":{"name":"handleResponse","line":333,"loc":{"start":{"line":333,"column":4},"end":{"line":333,"column":50}}},"18":{"name":"getEndpoints","line":357,"loc":{"start":{"line":357,"column":49},"end":{"line":357,"column":73}}},"19":{"name":"parse","line":362,"loc":{"start":{"line":362,"column":36},"end":{"line":362,"column":57}}},"20":{"name":"stringify","line":441,"loc":{"start":{"line":441,"column":40},"end":{"line":441,"column":65}}},"21":{"name":"TChannelThriftResponse","line":508,"loc":{"start":{"line":508,"column":0},"end":{"line":508,"column":55}}},"22":{"name":"TChannelThriftRequest","line":519,"loc":{"start":{"line":519,"column":0},"end":{"line":519,"column":40}}},"23":{"name":"send","line":528,"loc":{"start":{"line":528,"column":0},"end":{"line":528,"column":46}}},"24":{"name":"health","line":539,"loc":{"start":{"line":539,"column":0},"end":{"line":539,"column":59}}},"25":{"name":"thriftIDL","line":554,"loc":{"start":{"line":554,"column":0},"end":{"line":554,"column":62}}},"26":{"name":"onlyKey","line":562,"loc":{"start":{"line":562,"column":0},"end":{"line":562,"column":25}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":27}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":35}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":30}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":37}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":50}},"10":{"start":{"line":34,"column":0},"end":{"line":34,"column":57}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":34}},"12":{"start":{"line":38,"column":0},"end":{"line":86,"column":1}},"13":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"14":{"start":{"line":40,"column":8},"end":{"line":40,"column":42}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":20}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":37}},"17":{"start":{"line":46,"column":4},"end":{"line":46,"column":63}},"18":{"start":{"line":48,"column":4},"end":{"line":58,"column":7}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":41}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":45}},"21":{"start":{"line":62,"column":4},"end":{"line":62,"column":57}},"22":{"start":{"line":64,"column":4},"end":{"line":64,"column":30}},"23":{"start":{"line":66,"column":4},"end":{"line":66,"column":41}},"24":{"start":{"line":67,"column":4},"end":{"line":67,"column":69}},"25":{"start":{"line":69,"column":4},"end":{"line":69,"column":57}},"26":{"start":{"line":70,"column":4},"end":{"line":71,"column":32}},"27":{"start":{"line":73,"column":4},"end":{"line":73,"column":32}},"28":{"start":{"line":75,"column":4},"end":{"line":75,"column":36}},"29":{"start":{"line":76,"column":4},"end":{"line":77,"column":40}},"30":{"start":{"line":78,"column":4},"end":{"line":79,"column":51}},"31":{"start":{"line":81,"column":4},"end":{"line":82,"column":34}},"32":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"33":{"start":{"line":84,"column":8},"end":{"line":84,"column":35}},"34":{"start":{"line":88,"column":0},"end":{"line":104,"column":2}},"35":{"start":{"line":90,"column":4},"end":{"line":90,"column":20}},"36":{"start":{"line":92,"column":4},"end":{"line":92,"column":48}},"37":{"start":{"line":94,"column":4},"end":{"line":103,"column":5}},"38":{"start":{"line":95,"column":8},"end":{"line":100,"column":9}},"39":{"start":{"line":96,"column":12},"end":{"line":98,"column":15}},"40":{"start":{"line":99,"column":12},"end":{"line":99,"column":19}},"41":{"start":{"line":102,"column":8},"end":{"line":102,"column":40}},"42":{"start":{"line":106,"column":0},"end":{"line":136,"column":2}},"43":{"start":{"line":108,"column":4},"end":{"line":108,"column":20}},"44":{"start":{"line":110,"column":4},"end":{"line":110,"column":31}},"45":{"start":{"line":112,"column":4},"end":{"line":118,"column":5}},"46":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"47":{"start":{"line":114,"column":12},"end":{"line":114,"column":27}},"48":{"start":{"line":117,"column":8},"end":{"line":117,"column":30}},"49":{"start":{"line":120,"column":4},"end":{"line":135,"column":5}},"50":{"start":{"line":121,"column":8},"end":{"line":127,"column":11}},"51":{"start":{"line":128,"column":8},"end":{"line":130,"column":9}},"52":{"start":{"line":129,"column":12},"end":{"line":129,"column":39}},"53":{"start":{"line":132,"column":8},"end":{"line":132,"column":34}},"54":{"start":{"line":133,"column":8},"end":{"line":133,"column":59}},"55":{"start":{"line":134,"column":8},"end":{"line":134,"column":23}},"56":{"start":{"line":138,"column":0},"end":{"line":144,"column":2}},"57":{"start":{"line":140,"column":4},"end":{"line":140,"column":20}},"58":{"start":{"line":142,"column":4},"end":{"line":142,"column":63}},"59":{"start":{"line":143,"column":4},"end":{"line":143,"column":36}},"60":{"start":{"line":146,"column":0},"end":{"line":156,"column":2}},"61":{"start":{"line":148,"column":4},"end":{"line":148,"column":20}},"62":{"start":{"line":150,"column":4},"end":{"line":152,"column":7}},"63":{"start":{"line":154,"column":4},"end":{"line":154,"column":72}},"64":{"start":{"line":155,"column":4},"end":{"line":155,"column":78}},"65":{"start":{"line":158,"column":0},"end":{"line":196,"column":2}},"66":{"start":{"line":159,"column":4},"end":{"line":159,"column":20}},"67":{"start":{"line":161,"column":4},"end":{"line":161,"column":69}},"68":{"start":{"line":162,"column":4},"end":{"line":165,"column":58}},"69":{"start":{"line":167,"column":4},"end":{"line":167,"column":62}},"70":{"start":{"line":168,"column":4},"end":{"line":170,"column":5}},"71":{"start":{"line":169,"column":8},"end":{"line":169,"column":63}},"72":{"start":{"line":172,"column":4},"end":{"line":176,"column":7}},"73":{"start":{"line":178,"column":4},"end":{"line":178,"column":15}},"74":{"start":{"line":180,"column":4},"end":{"line":195,"column":5}},"75":{"start":{"line":181,"column":8},"end":{"line":181,"column":52}},"76":{"start":{"line":183,"column":8},"end":{"line":194,"column":9}},"77":{"start":{"line":184,"column":12},"end":{"line":186,"column":13}},"78":{"start":{"line":185,"column":16},"end":{"line":185,"column":33}},"79":{"start":{"line":188,"column":12},"end":{"line":188,"column":62}},"80":{"start":{"line":189,"column":12},"end":{"line":193,"column":13}},"81":{"start":{"line":190,"column":16},"end":{"line":190,"column":24}},"82":{"start":{"line":192,"column":16},"end":{"line":192,"column":23}},"83":{"start":{"line":198,"column":0},"end":{"line":205,"column":2}},"84":{"start":{"line":200,"column":4},"end":{"line":200,"column":20}},"85":{"start":{"line":202,"column":4},"end":{"line":202,"column":72}},"86":{"start":{"line":204,"column":4},"end":{"line":204,"column":55}},"87":{"start":{"line":207,"column":0},"end":{"line":300,"column":2}},"88":{"start":{"line":209,"column":4},"end":{"line":209,"column":20}},"89":{"start":{"line":212,"column":4},"end":{"line":221,"column":5}},"90":{"start":{"line":213,"column":8},"end":{"line":213,"column":74}},"91":{"start":{"line":214,"column":8},"end":{"line":214,"column":65}},"92":{"start":{"line":216,"column":8},"end":{"line":216,"column":22}},"93":{"start":{"line":217,"column":8},"end":{"line":217,"column":22}},"94":{"start":{"line":218,"column":8},"end":{"line":218,"column":20}},"95":{"start":{"line":219,"column":8},"end":{"line":219,"column":23}},"96":{"start":{"line":220,"column":8},"end":{"line":220,"column":31}},"97":{"start":{"line":223,"column":4},"end":{"line":225,"column":5}},"98":{"start":{"line":224,"column":8},"end":{"line":224,"column":37}},"99":{"start":{"line":227,"column":4},"end":{"line":227,"column":68}},"100":{"start":{"line":229,"column":4},"end":{"line":229,"column":48}},"101":{"start":{"line":231,"column":4},"end":{"line":299,"column":5}},"102":{"start":{"line":232,"column":8},"end":{"line":235,"column":9}},"103":{"start":{"line":233,"column":12},"end":{"line":234,"column":64}},"104":{"start":{"line":238,"column":8},"end":{"line":244,"column":11}},"105":{"start":{"line":246,"column":8},"end":{"line":249,"column":9}},"106":{"start":{"line":247,"column":12},"end":{"line":248,"column":71}},"107":{"start":{"line":251,"column":8},"end":{"line":251,"column":34}},"108":{"start":{"line":252,"column":8},"end":{"line":252,"column":64}},"109":{"start":{"line":254,"column":8},"end":{"line":298,"column":9}},"110":{"start":{"line":255,"column":12},"end":{"line":262,"column":13}},"111":{"start":{"line":256,"column":16},"end":{"line":259,"column":19}},"112":{"start":{"line":261,"column":16},"end":{"line":261,"column":76}},"113":{"start":{"line":264,"column":12},"end":{"line":274,"column":13}},"114":{"start":{"line":265,"column":16},"end":{"line":266,"column":60}},"115":{"start":{"line":267,"column":16},"end":{"line":268,"column":55}},"116":{"start":{"line":270,"column":16},"end":{"line":273,"column":17}},"117":{"start":{"line":271,"column":20},"end":{"line":272,"column":69}},"118":{"start":{"line":276,"column":12},"end":{"line":284,"column":15}},"119":{"start":{"line":286,"column":12},"end":{"line":289,"column":13}},"120":{"start":{"line":287,"column":16},"end":{"line":288,"column":50}},"121":{"start":{"line":291,"column":12},"end":{"line":297,"column":13}},"122":{"start":{"line":292,"column":16},"end":{"line":292,"column":42}},"123":{"start":{"line":293,"column":16},"end":{"line":296,"column":18}},"124":{"start":{"line":302,"column":0},"end":{"line":355,"column":2}},"125":{"start":{"line":304,"column":4},"end":{"line":304,"column":20}},"126":{"start":{"line":306,"column":4},"end":{"line":306,"column":56}},"127":{"start":{"line":308,"column":4},"end":{"line":308,"column":67}},"128":{"start":{"line":309,"column":4},"end":{"line":311,"column":44}},"129":{"start":{"line":313,"column":4},"end":{"line":318,"column":7}},"130":{"start":{"line":319,"column":4},"end":{"line":321,"column":5}},"131":{"start":{"line":320,"column":8},"end":{"line":320,"column":45}},"132":{"start":{"line":324,"column":4},"end":{"line":324,"column":34}},"133":{"start":{"line":326,"column":4},"end":{"line":331,"column":6}},"134":{"start":{"line":333,"column":4},"end":{"line":354,"column":5}},"135":{"start":{"line":334,"column":8},"end":{"line":336,"column":9}},"136":{"start":{"line":335,"column":12},"end":{"line":335,"column":33}},"137":{"start":{"line":338,"column":8},"end":{"line":344,"column":11}},"138":{"start":{"line":346,"column":8},"end":{"line":348,"column":9}},"139":{"start":{"line":347,"column":12},"end":{"line":347,"column":45}},"140":{"start":{"line":350,"column":8},"end":{"line":350,"column":34}},"141":{"start":{"line":351,"column":8},"end":{"line":351,"column":54}},"142":{"start":{"line":353,"column":8},"end":{"line":353,"column":29}},"143":{"start":{"line":357,"column":0},"end":{"line":359,"column":2}},"144":{"start":{"line":358,"column":4},"end":{"line":358,"column":43}},"145":{"start":{"line":362,"column":0},"end":{"line":438,"column":2}},"146":{"start":{"line":363,"column":4},"end":{"line":363,"column":20}},"147":{"start":{"line":364,"column":4},"end":{"line":364,"column":38}},"148":{"start":{"line":366,"column":4},"end":{"line":366,"column":43}},"149":{"start":{"line":367,"column":4},"end":{"line":367,"column":42}},"150":{"start":{"line":369,"column":4},"end":{"line":369,"column":47}},"151":{"start":{"line":370,"column":4},"end":{"line":370,"column":46}},"152":{"start":{"line":372,"column":4},"end":{"line":372,"column":16}},"153":{"start":{"line":373,"column":4},"end":{"line":396,"column":5}},"154":{"start":{"line":374,"column":8},"end":{"line":374,"column":41}},"155":{"start":{"line":376,"column":8},"end":{"line":376,"column":62}},"156":{"start":{"line":377,"column":8},"end":{"line":395,"column":9}},"157":{"start":{"line":378,"column":12},"end":{"line":383,"column":15}},"158":{"start":{"line":385,"column":12},"end":{"line":392,"column":13}},"159":{"start":{"line":386,"column":16},"end":{"line":391,"column":19}},"160":{"start":{"line":394,"column":12},"end":{"line":394,"column":44}},"161":{"start":{"line":398,"column":4},"end":{"line":398,"column":16}},"162":{"start":{"line":399,"column":4},"end":{"line":399,"column":17}},"163":{"start":{"line":400,"column":4},"end":{"line":411,"column":5}},"164":{"start":{"line":401,"column":8},"end":{"line":401,"column":55}},"165":{"start":{"line":402,"column":11},"end":{"line":411,"column":5}},"166":{"start":{"line":403,"column":8},"end":{"line":403,"column":57}},"167":{"start":{"line":405,"column":8},"end":{"line":410,"column":9}},"168":{"start":{"line":406,"column":12},"end":{"line":406,"column":50}},"169":{"start":{"line":407,"column":15},"end":{"line":410,"column":9}},"170":{"start":{"line":408,"column":12},"end":{"line":408,"column":46}},"171":{"start":{"line":409,"column":12},"end":{"line":409,"column":52}},"172":{"start":{"line":413,"column":4},"end":{"line":431,"column":5}},"173":{"start":{"line":414,"column":8},"end":{"line":419,"column":11}},"174":{"start":{"line":421,"column":8},"end":{"line":428,"column":9}},"175":{"start":{"line":422,"column":12},"end":{"line":427,"column":15}},"176":{"start":{"line":430,"column":8},"end":{"line":430,"column":40}},"177":{"start":{"line":433,"column":4},"end":{"line":437,"column":7}},"178":{"start":{"line":441,"column":0},"end":{"line":506,"column":2}},"179":{"start":{"line":442,"column":4},"end":{"line":442,"column":20}},"180":{"start":{"line":443,"column":4},"end":{"line":443,"column":38}},"181":{"start":{"line":445,"column":4},"end":{"line":445,"column":43}},"182":{"start":{"line":446,"column":4},"end":{"line":446,"column":42}},"183":{"start":{"line":448,"column":4},"end":{"line":448,"column":47}},"184":{"start":{"line":449,"column":4},"end":{"line":449,"column":46}},"185":{"start":{"line":451,"column":4},"end":{"line":451,"column":32}},"186":{"start":{"line":453,"column":4},"end":{"line":453,"column":60}},"187":{"start":{"line":454,"column":4},"end":{"line":469,"column":5}},"188":{"start":{"line":455,"column":8},"end":{"line":460,"column":11}},"189":{"start":{"line":462,"column":8},"end":{"line":467,"column":11}},"190":{"start":{"line":468,"column":8},"end":{"line":468,"column":44}},"191":{"start":{"line":471,"column":4},"end":{"line":471,"column":16}},"192":{"start":{"line":472,"column":4},"end":{"line":483,"column":5}},"193":{"start":{"line":473,"column":8},"end":{"line":473,"column":53}},"194":{"start":{"line":474,"column":11},"end":{"line":483,"column":5}},"195":{"start":{"line":475,"column":8},"end":{"line":475,"column":30}},"196":{"start":{"line":476,"column":8},"end":{"line":480,"column":9}},"197":{"start":{"line":477,"column":12},"end":{"line":477,"column":52}},"198":{"start":{"line":479,"column":12},"end":{"line":479,"column":45}},"199":{"start":{"line":482,"column":8},"end":{"line":482,"column":58}},"200":{"start":{"line":485,"column":4},"end":{"line":500,"column":5}},"201":{"start":{"line":486,"column":8},"end":{"line":491,"column":11}},"202":{"start":{"line":493,"column":8},"end":{"line":498,"column":11}},"203":{"start":{"line":499,"column":8},"end":{"line":499,"column":44}},"204":{"start":{"line":502,"column":4},"end":{"line":505,"column":7}},"205":{"start":{"line":508,"column":0},"end":{"line":517,"column":1}},"206":{"start":{"line":509,"column":4},"end":{"line":509,"column":20}},"207":{"start":{"line":511,"column":4},"end":{"line":511,"column":26}},"208":{"start":{"line":512,"column":4},"end":{"line":512,"column":33}},"209":{"start":{"line":513,"column":4},"end":{"line":513,"column":21}},"210":{"start":{"line":514,"column":4},"end":{"line":514,"column":36}},"211":{"start":{"line":515,"column":4},"end":{"line":515,"column":33}},"212":{"start":{"line":516,"column":4},"end":{"line":516,"column":41}},"213":{"start":{"line":519,"column":0},"end":{"line":525,"column":1}},"214":{"start":{"line":520,"column":4},"end":{"line":520,"column":20}},"215":{"start":{"line":522,"column":4},"end":{"line":522,"column":35}},"216":{"start":{"line":523,"column":4},"end":{"line":523,"column":41}},"217":{"start":{"line":524,"column":4},"end":{"line":524,"column":49}},"218":{"start":{"line":527,"column":0},"end":{"line":537,"column":2}},"219":{"start":{"line":529,"column":4},"end":{"line":529,"column":20}},"220":{"start":{"line":531,"column":4},"end":{"line":531,"column":55}},"221":{"start":{"line":532,"column":4},"end":{"line":532,"column":23}},"222":{"start":{"line":533,"column":4},"end":{"line":535,"column":5}},"223":{"start":{"line":534,"column":8},"end":{"line":534,"column":70}},"224":{"start":{"line":536,"column":4},"end":{"line":536,"column":72}},"225":{"start":{"line":539,"column":0},"end":{"line":552,"column":1}},"226":{"start":{"line":540,"column":4},"end":{"line":540,"column":44}},"227":{"start":{"line":541,"column":4},"end":{"line":541,"column":82}},"228":{"start":{"line":542,"column":4},"end":{"line":543,"column":68}},"229":{"start":{"line":545,"column":4},"end":{"line":551,"column":7}},"230":{"start":{"line":554,"column":0},"end":{"line":559,"column":1}},"231":{"start":{"line":555,"column":4},"end":{"line":558,"column":7}},"232":{"start":{"line":562,"column":0},"end":{"line":568,"column":1}},"233":{"start":{"line":563,"column":4},"end":{"line":567,"column":5}},"234":{"start":{"line":564,"column":8},"end":{"line":566,"column":9}},"235":{"start":{"line":565,"column":12},"end":{"line":565,"column":24}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"2":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":16},"end":{"line":48,"column":33}},{"start":{"line":48,"column":37},"end":{"line":58,"column":6}}]},"3":{"line":66,"type":"binary-expr","locations":[{"start":{"line":66,"column":19},"end":{"line":66,"column":23}},{"start":{"line":66,"column":27},"end":{"line":66,"column":40}}]},"4":{"line":67,"type":"cond-expr","locations":[{"start":{"line":67,"column":52},"end":{"line":67,"column":60}},{"start":{"line":67,"column":63},"end":{"line":67,"column":68}}]},"5":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":27},"end":{"line":69,"column":31}},{"start":{"line":69,"column":35},"end":{"line":69,"column":56}}]},"6":{"line":70,"type":"cond-expr","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":24}},{"start":{"line":71,"column":27},"end":{"line":71,"column":31}}]},"7":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":11},"end":{"line":76,"column":26}},{"start":{"line":76,"column":30},"end":{"line":76,"column":66}}]},"8":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":11},"end":{"line":78,"column":26}},{"start":{"line":78,"column":30},"end":{"line":78,"column":42}}]},"9":{"line":81,"type":"cond-expr","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":26}},{"start":{"line":82,"column":29},"end":{"line":82,"column":33}}]},"10":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"11":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":8},"end":{"line":83,"column":22}},{"start":{"line":83,"column":26},"end":{"line":83,"column":39}}]},"12":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]},"13":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"14":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"15":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":11},"end":{"line":162,"column":21}},{"start":{"line":163,"column":8},"end":{"line":163,"column":46}},{"start":{"line":164,"column":8},"end":{"line":164,"column":55}}]},"16":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":4},"end":{"line":168,"column":4}},{"start":{"line":168,"column":4},"end":{"line":168,"column":4}}]},"17":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":12},"end":{"line":184,"column":12}},{"start":{"line":184,"column":12},"end":{"line":184,"column":12}}]},"18":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":12},"end":{"line":189,"column":12}},{"start":{"line":189,"column":12},"end":{"line":189,"column":12}}]},"19":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":4},"end":{"line":212,"column":4}},{"start":{"line":212,"column":4},"end":{"line":212,"column":4}}]},"20":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":4}},{"start":{"line":223,"column":4},"end":{"line":223,"column":4}}]},"21":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":8}},{"start":{"line":232,"column":8},"end":{"line":232,"column":8}}]},"22":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"23":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":12},"end":{"line":255,"column":12}},{"start":{"line":255,"column":12},"end":{"line":255,"column":12}}]},"24":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":12},"end":{"line":264,"column":12}},{"start":{"line":264,"column":12},"end":{"line":264,"column":12}}]},"25":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":16},"end":{"line":270,"column":16}},{"start":{"line":270,"column":16},"end":{"line":270,"column":16}}]},"26":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":12},"end":{"line":286,"column":12}},{"start":{"line":286,"column":12},"end":{"line":286,"column":12}}]},"27":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":12},"end":{"line":291,"column":12}},{"start":{"line":291,"column":12},"end":{"line":291,"column":12}}]},"28":{"line":306,"type":"binary-expr","locations":[{"start":{"line":306,"column":18},"end":{"line":306,"column":29}},{"start":{"line":306,"column":33},"end":{"line":306,"column":55}}]},"29":{"line":309,"type":"binary-expr","locations":[{"start":{"line":309,"column":11},"end":{"line":309,"column":50}},{"start":{"line":310,"column":8},"end":{"line":310,"column":34}}]},"30":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":4},"end":{"line":319,"column":4}},{"start":{"line":319,"column":4},"end":{"line":319,"column":4}}]},"31":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":8},"end":{"line":334,"column":8}},{"start":{"line":334,"column":8},"end":{"line":334,"column":8}}]},"32":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":8},"end":{"line":346,"column":8}},{"start":{"line":346,"column":8},"end":{"line":346,"column":8}}]},"33":{"line":364,"type":"binary-expr","locations":[{"start":{"line":364,"column":15},"end":{"line":364,"column":24}},{"start":{"line":364,"column":28},"end":{"line":364,"column":37}}]},"34":{"line":373,"type":"if","locations":[{"start":{"line":373,"column":4},"end":{"line":373,"column":4}},{"start":{"line":373,"column":4},"end":{"line":373,"column":4}}]},"35":{"line":377,"type":"if","locations":[{"start":{"line":377,"column":8},"end":{"line":377,"column":8}},{"start":{"line":377,"column":8},"end":{"line":377,"column":8}}]},"36":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":12},"end":{"line":385,"column":12}},{"start":{"line":385,"column":12},"end":{"line":385,"column":12}}]},"37":{"line":400,"type":"if","locations":[{"start":{"line":400,"column":4},"end":{"line":400,"column":4}},{"start":{"line":400,"column":4},"end":{"line":400,"column":4}}]},"38":{"line":402,"type":"if","locations":[{"start":{"line":402,"column":11},"end":{"line":402,"column":11}},{"start":{"line":402,"column":11},"end":{"line":402,"column":11}}]},"39":{"line":405,"type":"if","locations":[{"start":{"line":405,"column":8},"end":{"line":405,"column":8}},{"start":{"line":405,"column":8},"end":{"line":405,"column":8}}]},"40":{"line":405,"type":"binary-expr","locations":[{"start":{"line":405,"column":12},"end":{"line":405,"column":25}},{"start":{"line":405,"column":29},"end":{"line":405,"column":36}}]},"41":{"line":407,"type":"if","locations":[{"start":{"line":407,"column":15},"end":{"line":407,"column":15}},{"start":{"line":407,"column":15},"end":{"line":407,"column":15}}]},"42":{"line":407,"type":"binary-expr","locations":[{"start":{"line":407,"column":19},"end":{"line":407,"column":32}},{"start":{"line":407,"column":36},"end":{"line":407,"column":44}}]},"43":{"line":413,"type":"if","locations":[{"start":{"line":413,"column":4},"end":{"line":413,"column":4}},{"start":{"line":413,"column":4},"end":{"line":413,"column":4}}]},"44":{"line":421,"type":"if","locations":[{"start":{"line":421,"column":8},"end":{"line":421,"column":8}},{"start":{"line":421,"column":8},"end":{"line":421,"column":8}}]},"45":{"line":443,"type":"binary-expr","locations":[{"start":{"line":443,"column":15},"end":{"line":443,"column":24}},{"start":{"line":443,"column":28},"end":{"line":443,"column":37}}]},"46":{"line":451,"type":"binary-expr","locations":[{"start":{"line":451,"column":16},"end":{"line":451,"column":25}},{"start":{"line":451,"column":29},"end":{"line":451,"column":31}}]},"47":{"line":454,"type":"if","locations":[{"start":{"line":454,"column":4},"end":{"line":454,"column":4}},{"start":{"line":454,"column":4},"end":{"line":454,"column":4}}]},"48":{"line":472,"type":"if","locations":[{"start":{"line":472,"column":4},"end":{"line":472,"column":4}},{"start":{"line":472,"column":4},"end":{"line":472,"column":4}}]},"49":{"line":474,"type":"if","locations":[{"start":{"line":474,"column":11},"end":{"line":474,"column":11}},{"start":{"line":474,"column":11},"end":{"line":474,"column":11}}]},"50":{"line":476,"type":"if","locations":[{"start":{"line":476,"column":8},"end":{"line":476,"column":8}},{"start":{"line":476,"column":8},"end":{"line":476,"column":8}}]},"51":{"line":485,"type":"if","locations":[{"start":{"line":485,"column":4},"end":{"line":485,"column":4}},{"start":{"line":485,"column":4},"end":{"line":485,"column":4}}]},"52":{"line":533,"type":"if","locations":[{"start":{"line":533,"column":4},"end":{"line":533,"column":4}},{"start":{"line":533,"column":4},"end":{"line":533,"column":4}}]},"53":{"line":541,"type":"binary-expr","locations":[{"start":{"line":541,"column":11},"end":{"line":541,"column":17}},{"start":{"line":541,"column":21},"end":{"line":541,"column":51}}]},"54":{"line":542,"type":"binary-expr","locations":[{"start":{"line":542,"column":11},"end":{"line":542,"column":17}},{"start":{"line":542,"column":22},"end":{"line":542,"column":31}},{"start":{"line":542,"column":35},"end":{"line":542,"column":69}}]},"55":{"line":564,"type":"if","locations":[{"start":{"line":564,"column":8},"end":{"line":564,"column":8}},{"start":{"line":564,"column":8},"end":{"line":564,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var fs = require('fs');","var path = require('path');","var bufrw = require('bufrw');","var Result = require('bufrw/result');","var thriftrw = require('thriftrw');","var extend = require('xtend');","","var errors = require('../errors.js');","var HeaderRW = require('../v2/header.js').header2;","","var metaThriftFile = path.join(__dirname, 'meta.thrift');","","module.exports = TChannelAsThrift;","","function TChannelAsThrift(opts) {","    if (!(this instanceof TChannelAsThrift)) {","        return new TChannelAsThrift(opts);","    }","","    var self = this;","","    assert(opts, 'options required');","    assert(typeof opts === 'object', 'options must be object');","","    self.spec = opts.compiledSpec || new thriftrw.Thrift({","        entryPoint: opts.entryPoint,","        idls: opts.idls,","        source: opts.source,","        strict: opts.strict,","        allowFilesystemAccess: true,","        allowIncludeAlias: opts.allowIncludeAlias,","        allowOptionalArguments: opts.allowOptionalArguments,","        defaultAsUndefined: opts.defaultAsUndefined,","        fs: opts.fs","    });","","    var sources = self.spec.getSources();","    self.thriftFileName = sources.entryPoint;","    self.thriftSource = sources.idls[sources.entryPoint];","","    self.logger = opts.logger;","","    var bossMode = opts && opts.bossMode;","    self.bossMode = typeof bossMode === 'boolean' ? bossMode : false;","","    var logParseFailures = opts && opts.logParseFailures;","    self.logParseFailures = typeof logParseFailures === 'boolean' ?","        logParseFailures : true;","","    self.channel = opts.channel;","","    self.isHealthy = opts.isHealthy;","    assert(!self.isHealthy || typeof self.isHealthy === 'function',","        'isHealthy must be a function');","    assert(!self.isHealthy || self.channel,","        'channel must be provided with isHealthy');","","    var loadMetaAsync = opts.loadMetaAsync !== undefined ?","        opts.loadMetaAsync : true;","    if (self.isHealthy && loadMetaAsync) {","        self.registerHealthAsync();","    }","}","","TChannelAsThrift.prototype.registerHealthAsync =","function registerHealthAsync() {","    var self = this;","","    fs.readFile(metaThriftFile, 'utf8', onFile);","","    function onFile(err, thriftSource) {","        if (err) {","            self.channel.logger.fatal('failed to read meta.thrift file', {","                error: err","            });","            return;","        }","","        self.registerMeta(thriftSource);","    }","};","","TChannelAsThrift.prototype.parseException =","function parseException(request, response, cb) {","    var self = this;","","    response.withArg23(onArgs);","","    function onArgs(err, arg2, arg3) {","        if (err) {","            return cb(err);","        }","","        parseArgs(arg2, arg3);","    }","","    function parseArgs(arg2, arg3) {","        var parseResult = self._parse({","            head: arg2,","            body: arg3,","            ok: false,","            endpoint: request.endpoint,","            direction: 'in.response'","        });","        if (parseResult.err) {","            return cb(parseResult.err);","        }","","        var v = parseResult.value;","        var resp = new TChannelThriftResponse(response, v);","        cb(null, resp);","    }","};","","TChannelAsThrift.prototype.registerHealthSync =","function registerHealthSync() {","    var self = this;","","    var thriftSource = fs.readFileSync(metaThriftFile, 'utf8');","    self.registerMeta(thriftSource);","};","","TChannelAsThrift.prototype.registerMeta =","function registerMeta(metaSource) {","    var self = this;","","    var metaSpec = new thriftrw.Thrift({","        source: metaSource","    });","","    self.register(self.channel, 'Meta::health', self, health, metaSpec);","    self.register(self.channel, 'Meta::thriftIDL', self, thriftIDL, metaSpec);","};","","TChannelAsThrift.prototype.request = function request(reqOptions) {","    var self = this;","","    assert(self.channel, 'channel is required for thrift.request()');","    assert(reqOptions &&","        reqOptions.type !== 'tchannel.request' &&","        reqOptions.type !== 'tchannel.outgoing-request',","        'invalid reqOptions to TChannelAsThrift.request');","","    var shouldApplicationRetry = reqOptions.shouldThriftRetry;","    if (shouldApplicationRetry) {","        reqOptions.shouldApplicationRetry = wrappedShouldRetry;","    }","","    var req = new TChannelThriftRequest({","        channel: self.channel,","        reqOptions: reqOptions,","        tchannelThrift: self","    });","","    return req;","","    function wrappedShouldRetry(req2, res, retry, done) {","        self.parseException(req2, res, onException);","","        function onException(err, info) {","            if (err) {","                return done(err);","            }","","            var bool = shouldApplicationRetry(info, req, res);","            if (bool) {","                retry();","            } else {","                done();","            }","        }","    }","};","","TChannelAsThrift.prototype.waitForIdentified =","function waitForIdentified(options, cb) {","    var self = this;","","    assert(self.channel, 'channel is required for waitForIdentified()');","","    return self.channel.waitForIdentified(options, cb);","};","","TChannelAsThrift.prototype.register =","function register(channel, name, opts, handle, spec) {","    var self = this;","","    // support register(endpoint, opts, handle)","    if (typeof channel === 'string') {","        assert(self.channel, 'channel is required for thrift.register()');","        assert(spec === undefined, 'must have only 4 arguments');","","        spec = handle;","        handle = opts;","        opts = name;","        name = channel;","        channel = self.channel;","    }","","    if (!self.logger) {","        self.logger = channel.logger;","    }","","    assert(typeof name === 'string', 'endpoint has to be a string');","","    channel.register(name, handleThriftRequest);","","    function handleThriftRequest(req, res, inHeadBuffer, inBodyBuffer) {","        if (req.headers.as !== 'thrift') {","            return res.sendError('BadRequest',","                'Expected call request as header to be thrift');","        }","","        // Process incoming thrift body","        var parseResult = self._parse({","            head: inHeadBuffer,","            body: inBodyBuffer,","            endpoint: name,","            direction: 'in.request',","            spec: spec","        });","","        if (parseResult.err) {","            return res.sendError('BadRequest',","                parseResult.err.type + ': ' + parseResult.err.message);","        }","","        var v = parseResult.value;","        handle(opts, req, v.head, v.body, handleThriftResponse);","","        function handleThriftResponse(err, thriftRes) {","            if (err) {","                self.logger.error('Got unexpected error in handler', {","                    endpoint: name,","                    error: err","                });","","                return res.sendError('UnexpectedError', 'Unexpected Error');","            }","","            if (!self.bossMode) {","                assert(typeof thriftRes.ok === 'boolean',","                    'expected response.ok to be a boolean');","                assert(thriftRes.body !== undefined,","                    'expected response.body to exist');","","                if (!thriftRes.ok) {","                    assert(typeof thriftRes.typeName === 'string',","                        'expected not-ok response to have typeName');","                }","            }","","            var stringifyResult = self._stringify({","                head: thriftRes.head,","                body: thriftRes.body,","                ok: thriftRes.ok,","                typeName: thriftRes.typeName,","                endpoint: name,","                direction: 'out.response',","                spec: spec","            });","","            if (stringifyResult.err) {","                return res.sendError('UnexpectedError',","                    'Could not serialize thrift');","            }","","            if (res.setOk(thriftRes.ok)) {","                res.headers.as = 'thrift';","                res.send(","                    stringifyResult.value.head,","                    stringifyResult.value.body","                );","            }","        }","    }","};","","TChannelAsThrift.prototype.send =","function send(request, endpoint, outHead, outBody, callback) {","    var self = this;","","    self.logger = self.logger || request.channel.logger;","","    assert(typeof endpoint === 'string', 'send requires endpoint');","    assert(typeof request.serviceName === 'string' &&","        request.serviceName !== '',","        'req.serviceName must be a string');","","    var stringifyResult = self._stringify({","        head: outHead,","        body: outBody,","        endpoint: endpoint,","        direction: 'out.request'","    });","    if (stringifyResult.err) {","        return callback(stringifyResult.err);","    }","","    // Punch as=thrift into the transport headers","    request.headers.as = 'thrift';","","    request.send(","        endpoint,","        stringifyResult.value.head,","        stringifyResult.value.body,","        handleResponse","    );","","    function handleResponse(err, res, arg2, arg3) {","        if (err) {","            return callback(err);","        }","","        var parseResult = self._parse({","            head: arg2,","            body: arg3,","            ok: res.ok,","            endpoint: endpoint,","            direction: 'in.response'","        });","","        if (parseResult.err) {","            return callback(parseResult.err);","        }","","        var v = parseResult.value;","        var resp = new TChannelThriftResponse(res, v);","","        callback(null, resp);","    }","};","","TChannelAsThrift.prototype.getServiceEndpoints = function getEndpoints() {","    return this.spec.getServiceEndpoints();","};","","/*eslint-disable max-statements */","TChannelAsThrift.prototype._parse = function parse(opts) {","    var self = this;","    var spec = opts.spec || self.spec;","","    var argsName = opts.endpoint + '_args';","    var argsType = spec.getType(argsName);","","    var returnName = opts.endpoint + '_result';","    var resultType = spec.getType(returnName);","","    var headRes;","    if (!opts.head) {","        headRes = new Result(null, null);","    } else {","        headRes = bufrw.fromBufferResult(HeaderRW, opts.head);","        if (headRes.err) {","            var headParseErr = errors.ThriftHeadParserError(headRes.err, {","                endpoint: opts.endpoint,","                direction: opts.direction,","                ok: opts.ok,","                headBuf: opts.head.slice(0, 10)","            });","","            if (self.logParseFailures) {","                self.logger.warn('Got unexpected invalid thrift arg2', {","                    endpoint: opts.endpoint,","                    direction: opts.direction,","                    ok: opts.ok,","                    headErr: headParseErr","                });","            }","","            return new Result(headParseErr);","        }","    }","","    var bodyRes;","    var typeName;","    if (opts.direction === 'in.request') {","        bodyRes = argsType.fromBufferResult(opts.body);","    } else if (opts.direction === 'in.response') {","        bodyRes = resultType.fromBufferResult(opts.body);","","        if (bodyRes.value && opts.ok) {","            bodyRes.value = bodyRes.value.success;","        } else if (bodyRes.value && !opts.ok) {","            typeName = onlyKey(bodyRes.value);","            bodyRes.value = bodyRes.value[typeName];","        }","    }","","    if (bodyRes.err) {","        var bodyParseErr = errors.ThriftBodyParserError(bodyRes.err, {","            endpoint: opts.endpoint,","            direction: opts.direction,","            ok: opts.ok,","            bodyBuf: opts.body.slice(0, 10)","        });","","        if (self.logParseFailures) {","            self.logger.warn('Got unexpected invalid thrift for arg3', {","                endpoint: opts.endpoint,","                ok: opts.ok,","                direction: opts.direction,","                bodyErr: bodyParseErr","            });","        }","","        return new Result(bodyParseErr);","    }","","    return new Result(null, {","        head: headRes.value,","        body: bodyRes.value,","        typeName: typeName","    });","};","/*eslint-enable max-statements */","","TChannelAsThrift.prototype._stringify = function stringify(opts) {","    var self = this;","    var spec = opts.spec || self.spec;","","    var argsName = opts.endpoint + '_args';","    var argsType = spec.getType(argsName);","","    var returnName = opts.endpoint + '_result';","    var resultType = spec.getType(returnName);","","    opts.head = opts.head || {};","","    var headRes = bufrw.toBufferResult(HeaderRW, opts.head);","    if (headRes.err) {","        var headStringifyErr = errors.ThriftHeadStringifyError(headRes.err, {","            endpoint: opts.endpoint,","            ok: opts.ok,","            direction: opts.direction,","            head: opts.head","        });","","        self.logger.error('Got unexpected unserializable thrift for arg2', {","            endpoint: opts.endpoint,","            ok: opts.ok,","            direction: opts.direction,","            headErr: headStringifyErr","        });","        return new Result(headStringifyErr);","    }","","    var bodyRes;","    if (opts.direction === 'out.request') {","        bodyRes = argsType.toBufferResult(opts.body);","    } else if (opts.direction === 'out.response') {","        var thriftResult = {};","        if (!opts.ok) {","            thriftResult[opts.typeName] = opts.body;","        } else {","            thriftResult.success = opts.body;","        }","","        bodyRes = resultType.toBufferResult(thriftResult);","    }","","    if (bodyRes.err) {","        var bodyStringifyErr = errors.ThriftBodyStringifyError(bodyRes.err, {","            endpoint: opts.endpoint,","            ok: opts.ok,","            direction: opts.direction,","            body: opts.body","        });","","        self.logger.error('Got unexpected unserializable thrift for arg3', {","            endpoint: opts.endpoint,","            direction: opts.direction,","            ok: opts.ok,","            bodyErr: bodyStringifyErr","        });","        return new Result(bodyStringifyErr);","    }","","    return new Result(null, {","        head: headRes.value,","        body: bodyRes.value","    });","};","","function TChannelThriftResponse(response, parseResult) {","    var self = this;","","    self.ok = response.ok;","    self.head = parseResult.head;","    self.body = null;","    self.headers = response.headers;","    self.body = parseResult.body;","    self.typeName = parseResult.typeName;","}","","function TChannelThriftRequest(options) {","    var self = this;","","    self.channel = options.channel;","    self.reqOptions = options.reqOptions;","    self.tchannelThrift = options.tchannelThrift;","}","","TChannelThriftRequest.prototype.send =","function send(endpoint, head, body, callback) {","    var self = this;","","    var outreq = self.channel.request(self.reqOptions);","    var headers = head;","    if (self.reqOptions.defaultRequestHeaders) {","        headers = extend(self.reqOptions.defaultRequestHeaders, head);","    }","    self.tchannelThrift.send(outreq, endpoint, headers, body, callback);","};","","function health(tchannelThrift, req, head, body, callback) {","    var status = tchannelThrift.isHealthy();","    assert(status && typeof status.ok === 'boolean', 'status must have ok field');","    assert(status && (status.ok || typeof status.message === 'string'),","        'status.message must be provided when status.ok === false');","","    return callback(null, {","        ok: true,","        body: {","            ok: status.ok,","            message: status.message","        }","    });","}","","function thriftIDL(tchannelThrift, req, head, body, callback) {","    return callback(null, {","        ok: true,","        body: tchannelThrift.spec.getSources()","    });","}","","// TODO proper Thriftify result union that reifies as the selected field.","function onlyKey(object) {","    for (var name in object) {","        if (object[name] != null) {","            return name;","        }","    }","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":1,"34":1,"36":1,"38":1,"39":0,"40":0,"43":0,"45":0,"46":0,"48":0,"60":0,"61":0,"62":0,"64":0,"66":0,"67":0,"69":0,"70":0,"73":0,"75":0,"76":0,"78":0,"81":0,"83":0,"84":0,"88":1,"90":0,"92":0,"94":1,"95":0,"96":0,"99":0,"102":0,"106":1,"108":0,"110":0,"112":1,"113":0,"114":0,"117":0,"120":1,"121":0,"128":0,"129":0,"132":0,"133":0,"134":0,"138":1,"140":0,"142":0,"143":0,"146":1,"148":0,"150":0,"154":0,"155":0,"158":1,"159":0,"161":0,"162":0,"167":0,"168":0,"169":0,"172":0,"178":0,"180":1,"181":0,"183":1,"184":0,"185":0,"188":0,"189":0,"190":0,"192":0,"198":1,"200":0,"202":0,"204":0,"207":1,"209":0,"212":0,"213":0,"214":0,"216":0,"217":0,"218":0,"219":0,"220":0,"223":0,"224":0,"227":0,"229":0,"231":1,"232":0,"233":0,"238":0,"246":0,"247":0,"251":0,"252":0,"254":1,"255":0,"256":0,"261":0,"264":0,"265":0,"267":0,"270":0,"271":0,"276":0,"286":0,"287":0,"291":0,"292":0,"293":0,"302":1,"304":0,"306":0,"308":0,"309":0,"313":0,"319":0,"320":0,"324":0,"326":0,"333":1,"334":0,"335":0,"338":0,"346":0,"347":0,"350":0,"351":0,"353":0,"357":1,"358":0,"362":1,"363":0,"364":0,"366":0,"367":0,"369":0,"370":0,"372":0,"373":0,"374":0,"376":0,"377":0,"378":0,"385":0,"386":0,"394":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"405":0,"406":0,"407":0,"408":0,"409":0,"413":0,"414":0,"421":0,"422":0,"430":0,"433":0,"441":1,"442":0,"443":0,"445":0,"446":0,"448":0,"449":0,"451":0,"453":0,"454":0,"455":0,"462":0,"468":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"479":0,"482":0,"485":0,"486":0,"493":0,"499":0,"502":0,"508":1,"509":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"519":1,"520":0,"522":0,"523":0,"524":0,"527":1,"529":0,"531":0,"532":0,"533":0,"534":0,"536":0,"539":1,"540":0,"541":0,"542":0,"545":0,"554":1,"555":0,"562":1,"563":0,"564":0,"565":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/header.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/header.js","s":{"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":2,"8":2,"9":2,"10":2,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":1,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":1,"127":1,"128":1,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"HeaderRW","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":50}}},"2":{"name":"poolByteLength","line":44,"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":81}}},"3":{"name":"poolWriteInto","line":78,"loc":{"start":{"line":78,"column":35},"end":{"line":78,"column":95}}},"4":{"name":"poolReadFrom","line":126,"loc":{"start":{"line":126,"column":34},"end":{"line":126,"column":84}}},"5":{"name":"poolLazyRead","line":191,"loc":{"start":{"line":191,"column":34},"end":{"line":191,"column":83}}},"6":{"name":"poolLazySkip","line":222,"loc":{"start":{"line":222,"column":34},"end":{"line":222,"column":83}}},"7":{"name":"KeyVals","line":258,"loc":{"start":{"line":258,"column":0},"end":{"line":258,"column":33}}},"8":{"name":"add","line":267,"loc":{"start":{"line":267,"column":0},"end":{"line":267,"column":57}}},"9":{"name":"getValue","line":277,"loc":{"start":{"line":277,"column":0},"end":{"line":277,"column":23}}}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":40}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":34}},"4":{"start":{"line":34,"column":0},"end":{"line":41,"column":1}},"5":{"start":{"line":35,"column":4},"end":{"line":35,"column":27}},"6":{"start":{"line":36,"column":4},"end":{"line":36,"column":23}},"7":{"start":{"line":37,"column":4},"end":{"line":37,"column":23}},"8":{"start":{"line":38,"column":4},"end":{"line":38,"column":49}},"9":{"start":{"line":39,"column":4},"end":{"line":39,"column":45}},"10":{"start":{"line":40,"column":4},"end":{"line":40,"column":26}},"11":{"start":{"line":42,"column":0},"end":{"line":42,"column":31}},"12":{"start":{"line":44,"column":0},"end":{"line":76,"column":2}},"13":{"start":{"line":45,"column":4},"end":{"line":45,"column":19}},"14":{"start":{"line":46,"column":4},"end":{"line":46,"column":36}},"15":{"start":{"line":47,"column":4},"end":{"line":47,"column":12}},"16":{"start":{"line":49,"column":4},"end":{"line":54,"column":5}},"17":{"start":{"line":50,"column":8},"end":{"line":53,"column":12}},"18":{"start":{"line":56,"column":4},"end":{"line":56,"column":33}},"19":{"start":{"line":58,"column":4},"end":{"line":73,"column":5}},"20":{"start":{"line":59,"column":8},"end":{"line":59,"column":26}},"21":{"start":{"line":60,"column":8},"end":{"line":60,"column":41}},"22":{"start":{"line":61,"column":8},"end":{"line":61,"column":32}},"23":{"start":{"line":61,"column":21},"end":{"line":61,"column":32}},"24":{"start":{"line":62,"column":8},"end":{"line":62,"column":29}},"25":{"start":{"line":64,"column":8},"end":{"line":64,"column":50}},"26":{"start":{"line":65,"column":8},"end":{"line":65,"column":32}},"27":{"start":{"line":65,"column":21},"end":{"line":65,"column":32}},"28":{"start":{"line":66,"column":8},"end":{"line":71,"column":9}},"29":{"start":{"line":67,"column":12},"end":{"line":70,"column":16}},"30":{"start":{"line":72,"column":8},"end":{"line":72,"column":29}},"31":{"start":{"line":75,"column":4},"end":{"line":75,"column":42}},"32":{"start":{"line":78,"column":0},"end":{"line":124,"column":2}},"33":{"start":{"line":79,"column":4},"end":{"line":79,"column":36}},"34":{"start":{"line":80,"column":4},"end":{"line":80,"column":12}},"35":{"start":{"line":82,"column":4},"end":{"line":82,"column":78}},"36":{"start":{"line":84,"column":4},"end":{"line":91,"column":5}},"37":{"start":{"line":85,"column":8},"end":{"line":90,"column":20}},"38":{"start":{"line":93,"column":4},"end":{"line":121,"column":5}},"39":{"start":{"line":94,"column":8},"end":{"line":94,"column":32}},"40":{"start":{"line":94,"column":21},"end":{"line":94,"column":32}},"41":{"start":{"line":95,"column":8},"end":{"line":95,"column":28}},"42":{"start":{"line":97,"column":8},"end":{"line":97,"column":26}},"43":{"start":{"line":98,"column":8},"end":{"line":98,"column":56}},"44":{"start":{"line":99,"column":8},"end":{"line":99,"column":32}},"45":{"start":{"line":99,"column":21},"end":{"line":99,"column":32}},"46":{"start":{"line":101,"column":8},"end":{"line":101,"column":48}},"47":{"start":{"line":102,"column":8},"end":{"line":109,"column":9}},"48":{"start":{"line":103,"column":12},"end":{"line":108,"column":24}},"49":{"start":{"line":110,"column":8},"end":{"line":110,"column":28}},"50":{"start":{"line":113,"column":8},"end":{"line":118,"column":9}},"51":{"start":{"line":114,"column":12},"end":{"line":117,"column":24}},"52":{"start":{"line":120,"column":8},"end":{"line":120,"column":81}},"53":{"start":{"line":123,"column":4},"end":{"line":123,"column":15}},"54":{"start":{"line":126,"column":0},"end":{"line":189,"column":2}},"55":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}},"56":{"start":{"line":128,"column":4},"end":{"line":128,"column":18}},"57":{"start":{"line":129,"column":4},"end":{"line":129,"column":14}},"58":{"start":{"line":130,"column":4},"end":{"line":130,"column":17}},"59":{"start":{"line":131,"column":4},"end":{"line":131,"column":17}},"60":{"start":{"line":132,"column":4},"end":{"line":132,"column":12}},"61":{"start":{"line":134,"column":4},"end":{"line":134,"column":64}},"62":{"start":{"line":135,"column":4},"end":{"line":135,"column":28}},"63":{"start":{"line":135,"column":17},"end":{"line":135,"column":28}},"64":{"start":{"line":136,"column":4},"end":{"line":136,"column":24}},"65":{"start":{"line":137,"column":4},"end":{"line":137,"column":18}},"66":{"start":{"line":139,"column":4},"end":{"line":146,"column":5}},"67":{"start":{"line":140,"column":8},"end":{"line":145,"column":29}},"68":{"start":{"line":148,"column":4},"end":{"line":186,"column":5}},"69":{"start":{"line":149,"column":8},"end":{"line":149,"column":23}},"70":{"start":{"line":151,"column":8},"end":{"line":151,"column":66}},"71":{"start":{"line":152,"column":8},"end":{"line":152,"column":32}},"72":{"start":{"line":152,"column":21},"end":{"line":152,"column":32}},"73":{"start":{"line":153,"column":8},"end":{"line":153,"column":24}},"74":{"start":{"line":155,"column":8},"end":{"line":167,"column":9}},"75":{"start":{"line":156,"column":12},"end":{"line":159,"column":33}},"76":{"start":{"line":160,"column":15},"end":{"line":167,"column":9}},"77":{"start":{"line":161,"column":12},"end":{"line":166,"column":33}},"78":{"start":{"line":168,"column":8},"end":{"line":168,"column":28}},"79":{"start":{"line":170,"column":8},"end":{"line":170,"column":66}},"80":{"start":{"line":171,"column":8},"end":{"line":171,"column":32}},"81":{"start":{"line":171,"column":21},"end":{"line":171,"column":32}},"82":{"start":{"line":172,"column":8},"end":{"line":172,"column":24}},"83":{"start":{"line":174,"column":8},"end":{"line":182,"column":9}},"84":{"start":{"line":175,"column":12},"end":{"line":181,"column":33}},"85":{"start":{"line":183,"column":8},"end":{"line":183,"column":28}},"86":{"start":{"line":185,"column":8},"end":{"line":185,"column":27}},"87":{"start":{"line":188,"column":4},"end":{"line":188,"column":51}},"88":{"start":{"line":191,"column":0},"end":{"line":220,"column":2}},"89":{"start":{"line":195,"column":4},"end":{"line":195,"column":74}},"90":{"start":{"line":196,"column":4},"end":{"line":196,"column":28}},"91":{"start":{"line":196,"column":17},"end":{"line":196,"column":28}},"92":{"start":{"line":197,"column":4},"end":{"line":197,"column":24}},"93":{"start":{"line":200,"column":4},"end":{"line":200,"column":55}},"94":{"start":{"line":201,"column":4},"end":{"line":215,"column":5}},"95":{"start":{"line":202,"column":8},"end":{"line":202,"column":79}},"96":{"start":{"line":203,"column":8},"end":{"line":203,"column":32}},"97":{"start":{"line":203,"column":21},"end":{"line":203,"column":32}},"98":{"start":{"line":204,"column":8},"end":{"line":204,"column":35}},"99":{"start":{"line":205,"column":8},"end":{"line":205,"column":34}},"100":{"start":{"line":206,"column":8},"end":{"line":206,"column":40}},"101":{"start":{"line":208,"column":8},"end":{"line":208,"column":79}},"102":{"start":{"line":209,"column":8},"end":{"line":209,"column":32}},"103":{"start":{"line":209,"column":21},"end":{"line":209,"column":32}},"104":{"start":{"line":210,"column":8},"end":{"line":210,"column":35}},"105":{"start":{"line":211,"column":8},"end":{"line":211,"column":34}},"106":{"start":{"line":212,"column":8},"end":{"line":212,"column":40}},"107":{"start":{"line":214,"column":8},"end":{"line":214,"column":64}},"108":{"start":{"line":217,"column":4},"end":{"line":217,"column":28}},"109":{"start":{"line":219,"column":4},"end":{"line":219,"column":51}},"110":{"start":{"line":222,"column":0},"end":{"line":242,"column":2}},"111":{"start":{"line":226,"column":4},"end":{"line":226,"column":74}},"112":{"start":{"line":227,"column":4},"end":{"line":227,"column":28}},"113":{"start":{"line":227,"column":17},"end":{"line":227,"column":28}},"114":{"start":{"line":228,"column":4},"end":{"line":228,"column":24}},"115":{"start":{"line":229,"column":4},"end":{"line":229,"column":22}},"116":{"start":{"line":231,"column":4},"end":{"line":239,"column":5}},"117":{"start":{"line":232,"column":8},"end":{"line":232,"column":79}},"118":{"start":{"line":233,"column":8},"end":{"line":233,"column":32}},"119":{"start":{"line":233,"column":21},"end":{"line":233,"column":32}},"120":{"start":{"line":234,"column":8},"end":{"line":234,"column":40}},"121":{"start":{"line":236,"column":8},"end":{"line":236,"column":79}},"122":{"start":{"line":237,"column":8},"end":{"line":237,"column":32}},"123":{"start":{"line":237,"column":21},"end":{"line":237,"column":32}},"124":{"start":{"line":238,"column":8},"end":{"line":238,"column":40}},"125":{"start":{"line":241,"column":4},"end":{"line":241,"column":48}},"126":{"start":{"line":244,"column":0},"end":{"line":244,"column":26}},"127":{"start":{"line":247,"column":0},"end":{"line":250,"column":3}},"128":{"start":{"line":253,"column":0},"end":{"line":256,"column":3}},"129":{"start":{"line":258,"column":0},"end":{"line":264,"column":1}},"130":{"start":{"line":259,"column":4},"end":{"line":259,"column":25}},"131":{"start":{"line":260,"column":4},"end":{"line":260,"column":25}},"132":{"start":{"line":261,"column":4},"end":{"line":261,"column":43}},"133":{"start":{"line":262,"column":4},"end":{"line":262,"column":19}},"134":{"start":{"line":263,"column":4},"end":{"line":263,"column":20}},"135":{"start":{"line":266,"column":0},"end":{"line":274,"column":2}},"136":{"start":{"line":268,"column":4},"end":{"line":273,"column":5}},"137":{"start":{"line":269,"column":8},"end":{"line":269,"column":44}},"138":{"start":{"line":270,"column":8},"end":{"line":270,"column":44}},"139":{"start":{"line":271,"column":8},"end":{"line":271,"column":44}},"140":{"start":{"line":272,"column":8},"end":{"line":272,"column":44}},"141":{"start":{"line":276,"column":0},"end":{"line":313,"column":2}},"142":{"start":{"line":280,"column":4},"end":{"line":310,"column":5}},"143":{"start":{"line":285,"column":8},"end":{"line":285,"column":41}},"144":{"start":{"line":286,"column":8},"end":{"line":288,"column":9}},"145":{"start":{"line":287,"column":12},"end":{"line":287,"column":21}},"146":{"start":{"line":290,"column":8},"end":{"line":290,"column":37}},"147":{"start":{"line":291,"column":8},"end":{"line":291,"column":25}},"148":{"start":{"line":292,"column":8},"end":{"line":301,"column":9}},"149":{"start":{"line":297,"column":12},"end":{"line":300,"column":13}},"150":{"start":{"line":298,"column":16},"end":{"line":298,"column":30}},"151":{"start":{"line":299,"column":16},"end":{"line":299,"column":22}},"152":{"start":{"line":302,"column":8},"end":{"line":309,"column":9}},"153":{"start":{"line":303,"column":12},"end":{"line":303,"column":45}},"154":{"start":{"line":304,"column":12},"end":{"line":304,"column":45}},"155":{"start":{"line":305,"column":12},"end":{"line":308,"column":14}},"156":{"start":{"line":312,"column":4},"end":{"line":312,"column":21}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"2":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":8}},{"start":{"line":65,"column":8},"end":{"line":65,"column":8}}]},"4":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"5":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"6":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},{"start":{"line":94,"column":8},"end":{"line":94,"column":8}}]},"7":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"8":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":102,"column":8}},{"start":{"line":102,"column":8},"end":{"line":102,"column":8}}]},"9":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"10":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":4},"end":{"line":135,"column":4}},{"start":{"line":135,"column":4},"end":{"line":135,"column":4}}]},"11":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":4}},{"start":{"line":139,"column":4},"end":{"line":139,"column":4}}]},"12":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":8}},{"start":{"line":152,"column":8},"end":{"line":152,"column":8}}]},"13":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":155,"column":8}},{"start":{"line":155,"column":8},"end":{"line":155,"column":8}}]},"14":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":15},"end":{"line":160,"column":15}},{"start":{"line":160,"column":15},"end":{"line":160,"column":15}}]},"15":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":8},"end":{"line":171,"column":8}},{"start":{"line":171,"column":8},"end":{"line":171,"column":8}}]},"16":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":8}},{"start":{"line":174,"column":8},"end":{"line":174,"column":8}}]},"17":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":196,"column":4}},{"start":{"line":196,"column":4},"end":{"line":196,"column":4}}]},"18":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"19":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":8}},{"start":{"line":209,"column":8},"end":{"line":209,"column":8}}]},"20":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":4},"end":{"line":227,"column":4}},{"start":{"line":227,"column":4},"end":{"line":227,"column":4}}]},"21":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":8},"end":{"line":233,"column":8}},{"start":{"line":233,"column":8},"end":{"line":233,"column":8}}]},"22":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":8},"end":{"line":237,"column":8}},{"start":{"line":237,"column":8},"end":{"line":237,"column":8}}]},"23":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":4},"end":{"line":268,"column":4}},{"start":{"line":268,"column":4},"end":{"line":268,"column":4}}]},"24":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":8},"end":{"line":286,"column":8}},{"start":{"line":286,"column":8},"end":{"line":286,"column":8}}]},"25":{"line":297,"type":"if","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":12}},{"start":{"line":297,"column":12},"end":{"line":297,"column":12}}]},"26":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":8},"end":{"line":302,"column":8}},{"start":{"line":302,"column":8},"end":{"line":302,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","/* eslint max-statements: [1, 30] */","","var bufrw = require('bufrw');","var inherits = require('util').inherits;","var errors = require('../errors');","","// TODO: different struct pattern that doesn't realize a temporary list of","// [key, val] tuples may be better. At the very least, such structure would","// allow for more precise error reporting.","","function HeaderRW(countrw, keyrw, valrw, options) {","    this.countrw = countrw;","    this.keyrw = keyrw;","    this.valrw = valrw;","    this.maxHeaderCount = options.maxHeaderCount;","    this.maxKeyLength = options.maxKeyLength;","    bufrw.Base.call(this);","}","inherits(HeaderRW, bufrw.Base);","","HeaderRW.prototype.poolByteLength = function poolByteLength(destResult, headers) {","    var length = 0;","    var keys = Object.keys(headers);","    var res;","","    if (keys.length > this.maxHeaderCount) {","        return destResult.reset(errors.TooManyHeaders({","            count: keys.length,","            maxHeaderCount: this.maxHeaderCount","        }));","    }","","    length += this.countrw.width;","","    for (var i = 0; i < keys.length; i++) {","        var key = keys[i];","        res = this.keyrw.byteLength(key);","        if (res.err) return res;","        length += res.length;","","        res = this.valrw.byteLength(headers[key]);","        if (res.err) return res;","        if (res.length > this.maxKeyLength) {","            return destResult.reset(errors.TransportHeaderTooLong({","                maxLength: this.maxKeyLength,","                headerName: key","            }));","        }","        length += res.length;","    }","","    return destResult.reset(null, length);","};","","HeaderRW.prototype.poolWriteInto = function poolWriteInto(destResult, headers, buffer, offset) {","    var keys = Object.keys(headers);","    var res;","","    res = this.countrw.poolWriteInto(destResult, keys.length, buffer, offset);","","    if (keys.length > this.maxHeaderCount) {","        return destResult.reset(errors.TooManyHeaders({","            count: keys.length,","            maxHeaderCount: this.maxHeaderCount,","            offset: offset,","            endOffset: res.offset","        }), offset);","    }","","    for (var i = 0; i < keys.length; i++) {","        if (res.err) return res;","        offset = res.offset;","","        var key = keys[i];","        res = this.keyrw.writeInto(key, buffer, offset);","        if (res.err) return res;","","        var keyByteLength = res.offset - offset;","        if (keyByteLength > this.maxKeyLength) {","            return destResult.reset(errors.TransportHeaderTooLong({","                maxLength: this.maxKeyLength,","                headerName: key,","                offset: offset,","                endOffset: res.offset","            }), offset);","        }","        offset = res.offset;","","        // TODO consider supporting buffers","        if (typeof headers[key] !== 'string') {","            return destResult.reset(errors.InvalidHeaderTypeError({","                name: key,","                headerType: typeof headers[key]","            }), offset);","        }","","        res = this.valrw.poolWriteInto(destResult, headers[key], buffer, offset);","    }","","    return res;","};","","HeaderRW.prototype.poolReadFrom = function poolReadFrom(destResult, buffer, offset) {","    var headers = {};","    var start = 0;","    var n = 0;","    var key = '';","    var val = '';","    var res;","","    res = this.countrw.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    n = res.value;","","    if (n > this.maxHeaderCount) {","        return destResult.reset(errors.TooManyHeaders({","            count: n,","            maxHeaderCount: this.maxHeaderCount,","            offset: offset,","            endOffset: res.offset","        }), offset, headers);","    }","","    for (var i = 0; i < n; i++) {","        start = offset;","","        res = this.keyrw.poolReadFrom(destResult, buffer, offset);","        if (res.err) return res;","        key = res.value;","","        if (!key.length) {","            return destResult.reset(errors.NullKeyError({","                offset: offset,","                endOffset: res.offset","            }), offset, headers);","        } else if (res.offset - offset > this.maxKeyLength) {","            return destResult.reset(errors.TransportHeaderTooLong({","                maxLength: this.maxKeyLength,","                headerName: key,","                offset: offset,","                endOffset: res.offset","            }), offset, headers);","        }","        offset = res.offset;","","        res = this.valrw.poolReadFrom(destResult, buffer, offset);","        if (res.err) return res;","        val = res.value;","","        if (headers[key] !== undefined) {","            return destResult.reset(errors.DuplicateHeaderKeyError({","                offset: start,","                endOffset: res.offset,","                key: key,","                value: val,","                priorValue: headers[key]","            }), offset, headers);","        }","        offset = res.offset;","","        headers[key] = val;","    }","","    return destResult.reset(null, offset, headers);","};","","HeaderRW.prototype.poolLazyRead = function poolLazyRead(destResult, frame, offset) {","    // TODO: conspire with Call(Request,Response) to memoize headers start/end","    // offsets, maybe even start of each key?","","    var res = this.countrw.poolReadFrom(destResult, frame.buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // TODO: Pool these KeyVals objects","    var keyvals = new KeyVals(frame.buffer, res.value);","    for (var i = 0; i < keyvals.length; i++) {","        res = this.keyrw.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) return res;","        var keyOffset = res.offset;","        var keyLength = res.value;","        offset = res.offset + res.value;","","        res = this.valrw.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) return res;","        var valOffset = res.offset;","        var valLength = res.value;","        offset = res.offset + res.value;","","        keyvals.add(keyOffset, keyLength, valOffset, valLength);","    }","","    keyvals.offset = offset;","","    return destResult.reset(null, offset, keyvals);","};","","HeaderRW.prototype.poolLazySkip = function poolLazySkip(destResult, frame, offset) {","    // TODO: conspire with Call(Request,Response) to memoize headers start/end","    // offsets, maybe even start of each key?","","    var res = this.countrw.poolReadFrom(destResult, frame.buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    var n = res.value;","","    for (var i = 0; i < n; i++) {","        res = this.keyrw.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) return res;","        offset = res.offset + res.value;","","        res = this.valrw.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) return res;","        offset = res.offset + res.value;","    }","","    return destResult.reset(null, offset, null);","};","","module.exports = HeaderRW;","","// nh:1 (hk~1 hv~1){nh}","module.exports.header1 = new HeaderRW(bufrw.UInt8, bufrw.str1, bufrw.str1, {","    maxHeaderCount: 128,","    maxKeyLength: 16","});","","// nh:2 (hk~2 hv~2){nh}","module.exports.header2 = new HeaderRW(bufrw.UInt16BE, bufrw.str2, bufrw.str2, {","    maxHeaderCount: Infinity,","    maxKeyLength: Infinity","});","","function KeyVals(buffer, length) {","    this.length = length;","    this.buffer = buffer;","    this.data = new Array(this.length * 4);","    this.index = 0;","    this.offset = 0;","}","","KeyVals.prototype.add =","function add(keyOffset, keyLength, valOffset, valLength) {","    if (this.index < this.data.length) {","        this.data[this.index++] = keyOffset;","        this.data[this.index++] = keyLength;","        this.data[this.index++] = valOffset;","        this.data[this.index++] = valLength;","    }","};","","KeyVals.prototype.getValue =","function getValue(key) {","    // assert Buffer.isBuffer(key)","","    for (","        var i = 0;","        i < this.data.length;","        i += 4","    ) {","        var keyLength = this.data[i + 1];","        if (key.length !== keyLength) {","            continue;","        }","","        var keyOffset = this.data[i];","        var found = true;","        for (","            var j = 0, offset = keyOffset;","            j < keyLength;","            j++, offset++","        ) {","            if (key[j] !== this.buffer[offset]) {","                found = false;","                break;","            }","        }","        if (found) {","            var valOffset = this.data[i + 2];","            var valLength = this.data[i + 3];","            return this.buffer.slice(","                valOffset,","                valOffset + valLength","            );","        }","    }","","    return undefined;","};",""],"l":{"26":1,"27":1,"28":1,"34":1,"35":2,"36":2,"37":2,"38":2,"39":2,"40":2,"42":1,"44":1,"45":0,"46":0,"47":0,"49":0,"50":0,"56":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"65":0,"66":0,"67":0,"72":0,"75":0,"78":1,"79":0,"80":0,"82":0,"84":0,"85":0,"93":0,"94":0,"95":0,"97":0,"98":0,"99":0,"101":0,"102":0,"103":0,"110":0,"113":0,"114":0,"120":0,"123":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"134":0,"135":0,"136":0,"137":0,"139":0,"140":0,"148":0,"149":0,"151":0,"152":0,"153":0,"155":0,"156":0,"160":0,"161":0,"168":0,"170":0,"171":0,"172":0,"174":0,"175":0,"183":0,"185":0,"188":0,"191":1,"195":0,"196":0,"197":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"208":0,"209":0,"210":0,"211":0,"212":0,"214":0,"217":0,"219":0,"222":1,"226":0,"227":0,"228":0,"229":0,"231":0,"232":0,"233":0,"234":0,"236":0,"237":0,"238":0,"241":0,"244":1,"247":1,"253":1,"258":1,"259":0,"260":0,"261":0,"262":0,"263":0,"266":1,"268":0,"269":0,"270":0,"271":0,"272":0,"276":1,"280":0,"285":0,"286":0,"287":0,"290":0,"291":0,"292":0,"297":0,"298":0,"299":0,"302":0,"303":0,"304":0,"305":0,"312":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/json.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/json.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":1,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"TChannelJSON","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":31}}},"2":{"name":"TChannelJSONRequest","line":54,"loc":{"start":{"line":54,"column":0},"end":{"line":54,"column":38}}},"3":{"name":"send","line":63,"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":46}}},"4":{"name":"request","line":74,"loc":{"start":{"line":74,"column":33},"end":{"line":74,"column":62}}},"5":{"name":"send","line":89,"loc":{"start":{"line":89,"column":30},"end":{"line":91,"column":2}}},"6":{"name":"onResponse","line":123,"loc":{"start":{"line":123,"column":4},"end":{"line":123,"column":47}}},"7":{"name":"TChannelJSONResponse","line":146,"loc":{"start":{"line":146,"column":0},"end":{"line":146,"column":53}}},"8":{"name":"register","line":162,"loc":{"start":{"line":162,"column":34},"end":{"line":164,"column":2}}},"9":{"name":"endpointHandler","line":175,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":51}}},"10":{"name":"onResponse","line":197,"loc":{"start":{"line":197,"column":8},"end":{"line":197,"column":45}}},"11":{"name":"stringify","line":242,"loc":{"start":{"line":242,"column":36},"end":{"line":242,"column":61}}},"12":{"name":"parse","line":283,"loc":{"start":{"line":283,"column":32},"end":{"line":283,"column":53}}},"13":{"name":"safeJSONStringify","line":330,"loc":{"start":{"line":330,"column":0},"end":{"line":330,"column":32}}},"14":{"name":"safeJSONParse","line":344,"loc":{"start":{"line":344,"column":0},"end":{"line":344,"column":28}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":38}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":31}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":37}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":53}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":30}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":37}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":30}},"8":{"start":{"line":33,"column":0},"end":{"line":52,"column":1}},"9":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"10":{"start":{"line":35,"column":8},"end":{"line":35,"column":41}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":20}},"12":{"start":{"line":41,"column":4},"end":{"line":41,"column":23}},"13":{"start":{"line":43,"column":4},"end":{"line":43,"column":47}},"14":{"start":{"line":44,"column":4},"end":{"line":44,"column":69}},"15":{"start":{"line":46,"column":4},"end":{"line":46,"column":63}},"16":{"start":{"line":47,"column":4},"end":{"line":48,"column":32}},"17":{"start":{"line":51,"column":4},"end":{"line":51,"column":46}},"18":{"start":{"line":54,"column":0},"end":{"line":60,"column":1}},"19":{"start":{"line":55,"column":4},"end":{"line":55,"column":20}},"20":{"start":{"line":57,"column":4},"end":{"line":57,"column":35}},"21":{"start":{"line":58,"column":4},"end":{"line":58,"column":41}},"22":{"start":{"line":59,"column":4},"end":{"line":59,"column":45}},"23":{"start":{"line":62,"column":0},"end":{"line":72,"column":2}},"24":{"start":{"line":64,"column":4},"end":{"line":64,"column":20}},"25":{"start":{"line":66,"column":4},"end":{"line":66,"column":55}},"26":{"start":{"line":67,"column":4},"end":{"line":67,"column":23}},"27":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"28":{"start":{"line":69,"column":8},"end":{"line":69,"column":70}},"29":{"start":{"line":71,"column":4},"end":{"line":71,"column":70}},"30":{"start":{"line":74,"column":0},"end":{"line":86,"column":2}},"31":{"start":{"line":75,"column":4},"end":{"line":75,"column":20}},"32":{"start":{"line":77,"column":4},"end":{"line":77,"column":67}},"33":{"start":{"line":79,"column":4},"end":{"line":83,"column":7}},"34":{"start":{"line":85,"column":4},"end":{"line":85,"column":15}},"35":{"start":{"line":89,"column":0},"end":{"line":144,"column":2}},"36":{"start":{"line":93,"column":4},"end":{"line":93,"column":20}},"37":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"38":{"start":{"line":96,"column":8},"end":{"line":96,"column":41}},"39":{"start":{"line":99,"column":4},"end":{"line":99,"column":70}},"40":{"start":{"line":100,"column":4},"end":{"line":101,"column":44}},"41":{"start":{"line":102,"column":4},"end":{"line":102,"column":51}},"42":{"start":{"line":104,"column":4},"end":{"line":109,"column":7}},"43":{"start":{"line":110,"column":4},"end":{"line":112,"column":5}},"44":{"start":{"line":111,"column":8},"end":{"line":111,"column":45}},"45":{"start":{"line":114,"column":4},"end":{"line":114,"column":28}},"46":{"start":{"line":116,"column":4},"end":{"line":121,"column":6}},"47":{"start":{"line":123,"column":4},"end":{"line":143,"column":5}},"48":{"start":{"line":124,"column":8},"end":{"line":126,"column":9}},"49":{"start":{"line":125,"column":12},"end":{"line":125,"column":33}},"50":{"start":{"line":128,"column":8},"end":{"line":133,"column":11}},"51":{"start":{"line":135,"column":8},"end":{"line":137,"column":9}},"52":{"start":{"line":136,"column":12},"end":{"line":136,"column":45}},"53":{"start":{"line":139,"column":8},"end":{"line":139,"column":34}},"54":{"start":{"line":140,"column":8},"end":{"line":140,"column":57}},"55":{"start":{"line":142,"column":8},"end":{"line":142,"column":33}},"56":{"start":{"line":146,"column":0},"end":{"line":160,"column":1}},"57":{"start":{"line":147,"column":4},"end":{"line":147,"column":20}},"58":{"start":{"line":149,"column":4},"end":{"line":149,"column":26}},"59":{"start":{"line":150,"column":4},"end":{"line":150,"column":33}},"60":{"start":{"line":151,"column":4},"end":{"line":151,"column":21}},"61":{"start":{"line":153,"column":4},"end":{"line":157,"column":5}},"62":{"start":{"line":154,"column":8},"end":{"line":154,"column":37}},"63":{"start":{"line":156,"column":8},"end":{"line":156,"column":64}},"64":{"start":{"line":159,"column":4},"end":{"line":159,"column":36}},"65":{"start":{"line":162,"column":0},"end":{"line":240,"column":2}},"66":{"start":{"line":165,"column":4},"end":{"line":165,"column":20}},"67":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"68":{"start":{"line":168,"column":8},"end":{"line":168,"column":38}},"69":{"start":{"line":171,"column":4},"end":{"line":171,"column":68}},"70":{"start":{"line":173,"column":4},"end":{"line":173,"column":45}},"71":{"start":{"line":175,"column":4},"end":{"line":239,"column":5}},"72":{"start":{"line":176,"column":8},"end":{"line":179,"column":9}},"73":{"start":{"line":177,"column":12},"end":{"line":177,"column":71}},"74":{"start":{"line":178,"column":12},"end":{"line":178,"column":56}},"75":{"start":{"line":181,"column":8},"end":{"line":186,"column":11}},"76":{"start":{"line":188,"column":8},"end":{"line":192,"column":9}},"77":{"start":{"line":189,"column":12},"end":{"line":190,"column":40}},"78":{"start":{"line":191,"column":12},"end":{"line":191,"column":57}},"79":{"start":{"line":194,"column":8},"end":{"line":194,"column":34}},"80":{"start":{"line":195,"column":8},"end":{"line":195,"column":59}},"81":{"start":{"line":197,"column":8},"end":{"line":238,"column":9}},"82":{"start":{"line":198,"column":12},"end":{"line":204,"column":13}},"83":{"start":{"line":199,"column":16},"end":{"line":202,"column":19}},"84":{"start":{"line":203,"column":16},"end":{"line":203,"column":76}},"85":{"start":{"line":206,"column":12},"end":{"line":217,"column":13}},"86":{"start":{"line":207,"column":16},"end":{"line":208,"column":67}},"87":{"start":{"line":209,"column":16},"end":{"line":210,"column":58}},"88":{"start":{"line":211,"column":19},"end":{"line":217,"column":13}},"89":{"start":{"line":213,"column":16},"end":{"line":216,"column":19}},"90":{"start":{"line":219,"column":12},"end":{"line":224,"column":15}},"91":{"start":{"line":226,"column":12},"end":{"line":229,"column":13}},"92":{"start":{"line":227,"column":16},"end":{"line":228,"column":48}},"93":{"start":{"line":231,"column":12},"end":{"line":237,"column":13}},"94":{"start":{"line":232,"column":16},"end":{"line":232,"column":40}},"95":{"start":{"line":233,"column":16},"end":{"line":236,"column":18}},"96":{"start":{"line":242,"column":0},"end":{"line":281,"column":2}},"97":{"start":{"line":243,"column":4},"end":{"line":243,"column":20}},"98":{"start":{"line":245,"column":4},"end":{"line":245,"column":45}},"99":{"start":{"line":246,"column":4},"end":{"line":259,"column":5}},"100":{"start":{"line":247,"column":8},"end":{"line":251,"column":11}},"101":{"start":{"line":253,"column":8},"end":{"line":257,"column":11}},"102":{"start":{"line":258,"column":8},"end":{"line":258,"column":44}},"103":{"start":{"line":261,"column":4},"end":{"line":261,"column":45}},"104":{"start":{"line":262,"column":4},"end":{"line":275,"column":5}},"105":{"start":{"line":263,"column":8},"end":{"line":267,"column":11}},"106":{"start":{"line":269,"column":8},"end":{"line":273,"column":11}},"107":{"start":{"line":274,"column":8},"end":{"line":274,"column":44}},"108":{"start":{"line":277,"column":4},"end":{"line":280,"column":7}},"109":{"start":{"line":283,"column":0},"end":{"line":328,"column":2}},"110":{"start":{"line":284,"column":4},"end":{"line":284,"column":20}},"111":{"start":{"line":286,"column":4},"end":{"line":286,"column":41}},"112":{"start":{"line":287,"column":4},"end":{"line":303,"column":5}},"113":{"start":{"line":288,"column":8},"end":{"line":292,"column":11}},"114":{"start":{"line":294,"column":8},"end":{"line":300,"column":9}},"115":{"start":{"line":295,"column":12},"end":{"line":299,"column":15}},"116":{"start":{"line":302,"column":8},"end":{"line":302,"column":40}},"117":{"start":{"line":305,"column":4},"end":{"line":305,"column":41}},"118":{"start":{"line":306,"column":4},"end":{"line":322,"column":5}},"119":{"start":{"line":307,"column":8},"end":{"line":311,"column":11}},"120":{"start":{"line":313,"column":8},"end":{"line":319,"column":9}},"121":{"start":{"line":314,"column":12},"end":{"line":318,"column":15}},"122":{"start":{"line":321,"column":8},"end":{"line":321,"column":40}},"123":{"start":{"line":324,"column":4},"end":{"line":327,"column":7}},"124":{"start":{"line":330,"column":0},"end":{"line":342,"column":1}},"125":{"start":{"line":331,"column":4},"end":{"line":331,"column":12}},"126":{"start":{"line":334,"column":4},"end":{"line":338,"column":5}},"127":{"start":{"line":335,"column":8},"end":{"line":335,"column":34}},"128":{"start":{"line":337,"column":8},"end":{"line":337,"column":29}},"129":{"start":{"line":341,"column":4},"end":{"line":341,"column":33}},"130":{"start":{"line":344,"column":0},"end":{"line":360,"column":1}},"131":{"start":{"line":345,"column":4},"end":{"line":347,"column":5}},"132":{"start":{"line":346,"column":8},"end":{"line":346,"column":38}},"133":{"start":{"line":349,"column":4},"end":{"line":349,"column":13}},"134":{"start":{"line":352,"column":4},"end":{"line":356,"column":5}},"135":{"start":{"line":353,"column":8},"end":{"line":353,"column":31}},"136":{"start":{"line":355,"column":8},"end":{"line":355,"column":29}},"137":{"start":{"line":359,"column":4},"end":{"line":359,"column":34}}},"branchMap":{"1":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"2":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":19},"end":{"line":43,"column":26}},{"start":{"line":43,"column":30},"end":{"line":43,"column":46}}]},"3":{"line":44,"type":"cond-expr","locations":[{"start":{"line":44,"column":52},"end":{"line":44,"column":60}},{"start":{"line":44,"column":63},"end":{"line":44,"column":68}}]},"4":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":27},"end":{"line":46,"column":34}},{"start":{"line":46,"column":38},"end":{"line":46,"column":62}}]},"5":{"line":47,"type":"cond-expr","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":24}},{"start":{"line":48,"column":27},"end":{"line":48,"column":31}}]},"6":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":26}},{"start":{"line":51,"column":30},"end":{"line":51,"column":45}}]},"7":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"8":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"9":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":11},"end":{"line":100,"column":46}},{"start":{"line":100,"column":50},"end":{"line":100,"column":72}}]},"10":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":4},"end":{"line":110,"column":4}},{"start":{"line":110,"column":4},"end":{"line":110,"column":4}}]},"11":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":19},"end":{"line":118,"column":45}},{"start":{"line":118,"column":49},"end":{"line":118,"column":51}}]},"12":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":19},"end":{"line":119,"column":45}},{"start":{"line":119,"column":49},"end":{"line":119,"column":51}}]},"13":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"14":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"15":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":153,"column":4}},{"start":{"line":153,"column":4},"end":{"line":153,"column":4}}]},"16":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"17":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":8},"end":{"line":176,"column":8}},{"start":{"line":176,"column":8},"end":{"line":176,"column":8}}]},"18":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":8},"end":{"line":188,"column":8}},{"start":{"line":188,"column":8},"end":{"line":188,"column":8}}]},"19":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":12},"end":{"line":198,"column":12}},{"start":{"line":198,"column":12},"end":{"line":198,"column":12}}]},"20":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":12},"end":{"line":206,"column":12}},{"start":{"line":206,"column":12},"end":{"line":206,"column":12}}]},"21":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":19},"end":{"line":211,"column":19}},{"start":{"line":211,"column":19},"end":{"line":211,"column":19}}]},"22":{"line":211,"type":"binary-expr","locations":[{"start":{"line":211,"column":23},"end":{"line":211,"column":57}},{"start":{"line":212,"column":23},"end":{"line":212,"column":52}}]},"23":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":12},"end":{"line":226,"column":12}},{"start":{"line":226,"column":12},"end":{"line":226,"column":12}}]},"24":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":12}},{"start":{"line":231,"column":12},"end":{"line":231,"column":12}}]},"25":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":4},"end":{"line":246,"column":4}},{"start":{"line":246,"column":4},"end":{"line":246,"column":4}}]},"26":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":4},"end":{"line":262,"column":4}},{"start":{"line":262,"column":4},"end":{"line":262,"column":4}}]},"27":{"line":287,"type":"if","locations":[{"start":{"line":287,"column":4},"end":{"line":287,"column":4}},{"start":{"line":287,"column":4},"end":{"line":287,"column":4}}]},"28":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":8},"end":{"line":294,"column":8}},{"start":{"line":294,"column":8},"end":{"line":294,"column":8}}]},"29":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":4},"end":{"line":306,"column":4}},{"start":{"line":306,"column":4},"end":{"line":306,"column":4}}]},"30":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":8},"end":{"line":313,"column":8}},{"start":{"line":313,"column":8},"end":{"line":313,"column":8}}]},"31":{"line":345,"type":"if","locations":[{"start":{"line":345,"column":4},"end":{"line":345,"column":4}},{"start":{"line":345,"column":4},"end":{"line":345,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var Buffer = require('buffer').Buffer;","var assert = require('assert');","var Result = require('bufrw/result');","var cyclicStringify = require('json-stringify-safe');","var extend = require('xtend');","","var errors = require('../errors.js');","","module.exports = TChannelJSON;","","function TChannelJSON(options) {","    if (!(this instanceof TChannelJSON)) {","        return new TChannelJSON(options);","    }","","    var self = this;","","    // lazily populated from tchannel","    self.logger = null;","","    var bossMode = options && options.bossMode;","    self.bossMode = typeof bossMode === 'boolean' ? bossMode : false;","","    var logParseFailures = options && options.logParseFailures;","    self.logParseFailures = typeof logParseFailures === 'boolean' ?","        logParseFailures : true;","","    // only used in request()","    self.channel = options && options.channel;","}","","function TChannelJSONRequest(options) {","    var self = this;","","    self.channel = options.channel;","    self.reqOptions = options.reqOptions;","    self.tchannelJSON = options.tchannelJSON;","}","","TChannelJSONRequest.prototype.send =","function send(endpoint, head, body, callback) {","    var self = this;","","    var outreq = self.channel.request(self.reqOptions);","    var headers = head;","    if (self.reqOptions.defaultRequestHeaders) {","        headers = extend(self.reqOptions.defaultRequestHeaders, head);","    }","    self.tchannelJSON.send(outreq, endpoint, headers, body, callback);","};","","TChannelJSON.prototype.request = function request(reqOptions) {","    var self = this;","","    assert(self.channel, 'channel is required for json.request()');","","    var req = new TChannelJSONRequest({","        channel: self.channel,","        reqOptions: reqOptions,","        tchannelJSON: self","    });","","    return req;","};","","/*eslint max-params: [2, 5]*/","TChannelJSON.prototype.send = function send(","    req, endpoint, head, body, callback",") {","","    var self = this;","","    if (!self.logger) {","        self.logger = req.channel.logger;","    }","","    assert(typeof endpoint === 'string', 'endpoint must be a string');","    assert(typeof req.serviceName === 'string' && req.serviceName !== '',","        'req.serviceName must be a string');","    assert(body !== undefined, 'must send a body');","","    var stringifyResult = self._stringify({","        head: head,","        body: body,","        endpoint: endpoint,","        direction: 'out.request'","    });","    if (stringifyResult.err) {","        return callback(stringifyResult.err);","    }","","    req.headers.as = 'json';","","    req.send(","        new Buffer(endpoint),","        new Buffer(stringifyResult.value.head || ''),","        new Buffer(stringifyResult.value.body || ''),","        onResponse","    );","","    function onResponse(err, resp, arg2, arg3) {","        if (err) {","            return callback(err);","        }","","        var parseResult = self._parse({","            head: arg2.toString('utf8'),","            body: arg3.toString('utf8'),","            endpoint: endpoint,","            direction: 'in.response'","        });","","        if (parseResult.err) {","            return callback(parseResult.err);","        }","","        var v = parseResult.value;","        var response = new TChannelJSONResponse(resp, v);","","        callback(null, response);","    }","};","","function TChannelJSONResponse(response, parseResult) {","    var self = this;","","    self.ok = response.ok;","    self.head = parseResult.head;","    self.body = null;","","    if (response.ok) {","        self.body = parseResult.body;","    } else {","        self.body = errors.ReconstructedError(parseResult.body);","    }","","    self.headers = response.headers;","}","","TChannelJSON.prototype.register = function register(","    tchannel, arg1, opts, handlerFunc",") {","    var self = this;","","    if (!self.logger) {","        self.logger = tchannel.logger;","    }","","    assert(typeof arg1 === 'string', 'endpoint has to be a string');","","    tchannel.register(arg1, endpointHandler);","","    function endpointHandler(req, res, arg2, arg3) {","        if (req.headers.as !== 'json') {","            var message = 'Expected call request as header to be json';","            return res.sendError('BadRequest', message);","        }","","        var parseResult = self._parse({","            head: arg2.toString('utf8'),","            body: arg3.toString('utf8'),","            endpoint: arg1,","            direction: 'in.request'","        });","","        if (parseResult.err) {","            var message2 = parseResult.err.type + ': ' +","                parseResult.err.message;","            return res.sendError('BadRequest', message2);","        }","","        var v = parseResult.value;","        handlerFunc(opts, req, v.head, v.body, onResponse);","","        function onResponse(err, respObject) {","            if (err) {","                self.logger.error('Got unexpected error in handler', {","                    endpoint: arg1,","                    error: err","                });","                return res.sendError('UnexpectedError', 'Unexpected Error');","            }","","            if (!self.bossMode) {","                assert(typeof respObject.ok === 'boolean',","                    'expected respObject to have an `ok` boolean');","                assert(respObject.body !== undefined,","                    'expected respObject to have a body');","            } else if (typeof respObject.ok !== 'boolean' ||","                       respObject.body === undefined) {","                respObject.body = errors.InvalidJSONBody({","                    head: respObject.head,","                    body: respObject.body","                });","            }","","            var stringifyResult = self._stringify({","                head: respObject.head,","                body: respObject.body,","                endpoint: arg1,","                direction: 'out.response'","            });","","            if (stringifyResult.err) {","                return res.sendError('UnexpectedError',","                    'Could not JSON stringify');","            }","","            if (res.setOk(respObject.ok)) {","                res.headers.as = 'json';","                res.send(","                    stringifyResult.value.head,","                    stringifyResult.value.body","                );","            }","        }","    }","};","","TChannelJSON.prototype._stringify = function stringify(opts) {","    var self = this;","","    var headR = safeJSONStringify(opts.head);","    if (headR.err) {","        var headStringifyErr = errors.JSONHeadStringifyError(headR.err, {","            endpoint: opts.endpoint,","            direction: opts.direction,","            head: cyclicStringify(opts.head)","        });","","        self.logger.error('Got unexpected unserializable JSON for arg2', {","            endpoint: opts.endpoint,","            direction: opts.direction,","            headErr: headStringifyErr","        });","        return new Result(headStringifyErr);","    }","","    var bodyR = safeJSONStringify(opts.body);","    if (bodyR.err) {","        var bodyStringifyErr = errors.JSONBodyStringifyError(bodyR.err, {","            endpoint: opts.endpoint,","            direction: opts.direction,","            body: cyclicStringify(opts.body)","        });","","        self.logger.error('Got unexpected unserializable JSON for arg3', {","            endpoint: opts.endpoint,","            direction: opts.direction,","            bodyErr: bodyStringifyErr","        });","        return new Result(bodyStringifyErr);","    }","","    return new Result(null, {","        head: headR.value,","        body: bodyR.value","    });","};","","TChannelJSON.prototype._parse = function parse(opts) {","    var self = this;","","    var headR = safeJSONParse(opts.head);","    if (headR.err) {","        var headParseErr = errors.JSONHeadParserError(headR.err, {","            endpoint: opts.endpoint,","            direction: opts.direction,","            headStr: opts.head.slice(0, 10)","        });","","        if (self.logParseFailures) {","            self.logger.warn('Got unexpected invalid JSON for arg2', {","                endpoint: opts.endpoint,","                direction: opts.direction,","                headErr: headParseErr","            });","        }","","        return new Result(headParseErr);","    }","","    var bodyR = safeJSONParse(opts.body);","    if (bodyR.err) {","        var bodyParseErr = errors.JSONBodyParserError(bodyR.err, {","            endpoint: opts.endpoint,","            direction: opts.direction,","            bodyStr: opts.body.slice(0, 10)","        });","","        if (self.logParseFailures) {","            self.logger.warn('Got unexpected invalid JSON for arg3', {","                endpoint: opts.endpoint,","                direction: opts.direction,","                bodyErr: bodyParseErr","            });","        }","","        return new Result(bodyParseErr);","    }","","    return new Result(null, {","        head: headR.value,","        body: bodyR.value","    });","};","","function safeJSONStringify(obj) {","    var str;","","    // jscs:disable","    try {","        str = JSON.stringify(obj);","    } catch (e) {","        return new Result(e);","    }","    // jscs:enable","","    return new Result(null, str);","}","","function safeJSONParse(str) {","    if (str === '') {","        return new Result(null, null);","    }","","    var json;","","    // jscs:disable","    try {","        json = JSON.parse(str);","    } catch (e) {","        return new Result(e);","    }","    // jscs:enable","","    return new Result(null, json);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"29":1,"31":1,"33":1,"34":0,"35":0,"38":0,"41":0,"43":0,"44":0,"46":0,"47":0,"51":0,"54":1,"55":0,"57":0,"58":0,"59":0,"62":1,"64":0,"66":0,"67":0,"68":0,"69":0,"71":0,"74":1,"75":0,"77":0,"79":0,"85":0,"89":1,"93":0,"95":0,"96":0,"99":0,"100":0,"102":0,"104":0,"110":0,"111":0,"114":0,"116":0,"123":1,"124":0,"125":0,"128":0,"135":0,"136":0,"139":0,"140":0,"142":0,"146":1,"147":0,"149":0,"150":0,"151":0,"153":0,"154":0,"156":0,"159":0,"162":1,"165":0,"167":0,"168":0,"171":0,"173":0,"175":1,"176":0,"177":0,"178":0,"181":0,"188":0,"189":0,"191":0,"194":0,"195":0,"197":1,"198":0,"199":0,"203":0,"206":0,"207":0,"209":0,"211":0,"213":0,"219":0,"226":0,"227":0,"231":0,"232":0,"233":0,"242":1,"243":0,"245":0,"246":0,"247":0,"253":0,"258":0,"261":0,"262":0,"263":0,"269":0,"274":0,"277":0,"283":1,"284":0,"286":0,"287":0,"288":0,"294":0,"295":0,"302":0,"305":0,"306":0,"307":0,"313":0,"314":0,"321":0,"324":0,"330":1,"331":0,"334":0,"335":0,"337":0,"341":0,"344":1,"345":0,"346":0,"349":0,"352":0,"353":0,"355":0,"359":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/connection.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/connection.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":1,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1,"121":0,"122":0,"123":0,"124":1,"125":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":1,"143":0,"144":1,"145":0,"146":1,"147":0,"148":0,"149":1,"150":0,"151":1,"152":0,"153":1,"154":0,"155":0,"156":1,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":1,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":1,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":1,"193":0,"194":0,"195":0,"196":0,"197":0,"198":1,"199":0,"200":0,"201":0,"202":1,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":1,"210":0,"211":1,"212":1,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":1,"226":0,"227":1,"228":0,"229":1,"230":0,"231":1,"232":0,"233":1,"234":0,"235":1,"236":0,"237":1,"238":0,"239":1,"240":0,"241":1,"242":0,"243":0,"244":0,"245":0,"246":1,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":1,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":1,"268":0,"269":0,"270":1,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":1,"287":0,"288":1,"289":0,"290":0,"291":0,"292":0,"293":0,"294":1,"295":0,"296":0,"297":1,"298":0,"299":0,"300":0,"301":0,"302":1,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":1,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":1,"326":0,"327":0,"328":0,"329":0,"330":1,"331":0,"332":0,"333":0,"334":0,"335":1,"336":0,"337":0,"338":1,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":1,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":1,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":1,"374":0,"375":0,"376":1,"377":0,"378":0,"379":1,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":1,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":1,"397":0,"398":0,"399":0,"400":0,"401":0,"402":1,"403":0,"404":0,"405":0,"406":1,"407":0,"408":0,"409":1,"410":0,"411":0,"412":0,"413":0,"414":1,"415":0,"416":0,"417":1,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":1,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":1,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":1,"477":0,"478":0,"479":0,"480":0,"481":1,"482":0,"483":0,"484":0,"485":0,"486":0,"487":0,"488":0,"489":1,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":1,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":1,"506":0,"507":0,"508":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0,0],"13":[0,0,0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0,0,0,0,0,0,0,0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0},"fnMap":{"1":{"name":"TChannelConnection","line":41,"loc":{"start":{"line":41,"column":0},"end":{"line":43,"column":2}}},"2":{"name":"handleCallLazily","line":132,"loc":{"start":{"line":132,"column":4},"end":{"line":132,"column":37}}},"3":{"name":"extendLogInfo","line":138,"loc":{"start":{"line":138,"column":45},"end":{"line":138,"column":74}}},"4":{"name":"drain","line":153,"loc":{"start":{"line":153,"column":0},"end":{"line":153,"column":33}}},"5":{"name":"_drain","line":168,"loc":{"start":{"line":168,"column":0},"end":{"line":168,"column":32}}},"6":{"name":"sendDrainingFrame","line":181,"loc":{"start":{"line":181,"column":4},"end":{"line":181,"column":33}}},"7":{"name":"connBaseRequest","line":191,"loc":{"start":{"line":191,"column":0},"end":{"line":191,"column":34}}},"8":{"name":"handleCallRequest","line":217,"loc":{"start":{"line":217,"column":49},"end":{"line":217,"column":81}}},"9":{"name":"runHandler","line":234,"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":26}}},"10":{"name":"handleCallLazily","line":239,"loc":{"start":{"line":239,"column":48},"end":{"line":239,"column":81}}},"11":{"name":"runHandler","line":266,"loc":{"start":{"line":266,"column":42},"end":{"line":266,"column":67}}},"12":{"name":"buildResponse","line":281,"loc":{"start":{"line":281,"column":4},"end":{"line":281,"column":36}}},"13":{"name":"buildResponse","line":287,"loc":{"start":{"line":287,"column":0},"end":{"line":287,"column":37}}},"14":{"name":"_buildResponse","line":304,"loc":{"start":{"line":304,"column":0},"end":{"line":304,"column":38}}},"15":{"name":"opDone","line":322,"loc":{"start":{"line":322,"column":4},"end":{"line":322,"column":22}}},"16":{"name":"onError","line":326,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":26}}},"17":{"name":"captureResponseSpans","line":332,"loc":{"start":{"line":332,"column":0},"end":{"line":332,"column":35}}},"18":{"name":"handleSpanFromRes","line":337,"loc":{"start":{"line":337,"column":4},"end":{"line":337,"column":37}}},"19":{"name":"isStringOrBuffer","line":342,"loc":{"start":{"line":342,"column":0},"end":{"line":342,"column":29}}},"20":{"name":"handleSpanFromRes","line":347,"loc":{"start":{"line":347,"column":0},"end":{"line":347,"column":33}}},"21":{"name":"onResponseError","line":354,"loc":{"start":{"line":354,"column":0},"end":{"line":354,"column":35}}},"22":{"name":"onReqDone","line":395,"loc":{"start":{"line":395,"column":41},"end":{"line":395,"column":65}}},"23":{"name":"setLazyHandling","line":425,"loc":{"start":{"line":425,"column":47},"end":{"line":425,"column":81}}},"24":{"name":"setupSocket","line":440,"loc":{"start":{"line":440,"column":43},"end":{"line":440,"column":66}}},"25":{"name":"onSocketChunk","line":453,"loc":{"start":{"line":453,"column":4},"end":{"line":453,"column":34}}},"26":{"name":"onSocketClose","line":461,"loc":{"start":{"line":461,"column":4},"end":{"line":461,"column":29}}},"27":{"name":"onSocketError","line":478,"loc":{"start":{"line":478,"column":4},"end":{"line":478,"column":32}}},"28":{"name":"noop","line":483,"loc":{"start":{"line":483,"column":0},"end":{"line":483,"column":16}}},"29":{"name":"setupHandler","line":485,"loc":{"start":{"line":485,"column":44},"end":{"line":485,"column":68}}},"30":{"name":"write","line":490,"loc":{"start":{"line":490,"column":25},"end":{"line":490,"column":45}}},"31":{"name":"onWriteError","line":524,"loc":{"start":{"line":524,"column":4},"end":{"line":524,"column":31}}},"32":{"name":"onHandlerError","line":528,"loc":{"start":{"line":528,"column":4},"end":{"line":528,"column":33}}},"33":{"name":"onErrorFrame","line":532,"loc":{"start":{"line":532,"column":4},"end":{"line":532,"column":36}}},"34":{"name":"handleReadFrame","line":536,"loc":{"start":{"line":536,"column":4},"end":{"line":536,"column":36}}},"35":{"name":"onCallRequest","line":540,"loc":{"start":{"line":540,"column":4},"end":{"line":540,"column":32}}},"36":{"name":"onCallResponse","line":544,"loc":{"start":{"line":544,"column":4},"end":{"line":544,"column":33}}},"37":{"name":"onPingResponse","line":548,"loc":{"start":{"line":548,"column":4},"end":{"line":548,"column":33}}},"38":{"name":"onCallErrorFrame","line":552,"loc":{"start":{"line":552,"column":4},"end":{"line":552,"column":40}}},"39":{"name":"getSocketBuffer","line":557,"loc":{"start":{"line":557,"column":0},"end":{"line":557,"column":33}}},"40":{"name":"writeToSocket","line":570,"loc":{"start":{"line":570,"column":0},"end":{"line":570,"column":28}}},"41":{"name":"sendProtocolError","line":597,"loc":{"start":{"line":597,"column":0},"end":{"line":597,"column":38}}},"42":{"name":"onWriteError","line":636,"loc":{"start":{"line":636,"column":44},"end":{"line":636,"column":71}}},"43":{"name":"onErrorFrame","line":642,"loc":{"start":{"line":642,"column":44},"end":{"line":642,"column":76}}},"44":{"name":"logUnhandled","line":684,"loc":{"start":{"line":684,"column":4},"end":{"line":684,"column":36}}},"45":{"name":"onHandlerError","line":695,"loc":{"start":{"line":695,"column":46},"end":{"line":695,"column":75}}},"46":{"name":"handlePingResponse","line":706,"loc":{"start":{"line":706,"column":50},"end":{"line":706,"column":88}}},"47":{"name":"handleReadFrame","line":712,"loc":{"start":{"line":712,"column":47},"end":{"line":712,"column":79}}},"48":{"name":"onCallResponse","line":722,"loc":{"start":{"line":722,"column":46},"end":{"line":722,"column":75}}},"49":{"name":"logUnknownCallResponse","line":748,"loc":{"start":{"line":748,"column":0},"end":{"line":748,"column":37}}},"50":{"name":"_deferPopOutReq","line":765,"loc":{"start":{"line":765,"column":47},"end":{"line":765,"column":77}}},"51":{"name":"popOutReq","line":773,"loc":{"start":{"line":773,"column":4},"end":{"line":773,"column":25}}},"52":{"name":"ping","line":783,"loc":{"start":{"line":783,"column":36},"end":{"line":783,"column":52}}},"53":{"name":"onCallErrorFrame","line":789,"loc":{"start":{"line":789,"column":0},"end":{"line":789,"column":36}}},"54":{"name":"logUnknownErrorFrame","line":817,"loc":{"start":{"line":817,"column":0},"end":{"line":817,"column":39}}},"55":{"name":"start","line":843,"loc":{"start":{"line":843,"column":37},"end":{"line":843,"column":54}}},"56":{"name":"onOutIdentified","line":856,"loc":{"start":{"line":856,"column":4},"end":{"line":856,"column":35}}},"57":{"name":"onInIdentified","line":861,"loc":{"start":{"line":861,"column":4},"end":{"line":861,"column":34}}},"58":{"name":"onOutIdentified","line":867,"loc":{"start":{"line":867,"column":47},"end":{"line":867,"column":78}}},"59":{"name":"onInIdentified","line":886,"loc":{"start":{"line":886,"column":46},"end":{"line":886,"column":76}}},"60":{"name":"close","line":905,"loc":{"start":{"line":905,"column":37},"end":{"line":905,"column":62}}},"61":{"name":"onSocketError","line":915,"loc":{"start":{"line":915,"column":45},"end":{"line":915,"column":73}}},"62":{"name":"nextFrameId","line":926,"loc":{"start":{"line":926,"column":43},"end":{"line":926,"column":66}}},"63":{"name":"buildOutRequest","line":931,"loc":{"start":{"line":931,"column":47},"end":{"line":931,"column":81}}},"64":{"name":"onReqError","line":937,"loc":{"start":{"line":937,"column":4},"end":{"line":937,"column":29}}},"65":{"name":"buildOutResponse","line":945,"loc":{"start":{"line":945,"column":48},"end":{"line":945,"column":88}}},"66":{"name":"resetAll","line":966,"loc":{"start":{"line":966,"column":40},"end":{"line":966,"column":63}}},"67":{"name":"eachInOp","line":1045,"loc":{"start":{"line":1045,"column":21},"end":{"line":1045,"column":43}}},"68":{"name":"eachOutOp","line":1052,"loc":{"start":{"line":1052,"column":22},"end":{"line":1052,"column":45}}},"69":{"name":"makeReqError","line":1060,"loc":{"start":{"line":1060,"column":4},"end":{"line":1060,"column":31}}},"70":{"name":"InitOperation","line":1090,"loc":{"start":{"line":1090,"column":0},"end":{"line":1090,"column":50}}},"71":{"name":"onTimeout","line":1098,"loc":{"start":{"line":1098,"column":36},"end":{"line":1098,"column":60}}},"72":{"name":"sendLazyErrorFrameForReq","line":1120,"loc":{"start":{"line":1120,"column":0},"end":{"line":1120,"column":65}}},"73":{"name":"_observeInboundErrorFrame","line":1133,"loc":{"start":{"line":1133,"column":0},"end":{"line":1133,"column":60}}},"74":{"name":"sendLazyErrorFrame","line":1172,"loc":{"start":{"line":1172,"column":0},"end":{"line":1172,"column":62}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":38}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":30}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":55}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":37}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":50}},"10":{"start":{"line":33,"column":0},"end":{"line":33,"column":25}},"11":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}},"12":{"start":{"line":35,"column":0},"end":{"line":35,"column":40}},"13":{"start":{"line":36,"column":0},"end":{"line":36,"column":41}},"14":{"start":{"line":38,"column":0},"end":{"line":38,"column":35}},"15":{"start":{"line":39,"column":0},"end":{"line":39,"column":39}},"16":{"start":{"line":41,"column":0},"end":{"line":135,"column":1}},"17":{"start":{"line":44,"column":4},"end":{"line":44,"column":84}},"18":{"start":{"line":46,"column":4},"end":{"line":46,"column":28}},"19":{"start":{"line":47,"column":4},"end":{"line":47,"column":48}},"20":{"start":{"line":48,"column":4},"end":{"line":48,"column":54}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":61}},"22":{"start":{"line":51,"column":4},"end":{"line":51,"column":26}},"23":{"start":{"line":52,"column":4},"end":{"line":52,"column":26}},"24":{"start":{"line":54,"column":4},"end":{"line":54,"column":25}},"25":{"start":{"line":55,"column":4},"end":{"line":55,"column":27}},"26":{"start":{"line":56,"column":4},"end":{"line":56,"column":48}},"27":{"start":{"line":58,"column":4},"end":{"line":58,"column":27}},"28":{"start":{"line":59,"column":4},"end":{"line":59,"column":40}},"29":{"start":{"line":60,"column":4},"end":{"line":60,"column":33}},"30":{"start":{"line":61,"column":4},"end":{"line":61,"column":33}},"31":{"start":{"line":62,"column":4},"end":{"line":62,"column":33}},"32":{"start":{"line":63,"column":4},"end":{"line":63,"column":31}},"33":{"start":{"line":64,"column":4},"end":{"line":64,"column":75}},"34":{"start":{"line":65,"column":4},"end":{"line":65,"column":45}},"35":{"start":{"line":66,"column":4},"end":{"line":66,"column":27}},"36":{"start":{"line":68,"column":4},"end":{"line":76,"column":7}},"37":{"start":{"line":78,"column":4},"end":{"line":78,"column":51}},"38":{"start":{"line":80,"column":4},"end":{"line":80,"column":38}},"39":{"start":{"line":81,"column":4},"end":{"line":81,"column":58}},"40":{"start":{"line":83,"column":4},"end":{"line":103,"column":5}},"41":{"start":{"line":84,"column":8},"end":{"line":93,"column":9}},"42":{"start":{"line":85,"column":12},"end":{"line":92,"column":19}},"43":{"start":{"line":94,"column":11},"end":{"line":103,"column":5}},"44":{"start":{"line":95,"column":8},"end":{"line":102,"column":15}},"45":{"start":{"line":105,"column":4},"end":{"line":105,"column":25}},"46":{"start":{"line":106,"column":4},"end":{"line":106,"column":27}},"47":{"start":{"line":107,"column":4},"end":{"line":107,"column":28}},"48":{"start":{"line":109,"column":4},"end":{"line":109,"column":20}},"49":{"start":{"line":111,"column":4},"end":{"line":122,"column":6}},"50":{"start":{"line":124,"column":4},"end":{"line":124,"column":40}},"51":{"start":{"line":126,"column":4},"end":{"line":126,"column":57}},"52":{"start":{"line":128,"column":4},"end":{"line":128,"column":23}},"53":{"start":{"line":129,"column":4},"end":{"line":129,"column":24}},"54":{"start":{"line":130,"column":4},"end":{"line":130,"column":17}},"55":{"start":{"line":132,"column":4},"end":{"line":134,"column":5}},"56":{"start":{"line":133,"column":8},"end":{"line":133,"column":44}},"57":{"start":{"line":136,"column":0},"end":{"line":136,"column":43}},"58":{"start":{"line":138,"column":0},"end":{"line":150,"column":2}},"59":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"60":{"start":{"line":141,"column":4},"end":{"line":141,"column":44}},"61":{"start":{"line":143,"column":4},"end":{"line":143,"column":30}},"62":{"start":{"line":144,"column":4},"end":{"line":144,"column":40}},"63":{"start":{"line":145,"column":4},"end":{"line":145,"column":50}},"64":{"start":{"line":146,"column":4},"end":{"line":146,"column":38}},"65":{"start":{"line":147,"column":4},"end":{"line":147,"column":36}},"66":{"start":{"line":149,"column":4},"end":{"line":149,"column":16}},"67":{"start":{"line":152,"column":0},"end":{"line":165,"column":2}},"68":{"start":{"line":154,"column":4},"end":{"line":154,"column":20}},"69":{"start":{"line":156,"column":4},"end":{"line":156,"column":24}},"70":{"start":{"line":158,"column":4},"end":{"line":164,"column":5}},"71":{"start":{"line":159,"column":8},"end":{"line":163,"column":9}},"72":{"start":{"line":160,"column":12},"end":{"line":160,"column":39}},"73":{"start":{"line":162,"column":12},"end":{"line":162,"column":45}},"74":{"start":{"line":167,"column":0},"end":{"line":187,"column":2}},"75":{"start":{"line":169,"column":4},"end":{"line":169,"column":20}},"76":{"start":{"line":171,"column":4},"end":{"line":171,"column":25}},"77":{"start":{"line":172,"column":4},"end":{"line":172,"column":30}},"78":{"start":{"line":173,"column":4},"end":{"line":173,"column":29}},"79":{"start":{"line":175,"column":4},"end":{"line":179,"column":5}},"80":{"start":{"line":176,"column":8},"end":{"line":176,"column":28}},"81":{"start":{"line":178,"column":8},"end":{"line":178,"column":51}},"82":{"start":{"line":181,"column":4},"end":{"line":186,"column":5}},"83":{"start":{"line":182,"column":8},"end":{"line":185,"column":45}},"84":{"start":{"line":190,"column":0},"end":{"line":215,"column":2}},"85":{"start":{"line":192,"column":4},"end":{"line":192,"column":20}},"86":{"start":{"line":194,"column":4},"end":{"line":194,"column":69}},"87":{"start":{"line":195,"column":4},"end":{"line":195,"column":41}},"88":{"start":{"line":204,"column":4},"end":{"line":204,"column":44}},"89":{"start":{"line":205,"column":4},"end":{"line":211,"column":5}},"90":{"start":{"line":209,"column":8},"end":{"line":209,"column":27}},"91":{"start":{"line":210,"column":8},"end":{"line":210,"column":43}},"92":{"start":{"line":212,"column":4},"end":{"line":212,"column":28}},"93":{"start":{"line":213,"column":4},"end":{"line":213,"column":45}},"94":{"start":{"line":214,"column":4},"end":{"line":214,"column":15}},"95":{"start":{"line":217,"column":0},"end":{"line":237,"column":2}},"96":{"start":{"line":218,"column":4},"end":{"line":218,"column":20}},"97":{"start":{"line":220,"column":4},"end":{"line":220,"column":37}},"98":{"start":{"line":221,"column":4},"end":{"line":221,"column":27}},"99":{"start":{"line":223,"column":4},"end":{"line":230,"column":5}},"100":{"start":{"line":227,"column":8},"end":{"line":227,"column":46}},"101":{"start":{"line":228,"column":8},"end":{"line":228,"column":78}},"102":{"start":{"line":229,"column":8},"end":{"line":229,"column":15}},"103":{"start":{"line":232,"column":4},"end":{"line":232,"column":33}},"104":{"start":{"line":234,"column":4},"end":{"line":236,"column":5}},"105":{"start":{"line":235,"column":8},"end":{"line":235,"column":29}},"106":{"start":{"line":239,"column":0},"end":{"line":264,"column":2}},"107":{"start":{"line":240,"column":4},"end":{"line":240,"column":20}},"108":{"start":{"line":241,"column":4},"end":{"line":241,"column":18}},"109":{"start":{"line":243,"column":4},"end":{"line":257,"column":5}},"110":{"start":{"line":245,"column":12},"end":{"line":246,"column":66}},"111":{"start":{"line":250,"column":12},"end":{"line":250,"column":46}},"112":{"start":{"line":251,"column":12},"end":{"line":251,"column":18}},"113":{"start":{"line":253,"column":12},"end":{"line":253,"column":45}},"114":{"start":{"line":254,"column":12},"end":{"line":254,"column":18}},"115":{"start":{"line":256,"column":12},"end":{"line":256,"column":25}},"116":{"start":{"line":259,"column":4},"end":{"line":261,"column":5}},"117":{"start":{"line":260,"column":8},"end":{"line":260,"column":21}},"118":{"start":{"line":262,"column":4},"end":{"line":262,"column":32}},"119":{"start":{"line":263,"column":4},"end":{"line":263,"column":16}},"120":{"start":{"line":266,"column":0},"end":{"line":284,"column":2}},"121":{"start":{"line":267,"column":4},"end":{"line":267,"column":20}},"122":{"start":{"line":269,"column":4},"end":{"line":278,"column":6}},"123":{"start":{"line":280,"column":4},"end":{"line":280,"column":59}},"124":{"start":{"line":281,"column":4},"end":{"line":283,"column":5}},"125":{"start":{"line":282,"column":8},"end":{"line":282,"column":54}},"126":{"start":{"line":286,"column":0},"end":{"line":301,"column":2}},"127":{"start":{"line":288,"column":4},"end":{"line":288,"column":20}},"128":{"start":{"line":290,"column":4},"end":{"line":298,"column":5}},"129":{"start":{"line":291,"column":8},"end":{"line":296,"column":12}},"130":{"start":{"line":297,"column":8},"end":{"line":297,"column":23}},"131":{"start":{"line":300,"column":4},"end":{"line":300,"column":45}},"132":{"start":{"line":303,"column":0},"end":{"line":329,"column":2}},"133":{"start":{"line":305,"column":4},"end":{"line":305,"column":20}},"134":{"start":{"line":307,"column":4},"end":{"line":307,"column":35}},"135":{"start":{"line":308,"column":4},"end":{"line":308,"column":24}},"136":{"start":{"line":311,"column":4},"end":{"line":311,"column":50}},"137":{"start":{"line":313,"column":4},"end":{"line":313,"column":35}},"138":{"start":{"line":314,"column":4},"end":{"line":314,"column":35}},"139":{"start":{"line":316,"column":4},"end":{"line":318,"column":5}},"140":{"start":{"line":317,"column":8},"end":{"line":317,"column":43}},"141":{"start":{"line":320,"column":4},"end":{"line":320,"column":19}},"142":{"start":{"line":322,"column":4},"end":{"line":324,"column":5}},"143":{"start":{"line":323,"column":8},"end":{"line":323,"column":28}},"144":{"start":{"line":326,"column":4},"end":{"line":328,"column":5}},"145":{"start":{"line":327,"column":8},"end":{"line":327,"column":39}},"146":{"start":{"line":331,"column":0},"end":{"line":340,"column":2}},"147":{"start":{"line":333,"column":4},"end":{"line":333,"column":20}},"148":{"start":{"line":335,"column":4},"end":{"line":335,"column":40}},"149":{"start":{"line":337,"column":4},"end":{"line":339,"column":5}},"150":{"start":{"line":338,"column":8},"end":{"line":338,"column":37}},"151":{"start":{"line":342,"column":0},"end":{"line":344,"column":1}},"152":{"start":{"line":343,"column":4},"end":{"line":343,"column":55}},"153":{"start":{"line":346,"column":0},"end":{"line":351,"column":2}},"154":{"start":{"line":348,"column":4},"end":{"line":348,"column":20}},"155":{"start":{"line":350,"column":4},"end":{"line":350,"column":37}},"156":{"start":{"line":353,"column":0},"end":{"line":393,"column":2}},"157":{"start":{"line":355,"column":4},"end":{"line":355,"column":20}},"158":{"start":{"line":357,"column":4},"end":{"line":358,"column":61}},"159":{"start":{"line":361,"column":4},"end":{"line":363,"column":5}},"160":{"start":{"line":362,"column":8},"end":{"line":362,"column":15}},"161":{"start":{"line":365,"column":4},"end":{"line":367,"column":8}},"162":{"start":{"line":369,"column":4},"end":{"line":379,"column":5}},"163":{"start":{"line":370,"column":8},"end":{"line":371,"column":39}},"164":{"start":{"line":372,"column":8},"end":{"line":373,"column":39}},"165":{"start":{"line":375,"column":8},"end":{"line":375,"column":51}},"166":{"start":{"line":376,"column":8},"end":{"line":376,"column":56}},"167":{"start":{"line":377,"column":8},"end":{"line":377,"column":51}},"168":{"start":{"line":378,"column":8},"end":{"line":378,"column":56}},"169":{"start":{"line":381,"column":4},"end":{"line":392,"column":5}},"170":{"start":{"line":385,"column":8},"end":{"line":387,"column":10}},"171":{"start":{"line":389,"column":8},"end":{"line":391,"column":10}},"172":{"start":{"line":395,"column":0},"end":{"line":423,"column":2}},"173":{"start":{"line":396,"column":4},"end":{"line":396,"column":20}},"174":{"start":{"line":398,"column":4},"end":{"line":398,"column":42}},"175":{"start":{"line":400,"column":4},"end":{"line":402,"column":5}},"176":{"start":{"line":401,"column":8},"end":{"line":401,"column":15}},"177":{"start":{"line":405,"column":4},"end":{"line":407,"column":5}},"178":{"start":{"line":406,"column":8},"end":{"line":406,"column":15}},"179":{"start":{"line":409,"column":4},"end":{"line":413,"column":5}},"180":{"start":{"line":411,"column":8},"end":{"line":411,"column":97}},"181":{"start":{"line":412,"column":8},"end":{"line":412,"column":15}},"182":{"start":{"line":416,"column":4},"end":{"line":420,"column":5}},"183":{"start":{"line":419,"column":8},"end":{"line":419,"column":15}},"184":{"start":{"line":422,"column":4},"end":{"line":422,"column":91}},"185":{"start":{"line":425,"column":0},"end":{"line":438,"column":2}},"186":{"start":{"line":426,"column":4},"end":{"line":426,"column":20}},"187":{"start":{"line":432,"column":4},"end":{"line":436,"column":5}},"188":{"start":{"line":433,"column":8},"end":{"line":433,"column":44}},"189":{"start":{"line":434,"column":11},"end":{"line":436,"column":5}},"190":{"start":{"line":435,"column":8},"end":{"line":435,"column":40}},"191":{"start":{"line":437,"column":4},"end":{"line":437,"column":40}},"192":{"start":{"line":440,"column":0},"end":{"line":481,"column":2}},"193":{"start":{"line":441,"column":4},"end":{"line":441,"column":20}},"194":{"start":{"line":443,"column":4},"end":{"line":443,"column":33}},"195":{"start":{"line":448,"column":4},"end":{"line":448,"column":42}},"196":{"start":{"line":449,"column":4},"end":{"line":449,"column":43}},"197":{"start":{"line":450,"column":4},"end":{"line":450,"column":43}},"198":{"start":{"line":453,"column":4},"end":{"line":458,"column":5}},"199":{"start":{"line":454,"column":8},"end":{"line":454,"column":47}},"200":{"start":{"line":455,"column":8},"end":{"line":457,"column":9}},"201":{"start":{"line":456,"column":12},"end":{"line":456,"column":48}},"202":{"start":{"line":461,"column":4},"end":{"line":476,"column":5}},"203":{"start":{"line":462,"column":8},"end":{"line":467,"column":12}},"204":{"start":{"line":469,"column":8},"end":{"line":475,"column":9}},"205":{"start":{"line":470,"column":12},"end":{"line":470,"column":69}},"206":{"start":{"line":471,"column":12},"end":{"line":473,"column":13}},"207":{"start":{"line":472,"column":16},"end":{"line":472,"column":33}},"208":{"start":{"line":474,"column":12},"end":{"line":474,"column":61}},"209":{"start":{"line":478,"column":4},"end":{"line":480,"column":5}},"210":{"start":{"line":479,"column":8},"end":{"line":479,"column":32}},"211":{"start":{"line":483,"column":0},"end":{"line":483,"column":18}},"212":{"start":{"line":485,"column":0},"end":{"line":555,"column":2}},"213":{"start":{"line":486,"column":4},"end":{"line":486,"column":20}},"214":{"start":{"line":488,"column":4},"end":{"line":488,"column":63}},"215":{"start":{"line":490,"column":4},"end":{"line":492,"column":6}},"216":{"start":{"line":491,"column":8},"end":{"line":491,"column":32}},"217":{"start":{"line":494,"column":4},"end":{"line":494,"column":37}},"218":{"start":{"line":496,"column":4},"end":{"line":496,"column":50}},"219":{"start":{"line":497,"column":4},"end":{"line":497,"column":47}},"220":{"start":{"line":498,"column":4},"end":{"line":498,"column":50}},"221":{"start":{"line":499,"column":4},"end":{"line":499,"column":60}},"222":{"start":{"line":500,"column":4},"end":{"line":500,"column":62}},"223":{"start":{"line":501,"column":4},"end":{"line":501,"column":62}},"224":{"start":{"line":502,"column":4},"end":{"line":502,"column":66}},"225":{"start":{"line":524,"column":4},"end":{"line":526,"column":5}},"226":{"start":{"line":525,"column":8},"end":{"line":525,"column":31}},"227":{"start":{"line":528,"column":4},"end":{"line":530,"column":5}},"228":{"start":{"line":529,"column":8},"end":{"line":529,"column":33}},"229":{"start":{"line":532,"column":4},"end":{"line":534,"column":5}},"230":{"start":{"line":533,"column":8},"end":{"line":533,"column":36}},"231":{"start":{"line":536,"column":4},"end":{"line":538,"column":5}},"232":{"start":{"line":537,"column":8},"end":{"line":537,"column":36}},"233":{"start":{"line":540,"column":4},"end":{"line":542,"column":5}},"234":{"start":{"line":541,"column":8},"end":{"line":541,"column":36}},"235":{"start":{"line":544,"column":4},"end":{"line":546,"column":5}},"236":{"start":{"line":545,"column":8},"end":{"line":545,"column":33}},"237":{"start":{"line":548,"column":4},"end":{"line":550,"column":5}},"238":{"start":{"line":549,"column":8},"end":{"line":549,"column":37}},"239":{"start":{"line":552,"column":4},"end":{"line":554,"column":5}},"240":{"start":{"line":553,"column":8},"end":{"line":553,"column":40}},"241":{"start":{"line":557,"column":0},"end":{"line":567,"column":1}},"242":{"start":{"line":558,"column":4},"end":{"line":558,"column":46}},"243":{"start":{"line":561,"column":4},"end":{"line":566,"column":5}},"244":{"start":{"line":562,"column":8},"end":{"line":562,"column":41}},"245":{"start":{"line":565,"column":8},"end":{"line":565,"column":36}},"246":{"start":{"line":569,"column":0},"end":{"line":594,"column":2}},"247":{"start":{"line":571,"column":4},"end":{"line":571,"column":20}},"248":{"start":{"line":573,"column":4},"end":{"line":573,"column":46}},"249":{"start":{"line":575,"column":4},"end":{"line":591,"column":5}},"250":{"start":{"line":576,"column":8},"end":{"line":578,"column":11}},"251":{"start":{"line":579,"column":8},"end":{"line":586,"column":10}},"252":{"start":{"line":589,"column":8},"end":{"line":589,"column":29}},"253":{"start":{"line":590,"column":8},"end":{"line":590,"column":15}},"254":{"start":{"line":593,"column":4},"end":{"line":593,"column":27}},"255":{"start":{"line":596,"column":0},"end":{"line":634,"column":2}},"256":{"start":{"line":598,"column":4},"end":{"line":598,"column":20}},"257":{"start":{"line":600,"column":4},"end":{"line":601,"column":37}},"258":{"start":{"line":603,"column":4},"end":{"line":603,"column":22}},"259":{"start":{"line":605,"column":4},"end":{"line":633,"column":5}},"260":{"start":{"line":606,"column":8},"end":{"line":610,"column":11}},"261":{"start":{"line":612,"column":8},"end":{"line":617,"column":10}},"262":{"start":{"line":619,"column":8},"end":{"line":621,"column":52}},"263":{"start":{"line":623,"column":8},"end":{"line":623,"column":37}},"264":{"start":{"line":624,"column":11},"end":{"line":633,"column":5}},"265":{"start":{"line":625,"column":8},"end":{"line":629,"column":11}},"266":{"start":{"line":632,"column":8},"end":{"line":632,"column":37}},"267":{"start":{"line":636,"column":0},"end":{"line":640,"column":2}},"268":{"start":{"line":637,"column":4},"end":{"line":637,"column":20}},"269":{"start":{"line":639,"column":4},"end":{"line":639,"column":41}},"270":{"start":{"line":642,"column":0},"end":{"line":693,"column":2}},"271":{"start":{"line":643,"column":4},"end":{"line":643,"column":20}},"272":{"start":{"line":647,"column":4},"end":{"line":682,"column":5}},"273":{"start":{"line":650,"column":8},"end":{"line":650,"column":76}},"274":{"start":{"line":651,"column":8},"end":{"line":654,"column":12}},"275":{"start":{"line":655,"column":8},"end":{"line":655,"column":15}},"276":{"start":{"line":658,"column":8},"end":{"line":658,"column":69}},"277":{"start":{"line":659,"column":8},"end":{"line":666,"column":9}},"278":{"start":{"line":660,"column":12},"end":{"line":660,"column":33}},"279":{"start":{"line":661,"column":12},"end":{"line":661,"column":62}},"280":{"start":{"line":665,"column":12},"end":{"line":665,"column":19}},"281":{"start":{"line":667,"column":8},"end":{"line":667,"column":69}},"282":{"start":{"line":668,"column":8},"end":{"line":668,"column":14}},"283":{"start":{"line":677,"column":8},"end":{"line":677,"column":69}},"284":{"start":{"line":678,"column":8},"end":{"line":678,"column":15}},"285":{"start":{"line":681,"column":8},"end":{"line":681,"column":32}},"286":{"start":{"line":684,"column":4},"end":{"line":692,"column":5}},"287":{"start":{"line":685,"column":8},"end":{"line":691,"column":12}},"288":{"start":{"line":695,"column":0},"end":{"line":704,"column":2}},"289":{"start":{"line":696,"column":4},"end":{"line":696,"column":20}},"290":{"start":{"line":698,"column":4},"end":{"line":701,"column":5}},"291":{"start":{"line":699,"column":8},"end":{"line":699,"column":44}},"292":{"start":{"line":700,"column":8},"end":{"line":700,"column":15}},"293":{"start":{"line":703,"column":4},"end":{"line":703,"column":23}},"294":{"start":{"line":706,"column":0},"end":{"line":710,"column":2}},"295":{"start":{"line":707,"column":4},"end":{"line":707,"column":20}},"296":{"start":{"line":709,"column":4},"end":{"line":709,"column":57}},"297":{"start":{"line":712,"column":0},"end":{"line":720,"column":2}},"298":{"start":{"line":713,"column":4},"end":{"line":713,"column":20}},"299":{"start":{"line":715,"column":4},"end":{"line":717,"column":5}},"300":{"start":{"line":716,"column":8},"end":{"line":716,"column":40}},"301":{"start":{"line":719,"column":4},"end":{"line":719,"column":36}},"302":{"start":{"line":722,"column":0},"end":{"line":745,"column":2}},"303":{"start":{"line":723,"column":4},"end":{"line":723,"column":20}},"304":{"start":{"line":725,"column":4},"end":{"line":725,"column":41}},"305":{"start":{"line":726,"column":4},"end":{"line":730,"column":5}},"306":{"start":{"line":727,"column":8},"end":{"line":727,"column":40}},"307":{"start":{"line":729,"column":8},"end":{"line":729,"column":34}},"308":{"start":{"line":732,"column":4},"end":{"line":735,"column":5}},"309":{"start":{"line":733,"column":8},"end":{"line":733,"column":41}},"310":{"start":{"line":734,"column":8},"end":{"line":734,"column":15}},"311":{"start":{"line":737,"column":4},"end":{"line":742,"column":5}},"312":{"start":{"line":739,"column":8},"end":{"line":739,"column":32}},"313":{"start":{"line":740,"column":8},"end":{"line":740,"column":37}},"314":{"start":{"line":741,"column":8},"end":{"line":741,"column":28}},"315":{"start":{"line":744,"column":4},"end":{"line":744,"column":26}},"316":{"start":{"line":747,"column":0},"end":{"line":763,"column":2}},"317":{"start":{"line":749,"column":4},"end":{"line":749,"column":20}},"318":{"start":{"line":751,"column":4},"end":{"line":751,"column":37}},"319":{"start":{"line":752,"column":4},"end":{"line":752,"column":53}},"320":{"start":{"line":753,"column":4},"end":{"line":755,"column":8}},"321":{"start":{"line":757,"column":4},"end":{"line":762,"column":5}},"322":{"start":{"line":758,"column":8},"end":{"line":758,"column":45}},"323":{"start":{"line":759,"column":8},"end":{"line":759,"column":74}},"324":{"start":{"line":761,"column":8},"end":{"line":761,"column":79}},"325":{"start":{"line":765,"column":0},"end":{"line":781,"column":2}},"326":{"start":{"line":766,"column":4},"end":{"line":766,"column":20}},"327":{"start":{"line":767,"column":4},"end":{"line":767,"column":23}},"328":{"start":{"line":769,"column":4},"end":{"line":769,"column":33}},"329":{"start":{"line":770,"column":4},"end":{"line":770,"column":34}},"330":{"start":{"line":773,"column":4},"end":{"line":780,"column":5}},"331":{"start":{"line":774,"column":8},"end":{"line":776,"column":9}},"332":{"start":{"line":775,"column":12},"end":{"line":775,"column":19}},"333":{"start":{"line":778,"column":8},"end":{"line":778,"column":22}},"334":{"start":{"line":779,"column":8},"end":{"line":779,"column":40}},"335":{"start":{"line":783,"column":0},"end":{"line":786,"column":2}},"336":{"start":{"line":784,"column":4},"end":{"line":784,"column":20}},"337":{"start":{"line":785,"column":4},"end":{"line":785,"column":42}},"338":{"start":{"line":788,"column":0},"end":{"line":814,"column":2}},"339":{"start":{"line":790,"column":4},"end":{"line":790,"column":20}},"340":{"start":{"line":792,"column":4},"end":{"line":792,"column":25}},"341":{"start":{"line":793,"column":4},"end":{"line":793,"column":37}},"342":{"start":{"line":796,"column":4},"end":{"line":796,"column":72}},"343":{"start":{"line":797,"column":4},"end":{"line":801,"column":7}},"344":{"start":{"line":803,"column":4},"end":{"line":813,"column":5}},"345":{"start":{"line":804,"column":8},"end":{"line":810,"column":9}},"346":{"start":{"line":805,"column":12},"end":{"line":805,"column":50}},"347":{"start":{"line":808,"column":12},"end":{"line":808,"column":46}},"348":{"start":{"line":809,"column":12},"end":{"line":809,"column":31}},"349":{"start":{"line":812,"column":8},"end":{"line":812,"column":43}},"350":{"start":{"line":816,"column":0},"end":{"line":841,"column":2}},"351":{"start":{"line":818,"column":4},"end":{"line":818,"column":20}},"352":{"start":{"line":820,"column":4},"end":{"line":820,"column":37}},"353":{"start":{"line":821,"column":4},"end":{"line":821,"column":49}},"354":{"start":{"line":822,"column":4},"end":{"line":822,"column":51}},"355":{"start":{"line":825,"column":4},"end":{"line":827,"column":5}},"356":{"start":{"line":826,"column":8},"end":{"line":826,"column":15}},"357":{"start":{"line":829,"column":4},"end":{"line":832,"column":7}},"358":{"start":{"line":834,"column":4},"end":{"line":840,"column":5}},"359":{"start":{"line":835,"column":8},"end":{"line":835,"column":77}},"360":{"start":{"line":836,"column":11},"end":{"line":840,"column":5}},"361":{"start":{"line":837,"column":8},"end":{"line":837,"column":65}},"362":{"start":{"line":838,"column":11},"end":{"line":840,"column":5}},"363":{"start":{"line":839,"column":8},"end":{"line":839,"column":74}},"364":{"start":{"line":843,"column":0},"end":{"line":865,"column":2}},"365":{"start":{"line":844,"column":4},"end":{"line":844,"column":20}},"366":{"start":{"line":845,"column":4},"end":{"line":850,"column":5}},"367":{"start":{"line":846,"column":8},"end":{"line":846,"column":39}},"368":{"start":{"line":847,"column":8},"end":{"line":847,"column":59}},"369":{"start":{"line":849,"column":8},"end":{"line":849,"column":57}},"370":{"start":{"line":852,"column":4},"end":{"line":852,"column":32}},"371":{"start":{"line":853,"column":4},"end":{"line":853,"column":70}},"372":{"start":{"line":854,"column":4},"end":{"line":854,"column":59}},"373":{"start":{"line":856,"column":4},"end":{"line":859,"column":5}},"374":{"start":{"line":857,"column":8},"end":{"line":857,"column":24}},"375":{"start":{"line":858,"column":8},"end":{"line":858,"column":35}},"376":{"start":{"line":861,"column":4},"end":{"line":864,"column":5}},"377":{"start":{"line":862,"column":8},"end":{"line":862,"column":24}},"378":{"start":{"line":863,"column":8},"end":{"line":863,"column":34}},"379":{"start":{"line":867,"column":0},"end":{"line":884,"column":2}},"380":{"start":{"line":868,"column":4},"end":{"line":868,"column":20}},"381":{"start":{"line":870,"column":4},"end":{"line":876,"column":5}},"382":{"start":{"line":871,"column":8},"end":{"line":875,"column":12}},"383":{"start":{"line":878,"column":4},"end":{"line":878,"column":28}},"384":{"start":{"line":879,"column":4},"end":{"line":879,"column":36}},"385":{"start":{"line":880,"column":4},"end":{"line":883,"column":7}},"386":{"start":{"line":886,"column":0},"end":{"line":903,"column":2}},"387":{"start":{"line":887,"column":4},"end":{"line":887,"column":20}},"388":{"start":{"line":888,"column":4},"end":{"line":895,"column":5}},"389":{"start":{"line":889,"column":8},"end":{"line":889,"column":30}},"390":{"start":{"line":890,"column":8},"end":{"line":890,"column":88}},"391":{"start":{"line":891,"column":8},"end":{"line":892,"column":78}},"392":{"start":{"line":894,"column":8},"end":{"line":894,"column":40}},"393":{"start":{"line":897,"column":4},"end":{"line":897,"column":28}},"394":{"start":{"line":898,"column":4},"end":{"line":898,"column":64}},"395":{"start":{"line":899,"column":4},"end":{"line":902,"column":7}},"396":{"start":{"line":905,"column":0},"end":{"line":913,"column":2}},"397":{"start":{"line":906,"column":4},"end":{"line":906,"column":20}},"398":{"start":{"line":907,"column":4},"end":{"line":912,"column":5}},"399":{"start":{"line":908,"column":8},"end":{"line":908,"column":19}},"400":{"start":{"line":910,"column":8},"end":{"line":910,"column":44}},"401":{"start":{"line":911,"column":8},"end":{"line":911,"column":54}},"402":{"start":{"line":915,"column":0},"end":{"line":924,"column":2}},"403":{"start":{"line":916,"column":4},"end":{"line":916,"column":20}},"404":{"start":{"line":917,"column":4},"end":{"line":923,"column":5}},"405":{"start":{"line":918,"column":8},"end":{"line":922,"column":12}},"406":{"start":{"line":926,"column":0},"end":{"line":929,"column":2}},"407":{"start":{"line":927,"column":4},"end":{"line":927,"column":20}},"408":{"start":{"line":928,"column":4},"end":{"line":928,"column":38}},"409":{"start":{"line":931,"column":0},"end":{"line":943,"column":2}},"410":{"start":{"line":932,"column":4},"end":{"line":932,"column":20}},"411":{"start":{"line":933,"column":4},"end":{"line":933,"column":52}},"412":{"start":{"line":934,"column":4},"end":{"line":934,"column":34}},"413":{"start":{"line":935,"column":4},"end":{"line":935,"column":15}},"414":{"start":{"line":937,"column":4},"end":{"line":942,"column":5}},"415":{"start":{"line":939,"column":8},"end":{"line":941,"column":9}},"416":{"start":{"line":940,"column":12},"end":{"line":940,"column":44}},"417":{"start":{"line":945,"column":0},"end":{"line":961,"column":2}},"418":{"start":{"line":946,"column":4},"end":{"line":946,"column":20}},"419":{"start":{"line":948,"column":4},"end":{"line":948,"column":28}},"420":{"start":{"line":949,"column":4},"end":{"line":949,"column":24}},"421":{"start":{"line":950,"column":4},"end":{"line":950,"column":35}},"422":{"start":{"line":951,"column":4},"end":{"line":951,"column":33}},"423":{"start":{"line":952,"column":4},"end":{"line":952,"column":33}},"424":{"start":{"line":953,"column":4},"end":{"line":953,"column":33}},"425":{"start":{"line":955,"column":4},"end":{"line":955,"column":34}},"426":{"start":{"line":956,"column":4},"end":{"line":956,"column":28}},"427":{"start":{"line":957,"column":4},"end":{"line":957,"column":61}},"428":{"start":{"line":960,"column":4},"end":{"line":960,"column":55}},"429":{"start":{"line":966,"column":0},"end":{"line":1088,"column":2}},"430":{"start":{"line":968,"column":4},"end":{"line":968,"column":20}},"431":{"start":{"line":970,"column":4},"end":{"line":970,"column":23}},"432":{"start":{"line":972,"column":4},"end":{"line":972,"column":55}},"433":{"start":{"line":974,"column":4},"end":{"line":976,"column":5}},"434":{"start":{"line":975,"column":8},"end":{"line":975,"column":15}},"435":{"start":{"line":978,"column":4},"end":{"line":978,"column":24}},"436":{"start":{"line":979,"column":4},"end":{"line":979,"column":26}},"437":{"start":{"line":980,"column":4},"end":{"line":980,"column":26}},"438":{"start":{"line":982,"column":4},"end":{"line":982,"column":42}},"439":{"start":{"line":983,"column":4},"end":{"line":983,"column":40}},"440":{"start":{"line":985,"column":4},"end":{"line":985,"column":44}},"441":{"start":{"line":986,"column":4},"end":{"line":986,"column":46}},"442":{"start":{"line":988,"column":4},"end":{"line":990,"column":5}},"443":{"start":{"line":989,"column":8},"end":{"line":989,"column":46}},"444":{"start":{"line":992,"column":4},"end":{"line":1032,"column":5}},"445":{"start":{"line":993,"column":8},"end":{"line":1008,"column":9}},"446":{"start":{"line":994,"column":12},"end":{"line":1001,"column":19}},"447":{"start":{"line":1003,"column":12},"end":{"line":1007,"column":77}},"448":{"start":{"line":1009,"column":11},"end":{"line":1032,"column":5}},"449":{"start":{"line":1010,"column":8},"end":{"line":1020,"column":9}},"450":{"start":{"line":1011,"column":12},"end":{"line":1019,"column":14}},"451":{"start":{"line":1022,"column":8},"end":{"line":1031,"column":10}},"452":{"start":{"line":1034,"column":4},"end":{"line":1040,"column":7}},"453":{"start":{"line":1045,"column":4},"end":{"line":1049,"column":7}},"454":{"start":{"line":1046,"column":8},"end":{"line":1046,"column":30}},"455":{"start":{"line":1052,"column":4},"end":{"line":1058,"column":7}},"456":{"start":{"line":1053,"column":8},"end":{"line":1053,"column":41}},"457":{"start":{"line":1054,"column":8},"end":{"line":1056,"column":9}},"458":{"start":{"line":1055,"column":12},"end":{"line":1055,"column":19}},"459":{"start":{"line":1057,"column":8},"end":{"line":1057,"column":41}},"460":{"start":{"line":1060,"column":4},"end":{"line":1068,"column":5}},"461":{"start":{"line":1061,"column":8},"end":{"line":1061,"column":25}},"462":{"start":{"line":1062,"column":8},"end":{"line":1066,"column":9}},"463":{"start":{"line":1063,"column":12},"end":{"line":1063,"column":60}},"464":{"start":{"line":1065,"column":12},"end":{"line":1065,"column":65}},"465":{"start":{"line":1067,"column":8},"end":{"line":1067,"column":61}},"466":{"start":{"line":1070,"column":4},"end":{"line":1070,"column":21}},"467":{"start":{"line":1072,"column":4},"end":{"line":1072,"column":45}},"468":{"start":{"line":1073,"column":4},"end":{"line":1085,"column":5}},"469":{"start":{"line":1076,"column":8},"end":{"line":1076,"column":58}},"470":{"start":{"line":1077,"column":8},"end":{"line":1077,"column":40}},"471":{"start":{"line":1078,"column":11},"end":{"line":1085,"column":5}},"472":{"start":{"line":1082,"column":8},"end":{"line":1082,"column":36}},"473":{"start":{"line":1083,"column":8},"end":{"line":1083,"column":44}},"474":{"start":{"line":1084,"column":8},"end":{"line":1084,"column":58}},"475":{"start":{"line":1087,"column":4},"end":{"line":1087,"column":36}},"476":{"start":{"line":1090,"column":0},"end":{"line":1096,"column":1}},"477":{"start":{"line":1091,"column":4},"end":{"line":1091,"column":20}},"478":{"start":{"line":1093,"column":4},"end":{"line":1093,"column":33}},"479":{"start":{"line":1094,"column":4},"end":{"line":1094,"column":21}},"480":{"start":{"line":1095,"column":4},"end":{"line":1095,"column":27}},"481":{"start":{"line":1098,"column":0},"end":{"line":1117,"column":2}},"482":{"start":{"line":1099,"column":4},"end":{"line":1099,"column":20}},"483":{"start":{"line":1102,"column":4},"end":{"line":1104,"column":5}},"484":{"start":{"line":1103,"column":8},"end":{"line":1103,"column":15}},"485":{"start":{"line":1106,"column":4},"end":{"line":1106,"column":34}},"486":{"start":{"line":1107,"column":4},"end":{"line":1111,"column":7}},"487":{"start":{"line":1113,"column":4},"end":{"line":1115,"column":8}},"488":{"start":{"line":1116,"column":4},"end":{"line":1116,"column":34}},"489":{"start":{"line":1119,"column":0},"end":{"line":1130,"column":2}},"490":{"start":{"line":1121,"column":4},"end":{"line":1121,"column":20}},"491":{"start":{"line":1123,"column":4},"end":{"line":1123,"column":57}},"492":{"start":{"line":1124,"column":4},"end":{"line":1124,"column":64}},"493":{"start":{"line":1126,"column":4},"end":{"line":1126,"column":71}},"494":{"start":{"line":1128,"column":4},"end":{"line":1128,"column":40}},"495":{"start":{"line":1129,"column":4},"end":{"line":1129,"column":62}},"496":{"start":{"line":1132,"column":0},"end":{"line":1169,"column":2}},"497":{"start":{"line":1134,"column":4},"end":{"line":1134,"column":20}},"498":{"start":{"line":1136,"column":4},"end":{"line":1137,"column":34}},"499":{"start":{"line":1138,"column":4},"end":{"line":1139,"column":37}},"500":{"start":{"line":1140,"column":4},"end":{"line":1141,"column":31}},"501":{"start":{"line":1143,"column":4},"end":{"line":1145,"column":5}},"502":{"start":{"line":1144,"column":8},"end":{"line":1144,"column":15}},"503":{"start":{"line":1147,"column":4},"end":{"line":1156,"column":6}},"504":{"start":{"line":1158,"column":4},"end":{"line":1168,"column":6}},"505":{"start":{"line":1171,"column":0},"end":{"line":1176,"column":2}},"506":{"start":{"line":1173,"column":4},"end":{"line":1173,"column":20}},"507":{"start":{"line":1175,"column":4},"end":{"line":1175,"column":66}},"508":{"start":{"line":1178,"column":0},"end":{"line":1178,"column":36}}},"branchMap":{"1":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":29},"end":{"line":64,"column":46}},{"start":{"line":64,"column":50},"end":{"line":64,"column":74}}]},"2":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"3":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"4":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":20},"end":{"line":90,"column":41}},{"start":{"line":90,"column":45},"end":{"line":90,"column":56}}]},"5":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":11},"end":{"line":94,"column":11}},{"start":{"line":94,"column":11},"end":{"line":94,"column":11}}]},"6":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":4},"end":{"line":158,"column":4}},{"start":{"line":158,"column":4},"end":{"line":158,"column":4}}]},"7":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":8},"end":{"line":159,"column":8}},{"start":{"line":159,"column":8},"end":{"line":159,"column":8}}]},"8":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":4},"end":{"line":175,"column":4}},{"start":{"line":175,"column":4},"end":{"line":175,"column":4}}]},"9":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":4},"end":{"line":205,"column":4}},{"start":{"line":205,"column":4},"end":{"line":205,"column":4}}]},"10":{"line":205,"type":"binary-expr","locations":[{"start":{"line":205,"column":8},"end":{"line":205,"column":21}},{"start":{"line":206,"column":8},"end":{"line":206,"column":33}},{"start":{"line":207,"column":8},"end":{"line":207,"column":38}}]},"11":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":4}},{"start":{"line":223,"column":4},"end":{"line":223,"column":4}}]},"12":{"line":223,"type":"binary-expr","locations":[{"start":{"line":223,"column":8},"end":{"line":223,"column":21}},{"start":{"line":224,"column":8},"end":{"line":224,"column":33}},{"start":{"line":225,"column":8},"end":{"line":225,"column":38}}]},"13":{"line":243,"type":"switch","locations":[{"start":{"line":244,"column":8},"end":{"line":246,"column":66}},{"start":{"line":247,"column":8},"end":{"line":247,"column":35}},{"start":{"line":248,"column":8},"end":{"line":248,"column":39}},{"start":{"line":249,"column":8},"end":{"line":251,"column":18}},{"start":{"line":252,"column":8},"end":{"line":254,"column":18}},{"start":{"line":255,"column":8},"end":{"line":256,"column":25}}]},"14":{"line":245,"type":"binary-expr","locations":[{"start":{"line":245,"column":19},"end":{"line":245,"column":52}},{"start":{"line":246,"column":19},"end":{"line":246,"column":65}}]},"15":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":4},"end":{"line":259,"column":4}},{"start":{"line":259,"column":4},"end":{"line":259,"column":4}}]},"16":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":8},"end":{"line":259,"column":11}},{"start":{"line":259,"column":15},"end":{"line":259,"column":36}}]},"17":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":39},"end":{"line":282,"column":46}},{"start":{"line":282,"column":50},"end":{"line":282,"column":52}}]},"18":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":4},"end":{"line":290,"column":4}},{"start":{"line":290,"column":4},"end":{"line":290,"column":4}}]},"19":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":15}},{"start":{"line":290,"column":19},"end":{"line":290,"column":51}}]},"20":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":4},"end":{"line":316,"column":4}},{"start":{"line":316,"column":4},"end":{"line":316,"column":4}}]},"21":{"line":343,"type":"binary-expr","locations":[{"start":{"line":343,"column":11},"end":{"line":343,"column":32}},{"start":{"line":343,"column":36},"end":{"line":343,"column":54}}]},"22":{"line":357,"type":"binary-expr","locations":[{"start":{"line":357,"column":22},"end":{"line":357,"column":29}},{"start":{"line":358,"column":22},"end":{"line":358,"column":60}}]},"23":{"line":361,"type":"if","locations":[{"start":{"line":361,"column":4},"end":{"line":361,"column":4}},{"start":{"line":361,"column":4},"end":{"line":361,"column":4}}]},"24":{"line":361,"type":"binary-expr","locations":[{"start":{"line":361,"column":8},"end":{"line":361,"column":19}},{"start":{"line":361,"column":23},"end":{"line":361,"column":57}}]},"25":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":4},"end":{"line":369,"column":4}},{"start":{"line":369,"column":4},"end":{"line":369,"column":4}}]},"26":{"line":370,"type":"cond-expr","locations":[{"start":{"line":371,"column":12},"end":{"line":371,"column":24}},{"start":{"line":371,"column":27},"end":{"line":371,"column":38}}]},"27":{"line":372,"type":"cond-expr","locations":[{"start":{"line":373,"column":12},"end":{"line":373,"column":24}},{"start":{"line":373,"column":27},"end":{"line":373,"column":38}}]},"28":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":4},"end":{"line":381,"column":4}},{"start":{"line":381,"column":4},"end":{"line":381,"column":4}}]},"29":{"line":381,"type":"binary-expr","locations":[{"start":{"line":381,"column":9},"end":{"line":381,"column":57}},{"start":{"line":382,"column":8},"end":{"line":382,"column":53}},{"start":{"line":383,"column":8},"end":{"line":383,"column":19}}]},"30":{"line":400,"type":"if","locations":[{"start":{"line":400,"column":4},"end":{"line":400,"column":4}},{"start":{"line":400,"column":4},"end":{"line":400,"column":4}}]},"31":{"line":405,"type":"if","locations":[{"start":{"line":405,"column":4},"end":{"line":405,"column":4}},{"start":{"line":405,"column":4},"end":{"line":405,"column":4}}]},"32":{"line":405,"type":"binary-expr","locations":[{"start":{"line":405,"column":8},"end":{"line":405,"column":15}},{"start":{"line":405,"column":19},"end":{"line":405,"column":57}}]},"33":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":4},"end":{"line":409,"column":4}},{"start":{"line":409,"column":4},"end":{"line":409,"column":4}}]},"34":{"line":416,"type":"if","locations":[{"start":{"line":416,"column":4},"end":{"line":416,"column":4}},{"start":{"line":416,"column":4},"end":{"line":416,"column":4}}]},"35":{"line":432,"type":"if","locations":[{"start":{"line":432,"column":4},"end":{"line":432,"column":4}},{"start":{"line":432,"column":4},"end":{"line":432,"column":4}}]},"36":{"line":432,"type":"binary-expr","locations":[{"start":{"line":432,"column":8},"end":{"line":432,"column":15}},{"start":{"line":432,"column":19},"end":{"line":432,"column":56}}]},"37":{"line":434,"type":"if","locations":[{"start":{"line":434,"column":11},"end":{"line":434,"column":11}},{"start":{"line":434,"column":11},"end":{"line":434,"column":11}}]},"38":{"line":434,"type":"binary-expr","locations":[{"start":{"line":434,"column":15},"end":{"line":434,"column":23}},{"start":{"line":434,"column":27},"end":{"line":434,"column":60}}]},"39":{"line":455,"type":"if","locations":[{"start":{"line":455,"column":8},"end":{"line":455,"column":8}},{"start":{"line":455,"column":8},"end":{"line":455,"column":8}}]},"40":{"line":469,"type":"if","locations":[{"start":{"line":469,"column":8},"end":{"line":469,"column":8}},{"start":{"line":469,"column":8},"end":{"line":469,"column":8}}]},"41":{"line":471,"type":"if","locations":[{"start":{"line":471,"column":12},"end":{"line":471,"column":12}},{"start":{"line":471,"column":12},"end":{"line":471,"column":12}}]},"42":{"line":561,"type":"if","locations":[{"start":{"line":561,"column":4},"end":{"line":561,"column":4}},{"start":{"line":561,"column":4},"end":{"line":561,"column":4}}]},"43":{"line":575,"type":"if","locations":[{"start":{"line":575,"column":4},"end":{"line":575,"column":4}},{"start":{"line":575,"column":4},"end":{"line":575,"column":4}}]},"44":{"line":600,"type":"binary-expr","locations":[{"start":{"line":600,"column":11},"end":{"line":600,"column":27}},{"start":{"line":600,"column":31},"end":{"line":600,"column":46}}]},"45":{"line":605,"type":"if","locations":[{"start":{"line":605,"column":4},"end":{"line":605,"column":4}},{"start":{"line":605,"column":4},"end":{"line":605,"column":4}}]},"46":{"line":620,"type":"binary-expr","locations":[{"start":{"line":620,"column":12},"end":{"line":620,"column":33}},{"start":{"line":620,"column":37},"end":{"line":620,"column":52}}]},"47":{"line":624,"type":"if","locations":[{"start":{"line":624,"column":11},"end":{"line":624,"column":11}},{"start":{"line":624,"column":11},"end":{"line":624,"column":11}}]},"48":{"line":647,"type":"switch","locations":[{"start":{"line":649,"column":4},"end":{"line":655,"column":15}},{"start":{"line":657,"column":4},"end":{"line":668,"column":14}},{"start":{"line":670,"column":4},"end":{"line":670,"column":43}},{"start":{"line":671,"column":4},"end":{"line":671,"column":37}},{"start":{"line":672,"column":4},"end":{"line":672,"column":42}},{"start":{"line":673,"column":4},"end":{"line":673,"column":45}},{"start":{"line":674,"column":4},"end":{"line":674,"column":40}},{"start":{"line":675,"column":4},"end":{"line":675,"column":48}},{"start":{"line":676,"column":4},"end":{"line":678,"column":15}},{"start":{"line":680,"column":4},"end":{"line":681,"column":32}}]},"49":{"line":659,"type":"if","locations":[{"start":{"line":659,"column":8},"end":{"line":659,"column":8}},{"start":{"line":659,"column":8},"end":{"line":659,"column":8}}]},"50":{"line":698,"type":"if","locations":[{"start":{"line":698,"column":4},"end":{"line":698,"column":4}},{"start":{"line":698,"column":4},"end":{"line":698,"column":4}}]},"51":{"line":715,"type":"if","locations":[{"start":{"line":715,"column":4},"end":{"line":715,"column":4}},{"start":{"line":715,"column":4},"end":{"line":715,"column":4}}]},"52":{"line":726,"type":"if","locations":[{"start":{"line":726,"column":4},"end":{"line":726,"column":4}},{"start":{"line":726,"column":4},"end":{"line":726,"column":4}}]},"53":{"line":726,"type":"binary-expr","locations":[{"start":{"line":726,"column":8},"end":{"line":726,"column":33}},{"start":{"line":726,"column":37},"end":{"line":726,"column":63}}]},"54":{"line":732,"type":"if","locations":[{"start":{"line":732,"column":4},"end":{"line":732,"column":4}},{"start":{"line":732,"column":4},"end":{"line":732,"column":4}}]},"55":{"line":737,"type":"if","locations":[{"start":{"line":737,"column":4},"end":{"line":737,"column":4}},{"start":{"line":737,"column":4},"end":{"line":737,"column":4}}]},"56":{"line":737,"type":"binary-expr","locations":[{"start":{"line":737,"column":8},"end":{"line":737,"column":19}},{"start":{"line":737,"column":23},"end":{"line":737,"column":40}}]},"57":{"line":757,"type":"if","locations":[{"start":{"line":757,"column":4},"end":{"line":757,"column":4}},{"start":{"line":757,"column":4},"end":{"line":757,"column":4}}]},"58":{"line":774,"type":"if","locations":[{"start":{"line":774,"column":8},"end":{"line":774,"column":8}},{"start":{"line":774,"column":8},"end":{"line":774,"column":8}}]},"59":{"line":803,"type":"if","locations":[{"start":{"line":803,"column":4},"end":{"line":803,"column":4}},{"start":{"line":803,"column":4},"end":{"line":803,"column":4}}]},"60":{"line":804,"type":"if","locations":[{"start":{"line":804,"column":8},"end":{"line":804,"column":8}},{"start":{"line":804,"column":8},"end":{"line":804,"column":8}}]},"61":{"line":825,"type":"if","locations":[{"start":{"line":825,"column":4},"end":{"line":825,"column":4}},{"start":{"line":825,"column":4},"end":{"line":825,"column":4}}]},"62":{"line":825,"type":"binary-expr","locations":[{"start":{"line":825,"column":8},"end":{"line":825,"column":34}},{"start":{"line":825,"column":38},"end":{"line":825,"column":47}}]},"63":{"line":834,"type":"if","locations":[{"start":{"line":834,"column":4},"end":{"line":834,"column":4}},{"start":{"line":834,"column":4},"end":{"line":834,"column":4}}]},"64":{"line":836,"type":"if","locations":[{"start":{"line":836,"column":11},"end":{"line":836,"column":11}},{"start":{"line":836,"column":11},"end":{"line":836,"column":11}}]},"65":{"line":838,"type":"if","locations":[{"start":{"line":838,"column":11},"end":{"line":838,"column":11}},{"start":{"line":838,"column":11},"end":{"line":838,"column":11}}]},"66":{"line":845,"type":"if","locations":[{"start":{"line":845,"column":4},"end":{"line":845,"column":4}},{"start":{"line":845,"column":4},"end":{"line":845,"column":4}}]},"67":{"line":870,"type":"if","locations":[{"start":{"line":870,"column":4},"end":{"line":870,"column":4}},{"start":{"line":870,"column":4},"end":{"line":870,"column":4}}]},"68":{"line":888,"type":"if","locations":[{"start":{"line":888,"column":4},"end":{"line":888,"column":4}},{"start":{"line":888,"column":4},"end":{"line":888,"column":4}}]},"69":{"line":907,"type":"if","locations":[{"start":{"line":907,"column":4},"end":{"line":907,"column":4}},{"start":{"line":907,"column":4},"end":{"line":907,"column":4}}]},"70":{"line":917,"type":"if","locations":[{"start":{"line":917,"column":4},"end":{"line":917,"column":4}},{"start":{"line":917,"column":4},"end":{"line":917,"column":4}}]},"71":{"line":939,"type":"if","locations":[{"start":{"line":939,"column":8},"end":{"line":939,"column":8}},{"start":{"line":939,"column":8},"end":{"line":939,"column":8}}]},"72":{"line":948,"type":"binary-expr","locations":[{"start":{"line":948,"column":14},"end":{"line":948,"column":21}},{"start":{"line":948,"column":25},"end":{"line":948,"column":27}}]},"73":{"line":957,"type":"binary-expr","locations":[{"start":{"line":957,"column":27},"end":{"line":957,"column":39}},{"start":{"line":957,"column":43},"end":{"line":957,"column":60}}]},"74":{"line":972,"type":"binary-expr","locations":[{"start":{"line":972,"column":10},"end":{"line":972,"column":13}},{"start":{"line":972,"column":17},"end":{"line":972,"column":54}}]},"75":{"line":974,"type":"if","locations":[{"start":{"line":974,"column":4},"end":{"line":974,"column":4}},{"start":{"line":974,"column":4},"end":{"line":974,"column":4}}]},"76":{"line":988,"type":"if","locations":[{"start":{"line":988,"column":4},"end":{"line":988,"column":4}},{"start":{"line":988,"column":4},"end":{"line":988,"column":4}}]},"77":{"line":992,"type":"if","locations":[{"start":{"line":992,"column":4},"end":{"line":992,"column":4}},{"start":{"line":992,"column":4},"end":{"line":992,"column":4}}]},"78":{"line":992,"type":"binary-expr","locations":[{"start":{"line":992,"column":8},"end":{"line":992,"column":24}},{"start":{"line":992,"column":28},"end":{"line":992,"column":62}}]},"79":{"line":993,"type":"if","locations":[{"start":{"line":993,"column":8},"end":{"line":993,"column":8}},{"start":{"line":993,"column":8},"end":{"line":993,"column":8}}]},"80":{"line":999,"type":"binary-expr","locations":[{"start":{"line":999,"column":20},"end":{"line":999,"column":41}},{"start":{"line":999,"column":45},"end":{"line":999,"column":56}}]},"81":{"line":1009,"type":"if","locations":[{"start":{"line":1009,"column":11},"end":{"line":1009,"column":11}},{"start":{"line":1009,"column":11},"end":{"line":1009,"column":11}}]},"82":{"line":1010,"type":"if","locations":[{"start":{"line":1010,"column":8},"end":{"line":1010,"column":8}},{"start":{"line":1010,"column":8},"end":{"line":1010,"column":8}}]},"83":{"line":1027,"type":"binary-expr","locations":[{"start":{"line":1027,"column":16},"end":{"line":1027,"column":37}},{"start":{"line":1027,"column":41},"end":{"line":1027,"column":52}}]},"84":{"line":1054,"type":"if","locations":[{"start":{"line":1054,"column":8},"end":{"line":1054,"column":8}},{"start":{"line":1054,"column":8},"end":{"line":1054,"column":8}}]},"85":{"line":1062,"type":"if","locations":[{"start":{"line":1062,"column":8},"end":{"line":1062,"column":8}},{"start":{"line":1062,"column":8},"end":{"line":1062,"column":8}}]},"86":{"line":1073,"type":"if","locations":[{"start":{"line":1073,"column":4},"end":{"line":1073,"column":4}},{"start":{"line":1073,"column":4},"end":{"line":1073,"column":4}}]},"87":{"line":1073,"type":"binary-expr","locations":[{"start":{"line":1073,"column":8},"end":{"line":1073,"column":40}},{"start":{"line":1074,"column":8},"end":{"line":1074,"column":41}}]},"88":{"line":1078,"type":"if","locations":[{"start":{"line":1078,"column":11},"end":{"line":1078,"column":11}},{"start":{"line":1078,"column":11},"end":{"line":1078,"column":11}}]},"89":{"line":1079,"type":"binary-expr","locations":[{"start":{"line":1079,"column":8},"end":{"line":1079,"column":51}},{"start":{"line":1080,"column":8},"end":{"line":1080,"column":45}}]},"90":{"line":1102,"type":"if","locations":[{"start":{"line":1102,"column":4},"end":{"line":1102,"column":4}},{"start":{"line":1102,"column":4},"end":{"line":1102,"column":4}}]},"91":{"line":1102,"type":"binary-expr","locations":[{"start":{"line":1102,"column":8},"end":{"line":1102,"column":34}},{"start":{"line":1102,"column":38},"end":{"line":1102,"column":61}}]},"92":{"line":1124,"type":"cond-expr","locations":[{"start":{"line":1124,"column":28},"end":{"line":1124,"column":51}},{"start":{"line":1124,"column":54},"end":{"line":1124,"column":63}}]},"93":{"line":1143,"type":"if","locations":[{"start":{"line":1143,"column":4},"end":{"line":1143,"column":4}},{"start":{"line":1143,"column":4},"end":{"line":1143,"column":4}}]},"94":{"line":1143,"type":"binary-expr","locations":[{"start":{"line":1143,"column":8},"end":{"line":1143,"column":19}},{"start":{"line":1143,"column":23},"end":{"line":1143,"column":35}},{"start":{"line":1143,"column":39},"end":{"line":1143,"column":56}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var Buffer = require('buffer').Buffer;","var process = require('process');","var bufrw = require('bufrw');","var extend = require('xtend');","var ReadMachine = require('bufrw/stream/read_machine');","var inherits = require('util').inherits;","","var stat = require('./stat-tags.js');","var EventEmitter = require('./lib/event_emitter');","var v2 = require('./v2');","var errors = require('./errors');","var States = require('./reqres_states');","var Operations = require('./operations');","","var CONNECTION_BASE_IDENTIFIER = 0;","var MAX_PENDING_SOCKET_WRITE_REQ = 100;","","function TChannelConnection(","    channel, socket, direction, socketRemoteAddr, socketInitTimeout",") {","    assert(!channel.destroyed, 'refuse to create connection for destroyed channel');","","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.timedOutEvent = this.defineEvent('timedOut');","    this.pingResponseEvent = this.defineEvent('pingResonse');","","    this.draining = false;","    this.drainReason = '';","","    this.closing = false;","    this.closeError = null;","    this.closeEvent = this.defineEvent('close');","","    this.channel = channel;","    this.options = this.channel.options;","    this.logger = channel.logger;","    this.random = channel.random;","    this.timers = channel.timers;","    this.direction = direction;","    this.socketInitTimeout = socketInitTimeout || this.channel.initTimeout;","    this.socketRemoteAddr = socketRemoteAddr;","    this.remoteName = null; // filled in by identify message","","    this.ops = new Operations({","        timers: this.timers,","        logger: this.logger,","        random: this.random,","        initTimeout: this.socketInitTimeout,","        connectionStalePeriod: this.options.connectionStalePeriod,","        maxTombstoneTTL: this.options.maxTombstoneTTL,","        connection: this","    });","","    this.guid = ++CONNECTION_BASE_IDENTIFIER + '~';","","    this.tracer = this.channel.tracer;","    this.identifiedEvent = this.defineEvent('identified');","","    if (direction === 'out') {","        if (this.channel.emitConnectionMetrics) {","            this.channel.emitFastStat(","                'tchannel.connections.initiated',","                'counter',","                1,","                new stat.ConnectionsInitiatedTags(","                    this.channel.hostPort || '0.0.0.0:0',","                    socketRemoteAddr","                ));","        }","    } else if (this.channel.emitConnectionMetrics) {","        this.channel.emitFastStat(","            'tchannel.connections.accepted',","            'counter',","            1,","            new stat.ConnectionsAcceptedTags(","                this.channel.hostPort,","                socketRemoteAddr","            ));","    }","","    this.socket = socket;","    this.ephemeral = false;","    this.initHeaders = null;","","    var self = this;","    // TODO: prototype this options shape","    var opts = {","        logger: this.channel.logger,","        random: this.channel.random,","        timers: this.channel.timers,","        hostPort: this.channel.hostPort,","        requireAs: this.channel.requireAs,","        requireCn: this.channel.requireCn,","        tracer: this.tracer,","        processName: this.options.processName,","        connection: this,","        handleCallLazily: handleCallLazily","    };","","    this.handler = new v2.Handler(opts);","","    this.mach = ReadMachine(bufrw.UInt16BE, v2.Frame.RW);","","    this.setupSocket();","    this.setupHandler();","    this.start();","","    function handleCallLazily(frame) {","        return self.handleCallLazily(frame);","    }","}","inherits(TChannelConnection, EventEmitter);","","TChannelConnection.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    info = self.channel.extendLogInfo(info);","","    info.connGUID = self.guid;","    info.connDirection = self.direction;","    info.socketRemoteAddr = self.socketRemoteAddr;","    info.remoteName = self.remoteName;","    info.connClosing = self.closing;","","    return info;","};","","TChannelConnection.prototype.drain =","function drain(reason, callback) {","    var self = this;","","    self._drain(reason);","","    if (callback) {","        if (self.ops.hasDrained()) {","            process.nextTick(callback);","        } else {","            self.ops.drainEvent.on(callback);","        }","    }","};","","TChannelConnection.prototype._drain =","function _drain(reason, exempt) {","    var self = this;","","    self.draining = true;","    self.drainReason = reason;","    self.ops.draining = true;","","    if (self.remoteName) {","        sendDrainingFrame();","    } else {","        self.identifiedEvent.on(sendDrainingFrame);","    }","","    function sendDrainingFrame() {","        self.handler.sendErrorFrame(","            v2.Frame.NullId, null,","            'Declined',","            'draining: ' + self.drainReason);","    }","};","","// create a request","TChannelConnection.prototype.request =","function connBaseRequest(options) {","    var self = this;","","    assert(self.remoteName, 'cannot make request unless identified');","    options.remoteAddr = self.remoteName;","","    // TODO: use this to protect against >4Mi outstanding messages edge case","    // (e.g. zombie operation bug, incredible throughput, or simply very long","    // timeout","    // assert(!self.requests.out[id], 'duplicate frame id in flight');","","    // options.checksumType = options.checksum;","","    var req = self.buildOutRequest(options);","    if (self.draining && (","        !self.channel.drainExempt ||","        !self.channel.drainExempt(req)","    )) {","        req.drained = true;","        req.drainReason = self.drainReason;","    }","    self.ops.addOutReq(req);","    req.peer.invalidateScore('conn.request');","    return req;","};","","TChannelConnection.prototype.handleCallRequest = function handleCallRequest(req) {","    var self = this;","","    req.remoteAddr = self.remoteName;","    self.ops.addInReq(req);","","    if (self.draining && (","        !self.channel.drainExempt ||","        !self.channel.drainExempt(req)","    )) {","        var res = self.buildResponse(req, {});","        res.sendError('Declined', 'connection draining: ' + self.drainReason);","        return;","    }","","    process.nextTick(runHandler);","","    function runHandler() {","        self.runHandler(req);","    }","};","","TChannelConnection.prototype.handleCallLazily = function handleCallLazily(frame) {","    var self = this;","    var op = null;","","    switch (frame.type) {","        case v2.Types.CallRequest:","            return self.channel.handler.handleLazily &&","                   self.channel.handler.handleLazily(self, frame);","        case v2.Types.CallResponse:","        case v2.Types.CallResponseCont:","        case v2.Types.ErrorResponse:","            op = self.ops.getOutReq(frame.id);","            break;","        case v2.Types.CallRequestCont:","            op = self.ops.getInReq(frame.id);","            break;","        default:","            return false;","    }","","    if (!op || !op.handleFrameLazily) {","        return false;","    }","    op.handleFrameLazily(frame);","    return true;","};","","TChannelConnection.prototype.runHandler = function runHandler(req) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.recvd',","        'counter',","        1,","        new stat.InboundCallsRecvdTags(","            req.callerName,","            req.serviceName,","            req.endpoint","        )","    );","","    self.channel.handler.handleRequest(req, buildResponse);","    function buildResponse(options) {","        return self.buildResponse(req, options || {});","    }","};","","TChannelConnection.prototype.buildResponse =","function buildResponse(req, options) {","    var self = this;","","    if (req.res && req.res.state !== States.Initial) {","        req.errorEvent.emit(req, errors.ResponseAlreadyStarted({","            state: req.res.state,","            reason: 'buildResponse called twice',","            codeString: req.res.codeString,","            responseMessage: req.res.message","        }));","        return req.res;","    }","","    return self._buildResponse(req, options);","};","","TChannelConnection.prototype._buildResponse =","function _buildResponse(req, options) {","    var self = this;","","    options.channel = self.channel;","    options.inreq = req;","","    // TODO give this options a well defined type","    req.res = self.buildOutResponse(req, options);","","    req.res.errorEvent.on(onError);","    req.res.finishEvent.on(opDone);","","    if (!req.forwardTrace) {","        self.captureResponseSpans(req.res);","    }","","    return req.res;","","    function opDone() {","        self.onReqDone(req);","    }","","    function onError(err) {","        self.onResponseError(err, req);","    }","};","","TChannelConnection.prototype.captureResponseSpans =","function captureResponseSpans(res) {","    var self = this;","","    res.spanEvent.on(handleSpanFromRes);","","    function handleSpanFromRes(span) {","        self.handleSpanFromRes(span);","    }","};","","function isStringOrBuffer(x) {","    return typeof x === 'string' || Buffer.isBuffer(x);","}","","TChannelConnection.prototype.handleSpanFromRes =","function handleSpanFromRes(span) {","    var self = this;","","    self.channel.tracer.report(span);","};","","TChannelConnection.prototype.onResponseError =","function onResponseError(err, req) {","    var self = this;","","    var reqTimedOut = req.err &&","                      errors.classify(req.err) === 'Timeout';","","    // don't log if we get further timeout errors for already timed out response","    if (reqTimedOut && errors.classify(err) === 'Timeout') {","        return;","    }","","    var loggingOptions = req.extendLogInfo(req.res.extendLogInfo({","        error: err","    }));","","    if (req.res.state === States.Done) {","        var arg2 = isStringOrBuffer(req.res.arg2) ?","            req.res.arg2 : 'streaming';","        var arg3 = isStringOrBuffer(req.res.arg3) ?","            req.res.arg3 : 'streaming';","","        loggingOptions.bufArg2 = arg2.slice(0, 50);","        loggingOptions.arg2 = String(arg2).slice(0, 50);","        loggingOptions.bufArg3 = arg3.slice(0, 50);","        loggingOptions.arg3 = String(arg3).slice(0, 50);","    }","","    if ((err.type === 'tchannel.response-already-started' ||","        err.type === 'tchannel.response-already-done') &&","        reqTimedOut","    ) {","        self.logger.info(","            'error for timed out outgoing response', loggingOptions","        );","    } else {","        self.logger.error(","            'outgoing response has an error', loggingOptions","        );","    }","};","","TChannelConnection.prototype.onReqDone = function onReqDone(req) {","    var self = this;","","    var inreq = self.ops.popInReq(req.id);","","    if (inreq === req) {","        return;","    }","","    // incoming req that timed out are already cleaned up","    if (req.err && errors.classify(req.err) === 'Timeout') {","        return;","    }","","    if (inreq) {","        // we popped something else","        self.logger.warn('mismatched conn.onReqDone', self.extendLogInfo(req.extendLogInfo({})));","        return;","    }","","    // there was nothing to pop","    if (self.closing) {","        // this happens because TChannelConnection#resetAll calls popInReq on","        // all conn.requests.in, and is okay","        return;","    }","","    self.logger.warn('orphaned conn.onReqDone', self.extendLogInfo(req.extendLogInfo({})));","};","","TChannelConnection.prototype.setLazyHandling = function setLazyHandling(enabled) {","    var self = this;","","    // TODO: push down read machine concern into handler entirely;","    // boundary should just be self.handler.handleChunk in","    // onSocketChunk under setupSocket; then the switching logic","    // moves wholly into a `self.handler.setLazyHandling(bool)`","    if (enabled && self.mach.chunkRW !== v2.LazyFrame.RW) {","        self.mach.chunkRW = v2.LazyFrame.RW;","    } else if (!enabled && self.mach.chunkRW !== v2.Frame.RW) {","        self.mach.chunkRW = v2.Frame.RW;","    }","    self.handler.useLazyFrames(enabled);","};","","TChannelConnection.prototype.setupSocket = function setupSocket() {","    var self = this;","","    self.socket.setNoDelay(true);","    // TODO: stream the data with backpressure","    // when you add data event listener you go into","    // a deoptimized mode and you have lost all","    // backpressure on the stream","    self.socket.on('data', onSocketChunk);","    self.socket.on('close', onSocketClose);","    self.socket.on('error', onSocketError);","","    // TODO: move to method for function optimization","    function onSocketChunk(chunk) {","        var err = self.mach.handleChunk(chunk);","        if (err) {","            self.sendProtocolError('read', err);","        }","    }","","    // TODO: move to method for function optimization","    function onSocketClose() {","        self.resetAll(errors.SocketClosedError({","            reason: 'remote closed',","            socketRemoteAddr: self.socketRemoteAddr,","            direction: self.direction,","            remoteName: self.remoteName","        }));","","        if (self.ephemeral) {","            var peer = self.channel.peers.get(self.socketRemoteAddr);","            if (peer) {","                peer.close(noop);","            }","            self.channel.peers.delete(self.socketRemoteAddr);","        }","    }","","    function onSocketError(err) {","        self.onSocketError(err);","    }","};","","function noop() {}","","TChannelConnection.prototype.setupHandler = function setupHandler() {","    var self = this;","","    self.setLazyHandling(self.channel.options.useLazyHandling);","","    self.handler.write = function write(buf) {","        self.writeToSocket(buf);","    };","","    self.mach.emit = handleReadFrame;","","    self.handler.writeErrorEvent.on(onWriteError);","    self.handler.errorEvent.on(onHandlerError);","    self.handler.errorFrameEvent.on(onErrorFrame);","    self.handler.callIncomingRequestEvent.on(onCallRequest);","    self.handler.callIncomingResponseEvent.on(onCallResponse);","    self.handler.pingIncomingResponseEvent.on(onPingResponse);","    self.handler.callIncomingErrorFrameEvent.on(onCallErrorFrame);","","    // TODO: restore dumping from old:","    // var stream = self.socket;","    // if (dumpEnabled) {","    //     stream = stream.pipe(Spy(process.stdout, {","    //         prefix: '>>> ' + self.remoteAddr + ' '","    //     }));","    // }","    // stream = stream","    //     .pipe(self.reader)","    //     .pipe(self.handler)","    //     ;","    // if (dumpEnabled) {","    //     stream = stream.pipe(Spy(process.stdout, {","    //         prefix: '<<< ' + self.remoteAddr + ' '","    //     }));","    // }","    // stream = stream","    //     .pipe(self.socket)","    //     ;","","    function onWriteError(err) {","        self.onWriteError(err);","    }","","    function onHandlerError(err) {","        self.onHandlerError(err);","    }","","    function onErrorFrame(errFrame) {","        self.onErrorFrame(errFrame);","    }","","    function handleReadFrame(frame) {","        self.handleReadFrame(frame);","    }","","    function onCallRequest(req) {","        self.handleCallRequest(req);","    }","","    function onCallResponse(res) {","        self.onCallResponse(res);","    }","","    function onPingResponse(res) {","        self.handlePingResponse(res);","    }","","    function onCallErrorFrame(errFrame) {","        self.onCallErrorFrame(errFrame);","    }","};","","function getSocketBuffer(socket) {","    var writableState = socket._writableState;","","    // node >=4 has getBuffer()","    if (typeof writableState.getBuffer === 'function') {","        return writableState.getBuffer();","    } else {","        // Node 0.10 has `.buffer`","        return writableState.buffer;","    }","}","","TChannelConnection.prototype.writeToSocket =","function writeToSocket(buf) {","    var self = this;","","    var buffer = getSocketBuffer(self.socket);","","    if (buffer.length > MAX_PENDING_SOCKET_WRITE_REQ) {","        var error = errors.SocketWriteFullError({","            pendingWrites: buffer.length","        });","        self.logger.warn('resetting connection due to write backup',","            self.extendLogInfo({","                pendingWrites: buffer.length,","                totalFastBufferBytes: self.socket._writableState.length,","                lastBufferLength: buf.length,","                error: error","            })","        );","","        // NUKE THE SOCKET","        self.resetAll(error);","        return;","    }","","    self.socket.write(buf);","};","","TChannelConnection.prototype.sendProtocolError =","function sendProtocolError(type, err) {","    var self = this;","","    assert(type === 'write' || type === 'read',","        'Got invalid type: ' + type);","","    var protocolError;","","    if (type === 'read') {","        protocolError = errors.TChannelReadProtocolError(err, {","            remoteName: self.remoteName,","            localName: self.channel.hostPort,","            frameId: err.frameId","        });","","        self.channel.emitFastStat(","            'tchannel.inbound.protocol-errors',","            'counter',","            1,","            new stat.InboundProtocolErrorsTags(self.socketRemoteAddr)","        );","","        self.handler.sendErrorFrame(","            protocolError.frameId || v2.Frame.NullId, null,","            'ProtocolError', protocolError.message);","","        self.resetAll(protocolError);","    } else if (type === 'write') {","        protocolError = errors.TChannelWriteProtocolError(err, {","            remoteName: self.remoteName,","            localName: self.channel.hostPort,","            frameId: err.frameId","        });","","        // TODO: what if you have a write error in a call req cont frame","        self.resetAll(protocolError);","    }","};","","TChannelConnection.prototype.onWriteError = function onWriteError(err) {","    var self = this;","","    self.sendProtocolError('write', err);","};","","TChannelConnection.prototype.onErrorFrame = function onErrorFrame(errFrame) {","    var self = this;","","    // TODO: too coupled to v2","","    switch (errFrame.body.code) {","","    case v2.ErrorResponse.Codes.ProtocolError:","        var CodeErrorType = v2.ErrorResponse.CodeErrors[errFrame.body.code];","        self.resetAll(new CodeErrorType({","            originalId: errFrame.id,","            message: String(errFrame.body.message)","        }));","        return;","","    case v2.ErrorResponse.Codes.Declined:","        var match = /^draining:\\s*(.+)$/.exec(errFrame.body.message);","        if (match) {","            self.draining = true;","            self.drainReason = 'remote draining: ' + match[1];","            // TODO:","            // - info log?","            // - invaliadet peer score?","            return;","        }","        logUnhandled(v2.ErrorResponse.CodeNames[errFrame.body.code]);","        break;","","    case v2.ErrorResponse.Codes.BadRequest:","    case v2.ErrorResponse.Codes.Busy:","    case v2.ErrorResponse.Codes.Cancelled:","    case v2.ErrorResponse.Codes.NetworkError:","    case v2.ErrorResponse.Codes.Timeout:","    case v2.ErrorResponse.Codes.UnexpectedError:","    case v2.ErrorResponse.Codes.Unhealthy:","        logUnhandled(v2.ErrorResponse.CodeNames[errFrame.body.code]);","        return;","","    default:","        logUnhandled('unknown');","    }","","    function logUnhandled(codeName) {","        self.logger.warn('unhandled error frame', self.extendLogInfo({","            id: errFrame.id,","            errorCode: errFrame.body.code,","            errorCodeName: codeName,","            errorTracing: errFrame.body.tracing,","            errorMessage: errFrame.body.message","        }));","    }","};","","TChannelConnection.prototype.onHandlerError = function onHandlerError(err) {","    var self = this;","","    if (err.isParseError) {","        self.sendProtocolError('read', err);","        return;","    }","","    self.resetAll(err);","};","","TChannelConnection.prototype.handlePingResponse = function handlePingResponse(resFrame) {","    var self = this;","    // TODO: explicit type","    self.pingResponseEvent.emit(self, {id: resFrame.id});","};","","TChannelConnection.prototype.handleReadFrame = function handleReadFrame(frame) {","    var self = this;","","    if (!self.closing) {","        self.ops.resetLastTimeoutTime();","    }","","    self.handler.handleFrame(frame);","};","","TChannelConnection.prototype.onCallResponse = function onCallResponse(res) {","    var self = this;","","    var req = self.ops.getOutReq(res.id);","    if (res.state === States.Done || res.state === States.Error) {","        self.ops.popOutReq(res.id, res);","    } else {","        self._deferPopOutReq(res);","    }","","    if (!req) {","        self.logUnknownCallResponse(res);","        return;","    }","","    if (self.tracer && !req.forwardTrace) {","        // TODO: better annotations","        req.span.annotate('cr');","        self.tracer.report(req.span);","        res.span = req.span;","    }","","    req.emitResponse(res);","};","","TChannelConnection.prototype.logUnknownCallResponse =","function logUnknownCallResponse(res) {","    var self = this;","","    var logger = self.channel.logger;","    var tombstone = self.ops.getOutTombstone(res.id);","    var info = self.extendLogInfo(res.extendLogInfo({","        responseHeaders: res.headers","    }));","","    if (tombstone) {","        info = tombstone.extendLogInfo(info);","        logger.info('got call response for timed out call request', info);","    } else {","        logger.warn('got unexpected call response without call request', info);","    }","};","","TChannelConnection.prototype._deferPopOutReq = function _deferPopOutReq(res) {","    var self = this;","    var called = false;","","    res.errorEvent.on(popOutReq);","    res.finishEvent.on(popOutReq);","","    // TODO: move to method","    function popOutReq() {","        if (called) {","            return;","        }","","        called = true;","        self.ops.popOutReq(res.id, res);","    }","};","","TChannelConnection.prototype.ping = function ping() {","    var self = this;","    return self.handler.sendPingRequest();","};","","TChannelConnection.prototype.onCallErrorFrame =","function onCallErrorFrame(errFrame) {","    var self = this;","","    var id = errFrame.id;","    var req = self.ops.getOutReq(id);","    // TODO: req could rarely be a lazy req, then maybe call req.handleFrameLazily","","    var CodeErrorType = v2.ErrorResponse.CodeErrors[errFrame.body.code];","    var err = new CodeErrorType({","        originalId: id,","        message: String(errFrame.body.message),","        remoteAddr: self.remoteName","    });","","    if (req) {","        if (req.res) {","            req.res.errorEvent.emit(req.res, err);","        } else {","            // Only popOutReq if there is no call response object yet","            req = self.ops.popOutReq(id, err);","            req.emitError(err);","        }","    } else {","        self.logUnknownErrorFrame(err, id);","    }","};","","TChannelConnection.prototype.logUnknownErrorFrame =","function logUnknownErrorFrame(err, id) {","    var self = this;","","    var logger = self.channel.logger;","    var tombstone = self.ops.getOutTombstone(id);","    var level = errors.logLevel(err, err.codeName);","","    // Do not log about incoming timeouts for tombstones","    if (err.codeName === 'Timeout' && tombstone) {","        return;","    }","","    var info = self.extendLogInfo({","        error: err,","        isErrorFrame: err.isErrorFrame","    });","","    if (level === 'error') {","        logger.error('got unexpected errorframe without call request', info);","    } else if (level === 'warn') {","        logger.warn('got errorframe without call request', info);","    } else if (level === 'info') {","        logger.info('got expected errorframe without call request', info);","    }","};","","TChannelConnection.prototype.start = function start() {","    var self = this;","    if (self.direction === 'out') {","        self.handler.sendInitRequest();","        self.handler.initResponseEvent.on(onOutIdentified);","    } else {","        self.handler.initRequestEvent.on(onInIdentified);","    }","","    var now = self.timers.now();","    var initOp = new InitOperation(self, now, self.socketInitTimeout);","    var initTo = self.channel.timeHeap.update(initOp, now);","","    function onOutIdentified(init) {","        initTo.cancel();","        self.onOutIdentified(init);","    }","","    function onInIdentified(init) {","        initTo.cancel();","        self.onInIdentified(init);","    }","};","","TChannelConnection.prototype.onOutIdentified = function onOutIdentified(init) {","    var self = this;","","    if (init.hostPort === '0.0.0.0:0') {","        return self.emit('error', errors.EphemeralInitResponse({","            hostPort: init.hostPort,","            socketRemoteAddr: self.socketRemoteAddr,","            processName: init.processName","        }));","    }","","    self.initHeaders = init;","    self.remoteName = init.hostPort;","    self.identifiedEvent.emit(self, {","        hostPort: init.hostPort,","        processName: init.processName","    });","};","","TChannelConnection.prototype.onInIdentified = function onInIdentified(init) {","    var self = this;","    if (init.hostPort === '0.0.0.0:0') {","        self.ephemeral = true;","        self.remoteName = '' + self.socket.remoteAddress + ':' + self.socket.remotePort;","        assert(self.remoteName !== self.channel.hostPort,","              'should not be able to receive ephemeral connection from self');","    } else {","        self.remoteName = init.hostPort;","    }","","    self.initHeaders = init;","    self.channel.peers.add(self.remoteName).addConnection(self);","    self.identifiedEvent.emit(self, {","        hostPort: self.remoteName,","        processName: init.processName","    });","};","","TChannelConnection.prototype.close = function close(callback) {","    var self = this;","    if (self.socket.destroyed) {","        callback();","    } else {","        self.socket.once('close', callback);","        self.resetAll(errors.LocalSocketCloseError());","    }","};","","TChannelConnection.prototype.onSocketError = function onSocketError(err) {","    var self = this;","    if (!self.closing) {","        self.resetAll(errors.SocketError(err, {","            hostPort: self.channel.hostPort,","            direction: self.direction,","            socketRemoteAddr: self.socketRemoteAddr","        }));","    }","};","","TChannelConnection.prototype.nextFrameId = function nextFrameId() {","    var self = this;","    return self.handler.nextFrameId();","};","","TChannelConnection.prototype.buildOutRequest = function buildOutRequest(options) {","    var self = this;","    var req = self.handler.buildOutRequest(options);","    req.errorEvent.on(onReqError);","    return req;","","    function onReqError(err) {","        // The timeout path already popped the error","        if (self.ops.getOutReq(req.id)) {","            self.ops.popOutReq(req.id, err);","        }","    }","};","","TChannelConnection.prototype.buildOutResponse = function buildOutResponse(req, options) {","    var self = this;","","    options = options || {};","    options.inreq = req;","    options.channel = self.channel;","    options.logger = self.logger;","    options.random = self.random;","    options.timers = self.timers;","","    options.tracing = req.tracing;","    options.span = req.span;","    options.checksumType = req.checksum && req.checksum.type;","","    // TODO: take over popInReq on req/res error?","    return self.handler.buildOutResponse(req, options);","};","","// this connection is completely broken, and is going away","// In addition to erroring out all of the pending work, we reset the state","// in case anybody stumbles across this object in a core dump.","TChannelConnection.prototype.resetAll = function resetAll(err) {","    /*eslint complexity: [2, 20], max-statements: [2, 40]*/","    var self = this;","","    self.ops.destroy();","","    err = err || errors.TChannelConnectionCloseError();","","    if (self.closing) {","        return;","    }","","    self.closing = true;","    self.closeError = err;","    self.socket.destroy();","","    var requests = self.ops.getRequests();","    var pending = self.ops.getPending();","","    var inOpKeys = Object.keys(requests.in);","    var outOpKeys = Object.keys(requests.out);","","    if (!err) {","        err = errors.UnknownConnectionReset();","    }","","    if (!self.remoteName && self.channel.emitConnectionMetrics) {","        if (self.direction === 'out') {","            self.channel.emitFastStat(","                'tchannel.connections.connect-errors',","                'counter',","                1,","                new stat.ConnectionsConnectErrorsTags(","                    self.channel.hostPort || '0.0.0.0:0',","                    self.socketRemoteAddr","                ));","        } else {","            self.channel.emitFastStat(","                'tchannel.connections.accept-errors',","                'counter',","                1,","                new stat.ConnectionsAcceptErrorsTags(self.channel.hostPort));","        }","    } else if (self.channel.emitConnectionMetrics) {","        if (err.type !== 'tchannel.socket-local-closed') {","            self.channel.emitFastStat(","                'tchannel.connections.errors',","                'counter',","                1,","                new stat.ConnectionsErrorsTags(","                    self.remoteName,","                    err.type // TODO unified error type","                )","            );","        }","","        self.channel.emitFastStat(","            'tchannel.connections.closed',","            'counter',","            1,","            new stat.ConnectionsClosedTags(","                self.channel.hostPort || '0.0.0.0:0',","                self.remoteName,","                err.type // TODO unified reason type","            )","        );","    }","","    var logInfo = self.extendLogInfo({","        error: err,","        numInOps: inOpKeys.length,","        numOutOps: outOpKeys.length,","        inPending: pending.in,","        outPending: pending.out","    });","","    // requests that we've received we can delete, but these reqs may have started their","    //   own outgoing work, which is hard to cancel. By setting this.closing, we make sure","    //   that once they do finish that their callback will swallow the response.","    inOpKeys.forEach(function eachInOp(id) {","        self.ops.popInReq(id);","        // TODO: support canceling pending handlers","        // TODO report or handle or log errors or something","    });","","    // for all outgoing requests, forward the triggering error to the user callback","    outOpKeys.forEach(function eachOutOp(id) {","        var req = self.ops.popOutReq(id);","        if (!req) {","            return;","        }","        req.emitError(makeReqError(req));","    });","","    function makeReqError(req) {","        var reqErr = err;","        if (reqErr.type === 'tchannel.socket-local-closed') {","            reqErr = errors.TChannelLocalResetError(reqErr);","        } else {","            reqErr = errors.TChannelConnectionResetError(reqErr);","        }","        return req.extendLogInfo(self.extendLogInfo(reqErr));","    }","","    self.ops.clear();","","    var errorCodeName = errors.classify(err);","    if (errorCodeName !== 'NetworkError' &&","        errorCodeName !== 'ProtocolError'","    ) {","        self.logger.warn('resetting connection', logInfo);","        self.errorEvent.emit(self, err);","    } else if (","        err.type !== 'tchannel.socket-local-closed' &&","        err.type !== 'tchannel.socket-closed'","    ) {","        logInfo.error = extend(err);","        logInfo.error.message = err.message;","        self.logger.info('resetting connection', logInfo);","    }","","    self.closeEvent.emit(self, err);","};","","function InitOperation(connection, time, timeout) {","    var self = this;","","    self.connection = connection;","    self.time = time;","    self.timeout = timeout;","}","","InitOperation.prototype.onTimeout = function onTimeout(now) {","    var self = this;","","    // noop if identify succeeded","    if (self.connection.remoteName || self.connection.closing) {","        return;","    }","","    var elapsed = now - self.time;","    var err = errors.ConnectionTimeoutError({","        start: self.time,","        elapsed: elapsed,","        timeout: self.timeout","    });","","    self.connection.logger.warn('destroying due to init timeout', self.connection.extendLogInfo({","        error: err","    }));","    self.connection.resetAll(err);","};","","TChannelConnection.prototype.sendLazyErrorFrameForReq =","function sendLazyErrorFrameForReq(reqFrame, codeString, message) {","    var self = this;","","    var res = reqFrame.bodyRW.lazy.readTracing(reqFrame);","    var tracing = res.err ? v2.Tracing.emptyTracing : res.value;","","    self.sendLazyErrorFrame(reqFrame.id, tracing, codeString, message);","","    var now = self.channel.timers.now();","    self._observeInboundErrorFrame(reqFrame, now, codeString);","};","","TChannelConnection.prototype._observeInboundErrorFrame =","function _observeInboundErrorFrame(reqFrame, now, codeName) {","    var self = this;","","    var serviceName = reqFrame.bodyRW.lazy","        .readServiceStr(reqFrame);","    var callerName = reqFrame.bodyRW.lazy","        .readCallerNameStr(reqFrame);","    var endpoint = reqFrame.bodyRW.lazy","        .readArg1Str(reqFrame);","","    if (!callerName || !serviceName || endpoint === null) {","        return;","    }","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.latency',","        'timing',","        now - reqFrame.start,","        new stat.InboundCallsLatencyTags(","            callerName,","            serviceName,","            endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.system-errors',","        'counter',","        1,","        new stat.InboundCallsSystemErrorsTags(","            callerName,","            serviceName,","            endpoint,","            codeName","        )","    );","};","","TChannelConnection.prototype.sendLazyErrorFrame =","function sendLazyErrorFrame(id, tracing, codeString, message) {","    var self = this;","","    self.handler.sendErrorFrame(id, tracing, codeString, message);","};","","module.exports = TChannelConnection;",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"38":1,"39":1,"41":1,"44":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"54":0,"55":0,"56":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"68":0,"78":0,"80":0,"81":0,"83":0,"84":0,"85":0,"94":0,"95":0,"105":0,"106":0,"107":0,"109":0,"111":0,"124":0,"126":0,"128":0,"129":0,"130":0,"132":1,"133":0,"136":1,"138":1,"139":0,"141":0,"143":0,"144":0,"145":0,"146":0,"147":0,"149":0,"152":1,"154":0,"156":0,"158":0,"159":0,"160":0,"162":0,"167":1,"169":0,"171":0,"172":0,"173":0,"175":0,"176":0,"178":0,"181":1,"182":0,"190":1,"192":0,"194":0,"195":0,"204":0,"205":0,"209":0,"210":0,"212":0,"213":0,"214":0,"217":1,"218":0,"220":0,"221":0,"223":0,"227":0,"228":0,"229":0,"232":0,"234":1,"235":0,"239":1,"240":0,"241":0,"243":0,"245":0,"250":0,"251":0,"253":0,"254":0,"256":0,"259":0,"260":0,"262":0,"263":0,"266":1,"267":0,"269":0,"280":0,"281":1,"282":0,"286":1,"288":0,"290":0,"291":0,"297":0,"300":0,"303":1,"305":0,"307":0,"308":0,"311":0,"313":0,"314":0,"316":0,"317":0,"320":0,"322":1,"323":0,"326":1,"327":0,"331":1,"333":0,"335":0,"337":1,"338":0,"342":1,"343":0,"346":1,"348":0,"350":0,"353":1,"355":0,"357":0,"361":0,"362":0,"365":0,"369":0,"370":0,"372":0,"375":0,"376":0,"377":0,"378":0,"381":0,"385":0,"389":0,"395":1,"396":0,"398":0,"400":0,"401":0,"405":0,"406":0,"409":0,"411":0,"412":0,"416":0,"419":0,"422":0,"425":1,"426":0,"432":0,"433":0,"434":0,"435":0,"437":0,"440":1,"441":0,"443":0,"448":0,"449":0,"450":0,"453":1,"454":0,"455":0,"456":0,"461":1,"462":0,"469":0,"470":0,"471":0,"472":0,"474":0,"478":1,"479":0,"483":1,"485":1,"486":0,"488":0,"490":0,"491":0,"494":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"524":1,"525":0,"528":1,"529":0,"532":1,"533":0,"536":1,"537":0,"540":1,"541":0,"544":1,"545":0,"548":1,"549":0,"552":1,"553":0,"557":1,"558":0,"561":0,"562":0,"565":0,"569":1,"571":0,"573":0,"575":0,"576":0,"579":0,"589":0,"590":0,"593":0,"596":1,"598":0,"600":0,"603":0,"605":0,"606":0,"612":0,"619":0,"623":0,"624":0,"625":0,"632":0,"636":1,"637":0,"639":0,"642":1,"643":0,"647":0,"650":0,"651":0,"655":0,"658":0,"659":0,"660":0,"661":0,"665":0,"667":0,"668":0,"677":0,"678":0,"681":0,"684":1,"685":0,"695":1,"696":0,"698":0,"699":0,"700":0,"703":0,"706":1,"707":0,"709":0,"712":1,"713":0,"715":0,"716":0,"719":0,"722":1,"723":0,"725":0,"726":0,"727":0,"729":0,"732":0,"733":0,"734":0,"737":0,"739":0,"740":0,"741":0,"744":0,"747":1,"749":0,"751":0,"752":0,"753":0,"757":0,"758":0,"759":0,"761":0,"765":1,"766":0,"767":0,"769":0,"770":0,"773":1,"774":0,"775":0,"778":0,"779":0,"783":1,"784":0,"785":0,"788":1,"790":0,"792":0,"793":0,"796":0,"797":0,"803":0,"804":0,"805":0,"808":0,"809":0,"812":0,"816":1,"818":0,"820":0,"821":0,"822":0,"825":0,"826":0,"829":0,"834":0,"835":0,"836":0,"837":0,"838":0,"839":0,"843":1,"844":0,"845":0,"846":0,"847":0,"849":0,"852":0,"853":0,"854":0,"856":1,"857":0,"858":0,"861":1,"862":0,"863":0,"867":1,"868":0,"870":0,"871":0,"878":0,"879":0,"880":0,"886":1,"887":0,"888":0,"889":0,"890":0,"891":0,"894":0,"897":0,"898":0,"899":0,"905":1,"906":0,"907":0,"908":0,"910":0,"911":0,"915":1,"916":0,"917":0,"918":0,"926":1,"927":0,"928":0,"931":1,"932":0,"933":0,"934":0,"935":0,"937":1,"939":0,"940":0,"945":1,"946":0,"948":0,"949":0,"950":0,"951":0,"952":0,"953":0,"955":0,"956":0,"957":0,"960":0,"966":1,"968":0,"970":0,"972":0,"974":0,"975":0,"978":0,"979":0,"980":0,"982":0,"983":0,"985":0,"986":0,"988":0,"989":0,"992":0,"993":0,"994":0,"1003":0,"1009":0,"1010":0,"1011":0,"1022":0,"1034":0,"1045":0,"1046":0,"1052":0,"1053":0,"1054":0,"1055":0,"1057":0,"1060":1,"1061":0,"1062":0,"1063":0,"1065":0,"1067":0,"1070":0,"1072":0,"1073":0,"1076":0,"1077":0,"1078":0,"1082":0,"1083":0,"1084":0,"1087":0,"1090":1,"1091":0,"1093":0,"1094":0,"1095":0,"1098":1,"1099":0,"1102":0,"1103":0,"1106":0,"1107":0,"1113":0,"1116":0,"1119":1,"1121":0,"1123":0,"1124":0,"1126":0,"1128":0,"1129":0,"1132":1,"1134":0,"1136":0,"1138":0,"1140":0,"1143":0,"1144":0,"1147":0,"1158":0,"1171":1,"1173":0,"1175":0,"1178":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"parseRetryFlags","line":89,"loc":{"start":{"line":89,"column":33},"end":{"line":89,"column":63}}},"2":{"name":"encodeRetryFlags","line":100,"loc":{"start":{"line":100,"column":34},"end":{"line":100,"column":72}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":27}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":15}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":29}},"4":{"start":{"line":30,"column":0},"end":{"line":30,"column":46}},"5":{"start":{"line":31,"column":0},"end":{"line":31,"column":31}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":40}},"7":{"start":{"line":34,"column":0},"end":{"line":34,"column":51}},"8":{"start":{"line":36,"column":0},"end":{"line":36,"column":29}},"9":{"start":{"line":37,"column":0},"end":{"line":37,"column":42}},"10":{"start":{"line":38,"column":0},"end":{"line":38,"column":44}},"11":{"start":{"line":39,"column":0},"end":{"line":39,"column":46}},"12":{"start":{"line":40,"column":0},"end":{"line":40,"column":48}},"13":{"start":{"line":41,"column":0},"end":{"line":41,"column":42}},"14":{"start":{"line":42,"column":0},"end":{"line":42,"column":44}},"15":{"start":{"line":44,"column":0},"end":{"line":44,"column":29}},"16":{"start":{"line":45,"column":0},"end":{"line":45,"column":42}},"17":{"start":{"line":46,"column":0},"end":{"line":46,"column":44}},"18":{"start":{"line":47,"column":0},"end":{"line":47,"column":46}},"19":{"start":{"line":48,"column":0},"end":{"line":48,"column":48}},"20":{"start":{"line":49,"column":0},"end":{"line":49,"column":42}},"21":{"start":{"line":50,"column":0},"end":{"line":50,"column":44}},"22":{"start":{"line":51,"column":0},"end":{"line":51,"column":36}},"23":{"start":{"line":53,"column":0},"end":{"line":53,"column":33}},"24":{"start":{"line":54,"column":0},"end":{"line":54,"column":31}},"25":{"start":{"line":55,"column":0},"end":{"line":55,"column":35}},"26":{"start":{"line":56,"column":0},"end":{"line":56,"column":31}},"27":{"start":{"line":58,"column":0},"end":{"line":58,"column":29}},"28":{"start":{"line":59,"column":0},"end":{"line":59,"column":50}},"29":{"start":{"line":60,"column":0},"end":{"line":60,"column":52}},"30":{"start":{"line":61,"column":0},"end":{"line":61,"column":54}},"31":{"start":{"line":62,"column":0},"end":{"line":62,"column":56}},"32":{"start":{"line":63,"column":0},"end":{"line":63,"column":50}},"33":{"start":{"line":64,"column":0},"end":{"line":64,"column":52}},"34":{"start":{"line":66,"column":0},"end":{"line":66,"column":31}},"35":{"start":{"line":67,"column":0},"end":{"line":67,"column":29}},"36":{"start":{"line":68,"column":0},"end":{"line":68,"column":33}},"37":{"start":{"line":69,"column":0},"end":{"line":69,"column":29}},"38":{"start":{"line":71,"column":0},"end":{"line":71,"column":29}},"39":{"start":{"line":72,"column":0},"end":{"line":72,"column":42}},"40":{"start":{"line":73,"column":0},"end":{"line":73,"column":44}},"41":{"start":{"line":74,"column":0},"end":{"line":74,"column":46}},"42":{"start":{"line":75,"column":0},"end":{"line":75,"column":48}},"43":{"start":{"line":76,"column":0},"end":{"line":76,"column":42}},"44":{"start":{"line":77,"column":0},"end":{"line":77,"column":44}},"45":{"start":{"line":79,"column":0},"end":{"line":79,"column":48}},"46":{"start":{"line":80,"column":0},"end":{"line":80,"column":45}},"47":{"start":{"line":81,"column":0},"end":{"line":81,"column":49}},"48":{"start":{"line":82,"column":0},"end":{"line":82,"column":45}},"49":{"start":{"line":84,"column":0},"end":{"line":84,"column":48}},"50":{"start":{"line":86,"column":0},"end":{"line":86,"column":29}},"51":{"start":{"line":87,"column":0},"end":{"line":87,"column":37}},"52":{"start":{"line":89,"column":0},"end":{"line":98,"column":2}},"53":{"start":{"line":90,"column":4},"end":{"line":90,"column":21}},"54":{"start":{"line":91,"column":4},"end":{"line":91,"column":38}},"55":{"start":{"line":92,"column":4},"end":{"line":92,"column":60}},"56":{"start":{"line":93,"column":4},"end":{"line":93,"column":52}},"57":{"start":{"line":95,"column":4},"end":{"line":97,"column":6}},"58":{"start":{"line":100,"column":0},"end":{"line":110,"column":2}},"59":{"start":{"line":101,"column":4},"end":{"line":101,"column":31}},"60":{"start":{"line":101,"column":21},"end":{"line":101,"column":31}},"61":{"start":{"line":102,"column":4},"end":{"line":102,"column":16}},"62":{"start":{"line":103,"column":4},"end":{"line":108,"column":5}},"63":{"start":{"line":104,"column":8},"end":{"line":104,"column":18}},"64":{"start":{"line":106,"column":8},"end":{"line":106,"column":52}},"65":{"start":{"line":106,"column":42},"end":{"line":106,"column":52}},"66":{"start":{"line":107,"column":8},"end":{"line":107,"column":44}},"67":{"start":{"line":107,"column":34},"end":{"line":107,"column":44}},"68":{"start":{"line":109,"column":4},"end":{"line":109,"column":14}},"69":{"start":{"line":112,"column":0},"end":{"line":112,"column":46}},"70":{"start":{"line":114,"column":0},"end":{"line":114,"column":49}}},"branchMap":{"1":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":10},"end":{"line":90,"column":13}},{"start":{"line":90,"column":17},"end":{"line":90,"column":20}}]},"2":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":28},"end":{"line":92,"column":34}},{"start":{"line":92,"column":38},"end":{"line":92,"column":59}}]},"3":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":20},"end":{"line":93,"column":26}},{"start":{"line":93,"column":30},"end":{"line":93,"column":51}}]},"4":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"5":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"6":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"7":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","","module.exports.VERSION = 2;","","var Types = {};","module.exports.Types = Types;","","var RetryFlags = require('../retry-flags.js');","var Frame = require('./frame');","var LazyFrame = require('./lazy_frame');","","module.exports.CallFlags = require('./call_flags');","","var init = require('./init');","Types.InitRequest = init.Request.TypeCode;","Types.InitResponse = init.Response.TypeCode;","Frame.Types[Types.InitRequest] = init.Request;","Frame.Types[Types.InitResponse] = init.Response;","module.exports.InitRequest = init.Request;","module.exports.InitResponse = init.Response;","","var call = require('./call');","Types.CallRequest = call.Request.TypeCode;","Types.CallResponse = call.Response.TypeCode;","Frame.Types[Types.CallRequest] = call.Request;","Frame.Types[Types.CallResponse] = call.Response;","module.exports.CallRequest = call.Request;","module.exports.CallResponse = call.Response;","module.exports.MaxArg1Size = 0x4000;","","var Cancel = require('./cancel');","Types.Cancel = Cancel.TypeCode;","Frame.Types[Types.Cancel] = Cancel;","module.exports.Cancel = Cancel;","","var cont = require('./cont');","Types.CallRequestCont = cont.RequestCont.TypeCode;","Types.CallResponseCont = cont.ResponseCont.TypeCode;","Frame.Types[Types.CallRequestCont] = cont.RequestCont;","Frame.Types[Types.CallResponseCont] = cont.ResponseCont;","module.exports.CallRequestCont = cont.RequestCont;","module.exports.CallResponseCont = cont.ResponseCont;","","var Claim = require('./claim');","Types.Claim = Claim.TypeCode;","Frame.Types[Types.Claim] = Claim;","module.exports.Claim = Claim;","","var ping = require('./ping');","Types.PingRequest = ping.Request.TypeCode;","Types.PingResponse = ping.Response.TypeCode;","Frame.Types[Types.PingRequest] = ping.Request;","Frame.Types[Types.PingResponse] = ping.Response;","module.exports.PingRequest = ping.Request;","module.exports.PingResponse = ping.Response;","","var ErrorResponse = require('./error_response');","Types.ErrorResponse = ErrorResponse.TypeCode;","Frame.Types[Types.ErrorResponse] = ErrorResponse;","module.exports.ErrorResponse = ErrorResponse;","","module.exports.Checksum = require('./checksum');","","module.exports.Frame = Frame;","module.exports.LazyFrame = LazyFrame;","","module.exports.parseRetryFlags = function parseRetryFlags(val) {","    val = val || 'c';","    var never = val.indexOf('n') > -1;","    var onConnectionError = !never && val.indexOf('c') > -1;","    var onTimeout = !never && val.indexOf('t') > -1;","","    return new RetryFlags(","        never, onConnectionError, onTimeout","    );","};","","module.exports.encodeRetryFlags = function encodeRetryFlags(retryFlags) {","    if (!retryFlags) return '';","    var re = '';","    if (retryFlags.never) {","        re += 'n';","    } else {","        if (retryFlags.onConnectionError) re += 'c';","        if (retryFlags.onTimeout) re += 't';","    }","    return re;","};","","module.exports.Handler = require('./handler');","","module.exports.Tracing = require('./tracing.js');",""],"l":{"25":1,"27":1,"28":1,"30":1,"31":1,"32":1,"34":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"53":1,"54":1,"55":1,"56":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"66":1,"67":1,"68":1,"69":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"79":1,"80":1,"81":1,"82":1,"84":1,"86":1,"87":1,"89":1,"90":0,"91":0,"92":0,"93":0,"95":0,"100":1,"101":0,"102":0,"103":0,"104":0,"106":0,"107":0,"109":0,"112":1,"114":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/frame.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/frame.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":5,"13":5,"14":5,"15":5,"16":0,"17":5,"18":5,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":1,"99":0,"100":1,"101":0,"102":1,"103":0},"b":{"1":[5,5,0],"2":[0,5],"3":[5,5],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":5,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"Frame","line":40,"loc":{"start":{"line":40,"column":0},"end":{"line":40,"column":25}}},"2":{"name":"frameLength","line":55,"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":40}}},"3":{"name":"readFrameFrom","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":51}}},"4":{"name":"writeFrameInto","line":122,"loc":{"start":{"line":122,"column":0},"end":{"line":122,"column":59}}},"5":{"name":"fromBuffer","line":162,"loc":{"start":{"line":162,"column":19},"end":{"line":162,"column":47}}},"6":{"name":"byteLength","line":166,"loc":{"start":{"line":166,"column":29},"end":{"line":166,"column":51}}},"7":{"name":"intoBuffer","line":170,"loc":{"start":{"line":170,"column":29},"end":{"line":170,"column":57}}},"8":{"name":"toBuffer","line":174,"loc":{"start":{"line":174,"column":27},"end":{"line":174,"column":47}}}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":26,"column":22}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":23}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":51}},"4":{"start":{"line":29,"column":0},"end":{"line":29,"column":25}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":26}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":17}},"7":{"start":{"line":33,"column":0},"end":{"line":33,"column":23}},"8":{"start":{"line":35,"column":0},"end":{"line":35,"column":29}},"9":{"start":{"line":36,"column":0},"end":{"line":36,"column":34}},"10":{"start":{"line":38,"column":0},"end":{"line":38,"column":40}},"11":{"start":{"line":40,"column":0},"end":{"line":50,"column":1}},"12":{"start":{"line":41,"column":4},"end":{"line":41,"column":24}},"13":{"start":{"line":42,"column":4},"end":{"line":42,"column":18}},"14":{"start":{"line":43,"column":4},"end":{"line":43,"column":41}},"15":{"start":{"line":44,"column":4},"end":{"line":48,"column":5}},"16":{"start":{"line":45,"column":8},"end":{"line":45,"column":31}},"17":{"start":{"line":47,"column":8},"end":{"line":47,"column":21}},"18":{"start":{"line":49,"column":4},"end":{"line":49,"column":21}},"19":{"start":{"line":53,"column":0},"end":{"line":53,"column":72}},"20":{"start":{"line":55,"column":0},"end":{"line":71,"column":1}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":26}},"22":{"start":{"line":57,"column":4},"end":{"line":57,"column":37}},"23":{"start":{"line":59,"column":4},"end":{"line":59,"column":19}},"24":{"start":{"line":60,"column":4},"end":{"line":60,"column":35}},"25":{"start":{"line":61,"column":4},"end":{"line":61,"column":32}},"26":{"start":{"line":62,"column":4},"end":{"line":62,"column":16}},"27":{"start":{"line":63,"column":4},"end":{"line":63,"column":35}},"28":{"start":{"line":64,"column":4},"end":{"line":64,"column":16}},"29":{"start":{"line":66,"column":4},"end":{"line":66,"column":54}},"30":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"31":{"start":{"line":68,"column":8},"end":{"line":68,"column":29}},"32":{"start":{"line":70,"column":4},"end":{"line":70,"column":15}},"33":{"start":{"line":73,"column":0},"end":{"line":120,"column":1}},"34":{"start":{"line":75,"column":4},"end":{"line":75,"column":28}},"35":{"start":{"line":77,"column":4},"end":{"line":77,"column":12}},"36":{"start":{"line":79,"column":4},"end":{"line":79,"column":66}},"37":{"start":{"line":80,"column":4},"end":{"line":80,"column":28}},"38":{"start":{"line":80,"column":17},"end":{"line":80,"column":28}},"39":{"start":{"line":81,"column":4},"end":{"line":81,"column":24}},"40":{"start":{"line":82,"column":4},"end":{"line":82,"column":27}},"41":{"start":{"line":84,"column":4},"end":{"line":84,"column":63}},"42":{"start":{"line":85,"column":4},"end":{"line":85,"column":28}},"43":{"start":{"line":85,"column":17},"end":{"line":85,"column":28}},"44":{"start":{"line":86,"column":4},"end":{"line":86,"column":24}},"45":{"start":{"line":87,"column":4},"end":{"line":87,"column":27}},"46":{"start":{"line":89,"column":4},"end":{"line":89,"column":43}},"47":{"start":{"line":90,"column":4},"end":{"line":94,"column":5}},"48":{"start":{"line":91,"column":8},"end":{"line":93,"column":24}},"49":{"start":{"line":96,"column":4},"end":{"line":96,"column":16}},"50":{"start":{"line":98,"column":4},"end":{"line":98,"column":66}},"51":{"start":{"line":99,"column":4},"end":{"line":99,"column":28}},"52":{"start":{"line":99,"column":17},"end":{"line":99,"column":28}},"53":{"start":{"line":100,"column":4},"end":{"line":100,"column":24}},"54":{"start":{"line":101,"column":4},"end":{"line":101,"column":25}},"55":{"start":{"line":103,"column":4},"end":{"line":103,"column":16}},"56":{"start":{"line":105,"column":4},"end":{"line":105,"column":63}},"57":{"start":{"line":106,"column":4},"end":{"line":114,"column":5}},"58":{"start":{"line":107,"column":8},"end":{"line":112,"column":9}},"59":{"start":{"line":111,"column":12},"end":{"line":111,"column":39}},"60":{"start":{"line":113,"column":8},"end":{"line":113,"column":19}},"61":{"start":{"line":115,"column":4},"end":{"line":115,"column":24}},"62":{"start":{"line":116,"column":4},"end":{"line":116,"column":27}},"63":{"start":{"line":118,"column":4},"end":{"line":118,"column":22}},"64":{"start":{"line":119,"column":4},"end":{"line":119,"column":15}},"65":{"start":{"line":122,"column":0},"end":{"line":159,"column":1}},"66":{"start":{"line":123,"column":4},"end":{"line":123,"column":26}},"67":{"start":{"line":124,"column":4},"end":{"line":124,"column":37}},"68":{"start":{"line":126,"column":4},"end":{"line":126,"column":23}},"69":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}},"70":{"start":{"line":128,"column":4},"end":{"line":128,"column":12}},"71":{"start":{"line":131,"column":4},"end":{"line":131,"column":35}},"72":{"start":{"line":133,"column":4},"end":{"line":133,"column":76}},"73":{"start":{"line":134,"column":4},"end":{"line":134,"column":28}},"74":{"start":{"line":134,"column":17},"end":{"line":134,"column":28}},"75":{"start":{"line":135,"column":4},"end":{"line":135,"column":24}},"76":{"start":{"line":137,"column":4},"end":{"line":137,"column":21}},"77":{"start":{"line":138,"column":4},"end":{"line":138,"column":32}},"78":{"start":{"line":139,"column":4},"end":{"line":139,"column":17}},"79":{"start":{"line":141,"column":4},"end":{"line":141,"column":77}},"80":{"start":{"line":142,"column":4},"end":{"line":142,"column":28}},"81":{"start":{"line":142,"column":17},"end":{"line":142,"column":28}},"82":{"start":{"line":143,"column":4},"end":{"line":143,"column":24}},"83":{"start":{"line":145,"column":4},"end":{"line":145,"column":21}},"84":{"start":{"line":146,"column":4},"end":{"line":146,"column":32}},"85":{"start":{"line":147,"column":4},"end":{"line":147,"column":17}},"86":{"start":{"line":149,"column":4},"end":{"line":149,"column":65}},"87":{"start":{"line":150,"column":4},"end":{"line":150,"column":28}},"88":{"start":{"line":150,"column":17},"end":{"line":150,"column":28}},"89":{"start":{"line":151,"column":4},"end":{"line":151,"column":24}},"90":{"start":{"line":153,"column":4},"end":{"line":153,"column":36}},"91":{"start":{"line":154,"column":4},"end":{"line":154,"column":78}},"92":{"start":{"line":155,"column":4},"end":{"line":155,"column":28}},"93":{"start":{"line":155,"column":17},"end":{"line":155,"column":28}},"94":{"start":{"line":156,"column":4},"end":{"line":156,"column":24}},"95":{"start":{"line":158,"column":4},"end":{"line":158,"column":15}},"96":{"start":{"line":162,"column":0},"end":{"line":164,"column":2}},"97":{"start":{"line":163,"column":4},"end":{"line":163,"column":49}},"98":{"start":{"line":166,"column":0},"end":{"line":168,"column":2}},"99":{"start":{"line":167,"column":4},"end":{"line":167,"column":44}},"100":{"start":{"line":170,"column":0},"end":{"line":172,"column":2}},"101":{"start":{"line":171,"column":4},"end":{"line":171,"column":52}},"102":{"start":{"line":174,"column":0},"end":{"line":176,"column":2}},"103":{"start":{"line":175,"column":4},"end":{"line":175,"column":42}}},"branchMap":{"1":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":17},"end":{"line":43,"column":21}},{"start":{"line":43,"column":25},"end":{"line":43,"column":34}},{"start":{"line":43,"column":39},"end":{"line":43,"column":40}}]},"2":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":4}},{"start":{"line":44,"column":4},"end":{"line":44,"column":4}}]},"3":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":19}},{"start":{"line":44,"column":23},"end":{"line":44,"column":39}}]},"4":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"5":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"6":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"7":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},{"start":{"line":90,"column":4},"end":{"line":90,"column":4}}]},"8":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"9":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":106,"column":4}},{"start":{"line":106,"column":4},"end":{"line":106,"column":4}}]},"10":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"11":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":44}},{"start":{"line":108,"column":12},"end":{"line":108,"column":48}}]},"12":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":4},"end":{"line":134,"column":4}},{"start":{"line":134,"column":4},"end":{"line":134,"column":4}}]},"13":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":4},"end":{"line":142,"column":4}},{"start":{"line":142,"column":4},"end":{"line":142,"column":4}}]},"14":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":4},"end":{"line":150,"column":4}},{"start":{"line":150,"column":4},"end":{"line":150,"column":4}}]},"15":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","/* eslint max-statements: [1, 30] */","","Frame.Overhead = 0x10;","Frame.MaxSize = 0xffff;","Frame.MaxBodySize = Frame.MaxSize - Frame.Overhead;","Frame.MaxId = 0xfffffffe;","Frame.NullId = 0xffffffff;","","Frame.Types = {};","module.exports = Frame;","","var bufrw = require('bufrw');","var errors = require('../errors');","","var Types = require('./index.js').Types;","","function Frame(id, body) {","    this.isLazy = false;","    this.size = 0;","    this.type = (body && body.type) || 0;","    if (id === null || id === undefined) {","        this.id = Frame.NullId;","    } else {","        this.id = id;","    }","    this.body = body;","}","","// size:2: type:1 reserved:1 id:4 reserved:8 ...","Frame.RW = bufrw.Base(frameLength, readFrameFrom, writeFrameInto, true);","","function frameLength(destResult, frame) {","    var body = frame.body;","    var bodyRW = body.constructor.RW;","","    var length = 0;","    length += bufrw.UInt16BE.width; // size:2:","    length += bufrw.UInt8.width;    // type:1","    length += 1;                    // reserved:1","    length += bufrw.UInt32BE.width; // id:4","    length += 8;                    // reserved:8 ...","","    var res = bodyRW.poolByteLength(destResult, body);","    if (!res.err) {","        res.length += length;","    }","    return res;","}","","function readFrameFrom(destResult, buffer, offset) {","    // TODO: pool Frame object","    var frame = new Frame();","","    var res;","","    res = bufrw.UInt16BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    frame.size = res.value;","","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    frame.type = res.value;","","    var BodyType = Frame.Types[frame.type];","    if (!BodyType) {","        return destResult.reset(errors.InvalidFrameTypeError({","            typeNumber: frame.type","        }), offset - 1);","    }","","    offset += 1;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    frame.id = res.value;","","    offset += 8;","","    res = BodyType.RW.poolReadFrom(destResult, buffer, offset);","    if (res.err) {","        if (frame.type === Types.CallRequest ||","            frame.type === Types.CallRequestCont","        ) {","            // TODO: wrapped?","            res.err.frameId = frame.id;","        }","        return res;","    }","    offset = res.offset;","    frame.body = res.value;","","    res.value = frame;","    return res;","}","","function writeFrameInto(destResult, frame, buffer, offset) {","    var body = frame.body;","    var bodyRW = body.constructor.RW;","","    var start = offset;","    var end = offset;","    var res;","","    // skip size, write later","    offset += bufrw.UInt16BE.width;","","    res = bufrw.UInt8.poolWriteInto(destResult, frame.type, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    end = offset + 1;","    buffer.fill(0, offset, end);","    offset = end;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, frame.id, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    end = offset + 8;","    buffer.fill(0, offset, end);","    offset = end;","","    res = bodyRW.poolWriteInto(destResult, body, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    frame.size = res.offset - start;","    res = bufrw.UInt16BE.poolWriteInto(destResult, frame.size, buffer, start);","    if (res.err) return res;","    res.offset = offset;","","    return res;","}","","// TODO: pool below","Frame.fromBuffer = function fromBuffer(buffer) {","    return bufrw.fromBuffer(Frame.RW, buffer, 0);","};","","Frame.prototype.byteLength = function byteLength() {","    return bufrw.byteLength(Frame.RW, this);","};","","Frame.prototype.intoBuffer = function intoBuffer(buffer) {","    return bufrw.intoBuffer(Frame.RW, this, buffer);","};","","Frame.prototype.toBuffer = function toBuffer() {","    return bufrw.toBuffer(Frame.RW, this);","};",""],"l":{"26":1,"27":1,"28":1,"29":1,"30":1,"32":1,"33":1,"35":1,"36":1,"38":1,"40":1,"41":5,"42":5,"43":5,"44":5,"45":0,"47":5,"49":5,"53":1,"55":1,"56":0,"57":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"66":0,"67":0,"68":0,"70":0,"73":1,"75":0,"77":0,"79":0,"80":0,"81":0,"82":0,"84":0,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"96":0,"98":0,"99":0,"100":0,"101":0,"103":0,"105":0,"106":0,"107":0,"111":0,"113":0,"115":0,"116":0,"118":0,"119":0,"122":1,"123":0,"124":0,"126":0,"127":0,"128":0,"131":0,"133":0,"134":0,"135":0,"137":0,"138":0,"139":0,"141":0,"142":0,"143":0,"145":0,"146":0,"147":0,"149":0,"150":0,"151":0,"153":0,"154":0,"155":0,"156":0,"158":0,"162":1,"163":0,"166":1,"167":0,"170":1,"171":0,"174":1,"175":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/lazy_frame.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/lazy_frame.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"LazyFrame","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":43}}},"2":{"name":"CallRequestCache","line":46,"loc":{"start":{"line":46,"column":0},"end":{"line":46,"column":28}}},"3":{"name":"setId","line":70,"loc":{"start":{"line":70,"column":28},"end":{"line":70,"column":47}}},"4":{"name":"readBody","line":76,"loc":{"start":{"line":76,"column":31},"end":{"line":76,"column":51}}},"5":{"name":"lazyFrameLength","line":102,"loc":{"start":{"line":102,"column":0},"end":{"line":102,"column":36}}},"6":{"name":"readLazyFrameFrom","line":106,"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":43}}},"7":{"name":"writeLazyFrameInto","line":145,"loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":55}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":34}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":34}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":27}},"7":{"start":{"line":32,"column":0},"end":{"line":44,"column":1}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":23}},"9":{"start":{"line":34,"column":4},"end":{"line":34,"column":21}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":21}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":17}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":25}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":22}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":21}},"15":{"start":{"line":41,"column":4},"end":{"line":41,"column":23}},"16":{"start":{"line":42,"column":4},"end":{"line":42,"column":40}},"17":{"start":{"line":43,"column":4},"end":{"line":43,"column":24}},"18":{"start":{"line":46,"column":0},"end":{"line":61,"column":1}},"19":{"start":{"line":47,"column":4},"end":{"line":47,"column":27}},"20":{"start":{"line":48,"column":4},"end":{"line":48,"column":30}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":35}},"22":{"start":{"line":50,"column":4},"end":{"line":50,"column":24}},"23":{"start":{"line":51,"column":4},"end":{"line":51,"column":25}},"24":{"start":{"line":52,"column":4},"end":{"line":52,"column":29}},"25":{"start":{"line":54,"column":4},"end":{"line":54,"column":34}},"26":{"start":{"line":55,"column":4},"end":{"line":55,"column":32}},"27":{"start":{"line":57,"column":4},"end":{"line":57,"column":30}},"28":{"start":{"line":58,"column":4},"end":{"line":58,"column":30}},"29":{"start":{"line":60,"column":4},"end":{"line":60,"column":26}},"30":{"start":{"line":64,"column":0},"end":{"line":64,"column":82}},"31":{"start":{"line":66,"column":0},"end":{"line":66,"column":25}},"32":{"start":{"line":67,"column":0},"end":{"line":67,"column":31}},"33":{"start":{"line":68,"column":0},"end":{"line":68,"column":38}},"34":{"start":{"line":70,"column":0},"end":{"line":74,"column":2}},"35":{"start":{"line":71,"column":4},"end":{"line":71,"column":58}},"36":{"start":{"line":72,"column":4},"end":{"line":72,"column":17}},"37":{"start":{"line":73,"column":4},"end":{"line":73,"column":59}},"38":{"start":{"line":76,"column":0},"end":{"line":100,"column":2}},"39":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"40":{"start":{"line":78,"column":8},"end":{"line":78,"column":48}},"41":{"start":{"line":81,"column":4},"end":{"line":84,"column":5}},"42":{"start":{"line":83,"column":8},"end":{"line":83,"column":75}},"43":{"start":{"line":86,"column":4},"end":{"line":86,"column":70}},"44":{"start":{"line":88,"column":4},"end":{"line":97,"column":5}},"45":{"start":{"line":89,"column":8},"end":{"line":94,"column":9}},"46":{"start":{"line":93,"column":12},"end":{"line":93,"column":38}},"47":{"start":{"line":96,"column":8},"end":{"line":96,"column":30}},"48":{"start":{"line":99,"column":4},"end":{"line":99,"column":15}},"49":{"start":{"line":102,"column":0},"end":{"line":104,"column":1}},"50":{"start":{"line":103,"column":4},"end":{"line":103,"column":51}},"51":{"start":{"line":106,"column":0},"end":{"line":143,"column":1}},"52":{"start":{"line":107,"column":4},"end":{"line":107,"column":23}},"53":{"start":{"line":110,"column":4},"end":{"line":114,"column":5}},"54":{"start":{"line":111,"column":8},"end":{"line":113,"column":10}},"55":{"start":{"line":115,"column":4},"end":{"line":115,"column":43}},"56":{"start":{"line":116,"column":4},"end":{"line":116,"column":19}},"57":{"start":{"line":118,"column":4},"end":{"line":122,"column":5}},"58":{"start":{"line":119,"column":8},"end":{"line":121,"column":10}},"59":{"start":{"line":123,"column":4},"end":{"line":123,"column":50}},"60":{"start":{"line":126,"column":4},"end":{"line":126,"column":59}},"61":{"start":{"line":129,"column":4},"end":{"line":129,"column":58}},"62":{"start":{"line":131,"column":4},"end":{"line":131,"column":63}},"63":{"start":{"line":132,"column":4},"end":{"line":132,"column":47}},"64":{"start":{"line":134,"column":4},"end":{"line":138,"column":5}},"65":{"start":{"line":135,"column":8},"end":{"line":137,"column":43}},"66":{"start":{"line":140,"column":4},"end":{"line":140,"column":35}},"67":{"start":{"line":142,"column":4},"end":{"line":142,"column":52}},"68":{"start":{"line":145,"column":0},"end":{"line":159,"column":1}},"69":{"start":{"line":146,"column":4},"end":{"line":150,"column":5}},"70":{"start":{"line":147,"column":8},"end":{"line":149,"column":12}},"71":{"start":{"line":152,"column":4},"end":{"line":152,"column":40}},"72":{"start":{"line":153,"column":4},"end":{"line":155,"column":5}},"73":{"start":{"line":154,"column":8},"end":{"line":154,"column":76}},"74":{"start":{"line":157,"column":4},"end":{"line":157,"column":71}},"75":{"start":{"line":158,"column":4},"end":{"line":158,"column":42}}},"branchMap":{"1":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":77,"column":4}},{"start":{"line":77,"column":4},"end":{"line":77,"column":4}}]},"2":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"3":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]},"4":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"5":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":12},"end":{"line":89,"column":43}},{"start":{"line":90,"column":12},"end":{"line":90,"column":47}}]},"6":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":4},"end":{"line":110,"column":4}},{"start":{"line":110,"column":4},"end":{"line":110,"column":4}}]},"7":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]},"8":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":4},"end":{"line":134,"column":4}},{"start":{"line":134,"column":4},"end":{"line":134,"column":4}}]},"9":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"10":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":153,"column":4}},{"start":{"line":153,"column":4},"end":{"line":153,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var bufrw = require('bufrw');","var errors = require('../errors');","","var Frame = require('./frame.js');","var Types = require('./index.js').Types;","","module.exports = LazyFrame;","","function LazyFrame(size, type, id, buffer) {","    this.isLazy = true;","    this.size = size;","    this.type = type;","    this.id = id;","    this.buffer = buffer;","    this.start = null;","","    this.body = null;","    this.bodyRW = null;","    this.cache = new CallRequestCache();","    this.circuit = null;","}","","function CallRequestCache() {","    this.serviceStr = null;","    this.callerNameStr = null;","    this.routingDelegateStr = null;","    this.arg1Str = null;","    this.ttlValue = null;","    this.tracingValue = null;","","    this.headerStartOffset = null;","    this.csumStartOffset = null;","","    this.cnValueOffset = null;","    this.rdValueOffset = null;","","    this.lastError = null;","}","","// size:2 type:1 reserved:1 id:4 reserved:8 ...","LazyFrame.RW = bufrw.Base(lazyFrameLength, readLazyFrameFrom, writeLazyFrameInto);","","LazyFrame.TypeOffset = 2;","LazyFrame.IdOffset = 2 + 1 + 1;","LazyFrame.BodyOffset = Frame.Overhead;","","LazyFrame.prototype.setId = function setId(id) {","    assert.ok(this.buffer, 'must have a buffer supplied');","    this.id = id;","    this.buffer.writeUInt32BE(this.id, LazyFrame.IdOffset);","};","","LazyFrame.prototype.readBody = function readBody() {","    if (this.body) {","        return bufrw.ReadResult.just(this.body);","    }","","    if (!this.buffer) {","        // TODO: typed error","        return bufrw.ReadResult.error(new Error('no buffer to read from'));","    }","","    var res = this.bodyRW.readFrom(this.buffer, LazyFrame.BodyOffset);","","    if (res.err) {","        if (this.type === Types.CallRequest ||","            this.type === Types.CallRequestCont","        ) {","            // TODO: wrapped?","            res.err.frameId = this.id;","        }","    } else {","        this.body = res.value;","    }","","    return res;","};","","function lazyFrameLength(lazyFrame) {","    return bufrw.LengthResult.just(lazyFrame.size);","}","","function readLazyFrameFrom(buffer, offset) {","    var start = offset;","","    // size:2:","    if (buffer.length < offset + 2) {","        return bufrw.ReadResult.shortError(","            offset + 2, buffer.length, offset","        );","    }","    var size = buffer.readUInt16BE(offset);","    offset += size;","","    if (buffer.length < offset) {","        return bufrw.ReadResult.shortError(","            offset, buffer.length, start","        );","    }","    var frameBuffer = buffer.slice(start, offset);","","    // type:1","    var type = frameBuffer.readUInt8(LazyFrame.TypeOffset);","","    // id:4","    var id = frameBuffer.readUInt32BE(LazyFrame.IdOffset);","","    var lazyFrame = new LazyFrame(size, type, id, frameBuffer);","    var BodyType = Frame.Types[lazyFrame.type];","","    if (!BodyType) {","        return bufrw.ReadResult.error(errors.InvalidFrameTypeError({","            typeNumber: lazyFrame.type","        }), offset + LazyFrame.TypeOffset);","    }","","    lazyFrame.bodyRW = BodyType.RW;","","    return bufrw.ReadResult.just(offset, lazyFrame);","}","","function writeLazyFrameInto(lazyFrame, buffer, offset) {","    if (!lazyFrame.buffer) {","        return bufrw.WriteResult.error(errors.CorruptWriteLazyFrame({","            context: 'missing buffer'","        }));","    }","","    var remain = buffer.length - offset;","    if (lazyFrame.size > remain) {","        return bufrw.WriteResult.shortError(lazyFrame.size, remain, offset);","    }","","    offset += lazyFrame.buffer.copy(buffer, offset, 0, lazyFrame.size);","    return bufrw.WriteResult.just(offset);","}",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":1,"30":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"43":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"57":0,"58":0,"60":0,"64":1,"66":1,"67":1,"68":1,"70":1,"71":0,"72":0,"73":0,"76":1,"77":0,"78":0,"81":0,"83":0,"86":0,"88":0,"89":0,"93":0,"96":0,"99":0,"102":1,"103":0,"106":1,"107":0,"110":0,"111":0,"115":0,"116":0,"118":0,"119":0,"123":0,"126":0,"129":0,"131":0,"132":0,"134":0,"135":0,"140":0,"142":0,"145":1,"146":0,"147":0,"152":0,"153":0,"154":0,"157":0,"158":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/call_flags.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/call_flags.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":25,"column":2}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = {","    Fragment: 0x01","};",""],"l":{"23":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/init.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/init.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"InitRequest","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":39}}},"2":{"name":"InitResponse","line":51,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":40}}},"3":{"name":"writeFieldGuard","line":66,"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":63}}},"4":{"name":"readFieldGuard","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":62}}},"5":{"name":"requiredFieldGuard","line":78,"loc":{"start":{"line":78,"column":0},"end":{"line":78,"column":37}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":29}},"2":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":34}},"4":{"start":{"line":29,"column":0},"end":{"line":29,"column":37}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":39}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":57}},"7":{"start":{"line":34,"column":0},"end":{"line":38,"column":1}},"8":{"start":{"line":35,"column":4},"end":{"line":35,"column":37}},"9":{"start":{"line":36,"column":4},"end":{"line":36,"column":32}},"10":{"start":{"line":37,"column":4},"end":{"line":37,"column":33}},"11":{"start":{"line":40,"column":0},"end":{"line":40,"column":28}},"12":{"start":{"line":42,"column":0},"end":{"line":47,"column":3}},"13":{"start":{"line":51,"column":0},"end":{"line":55,"column":1}},"14":{"start":{"line":52,"column":4},"end":{"line":52,"column":38}},"15":{"start":{"line":53,"column":4},"end":{"line":53,"column":32}},"16":{"start":{"line":54,"column":4},"end":{"line":54,"column":33}},"17":{"start":{"line":57,"column":0},"end":{"line":57,"column":29}},"18":{"start":{"line":59,"column":0},"end":{"line":64,"column":3}},"19":{"start":{"line":66,"column":0},"end":{"line":70,"column":1}},"20":{"start":{"line":67,"column":4},"end":{"line":67,"column":51}},"21":{"start":{"line":68,"column":4},"end":{"line":69,"column":47}},"22":{"start":{"line":68,"column":13},"end":{"line":68,"column":50}},"23":{"start":{"line":69,"column":9},"end":{"line":69,"column":47}},"24":{"start":{"line":72,"column":0},"end":{"line":76,"column":1}},"25":{"start":{"line":73,"column":4},"end":{"line":73,"column":51}},"26":{"start":{"line":74,"column":4},"end":{"line":75,"column":47}},"27":{"start":{"line":74,"column":13},"end":{"line":74,"column":50}},"28":{"start":{"line":75,"column":9},"end":{"line":75,"column":47}},"29":{"start":{"line":78,"column":0},"end":{"line":86,"column":1}},"30":{"start":{"line":79,"column":4},"end":{"line":84,"column":5}},"31":{"start":{"line":80,"column":8},"end":{"line":80,"column":44}},"32":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"33":{"start":{"line":82,"column":12},"end":{"line":82,"column":65}},"34":{"start":{"line":85,"column":4},"end":{"line":85,"column":16}}},"branchMap":{"1":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":19},"end":{"line":36,"column":26}},{"start":{"line":36,"column":30},"end":{"line":36,"column":31}}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":19},"end":{"line":37,"column":26}},{"start":{"line":37,"column":30},"end":{"line":37,"column":32}}]},"3":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":19},"end":{"line":53,"column":26}},{"start":{"line":53,"column":30},"end":{"line":53,"column":31}}]},"4":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":19},"end":{"line":54,"column":26}},{"start":{"line":54,"column":30},"end":{"line":54,"column":32}}]},"5":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"6":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"7":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":8}},{"start":{"line":81,"column":8},"end":{"line":81,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","","var bufrw = require('bufrw');","var header = require('./header');","var errors = require('../errors');","","module.exports.Request = InitRequest;","module.exports.Response = InitResponse;","","var RequiredHeaderFields = ['host_port', 'process_name'];","","function InitRequest(version, headers) {","    this.type = InitRequest.TypeCode;","    this.version = version || 0;","    this.headers = headers || {};","}","","InitRequest.TypeCode = 0x01;","","InitRequest.RW = bufrw.Struct(InitRequest, [","    {call: {poolWriteInto: writeFieldGuard}},","    {name: 'version', rw: bufrw.UInt16BE}, // version:2","    {name: 'headers', rw: header.header2}, // nh:2 (hk~2 hv~2){nh}","    {call: {poolReadFrom: readFieldGuard}}","]);","","// TODO: MissingInitHeaderError check / guard","","function InitResponse(version, headers) {","    this.type = InitResponse.TypeCode;","    this.version = version || 0;","    this.headers = headers || {};","}","","InitResponse.TypeCode = 0x02;","","InitResponse.RW = bufrw.Struct(InitResponse, [","    {call: {poolWriteInto: writeFieldGuard}},","    {name: 'version', rw: bufrw.UInt16BE}, // version:2","    {name: 'headers', rw: header.header2}, // nh:2 (hk~2 hv~2){nh}","    {call: {poolReadFrom: readFieldGuard}}","]);","","function writeFieldGuard(destResult, initBody, buffer, offset) {","    var err = requiredFieldGuard(initBody.headers);","    if (err) return destResult.reset(err, offset);","    else return destResult.reset(null, offset);","}","","function readFieldGuard(destResult, initBody, buffer, offset) {","    var err = requiredFieldGuard(initBody.headers);","    if (err) return destResult.reset(err, offset);","    else return destResult.reset(null, offset);","}","","function requiredFieldGuard(headers) {","    for (var i = 0; i < RequiredHeaderFields.length; i++) {","        var field = RequiredHeaderFields[i];","        if (headers[field] === undefined) {","            return errors.MissingInitHeaderError({field: field});","        }","    }","    return null;","}",""],"l":{"25":1,"26":1,"27":1,"29":1,"30":1,"32":1,"34":1,"35":0,"36":0,"37":0,"40":1,"42":1,"51":1,"52":0,"53":0,"54":0,"57":1,"59":1,"66":1,"67":0,"68":0,"69":0,"72":1,"73":0,"74":0,"75":0,"78":1,"79":0,"80":0,"81":0,"82":0,"85":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/call.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/call.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":1,"24":0,"25":0,"26":1,"27":0,"28":1,"29":11,"30":1,"31":0,"32":1,"33":1,"34":1,"35":5,"36":5,"37":5,"38":5,"39":5,"40":5,"41":5,"42":5,"43":5,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":0,"51":1,"52":1,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":1,"65":1,"66":1,"67":0,"68":1,"69":1,"70":1,"71":0,"72":1,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":1,"98":0,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":1,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":1,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":1,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":1,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":1,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":1,"239":1,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":1,"259":1,"260":0,"261":0,"262":0,"263":1,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":1,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":1,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":1,"349":0,"350":1,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":1,"360":1,"361":1,"362":1,"363":1,"364":1,"365":1,"366":0,"367":1,"368":1,"369":1,"370":0,"371":1,"372":1,"373":0,"374":1,"375":1,"376":1,"377":0,"378":0,"379":1,"380":1,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":1,"396":1,"397":0,"398":0,"399":0,"400":1,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":1,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":1,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":1,"469":0},"b":{"1":[0,1],"2":[1,1],"3":[5,0],"4":[5,0],"5":[5,0],"6":[5,0],"7":[5,0],"8":[5,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0]},"f":{"1":0,"2":0,"3":11,"4":0,"5":5,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},"fnMap":{"1":{"name":"node10ToString","line":60,"loc":{"start":{"line":60,"column":0},"end":{"line":60,"column":45}}},"2":{"name":"allNodeToString","line":69,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":42}}},"3":{"name":"allocifyPoolFn","line":74,"loc":{"start":{"line":74,"column":0},"end":{"line":74,"column":40}}},"4":{"name":"allocFn","line":77,"loc":{"start":{"line":77,"column":4},"end":{"line":77,"column":39}}},"5":{"name":"CallRequest","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":72}}},"6":{"name":"poolReadFlags","line":108,"loc":{"start":{"line":108,"column":36},"end":{"line":108,"column":78}}},"7":{"name":"readTTL","line":116,"loc":{"start":{"line":116,"column":30},"end":{"line":116,"column":54}}},"8":{"name":"poolWriteTTL","line":131,"loc":{"start":{"line":131,"column":35},"end":{"line":131,"column":81}}},"9":{"name":"poolLazyReadTracing","line":139,"loc":{"start":{"line":139,"column":38},"end":{"line":139,"column":86}}},"10":{"name":"poolLazyReadService","line":147,"loc":{"start":{"line":147,"column":38},"end":{"line":147,"column":86}}},"11":{"name":"poolReadTracingValue","line":154,"loc":{"start":{"line":154,"column":43},"end":{"line":154,"column":92}}},"12":{"name":"TracingInfo","line":201,"loc":{"start":{"line":201,"column":0},"end":{"line":201,"column":55}}},"13":{"name":"lazyReadServiceStr","line":208,"loc":{"start":{"line":208,"column":37},"end":{"line":208,"column":72}}},"14":{"name":"findHeaderStartOffset","line":232,"loc":{"start":{"line":232,"column":0},"end":{"line":232,"column":38}}},"15":{"name":"scanAndSkipHeaders","line":248,"loc":{"start":{"line":248,"column":0},"end":{"line":248,"column":35}}},"16":{"name":"readCallerNameStr","line":310,"loc":{"start":{"line":310,"column":0},"end":{"line":310,"column":34}}},"17":{"name":"readRoutingDelegateStr","line":338,"loc":{"start":{"line":338,"column":0},"end":{"line":338,"column":39}}},"18":{"name":"readUInt8String","line":365,"loc":{"start":{"line":365,"column":0},"end":{"line":365,"column":40}}},"19":{"name":"readArg1Str","line":380,"loc":{"start":{"line":380,"column":34},"end":{"line":380,"column":62}}},"20":{"name":"poolReadHeaders","line":426,"loc":{"start":{"line":426,"column":38},"end":{"line":426,"column":82}}},"21":{"name":"poolReadArg1","line":448,"loc":{"start":{"line":448,"column":35},"end":{"line":448,"column":85}}},"22":{"name":"isFrameTerminal","line":489,"loc":{"start":{"line":489,"column":38},"end":{"line":489,"column":70}}},"23":{"name":"callReqLength","line":495,"loc":{"start":{"line":495,"column":0},"end":{"line":495,"column":41}}},"24":{"name":"readCallReqFrom","line":527,"loc":{"start":{"line":527,"column":0},"end":{"line":527,"column":53}}},"25":{"name":"writeCallReqInto","line":576,"loc":{"start":{"line":576,"column":0},"end":{"line":576,"column":60}}},"26":{"name":"verifyChecksum","line":621,"loc":{"start":{"line":621,"column":39},"end":{"line":621,"column":65}}},"27":{"name":"CallResponse","line":626,"loc":{"start":{"line":626,"column":0},"end":{"line":626,"column":65}}},"28":{"name":"poolReadFlags","line":645,"loc":{"start":{"line":645,"column":37},"end":{"line":645,"column":79}}},"29":{"name":"poolReadCode","line":653,"loc":{"start":{"line":653,"column":36},"end":{"line":653,"column":77}}},"30":{"name":"poolLazyReadTracing","line":660,"loc":{"start":{"line":660,"column":39},"end":{"line":660,"column":87}}},"31":{"name":"poolReadHeaders","line":669,"loc":{"start":{"line":669,"column":39},"end":{"line":669,"column":83}}},"32":{"name":"poolReadArg1","line":682,"loc":{"start":{"line":682,"column":36},"end":{"line":682,"column":86}}},"33":{"name":"isFrameTerminal","line":716,"loc":{"start":{"line":716,"column":39},"end":{"line":716,"column":71}}},"34":{"name":"callResLength","line":722,"loc":{"start":{"line":722,"column":0},"end":{"line":722,"column":41}}},"35":{"name":"readCallResFrom","line":748,"loc":{"start":{"line":748,"column":0},"end":{"line":748,"column":53}}},"36":{"name":"writeCallResInto","line":783,"loc":{"start":{"line":783,"column":0},"end":{"line":783,"column":60}}},"37":{"name":"verifyChecksum","line":817,"loc":{"start":{"line":817,"column":40},"end":{"line":817,"column":66}}}},"statementMap":{"1":{"start":{"line":27,"column":0},"end":{"line":27,"column":29}},"2":{"start":{"line":28,"column":0},"end":{"line":28,"column":38}},"3":{"start":{"line":29,"column":0},"end":{"line":29,"column":29}},"4":{"start":{"line":31,"column":0},"end":{"line":31,"column":34}},"5":{"start":{"line":32,"column":0},"end":{"line":32,"column":31}},"6":{"start":{"line":33,"column":0},"end":{"line":33,"column":37}},"7":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}},"8":{"start":{"line":35,"column":0},"end":{"line":35,"column":35}},"9":{"start":{"line":36,"column":0},"end":{"line":36,"column":31}},"10":{"start":{"line":37,"column":0},"end":{"line":37,"column":40}},"11":{"start":{"line":38,"column":0},"end":{"line":38,"column":26}},"12":{"start":{"line":40,"column":0},"end":{"line":40,"column":34}},"13":{"start":{"line":41,"column":0},"end":{"line":41,"column":36}},"14":{"start":{"line":42,"column":0},"end":{"line":42,"column":31}},"15":{"start":{"line":44,"column":0},"end":{"line":44,"column":55}},"16":{"start":{"line":45,"column":0},"end":{"line":45,"column":55}},"17":{"start":{"line":47,"column":0},"end":{"line":50,"column":2}},"18":{"start":{"line":52,"column":0},"end":{"line":52,"column":41}},"19":{"start":{"line":53,"column":0},"end":{"line":53,"column":49}},"20":{"start":{"line":55,"column":0},"end":{"line":55,"column":41}},"21":{"start":{"line":56,"column":0},"end":{"line":58,"column":1}},"22":{"start":{"line":57,"column":4},"end":{"line":57,"column":40}},"23":{"start":{"line":60,"column":0},"end":{"line":67,"column":1}},"24":{"start":{"line":61,"column":4},"end":{"line":61,"column":33}},"25":{"start":{"line":63,"column":4},"end":{"line":66,"column":6}},"26":{"start":{"line":69,"column":0},"end":{"line":71,"column":1}},"27":{"start":{"line":70,"column":4},"end":{"line":70,"column":44}},"28":{"start":{"line":74,"column":0},"end":{"line":80,"column":1}},"29":{"start":{"line":75,"column":4},"end":{"line":75,"column":19}},"30":{"start":{"line":77,"column":4},"end":{"line":79,"column":5}},"31":{"start":{"line":78,"column":8},"end":{"line":78,"column":54}},"32":{"start":{"line":82,"column":0},"end":{"line":82,"column":37}},"33":{"start":{"line":83,"column":0},"end":{"line":83,"column":39}},"34":{"start":{"line":89,"column":0},"end":{"line":99,"column":1}},"35":{"start":{"line":90,"column":4},"end":{"line":90,"column":37}},"36":{"start":{"line":91,"column":4},"end":{"line":91,"column":28}},"37":{"start":{"line":92,"column":4},"end":{"line":92,"column":24}},"38":{"start":{"line":93,"column":4},"end":{"line":93,"column":51}},"39":{"start":{"line":94,"column":4},"end":{"line":94,"column":33}},"40":{"start":{"line":95,"column":4},"end":{"line":95,"column":33}},"41":{"start":{"line":96,"column":4},"end":{"line":96,"column":41}},"42":{"start":{"line":97,"column":4},"end":{"line":97,"column":27}},"43":{"start":{"line":98,"column":4},"end":{"line":98,"column":21}},"44":{"start":{"line":101,"column":0},"end":{"line":101,"column":49}},"45":{"start":{"line":102,"column":0},"end":{"line":102,"column":28}},"46":{"start":{"line":103,"column":0},"end":{"line":103,"column":84}},"47":{"start":{"line":105,"column":0},"end":{"line":105,"column":25}},"48":{"start":{"line":107,"column":0},"end":{"line":107,"column":49}},"49":{"start":{"line":108,"column":0},"end":{"line":111,"column":2}},"50":{"start":{"line":110,"column":4},"end":{"line":110,"column":95}},"51":{"start":{"line":113,"column":0},"end":{"line":113,"column":94}},"52":{"start":{"line":115,"column":0},"end":{"line":115,"column":68}},"53":{"start":{"line":116,"column":0},"end":{"line":130,"column":2}},"54":{"start":{"line":117,"column":4},"end":{"line":119,"column":5}},"55":{"start":{"line":118,"column":8},"end":{"line":118,"column":36}},"56":{"start":{"line":121,"column":4},"end":{"line":121,"column":47}},"57":{"start":{"line":122,"column":4},"end":{"line":124,"column":5}},"58":{"start":{"line":123,"column":8},"end":{"line":123,"column":17}},"59":{"start":{"line":125,"column":4},"end":{"line":125,"column":55}},"60":{"start":{"line":127,"column":4},"end":{"line":127,"column":31}},"61":{"start":{"line":129,"column":4},"end":{"line":129,"column":15}},"62":{"start":{"line":131,"column":0},"end":{"line":134,"column":2}},"63":{"start":{"line":133,"column":4},"end":{"line":133,"column":102}},"64":{"start":{"line":136,"column":0},"end":{"line":136,"column":93}},"65":{"start":{"line":138,"column":0},"end":{"line":138,"column":70}},"66":{"start":{"line":139,"column":0},"end":{"line":142,"column":2}},"67":{"start":{"line":141,"column":4},"end":{"line":141,"column":96}},"68":{"start":{"line":144,"column":0},"end":{"line":144,"column":98}},"69":{"start":{"line":146,"column":0},"end":{"line":146,"column":75}},"70":{"start":{"line":147,"column":0},"end":{"line":150,"column":2}},"71":{"start":{"line":149,"column":4},"end":{"line":149,"column":96}},"72":{"start":{"line":152,"column":0},"end":{"line":152,"column":98}},"73":{"start":{"line":154,"column":0},"end":{"line":197,"column":2}},"74":{"start":{"line":155,"column":4},"end":{"line":157,"column":5}},"75":{"start":{"line":156,"column":8},"end":{"line":156,"column":40}},"76":{"start":{"line":159,"column":4},"end":{"line":159,"column":51}},"77":{"start":{"line":161,"column":4},"end":{"line":163,"column":5}},"78":{"start":{"line":162,"column":8},"end":{"line":162,"column":20}},"79":{"start":{"line":165,"column":4},"end":{"line":165,"column":59}},"80":{"start":{"line":166,"column":4},"end":{"line":166,"column":16}},"81":{"start":{"line":168,"column":4},"end":{"line":168,"column":59}},"82":{"start":{"line":169,"column":4},"end":{"line":169,"column":16}},"83":{"start":{"line":171,"column":4},"end":{"line":171,"column":61}},"84":{"start":{"line":172,"column":4},"end":{"line":172,"column":16}},"85":{"start":{"line":174,"column":4},"end":{"line":174,"column":61}},"86":{"start":{"line":175,"column":4},"end":{"line":175,"column":16}},"87":{"start":{"line":177,"column":4},"end":{"line":177,"column":60}},"88":{"start":{"line":178,"column":4},"end":{"line":178,"column":16}},"89":{"start":{"line":180,"column":4},"end":{"line":180,"column":60}},"90":{"start":{"line":181,"column":4},"end":{"line":181,"column":16}},"91":{"start":{"line":183,"column":4},"end":{"line":183,"column":54}},"92":{"start":{"line":184,"column":4},"end":{"line":184,"column":16}},"93":{"start":{"line":187,"column":4},"end":{"line":192,"column":6}},"94":{"start":{"line":194,"column":4},"end":{"line":194,"column":39}},"95":{"start":{"line":196,"column":4},"end":{"line":196,"column":19}},"96":{"start":{"line":199,"column":0},"end":{"line":199,"column":108}},"97":{"start":{"line":201,"column":0},"end":{"line":206,"column":1}},"98":{"start":{"line":202,"column":4},"end":{"line":202,"column":25}},"99":{"start":{"line":203,"column":4},"end":{"line":203,"column":29}},"100":{"start":{"line":204,"column":4},"end":{"line":204,"column":27}},"101":{"start":{"line":205,"column":4},"end":{"line":205,"column":23}},"102":{"start":{"line":208,"column":0},"end":{"line":230,"column":2}},"103":{"start":{"line":209,"column":4},"end":{"line":211,"column":5}},"104":{"start":{"line":210,"column":8},"end":{"line":210,"column":38}},"105":{"start":{"line":213,"column":4},"end":{"line":213,"column":57}},"106":{"start":{"line":214,"column":4},"end":{"line":216,"column":5}},"107":{"start":{"line":215,"column":8},"end":{"line":215,"column":20}},"108":{"start":{"line":218,"column":4},"end":{"line":220,"column":5}},"109":{"start":{"line":219,"column":8},"end":{"line":219,"column":20}},"110":{"start":{"line":221,"column":4},"end":{"line":225,"column":6}},"111":{"start":{"line":227,"column":4},"end":{"line":227,"column":44}},"112":{"start":{"line":229,"column":4},"end":{"line":229,"column":26}},"113":{"start":{"line":232,"column":0},"end":{"line":246,"column":1}},"114":{"start":{"line":233,"column":4},"end":{"line":235,"column":5}},"115":{"start":{"line":234,"column":8},"end":{"line":234,"column":45}},"116":{"start":{"line":237,"column":4},"end":{"line":237,"column":51}},"117":{"start":{"line":238,"column":4},"end":{"line":240,"column":5}},"118":{"start":{"line":239,"column":8},"end":{"line":239,"column":17}},"119":{"start":{"line":241,"column":4},"end":{"line":241,"column":58}},"120":{"start":{"line":242,"column":4},"end":{"line":242,"column":28}},"121":{"start":{"line":244,"column":4},"end":{"line":244,"column":43}},"122":{"start":{"line":245,"column":4},"end":{"line":245,"column":18}},"123":{"start":{"line":248,"column":0},"end":{"line":307,"column":1}},"124":{"start":{"line":249,"column":4},"end":{"line":249,"column":46}},"125":{"start":{"line":250,"column":4},"end":{"line":252,"column":5}},"126":{"start":{"line":251,"column":8},"end":{"line":251,"column":21}},"127":{"start":{"line":254,"column":4},"end":{"line":256,"column":5}},"128":{"start":{"line":255,"column":8},"end":{"line":255,"column":21}},"129":{"start":{"line":257,"column":4},"end":{"line":257,"column":51}},"130":{"start":{"line":258,"column":4},"end":{"line":258,"column":16}},"131":{"start":{"line":260,"column":4},"end":{"line":260,"column":26}},"132":{"start":{"line":261,"column":4},"end":{"line":261,"column":26}},"133":{"start":{"line":263,"column":4},"end":{"line":301,"column":5}},"134":{"start":{"line":264,"column":8},"end":{"line":266,"column":9}},"135":{"start":{"line":265,"column":12},"end":{"line":265,"column":25}},"136":{"start":{"line":267,"column":8},"end":{"line":267,"column":62}},"137":{"start":{"line":268,"column":8},"end":{"line":268,"column":20}},"138":{"start":{"line":269,"column":8},"end":{"line":271,"column":9}},"139":{"start":{"line":270,"column":12},"end":{"line":270,"column":25}},"140":{"start":{"line":273,"column":8},"end":{"line":273,"column":28}},"141":{"start":{"line":275,"column":8},"end":{"line":280,"column":9}},"142":{"start":{"line":276,"column":12},"end":{"line":276,"column":76}},"143":{"start":{"line":277,"column":12},"end":{"line":279,"column":13}},"144":{"start":{"line":278,"column":16},"end":{"line":278,"column":51}},"145":{"start":{"line":282,"column":8},"end":{"line":287,"column":9}},"146":{"start":{"line":283,"column":12},"end":{"line":283,"column":76}},"147":{"start":{"line":284,"column":12},"end":{"line":286,"column":13}},"148":{"start":{"line":285,"column":16},"end":{"line":285,"column":51}},"149":{"start":{"line":289,"column":8},"end":{"line":289,"column":28}},"150":{"start":{"line":291,"column":8},"end":{"line":293,"column":9}},"151":{"start":{"line":292,"column":12},"end":{"line":292,"column":25}},"152":{"start":{"line":294,"column":8},"end":{"line":294,"column":64}},"153":{"start":{"line":295,"column":8},"end":{"line":295,"column":20}},"154":{"start":{"line":296,"column":8},"end":{"line":298,"column":9}},"155":{"start":{"line":297,"column":12},"end":{"line":297,"column":25}},"156":{"start":{"line":300,"column":8},"end":{"line":300,"column":30}},"157":{"start":{"line":303,"column":4},"end":{"line":303,"column":46}},"158":{"start":{"line":304,"column":4},"end":{"line":304,"column":46}},"159":{"start":{"line":305,"column":4},"end":{"line":305,"column":41}},"160":{"start":{"line":306,"column":4},"end":{"line":306,"column":16}},"161":{"start":{"line":309,"column":0},"end":{"line":335,"column":2}},"162":{"start":{"line":312,"column":4},"end":{"line":314,"column":5}},"163":{"start":{"line":313,"column":8},"end":{"line":313,"column":41}},"164":{"start":{"line":316,"column":4},"end":{"line":321,"column":5}},"165":{"start":{"line":317,"column":8},"end":{"line":317,"column":48}},"166":{"start":{"line":318,"column":8},"end":{"line":320,"column":9}},"167":{"start":{"line":319,"column":12},"end":{"line":319,"column":24}},"168":{"start":{"line":323,"column":4},"end":{"line":323,"column":43}},"169":{"start":{"line":324,"column":4},"end":{"line":326,"column":5}},"170":{"start":{"line":325,"column":8},"end":{"line":325,"column":20}},"171":{"start":{"line":328,"column":4},"end":{"line":328,"column":55}},"172":{"start":{"line":329,"column":4},"end":{"line":331,"column":5}},"173":{"start":{"line":330,"column":8},"end":{"line":330,"column":20}},"174":{"start":{"line":333,"column":4},"end":{"line":333,"column":46}},"175":{"start":{"line":334,"column":4},"end":{"line":334,"column":25}},"176":{"start":{"line":337,"column":0},"end":{"line":363,"column":2}},"177":{"start":{"line":340,"column":4},"end":{"line":342,"column":5}},"178":{"start":{"line":341,"column":8},"end":{"line":341,"column":46}},"179":{"start":{"line":344,"column":4},"end":{"line":349,"column":5}},"180":{"start":{"line":345,"column":8},"end":{"line":345,"column":48}},"181":{"start":{"line":346,"column":8},"end":{"line":348,"column":9}},"182":{"start":{"line":347,"column":12},"end":{"line":347,"column":24}},"183":{"start":{"line":351,"column":4},"end":{"line":351,"column":43}},"184":{"start":{"line":352,"column":4},"end":{"line":354,"column":5}},"185":{"start":{"line":353,"column":8},"end":{"line":353,"column":20}},"186":{"start":{"line":356,"column":4},"end":{"line":356,"column":60}},"187":{"start":{"line":357,"column":4},"end":{"line":359,"column":5}},"188":{"start":{"line":358,"column":8},"end":{"line":358,"column":20}},"189":{"start":{"line":361,"column":4},"end":{"line":361,"column":56}},"190":{"start":{"line":362,"column":4},"end":{"line":362,"column":30}},"191":{"start":{"line":365,"column":0},"end":{"line":378,"column":1}},"192":{"start":{"line":366,"column":4},"end":{"line":368,"column":5}},"193":{"start":{"line":367,"column":8},"end":{"line":367,"column":20}},"194":{"start":{"line":369,"column":4},"end":{"line":369,"column":60}},"195":{"start":{"line":370,"column":4},"end":{"line":370,"column":16}},"196":{"start":{"line":372,"column":4},"end":{"line":372,"column":35}},"197":{"start":{"line":373,"column":4},"end":{"line":375,"column":5}},"198":{"start":{"line":374,"column":8},"end":{"line":374,"column":20}},"199":{"start":{"line":377,"column":4},"end":{"line":377,"column":57}},"200":{"start":{"line":380,"column":0},"end":{"line":424,"column":2}},"201":{"start":{"line":381,"column":4},"end":{"line":383,"column":5}},"202":{"start":{"line":382,"column":8},"end":{"line":382,"column":35}},"203":{"start":{"line":385,"column":4},"end":{"line":391,"column":5}},"204":{"start":{"line":386,"column":8},"end":{"line":386,"column":48}},"205":{"start":{"line":387,"column":8},"end":{"line":390,"column":9}},"206":{"start":{"line":388,"column":12},"end":{"line":388,"column":68}},"207":{"start":{"line":389,"column":12},"end":{"line":389,"column":24}},"208":{"start":{"line":393,"column":4},"end":{"line":393,"column":45}},"209":{"start":{"line":395,"column":4},"end":{"line":398,"column":5}},"210":{"start":{"line":396,"column":8},"end":{"line":396,"column":59}},"211":{"start":{"line":397,"column":8},"end":{"line":397,"column":20}},"212":{"start":{"line":399,"column":4},"end":{"line":399,"column":57}},"213":{"start":{"line":400,"column":4},"end":{"line":400,"column":16}},"214":{"start":{"line":402,"column":4},"end":{"line":404,"column":5}},"215":{"start":{"line":403,"column":8},"end":{"line":403,"column":49}},"216":{"start":{"line":406,"column":4},"end":{"line":409,"column":5}},"217":{"start":{"line":407,"column":8},"end":{"line":407,"column":59}},"218":{"start":{"line":408,"column":8},"end":{"line":408,"column":20}},"219":{"start":{"line":410,"column":4},"end":{"line":410,"column":62}},"220":{"start":{"line":411,"column":4},"end":{"line":411,"column":16}},"221":{"start":{"line":413,"column":4},"end":{"line":413,"column":34}},"222":{"start":{"line":415,"column":4},"end":{"line":418,"column":5}},"223":{"start":{"line":416,"column":8},"end":{"line":416,"column":61}},"224":{"start":{"line":417,"column":8},"end":{"line":417,"column":20}},"225":{"start":{"line":419,"column":4},"end":{"line":419,"column":64}},"226":{"start":{"line":421,"column":4},"end":{"line":421,"column":34}},"227":{"start":{"line":423,"column":4},"end":{"line":423,"column":19}},"228":{"start":{"line":426,"column":0},"end":{"line":444,"column":2}},"229":{"start":{"line":428,"column":4},"end":{"line":428,"column":51}},"230":{"start":{"line":430,"column":4},"end":{"line":440,"column":5}},"231":{"start":{"line":431,"column":8},"end":{"line":431,"column":47}},"232":{"start":{"line":434,"column":8},"end":{"line":434,"column":83}},"233":{"start":{"line":435,"column":8},"end":{"line":437,"column":9}},"234":{"start":{"line":436,"column":12},"end":{"line":436,"column":23}},"235":{"start":{"line":438,"column":8},"end":{"line":438,"column":40}},"236":{"start":{"line":439,"column":8},"end":{"line":439,"column":47}},"237":{"start":{"line":443,"column":4},"end":{"line":443,"column":66}},"238":{"start":{"line":446,"column":0},"end":{"line":446,"column":98}},"239":{"start":{"line":448,"column":0},"end":{"line":485,"column":2}},"240":{"start":{"line":449,"column":4},"end":{"line":449,"column":19}},"241":{"start":{"line":450,"column":4},"end":{"line":450,"column":19}},"242":{"start":{"line":455,"column":4},"end":{"line":474,"column":5}},"243":{"start":{"line":456,"column":8},"end":{"line":456,"column":32}},"244":{"start":{"line":459,"column":8},"end":{"line":459,"column":51}},"245":{"start":{"line":462,"column":8},"end":{"line":462,"column":79}},"246":{"start":{"line":463,"column":8},"end":{"line":465,"column":9}},"247":{"start":{"line":464,"column":12},"end":{"line":464,"column":23}},"248":{"start":{"line":466,"column":8},"end":{"line":466,"column":40}},"249":{"start":{"line":469,"column":8},"end":{"line":469,"column":69}},"250":{"start":{"line":470,"column":8},"end":{"line":472,"column":9}},"251":{"start":{"line":471,"column":12},"end":{"line":471,"column":23}},"252":{"start":{"line":473,"column":8},"end":{"line":473,"column":28}},"253":{"start":{"line":477,"column":4},"end":{"line":477,"column":62}},"254":{"start":{"line":478,"column":4},"end":{"line":480,"column":5}},"255":{"start":{"line":479,"column":8},"end":{"line":479,"column":19}},"256":{"start":{"line":481,"column":4},"end":{"line":481,"column":24}},"257":{"start":{"line":484,"column":4},"end":{"line":484,"column":71}},"258":{"start":{"line":487,"column":0},"end":{"line":487,"column":92}},"259":{"start":{"line":489,"column":0},"end":{"line":493,"column":2}},"260":{"start":{"line":490,"column":4},"end":{"line":490,"column":66}},"261":{"start":{"line":491,"column":4},"end":{"line":491,"column":48}},"262":{"start":{"line":492,"column":4},"end":{"line":492,"column":17}},"263":{"start":{"line":495,"column":0},"end":{"line":525,"column":1}},"264":{"start":{"line":496,"column":4},"end":{"line":496,"column":12}},"265":{"start":{"line":497,"column":4},"end":{"line":497,"column":19}},"266":{"start":{"line":500,"column":4},"end":{"line":500,"column":32}},"267":{"start":{"line":503,"column":4},"end":{"line":503,"column":35}},"268":{"start":{"line":506,"column":4},"end":{"line":506,"column":62}},"269":{"start":{"line":507,"column":4},"end":{"line":507,"column":28}},"270":{"start":{"line":507,"column":17},"end":{"line":507,"column":28}},"271":{"start":{"line":508,"column":4},"end":{"line":508,"column":25}},"272":{"start":{"line":511,"column":4},"end":{"line":511,"column":62}},"273":{"start":{"line":512,"column":4},"end":{"line":512,"column":28}},"274":{"start":{"line":512,"column":17},"end":{"line":512,"column":28}},"275":{"start":{"line":513,"column":4},"end":{"line":513,"column":25}},"276":{"start":{"line":516,"column":4},"end":{"line":516,"column":66}},"277":{"start":{"line":517,"column":4},"end":{"line":517,"column":28}},"278":{"start":{"line":517,"column":17},"end":{"line":517,"column":28}},"279":{"start":{"line":518,"column":4},"end":{"line":518,"column":25}},"280":{"start":{"line":521,"column":4},"end":{"line":521,"column":50}},"281":{"start":{"line":522,"column":4},"end":{"line":522,"column":39}},"282":{"start":{"line":522,"column":18},"end":{"line":522,"column":39}},"283":{"start":{"line":524,"column":4},"end":{"line":524,"column":15}},"284":{"start":{"line":527,"column":0},"end":{"line":574,"column":1}},"285":{"start":{"line":528,"column":4},"end":{"line":528,"column":12}},"286":{"start":{"line":529,"column":4},"end":{"line":529,"column":33}},"287":{"start":{"line":532,"column":4},"end":{"line":532,"column":63}},"288":{"start":{"line":533,"column":4},"end":{"line":533,"column":28}},"289":{"start":{"line":533,"column":17},"end":{"line":533,"column":28}},"290":{"start":{"line":534,"column":4},"end":{"line":534,"column":24}},"291":{"start":{"line":535,"column":4},"end":{"line":535,"column":27}},"292":{"start":{"line":538,"column":4},"end":{"line":538,"column":66}},"293":{"start":{"line":539,"column":4},"end":{"line":539,"column":28}},"294":{"start":{"line":539,"column":17},"end":{"line":539,"column":28}},"295":{"start":{"line":541,"column":4},"end":{"line":546,"column":5}},"296":{"start":{"line":542,"column":8},"end":{"line":545,"column":26}},"297":{"start":{"line":548,"column":4},"end":{"line":548,"column":24}},"298":{"start":{"line":549,"column":4},"end":{"line":549,"column":25}},"299":{"start":{"line":552,"column":4},"end":{"line":552,"column":62}},"300":{"start":{"line":553,"column":4},"end":{"line":553,"column":28}},"301":{"start":{"line":553,"column":17},"end":{"line":553,"column":28}},"302":{"start":{"line":554,"column":4},"end":{"line":554,"column":24}},"303":{"start":{"line":555,"column":4},"end":{"line":555,"column":29}},"304":{"start":{"line":558,"column":4},"end":{"line":558,"column":62}},"305":{"start":{"line":559,"column":4},"end":{"line":559,"column":28}},"306":{"start":{"line":559,"column":17},"end":{"line":559,"column":28}},"307":{"start":{"line":560,"column":4},"end":{"line":560,"column":24}},"308":{"start":{"line":561,"column":4},"end":{"line":561,"column":29}},"309":{"start":{"line":564,"column":4},"end":{"line":564,"column":66}},"310":{"start":{"line":565,"column":4},"end":{"line":565,"column":28}},"311":{"start":{"line":565,"column":17},"end":{"line":565,"column":28}},"312":{"start":{"line":566,"column":4},"end":{"line":566,"column":24}},"313":{"start":{"line":567,"column":4},"end":{"line":567,"column":29}},"314":{"start":{"line":570,"column":4},"end":{"line":570,"column":64}},"315":{"start":{"line":571,"column":4},"end":{"line":571,"column":35}},"316":{"start":{"line":571,"column":18},"end":{"line":571,"column":35}},"317":{"start":{"line":573,"column":4},"end":{"line":573,"column":15}},"318":{"start":{"line":576,"column":0},"end":{"line":619,"column":1}},"319":{"start":{"line":577,"column":4},"end":{"line":577,"column":23}},"320":{"start":{"line":578,"column":4},"end":{"line":578,"column":12}},"321":{"start":{"line":581,"column":4},"end":{"line":581,"column":32}},"322":{"start":{"line":583,"column":4},"end":{"line":587,"column":5}},"323":{"start":{"line":584,"column":8},"end":{"line":586,"column":20}},"324":{"start":{"line":590,"column":4},"end":{"line":590,"column":77}},"325":{"start":{"line":591,"column":4},"end":{"line":591,"column":28}},"326":{"start":{"line":591,"column":17},"end":{"line":591,"column":28}},"327":{"start":{"line":592,"column":4},"end":{"line":592,"column":24}},"328":{"start":{"line":595,"column":4},"end":{"line":595,"column":77}},"329":{"start":{"line":596,"column":4},"end":{"line":596,"column":28}},"330":{"start":{"line":596,"column":17},"end":{"line":596,"column":28}},"331":{"start":{"line":597,"column":4},"end":{"line":597,"column":24}},"332":{"start":{"line":600,"column":4},"end":{"line":600,"column":77}},"333":{"start":{"line":601,"column":4},"end":{"line":601,"column":28}},"334":{"start":{"line":601,"column":17},"end":{"line":601,"column":28}},"335":{"start":{"line":602,"column":4},"end":{"line":602,"column":24}},"336":{"start":{"line":605,"column":4},"end":{"line":605,"column":81}},"337":{"start":{"line":606,"column":4},"end":{"line":606,"column":28}},"338":{"start":{"line":606,"column":17},"end":{"line":606,"column":28}},"339":{"start":{"line":607,"column":4},"end":{"line":607,"column":24}},"340":{"start":{"line":610,"column":4},"end":{"line":610,"column":65}},"341":{"start":{"line":611,"column":4},"end":{"line":611,"column":28}},"342":{"start":{"line":611,"column":17},"end":{"line":611,"column":28}},"343":{"start":{"line":612,"column":4},"end":{"line":612,"column":24}},"344":{"start":{"line":615,"column":4},"end":{"line":615,"column":75}},"345":{"start":{"line":616,"column":4},"end":{"line":616,"column":38}},"346":{"start":{"line":616,"column":18},"end":{"line":616,"column":38}},"347":{"start":{"line":618,"column":4},"end":{"line":618,"column":15}},"348":{"start":{"line":621,"column":0},"end":{"line":623,"column":2}},"349":{"start":{"line":622,"column":4},"end":{"line":622,"column":39}},"350":{"start":{"line":626,"column":0},"end":{"line":635,"column":1}},"351":{"start":{"line":627,"column":4},"end":{"line":627,"column":38}},"352":{"start":{"line":628,"column":4},"end":{"line":628,"column":28}},"353":{"start":{"line":629,"column":4},"end":{"line":629,"column":46}},"354":{"start":{"line":630,"column":4},"end":{"line":630,"column":51}},"355":{"start":{"line":631,"column":4},"end":{"line":631,"column":33}},"356":{"start":{"line":632,"column":4},"end":{"line":632,"column":41}},"357":{"start":{"line":633,"column":4},"end":{"line":633,"column":27}},"358":{"start":{"line":634,"column":4},"end":{"line":634,"column":21}},"359":{"start":{"line":637,"column":0},"end":{"line":637,"column":51}},"360":{"start":{"line":638,"column":0},"end":{"line":638,"column":29}},"361":{"start":{"line":639,"column":0},"end":{"line":639,"column":35}},"362":{"start":{"line":640,"column":0},"end":{"line":640,"column":85}},"363":{"start":{"line":642,"column":0},"end":{"line":642,"column":26}},"364":{"start":{"line":644,"column":0},"end":{"line":644,"column":50}},"365":{"start":{"line":645,"column":0},"end":{"line":648,"column":2}},"366":{"start":{"line":647,"column":4},"end":{"line":647,"column":96}},"367":{"start":{"line":650,"column":0},"end":{"line":650,"column":96}},"368":{"start":{"line":652,"column":0},"end":{"line":652,"column":71}},"369":{"start":{"line":653,"column":0},"end":{"line":656,"column":2}},"370":{"start":{"line":655,"column":4},"end":{"line":655,"column":95}},"371":{"start":{"line":659,"column":0},"end":{"line":659,"column":73}},"372":{"start":{"line":660,"column":0},"end":{"line":663,"column":2}},"373":{"start":{"line":662,"column":4},"end":{"line":662,"column":97}},"374":{"start":{"line":665,"column":0},"end":{"line":665,"column":100}},"375":{"start":{"line":667,"column":0},"end":{"line":667,"column":77}},"376":{"start":{"line":669,"column":0},"end":{"line":678,"column":2}},"377":{"start":{"line":671,"column":4},"end":{"line":671,"column":52}},"378":{"start":{"line":677,"column":4},"end":{"line":677,"column":66}},"379":{"start":{"line":680,"column":0},"end":{"line":680,"column":96}},"380":{"start":{"line":682,"column":0},"end":{"line":712,"column":2}},"381":{"start":{"line":683,"column":4},"end":{"line":683,"column":19}},"382":{"start":{"line":684,"column":4},"end":{"line":684,"column":19}},"383":{"start":{"line":686,"column":4},"end":{"line":701,"column":5}},"384":{"start":{"line":687,"column":8},"end":{"line":687,"column":32}},"385":{"start":{"line":690,"column":8},"end":{"line":690,"column":52}},"386":{"start":{"line":696,"column":8},"end":{"line":696,"column":69}},"387":{"start":{"line":697,"column":8},"end":{"line":699,"column":9}},"388":{"start":{"line":698,"column":12},"end":{"line":698,"column":23}},"389":{"start":{"line":700,"column":8},"end":{"line":700,"column":28}},"390":{"start":{"line":704,"column":4},"end":{"line":704,"column":62}},"391":{"start":{"line":705,"column":4},"end":{"line":707,"column":5}},"392":{"start":{"line":706,"column":8},"end":{"line":706,"column":19}},"393":{"start":{"line":708,"column":4},"end":{"line":708,"column":24}},"394":{"start":{"line":711,"column":4},"end":{"line":711,"column":71}},"395":{"start":{"line":714,"column":0},"end":{"line":714,"column":90}},"396":{"start":{"line":716,"column":0},"end":{"line":720,"column":2}},"397":{"start":{"line":717,"column":4},"end":{"line":717,"column":67}},"398":{"start":{"line":718,"column":4},"end":{"line":718,"column":48}},"399":{"start":{"line":719,"column":4},"end":{"line":719,"column":17}},"400":{"start":{"line":722,"column":0},"end":{"line":746,"column":1}},"401":{"start":{"line":723,"column":4},"end":{"line":723,"column":12}},"402":{"start":{"line":724,"column":4},"end":{"line":724,"column":19}},"403":{"start":{"line":727,"column":4},"end":{"line":727,"column":32}},"404":{"start":{"line":729,"column":4},"end":{"line":729,"column":32}},"405":{"start":{"line":732,"column":4},"end":{"line":732,"column":62}},"406":{"start":{"line":733,"column":4},"end":{"line":733,"column":28}},"407":{"start":{"line":733,"column":17},"end":{"line":733,"column":28}},"408":{"start":{"line":734,"column":4},"end":{"line":734,"column":25}},"409":{"start":{"line":737,"column":4},"end":{"line":737,"column":66}},"410":{"start":{"line":738,"column":4},"end":{"line":738,"column":28}},"411":{"start":{"line":738,"column":17},"end":{"line":738,"column":28}},"412":{"start":{"line":739,"column":4},"end":{"line":739,"column":25}},"413":{"start":{"line":742,"column":4},"end":{"line":742,"column":50}},"414":{"start":{"line":743,"column":4},"end":{"line":743,"column":39}},"415":{"start":{"line":743,"column":18},"end":{"line":743,"column":39}},"416":{"start":{"line":745,"column":4},"end":{"line":745,"column":15}},"417":{"start":{"line":748,"column":0},"end":{"line":781,"column":1}},"418":{"start":{"line":749,"column":4},"end":{"line":749,"column":12}},"419":{"start":{"line":750,"column":4},"end":{"line":750,"column":34}},"420":{"start":{"line":753,"column":4},"end":{"line":753,"column":63}},"421":{"start":{"line":754,"column":4},"end":{"line":754,"column":28}},"422":{"start":{"line":754,"column":17},"end":{"line":754,"column":28}},"423":{"start":{"line":755,"column":4},"end":{"line":755,"column":24}},"424":{"start":{"line":756,"column":4},"end":{"line":756,"column":27}},"425":{"start":{"line":759,"column":4},"end":{"line":759,"column":63}},"426":{"start":{"line":760,"column":4},"end":{"line":760,"column":28}},"427":{"start":{"line":760,"column":17},"end":{"line":760,"column":28}},"428":{"start":{"line":761,"column":4},"end":{"line":761,"column":24}},"429":{"start":{"line":762,"column":4},"end":{"line":762,"column":26}},"430":{"start":{"line":765,"column":4},"end":{"line":765,"column":62}},"431":{"start":{"line":766,"column":4},"end":{"line":766,"column":28}},"432":{"start":{"line":766,"column":17},"end":{"line":766,"column":28}},"433":{"start":{"line":767,"column":4},"end":{"line":767,"column":24}},"434":{"start":{"line":768,"column":4},"end":{"line":768,"column":29}},"435":{"start":{"line":771,"column":4},"end":{"line":771,"column":66}},"436":{"start":{"line":772,"column":4},"end":{"line":772,"column":28}},"437":{"start":{"line":772,"column":17},"end":{"line":772,"column":28}},"438":{"start":{"line":773,"column":4},"end":{"line":773,"column":24}},"439":{"start":{"line":774,"column":4},"end":{"line":774,"column":29}},"440":{"start":{"line":777,"column":4},"end":{"line":777,"column":64}},"441":{"start":{"line":778,"column":4},"end":{"line":778,"column":35}},"442":{"start":{"line":778,"column":18},"end":{"line":778,"column":35}},"443":{"start":{"line":780,"column":4},"end":{"line":780,"column":15}},"444":{"start":{"line":783,"column":0},"end":{"line":815,"column":1}},"445":{"start":{"line":784,"column":4},"end":{"line":784,"column":23}},"446":{"start":{"line":785,"column":4},"end":{"line":785,"column":12}},"447":{"start":{"line":788,"column":4},"end":{"line":788,"column":32}},"448":{"start":{"line":791,"column":4},"end":{"line":791,"column":75}},"449":{"start":{"line":792,"column":4},"end":{"line":792,"column":28}},"450":{"start":{"line":792,"column":17},"end":{"line":792,"column":28}},"451":{"start":{"line":793,"column":4},"end":{"line":793,"column":24}},"452":{"start":{"line":796,"column":4},"end":{"line":796,"column":77}},"453":{"start":{"line":797,"column":4},"end":{"line":797,"column":28}},"454":{"start":{"line":797,"column":17},"end":{"line":797,"column":28}},"455":{"start":{"line":798,"column":4},"end":{"line":798,"column":24}},"456":{"start":{"line":801,"column":4},"end":{"line":801,"column":81}},"457":{"start":{"line":802,"column":4},"end":{"line":802,"column":28}},"458":{"start":{"line":802,"column":17},"end":{"line":802,"column":28}},"459":{"start":{"line":803,"column":4},"end":{"line":803,"column":24}},"460":{"start":{"line":806,"column":4},"end":{"line":806,"column":65}},"461":{"start":{"line":807,"column":4},"end":{"line":807,"column":28}},"462":{"start":{"line":807,"column":17},"end":{"line":807,"column":28}},"463":{"start":{"line":808,"column":4},"end":{"line":808,"column":24}},"464":{"start":{"line":811,"column":4},"end":{"line":811,"column":75}},"465":{"start":{"line":812,"column":4},"end":{"line":812,"column":38}},"466":{"start":{"line":812,"column":18},"end":{"line":812,"column":38}},"467":{"start":{"line":814,"column":4},"end":{"line":814,"column":15}},"468":{"start":{"line":817,"column":0},"end":{"line":819,"column":2}},"469":{"start":{"line":818,"column":4},"end":{"line":818,"column":39}}},"branchMap":{"1":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":0},"end":{"line":56,"column":0}},{"start":{"line":56,"column":0},"end":{"line":56,"column":0}}]},"2":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":34}},{"start":{"line":56,"column":38},"end":{"line":56,"column":67}}]},"3":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":17},"end":{"line":91,"column":22}},{"start":{"line":91,"column":26},"end":{"line":91,"column":27}}]},"4":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":15},"end":{"line":92,"column":18}},{"start":{"line":92,"column":22},"end":{"line":92,"column":23}}]},"5":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":19},"end":{"line":93,"column":26}},{"start":{"line":93,"column":30},"end":{"line":93,"column":50}}]},"6":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":19},"end":{"line":94,"column":26}},{"start":{"line":94,"column":30},"end":{"line":94,"column":32}}]},"7":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":19},"end":{"line":95,"column":26}},{"start":{"line":95,"column":30},"end":{"line":95,"column":32}}]},"8":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":16},"end":{"line":97,"column":20}},{"start":{"line":97,"column":24},"end":{"line":97,"column":26}}]},"9":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":117,"column":4}},{"start":{"line":117,"column":4},"end":{"line":117,"column":4}}]},"10":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"11":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]},"12":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"13":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":4},"end":{"line":209,"column":4}},{"start":{"line":209,"column":4},"end":{"line":209,"column":4}}]},"14":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":4},"end":{"line":214,"column":4}},{"start":{"line":214,"column":4},"end":{"line":214,"column":4}}]},"15":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":4},"end":{"line":218,"column":4}},{"start":{"line":218,"column":4},"end":{"line":218,"column":4}}]},"16":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":4},"end":{"line":233,"column":4}},{"start":{"line":233,"column":4},"end":{"line":233,"column":4}}]},"17":{"line":238,"type":"if","locations":[{"start":{"line":238,"column":4},"end":{"line":238,"column":4}},{"start":{"line":238,"column":4},"end":{"line":238,"column":4}}]},"18":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":4},"end":{"line":250,"column":4}},{"start":{"line":250,"column":4},"end":{"line":250,"column":4}}]},"19":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":4},"end":{"line":254,"column":4}},{"start":{"line":254,"column":4},"end":{"line":254,"column":4}}]},"20":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":8},"end":{"line":264,"column":8}},{"start":{"line":264,"column":8},"end":{"line":264,"column":8}}]},"21":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"22":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":8},"end":{"line":275,"column":8}},{"start":{"line":275,"column":8},"end":{"line":275,"column":8}}]},"23":{"line":275,"type":"binary-expr","locations":[{"start":{"line":275,"column":12},"end":{"line":275,"column":26}},{"start":{"line":275,"column":30},"end":{"line":275,"column":45}}]},"24":{"line":276,"type":"binary-expr","locations":[{"start":{"line":276,"column":23},"end":{"line":276,"column":31}},{"start":{"line":276,"column":35},"end":{"line":276,"column":75}}]},"25":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":12},"end":{"line":277,"column":12}},{"start":{"line":277,"column":12},"end":{"line":277,"column":12}}]},"26":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":8},"end":{"line":282,"column":8}},{"start":{"line":282,"column":8},"end":{"line":282,"column":8}}]},"27":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":12},"end":{"line":282,"column":26}},{"start":{"line":282,"column":30},"end":{"line":282,"column":45}}]},"28":{"line":283,"type":"binary-expr","locations":[{"start":{"line":283,"column":23},"end":{"line":283,"column":31}},{"start":{"line":283,"column":35},"end":{"line":283,"column":75}}]},"29":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":12},"end":{"line":284,"column":12}},{"start":{"line":284,"column":12},"end":{"line":284,"column":12}}]},"30":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":8},"end":{"line":291,"column":8}},{"start":{"line":291,"column":8},"end":{"line":291,"column":8}}]},"31":{"line":296,"type":"if","locations":[{"start":{"line":296,"column":8},"end":{"line":296,"column":8}},{"start":{"line":296,"column":8},"end":{"line":296,"column":8}}]},"32":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":4},"end":{"line":312,"column":4}},{"start":{"line":312,"column":4},"end":{"line":312,"column":4}}]},"33":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":4},"end":{"line":316,"column":4}},{"start":{"line":316,"column":4},"end":{"line":316,"column":4}}]},"34":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":8},"end":{"line":318,"column":8}},{"start":{"line":318,"column":8},"end":{"line":318,"column":8}}]},"35":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":4},"end":{"line":324,"column":4}},{"start":{"line":324,"column":4},"end":{"line":324,"column":4}}]},"36":{"line":329,"type":"if","locations":[{"start":{"line":329,"column":4},"end":{"line":329,"column":4}},{"start":{"line":329,"column":4},"end":{"line":329,"column":4}}]},"37":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":4},"end":{"line":340,"column":4}},{"start":{"line":340,"column":4},"end":{"line":340,"column":4}}]},"38":{"line":344,"type":"if","locations":[{"start":{"line":344,"column":4},"end":{"line":344,"column":4}},{"start":{"line":344,"column":4},"end":{"line":344,"column":4}}]},"39":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":8},"end":{"line":346,"column":8}},{"start":{"line":346,"column":8},"end":{"line":346,"column":8}}]},"40":{"line":352,"type":"if","locations":[{"start":{"line":352,"column":4},"end":{"line":352,"column":4}},{"start":{"line":352,"column":4},"end":{"line":352,"column":4}}]},"41":{"line":357,"type":"if","locations":[{"start":{"line":357,"column":4},"end":{"line":357,"column":4}},{"start":{"line":357,"column":4},"end":{"line":357,"column":4}}]},"42":{"line":366,"type":"if","locations":[{"start":{"line":366,"column":4},"end":{"line":366,"column":4}},{"start":{"line":366,"column":4},"end":{"line":366,"column":4}}]},"43":{"line":373,"type":"if","locations":[{"start":{"line":373,"column":4},"end":{"line":373,"column":4}},{"start":{"line":373,"column":4},"end":{"line":373,"column":4}}]},"44":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":4},"end":{"line":381,"column":4}},{"start":{"line":381,"column":4},"end":{"line":381,"column":4}}]},"45":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":4},"end":{"line":385,"column":4}},{"start":{"line":385,"column":4},"end":{"line":385,"column":4}}]},"46":{"line":387,"type":"if","locations":[{"start":{"line":387,"column":8},"end":{"line":387,"column":8}},{"start":{"line":387,"column":8},"end":{"line":387,"column":8}}]},"47":{"line":395,"type":"if","locations":[{"start":{"line":395,"column":4},"end":{"line":395,"column":4}},{"start":{"line":395,"column":4},"end":{"line":395,"column":4}}]},"48":{"line":402,"type":"if","locations":[{"start":{"line":402,"column":4},"end":{"line":402,"column":4}},{"start":{"line":402,"column":4},"end":{"line":402,"column":4}}]},"49":{"line":406,"type":"if","locations":[{"start":{"line":406,"column":4},"end":{"line":406,"column":4}},{"start":{"line":406,"column":4},"end":{"line":406,"column":4}}]},"50":{"line":415,"type":"if","locations":[{"start":{"line":415,"column":4},"end":{"line":415,"column":4}},{"start":{"line":415,"column":4},"end":{"line":415,"column":4}}]},"51":{"line":430,"type":"if","locations":[{"start":{"line":430,"column":4},"end":{"line":430,"column":4}},{"start":{"line":430,"column":4},"end":{"line":430,"column":4}}]},"52":{"line":435,"type":"if","locations":[{"start":{"line":435,"column":8},"end":{"line":435,"column":8}},{"start":{"line":435,"column":8},"end":{"line":435,"column":8}}]},"53":{"line":455,"type":"if","locations":[{"start":{"line":455,"column":4},"end":{"line":455,"column":4}},{"start":{"line":455,"column":4},"end":{"line":455,"column":4}}]},"54":{"line":463,"type":"if","locations":[{"start":{"line":463,"column":8},"end":{"line":463,"column":8}},{"start":{"line":463,"column":8},"end":{"line":463,"column":8}}]},"55":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":8},"end":{"line":470,"column":8}},{"start":{"line":470,"column":8},"end":{"line":470,"column":8}}]},"56":{"line":478,"type":"if","locations":[{"start":{"line":478,"column":4},"end":{"line":478,"column":4}},{"start":{"line":478,"column":4},"end":{"line":478,"column":4}}]},"57":{"line":507,"type":"if","locations":[{"start":{"line":507,"column":4},"end":{"line":507,"column":4}},{"start":{"line":507,"column":4},"end":{"line":507,"column":4}}]},"58":{"line":512,"type":"if","locations":[{"start":{"line":512,"column":4},"end":{"line":512,"column":4}},{"start":{"line":512,"column":4},"end":{"line":512,"column":4}}]},"59":{"line":517,"type":"if","locations":[{"start":{"line":517,"column":4},"end":{"line":517,"column":4}},{"start":{"line":517,"column":4},"end":{"line":517,"column":4}}]},"60":{"line":522,"type":"if","locations":[{"start":{"line":522,"column":4},"end":{"line":522,"column":4}},{"start":{"line":522,"column":4},"end":{"line":522,"column":4}}]},"61":{"line":533,"type":"if","locations":[{"start":{"line":533,"column":4},"end":{"line":533,"column":4}},{"start":{"line":533,"column":4},"end":{"line":533,"column":4}}]},"62":{"line":539,"type":"if","locations":[{"start":{"line":539,"column":4},"end":{"line":539,"column":4}},{"start":{"line":539,"column":4},"end":{"line":539,"column":4}}]},"63":{"line":541,"type":"if","locations":[{"start":{"line":541,"column":4},"end":{"line":541,"column":4}},{"start":{"line":541,"column":4},"end":{"line":541,"column":4}}]},"64":{"line":553,"type":"if","locations":[{"start":{"line":553,"column":4},"end":{"line":553,"column":4}},{"start":{"line":553,"column":4},"end":{"line":553,"column":4}}]},"65":{"line":559,"type":"if","locations":[{"start":{"line":559,"column":4},"end":{"line":559,"column":4}},{"start":{"line":559,"column":4},"end":{"line":559,"column":4}}]},"66":{"line":565,"type":"if","locations":[{"start":{"line":565,"column":4},"end":{"line":565,"column":4}},{"start":{"line":565,"column":4},"end":{"line":565,"column":4}}]},"67":{"line":571,"type":"if","locations":[{"start":{"line":571,"column":4},"end":{"line":571,"column":4}},{"start":{"line":571,"column":4},"end":{"line":571,"column":4}}]},"68":{"line":583,"type":"if","locations":[{"start":{"line":583,"column":4},"end":{"line":583,"column":4}},{"start":{"line":583,"column":4},"end":{"line":583,"column":4}}]},"69":{"line":591,"type":"if","locations":[{"start":{"line":591,"column":4},"end":{"line":591,"column":4}},{"start":{"line":591,"column":4},"end":{"line":591,"column":4}}]},"70":{"line":596,"type":"if","locations":[{"start":{"line":596,"column":4},"end":{"line":596,"column":4}},{"start":{"line":596,"column":4},"end":{"line":596,"column":4}}]},"71":{"line":601,"type":"if","locations":[{"start":{"line":601,"column":4},"end":{"line":601,"column":4}},{"start":{"line":601,"column":4},"end":{"line":601,"column":4}}]},"72":{"line":606,"type":"if","locations":[{"start":{"line":606,"column":4},"end":{"line":606,"column":4}},{"start":{"line":606,"column":4},"end":{"line":606,"column":4}}]},"73":{"line":611,"type":"if","locations":[{"start":{"line":611,"column":4},"end":{"line":611,"column":4}},{"start":{"line":611,"column":4},"end":{"line":611,"column":4}}]},"74":{"line":616,"type":"if","locations":[{"start":{"line":616,"column":4},"end":{"line":616,"column":4}},{"start":{"line":616,"column":4},"end":{"line":616,"column":4}}]},"75":{"line":628,"type":"binary-expr","locations":[{"start":{"line":628,"column":17},"end":{"line":628,"column":22}},{"start":{"line":628,"column":26},"end":{"line":628,"column":27}}]},"76":{"line":629,"type":"binary-expr","locations":[{"start":{"line":629,"column":16},"end":{"line":629,"column":20}},{"start":{"line":629,"column":24},"end":{"line":629,"column":45}}]},"77":{"line":630,"type":"binary-expr","locations":[{"start":{"line":630,"column":19},"end":{"line":630,"column":26}},{"start":{"line":630,"column":30},"end":{"line":630,"column":50}}]},"78":{"line":631,"type":"binary-expr","locations":[{"start":{"line":631,"column":19},"end":{"line":631,"column":26}},{"start":{"line":631,"column":30},"end":{"line":631,"column":32}}]},"79":{"line":633,"type":"binary-expr","locations":[{"start":{"line":633,"column":16},"end":{"line":633,"column":20}},{"start":{"line":633,"column":24},"end":{"line":633,"column":26}}]},"80":{"line":686,"type":"if","locations":[{"start":{"line":686,"column":4},"end":{"line":686,"column":4}},{"start":{"line":686,"column":4},"end":{"line":686,"column":4}}]},"81":{"line":697,"type":"if","locations":[{"start":{"line":697,"column":8},"end":{"line":697,"column":8}},{"start":{"line":697,"column":8},"end":{"line":697,"column":8}}]},"82":{"line":705,"type":"if","locations":[{"start":{"line":705,"column":4},"end":{"line":705,"column":4}},{"start":{"line":705,"column":4},"end":{"line":705,"column":4}}]},"83":{"line":733,"type":"if","locations":[{"start":{"line":733,"column":4},"end":{"line":733,"column":4}},{"start":{"line":733,"column":4},"end":{"line":733,"column":4}}]},"84":{"line":738,"type":"if","locations":[{"start":{"line":738,"column":4},"end":{"line":738,"column":4}},{"start":{"line":738,"column":4},"end":{"line":738,"column":4}}]},"85":{"line":743,"type":"if","locations":[{"start":{"line":743,"column":4},"end":{"line":743,"column":4}},{"start":{"line":743,"column":4},"end":{"line":743,"column":4}}]},"86":{"line":754,"type":"if","locations":[{"start":{"line":754,"column":4},"end":{"line":754,"column":4}},{"start":{"line":754,"column":4},"end":{"line":754,"column":4}}]},"87":{"line":760,"type":"if","locations":[{"start":{"line":760,"column":4},"end":{"line":760,"column":4}},{"start":{"line":760,"column":4},"end":{"line":760,"column":4}}]},"88":{"line":766,"type":"if","locations":[{"start":{"line":766,"column":4},"end":{"line":766,"column":4}},{"start":{"line":766,"column":4},"end":{"line":766,"column":4}}]},"89":{"line":772,"type":"if","locations":[{"start":{"line":772,"column":4},"end":{"line":772,"column":4}},{"start":{"line":772,"column":4},"end":{"line":772,"column":4}}]},"90":{"line":778,"type":"if","locations":[{"start":{"line":778,"column":4},"end":{"line":778,"column":4}},{"start":{"line":778,"column":4},"end":{"line":778,"column":4}}]},"91":{"line":792,"type":"if","locations":[{"start":{"line":792,"column":4},"end":{"line":792,"column":4}},{"start":{"line":792,"column":4},"end":{"line":792,"column":4}}]},"92":{"line":797,"type":"if","locations":[{"start":{"line":797,"column":4},"end":{"line":797,"column":4}},{"start":{"line":797,"column":4},"end":{"line":797,"column":4}}]},"93":{"line":802,"type":"if","locations":[{"start":{"line":802,"column":4},"end":{"line":802,"column":4}},{"start":{"line":802,"column":4},"end":{"line":802,"column":4}}]},"94":{"line":807,"type":"if","locations":[{"start":{"line":807,"column":4},"end":{"line":807,"column":4}},{"start":{"line":807,"column":4},"end":{"line":807,"column":4}}]},"95":{"line":812,"type":"if","locations":[{"start":{"line":812,"column":4},"end":{"line":812,"column":4}},{"start":{"line":812,"column":4},"end":{"line":812,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","/* eslint max-params: [2, 7] */","/* eslint max-statements: [1, 50] */","","var bufrw = require('bufrw');","var Buffer = require('buffer').Buffer;","var process = global.process;","","var errors = require('../errors');","var ArgsRW = require('./args');","var Checksum = require('./checksum');","var header = require('./header');","var Tracing = require('./tracing');","var Frame = require('./frame');","var CallFlags = require('./call_flags');","var argsrw = new ArgsRW();","","var ReadResult = bufrw.ReadResult;","var WriteResult = bufrw.WriteResult;","var readRes = new ReadResult(); // shared read result","","var CN_VALUE = new Buffer('cn').readUInt16BE(0, false);","var RD_VALUE = new Buffer('rd').readUInt16BE(0, false);","","var ResponseCodes = {","    OK: 0x00,","    Error: 0x01","};","","var NODE_VERSION = process.versions.node;","var NODE_VERSION_PARTS = NODE_VERSION.split('.');","","var fastBufferToString = allNodeToString;","if (NODE_VERSION_PARTS[1] === '10' && NODE_VERSION_PARTS[2] >= '32') {","    fastBufferToString = node10ToString;","}","","function node10ToString(fastBuf, start, end) {","    var slowBuf = fastBuf.parent;","","    return slowBuf.utf8Slice(","        start + fastBuf.offset,","        end + fastBuf.offset","    );","}","","function allNodeToString(buf, start, end) {","    return buf.toString('utf8', start, end);","}","","// Calls a pooled function and conveniently allocates a response object for it","function allocifyPoolFn(fn, ResultCons) {","    return allocFn;","","    function allocFn(arg1, arg2, arg3) {","        return fn(new ResultCons(), arg1, arg2, arg3);","    }","}","","module.exports.Request = CallRequest;","module.exports.Response = CallResponse;","","// TODO: validate transport header names?","// TODO: Checksum-like class for tracing","","// flags:1 ttl:4 tracing:24 traceflags:1 service~1 nh:1 (hk~1 hv~1){nh} csumtype:1 (csum:4){0,1} (arg~2)*","function CallRequest(flags, ttl, tracing, service, headers, csum, args) {","    this.type = CallRequest.TypeCode;","    this.flags = flags || 0;","    this.ttl = ttl || 0;","    this.tracing = tracing || Tracing.emptyTracing;","    this.service = service || '';","    this.headers = headers || {};","    this.csum = Checksum.objOrType(csum);","    this.args = args || [];","    this.cont = null;","}","","CallRequest.Cont = require('./cont').RequestCont;","CallRequest.TypeCode = 0x03;","CallRequest.RW = bufrw.Base(callReqLength, readCallReqFrom, writeCallReqInto, true);","","CallRequest.RW.lazy = {};","","CallRequest.RW.lazy.flagsOffset = Frame.Overhead;","CallRequest.RW.lazy.poolReadFlags = function poolReadFlags(destResult, frame) {","    // flags:1","    return bufrw.UInt8.poolReadFrom(destResult, frame.buffer, CallRequest.RW.lazy.flagsOffset);","};","","CallRequest.RW.lazy.readFlags = allocifyPoolFn(CallRequest.RW.lazy.poolReadFlags, ReadResult);","","CallRequest.RW.lazy.ttlOffset = CallRequest.RW.lazy.flagsOffset + 1;","CallRequest.RW.lazy.readTTL = function readTTL(frame) {","    if (frame.cache.ttlValue !== null) {","        return frame.cache.ttlValue;","    }","","    var offset = CallRequest.RW.lazy.ttlOffset;","    if (frame.size < offset + 4) {","        return 0;","    }","    var ttl = frame.buffer.readUInt32BE(offset, false);","","    frame.cache.ttlValue = ttl;","","    return ttl;","};","CallRequest.RW.lazy.poolWriteTTL = function poolWriteTTL(destResult, ttl, frame) {","    // ttl:4","    return bufrw.UInt32BE.poolWriteInto(destResult, ttl, frame.buffer, CallRequest.RW.lazy.ttlOffset);","};","","CallRequest.RW.lazy.writeTTL = allocifyPoolFn(CallRequest.RW.lazy.poolWriteTTL, WriteResult);","","CallRequest.RW.lazy.tracingOffset = CallRequest.RW.lazy.ttlOffset + 4;","CallRequest.RW.lazy.poolReadTracing = function poolLazyReadTracing(destResult, frame) {","    // tracing:24 traceflags:1","    return Tracing.RW.poolReadFrom(destResult, frame.buffer, CallRequest.RW.lazy.tracingOffset);","};","","CallRequest.RW.lazy.readTracing = allocifyPoolFn(CallRequest.RW.lazy.poolReadTracing, ReadResult);","","CallRequest.RW.lazy.serviceOffset = CallRequest.RW.lazy.tracingOffset + 25;","CallRequest.RW.lazy.poolReadService = function poolLazyReadService(destResult, frame) {","    // service~1","    return bufrw.str1.poolReadFrom(destResult, frame.buffer, CallRequest.RW.lazy.serviceOffset);","};","","CallRequest.RW.lazy.readService = allocifyPoolFn(CallRequest.RW.lazy.poolReadService, ReadResult);","","CallRequest.RW.lazy.poolReadTracingValue = function poolReadTracingValue(destResult, frame) {","    if (frame.cache.tracingValue !== null) {","        return frame.cache.tracingValue;","    }","","    var offset = CallRequest.RW.lazy.tracingOffset;","","    if (frame.size < offset + 25) {","        return null;","    }","","    var spanid1 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var spanid2 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var parentid1 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var parentid2 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var traceid1 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var traceid2 = frame.buffer.readUInt32BE(offset, false);","    offset += 4;","","    var flags = frame.buffer.readUInt8(offset, false);","    offset += 1;","","    // TODO: pool these objects","    var tracing = new TracingInfo(","        [spanid1, spanid2],","        [parentid1, parentid2],","        [traceid1, traceid2],","        flags","    );","","    frame.cache.tracingValue = tracing;","","    return tracing;","};","","CallRequest.RW.lazy.readTracingValue = allocifyPoolFn(CallRequest.RW.lazy.poolReadTracingValue, ReadResult);","","function TracingInfo(spanid, parentid, traceid, flags) {","    this.spanid = spanid;","    this.parentid = parentid;","    this.traceid = traceid;","    this.flags = flags;","}","","CallRequest.RW.lazy.readServiceStr = function lazyReadServiceStr(frame) {","    if (frame.cache.serviceStr !== null) {","        return frame.cache.serviceStr;","    }","","    var headerStartOffset = findHeaderStartOffset(frame);","    if (!headerStartOffset) {","        return null;","    }","","    if (frame.size < headerStartOffset) {","        return null;","    }","    var serviceNameStr = fastBufferToString(","        frame.buffer,","        CallRequest.RW.lazy.serviceOffset + 1,","        headerStartOffset","    );","","    frame.cache.serviceStr = serviceNameStr;","","    return serviceNameStr;","};","","function findHeaderStartOffset(frame) {","    if (frame.cache.headerStartOffset) {","        return frame.cache.headerStartOffset;","    }","","    var offset = CallRequest.RW.lazy.serviceOffset;","    if (frame.size < offset + 1) {","        return 0;","    }","    var strLength = frame.buffer.readUInt8(offset, false);","    offset += strLength + 1;","","    frame.cache.headerStartOffset = offset;","    return offset;","}","","function scanAndSkipHeaders(frame) {","    var offset = findHeaderStartOffset(frame);","    if (!offset) {","        return false;","    }","","    if (frame.size < offset + 1) {","        return false;","    }","    var nh = frame.buffer.readUInt8(offset, false);","    offset += 1;","","    var cnValueOffset = 0;","    var rdValueOffset = 0;","","    for (var i = 0; i < nh; i++) {","        if (frame.size < offset + 1) {","            return false;","        }","        var keyLength = frame.buffer.readUInt8(offset, false);","        offset += 1;","        if (frame.size < keyLength + offset) {","            return false;","        }","","        var keyValue = null;","","        if (!cnValueOffset && keyLength === 2) {","            keyValue = keyValue || frame.buffer.readUInt16BE(offset, false);","            if (keyValue === CN_VALUE) {","                cnValueOffset = offset + keyLength;","            }","        }","","        if (!rdValueOffset && keyLength === 2) {","            keyValue = keyValue || frame.buffer.readUInt16BE(offset, false);","            if (keyValue === RD_VALUE) {","                rdValueOffset = offset + keyLength;","            }","        }","","        offset += keyLength;","","        if (frame.size < offset + 1) {","            return false;","        }","        var valueLength = frame.buffer.readUInt8(offset, false);","        offset += 1;","        if (frame.size < valueLength + offset) {","            return false;","        }","","        offset += valueLength;","    }","","    frame.cache.cnValueOffset = cnValueOffset;","    frame.cache.rdValueOffset = rdValueOffset;","    frame.cache.csumStartOffset = offset;","    return true;","}","","CallRequest.RW.lazy.readCallerNameStr =","function readCallerNameStr(frame) {","    /*eslint complexity: [2, 20]*/","    if (frame.cache.callerNameStr !== null) {","        return frame.cache.callerNameStr;","    }","","    if (frame.cache.cnValueOffset === null) {","        var success = scanAndSkipHeaders(frame);","        if (!success) {","            return null;","        }","    }","","    var offset = frame.cache.cnValueOffset;","    if (!offset) {","        return null;","    }","","    var callerNameStr = readUInt8String(frame, offset);","    if (!callerNameStr) {","        return null;","    }","","    frame.cache.callerNameStr = callerNameStr;","    return callerNameStr;","};","","CallRequest.RW.lazy.readRoutingDelegateStr =","function readRoutingDelegateStr(frame) {","    /*eslint complexity: [2, 20]*/","    if (frame.cache.routingDelegateStr !== null) {","        return frame.cache.routingDelegateStr;","    }","","    if (frame.cache.rdValueOffset === null) {","        var success = scanAndSkipHeaders(frame);","        if (!success) {","            return null;","        }","    }","","    var offset = frame.cache.rdValueOffset;","    if (!offset) {","        return null;","    }","","    var routingDelegateStr = readUInt8String(frame, offset);","    if (!routingDelegateStr) {","        return null;","    }","","    frame.cache.routingDelegateStr = routingDelegateStr;","    return routingDelegateStr;","};","","function readUInt8String(frame, offset) {","    if (frame.size < offset + 1) {","        return null;","    }","    var valueLength = frame.buffer.readUInt8(offset, false);","    offset += 1;","","    var end = offset + valueLength;","    if (frame.size < end) {","        return null;","    }","","    return fastBufferToString(frame.buffer, offset, end);","}","","CallRequest.RW.lazy.readArg1Str = function readArg1Str(frame) {","    if (frame.cache.arg1Str !== null) {","        return frame.cache.arg1Str;","    }","","    if (!frame.cache.csumStartOffset) {","        var success = scanAndSkipHeaders(frame);","        if (!success) {","            frame.cache.lastError = 'Could not scan & skip headers';","            return null;","        }","    }","","    var offset = frame.cache.csumStartOffset;","","    if (frame.size < offset + 1) {","        frame.cache.lastError = 'Could not read csum type';","        return null;","    }","    var csumType = frame.buffer.readUInt8(offset, false);","    offset += 1;","","    if (csumType !== Checksum.Types.None) {","        offset += Checksum.offsetWidth(csumType);","    }","","    if (frame.size < offset + 2) {","        frame.cache.lastError = 'Could not read arg1 size';","        return null;","    }","    var arg1Length = frame.buffer.readUInt16BE(offset, false);","    offset += 2;","","    var end = offset + arg1Length;","","    if (frame.size < end) {","        frame.cache.lastError = 'Could not read arg1 itself';","        return null;","    }","    var arg1Str = fastBufferToString(frame.buffer, offset, end);","","    frame.cache.arg1Str = arg1Str;","","    return arg1Str;","};","","CallRequest.RW.lazy.poolReadHeaders = function poolReadHeaders(destResult, frame) {","    // last fixed offset","    var offset = CallRequest.RW.lazy.serviceOffset;","","    if (frame.cache.headerStartOffset !== null) {","        offset = frame.cache.headerStartOffset;","    } else {","        // SKIP service~1","        var res = bufrw.str1.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) {","            return res;","        }","        offset = res.offset + res.value;","        frame.cache.headerStartOffset = offset;","    }","","    // READ nh:1 (hk~1 hv~1){nh}","    return header.header1.poolLazyRead(destResult, frame, offset);","};","","CallRequest.RW.lazy.readHeaders = allocifyPoolFn(CallRequest.RW.lazy.poolReadHeaders, ReadResult);","","CallRequest.RW.lazy.poolReadArg1 = function poolReadArg1(destResult, frame, headers) {","    var res = null;","    var offset = 0;","","    // TODO: memoize computed offsets on frame between readService, readArg1,","    // and any others","","    if (headers) {","        offset = headers.offset;","    } else {","        // last fixed offset","        offset = CallRequest.RW.lazy.serviceOffset;","","        // SKIP service~1","        res = bufrw.str1.sizerw.poolReadFrom(destResult, frame.buffer, offset);","        if (res.err) {","            return res;","        }","        offset = res.offset + res.value;","","        // SKIP nh:1 (hk~1 hv~1){nh}","        res = header.header1.poolLazySkip(destResult, frame, offset);","        if (res.err) {","            return res;","        }","        offset = res.offset;","    }","","    // SKIP csumtype:1 (csum:4){0,1}","    res = Checksum.RW.poolLazySkip(destResult, frame, offset);","    if (res.err) {","        return res;","    }","    offset = res.offset;","","    // READ arg~2","    return argsrw.argrw.poolReadFrom(destResult, frame.buffer, offset);","};","","CallRequest.RW.lazy.readArg1 = allocifyPoolFn(CallRequest.RW.lazy.poolReadArg1, ReadResult);","","CallRequest.RW.lazy.isFrameTerminal = function isFrameTerminal(frame) {","    var flags = CallRequest.RW.lazy.poolReadFlags(readRes, frame);","    var frag = flags.value & CallFlags.Fragment;","    return !frag;","};","","function callReqLength(destResult, body) {","    var res;","    var length = 0;","","    // flags:1","    length += bufrw.UInt8.width;","","    // ttl:4","    length += bufrw.UInt32BE.width;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolByteLength(destResult, body.tracing);","    if (res.err) return res;","    length += res.length;","","    // service~1","    res = bufrw.str1.poolByteLength(destResult, body.service);","    if (res.err) return res;","    length += res.length;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolByteLength(destResult, body.headers);","    if (res.err) return res;","    length += res.length;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolByteLength(destResult, body);","    if (!res.err) res.length += length;","","    return res;","}","","function readCallReqFrom(destResult, buffer, offset) {","    var res;","    var body = new CallRequest();","","    // flags:1","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.flags = res.value;","","    // ttl:4","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","","    if (res.value <= 0) {","        return destResult.reset(errors.InvalidTTL({","            ttl: res.value,","            isParseError: true","        }), offset, body);","    }","","    offset = res.offset;","    body.ttl = res.value;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.tracing = res.value;","","    // service~1","    res = bufrw.str1.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.service = res.value;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.headers = res.value;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolReadFrom(destResult, body, buffer, offset);","    if (!res.err) res.value = body;","","    return res;","}","","function writeCallReqInto(destResult, body, buffer, offset) {","    var start = offset;","    var res;","","    // flags:1 -- filled in later after argsrw","    offset += bufrw.UInt8.width;","","    if (body.ttl <= 0) {","        return destResult.reset(errors.InvalidTTL({","            ttl: body.ttl","        }), offset);","    }","","    // ttl:4","    res = bufrw.UInt32BE.poolWriteInto(destResult, body.ttl, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolWriteInto(destResult, body.tracing, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // service~1","    res = bufrw.str1.poolWriteInto(destResult, body.service, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolWriteInto(destResult, body.headers, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // csumtype:1 (csum:4){0,1} (arg~2)* -- (may mutate body.flags)","    res = argsrw.poolWriteInto(destResult, body, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // now we know the final flags, write them","    res = bufrw.UInt8.poolWriteInto(destResult, body.flags, buffer, start);","    if (!res.err) res.offset = offset;","","    return res;","}","","CallRequest.prototype.verifyChecksum = function verifyChecksum() {","    return this.csum.verify(this.args);","};","","// flags:1 code:1 tracing:24 traceflags:1 nh:1 (hk~1 hv~1){nh} csumtype:1 (csum:4){0,1} (arg~2)*","function CallResponse(flags, code, tracing, headers, csum, args) {","    this.type = CallResponse.TypeCode;","    this.flags = flags || 0;","    this.code = code || CallResponse.Codes.OK;","    this.tracing = tracing || Tracing.emptyTracing;","    this.headers = headers || {};","    this.csum = Checksum.objOrType(csum);","    this.args = args || [];","    this.cont = null;","}","","CallResponse.Cont = require('./cont').ResponseCont;","CallResponse.TypeCode = 0x04;","CallResponse.Codes = ResponseCodes;","CallResponse.RW = bufrw.Base(callResLength, readCallResFrom, writeCallResInto, true);","","CallResponse.RW.lazy = {};","","CallResponse.RW.lazy.flagsOffset = Frame.Overhead;","CallResponse.RW.lazy.poolReadFlags = function poolReadFlags(destResult, frame) {","    // flags:1","    return bufrw.UInt8.poolReadFrom(destResult, frame.buffer, CallResponse.RW.lazy.flagsOffset);","};","","CallResponse.RW.lazy.readFlags = allocifyPoolFn(CallResponse.RW.lazy.poolReadFlags, ReadResult);","","CallResponse.RW.lazy.codeOffset = CallResponse.RW.lazy.flagsOffset + 1;","CallResponse.RW.lazy.poolReadCode = function poolReadCode(destResult, frame) {","    // code:1","    return bufrw.UInt8.poolReadFrom(destResult, frame.buffer, CallResponse.RW.lazy.codeOffset);","};","// TODO: readCode?","","CallResponse.RW.lazy.tracingOffset = CallResponse.RW.lazy.codeOffset + 1;","CallResponse.RW.lazy.poolReadTracing = function poolLazyReadTracing(destResult, frame) {","    // tracing:24 traceflags:1","    return Tracing.RW.poolReadFrom(destResult, frame.buffer, CallResponse.RW.lazy.tracingOffset);","};","","CallResponse.RW.lazy.readTracing = allocifyPoolFn(CallResponse.RW.lazy.poolReadTracing, ReadResult);","","CallResponse.RW.lazy.headersOffset = CallResponse.RW.lazy.tracingOffset + 25;","","CallResponse.RW.lazy.poolReadHeaders = function poolReadHeaders(destResult, frame) {","    // last fixed offset","    var offset = CallResponse.RW.lazy.headersOffset;","","    // TODO: memoize computed offsets on frame between readService, readArg1,","    // and any others","","    // READ nh:1 (hk~1 hv~1){nh}","    return header.header1.poolLazyRead(destResult, frame, offset);","};","","CallResponse.RW.lazy.readHeaders = allocifyPoolFn(CallResponse.RW.lazy.readHeaders, ReadResult);","","CallResponse.RW.lazy.poolReadArg1 = function poolReadArg1(destResult, frame, headers) {","    var res = null;","    var offset = 0;","","    if (headers) {","        offset = headers.offset;","    } else {","        // last fixed offset","        offset = CallResponse.RW.lazy.headersOffset;","","        // TODO: memoize computed offsets on frame between readService, readArg1,","        // and any others","","        // SKIP nh:1 (hk~1 hv~1){nh}","        res = header.header1.poolLazySkip(destResult, frame, offset);","        if (res.err) {","            return res;","        }","        offset = res.offset;","    }","","    // SKIP csumtype:1 (csum:4){0,1}","    res = Checksum.RW.poolLazySkip(destResult, frame, offset);","    if (res.err) {","        return res;","    }","    offset = res.offset;","","    // READ arg~2","    return argsrw.argrw.poolReadFrom(destResult, frame.buffer, offset);","};","","CallResponse.RW.lazy.readArg1 = allocifyPoolFn(CallResponse.RW.lazy.readarg1, ReadResult);","","CallResponse.RW.lazy.isFrameTerminal = function isFrameTerminal(frame) {","    var flags = CallResponse.RW.lazy.poolReadFlags(readRes, frame);","    var frag = flags.value & CallFlags.Fragment;","    return !frag;","};","","function callResLength(destResult, body) {","    var res;","    var length = 0;","","    // flags:1","    length += bufrw.UInt8.width;","    // code:1","    length += bufrw.UInt8.width;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolByteLength(destResult, body.tracing);","    if (res.err) return res;","    length += res.length;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolByteLength(destResult, body.headers);","    if (res.err) return res;","    length += res.length;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolByteLength(destResult, body);","    if (!res.err) res.length += length;","","    return res;","}","","function readCallResFrom(destResult, buffer, offset) {","    var res;","    var body = new CallResponse();","","    // flags:1","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.flags = res.value;","","    // code:1","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.code = res.value;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.tracing = res.value;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.headers = res.value;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolReadFrom(destResult, body, buffer, offset);","    if (!res.err) res.value = body;","","    return res;","}","","function writeCallResInto(destResult, body, buffer, offset) {","    var start = offset;","    var res;","","    // flags:1 -- filled in later after argsrw","    offset += bufrw.UInt8.width;","","    // code:1","    res = bufrw.UInt8.poolWriteInto(destResult, body.code, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // tracing:24 traceflags:1","    res = Tracing.RW.poolWriteInto(destResult, body.tracing, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // nh:1 (hk~1 hv~1){nh}","    res = header.header1.poolWriteInto(destResult, body.headers, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // csumtype:1 (csum:4){0,1} (arg~2)* -- (may mutate body.flags)","    res = argsrw.poolWriteInto(destResult, body, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // now we know the final flags, write them","    res = bufrw.UInt8.poolWriteInto(destResult, body.flags, buffer, start);","    if (!res.err) res.offset = offset;","","    return res;","}","","CallResponse.prototype.verifyChecksum = function verifyChecksum() {","    return this.csum.verify(this.args);","};",""],"l":{"27":1,"28":1,"29":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"40":1,"41":1,"42":1,"44":1,"45":1,"47":1,"52":1,"53":1,"55":1,"56":1,"57":0,"60":1,"61":0,"63":0,"69":1,"70":0,"74":1,"75":11,"77":1,"78":0,"82":1,"83":1,"89":1,"90":5,"91":5,"92":5,"93":5,"94":5,"95":5,"96":5,"97":5,"98":5,"101":1,"102":1,"103":1,"105":1,"107":1,"108":1,"110":0,"113":1,"115":1,"116":1,"117":0,"118":0,"121":0,"122":0,"123":0,"125":0,"127":0,"129":0,"131":1,"133":0,"136":1,"138":1,"139":1,"141":0,"144":1,"146":1,"147":1,"149":0,"152":1,"154":1,"155":0,"156":0,"159":0,"161":0,"162":0,"165":0,"166":0,"168":0,"169":0,"171":0,"172":0,"174":0,"175":0,"177":0,"178":0,"180":0,"181":0,"183":0,"184":0,"187":0,"194":0,"196":0,"199":1,"201":1,"202":0,"203":0,"204":0,"205":0,"208":1,"209":0,"210":0,"213":0,"214":0,"215":0,"218":0,"219":0,"221":0,"227":0,"229":0,"232":1,"233":0,"234":0,"237":0,"238":0,"239":0,"241":0,"242":0,"244":0,"245":0,"248":1,"249":0,"250":0,"251":0,"254":0,"255":0,"257":0,"258":0,"260":0,"261":0,"263":0,"264":0,"265":0,"267":0,"268":0,"269":0,"270":0,"273":0,"275":0,"276":0,"277":0,"278":0,"282":0,"283":0,"284":0,"285":0,"289":0,"291":0,"292":0,"294":0,"295":0,"296":0,"297":0,"300":0,"303":0,"304":0,"305":0,"306":0,"309":1,"312":0,"313":0,"316":0,"317":0,"318":0,"319":0,"323":0,"324":0,"325":0,"328":0,"329":0,"330":0,"333":0,"334":0,"337":1,"340":0,"341":0,"344":0,"345":0,"346":0,"347":0,"351":0,"352":0,"353":0,"356":0,"357":0,"358":0,"361":0,"362":0,"365":1,"366":0,"367":0,"369":0,"370":0,"372":0,"373":0,"374":0,"377":0,"380":1,"381":0,"382":0,"385":0,"386":0,"387":0,"388":0,"389":0,"393":0,"395":0,"396":0,"397":0,"399":0,"400":0,"402":0,"403":0,"406":0,"407":0,"408":0,"410":0,"411":0,"413":0,"415":0,"416":0,"417":0,"419":0,"421":0,"423":0,"426":1,"428":0,"430":0,"431":0,"434":0,"435":0,"436":0,"438":0,"439":0,"443":0,"446":1,"448":1,"449":0,"450":0,"455":0,"456":0,"459":0,"462":0,"463":0,"464":0,"466":0,"469":0,"470":0,"471":0,"473":0,"477":0,"478":0,"479":0,"481":0,"484":0,"487":1,"489":1,"490":0,"491":0,"492":0,"495":1,"496":0,"497":0,"500":0,"503":0,"506":0,"507":0,"508":0,"511":0,"512":0,"513":0,"516":0,"517":0,"518":0,"521":0,"522":0,"524":0,"527":1,"528":0,"529":0,"532":0,"533":0,"534":0,"535":0,"538":0,"539":0,"541":0,"542":0,"548":0,"549":0,"552":0,"553":0,"554":0,"555":0,"558":0,"559":0,"560":0,"561":0,"564":0,"565":0,"566":0,"567":0,"570":0,"571":0,"573":0,"576":1,"577":0,"578":0,"581":0,"583":0,"584":0,"590":0,"591":0,"592":0,"595":0,"596":0,"597":0,"600":0,"601":0,"602":0,"605":0,"606":0,"607":0,"610":0,"611":0,"612":0,"615":0,"616":0,"618":0,"621":1,"622":0,"626":1,"627":0,"628":0,"629":0,"630":0,"631":0,"632":0,"633":0,"634":0,"637":1,"638":1,"639":1,"640":1,"642":1,"644":1,"645":1,"647":0,"650":1,"652":1,"653":1,"655":0,"659":1,"660":1,"662":0,"665":1,"667":1,"669":1,"671":0,"677":0,"680":1,"682":1,"683":0,"684":0,"686":0,"687":0,"690":0,"696":0,"697":0,"698":0,"700":0,"704":0,"705":0,"706":0,"708":0,"711":0,"714":1,"716":1,"717":0,"718":0,"719":0,"722":1,"723":0,"724":0,"727":0,"729":0,"732":0,"733":0,"734":0,"737":0,"738":0,"739":0,"742":0,"743":0,"745":0,"748":1,"749":0,"750":0,"753":0,"754":0,"755":0,"756":0,"759":0,"760":0,"761":0,"762":0,"765":0,"766":0,"767":0,"768":0,"771":0,"772":0,"773":0,"774":0,"777":0,"778":0,"780":0,"783":1,"784":0,"785":0,"788":0,"791":0,"792":0,"793":0,"796":0,"797":0,"798":0,"801":0,"802":0,"803":0,"806":0,"807":0,"808":0,"811":0,"812":0,"814":0,"817":1,"818":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/args.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/args.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":1,"28":2,"29":2,"30":2,"31":2,"32":2,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":1,"118":1},"b":{"1":[0,0],"2":[0,0],"3":[2,2],"4":[2,2],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":2,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"ArgRW","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":23}}},"2":{"name":"poolByteLength","line":45,"loc":{"start":{"line":45,"column":33},"end":{"line":45,"column":74}}},"3":{"name":"poolWriteInto","line":53,"loc":{"start":{"line":53,"column":32},"end":{"line":53,"column":88}}},"4":{"name":"poolReadFrom","line":61,"loc":{"start":{"line":61,"column":31},"end":{"line":61,"column":81}}},"5":{"name":"ArgsRW","line":67,"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":23}}},"6":{"name":"poolByteLength","line":76,"loc":{"start":{"line":76,"column":34},"end":{"line":76,"column":76}}},"7":{"name":"poolWriteInto","line":105,"loc":{"start":{"line":105,"column":33},"end":{"line":105,"column":90}}},"8":{"name":"poolReadFrom","line":134,"loc":{"start":{"line":134,"column":32},"end":{"line":134,"column":88}}},"9":{"name":"writeFragmentInto","line":155,"loc":{"start":{"line":155,"column":37},"end":{"line":155,"column":98}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":29}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":36}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":34}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":22}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":38}},"10":{"start":{"line":36,"column":0},"end":{"line":41,"column":1}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":25}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":51}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":57}},"15":{"start":{"line":43,"column":0},"end":{"line":43,"column":28}},"16":{"start":{"line":45,"column":0},"end":{"line":51,"column":2}},"17":{"start":{"line":46,"column":4},"end":{"line":50,"column":5}},"18":{"start":{"line":47,"column":8},"end":{"line":47,"column":58}},"19":{"start":{"line":49,"column":8},"end":{"line":49,"column":58}},"20":{"start":{"line":53,"column":0},"end":{"line":59,"column":2}},"21":{"start":{"line":54,"column":4},"end":{"line":58,"column":5}},"22":{"start":{"line":55,"column":8},"end":{"line":55,"column":73}},"23":{"start":{"line":57,"column":8},"end":{"line":57,"column":73}},"24":{"start":{"line":61,"column":0},"end":{"line":63,"column":2}},"25":{"start":{"line":62,"column":4},"end":{"line":62,"column":63}},"26":{"start":{"line":65,"column":0},"end":{"line":65,"column":37}},"27":{"start":{"line":67,"column":0},"end":{"line":73,"column":1}},"28":{"start":{"line":68,"column":4},"end":{"line":68,"column":26}},"29":{"start":{"line":69,"column":4},"end":{"line":69,"column":64}},"30":{"start":{"line":70,"column":4},"end":{"line":70,"column":26}},"31":{"start":{"line":71,"column":4},"end":{"line":71,"column":23}},"32":{"start":{"line":72,"column":4},"end":{"line":72,"column":44}},"33":{"start":{"line":74,"column":0},"end":{"line":74,"column":29}},"34":{"start":{"line":76,"column":0},"end":{"line":102,"column":2}},"35":{"start":{"line":77,"column":4},"end":{"line":77,"column":19}},"36":{"start":{"line":78,"column":4},"end":{"line":78,"column":12}},"37":{"start":{"line":80,"column":4},"end":{"line":80,"column":60}},"38":{"start":{"line":81,"column":4},"end":{"line":81,"column":28}},"39":{"start":{"line":81,"column":17},"end":{"line":81,"column":28}},"40":{"start":{"line":82,"column":4},"end":{"line":82,"column":25}},"41":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"42":{"start":{"line":85,"column":8},"end":{"line":85,"column":46}},"43":{"start":{"line":88,"column":4},"end":{"line":93,"column":5}},"44":{"start":{"line":89,"column":8},"end":{"line":92,"column":12}},"45":{"start":{"line":95,"column":4},"end":{"line":99,"column":5}},"46":{"start":{"line":96,"column":8},"end":{"line":96,"column":66}},"47":{"start":{"line":97,"column":8},"end":{"line":97,"column":32}},"48":{"start":{"line":97,"column":21},"end":{"line":97,"column":32}},"49":{"start":{"line":98,"column":8},"end":{"line":98,"column":29}},"50":{"start":{"line":101,"column":4},"end":{"line":101,"column":42}},"51":{"start":{"line":104,"column":0},"end":{"line":104,"column":32}},"52":{"start":{"line":105,"column":0},"end":{"line":132,"column":2}},"53":{"start":{"line":106,"column":4},"end":{"line":106,"column":23}},"54":{"start":{"line":107,"column":4},"end":{"line":107,"column":12}},"55":{"start":{"line":109,"column":4},"end":{"line":109,"column":59}},"56":{"start":{"line":110,"column":4},"end":{"line":110,"column":58}},"57":{"start":{"line":110,"column":20},"end":{"line":110,"column":58}},"58":{"start":{"line":111,"column":4},"end":{"line":111,"column":28}},"59":{"start":{"line":113,"column":4},"end":{"line":126,"column":5}},"60":{"start":{"line":114,"column":8},"end":{"line":114,"column":71}},"61":{"start":{"line":115,"column":8},"end":{"line":115,"column":32}},"62":{"start":{"line":115,"column":21},"end":{"line":115,"column":32}},"63":{"start":{"line":116,"column":8},"end":{"line":116,"column":28}},"64":{"start":{"line":119,"column":8},"end":{"line":125,"column":9}},"65":{"start":{"line":120,"column":12},"end":{"line":120,"column":85}},"66":{"start":{"line":121,"column":12},"end":{"line":121,"column":36}},"67":{"start":{"line":121,"column":25},"end":{"line":121,"column":36}},"68":{"start":{"line":122,"column":12},"end":{"line":122,"column":71}},"69":{"start":{"line":123,"column":12},"end":{"line":123,"column":50}},"70":{"start":{"line":124,"column":12},"end":{"line":124,"column":32}},"71":{"start":{"line":128,"column":4},"end":{"line":128,"column":74}},"72":{"start":{"line":129,"column":4},"end":{"line":129,"column":38}},"73":{"start":{"line":129,"column":18},"end":{"line":129,"column":38}},"74":{"start":{"line":131,"column":4},"end":{"line":131,"column":15}},"75":{"start":{"line":134,"column":0},"end":{"line":153,"column":2}},"76":{"start":{"line":135,"column":4},"end":{"line":135,"column":12}},"77":{"start":{"line":139,"column":4},"end":{"line":139,"column":63}},"78":{"start":{"line":140,"column":4},"end":{"line":140,"column":28}},"79":{"start":{"line":140,"column":17},"end":{"line":140,"column":28}},"80":{"start":{"line":141,"column":4},"end":{"line":141,"column":24}},"81":{"start":{"line":142,"column":4},"end":{"line":142,"column":26}},"82":{"start":{"line":144,"column":4},"end":{"line":144,"column":19}},"83":{"start":{"line":145,"column":4},"end":{"line":150,"column":5}},"84":{"start":{"line":146,"column":8},"end":{"line":146,"column":66}},"85":{"start":{"line":147,"column":8},"end":{"line":147,"column":32}},"86":{"start":{"line":147,"column":21},"end":{"line":147,"column":32}},"87":{"start":{"line":148,"column":8},"end":{"line":148,"column":28}},"88":{"start":{"line":149,"column":8},"end":{"line":149,"column":34}},"89":{"start":{"line":152,"column":4},"end":{"line":152,"column":48}},"90":{"start":{"line":155,"column":0},"end":{"line":189,"column":2}},"91":{"start":{"line":156,"column":4},"end":{"line":156,"column":12}},"92":{"start":{"line":157,"column":4},"end":{"line":157,"column":14}},"93":{"start":{"line":158,"column":4},"end":{"line":158,"column":40}},"94":{"start":{"line":160,"column":4},"end":{"line":186,"column":64}},"95":{"start":{"line":161,"column":8},"end":{"line":161,"column":44}},"96":{"start":{"line":162,"column":8},"end":{"line":164,"column":9}},"97":{"start":{"line":163,"column":12},"end":{"line":163,"column":34}},"98":{"start":{"line":165,"column":8},"end":{"line":165,"column":53}},"99":{"start":{"line":166,"column":8},"end":{"line":166,"column":32}},"100":{"start":{"line":166,"column":26},"end":{"line":166,"column":32}},"101":{"start":{"line":167,"column":8},"end":{"line":167,"column":46}},"102":{"start":{"line":168,"column":8},"end":{"line":179,"column":9}},"103":{"start":{"line":169,"column":12},"end":{"line":169,"column":43}},"104":{"start":{"line":170,"column":12},"end":{"line":170,"column":43}},"105":{"start":{"line":171,"column":12},"end":{"line":175,"column":14}},"106":{"start":{"line":176,"column":12},"end":{"line":176,"column":49}},"107":{"start":{"line":177,"column":12},"end":{"line":177,"column":41}},"108":{"start":{"line":178,"column":12},"end":{"line":178,"column":31}},"109":{"start":{"line":180,"column":8},"end":{"line":180,"column":72}},"110":{"start":{"line":181,"column":8},"end":{"line":181,"column":32}},"111":{"start":{"line":181,"column":21},"end":{"line":181,"column":32}},"112":{"start":{"line":182,"column":8},"end":{"line":182,"column":67}},"113":{"start":{"line":183,"column":8},"end":{"line":183,"column":46}},"114":{"start":{"line":184,"column":8},"end":{"line":184,"column":28}},"115":{"start":{"line":185,"column":8},"end":{"line":185,"column":40}},"116":{"start":{"line":188,"column":4},"end":{"line":188,"column":49}},"117":{"start":{"line":191,"column":0},"end":{"line":191,"column":24}},"118":{"start":{"line":192,"column":0},"end":{"line":192,"column":29}}},"branchMap":{"1":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"2":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"3":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":12},"end":{"line":68,"column":17}},{"start":{"line":68,"column":21},"end":{"line":68,"column":25}}]},"4":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":11},"end":{"line":69,"column":23}},{"start":{"line":69,"column":27},"end":{"line":69,"column":45}}]},"5":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"6":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"7":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]},"8":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"9":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":4},"end":{"line":110,"column":4}},{"start":{"line":110,"column":4},"end":{"line":110,"column":4}}]},"10":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"11":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":8},"end":{"line":115,"column":8}},{"start":{"line":115,"column":8},"end":{"line":115,"column":8}}]},"12":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":12},"end":{"line":121,"column":12}},{"start":{"line":121,"column":12},"end":{"line":121,"column":12}}]},"13":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"14":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":140,"column":4}},{"start":{"line":140,"column":4},"end":{"line":140,"column":4}}]},"15":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"16":{"line":161,"type":"binary-expr","locations":[{"start":{"line":161,"column":18},"end":{"line":161,"column":30}},{"start":{"line":161,"column":34},"end":{"line":161,"column":43}}]},"17":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":8},"end":{"line":162,"column":8}},{"start":{"line":162,"column":8},"end":{"line":162,"column":8}}]},"18":{"line":165,"type":"cond-expr","locations":[{"start":{"line":165,"column":47},"end":{"line":165,"column":48}},{"start":{"line":165,"column":51},"end":{"line":165,"column":52}}]},"19":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":8},"end":{"line":166,"column":8}},{"start":{"line":166,"column":8},"end":{"line":166,"column":8}}]},"20":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"21":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":181,"column":8}},{"start":{"line":181,"column":8},"end":{"line":181,"column":8}}]},"22":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":13},"end":{"line":186,"column":36}},{"start":{"line":186,"column":40},"end":{"line":186,"column":62}}]},"23":{"line":188,"type":"binary-expr","locations":[{"start":{"line":188,"column":11},"end":{"line":188,"column":14}},{"start":{"line":188,"column":18},"end":{"line":188,"column":48}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var inherits = require('util').inherits;","var bufrw = require('bufrw');","var Buffer = require('buffer').Buffer;","var Checksum = require('./checksum');","var Flags = require('./call_flags');","var errors = require('../errors');","","var Base = bufrw.Base;","var LengthResult = bufrw.LengthResult;","","/* eslint-disable curly */","","function ArgRW(sizerw) {","    Base.call(this);","    this.sizerw = sizerw;","    this.strrw = bufrw.String(this.sizerw, 'utf8');","    this.bufrw = bufrw.VariableBuffer(this.sizerw, true);","}","","inherits(ArgRW, bufrw.Base);","","ArgRW.prototype.poolByteLength = function poolByteLength(destResult, arg) {","    if (typeof arg === 'string') {","        return this.strrw.poolByteLength(destResult, arg);","    } else {","        return this.bufrw.poolByteLength(destResult, arg);","    }","};","","ArgRW.prototype.poolWriteInto = function poolWriteInto(destResult, arg, buffer, offset) {","    if (typeof arg === 'string') {","        return this.strrw.poolWriteInto(destResult, arg, buffer, offset);","    } else {","        return this.bufrw.poolWriteInto(destResult, arg, buffer, offset);","    }","};","","ArgRW.prototype.poolReadFrom = function poolReadFrom(destResult, buffer, offset) {","    return this.bufrw.poolReadFrom(destResult, buffer, offset);","};","","var arg2 = new ArgRW(bufrw.UInt16BE);","","function ArgsRW(argrw) {","    argrw = argrw || arg2;","    assert(argrw.sizerw && argrw.sizerw.width, 'invalid argrw');","    bufrw.Base.call(this);","    this.argrw = argrw;","    this.overhead = this.argrw.sizerw.width;","}","inherits(ArgsRW, bufrw.Base);","","ArgsRW.prototype.poolByteLength = function poolByteLength(destResult, body) {","    var length = 0;","    var res;","","    res = Checksum.RW.poolByteLength(destResult, body.csum);","    if (res.err) return res;","    length += res.length;","","    if (body.args === null) {","        return destResult.reset(null, length);","    }","","    if (!Array.isArray(body.args)) {","        return destResult.reset(null, errors.InvalidArgumentError({","            argType: typeof body.args,","            argConstructor: body.args.constructor.name","        }));","    }","","    for (var i = 0; i < body.args.length; i++) {","        res = this.argrw.poolByteLength(destResult, body.args[i]);","        if (res.err) return res;","        length += res.length;","    }","","    return destResult.reset(null, length);","};","","var lenres = new LengthResult();","ArgsRW.prototype.poolWriteInto = function poolWriteInto(destResult, body, buffer, offset) {","    var start = offset;","    var res;","","    lenres = Checksum.RW.poolByteLength(lenres, body.csum);","    if (lenres.err) return destResult.replace(lenres.err);","    offset += lenres.length;","","    if (body.cont === null) {","        res = this.writeFragmentInto(destResult, body, buffer, offset);","        if (res.err) return res;","        offset = res.offset;","    } else {","        // assume that something else already did the fragmentation correctly","        for (var i = 0; i < body.args.length; i++) {","            res = this.argrw.poolWriteInto(destResult, body.args[i], buffer, offset);","            if (res.err) return res;","            var buf = buffer.slice(offset + this.overhead, res.offset);","            body.csum.update1(buf, body.csum.val);","            offset = res.offset;","        }","    }","","    res = Checksum.RW.poolWriteInto(destResult, body.csum, buffer, start);","    if (!res.err) res.offset = offset;","","    return res;","};","","ArgsRW.prototype.poolReadFrom = function poolReadFrom(destResult, body, buffer, offset) {","    var res;","","    // TODO: missing symmetry: verify csum (requires prior somehow)","","    res = Checksum.RW.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.csum = res.value;","","    body.args = [];","    while (offset < buffer.length) {","        res = this.argrw.poolReadFrom(destResult, buffer, offset);","        if (res.err) return res;","        offset = res.offset;","        body.args.push(res.value);","    }","","    return destResult.reset(null, offset, body);","};","","ArgsRW.prototype.writeFragmentInto = function writeFragmentInto(destResult, body, buffer, offset) {","    var res;","    var i = 0;","    var remain = buffer.length - offset;","","    do {","        var arg = body.args[i] || Buffer(0);","        if (!Buffer.isBuffer(arg)) {","            arg = new Buffer(arg);","        }","        var min = this.overhead + arg.length ? 1 : 0;","        if (remain < min) break;","        var need = this.overhead + arg.length;","        if (need > remain) {","            var j = remain - this.overhead;","            body.args[i] = arg.slice(0, j);","            body.cont = new body.constructor.Cont(","                body.flags & Flags.Fragment,","                body.csum, // share on purpose","                body.args.splice(i + 1)","            );","            body.cont.args.unshift(arg.slice(j));","            body.flags |= Flags.Fragment;","            arg = body.args[i];","        }","        res = this.argrw.poolWriteInto(destResult, arg, buffer, offset);","        if (res.err) return res;","        var buf = buffer.slice(offset + this.overhead, res.offset);","        body.csum.update1(buf, body.csum.val);","        offset = res.offset;","        remain = buffer.length - offset;","    } while (remain >= this.overhead && ++i < body.args.length);","","    return res || destResult.reset(null, offset);","};","","module.exports = ArgsRW;","module.exports.ArgRW = ArgRW;",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":1,"36":1,"37":1,"38":1,"39":1,"40":1,"43":1,"45":1,"46":0,"47":0,"49":0,"53":1,"54":0,"55":0,"57":0,"61":1,"62":0,"65":1,"67":1,"68":2,"69":2,"70":2,"71":2,"72":2,"74":1,"76":1,"77":0,"78":0,"80":0,"81":0,"82":0,"84":0,"85":0,"88":0,"89":0,"95":0,"96":0,"97":0,"98":0,"101":0,"104":1,"105":1,"106":0,"107":0,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"116":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"128":0,"129":0,"131":0,"134":1,"135":0,"139":0,"140":0,"141":0,"142":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"152":0,"155":1,"156":0,"157":0,"158":0,"160":0,"161":0,"162":0,"163":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"176":0,"177":0,"178":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"188":0,"191":1,"192":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/checksum.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/checksum.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":5,"11":5,"12":5,"13":5,"14":5,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":5,"24":0,"25":5,"26":0,"27":5,"28":5,"29":5,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":1,"72":0,"73":0,"74":0,"75":1,"76":0,"77":1,"78":0,"79":1,"80":0,"81":1,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0},"b":{"1":[5,5],"2":[5,0,0,0,0],"3":[0,5],"4":[0,5],"5":[5,5],"6":[5,5,5,5,0],"7":[0,0,0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":5,"2":5,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"Checksum","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":29}}},"2":{"name":"objOrType","line":57,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":45}}},"3":{"name":"offsetWidth","line":77,"loc":{"start":{"line":77,"column":23},"end":{"line":77,"column":50}}},"4":{"name":"poolLazySkip","line":110,"loc":{"start":{"line":110,"column":27},"end":{"line":110,"column":76}}},"5":{"name":"compute","line":131,"loc":{"start":{"line":131,"column":29},"end":{"line":131,"column":59}}},"6":{"name":"_computeNone","line":144,"loc":{"start":{"line":144,"column":34},"end":{"line":144,"column":58}}},"7":{"name":"_computeCrc32","line":148,"loc":{"start":{"line":148,"column":35},"end":{"line":148,"column":70}}},"8":{"name":"_computeCrc32C","line":153,"loc":{"start":{"line":153,"column":36},"end":{"line":153,"column":72}}},"9":{"name":"_computeFarm32","line":157,"loc":{"start":{"line":157,"column":36},"end":{"line":157,"column":72}}},"10":{"name":"update1","line":161,"loc":{"start":{"line":161,"column":29},"end":{"line":161,"column":58}}},"11":{"name":"update","line":165,"loc":{"start":{"line":165,"column":28},"end":{"line":165,"column":57}}},"12":{"name":"verify","line":169,"loc":{"start":{"line":169,"column":28},"end":{"line":169,"column":57}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"2":{"start":{"line":26,"column":0},"end":{"line":26,"column":47}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":45}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":29}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":42}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":34}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":26}},"9":{"start":{"line":36,"column":0},"end":{"line":55,"column":1}},"10":{"start":{"line":37,"column":4},"end":{"line":37,"column":21}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":24}},"12":{"start":{"line":39,"column":4},"end":{"line":54,"column":5}},"13":{"start":{"line":41,"column":12},"end":{"line":41,"column":46}},"14":{"start":{"line":42,"column":12},"end":{"line":42,"column":18}},"15":{"start":{"line":44,"column":12},"end":{"line":44,"column":47}},"16":{"start":{"line":45,"column":12},"end":{"line":45,"column":18}},"17":{"start":{"line":47,"column":12},"end":{"line":47,"column":48}},"18":{"start":{"line":48,"column":12},"end":{"line":48,"column":18}},"19":{"start":{"line":50,"column":12},"end":{"line":50,"column":48}},"20":{"start":{"line":51,"column":12},"end":{"line":51,"column":18}},"21":{"start":{"line":53,"column":12},"end":{"line":53,"column":64}},"22":{"start":{"line":57,"column":0},"end":{"line":75,"column":2}},"23":{"start":{"line":58,"column":4},"end":{"line":60,"column":5}},"24":{"start":{"line":59,"column":8},"end":{"line":59,"column":19}},"25":{"start":{"line":61,"column":4},"end":{"line":63,"column":5}},"26":{"start":{"line":62,"column":8},"end":{"line":62,"column":49}},"27":{"start":{"line":64,"column":4},"end":{"line":65,"column":66}},"28":{"start":{"line":66,"column":4},"end":{"line":74,"column":5}},"29":{"start":{"line":71,"column":12},"end":{"line":71,"column":37}},"30":{"start":{"line":73,"column":12},"end":{"line":73,"column":81}},"31":{"start":{"line":77,"column":0},"end":{"line":88,"column":2}},"32":{"start":{"line":78,"column":4},"end":{"line":87,"column":5}},"33":{"start":{"line":80,"column":12},"end":{"line":80,"column":21}},"34":{"start":{"line":84,"column":12},"end":{"line":84,"column":21}},"35":{"start":{"line":86,"column":12},"end":{"line":86,"column":58}},"36":{"start":{"line":90,"column":0},"end":{"line":90,"column":37}},"37":{"start":{"line":91,"column":0},"end":{"line":91,"column":27}},"38":{"start":{"line":92,"column":0},"end":{"line":92,"column":28}},"39":{"start":{"line":93,"column":0},"end":{"line":93,"column":29}},"40":{"start":{"line":94,"column":0},"end":{"line":94,"column":29}},"41":{"start":{"line":98,"column":0},"end":{"line":98,"column":34}},"42":{"start":{"line":99,"column":0},"end":{"line":99,"column":42}},"43":{"start":{"line":100,"column":0},"end":{"line":100,"column":47}},"44":{"start":{"line":101,"column":0},"end":{"line":101,"column":48}},"45":{"start":{"line":102,"column":0},"end":{"line":102,"column":48}},"46":{"start":{"line":104,"column":0},"end":{"line":108,"column":3}},"47":{"start":{"line":110,"column":0},"end":{"line":129,"column":2}},"48":{"start":{"line":111,"column":4},"end":{"line":111,"column":73}},"49":{"start":{"line":112,"column":4},"end":{"line":114,"column":5}},"50":{"start":{"line":113,"column":8},"end":{"line":113,"column":19}},"51":{"start":{"line":115,"column":4},"end":{"line":115,"column":24}},"52":{"start":{"line":117,"column":4},"end":{"line":117,"column":36}},"53":{"start":{"line":118,"column":4},"end":{"line":123,"column":5}},"54":{"start":{"line":119,"column":8},"end":{"line":121,"column":11}},"55":{"start":{"line":122,"column":8},"end":{"line":122,"column":19}},"56":{"start":{"line":125,"column":4},"end":{"line":125,"column":27}},"57":{"start":{"line":126,"column":4},"end":{"line":126,"column":24}},"58":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}},"59":{"start":{"line":128,"column":4},"end":{"line":128,"column":15}},"60":{"start":{"line":131,"column":0},"end":{"line":142,"column":2}},"61":{"start":{"line":132,"column":4},"end":{"line":132,"column":45}},"62":{"start":{"line":132,"column":35},"end":{"line":132,"column":45}},"63":{"start":{"line":133,"column":4},"end":{"line":141,"column":5}},"64":{"start":{"line":134,"column":8},"end":{"line":134,"column":17}},"65":{"start":{"line":136,"column":8},"end":{"line":136,"column":25}},"66":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"67":{"start":{"line":138,"column":12},"end":{"line":138,"column":48}},"68":{"start":{"line":140,"column":8},"end":{"line":140,"column":20}},"69":{"start":{"line":144,"column":0},"end":{"line":146,"column":2}},"70":{"start":{"line":145,"column":4},"end":{"line":145,"column":13}},"71":{"start":{"line":148,"column":0},"end":{"line":151,"column":2}},"72":{"start":{"line":149,"column":4},"end":{"line":149,"column":39}},"73":{"start":{"line":149,"column":21},"end":{"line":149,"column":39}},"74":{"start":{"line":150,"column":4},"end":{"line":150,"column":29}},"75":{"start":{"line":153,"column":0},"end":{"line":155,"column":2}},"76":{"start":{"line":154,"column":4},"end":{"line":154,"column":30}},"77":{"start":{"line":157,"column":0},"end":{"line":159,"column":2}},"78":{"start":{"line":158,"column":4},"end":{"line":158,"column":30}},"79":{"start":{"line":161,"column":0},"end":{"line":163,"column":2}},"80":{"start":{"line":162,"column":4},"end":{"line":162,"column":41}},"81":{"start":{"line":165,"column":0},"end":{"line":167,"column":2}},"82":{"start":{"line":166,"column":4},"end":{"line":166,"column":41}},"83":{"start":{"line":169,"column":0},"end":{"line":183,"column":2}},"84":{"start":{"line":170,"column":4},"end":{"line":172,"column":5}},"85":{"start":{"line":171,"column":8},"end":{"line":171,"column":20}},"86":{"start":{"line":173,"column":4},"end":{"line":173,"column":40}},"87":{"start":{"line":174,"column":4},"end":{"line":182,"column":5}},"88":{"start":{"line":175,"column":8},"end":{"line":175,"column":20}},"89":{"start":{"line":177,"column":8},"end":{"line":181,"column":11}}},"branchMap":{"1":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":15},"end":{"line":38,"column":18}},{"start":{"line":38,"column":22},"end":{"line":38,"column":23}}]},"2":{"line":39,"type":"switch","locations":[{"start":{"line":40,"column":8},"end":{"line":42,"column":18}},{"start":{"line":43,"column":8},"end":{"line":45,"column":18}},{"start":{"line":46,"column":8},"end":{"line":48,"column":18}},{"start":{"line":49,"column":8},"end":{"line":51,"column":18}},{"start":{"line":52,"column":8},"end":{"line":53,"column":64}}]},"3":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":58,"column":4}},{"start":{"line":58,"column":4},"end":{"line":58,"column":4}}]},"4":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":4},"end":{"line":61,"column":4}},{"start":{"line":61,"column":4},"end":{"line":61,"column":4}}]},"5":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":25}},{"start":{"line":61,"column":29},"end":{"line":61,"column":41}}]},"6":{"line":66,"type":"switch","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":18}},{"start":{"line":68,"column":8},"end":{"line":68,"column":18}},{"start":{"line":69,"column":8},"end":{"line":69,"column":18}},{"start":{"line":70,"column":8},"end":{"line":71,"column":37}},{"start":{"line":72,"column":8},"end":{"line":73,"column":81}}]},"7":{"line":78,"type":"switch","locations":[{"start":{"line":79,"column":8},"end":{"line":80,"column":21}},{"start":{"line":81,"column":8},"end":{"line":81,"column":18}},{"start":{"line":82,"column":8},"end":{"line":82,"column":18}},{"start":{"line":83,"column":8},"end":{"line":84,"column":21}},{"start":{"line":85,"column":8},"end":{"line":86,"column":58}}]},"8":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]},"9":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]},"10":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"11":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":133,"column":4}},{"start":{"line":133,"column":4},"end":{"line":133,"column":4}}]},"12":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"13":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":4},"end":{"line":170,"column":4}},{"start":{"line":170,"column":4},"end":{"line":170,"column":4}}]},"14":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":4},"end":{"line":174,"column":4}},{"start":{"line":174,"column":4},"end":{"line":174,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","","var assert = require('assert');","var farm32 = require('farmhash').fingerprint32;","var crc32 = require('crc').crc32;","var crc32c = require('sse4_crc32').calculate;","var bufrw = require('bufrw');","var bufrwErrors = require('bufrw/errors');","var errors = require('../errors');","","module.exports = Checksum;","","// csumtype:1 (csum:4){0,1}","function Checksum(type, val) {","    this.type = type;","    this.val = val || 0;","    switch (this.type) {","        case 0x00:","            this._compute = this._computeNone;","            break;","        case 0x01:","            this._compute = this._computeCrc32;","            break;","        case 0x02:","            this._compute = this._computeFarm32;","            break;","        case 0x03:","            this._compute = this._computeCrc32C;","            break;","        default:","            assert(false, 'invalid checksum type ' + this.type);","    }","}","","Checksum.objOrType = function objOrType(arg) {","    if (arg instanceof Checksum) {","        return arg;","    }","    if (arg === undefined || arg === null) {","        return new Checksum(Checksum.Types.None);","    }","    assert(typeof arg === 'number',","           'expected a Checksum object or a valid checksum type');","    switch (arg) {","        case 0x00:","        case 0x01:","        case 0x02:","        case 0x03:","            return new Checksum(arg);","        default:","            assert(false, 'expected a Checksum object or a valid checksum type');","    }","};","","Checksum.offsetWidth = function offsetWidth(type) {","    switch (type) {","        case 0x00:","            return 0;","        case 0x01:","        case 0x02:","        case 0x03:","            return 4;","        default:","            assert(false, 'expected valid checksum type');","    }","};","","Checksum.Types = Object.create(null);","Checksum.Types.None = 0x00;","Checksum.Types.CRC32 = 0x01;","Checksum.Types.Farm32 = 0x02;","Checksum.Types.CRC32C = 0x03;","","// csumtype:1 (csum:4){0,1}","","var rwCases = Object.create(null);","rwCases[Checksum.Types.None] = bufrw.Null;","rwCases[Checksum.Types.CRC32] = bufrw.UInt32BE;","rwCases[Checksum.Types.Farm32] = bufrw.UInt32BE;","rwCases[Checksum.Types.CRC32C] = bufrw.UInt32BE;","","Checksum.RW = bufrw.Switch(bufrw.UInt8, rwCases, {","    cons: Checksum,","    valKey: 'type',","    dataKey: 'val'","});","","Checksum.RW.poolLazySkip = function poolLazySkip(destResult, frame, offset) {","    var res = bufrw.UInt8.poolReadFrom(destResult, frame.buffer, offset);","    if (res.err) {","        return res;","    }","    offset = res.offset;","","    var caseRW = rwCases[res.value];","    if (!caseRW) {","        res.err = bufrwErrors.InvalidSwitchValue({","            value: res.value","        });","        return res;","    }","","    offset += caseRW.width;","    res.offset = offset;","    res.value = null;","    return res;","};","","Checksum.prototype.compute = function compute(args, prior) {","    if (typeof prior !== 'number') prior = 0;","    if (this.type === Checksum.Types.None) {","        return 0;","    } else {","        var csum = prior;","        for (var i = 0; i < args.length; i++) {","            csum = this._compute(args[i], csum);","        }","        return csum;","    }","};","","Checksum.prototype._computeNone = function _computeNone() {","    return 0;","};","","Checksum.prototype._computeCrc32 = function _computeCrc32(arg, prior) {","    if (prior === 0) prior = undefined;","    return crc32(arg, prior);","};","","Checksum.prototype._computeCrc32C = function _computeCrc32C(arg, prior) {","    return crc32c(arg, prior);","};","","Checksum.prototype._computeFarm32 = function _computeFarm32(arg, prior) {","    return farm32(arg, prior);","};","","Checksum.prototype.update1 = function update1(arg, prior) {","    this.val = this._compute(arg, prior);","};","","Checksum.prototype.update = function update(args, prior) {","    this.val = this.compute(args, prior);","};","","Checksum.prototype.verify = function verify(args, prior) {","    if (this.type === Checksum.Types.None) {","        return null;","    }","    var val = this.compute(args, prior);","    if (val === this.val) {","        return null;","    } else {","        return errors.ChecksumError({","            checksumType: this.type,","            expectedValue: this.val,","            actualValue: val","        });","    }","};",""],"l":{"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"33":1,"36":1,"37":5,"38":5,"39":5,"41":5,"42":5,"44":0,"45":0,"47":0,"48":0,"50":0,"51":0,"53":0,"57":1,"58":5,"59":0,"61":5,"62":0,"64":5,"66":5,"71":5,"73":0,"77":1,"78":0,"80":0,"84":0,"86":0,"90":1,"91":1,"92":1,"93":1,"94":1,"98":1,"99":1,"100":1,"101":1,"102":1,"104":1,"110":1,"111":0,"112":0,"113":0,"115":0,"117":0,"118":0,"119":0,"122":0,"125":0,"126":0,"127":0,"128":0,"131":1,"132":0,"133":0,"134":0,"136":0,"137":0,"138":0,"140":0,"144":1,"145":0,"148":1,"149":0,"150":0,"153":1,"154":0,"157":1,"158":0,"161":1,"162":0,"165":1,"166":0,"169":1,"170":0,"171":0,"173":0,"174":0,"175":0,"177":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/tracing.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/tracing.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":6,"12":6,"13":6,"14":6,"15":1,"16":1,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1},"b":{"1":[6,1],"2":[6,1],"3":[6,1],"4":[6,6],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":6,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Tracing","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":51}}},"2":{"name":"tracingByteLength","line":47,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":39}}},"3":{"name":"writeTracingInto","line":57,"loc":{"start":{"line":57,"column":0},"end":{"line":57,"column":63}}},"4":{"name":"readTracingFrom","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":53}}}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"3":{"start":{"line":29,"column":0},"end":{"line":29,"column":25}},"4":{"start":{"line":31,"column":0},"end":{"line":31,"column":28}},"5":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}},"6":{"start":{"line":33,"column":0},"end":{"line":33,"column":29}},"7":{"start":{"line":34,"column":0},"end":{"line":34,"column":20}},"8":{"start":{"line":35,"column":0},"end":{"line":35,"column":22}},"9":{"start":{"line":36,"column":0},"end":{"line":36,"column":21}},"10":{"start":{"line":38,"column":0},"end":{"line":43,"column":1}},"11":{"start":{"line":39,"column":4},"end":{"line":39,"column":35}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":39}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":37}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":28}},"15":{"start":{"line":45,"column":0},"end":{"line":45,"column":84}},"16":{"start":{"line":47,"column":0},"end":{"line":55,"column":1}},"17":{"start":{"line":48,"column":4},"end":{"line":54,"column":6}},"18":{"start":{"line":57,"column":0},"end":{"line":87,"column":1}},"19":{"start":{"line":58,"column":4},"end":{"line":58,"column":12}},"20":{"start":{"line":60,"column":4},"end":{"line":60,"column":86}},"21":{"start":{"line":61,"column":4},"end":{"line":61,"column":28}},"22":{"start":{"line":61,"column":17},"end":{"line":61,"column":28}},"23":{"start":{"line":62,"column":4},"end":{"line":62,"column":24}},"24":{"start":{"line":64,"column":4},"end":{"line":64,"column":86}},"25":{"start":{"line":65,"column":4},"end":{"line":65,"column":28}},"26":{"start":{"line":65,"column":17},"end":{"line":65,"column":28}},"27":{"start":{"line":66,"column":4},"end":{"line":66,"column":24}},"28":{"start":{"line":68,"column":4},"end":{"line":68,"column":88}},"29":{"start":{"line":69,"column":4},"end":{"line":69,"column":28}},"30":{"start":{"line":69,"column":17},"end":{"line":69,"column":28}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":24}},"32":{"start":{"line":72,"column":4},"end":{"line":72,"column":88}},"33":{"start":{"line":73,"column":4},"end":{"line":73,"column":28}},"34":{"start":{"line":73,"column":17},"end":{"line":73,"column":28}},"35":{"start":{"line":74,"column":4},"end":{"line":74,"column":24}},"36":{"start":{"line":76,"column":4},"end":{"line":76,"column":87}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":28}},"38":{"start":{"line":77,"column":17},"end":{"line":77,"column":28}},"39":{"start":{"line":78,"column":4},"end":{"line":78,"column":24}},"40":{"start":{"line":80,"column":4},"end":{"line":80,"column":87}},"41":{"start":{"line":81,"column":4},"end":{"line":81,"column":28}},"42":{"start":{"line":81,"column":17},"end":{"line":81,"column":28}},"43":{"start":{"line":82,"column":4},"end":{"line":82,"column":24}},"44":{"start":{"line":84,"column":4},"end":{"line":84,"column":79}},"45":{"start":{"line":86,"column":4},"end":{"line":86,"column":15}},"46":{"start":{"line":89,"column":0},"end":{"line":129,"column":1}},"47":{"start":{"line":90,"column":4},"end":{"line":90,"column":32}},"48":{"start":{"line":91,"column":4},"end":{"line":91,"column":12}},"49":{"start":{"line":93,"column":4},"end":{"line":93,"column":66}},"50":{"start":{"line":94,"column":4},"end":{"line":94,"column":28}},"51":{"start":{"line":94,"column":17},"end":{"line":94,"column":28}},"52":{"start":{"line":95,"column":4},"end":{"line":95,"column":24}},"53":{"start":{"line":96,"column":4},"end":{"line":96,"column":34}},"54":{"start":{"line":98,"column":4},"end":{"line":98,"column":66}},"55":{"start":{"line":99,"column":4},"end":{"line":99,"column":28}},"56":{"start":{"line":99,"column":17},"end":{"line":99,"column":28}},"57":{"start":{"line":100,"column":4},"end":{"line":100,"column":24}},"58":{"start":{"line":101,"column":4},"end":{"line":101,"column":34}},"59":{"start":{"line":103,"column":4},"end":{"line":103,"column":66}},"60":{"start":{"line":104,"column":4},"end":{"line":104,"column":28}},"61":{"start":{"line":104,"column":17},"end":{"line":104,"column":28}},"62":{"start":{"line":105,"column":4},"end":{"line":105,"column":24}},"63":{"start":{"line":106,"column":4},"end":{"line":106,"column":36}},"64":{"start":{"line":108,"column":4},"end":{"line":108,"column":66}},"65":{"start":{"line":109,"column":4},"end":{"line":109,"column":28}},"66":{"start":{"line":109,"column":17},"end":{"line":109,"column":28}},"67":{"start":{"line":110,"column":4},"end":{"line":110,"column":24}},"68":{"start":{"line":111,"column":4},"end":{"line":111,"column":36}},"69":{"start":{"line":113,"column":4},"end":{"line":113,"column":66}},"70":{"start":{"line":114,"column":4},"end":{"line":114,"column":28}},"71":{"start":{"line":114,"column":17},"end":{"line":114,"column":28}},"72":{"start":{"line":115,"column":4},"end":{"line":115,"column":24}},"73":{"start":{"line":116,"column":4},"end":{"line":116,"column":35}},"74":{"start":{"line":118,"column":4},"end":{"line":118,"column":66}},"75":{"start":{"line":119,"column":4},"end":{"line":119,"column":28}},"76":{"start":{"line":119,"column":17},"end":{"line":119,"column":28}},"77":{"start":{"line":120,"column":4},"end":{"line":120,"column":24}},"78":{"start":{"line":121,"column":4},"end":{"line":121,"column":35}},"79":{"start":{"line":123,"column":4},"end":{"line":123,"column":63}},"80":{"start":{"line":124,"column":4},"end":{"line":124,"column":28}},"81":{"start":{"line":124,"column":17},"end":{"line":124,"column":28}},"82":{"start":{"line":125,"column":4},"end":{"line":125,"column":24}},"83":{"start":{"line":126,"column":4},"end":{"line":126,"column":30}},"84":{"start":{"line":128,"column":4},"end":{"line":128,"column":51}},"85":{"start":{"line":131,"column":0},"end":{"line":131,"column":37}}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":18},"end":{"line":39,"column":24}},{"start":{"line":39,"column":28},"end":{"line":39,"column":34}}]},"2":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":20},"end":{"line":40,"column":28}},{"start":{"line":40,"column":32},"end":{"line":40,"column":38}}]},"3":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":19},"end":{"line":41,"column":26}},{"start":{"line":41,"column":30},"end":{"line":41,"column":36}}]},"4":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":17},"end":{"line":42,"column":22}},{"start":{"line":42,"column":26},"end":{"line":42,"column":27}}]},"5":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":4},"end":{"line":61,"column":4}},{"start":{"line":61,"column":4},"end":{"line":61,"column":4}}]},"6":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"7":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"8":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"9":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":77,"column":4}},{"start":{"line":77,"column":4},"end":{"line":77,"column":4}}]},"10":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"12":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"13":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"14":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":4},"end":{"line":109,"column":4}},{"start":{"line":109,"column":4},"end":{"line":109,"column":4}}]},"15":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"16":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"17":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":4},"end":{"line":124,"column":4}},{"start":{"line":124,"column":4},"end":{"line":124,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","/* eslint max-statements: [1, 31] */","","var bufrw = require('bufrw');","var Buffer = require('buffer').Buffer;","","module.exports = Tracing;","","var emptySpanId = Buffer(8);","var emptyParentId = Buffer(8);","var emptyTraceId = Buffer(8);","emptySpanId.fill(0);","emptyParentId.fill(0);","emptyTraceId.fill(0);","","function Tracing(spanid, parentid, traceid, flags) {","    this.spanid = spanid || [0, 0];","    this.parentid = parentid || [0, 0];","    this.traceid = traceid || [0, 0];","    this.flags = flags || 0;","}","","Tracing.RW = bufrw.Base(tracingByteLength, readTracingFrom, writeTracingInto, true);","","function tracingByteLength(destResult) {","    return destResult.reset(","        null,","        8 + // spanid:8","        8 + // parentid:8","        8 + // traceid:8","        1   // flags:1","    );","}","","function writeTracingInto(destResult, tracing, buffer, offset) {","    var res;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.spanid[0], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.spanid[1], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.parentid[0], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.parentid[1], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.traceid[0], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt32BE.poolWriteInto(destResult, tracing.traceid[1], buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    res = bufrw.UInt8.poolWriteInto(destResult, tracing.flags, buffer, offset);","","    return res;","}","","function readTracingFrom(destResult, buffer, offset) {","    var tracing = new Tracing();","    var res;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.spanid[0] = res.value;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.spanid[1] = res.value;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.parentid[0] = res.value;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.parentid[1] = res.value;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.traceid[0] = res.value;","","    res = bufrw.UInt32BE.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.traceid[1] = res.value;","","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    tracing.flags = res.value;","","    return destResult.reset(null, offset, tracing);","}","","Tracing.emptyTracing = new Tracing();",""],"l":{"26":1,"27":1,"29":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"38":1,"39":6,"40":6,"41":6,"42":6,"45":1,"47":1,"48":0,"57":1,"58":0,"60":0,"61":0,"62":0,"64":0,"65":0,"66":0,"68":0,"69":0,"70":0,"72":0,"73":0,"74":0,"76":0,"77":0,"78":0,"80":0,"81":0,"82":0,"84":0,"86":0,"89":1,"90":0,"91":0,"93":0,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"101":0,"103":0,"104":0,"105":0,"106":0,"108":0,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"116":0,"118":0,"119":0,"120":0,"121":0,"123":0,"124":0,"125":0,"126":0,"128":0,"131":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/cont.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/cont.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":0,"71":1,"72":0,"73":0,"74":0,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":1,"108":0,"109":1,"110":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"CallRequestCont","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":44}}},"2":{"name":"readFlags","line":48,"loc":{"start":{"line":48,"column":36},"end":{"line":48,"column":62}}},"3":{"name":"isFrameTerminal","line":53,"loc":{"start":{"line":53,"column":42},"end":{"line":53,"column":74}}},"4":{"name":"callReqContLength","line":59,"loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":45}}},"5":{"name":"readCallReqContFrom","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":57}}},"6":{"name":"writeCallReqContInto","line":91,"loc":{"start":{"line":91,"column":0},"end":{"line":91,"column":64}}},"7":{"name":"verifyChecksum","line":110,"loc":{"start":{"line":110,"column":43},"end":{"line":110,"column":74}}},"8":{"name":"CallResponseCont","line":115,"loc":{"start":{"line":115,"column":0},"end":{"line":115,"column":45}}},"9":{"name":"readFlags","line":130,"loc":{"start":{"line":130,"column":37},"end":{"line":130,"column":63}}},"10":{"name":"isFrameTerminal","line":135,"loc":{"start":{"line":135,"column":43},"end":{"line":135,"column":75}}},"11":{"name":"callResContLength","line":141,"loc":{"start":{"line":141,"column":0},"end":{"line":141,"column":45}}},"12":{"name":"readCallResContFrom","line":155,"loc":{"start":{"line":155,"column":0},"end":{"line":155,"column":57}}},"13":{"name":"writeCallResContInto","line":172,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":64}}},"14":{"name":"verifyChecksum","line":191,"loc":{"start":{"line":191,"column":44},"end":{"line":191,"column":75}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":37}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":31}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":40}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":26}},"7":{"start":{"line":33,"column":0},"end":{"line":39,"column":1}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":41}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":28}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":41}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":27}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":21}},"13":{"start":{"line":41,"column":0},"end":{"line":41,"column":32}},"14":{"start":{"line":42,"column":0},"end":{"line":42,"column":39}},"15":{"start":{"line":43,"column":0},"end":{"line":43,"column":100}},"16":{"start":{"line":45,"column":0},"end":{"line":45,"column":29}},"17":{"start":{"line":47,"column":0},"end":{"line":47,"column":53}},"18":{"start":{"line":48,"column":0},"end":{"line":51,"column":2}},"19":{"start":{"line":50,"column":4},"end":{"line":50,"column":83}},"20":{"start":{"line":53,"column":0},"end":{"line":57,"column":2}},"21":{"start":{"line":54,"column":4},"end":{"line":54,"column":57}},"22":{"start":{"line":55,"column":4},"end":{"line":55,"column":48}},"23":{"start":{"line":56,"column":4},"end":{"line":56,"column":17}},"24":{"start":{"line":59,"column":0},"end":{"line":71,"column":1}},"25":{"start":{"line":60,"column":4},"end":{"line":60,"column":12}},"26":{"start":{"line":61,"column":4},"end":{"line":61,"column":19}},"27":{"start":{"line":64,"column":4},"end":{"line":64,"column":32}},"28":{"start":{"line":67,"column":4},"end":{"line":67,"column":50}},"29":{"start":{"line":68,"column":4},"end":{"line":68,"column":39}},"30":{"start":{"line":68,"column":18},"end":{"line":68,"column":39}},"31":{"start":{"line":70,"column":4},"end":{"line":70,"column":15}},"32":{"start":{"line":73,"column":0},"end":{"line":89,"column":1}},"33":{"start":{"line":74,"column":4},"end":{"line":74,"column":12}},"34":{"start":{"line":76,"column":4},"end":{"line":76,"column":37}},"35":{"start":{"line":79,"column":4},"end":{"line":79,"column":63}},"36":{"start":{"line":80,"column":4},"end":{"line":80,"column":28}},"37":{"start":{"line":80,"column":17},"end":{"line":80,"column":28}},"38":{"start":{"line":81,"column":4},"end":{"line":81,"column":24}},"39":{"start":{"line":82,"column":4},"end":{"line":82,"column":27}},"40":{"start":{"line":85,"column":4},"end":{"line":85,"column":64}},"41":{"start":{"line":86,"column":4},"end":{"line":86,"column":35}},"42":{"start":{"line":86,"column":18},"end":{"line":86,"column":35}},"43":{"start":{"line":88,"column":4},"end":{"line":88,"column":15}},"44":{"start":{"line":91,"column":0},"end":{"line":108,"column":1}},"45":{"start":{"line":92,"column":4},"end":{"line":92,"column":23}},"46":{"start":{"line":93,"column":4},"end":{"line":93,"column":12}},"47":{"start":{"line":96,"column":4},"end":{"line":96,"column":32}},"48":{"start":{"line":99,"column":4},"end":{"line":99,"column":65}},"49":{"start":{"line":100,"column":4},"end":{"line":100,"column":28}},"50":{"start":{"line":100,"column":17},"end":{"line":100,"column":28}},"51":{"start":{"line":101,"column":4},"end":{"line":101,"column":24}},"52":{"start":{"line":104,"column":4},"end":{"line":104,"column":75}},"53":{"start":{"line":105,"column":4},"end":{"line":105,"column":38}},"54":{"start":{"line":105,"column":18},"end":{"line":105,"column":38}},"55":{"start":{"line":107,"column":4},"end":{"line":107,"column":15}},"56":{"start":{"line":110,"column":0},"end":{"line":112,"column":2}},"57":{"start":{"line":111,"column":4},"end":{"line":111,"column":46}},"58":{"start":{"line":115,"column":0},"end":{"line":121,"column":1}},"59":{"start":{"line":116,"column":4},"end":{"line":116,"column":42}},"60":{"start":{"line":117,"column":4},"end":{"line":117,"column":28}},"61":{"start":{"line":118,"column":4},"end":{"line":118,"column":41}},"62":{"start":{"line":119,"column":4},"end":{"line":119,"column":27}},"63":{"start":{"line":120,"column":4},"end":{"line":120,"column":21}},"64":{"start":{"line":123,"column":0},"end":{"line":123,"column":33}},"65":{"start":{"line":124,"column":0},"end":{"line":124,"column":41}},"66":{"start":{"line":125,"column":0},"end":{"line":125,"column":101}},"67":{"start":{"line":127,"column":0},"end":{"line":127,"column":30}},"68":{"start":{"line":129,"column":0},"end":{"line":129,"column":54}},"69":{"start":{"line":130,"column":0},"end":{"line":133,"column":2}},"70":{"start":{"line":132,"column":4},"end":{"line":132,"column":84}},"71":{"start":{"line":135,"column":0},"end":{"line":139,"column":2}},"72":{"start":{"line":136,"column":4},"end":{"line":136,"column":58}},"73":{"start":{"line":137,"column":4},"end":{"line":137,"column":48}},"74":{"start":{"line":138,"column":4},"end":{"line":138,"column":17}},"75":{"start":{"line":141,"column":0},"end":{"line":153,"column":1}},"76":{"start":{"line":142,"column":4},"end":{"line":142,"column":12}},"77":{"start":{"line":143,"column":4},"end":{"line":143,"column":19}},"78":{"start":{"line":146,"column":4},"end":{"line":146,"column":32}},"79":{"start":{"line":149,"column":4},"end":{"line":149,"column":50}},"80":{"start":{"line":150,"column":4},"end":{"line":150,"column":39}},"81":{"start":{"line":150,"column":18},"end":{"line":150,"column":39}},"82":{"start":{"line":152,"column":4},"end":{"line":152,"column":15}},"83":{"start":{"line":155,"column":0},"end":{"line":170,"column":1}},"84":{"start":{"line":156,"column":4},"end":{"line":156,"column":12}},"85":{"start":{"line":157,"column":4},"end":{"line":157,"column":38}},"86":{"start":{"line":160,"column":4},"end":{"line":160,"column":63}},"87":{"start":{"line":161,"column":4},"end":{"line":161,"column":28}},"88":{"start":{"line":161,"column":17},"end":{"line":161,"column":28}},"89":{"start":{"line":162,"column":4},"end":{"line":162,"column":24}},"90":{"start":{"line":163,"column":4},"end":{"line":163,"column":27}},"91":{"start":{"line":166,"column":4},"end":{"line":166,"column":64}},"92":{"start":{"line":167,"column":4},"end":{"line":167,"column":35}},"93":{"start":{"line":167,"column":18},"end":{"line":167,"column":35}},"94":{"start":{"line":169,"column":4},"end":{"line":169,"column":15}},"95":{"start":{"line":172,"column":0},"end":{"line":189,"column":1}},"96":{"start":{"line":173,"column":4},"end":{"line":173,"column":23}},"97":{"start":{"line":174,"column":4},"end":{"line":174,"column":12}},"98":{"start":{"line":177,"column":4},"end":{"line":177,"column":32}},"99":{"start":{"line":180,"column":4},"end":{"line":180,"column":65}},"100":{"start":{"line":181,"column":4},"end":{"line":181,"column":28}},"101":{"start":{"line":181,"column":17},"end":{"line":181,"column":28}},"102":{"start":{"line":182,"column":4},"end":{"line":182,"column":24}},"103":{"start":{"line":185,"column":4},"end":{"line":185,"column":75}},"104":{"start":{"line":186,"column":4},"end":{"line":186,"column":38}},"105":{"start":{"line":186,"column":18},"end":{"line":186,"column":38}},"106":{"start":{"line":188,"column":4},"end":{"line":188,"column":15}},"107":{"start":{"line":191,"column":0},"end":{"line":193,"column":2}},"108":{"start":{"line":192,"column":4},"end":{"line":192,"column":46}},"109":{"start":{"line":195,"column":0},"end":{"line":195,"column":45}},"110":{"start":{"line":196,"column":0},"end":{"line":196,"column":47}}},"branchMap":{"1":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":17},"end":{"line":35,"column":22}},{"start":{"line":35,"column":26},"end":{"line":35,"column":27}}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":20}},{"start":{"line":37,"column":24},"end":{"line":37,"column":26}}]},"3":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"4":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"6":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"7":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"8":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":17},"end":{"line":117,"column":22}},{"start":{"line":117,"column":26},"end":{"line":117,"column":27}}]},"9":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":16},"end":{"line":119,"column":20}},{"start":{"line":119,"column":24},"end":{"line":119,"column":26}}]},"10":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":4},"end":{"line":150,"column":4}},{"start":{"line":150,"column":4},"end":{"line":150,"column":4}}]},"11":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"12":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"13":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"14":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":4},"end":{"line":186,"column":4}},{"start":{"line":186,"column":4},"end":{"line":186,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","var Checksum = require('./checksum');","var ArgsRW = require('./args');","var Frame = require('./frame');","var CallFlags = require('./call_flags');","var argsrw = new ArgsRW();","","/* eslint-disable curly */","","// flags:1 csumtype:1 (csum:4){0,1} (arg~2)+","function CallRequestCont(flags, csum, args) {","    this.type = CallRequestCont.TypeCode;","    this.flags = flags || 0;","    this.csum = Checksum.objOrType(csum);","    this.args = args || [];","    this.cont = null;","}","","CallRequestCont.TypeCode = 0x13;","CallRequestCont.Cont = CallRequestCont;","CallRequestCont.RW = bufrw.Base(callReqContLength, readCallReqContFrom, writeCallReqContInto, true);","","CallRequestCont.RW.lazy = {};","","CallRequestCont.RW.lazy.flagsOffset = Frame.Overhead;","CallRequestCont.RW.lazy.readFlags = function readFlags(frame) {","    // flags:1","    return bufrw.UInt8.readFrom(frame.buffer, CallRequestCont.RW.lazy.flagsOffset);","};","","CallRequestCont.RW.lazy.isFrameTerminal = function isFrameTerminal(frame) {","    var flags = CallRequestCont.RW.lazy.readFlags(frame);","    var frag = flags.value & CallFlags.Fragment;","    return !frag;","};","","function callReqContLength(destResult, body) {","    var res;","    var length = 0;","","    // flags:1","    length += bufrw.UInt8.width;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolByteLength(destResult, body);","    if (!res.err) res.length += length;","","    return res;","}","","function readCallReqContFrom(destResult, buffer, offset) {","    var res;","    // TODO: allow these to be pooled","    var body = new CallRequestCont();","","    // flags:1","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.flags = res.value;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolReadFrom(destResult, body, buffer, offset);","    if (!res.err) res.value = body;","","    return res;","}","","function writeCallReqContInto(destResult, body, buffer, offset) {","    var start = offset;","    var res;","","    // flags:1 -- skip for now, write args frist","    offset += bufrw.UInt8.width;","","    // csumtype:1 (csum:4){0,1} (arg~2)* -- (may mutate body.flags)","    res = argsrw.poolWriteInto(destResult, body, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // now we know the final flags, write them","    res = bufrw.UInt8.poolWriteInto(destResult, body.flags, buffer, start);","    if (!res.err) res.offset = offset;","","    return res;","}","","CallRequestCont.prototype.verifyChecksum = function verifyChecksum(prior) {","    return this.csum.verify(this.args, prior);","};","","// flags:1 csumtype:1 (csum:4){0,1} (arg~2)+","function CallResponseCont(flags, csum, args) {","    this.type = CallResponseCont.TypeCode;","    this.flags = flags || 0;","    this.csum = Checksum.objOrType(csum);","    this.args = args || [];","    this.cont = null;","}","","CallResponseCont.TypeCode = 0x14;","CallResponseCont.Cont = CallResponseCont;","CallResponseCont.RW = bufrw.Base(callResContLength, readCallResContFrom, writeCallResContInto, true);","","CallResponseCont.RW.lazy = {};","","CallResponseCont.RW.lazy.flagsOffset = Frame.Overhead;","CallResponseCont.RW.lazy.readFlags = function readFlags(frame) {","    // flags:1","    return bufrw.UInt8.readFrom(frame.buffer, CallResponseCont.RW.lazy.flagsOffset);","};","","CallResponseCont.RW.lazy.isFrameTerminal = function isFrameTerminal(frame) {","    var flags = CallResponseCont.RW.lazy.readFlags(frame);","    var frag = flags.value & CallFlags.Fragment;","    return !frag;","};","","function callResContLength(destResult, body) {","    var res;","    var length = 0;","","    // flags:1","    length += bufrw.UInt8.width;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolByteLength(destResult, body);","    if (!res.err) res.length += length;","","    return res;","}","","function readCallResContFrom(destResult, buffer, offset) {","    var res;","    var body = new CallResponseCont();","","    // flags:1","    res = bufrw.UInt8.poolReadFrom(destResult, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","    body.flags = res.value;","","    // csumtype:1 (csum:4){0,1} (arg~2)*","    res = argsrw.poolReadFrom(destResult, body, buffer, offset);","    if (!res.err) res.value = body;","","    return res;","}","","function writeCallResContInto(destResult, body, buffer, offset) {","    var start = offset;","    var res;","","    // flags:1 -- skip for now, write args frist","    offset += bufrw.UInt8.width;","","    // csumtype:1 (csum:4){0,1} (arg~2)* -- (may mutate body.flags)","    res = argsrw.poolWriteInto(destResult, body, buffer, offset);","    if (res.err) return res;","    offset = res.offset;","","    // now we know the final flags, write them","    res = bufrw.UInt8.poolWriteInto(destResult, body.flags, buffer, start);","    if (!res.err) res.offset = offset;","","    return res;","}","","CallResponseCont.prototype.verifyChecksum = function verifyChecksum(prior) {","    return this.csum.verify(this.args, prior);","};","","module.exports.RequestCont = CallRequestCont;","module.exports.ResponseCont = CallResponseCont;",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"41":1,"42":1,"43":1,"45":1,"47":1,"48":1,"50":0,"53":1,"54":0,"55":0,"56":0,"59":1,"60":0,"61":0,"64":0,"67":0,"68":0,"70":0,"73":1,"74":0,"76":0,"79":0,"80":0,"81":0,"82":0,"85":0,"86":0,"88":0,"91":1,"92":0,"93":0,"96":0,"99":0,"100":0,"101":0,"104":0,"105":0,"107":0,"110":1,"111":0,"115":1,"116":0,"117":0,"118":0,"119":0,"120":0,"123":1,"124":1,"125":1,"127":1,"129":1,"130":1,"132":0,"135":1,"136":0,"137":0,"138":0,"141":1,"142":0,"143":0,"146":0,"149":0,"150":0,"152":0,"155":1,"156":0,"157":0,"160":0,"161":0,"162":0,"163":0,"166":0,"167":0,"169":0,"172":1,"173":0,"174":0,"177":0,"180":0,"181":0,"182":0,"185":0,"186":0,"188":0,"191":1,"192":0,"195":1,"196":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/cancel.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/cancel.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1,"10":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"Cancel","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":35}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}},"3":{"start":{"line":27,"column":0},"end":{"line":32,"column":1}},"4":{"start":{"line":28,"column":4},"end":{"line":28,"column":32}},"5":{"start":{"line":29,"column":4},"end":{"line":29,"column":24}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":51}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":25}},"8":{"start":{"line":34,"column":0},"end":{"line":34,"column":23}},"9":{"start":{"line":36,"column":0},"end":{"line":40,"column":3}},"10":{"start":{"line":42,"column":0},"end":{"line":42,"column":24}}},"branchMap":{"1":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":15},"end":{"line":29,"column":18}},{"start":{"line":29,"column":22},"end":{"line":29,"column":23}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":19},"end":{"line":30,"column":26}},{"start":{"line":30,"column":30},"end":{"line":30,"column":50}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":15},"end":{"line":31,"column":18}},{"start":{"line":31,"column":22},"end":{"line":31,"column":24}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","var Tracing = require('./tracing');","","// ttl:4 tracing:25 why~2","function Cancel(ttl, tracing, why) {","    this.type = Cancel.TypeCode;","    this.ttl = ttl || 0;","    this.tracing = tracing || Tracing.emptyTracing;","    this.why = why || '';","}","","Cancel.TypeCode = 0xc0;","","Cancel.RW = bufrw.Struct(Cancel, [","    {name: 'ttl', rw: bufrw.UInt32BE}, // ttl:4","    {name: 'tracing', rw: Tracing.RW}, // tracing:25","    {name: 'why', rw: bufrw.str2}      // why~2","]);","","module.exports = Cancel;",""],"l":{"23":1,"24":1,"27":1,"28":0,"29":0,"30":0,"31":0,"34":1,"36":1,"42":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/claim.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/claim.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1,"9":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"Claim","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":29}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}},"3":{"start":{"line":27,"column":0},"end":{"line":31,"column":1}},"4":{"start":{"line":28,"column":4},"end":{"line":28,"column":31}},"5":{"start":{"line":29,"column":4},"end":{"line":29,"column":24}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":51}},"7":{"start":{"line":33,"column":0},"end":{"line":33,"column":22}},"8":{"start":{"line":35,"column":0},"end":{"line":38,"column":3}},"9":{"start":{"line":40,"column":0},"end":{"line":40,"column":23}}},"branchMap":{"1":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":15},"end":{"line":29,"column":18}},{"start":{"line":29,"column":22},"end":{"line":29,"column":23}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":19},"end":{"line":30,"column":26}},{"start":{"line":30,"column":30},"end":{"line":30,"column":50}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","var Tracing = require('./tracing');","","// ttl:4 tracing:25","function Claim(ttl, tracing) {","    this.type = Claim.TypeCode;","    this.ttl = ttl || 0;","    this.tracing = tracing || Tracing.emptyTracing;","}","","Claim.TypeCode = 0xc1;","","Claim.RW = bufrw.Struct(Claim, [","    {name: 'ttl', rw: bufrw.UInt32BE}, // ttl:4","    {name: 'tracing', rw: Tracing.RW}  // tracing:25","]);","","module.exports = Claim;",""],"l":{"23":1,"24":1,"27":1,"28":0,"29":0,"30":0,"33":1,"35":1,"40":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/ping.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/ping.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"PingRequest","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":23}}},"2":{"name":"PingResponse","line":35,"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":24}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":37}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":39}},"4":{"start":{"line":28,"column":0},"end":{"line":30,"column":1}},"5":{"start":{"line":29,"column":4},"end":{"line":29,"column":37}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":28}},"7":{"start":{"line":33,"column":0},"end":{"line":33,"column":47}},"8":{"start":{"line":35,"column":0},"end":{"line":37,"column":1}},"9":{"start":{"line":36,"column":4},"end":{"line":36,"column":38}},"10":{"start":{"line":39,"column":0},"end":{"line":39,"column":29}},"11":{"start":{"line":40,"column":0},"end":{"line":40,"column":49}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","","module.exports.Request = PingRequest;","module.exports.Response = PingResponse;","","function PingRequest() {","    this.type = PingRequest.TypeCode;","}","","PingRequest.TypeCode = 0xd0;","PingRequest.RW = bufrw.Struct(PingRequest, []);","","function PingResponse() {","    this.type = PingResponse.TypeCode;","}","","PingResponse.TypeCode = 0xd1;","PingResponse.RW = bufrw.Struct(PingResponse, []);",""],"l":{"23":1,"25":1,"26":1,"28":1,"29":0,"32":1,"33":1,"35":1,"36":0,"39":1,"40":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/error_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/error_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":1,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":1,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":1,"185":1,"186":1,"187":1,"188":1,"189":1,"190":1,"191":1,"192":1,"193":1,"194":1,"195":1,"196":1,"197":1,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":1,"205":1,"206":0,"207":1,"208":1,"209":0,"210":1,"211":1,"212":0,"213":1,"214":1,"215":0,"216":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"ErrorResponse","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":47}}},"2":{"name":"TimeoutError","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":28}}},"3":{"name":"CancelledError","line":88,"loc":{"start":{"line":88,"column":0},"end":{"line":88,"column":30}}},"4":{"name":"BusyError","line":111,"loc":{"start":{"line":111,"column":0},"end":{"line":111,"column":25}}},"5":{"name":"DeclinedError","line":134,"loc":{"start":{"line":134,"column":0},"end":{"line":134,"column":29}}},"6":{"name":"UnexpectedErrorError","line":157,"loc":{"start":{"line":157,"column":0},"end":{"line":157,"column":36}}},"7":{"name":"BadRequestError","line":180,"loc":{"start":{"line":180,"column":0},"end":{"line":180,"column":31}}},"8":{"name":"NetworkErrorError","line":203,"loc":{"start":{"line":203,"column":0},"end":{"line":203,"column":33}}},"9":{"name":"ProtocolErrorError","line":226,"loc":{"start":{"line":226,"column":0},"end":{"line":226,"column":34}}},"10":{"name":"UnhealthyError","line":249,"loc":{"start":{"line":249,"column":0},"end":{"line":249,"column":30}}},"11":{"name":"writeGuard","line":288,"loc":{"start":{"line":288,"column":27},"end":{"line":288,"column":81}}},"12":{"name":"writeGuard","line":300,"loc":{"start":{"line":300,"column":27},"end":{"line":300,"column":81}}},"13":{"name":"isFrameTerminal","line":313,"loc":{"start":{"line":313,"column":40},"end":{"line":313,"column":67}}},"14":{"name":"readCode","line":318,"loc":{"start":{"line":318,"column":33},"end":{"line":318,"column":58}}},"15":{"name":"readTracing","line":324,"loc":{"start":{"line":324,"column":36},"end":{"line":324,"column":64}}},"16":{"name":"readMessage","line":330,"loc":{"start":{"line":330,"column":36},"end":{"line":330,"column":64}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":31}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":35}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":34}},"5":{"start":{"line":33,"column":0},"end":{"line":38,"column":1}},"6":{"start":{"line":34,"column":4},"end":{"line":34,"column":26}},"7":{"start":{"line":35,"column":4},"end":{"line":35,"column":51}},"8":{"start":{"line":36,"column":4},"end":{"line":36,"column":39}},"9":{"start":{"line":37,"column":4},"end":{"line":37,"column":33}},"10":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}},"11":{"start":{"line":42,"column":0},"end":{"line":42,"column":32}},"12":{"start":{"line":44,"column":0},"end":{"line":44,"column":21}},"13":{"start":{"line":45,"column":0},"end":{"line":45,"column":23}},"14":{"start":{"line":46,"column":0},"end":{"line":46,"column":18}},"15":{"start":{"line":47,"column":0},"end":{"line":47,"column":22}},"16":{"start":{"line":48,"column":0},"end":{"line":48,"column":29}},"17":{"start":{"line":49,"column":0},"end":{"line":49,"column":24}},"18":{"start":{"line":50,"column":0},"end":{"line":50,"column":26}},"19":{"start":{"line":51,"column":0},"end":{"line":51,"column":23}},"20":{"start":{"line":52,"column":0},"end":{"line":52,"column":27}},"21":{"start":{"line":54,"column":0},"end":{"line":54,"column":36}},"22":{"start":{"line":55,"column":0},"end":{"line":55,"column":37}},"23":{"start":{"line":56,"column":0},"end":{"line":56,"column":41}},"24":{"start":{"line":57,"column":0},"end":{"line":57,"column":31}},"25":{"start":{"line":58,"column":0},"end":{"line":58,"column":39}},"26":{"start":{"line":59,"column":0},"end":{"line":59,"column":53}},"27":{"start":{"line":60,"column":0},"end":{"line":60,"column":43}},"28":{"start":{"line":61,"column":0},"end":{"line":61,"column":47}},"29":{"start":{"line":62,"column":0},"end":{"line":62,"column":49}},"30":{"start":{"line":63,"column":0},"end":{"line":63,"column":41}},"31":{"start":{"line":65,"column":0},"end":{"line":86,"column":1}},"32":{"start":{"line":66,"column":4},"end":{"line":66,"column":39}},"33":{"start":{"line":67,"column":4},"end":{"line":67,"column":39}},"34":{"start":{"line":68,"column":4},"end":{"line":68,"column":35}},"35":{"start":{"line":69,"column":4},"end":{"line":69,"column":38}},"36":{"start":{"line":70,"column":4},"end":{"line":70,"column":29}},"37":{"start":{"line":71,"column":4},"end":{"line":71,"column":30}},"38":{"start":{"line":72,"column":4},"end":{"line":72,"column":35}},"39":{"start":{"line":73,"column":4},"end":{"line":73,"column":27}},"40":{"start":{"line":74,"column":4},"end":{"line":74,"column":27}},"41":{"start":{"line":75,"column":4},"end":{"line":85,"column":5}},"42":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"43":{"start":{"line":77,"column":12},"end":{"line":77,"column":40}},"44":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"45":{"start":{"line":80,"column":12},"end":{"line":80,"column":46}},"46":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"47":{"start":{"line":83,"column":12},"end":{"line":83,"column":46}},"48":{"start":{"line":88,"column":0},"end":{"line":109,"column":1}},"49":{"start":{"line":89,"column":4},"end":{"line":89,"column":41}},"50":{"start":{"line":90,"column":4},"end":{"line":90,"column":41}},"51":{"start":{"line":91,"column":4},"end":{"line":91,"column":37}},"52":{"start":{"line":92,"column":4},"end":{"line":92,"column":40}},"53":{"start":{"line":93,"column":4},"end":{"line":93,"column":29}},"54":{"start":{"line":94,"column":4},"end":{"line":94,"column":32}},"55":{"start":{"line":95,"column":4},"end":{"line":95,"column":37}},"56":{"start":{"line":96,"column":4},"end":{"line":96,"column":27}},"57":{"start":{"line":97,"column":4},"end":{"line":97,"column":27}},"58":{"start":{"line":98,"column":4},"end":{"line":108,"column":5}},"59":{"start":{"line":99,"column":8},"end":{"line":101,"column":9}},"60":{"start":{"line":100,"column":12},"end":{"line":100,"column":40}},"61":{"start":{"line":102,"column":8},"end":{"line":104,"column":9}},"62":{"start":{"line":103,"column":12},"end":{"line":103,"column":46}},"63":{"start":{"line":105,"column":8},"end":{"line":107,"column":9}},"64":{"start":{"line":106,"column":12},"end":{"line":106,"column":46}},"65":{"start":{"line":111,"column":0},"end":{"line":132,"column":1}},"66":{"start":{"line":112,"column":4},"end":{"line":112,"column":36}},"67":{"start":{"line":113,"column":4},"end":{"line":113,"column":36}},"68":{"start":{"line":114,"column":4},"end":{"line":114,"column":32}},"69":{"start":{"line":115,"column":4},"end":{"line":115,"column":35}},"70":{"start":{"line":116,"column":4},"end":{"line":116,"column":29}},"71":{"start":{"line":117,"column":4},"end":{"line":117,"column":27}},"72":{"start":{"line":118,"column":4},"end":{"line":118,"column":32}},"73":{"start":{"line":119,"column":4},"end":{"line":119,"column":27}},"74":{"start":{"line":120,"column":4},"end":{"line":120,"column":27}},"75":{"start":{"line":121,"column":4},"end":{"line":131,"column":5}},"76":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"77":{"start":{"line":123,"column":12},"end":{"line":123,"column":40}},"78":{"start":{"line":125,"column":8},"end":{"line":127,"column":9}},"79":{"start":{"line":126,"column":12},"end":{"line":126,"column":46}},"80":{"start":{"line":128,"column":8},"end":{"line":130,"column":9}},"81":{"start":{"line":129,"column":12},"end":{"line":129,"column":46}},"82":{"start":{"line":134,"column":0},"end":{"line":155,"column":1}},"83":{"start":{"line":135,"column":4},"end":{"line":135,"column":40}},"84":{"start":{"line":136,"column":4},"end":{"line":136,"column":40}},"85":{"start":{"line":137,"column":4},"end":{"line":137,"column":36}},"86":{"start":{"line":138,"column":4},"end":{"line":138,"column":39}},"87":{"start":{"line":139,"column":4},"end":{"line":139,"column":29}},"88":{"start":{"line":140,"column":4},"end":{"line":140,"column":31}},"89":{"start":{"line":141,"column":4},"end":{"line":141,"column":36}},"90":{"start":{"line":142,"column":4},"end":{"line":142,"column":27}},"91":{"start":{"line":143,"column":4},"end":{"line":143,"column":27}},"92":{"start":{"line":144,"column":4},"end":{"line":154,"column":5}},"93":{"start":{"line":145,"column":8},"end":{"line":147,"column":9}},"94":{"start":{"line":146,"column":12},"end":{"line":146,"column":40}},"95":{"start":{"line":148,"column":8},"end":{"line":150,"column":9}},"96":{"start":{"line":149,"column":12},"end":{"line":149,"column":46}},"97":{"start":{"line":151,"column":8},"end":{"line":153,"column":9}},"98":{"start":{"line":152,"column":12},"end":{"line":152,"column":46}},"99":{"start":{"line":157,"column":0},"end":{"line":178,"column":1}},"100":{"start":{"line":158,"column":4},"end":{"line":158,"column":42}},"101":{"start":{"line":159,"column":4},"end":{"line":159,"column":42}},"102":{"start":{"line":160,"column":4},"end":{"line":160,"column":38}},"103":{"start":{"line":161,"column":4},"end":{"line":161,"column":47}},"104":{"start":{"line":162,"column":4},"end":{"line":162,"column":29}},"105":{"start":{"line":163,"column":4},"end":{"line":163,"column":38}},"106":{"start":{"line":164,"column":4},"end":{"line":164,"column":43}},"107":{"start":{"line":165,"column":4},"end":{"line":165,"column":27}},"108":{"start":{"line":166,"column":4},"end":{"line":166,"column":27}},"109":{"start":{"line":167,"column":4},"end":{"line":177,"column":5}},"110":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"111":{"start":{"line":169,"column":12},"end":{"line":169,"column":40}},"112":{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},"113":{"start":{"line":172,"column":12},"end":{"line":172,"column":46}},"114":{"start":{"line":174,"column":8},"end":{"line":176,"column":9}},"115":{"start":{"line":175,"column":12},"end":{"line":175,"column":46}},"116":{"start":{"line":180,"column":0},"end":{"line":201,"column":1}},"117":{"start":{"line":181,"column":4},"end":{"line":181,"column":42}},"118":{"start":{"line":182,"column":4},"end":{"line":182,"column":43}},"119":{"start":{"line":183,"column":4},"end":{"line":183,"column":39}},"120":{"start":{"line":184,"column":4},"end":{"line":184,"column":41}},"121":{"start":{"line":185,"column":4},"end":{"line":185,"column":29}},"122":{"start":{"line":186,"column":4},"end":{"line":186,"column":33}},"123":{"start":{"line":187,"column":4},"end":{"line":187,"column":38}},"124":{"start":{"line":188,"column":4},"end":{"line":188,"column":27}},"125":{"start":{"line":189,"column":4},"end":{"line":189,"column":27}},"126":{"start":{"line":190,"column":4},"end":{"line":200,"column":5}},"127":{"start":{"line":191,"column":8},"end":{"line":193,"column":9}},"128":{"start":{"line":192,"column":12},"end":{"line":192,"column":40}},"129":{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},"130":{"start":{"line":195,"column":12},"end":{"line":195,"column":46}},"131":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"132":{"start":{"line":198,"column":12},"end":{"line":198,"column":46}},"133":{"start":{"line":203,"column":0},"end":{"line":224,"column":1}},"134":{"start":{"line":204,"column":4},"end":{"line":204,"column":39}},"135":{"start":{"line":205,"column":4},"end":{"line":205,"column":39}},"136":{"start":{"line":206,"column":4},"end":{"line":206,"column":35}},"137":{"start":{"line":207,"column":4},"end":{"line":207,"column":44}},"138":{"start":{"line":208,"column":4},"end":{"line":208,"column":29}},"139":{"start":{"line":209,"column":4},"end":{"line":209,"column":35}},"140":{"start":{"line":210,"column":4},"end":{"line":210,"column":40}},"141":{"start":{"line":211,"column":4},"end":{"line":211,"column":27}},"142":{"start":{"line":212,"column":4},"end":{"line":212,"column":27}},"143":{"start":{"line":213,"column":4},"end":{"line":223,"column":5}},"144":{"start":{"line":214,"column":8},"end":{"line":216,"column":9}},"145":{"start":{"line":215,"column":12},"end":{"line":215,"column":40}},"146":{"start":{"line":217,"column":8},"end":{"line":219,"column":9}},"147":{"start":{"line":218,"column":12},"end":{"line":218,"column":46}},"148":{"start":{"line":220,"column":8},"end":{"line":222,"column":9}},"149":{"start":{"line":221,"column":12},"end":{"line":221,"column":46}},"150":{"start":{"line":226,"column":0},"end":{"line":247,"column":1}},"151":{"start":{"line":227,"column":4},"end":{"line":227,"column":40}},"152":{"start":{"line":228,"column":4},"end":{"line":228,"column":40}},"153":{"start":{"line":229,"column":4},"end":{"line":229,"column":36}},"154":{"start":{"line":230,"column":4},"end":{"line":230,"column":45}},"155":{"start":{"line":231,"column":4},"end":{"line":231,"column":29}},"156":{"start":{"line":232,"column":4},"end":{"line":232,"column":36}},"157":{"start":{"line":233,"column":4},"end":{"line":233,"column":41}},"158":{"start":{"line":234,"column":4},"end":{"line":234,"column":27}},"159":{"start":{"line":235,"column":4},"end":{"line":235,"column":27}},"160":{"start":{"line":236,"column":4},"end":{"line":246,"column":5}},"161":{"start":{"line":237,"column":8},"end":{"line":239,"column":9}},"162":{"start":{"line":238,"column":12},"end":{"line":238,"column":40}},"163":{"start":{"line":240,"column":8},"end":{"line":242,"column":9}},"164":{"start":{"line":241,"column":12},"end":{"line":241,"column":46}},"165":{"start":{"line":243,"column":8},"end":{"line":245,"column":9}},"166":{"start":{"line":244,"column":12},"end":{"line":244,"column":46}},"167":{"start":{"line":249,"column":0},"end":{"line":270,"column":1}},"168":{"start":{"line":250,"column":4},"end":{"line":250,"column":41}},"169":{"start":{"line":251,"column":4},"end":{"line":251,"column":41}},"170":{"start":{"line":252,"column":4},"end":{"line":252,"column":37}},"171":{"start":{"line":253,"column":4},"end":{"line":253,"column":40}},"172":{"start":{"line":254,"column":4},"end":{"line":254,"column":29}},"173":{"start":{"line":255,"column":4},"end":{"line":255,"column":32}},"174":{"start":{"line":256,"column":4},"end":{"line":256,"column":37}},"175":{"start":{"line":257,"column":4},"end":{"line":257,"column":27}},"176":{"start":{"line":258,"column":4},"end":{"line":258,"column":27}},"177":{"start":{"line":259,"column":4},"end":{"line":269,"column":5}},"178":{"start":{"line":260,"column":8},"end":{"line":262,"column":9}},"179":{"start":{"line":261,"column":12},"end":{"line":261,"column":40}},"180":{"start":{"line":263,"column":8},"end":{"line":265,"column":9}},"181":{"start":{"line":264,"column":12},"end":{"line":264,"column":46}},"182":{"start":{"line":266,"column":8},"end":{"line":268,"column":9}},"183":{"start":{"line":267,"column":12},"end":{"line":267,"column":46}},"184":{"start":{"line":272,"column":0},"end":{"line":272,"column":37}},"185":{"start":{"line":273,"column":0},"end":{"line":273,"column":41}},"186":{"start":{"line":274,"column":0},"end":{"line":274,"column":45}},"187":{"start":{"line":275,"column":0},"end":{"line":275,"column":35}},"188":{"start":{"line":276,"column":0},"end":{"line":276,"column":43}},"189":{"start":{"line":277,"column":0},"end":{"line":277,"column":57}},"190":{"start":{"line":278,"column":0},"end":{"line":278,"column":47}},"191":{"start":{"line":279,"column":0},"end":{"line":279,"column":51}},"192":{"start":{"line":280,"column":0},"end":{"line":280,"column":53}},"193":{"start":{"line":281,"column":0},"end":{"line":281,"column":45}},"194":{"start":{"line":283,"column":0},"end":{"line":283,"column":28}},"195":{"start":{"line":284,"column":0},"end":{"line":284,"column":36}},"196":{"start":{"line":285,"column":0},"end":{"line":285,"column":38}},"197":{"start":{"line":287,"column":0},"end":{"line":309,"column":3}},"198":{"start":{"line":289,"column":8},"end":{"line":294,"column":9}},"199":{"start":{"line":290,"column":12},"end":{"line":293,"column":24}},"200":{"start":{"line":295,"column":8},"end":{"line":295,"column":46}},"201":{"start":{"line":301,"column":8},"end":{"line":306,"column":9}},"202":{"start":{"line":302,"column":12},"end":{"line":305,"column":24}},"203":{"start":{"line":307,"column":8},"end":{"line":307,"column":46}},"204":{"start":{"line":311,"column":0},"end":{"line":311,"column":27}},"205":{"start":{"line":313,"column":0},"end":{"line":315,"column":2}},"206":{"start":{"line":314,"column":4},"end":{"line":314,"column":16}},"207":{"start":{"line":317,"column":0},"end":{"line":317,"column":50}},"208":{"start":{"line":318,"column":0},"end":{"line":321,"column":2}},"209":{"start":{"line":320,"column":4},"end":{"line":320,"column":80}},"210":{"start":{"line":323,"column":0},"end":{"line":323,"column":75}},"211":{"start":{"line":324,"column":0},"end":{"line":327,"column":2}},"212":{"start":{"line":326,"column":4},"end":{"line":326,"column":82}},"213":{"start":{"line":329,"column":0},"end":{"line":329,"column":79}},"214":{"start":{"line":330,"column":0},"end":{"line":333,"column":2}},"215":{"start":{"line":332,"column":4},"end":{"line":332,"column":82}},"216":{"start":{"line":335,"column":0},"end":{"line":335,"column":31}}},"branchMap":{"1":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":16},"end":{"line":34,"column":20}},{"start":{"line":34,"column":24},"end":{"line":34,"column":25}}]},"2":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":19},"end":{"line":35,"column":26}},{"start":{"line":35,"column":30},"end":{"line":35,"column":50}}]},"3":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":19},"end":{"line":37,"column":26}},{"start":{"line":37,"column":30},"end":{"line":37,"column":32}}]},"4":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"5":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":76,"column":8}},{"start":{"line":76,"column":8},"end":{"line":76,"column":8}}]},"6":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":8}},{"start":{"line":79,"column":8},"end":{"line":79,"column":8}}]},"7":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":8}},{"start":{"line":82,"column":8},"end":{"line":82,"column":8}}]},"8":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"9":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"10":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":102,"column":8}},{"start":{"line":102,"column":8},"end":{"line":102,"column":8}}]},"11":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"12":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":4},"end":{"line":121,"column":4}},{"start":{"line":121,"column":4},"end":{"line":121,"column":4}}]},"13":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"14":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"15":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"16":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":4},"end":{"line":144,"column":4}},{"start":{"line":144,"column":4},"end":{"line":144,"column":4}}]},"17":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":8},"end":{"line":145,"column":8}},{"start":{"line":145,"column":8},"end":{"line":145,"column":8}}]},"18":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":8},"end":{"line":148,"column":8}},{"start":{"line":148,"column":8},"end":{"line":148,"column":8}}]},"19":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":8}},{"start":{"line":151,"column":8},"end":{"line":151,"column":8}}]},"20":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"21":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"22":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":8},"end":{"line":171,"column":8}},{"start":{"line":171,"column":8},"end":{"line":171,"column":8}}]},"23":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":8}},{"start":{"line":174,"column":8},"end":{"line":174,"column":8}}]},"24":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":4},"end":{"line":190,"column":4}},{"start":{"line":190,"column":4},"end":{"line":190,"column":4}}]},"25":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"26":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]},"27":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"28":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":4},"end":{"line":213,"column":4}},{"start":{"line":213,"column":4},"end":{"line":213,"column":4}}]},"29":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":8},"end":{"line":214,"column":8}},{"start":{"line":214,"column":8},"end":{"line":214,"column":8}}]},"30":{"line":217,"type":"if","locations":[{"start":{"line":217,"column":8},"end":{"line":217,"column":8}},{"start":{"line":217,"column":8},"end":{"line":217,"column":8}}]},"31":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":8},"end":{"line":220,"column":8}},{"start":{"line":220,"column":8},"end":{"line":220,"column":8}}]},"32":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":4},"end":{"line":236,"column":4}},{"start":{"line":236,"column":4},"end":{"line":236,"column":4}}]},"33":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":8},"end":{"line":237,"column":8}},{"start":{"line":237,"column":8},"end":{"line":237,"column":8}}]},"34":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":240,"column":8}},{"start":{"line":240,"column":8},"end":{"line":240,"column":8}}]},"35":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":8},"end":{"line":243,"column":8}},{"start":{"line":243,"column":8},"end":{"line":243,"column":8}}]},"36":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":4},"end":{"line":259,"column":4}},{"start":{"line":259,"column":4},"end":{"line":259,"column":4}}]},"37":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":8},"end":{"line":260,"column":8}},{"start":{"line":260,"column":8},"end":{"line":260,"column":8}}]},"38":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":8},"end":{"line":263,"column":8}},{"start":{"line":263,"column":8},"end":{"line":263,"column":8}}]},"39":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":8},"end":{"line":266,"column":8}},{"start":{"line":266,"column":8},"end":{"line":266,"column":8}}]},"40":{"line":289,"type":"if","locations":[{"start":{"line":289,"column":8},"end":{"line":289,"column":8}},{"start":{"line":289,"column":8},"end":{"line":289,"column":8}}]},"41":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":8},"end":{"line":301,"column":8}},{"start":{"line":301,"column":8},"end":{"line":301,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","var Frame = require('./frame');","var Tracing = require('./tracing');","","var errors = require('../errors');","","// TODO: enforce message ID of this frame is Frame.NullId when","// errorBody.code.ProtocolError = ErrorResponse.Codes.ProtocolError","","// code:1 tracing:25 message~2","function ErrorResponse(code, tracing, message) {","    this.code = code || 0;","    this.tracing = tracing || Tracing.emptyTracing;","    this.type = ErrorResponse.TypeCode;","    this.message = message || '';","}","","ErrorResponse.TypeCode = 0xff;","","var Codes = Object.create(null);","// 0x00 not a valid value for \"code\", do not use.","Codes.Timeout = 0x01;","Codes.Cancelled = 0x02;","Codes.Busy = 0x03;","Codes.Declined = 0x04;","Codes.UnexpectedError = 0x05;","Codes.BadRequest = 0x06;","Codes.NetworkError = 0x07;","Codes.Unhealthy = 0x08;","Codes.ProtocolError = 0xff;","","var CodeNames = Object.create(null);","CodeNames[Codes.Timeout] = 'Timeout';","CodeNames[Codes.Cancelled] = 'Cancelled';","CodeNames[Codes.Busy] = 'Busy';","CodeNames[Codes.Declined] = 'Declined';","CodeNames[Codes.UnexpectedError] = 'UnexpectedError';","CodeNames[Codes.BadRequest] = 'BadRequest';","CodeNames[Codes.NetworkError] = 'NetworkError';","CodeNames[Codes.ProtocolError] = 'ProtocolError';","CodeNames[Codes.Unhealthy] = 'Unhealthy';","","function TimeoutError(opts) {","    this.name = 'TchannelTimeoutError';","    this.fullType = 'tchannel.timeout';","    this.type = 'tchannel.timeout';","    this.message = 'TChannel timeout';","    this.isErrorFrame = true;","    this.codeName = 'Timeout';","    this.errorCode = Codes.Timeout;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function CancelledError(opts) {","    this.name = 'TchannelCancelledError';","    this.fullType = 'tchannel.cancelled';","    this.type = 'tchannel.cancelled';","    this.message = 'TChannel cancelled';","    this.isErrorFrame = true;","    this.codeName = 'Cancelled';","    this.errorCode = Codes.Cancelled;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function BusyError(opts) {","    this.name = 'TchannelBusyError';","    this.fullType = 'tchannel.busy';","    this.type = 'tchannel.busy';","    this.message = 'TChannel busy';","    this.isErrorFrame = true;","    this.codeName = 'Busy';","    this.errorCode = Codes.Busy;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function DeclinedError(opts) {","    this.name = 'TchannelDeclinedError';","    this.fullType = 'tchannel.declined';","    this.type = 'tchannel.declined';","    this.message = 'TChannel declined';","    this.isErrorFrame = true;","    this.codeName = 'Declined';","    this.errorCode = Codes.Declined;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function UnexpectedErrorError(opts) {","    this.name = 'TchannelUnexpectedError';","    this.fullType = 'tchannel.unexpected';","    this.type = 'tchannel.unexpected';","    this.message = 'TChannel unexpected error';","    this.isErrorFrame = true;","    this.codeName = 'UnexpectedError';","    this.errorCode = Codes.UnexpectedError;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function BadRequestError(opts) {","    this.name = 'TchannelBadRequestError';","    this.fullType = 'tchannel.bad-request';","    this.type = 'tchannel.bad-request';","    this.message = 'TChannel BadRequest';","    this.isErrorFrame = true;","    this.codeName = 'BadRequest';","    this.errorCode = Codes.BadRequest;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function NetworkErrorError(opts) {","    this.name = 'TchannelNetworkError';","    this.fullType = 'tchannel.network';","    this.type = 'tchannel.network';","    this.message = 'TChannel network error';","    this.isErrorFrame = true;","    this.codeName = 'NetworkError';","    this.errorCode = Codes.NetworkError;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function ProtocolErrorError(opts) {","    this.name = 'TchannelProtocolError';","    this.fullType = 'tchannel.protocol';","    this.type = 'tchannel.protocol';","    this.message = 'TChannel protocol error';","    this.isErrorFrame = true;","    this.codeName = 'ProtocolError';","    this.errorCode = Codes.ProtocolError;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","function UnhealthyError(opts) {","    this.name = 'TchannelUnhealthyError';","    this.fullType = 'tchannel.unhealthy';","    this.type = 'tchannel.unhealthy';","    this.message = 'TChannel unhealthy';","    this.isErrorFrame = true;","    this.codeName = 'Unhealthy';","    this.errorCode = Codes.Unhealthy;","    this.originalId = null;","    this.remoteAddr = null;","    if (opts) {","        if (opts.message !== undefined) {","            this.message = opts.message;","        }","        if (opts.originalId !== undefined) {","            this.originalId = opts.originalId;","        }","        if (opts.remoteAddr !== undefined) {","            this.remoteAddr = opts.remoteAddr;","        }","    }","}","","var CodeErrors = Object.create(null);","CodeErrors[Codes.Timeout] = TimeoutError;","CodeErrors[Codes.Cancelled] = CancelledError;","CodeErrors[Codes.Busy] = BusyError;","CodeErrors[Codes.Declined] = DeclinedError;","CodeErrors[Codes.UnexpectedError] = UnexpectedErrorError;","CodeErrors[Codes.BadRequest] = BadRequestError;","CodeErrors[Codes.NetworkError] = NetworkErrorError;","CodeErrors[Codes.ProtocolError] = ProtocolErrorError;","CodeErrors[Codes.Unhealthy] = UnhealthyError;","","ErrorResponse.Codes = Codes;","ErrorResponse.CodeNames = CodeNames;","ErrorResponse.CodeErrors = CodeErrors;","","ErrorResponse.RW = bufrw.Struct(ErrorResponse, [","    {call: {poolWriteInto: function writeGuard(destResult, body, buffer, offset) {","        if (CodeNames[body.code] === undefined) {","            return destResult.reset(errors.InvalidErrorCodeError({","                errorCode: body.code,","                tracing: body.tracing","            }), offset);","        }","        return destResult.reset(null, offset);","    }}},","    {name: 'code', rw: bufrw.UInt8},    // code:1","    {name: 'tracing', rw: Tracing.RW},  // tracing:25","    {name: 'message', rw: bufrw.str2},  // message~2","    {call: {poolWriteInto: function writeGuard(destResult, body, buffer, offset) {","        if (CodeNames[body.code] === undefined) {","            destResult.reset(errors.InvalidErrorCodeError({","                errorCode: body.code,","                tracing: body.tracing","            }), offset);","        }","        return destResult.reset(null, offset);","    }}}","]);","","ErrorResponse.RW.lazy = {};","","ErrorResponse.RW.lazy.isFrameTerminal = function isFrameTerminal() {","    return true;","};","","ErrorResponse.RW.lazy.codeOffset = Frame.Overhead;","ErrorResponse.RW.lazy.readCode = function readCode(frame) {","    // code:1","    return bufrw.UInt8.readFrom(frame.buffer, ErrorResponse.RW.lazy.codeOffset);","};","","ErrorResponse.RW.lazy.tracingOffset = ErrorResponse.RW.lazy.codeOffset + 1;","ErrorResponse.RW.lazy.readTracing = function readTracing(frame) {","    // tracing:25","    return Tracing.RW.readFrom(frame.buffer, ErrorResponse.RW.lazy.tracingOffset);","};","","ErrorResponse.RW.lazy.mesasgeOffset = ErrorResponse.RW.lazy.tracingOffset + 25;","ErrorResponse.RW.lazy.readMessage = function readMessage(frame) {","    // mesasge~2","    return bufrw.str2.readFrom(frame.buffer, ErrorResponse.RW.lazy.mesasgeOffset);","};","","module.exports = ErrorResponse;",""],"l":{"23":1,"24":1,"25":1,"27":1,"33":1,"34":0,"35":0,"36":0,"37":0,"40":1,"42":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"79":0,"80":0,"82":0,"83":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"102":0,"103":0,"105":0,"106":0,"111":1,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"125":0,"126":0,"128":0,"129":0,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"148":0,"149":0,"151":0,"152":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"171":0,"172":0,"174":0,"175":0,"180":1,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"194":0,"195":0,"197":0,"198":0,"203":1,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"217":0,"218":0,"220":0,"221":0,"226":1,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"240":0,"241":0,"243":0,"244":0,"249":1,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"263":0,"264":0,"266":0,"267":0,"272":1,"273":1,"274":1,"275":1,"276":1,"277":1,"278":1,"279":1,"280":1,"281":1,"283":1,"284":1,"285":1,"287":1,"289":0,"290":0,"295":0,"301":0,"302":0,"307":0,"311":1,"313":1,"314":0,"317":1,"318":1,"320":0,"323":1,"324":1,"326":0,"329":1,"330":1,"332":0,"335":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/handler.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":1,"62":0,"63":1,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":1,"76":0,"77":1,"78":0,"79":0,"80":0,"81":1,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1,"96":0,"97":0,"98":1,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":1,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":1,"161":0,"162":0,"163":0,"164":1,"165":0,"166":0,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":1,"181":0,"182":0,"183":0,"184":1,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":1,"201":0,"202":1,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":1,"226":0,"227":1,"228":0,"229":0,"230":1,"231":0,"232":1,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":1,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":1,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":1,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":1,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":1,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":1,"290":0,"291":0,"292":0,"293":1,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":1,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":1,"314":0,"315":0,"316":0,"317":0,"318":0,"319":1,"320":0,"321":0,"322":0,"323":0,"324":0,"325":1,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":1,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":0,"353":1,"354":0,"355":0,"356":0,"357":1,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":1,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":1,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":1,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":1,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":1,"409":0,"410":0,"411":1,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":1,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0,0,0,0,0,0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0,0],"24":[0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0],"32":[0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0},"fnMap":{"1":{"name":"TChannelV2Handler","line":58,"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":36}}},"2":{"name":"onReqError","line":97,"loc":{"start":{"line":97,"column":4},"end":{"line":97,"column":34}}},"3":{"name":"onResError","line":101,"loc":{"start":{"line":101,"column":4},"end":{"line":101,"column":34}}},"4":{"name":"extendLogInfo","line":108,"loc":{"start":{"line":108,"column":48},"end":{"line":108,"column":77}}},"5":{"name":"extendLogInfo","line":117,"loc":{"start":{"line":117,"column":44},"end":{"line":117,"column":73}}},"6":{"name":"write","line":126,"loc":{"start":{"line":126,"column":36},"end":{"line":126,"column":53}}},"7":{"name":"writeCopy","line":130,"loc":{"start":{"line":130,"column":40},"end":{"line":130,"column":79}}},"8":{"name":"pushFrame","line":138,"loc":{"start":{"line":138,"column":40},"end":{"line":138,"column":66}}},"9":{"name":"nextFrameId","line":155,"loc":{"start":{"line":155,"column":42},"end":{"line":155,"column":65}}},"10":{"name":"useLazyFrames","line":160,"loc":{"start":{"line":160,"column":44},"end":{"line":160,"column":76}}},"11":{"name":"handleLazyFrame","line":168,"loc":{"start":{"line":168,"column":46},"end":{"line":168,"column":78}}},"12":{"name":"handleEagerFrame","line":203,"loc":{"start":{"line":203,"column":47},"end":{"line":203,"column":80}}},"13":{"name":"handleInitRequest","line":235,"loc":{"start":{"line":235,"column":48},"end":{"line":235,"column":85}}},"14":{"name":"handleInitResponse","line":261,"loc":{"start":{"line":261,"column":49},"end":{"line":261,"column":87}}},"15":{"name":"handleCallRequest","line":277,"loc":{"start":{"line":277,"column":48},"end":{"line":277,"column":85}}},"16":{"name":"emitBytesRecvd","line":311,"loc":{"start":{"line":311,"column":0},"end":{"line":311,"column":31}}},"17":{"name":"checkCallResFrame","line":326,"loc":{"start":{"line":326,"column":48},"end":{"line":326,"column":85}}},"18":{"name":"checkCallReqFrame","line":346,"loc":{"start":{"line":346,"column":48},"end":{"line":346,"column":85}}},"19":{"name":"checkCallFrameArgs","line":381,"loc":{"start":{"line":381,"column":49},"end":{"line":381,"column":84}}},"20":{"name":"handleCallResponse","line":395,"loc":{"start":{"line":395,"column":49},"end":{"line":395,"column":87}}},"21":{"name":"handleCancel","line":433,"loc":{"start":{"line":433,"column":43},"end":{"line":433,"column":72}}},"22":{"name":"handleCallRequestCont","line":437,"loc":{"start":{"line":437,"column":52},"end":{"line":437,"column":103}}},"23":{"name":"handleCallResponseCont","line":472,"loc":{"start":{"line":472,"column":53},"end":{"line":472,"column":95}}},"24":{"name":"handleClaim","line":504,"loc":{"start":{"line":504,"column":42},"end":{"line":504,"column":70}}},"25":{"name":"handlePingRequest","line":508,"loc":{"start":{"line":508,"column":48},"end":{"line":508,"column":86}}},"26":{"name":"handlePingResponse","line":513,"loc":{"start":{"line":513,"column":49},"end":{"line":513,"column":88}}},"27":{"name":"handleError","line":517,"loc":{"start":{"line":517,"column":42},"end":{"line":517,"column":83}}},"28":{"name":"_checkCallFrame","line":529,"loc":{"start":{"line":529,"column":46},"end":{"line":529,"column":81}}},"29":{"name":"_handleCallFrame","line":554,"loc":{"start":{"line":554,"column":47},"end":{"line":554,"column":98}}},"30":{"name":"sendInitRequest","line":584,"loc":{"start":{"line":584,"column":46},"end":{"line":584,"column":73}}},"31":{"name":"sendInitResponse","line":601,"loc":{"start":{"line":601,"column":47},"end":{"line":601,"column":83}}},"32":{"name":"sendCallRequestFrame","line":619,"loc":{"start":{"line":619,"column":0},"end":{"line":619,"column":48}}},"33":{"name":"emitBytesSent","line":646,"loc":{"start":{"line":646,"column":0},"end":{"line":646,"column":29}}},"34":{"name":"verifyCallRequestFrame","line":662,"loc":{"start":{"line":662,"column":0},"end":{"line":662,"column":43}}},"35":{"name":"sendCallResponseFrame","line":685,"loc":{"start":{"line":685,"column":0},"end":{"line":685,"column":49}}},"36":{"name":"validateCallResponseFrame","line":710,"loc":{"start":{"line":710,"column":0},"end":{"line":710,"column":40}}},"37":{"name":"sendCallRequestContFrame","line":723,"loc":{"start":{"line":723,"column":55},"end":{"line":723,"column":107}}},"38":{"name":"sendCallResponseContFrame","line":739,"loc":{"start":{"line":739,"column":56},"end":{"line":739,"column":109}}},"39":{"name":"sendCallBodies","line":757,"loc":{"start":{"line":757,"column":0},"end":{"line":757,"column":60}}},"40":{"name":"sendPingRequest","line":783,"loc":{"start":{"line":783,"column":46},"end":{"line":783,"column":73}}},"41":{"name":"sendPingReponse","line":791,"loc":{"start":{"line":791,"column":46},"end":{"line":791,"column":76}}},"42":{"name":"sendErrorFrame","line":797,"loc":{"start":{"line":797,"column":45},"end":{"line":797,"column":103}}},"43":{"name":"buildOutRequest","line":811,"loc":{"start":{"line":811,"column":46},"end":{"line":811,"column":80}}},"44":{"name":"buildOutResponse","line":831,"loc":{"start":{"line":831,"column":47},"end":{"line":831,"column":87}}},"45":{"name":"buildInRequest","line":853,"loc":{"start":{"line":853,"column":45},"end":{"line":853,"column":79}}},"46":{"name":"onReqError","line":880,"loc":{"start":{"line":880,"column":41},"end":{"line":880,"column":71}}},"47":{"name":"onResError","line":895,"loc":{"start":{"line":895,"column":41},"end":{"line":895,"column":71}}},"48":{"name":"buildInResponse","line":901,"loc":{"start":{"line":901,"column":46},"end":{"line":901,"column":81}}},"49":{"name":"InRequestOptions","line":925,"loc":{"start":{"line":925,"column":0},"end":{"line":928,"column":2}}}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":26,"column":51}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":38}},"4":{"start":{"line":29,"column":0},"end":{"line":29,"column":27}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":31}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":33}},"7":{"start":{"line":33,"column":0},"end":{"line":33,"column":42}},"8":{"start":{"line":34,"column":0},"end":{"line":34,"column":53}},"9":{"start":{"line":35,"column":0},"end":{"line":35,"column":56}},"10":{"start":{"line":36,"column":0},"end":{"line":36,"column":71}},"11":{"start":{"line":37,"column":0},"end":{"line":37,"column":74}},"12":{"start":{"line":38,"column":0},"end":{"line":38,"column":41}},"13":{"start":{"line":39,"column":0},"end":{"line":39,"column":43}},"14":{"start":{"line":40,"column":0},"end":{"line":40,"column":41}},"15":{"start":{"line":41,"column":0},"end":{"line":41,"column":60}},"16":{"start":{"line":42,"column":0},"end":{"line":42,"column":62}},"17":{"start":{"line":44,"column":0},"end":{"line":44,"column":47}},"18":{"start":{"line":46,"column":0},"end":{"line":46,"column":28}},"19":{"start":{"line":47,"column":0},"end":{"line":47,"column":34}},"20":{"start":{"line":49,"column":0},"end":{"line":49,"column":31}},"21":{"start":{"line":50,"column":0},"end":{"line":50,"column":57}},"22":{"start":{"line":51,"column":0},"end":{"line":51,"column":58}},"23":{"start":{"line":53,"column":0},"end":{"line":53,"column":33}},"24":{"start":{"line":54,"column":0},"end":{"line":54,"column":55}},"25":{"start":{"line":56,"column":0},"end":{"line":56,"column":35}},"26":{"start":{"line":58,"column":0},"end":{"line":104,"column":1}},"27":{"start":{"line":59,"column":4},"end":{"line":59,"column":28}},"28":{"start":{"line":60,"column":4},"end":{"line":60,"column":48}},"29":{"start":{"line":61,"column":4},"end":{"line":61,"column":58}},"30":{"start":{"line":62,"column":4},"end":{"line":62,"column":82}},"31":{"start":{"line":63,"column":4},"end":{"line":63,"column":76}},"32":{"start":{"line":64,"column":4},"end":{"line":64,"column":78}},"33":{"start":{"line":65,"column":4},"end":{"line":65,"column":50}},"34":{"start":{"line":66,"column":4},"end":{"line":66,"column":60}},"35":{"start":{"line":67,"column":4},"end":{"line":67,"column":62}},"36":{"start":{"line":68,"column":4},"end":{"line":68,"column":48}},"37":{"start":{"line":69,"column":4},"end":{"line":69,"column":76}},"38":{"start":{"line":70,"column":4},"end":{"line":70,"column":78}},"39":{"start":{"line":71,"column":4},"end":{"line":71,"column":58}},"40":{"start":{"line":73,"column":4},"end":{"line":73,"column":33}},"41":{"start":{"line":74,"column":4},"end":{"line":74,"column":38}},"42":{"start":{"line":75,"column":4},"end":{"line":75,"column":38}},"43":{"start":{"line":76,"column":4},"end":{"line":76,"column":38}},"44":{"start":{"line":77,"column":4},"end":{"line":77,"column":38}},"45":{"start":{"line":78,"column":4},"end":{"line":78,"column":42}},"46":{"start":{"line":79,"column":4},"end":{"line":79,"column":48}},"47":{"start":{"line":80,"column":4},"end":{"line":80,"column":46}},"48":{"start":{"line":81,"column":4},"end":{"line":81,"column":27}},"49":{"start":{"line":82,"column":4},"end":{"line":82,"column":29}},"50":{"start":{"line":84,"column":4},"end":{"line":84,"column":44}},"51":{"start":{"line":85,"column":4},"end":{"line":85,"column":44}},"52":{"start":{"line":87,"column":4},"end":{"line":87,"column":66}},"53":{"start":{"line":88,"column":4},"end":{"line":88,"column":45}},"54":{"start":{"line":90,"column":4},"end":{"line":90,"column":69}},"55":{"start":{"line":91,"column":4},"end":{"line":91,"column":69}},"56":{"start":{"line":93,"column":4},"end":{"line":93,"column":20}},"57":{"start":{"line":94,"column":4},"end":{"line":94,"column":38}},"58":{"start":{"line":95,"column":4},"end":{"line":95,"column":38}},"59":{"start":{"line":97,"column":4},"end":{"line":99,"column":5}},"60":{"start":{"line":98,"column":8},"end":{"line":98,"column":34}},"61":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"62":{"start":{"line":102,"column":8},"end":{"line":102,"column":34}},"63":{"start":{"line":106,"column":0},"end":{"line":106,"column":47}},"64":{"start":{"line":108,"column":0},"end":{"line":115,"column":2}},"65":{"start":{"line":109,"column":4},"end":{"line":109,"column":55}},"66":{"start":{"line":110,"column":4},"end":{"line":110,"column":67}},"67":{"start":{"line":111,"column":4},"end":{"line":111,"column":54}},"68":{"start":{"line":112,"column":4},"end":{"line":112,"column":43}},"69":{"start":{"line":113,"column":4},"end":{"line":113,"column":43}},"70":{"start":{"line":114,"column":4},"end":{"line":114,"column":16}},"71":{"start":{"line":117,"column":0},"end":{"line":124,"column":2}},"72":{"start":{"line":118,"column":4},"end":{"line":118,"column":40}},"73":{"start":{"line":121,"column":4},"end":{"line":121,"column":47}},"74":{"start":{"line":123,"column":4},"end":{"line":123,"column":16}},"75":{"start":{"line":126,"column":0},"end":{"line":128,"column":2}},"76":{"start":{"line":127,"column":4},"end":{"line":127,"column":67}},"77":{"start":{"line":130,"column":0},"end":{"line":135,"column":2}},"78":{"start":{"line":132,"column":4},"end":{"line":132,"column":39}},"79":{"start":{"line":133,"column":4},"end":{"line":133,"column":37}},"80":{"start":{"line":134,"column":4},"end":{"line":134,"column":21}},"81":{"start":{"line":137,"column":0},"end":{"line":137,"column":33}},"82":{"start":{"line":138,"column":0},"end":{"line":153,"column":2}},"83":{"start":{"line":139,"column":4},"end":{"line":139,"column":42}},"84":{"start":{"line":140,"column":4},"end":{"line":140,"column":73}},"85":{"start":{"line":141,"column":4},"end":{"line":141,"column":22}},"86":{"start":{"line":142,"column":4},"end":{"line":152,"column":5}},"87":{"start":{"line":143,"column":8},"end":{"line":147,"column":9}},"88":{"start":{"line":144,"column":12},"end":{"line":144,"column":49}},"89":{"start":{"line":145,"column":12},"end":{"line":145,"column":56}},"90":{"start":{"line":146,"column":12},"end":{"line":146,"column":33}},"91":{"start":{"line":148,"column":8},"end":{"line":148,"column":68}},"92":{"start":{"line":148,"column":44},"end":{"line":148,"column":68}},"93":{"start":{"line":149,"column":8},"end":{"line":149,"column":45}},"94":{"start":{"line":151,"column":8},"end":{"line":151,"column":51}},"95":{"start":{"line":155,"column":0},"end":{"line":158,"column":2}},"96":{"start":{"line":156,"column":4},"end":{"line":156,"column":71}},"97":{"start":{"line":157,"column":4},"end":{"line":157,"column":32}},"98":{"start":{"line":160,"column":0},"end":{"line":166,"column":2}},"99":{"start":{"line":161,"column":4},"end":{"line":165,"column":5}},"100":{"start":{"line":162,"column":8},"end":{"line":162,"column":48}},"101":{"start":{"line":164,"column":8},"end":{"line":164,"column":49}},"102":{"start":{"line":168,"column":0},"end":{"line":200,"column":2}},"103":{"start":{"line":169,"column":4},"end":{"line":169,"column":29}},"104":{"start":{"line":171,"column":4},"end":{"line":191,"column":5}},"105":{"start":{"line":185,"column":12},"end":{"line":187,"column":13}},"106":{"start":{"line":186,"column":16},"end":{"line":186,"column":23}},"107":{"start":{"line":188,"column":12},"end":{"line":188,"column":18}},"108":{"start":{"line":190,"column":12},"end":{"line":190,"column":18}},"109":{"start":{"line":193,"column":4},"end":{"line":193,"column":31}},"110":{"start":{"line":194,"column":4},"end":{"line":197,"column":5}},"111":{"start":{"line":195,"column":8},"end":{"line":195,"column":44}},"112":{"start":{"line":196,"column":8},"end":{"line":196,"column":15}},"113":{"start":{"line":199,"column":4},"end":{"line":199,"column":33}},"114":{"start":{"line":203,"column":0},"end":{"line":232,"column":2}},"115":{"start":{"line":204,"column":4},"end":{"line":231,"column":5}},"116":{"start":{"line":206,"column":12},"end":{"line":206,"column":49}},"117":{"start":{"line":208,"column":12},"end":{"line":208,"column":50}},"118":{"start":{"line":210,"column":12},"end":{"line":210,"column":49}},"119":{"start":{"line":212,"column":12},"end":{"line":212,"column":50}},"120":{"start":{"line":214,"column":12},"end":{"line":214,"column":44}},"121":{"start":{"line":216,"column":12},"end":{"line":216,"column":53}},"122":{"start":{"line":218,"column":12},"end":{"line":218,"column":54}},"123":{"start":{"line":220,"column":12},"end":{"line":220,"column":43}},"124":{"start":{"line":222,"column":12},"end":{"line":222,"column":49}},"125":{"start":{"line":224,"column":12},"end":{"line":224,"column":50}},"126":{"start":{"line":226,"column":12},"end":{"line":226,"column":43}},"127":{"start":{"line":228,"column":12},"end":{"line":230,"column":16}},"128":{"start":{"line":235,"column":0},"end":{"line":259,"column":2}},"129":{"start":{"line":236,"column":4},"end":{"line":238,"column":5}},"130":{"start":{"line":237,"column":8},"end":{"line":237,"column":78}},"131":{"start":{"line":239,"column":4},"end":{"line":239,"column":40}},"132":{"start":{"line":240,"column":4},"end":{"line":246,"column":6}},"133":{"start":{"line":248,"column":4},"end":{"line":248,"column":64}},"134":{"start":{"line":249,"column":4},"end":{"line":254,"column":5}},"135":{"start":{"line":250,"column":8},"end":{"line":253,"column":12}},"136":{"start":{"line":256,"column":4},"end":{"line":256,"column":36}},"137":{"start":{"line":257,"column":4},"end":{"line":257,"column":36}},"138":{"start":{"line":258,"column":4},"end":{"line":258,"column":43}},"139":{"start":{"line":261,"column":0},"end":{"line":275,"column":2}},"140":{"start":{"line":262,"column":4},"end":{"line":264,"column":5}},"141":{"start":{"line":263,"column":8},"end":{"line":263,"column":79}},"142":{"start":{"line":265,"column":4},"end":{"line":265,"column":40}},"143":{"start":{"line":266,"column":4},"end":{"line":272,"column":6}},"144":{"start":{"line":273,"column":4},"end":{"line":273,"column":36}},"145":{"start":{"line":274,"column":4},"end":{"line":274,"column":44}},"146":{"start":{"line":277,"column":0},"end":{"line":308,"column":2}},"147":{"start":{"line":278,"column":4},"end":{"line":281,"column":5}},"148":{"start":{"line":279,"column":8},"end":{"line":279,"column":71}},"149":{"start":{"line":280,"column":8},"end":{"line":280,"column":15}},"150":{"start":{"line":283,"column":4},"end":{"line":283,"column":44}},"151":{"start":{"line":285,"column":4},"end":{"line":285,"column":47}},"152":{"start":{"line":286,"column":4},"end":{"line":289,"column":5}},"153":{"start":{"line":287,"column":8},"end":{"line":287,"column":38}},"154":{"start":{"line":288,"column":8},"end":{"line":288,"column":15}},"155":{"start":{"line":291,"column":4},"end":{"line":293,"column":5}},"156":{"start":{"line":292,"column":8},"end":{"line":292,"column":54}},"157":{"start":{"line":295,"column":4},"end":{"line":295,"column":42}},"158":{"start":{"line":296,"column":4},"end":{"line":305,"column":6}},"159":{"start":{"line":307,"column":4},"end":{"line":307,"column":34}},"160":{"start":{"line":310,"column":0},"end":{"line":324,"column":2}},"161":{"start":{"line":312,"column":4},"end":{"line":312,"column":42}},"162":{"start":{"line":313,"column":4},"end":{"line":323,"column":5}},"163":{"start":{"line":314,"column":8},"end":{"line":322,"column":10}},"164":{"start":{"line":326,"column":0},"end":{"line":344,"column":2}},"165":{"start":{"line":327,"column":4},"end":{"line":341,"column":5}},"166":{"start":{"line":331,"column":8},"end":{"line":340,"column":9}},"167":{"start":{"line":332,"column":12},"end":{"line":334,"column":15}},"168":{"start":{"line":336,"column":12},"end":{"line":339,"column":16}},"169":{"start":{"line":343,"column":4},"end":{"line":343,"column":45}},"170":{"start":{"line":346,"column":0},"end":{"line":379,"column":2}},"171":{"start":{"line":347,"column":4},"end":{"line":362,"column":5}},"172":{"start":{"line":351,"column":8},"end":{"line":361,"column":9}},"173":{"start":{"line":352,"column":12},"end":{"line":354,"column":15}},"174":{"start":{"line":356,"column":12},"end":{"line":360,"column":16}},"175":{"start":{"line":364,"column":4},"end":{"line":376,"column":5}},"176":{"start":{"line":368,"column":8},"end":{"line":375,"column":9}},"177":{"start":{"line":369,"column":12},"end":{"line":369,"column":47}},"178":{"start":{"line":371,"column":12},"end":{"line":374,"column":16}},"179":{"start":{"line":378,"column":4},"end":{"line":378,"column":45}},"180":{"start":{"line":381,"column":0},"end":{"line":393,"column":2}},"181":{"start":{"line":382,"column":4},"end":{"line":390,"column":5}},"182":{"start":{"line":386,"column":8},"end":{"line":389,"column":11}},"183":{"start":{"line":392,"column":4},"end":{"line":392,"column":16}},"184":{"start":{"line":395,"column":0},"end":{"line":430,"column":2}},"185":{"start":{"line":396,"column":4},"end":{"line":399,"column":5}},"186":{"start":{"line":397,"column":8},"end":{"line":397,"column":71}},"187":{"start":{"line":398,"column":8},"end":{"line":398,"column":15}},"188":{"start":{"line":401,"column":4},"end":{"line":401,"column":45}},"189":{"start":{"line":403,"column":4},"end":{"line":403,"column":47}},"190":{"start":{"line":404,"column":4},"end":{"line":407,"column":5}},"191":{"start":{"line":405,"column":8},"end":{"line":405,"column":38}},"192":{"start":{"line":406,"column":8},"end":{"line":406,"column":15}},"193":{"start":{"line":409,"column":4},"end":{"line":409,"column":52}},"194":{"start":{"line":411,"column":4},"end":{"line":411,"column":42}},"195":{"start":{"line":413,"column":4},"end":{"line":422,"column":6}},"196":{"start":{"line":424,"column":4},"end":{"line":424,"column":34}},"197":{"start":{"line":426,"column":4},"end":{"line":426,"column":37}},"198":{"start":{"line":427,"column":4},"end":{"line":429,"column":5}},"199":{"start":{"line":428,"column":8},"end":{"line":428,"column":55}},"200":{"start":{"line":433,"column":0},"end":{"line":435,"column":2}},"201":{"start":{"line":434,"column":4},"end":{"line":434,"column":39}},"202":{"start":{"line":437,"column":0},"end":{"line":470,"column":2}},"203":{"start":{"line":438,"column":4},"end":{"line":440,"column":5}},"204":{"start":{"line":439,"column":8},"end":{"line":439,"column":82}},"205":{"start":{"line":441,"column":4},"end":{"line":441,"column":25}},"206":{"start":{"line":442,"column":4},"end":{"line":442,"column":36}},"207":{"start":{"line":443,"column":4},"end":{"line":453,"column":5}},"208":{"start":{"line":450,"column":8},"end":{"line":452,"column":12}},"209":{"start":{"line":455,"column":4},"end":{"line":455,"column":60}},"210":{"start":{"line":457,"column":4},"end":{"line":457,"column":42}},"211":{"start":{"line":458,"column":4},"end":{"line":467,"column":6}},"212":{"start":{"line":469,"column":4},"end":{"line":469,"column":34}},"213":{"start":{"line":472,"column":0},"end":{"line":502,"column":2}},"214":{"start":{"line":473,"column":4},"end":{"line":475,"column":5}},"215":{"start":{"line":474,"column":8},"end":{"line":474,"column":82}},"216":{"start":{"line":476,"column":4},"end":{"line":476,"column":25}},"217":{"start":{"line":477,"column":4},"end":{"line":477,"column":36}},"218":{"start":{"line":478,"column":4},"end":{"line":483,"column":5}},"219":{"start":{"line":480,"column":8},"end":{"line":482,"column":12}},"220":{"start":{"line":485,"column":4},"end":{"line":485,"column":52}},"221":{"start":{"line":486,"column":4},"end":{"line":486,"column":42}},"222":{"start":{"line":488,"column":4},"end":{"line":497,"column":6}},"223":{"start":{"line":499,"column":4},"end":{"line":499,"column":34}},"224":{"start":{"line":501,"column":4},"end":{"line":501,"column":60}},"225":{"start":{"line":504,"column":0},"end":{"line":506,"column":2}},"226":{"start":{"line":505,"column":4},"end":{"line":505,"column":38}},"227":{"start":{"line":508,"column":0},"end":{"line":511,"column":2}},"228":{"start":{"line":509,"column":4},"end":{"line":509,"column":56}},"229":{"start":{"line":510,"column":4},"end":{"line":510,"column":36}},"230":{"start":{"line":513,"column":0},"end":{"line":515,"column":2}},"231":{"start":{"line":514,"column":4},"end":{"line":514,"column":57}},"232":{"start":{"line":517,"column":0},"end":{"line":527,"column":2}},"233":{"start":{"line":518,"column":4},"end":{"line":522,"column":5}},"234":{"start":{"line":520,"column":8},"end":{"line":520,"column":50}},"235":{"start":{"line":521,"column":8},"end":{"line":521,"column":15}},"236":{"start":{"line":524,"column":4},"end":{"line":524,"column":42}},"237":{"start":{"line":525,"column":4},"end":{"line":525,"column":42}},"238":{"start":{"line":526,"column":4},"end":{"line":526,"column":58}},"239":{"start":{"line":529,"column":0},"end":{"line":552,"column":2}},"240":{"start":{"line":531,"column":4},"end":{"line":541,"column":5}},"241":{"start":{"line":532,"column":8},"end":{"line":535,"column":11}},"242":{"start":{"line":536,"column":11},"end":{"line":541,"column":5}},"243":{"start":{"line":537,"column":8},"end":{"line":540,"column":11}},"244":{"start":{"line":543,"column":4},"end":{"line":543,"column":30}},"245":{"start":{"line":544,"column":4},"end":{"line":549,"column":5}},"246":{"start":{"line":545,"column":8},"end":{"line":548,"column":11}},"247":{"start":{"line":551,"column":4},"end":{"line":551,"column":51}},"248":{"start":{"line":554,"column":0},"end":{"line":582,"column":2}},"249":{"start":{"line":555,"column":4},"end":{"line":555,"column":22}},"250":{"start":{"line":556,"column":4},"end":{"line":556,"column":45}},"251":{"start":{"line":558,"column":4},"end":{"line":564,"column":5}},"252":{"start":{"line":561,"column":8},"end":{"line":561,"column":61}},"253":{"start":{"line":562,"column":8},"end":{"line":562,"column":37}},"254":{"start":{"line":563,"column":8},"end":{"line":563,"column":53}},"255":{"start":{"line":566,"column":4},"end":{"line":571,"column":5}},"256":{"start":{"line":568,"column":8},"end":{"line":568,"column":34}},"257":{"start":{"line":569,"column":8},"end":{"line":569,"column":35}},"258":{"start":{"line":570,"column":8},"end":{"line":570,"column":21}},"259":{"start":{"line":573,"column":4},"end":{"line":579,"column":5}},"260":{"start":{"line":574,"column":8},"end":{"line":574,"column":35}},"261":{"start":{"line":575,"column":11},"end":{"line":579,"column":5}},"262":{"start":{"line":576,"column":8},"end":{"line":576,"column":32}},"263":{"start":{"line":578,"column":8},"end":{"line":578,"column":42}},"264":{"start":{"line":581,"column":4},"end":{"line":581,"column":16}},"265":{"start":{"line":584,"column":0},"end":{"line":599,"column":2}},"266":{"start":{"line":585,"column":4},"end":{"line":585,"column":32}},"267":{"start":{"line":586,"column":4},"end":{"line":586,"column":48}},"268":{"start":{"line":587,"column":4},"end":{"line":587,"column":39}},"269":{"start":{"line":589,"column":4},"end":{"line":595,"column":7}},"270":{"start":{"line":597,"column":4},"end":{"line":597,"column":42}},"271":{"start":{"line":598,"column":4},"end":{"line":598,"column":29}},"272":{"start":{"line":601,"column":0},"end":{"line":616,"column":2}},"273":{"start":{"line":602,"column":4},"end":{"line":602,"column":25}},"274":{"start":{"line":603,"column":4},"end":{"line":603,"column":33}},"275":{"start":{"line":604,"column":4},"end":{"line":604,"column":39}},"276":{"start":{"line":606,"column":4},"end":{"line":612,"column":7}},"277":{"start":{"line":614,"column":4},"end":{"line":614,"column":42}},"278":{"start":{"line":615,"column":4},"end":{"line":615,"column":29}},"279":{"start":{"line":618,"column":0},"end":{"line":643,"column":2}},"280":{"start":{"line":620,"column":4},"end":{"line":623,"column":5}},"281":{"start":{"line":621,"column":8},"end":{"line":621,"column":78}},"282":{"start":{"line":622,"column":8},"end":{"line":622,"column":20}},"283":{"start":{"line":625,"column":4},"end":{"line":625,"column":53}},"284":{"start":{"line":626,"column":4},"end":{"line":628,"column":5}},"285":{"start":{"line":627,"column":8},"end":{"line":627,"column":19}},"286":{"start":{"line":630,"column":4},"end":{"line":633,"column":6}},"287":{"start":{"line":634,"column":4},"end":{"line":640,"column":11}},"288":{"start":{"line":642,"column":4},"end":{"line":642,"column":16}},"289":{"start":{"line":645,"column":0},"end":{"line":659,"column":2}},"290":{"start":{"line":647,"column":4},"end":{"line":647,"column":42}},"291":{"start":{"line":648,"column":4},"end":{"line":658,"column":5}},"292":{"start":{"line":649,"column":8},"end":{"line":657,"column":10}},"293":{"start":{"line":661,"column":0},"end":{"line":682,"column":2}},"294":{"start":{"line":663,"column":4},"end":{"line":670,"column":5}},"295":{"start":{"line":664,"column":8},"end":{"line":669,"column":9}},"296":{"start":{"line":665,"column":12},"end":{"line":665,"column":48}},"297":{"start":{"line":667,"column":12},"end":{"line":668,"column":17}},"298":{"start":{"line":672,"column":4},"end":{"line":679,"column":5}},"299":{"start":{"line":673,"column":8},"end":{"line":678,"column":9}},"300":{"start":{"line":674,"column":12},"end":{"line":674,"column":48}},"301":{"start":{"line":676,"column":12},"end":{"line":677,"column":17}},"302":{"start":{"line":681,"column":4},"end":{"line":681,"column":16}},"303":{"start":{"line":684,"column":0},"end":{"line":707,"column":2}},"304":{"start":{"line":686,"column":4},"end":{"line":689,"column":5}},"305":{"start":{"line":687,"column":8},"end":{"line":687,"column":78}},"306":{"start":{"line":688,"column":8},"end":{"line":688,"column":20}},"307":{"start":{"line":691,"column":4},"end":{"line":691,"column":50}},"308":{"start":{"line":692,"column":4},"end":{"line":694,"column":5}},"309":{"start":{"line":693,"column":8},"end":{"line":693,"column":19}},"310":{"start":{"line":696,"column":4},"end":{"line":696,"column":24}},"311":{"start":{"line":697,"column":4},"end":{"line":699,"column":33}},"312":{"start":{"line":700,"column":4},"end":{"line":706,"column":11}},"313":{"start":{"line":709,"column":0},"end":{"line":721,"column":2}},"314":{"start":{"line":711,"column":4},"end":{"line":718,"column":5}},"315":{"start":{"line":713,"column":8},"end":{"line":714,"column":73}},"316":{"start":{"line":715,"column":11},"end":{"line":718,"column":5}},"317":{"start":{"line":716,"column":8},"end":{"line":717,"column":13}},"318":{"start":{"line":720,"column":4},"end":{"line":720,"column":16}},"319":{"start":{"line":723,"column":0},"end":{"line":737,"column":2}},"320":{"start":{"line":724,"column":4},"end":{"line":727,"column":5}},"321":{"start":{"line":725,"column":8},"end":{"line":725,"column":82}},"322":{"start":{"line":726,"column":8},"end":{"line":726,"column":15}},"323":{"start":{"line":729,"column":4},"end":{"line":729,"column":73}},"324":{"start":{"line":730,"column":4},"end":{"line":736,"column":11}},"325":{"start":{"line":739,"column":0},"end":{"line":754,"column":2}},"326":{"start":{"line":740,"column":4},"end":{"line":743,"column":5}},"327":{"start":{"line":741,"column":8},"end":{"line":741,"column":82}},"328":{"start":{"line":742,"column":8},"end":{"line":742,"column":15}},"329":{"start":{"line":745,"column":4},"end":{"line":745,"column":24}},"330":{"start":{"line":746,"column":4},"end":{"line":746,"column":74}},"331":{"start":{"line":747,"column":4},"end":{"line":753,"column":11}},"332":{"start":{"line":756,"column":0},"end":{"line":781,"column":2}},"333":{"start":{"line":758,"column":4},"end":{"line":758,"column":42}},"334":{"start":{"line":759,"column":4},"end":{"line":759,"column":14}},"335":{"start":{"line":761,"column":4},"end":{"line":761,"column":17}},"336":{"start":{"line":763,"column":4},"end":{"line":772,"column":31}},"337":{"start":{"line":764,"column":8},"end":{"line":766,"column":9}},"338":{"start":{"line":765,"column":12},"end":{"line":765,"column":33}},"339":{"start":{"line":768,"column":8},"end":{"line":768,"column":39}},"340":{"start":{"line":769,"column":8},"end":{"line":769,"column":30}},"341":{"start":{"line":770,"column":8},"end":{"line":770,"column":27}},"342":{"start":{"line":771,"column":8},"end":{"line":771,"column":29}},"343":{"start":{"line":775,"column":4},"end":{"line":777,"column":5}},"344":{"start":{"line":776,"column":8},"end":{"line":776,"column":62}},"345":{"start":{"line":778,"column":4},"end":{"line":778,"column":29}},"346":{"start":{"line":780,"column":4},"end":{"line":780,"column":20}},"347":{"start":{"line":783,"column":0},"end":{"line":789,"column":2}},"348":{"start":{"line":784,"column":4},"end":{"line":784,"column":32}},"349":{"start":{"line":785,"column":4},"end":{"line":785,"column":36}},"350":{"start":{"line":786,"column":4},"end":{"line":786,"column":42}},"351":{"start":{"line":787,"column":4},"end":{"line":787,"column":29}},"352":{"start":{"line":788,"column":4},"end":{"line":788,"column":14}},"353":{"start":{"line":791,"column":0},"end":{"line":795,"column":2}},"354":{"start":{"line":792,"column":4},"end":{"line":792,"column":37}},"355":{"start":{"line":793,"column":4},"end":{"line":793,"column":46}},"356":{"start":{"line":794,"column":4},"end":{"line":794,"column":29}},"357":{"start":{"line":797,"column":0},"end":{"line":809,"column":2}},"358":{"start":{"line":798,"column":4},"end":{"line":798,"column":50}},"359":{"start":{"line":799,"column":4},"end":{"line":805,"column":5}},"360":{"start":{"line":800,"column":8},"end":{"line":802,"column":12}},"361":{"start":{"line":803,"column":8},"end":{"line":803,"column":54}},"362":{"start":{"line":804,"column":8},"end":{"line":804,"column":65}},"363":{"start":{"line":806,"column":4},"end":{"line":806,"column":63}},"364":{"start":{"line":807,"column":4},"end":{"line":807,"column":45}},"365":{"start":{"line":808,"column":4},"end":{"line":808,"column":29}},"366":{"start":{"line":811,"column":0},"end":{"line":829,"column":2}},"367":{"start":{"line":812,"column":4},"end":{"line":812,"column":32}},"368":{"start":{"line":814,"column":4},"end":{"line":816,"column":5}},"369":{"start":{"line":815,"column":8},"end":{"line":815,"column":56}},"370":{"start":{"line":817,"column":4},"end":{"line":819,"column":5}},"371":{"start":{"line":818,"column":8},"end":{"line":818,"column":65}},"372":{"start":{"line":820,"column":4},"end":{"line":822,"column":5}},"373":{"start":{"line":821,"column":8},"end":{"line":821,"column":69}},"374":{"start":{"line":824,"column":4},"end":{"line":828,"column":5}},"375":{"start":{"line":825,"column":8},"end":{"line":825,"column":58}},"376":{"start":{"line":827,"column":8},"end":{"line":827,"column":49}},"377":{"start":{"line":831,"column":0},"end":{"line":851,"column":2}},"378":{"start":{"line":832,"column":4},"end":{"line":832,"column":31}},"379":{"start":{"line":832,"column":18},"end":{"line":832,"column":31}},"380":{"start":{"line":834,"column":4},"end":{"line":834,"column":24}},"381":{"start":{"line":835,"column":4},"end":{"line":835,"column":34}},"382":{"start":{"line":836,"column":4},"end":{"line":836,"column":33}},"383":{"start":{"line":837,"column":4},"end":{"line":837,"column":33}},"384":{"start":{"line":838,"column":4},"end":{"line":838,"column":33}},"385":{"start":{"line":840,"column":4},"end":{"line":840,"column":34}},"386":{"start":{"line":841,"column":4},"end":{"line":841,"column":28}},"387":{"start":{"line":842,"column":4},"end":{"line":842,"column":45}},"388":{"start":{"line":843,"column":4},"end":{"line":845,"column":5}},"389":{"start":{"line":844,"column":8},"end":{"line":844,"column":62}},"390":{"start":{"line":846,"column":4},"end":{"line":850,"column":5}},"391":{"start":{"line":847,"column":8},"end":{"line":847,"column":63}},"392":{"start":{"line":849,"column":8},"end":{"line":849,"column":54}},"393":{"start":{"line":853,"column":0},"end":{"line":878,"column":2}},"394":{"start":{"line":854,"column":4},"end":{"line":866,"column":6}},"395":{"start":{"line":868,"column":4},"end":{"line":868,"column":12}},"396":{"start":{"line":869,"column":4},"end":{"line":873,"column":5}},"397":{"start":{"line":870,"column":8},"end":{"line":870,"column":56}},"398":{"start":{"line":872,"column":8},"end":{"line":872,"column":47}},"399":{"start":{"line":875,"column":4},"end":{"line":875,"column":44}},"400":{"start":{"line":877,"column":4},"end":{"line":877,"column":15}},"401":{"start":{"line":880,"column":0},"end":{"line":893,"column":2}},"402":{"start":{"line":881,"column":4},"end":{"line":881,"column":40}},"403":{"start":{"line":882,"column":4},"end":{"line":892,"column":5}},"404":{"start":{"line":886,"column":8},"end":{"line":888,"column":9}},"405":{"start":{"line":887,"column":12},"end":{"line":887,"column":49}},"406":{"start":{"line":889,"column":8},"end":{"line":889,"column":49}},"407":{"start":{"line":891,"column":8},"end":{"line":891,"column":40}},"408":{"start":{"line":895,"column":0},"end":{"line":899,"column":2}},"409":{"start":{"line":897,"column":4},"end":{"line":897,"column":52}},"410":{"start":{"line":898,"column":4},"end":{"line":898,"column":34}},"411":{"start":{"line":901,"column":0},"end":{"line":923,"column":2}},"412":{"start":{"line":902,"column":4},"end":{"line":911,"column":6}},"413":{"start":{"line":913,"column":4},"end":{"line":913,"column":12}},"414":{"start":{"line":914,"column":4},"end":{"line":918,"column":5}},"415":{"start":{"line":915,"column":8},"end":{"line":915,"column":57}},"416":{"start":{"line":917,"column":8},"end":{"line":917,"column":48}},"417":{"start":{"line":920,"column":4},"end":{"line":920,"column":44}},"418":{"start":{"line":922,"column":4},"end":{"line":922,"column":15}},"419":{"start":{"line":925,"column":0},"end":{"line":940,"column":1}},"420":{"start":{"line":929,"column":4},"end":{"line":929,"column":27}},"421":{"start":{"line":930,"column":4},"end":{"line":930,"column":27}},"422":{"start":{"line":931,"column":4},"end":{"line":931,"column":27}},"423":{"start":{"line":932,"column":4},"end":{"line":932,"column":35}},"424":{"start":{"line":933,"column":4},"end":{"line":933,"column":27}},"425":{"start":{"line":934,"column":4},"end":{"line":934,"column":29}},"426":{"start":{"line":935,"column":4},"end":{"line":935,"column":33}},"427":{"start":{"line":936,"column":4},"end":{"line":936,"column":33}},"428":{"start":{"line":937,"column":4},"end":{"line":937,"column":29}},"429":{"start":{"line":938,"column":4},"end":{"line":938,"column":25}},"430":{"start":{"line":939,"column":4},"end":{"line":939,"column":23}}},"branchMap":{"1":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":19},"end":{"line":73,"column":26}},{"start":{"line":73,"column":30},"end":{"line":73,"column":32}}]},"2":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":28},"end":{"line":87,"column":57}},{"start":{"line":87,"column":61},"end":{"line":87,"column":65}}]},"3":{"line":90,"type":"cond-expr","locations":[{"start":{"line":90,"column":56},"end":{"line":90,"column":61}},{"start":{"line":90,"column":64},"end":{"line":90,"column":68}}]},"4":{"line":91,"type":"cond-expr","locations":[{"start":{"line":91,"column":56},"end":{"line":91,"column":61}},{"start":{"line":91,"column":64},"end":{"line":91,"column":68}}]},"5":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":4},"end":{"line":142,"column":4}},{"start":{"line":142,"column":4},"end":{"line":142,"column":4}}]},"6":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]},"7":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":8},"end":{"line":148,"column":8}},{"start":{"line":148,"column":8},"end":{"line":148,"column":8}}]},"8":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"9":{"line":171,"type":"switch","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":34}},{"start":{"line":181,"column":8},"end":{"line":181,"column":35}},{"start":{"line":182,"column":8},"end":{"line":182,"column":38}},{"start":{"line":183,"column":8},"end":{"line":183,"column":39}},{"start":{"line":184,"column":8},"end":{"line":188,"column":18}},{"start":{"line":189,"column":8},"end":{"line":190,"column":18}}]},"10":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":12},"end":{"line":185,"column":12}},{"start":{"line":185,"column":12},"end":{"line":185,"column":12}}]},"11":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":16},"end":{"line":185,"column":37}},{"start":{"line":185,"column":41},"end":{"line":185,"column":69}}]},"12":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":4},"end":{"line":194,"column":4}},{"start":{"line":194,"column":4},"end":{"line":194,"column":4}}]},"13":{"line":204,"type":"switch","locations":[{"start":{"line":205,"column":8},"end":{"line":206,"column":49}},{"start":{"line":207,"column":8},"end":{"line":208,"column":50}},{"start":{"line":209,"column":8},"end":{"line":210,"column":49}},{"start":{"line":211,"column":8},"end":{"line":212,"column":50}},{"start":{"line":213,"column":8},"end":{"line":214,"column":44}},{"start":{"line":215,"column":8},"end":{"line":216,"column":53}},{"start":{"line":217,"column":8},"end":{"line":218,"column":54}},{"start":{"line":219,"column":8},"end":{"line":220,"column":43}},{"start":{"line":221,"column":8},"end":{"line":222,"column":49}},{"start":{"line":223,"column":8},"end":{"line":224,"column":50}},{"start":{"line":225,"column":8},"end":{"line":226,"column":43}},{"start":{"line":227,"column":8},"end":{"line":230,"column":16}}]},"14":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":4},"end":{"line":236,"column":4}},{"start":{"line":236,"column":4},"end":{"line":236,"column":4}}]},"15":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":4},"end":{"line":249,"column":4}},{"start":{"line":249,"column":4},"end":{"line":249,"column":4}}]},"16":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":4},"end":{"line":262,"column":4}},{"start":{"line":262,"column":4},"end":{"line":262,"column":4}}]},"17":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":4},"end":{"line":278,"column":4}},{"start":{"line":278,"column":4},"end":{"line":278,"column":4}}]},"18":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":4},"end":{"line":286,"column":4}},{"start":{"line":286,"column":4},"end":{"line":286,"column":4}}]},"19":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":4},"end":{"line":291,"column":4}},{"start":{"line":291,"column":4},"end":{"line":291,"column":4}}]},"20":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":4},"end":{"line":313,"column":4}},{"start":{"line":313,"column":4},"end":{"line":313,"column":4}}]},"21":{"line":319,"type":"binary-expr","locations":[{"start":{"line":319,"column":16},"end":{"line":319,"column":32}},{"start":{"line":319,"column":36},"end":{"line":319,"column":47}}]},"22":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":4},"end":{"line":327,"column":4}},{"start":{"line":327,"column":4},"end":{"line":327,"column":4}}]},"23":{"line":327,"type":"binary-expr","locations":[{"start":{"line":327,"column":8},"end":{"line":327,"column":22}},{"start":{"line":328,"column":8},"end":{"line":328,"column":30}},{"start":{"line":329,"column":8},"end":{"line":329,"column":33}}]},"24":{"line":331,"type":"if","locations":[{"start":{"line":331,"column":8},"end":{"line":331,"column":8}},{"start":{"line":331,"column":8},"end":{"line":331,"column":8}}]},"25":{"line":347,"type":"if","locations":[{"start":{"line":347,"column":4},"end":{"line":347,"column":4}},{"start":{"line":347,"column":4},"end":{"line":347,"column":4}}]},"26":{"line":347,"type":"binary-expr","locations":[{"start":{"line":347,"column":8},"end":{"line":347,"column":22}},{"start":{"line":348,"column":8},"end":{"line":348,"column":30}},{"start":{"line":349,"column":8},"end":{"line":349,"column":33}}]},"27":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":8},"end":{"line":351,"column":8}},{"start":{"line":351,"column":8},"end":{"line":351,"column":8}}]},"28":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":4},"end":{"line":364,"column":4}},{"start":{"line":364,"column":4},"end":{"line":364,"column":4}}]},"29":{"line":364,"type":"binary-expr","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":22}},{"start":{"line":365,"column":8},"end":{"line":365,"column":30}},{"start":{"line":366,"column":8},"end":{"line":366,"column":33}}]},"30":{"line":368,"type":"if","locations":[{"start":{"line":368,"column":8},"end":{"line":368,"column":8}},{"start":{"line":368,"column":8},"end":{"line":368,"column":8}}]},"31":{"line":382,"type":"if","locations":[{"start":{"line":382,"column":4},"end":{"line":382,"column":4}},{"start":{"line":382,"column":4},"end":{"line":382,"column":4}}]},"32":{"line":382,"type":"binary-expr","locations":[{"start":{"line":382,"column":8},"end":{"line":382,"column":23}},{"start":{"line":383,"column":8},"end":{"line":383,"column":26}},{"start":{"line":384,"column":8},"end":{"line":384,"column":50}}]},"33":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":4},"end":{"line":396,"column":4}},{"start":{"line":396,"column":4},"end":{"line":396,"column":4}}]},"34":{"line":404,"type":"if","locations":[{"start":{"line":404,"column":4},"end":{"line":404,"column":4}},{"start":{"line":404,"column":4},"end":{"line":404,"column":4}}]},"35":{"line":418,"type":"cond-expr","locations":[{"start":{"line":418,"column":18},"end":{"line":418,"column":32}},{"start":{"line":418,"column":35},"end":{"line":418,"column":37}}]},"36":{"line":419,"type":"cond-expr","locations":[{"start":{"line":419,"column":18},"end":{"line":419,"column":33}},{"start":{"line":419,"column":36},"end":{"line":419,"column":38}}]},"37":{"line":420,"type":"cond-expr","locations":[{"start":{"line":420,"column":18},"end":{"line":420,"column":30}},{"start":{"line":420,"column":33},"end":{"line":420,"column":35}}]},"38":{"line":427,"type":"if","locations":[{"start":{"line":427,"column":4},"end":{"line":427,"column":4}},{"start":{"line":427,"column":4},"end":{"line":427,"column":4}}]},"39":{"line":438,"type":"if","locations":[{"start":{"line":438,"column":4},"end":{"line":438,"column":4}},{"start":{"line":438,"column":4},"end":{"line":438,"column":4}}]},"40":{"line":443,"type":"if","locations":[{"start":{"line":443,"column":4},"end":{"line":443,"column":4}},{"start":{"line":443,"column":4},"end":{"line":443,"column":4}}]},"41":{"line":473,"type":"if","locations":[{"start":{"line":473,"column":4},"end":{"line":473,"column":4}},{"start":{"line":473,"column":4},"end":{"line":473,"column":4}}]},"42":{"line":478,"type":"if","locations":[{"start":{"line":478,"column":4},"end":{"line":478,"column":4}},{"start":{"line":478,"column":4},"end":{"line":478,"column":4}}]},"43":{"line":493,"type":"cond-expr","locations":[{"start":{"line":493,"column":18},"end":{"line":493,"column":32}},{"start":{"line":493,"column":35},"end":{"line":493,"column":37}}]},"44":{"line":494,"type":"cond-expr","locations":[{"start":{"line":494,"column":18},"end":{"line":494,"column":33}},{"start":{"line":494,"column":36},"end":{"line":494,"column":38}}]},"45":{"line":495,"type":"cond-expr","locations":[{"start":{"line":495,"column":18},"end":{"line":495,"column":30}},{"start":{"line":495,"column":33},"end":{"line":495,"column":35}}]},"46":{"line":518,"type":"if","locations":[{"start":{"line":518,"column":4},"end":{"line":518,"column":4}},{"start":{"line":518,"column":4},"end":{"line":518,"column":4}}]},"47":{"line":531,"type":"if","locations":[{"start":{"line":531,"column":4},"end":{"line":531,"column":4}},{"start":{"line":531,"column":4},"end":{"line":531,"column":4}}]},"48":{"line":536,"type":"if","locations":[{"start":{"line":536,"column":11},"end":{"line":536,"column":11}},{"start":{"line":536,"column":11},"end":{"line":536,"column":11}}]},"49":{"line":544,"type":"if","locations":[{"start":{"line":544,"column":4},"end":{"line":544,"column":4}},{"start":{"line":544,"column":4},"end":{"line":544,"column":4}}]},"50":{"line":558,"type":"if","locations":[{"start":{"line":558,"column":4},"end":{"line":558,"column":4}},{"start":{"line":558,"column":4},"end":{"line":558,"column":4}}]},"51":{"line":566,"type":"if","locations":[{"start":{"line":566,"column":4},"end":{"line":566,"column":4}},{"start":{"line":566,"column":4},"end":{"line":566,"column":4}}]},"52":{"line":573,"type":"if","locations":[{"start":{"line":573,"column":4},"end":{"line":573,"column":4}},{"start":{"line":573,"column":4},"end":{"line":573,"column":4}}]},"53":{"line":575,"type":"if","locations":[{"start":{"line":575,"column":11},"end":{"line":575,"column":11}},{"start":{"line":575,"column":11},"end":{"line":575,"column":11}}]},"54":{"line":586,"type":"binary-expr","locations":[{"start":{"line":586,"column":19},"end":{"line":586,"column":32}},{"start":{"line":586,"column":36},"end":{"line":586,"column":47}}]},"55":{"line":620,"type":"if","locations":[{"start":{"line":620,"column":4},"end":{"line":620,"column":4}},{"start":{"line":620,"column":4},"end":{"line":620,"column":4}}]},"56":{"line":626,"type":"if","locations":[{"start":{"line":626,"column":4},"end":{"line":626,"column":4}},{"start":{"line":626,"column":4},"end":{"line":626,"column":4}}]},"57":{"line":648,"type":"if","locations":[{"start":{"line":648,"column":4},"end":{"line":648,"column":4}},{"start":{"line":648,"column":4},"end":{"line":648,"column":4}}]},"58":{"line":654,"type":"binary-expr","locations":[{"start":{"line":654,"column":16},"end":{"line":654,"column":32}},{"start":{"line":654,"column":36},"end":{"line":654,"column":47}}]},"59":{"line":663,"type":"if","locations":[{"start":{"line":663,"column":4},"end":{"line":663,"column":4}},{"start":{"line":663,"column":4},"end":{"line":663,"column":4}}]},"60":{"line":663,"type":"binary-expr","locations":[{"start":{"line":663,"column":8},"end":{"line":663,"column":20}},{"start":{"line":663,"column":24},"end":{"line":663,"column":39}}]},"61":{"line":664,"type":"if","locations":[{"start":{"line":664,"column":8},"end":{"line":664,"column":8}},{"start":{"line":664,"column":8},"end":{"line":664,"column":8}}]},"62":{"line":672,"type":"if","locations":[{"start":{"line":672,"column":4},"end":{"line":672,"column":4}},{"start":{"line":672,"column":4},"end":{"line":672,"column":4}}]},"63":{"line":673,"type":"if","locations":[{"start":{"line":673,"column":8},"end":{"line":673,"column":8}},{"start":{"line":673,"column":8},"end":{"line":673,"column":8}}]},"64":{"line":686,"type":"if","locations":[{"start":{"line":686,"column":4},"end":{"line":686,"column":4}},{"start":{"line":686,"column":4},"end":{"line":686,"column":4}}]},"65":{"line":692,"type":"if","locations":[{"start":{"line":692,"column":4},"end":{"line":692,"column":4}},{"start":{"line":692,"column":4},"end":{"line":692,"column":4}}]},"66":{"line":711,"type":"if","locations":[{"start":{"line":711,"column":4},"end":{"line":711,"column":4}},{"start":{"line":711,"column":4},"end":{"line":711,"column":4}}]},"67":{"line":713,"type":"binary-expr","locations":[{"start":{"line":713,"column":15},"end":{"line":713,"column":26}},{"start":{"line":713,"column":30},"end":{"line":713,"column":44}}]},"68":{"line":715,"type":"if","locations":[{"start":{"line":715,"column":11},"end":{"line":715,"column":11}},{"start":{"line":715,"column":11},"end":{"line":715,"column":11}}]},"69":{"line":715,"type":"binary-expr","locations":[{"start":{"line":715,"column":15},"end":{"line":715,"column":27}},{"start":{"line":715,"column":31},"end":{"line":715,"column":46}}]},"70":{"line":724,"type":"if","locations":[{"start":{"line":724,"column":4},"end":{"line":724,"column":4}},{"start":{"line":724,"column":4},"end":{"line":724,"column":4}}]},"71":{"line":733,"type":"cond-expr","locations":[{"start":{"line":733,"column":18},"end":{"line":733,"column":33}},{"start":{"line":733,"column":36},"end":{"line":733,"column":38}}]},"72":{"line":734,"type":"cond-expr","locations":[{"start":{"line":734,"column":18},"end":{"line":734,"column":32}},{"start":{"line":734,"column":35},"end":{"line":734,"column":37}}]},"73":{"line":735,"type":"cond-expr","locations":[{"start":{"line":735,"column":18},"end":{"line":735,"column":30}},{"start":{"line":735,"column":33},"end":{"line":735,"column":35}}]},"74":{"line":740,"type":"if","locations":[{"start":{"line":740,"column":4},"end":{"line":740,"column":4}},{"start":{"line":740,"column":4},"end":{"line":740,"column":4}}]},"75":{"line":764,"type":"if","locations":[{"start":{"line":764,"column":8},"end":{"line":764,"column":8}},{"start":{"line":764,"column":8},"end":{"line":764,"column":8}}]},"76":{"line":775,"type":"if","locations":[{"start":{"line":775,"column":4},"end":{"line":775,"column":4}},{"start":{"line":775,"column":4},"end":{"line":775,"column":4}}]},"77":{"line":799,"type":"if","locations":[{"start":{"line":799,"column":4},"end":{"line":799,"column":4}},{"start":{"line":799,"column":4},"end":{"line":799,"column":4}}]},"78":{"line":814,"type":"if","locations":[{"start":{"line":814,"column":4},"end":{"line":814,"column":4}},{"start":{"line":814,"column":4},"end":{"line":814,"column":4}}]},"79":{"line":817,"type":"if","locations":[{"start":{"line":817,"column":4},"end":{"line":817,"column":4}},{"start":{"line":817,"column":4},"end":{"line":817,"column":4}}]},"80":{"line":820,"type":"if","locations":[{"start":{"line":820,"column":4},"end":{"line":820,"column":4}},{"start":{"line":820,"column":4},"end":{"line":820,"column":4}}]},"81":{"line":824,"type":"if","locations":[{"start":{"line":824,"column":4},"end":{"line":824,"column":4}},{"start":{"line":824,"column":4},"end":{"line":824,"column":4}}]},"82":{"line":832,"type":"if","locations":[{"start":{"line":832,"column":4},"end":{"line":832,"column":4}},{"start":{"line":832,"column":4},"end":{"line":832,"column":4}}]},"83":{"line":843,"type":"if","locations":[{"start":{"line":843,"column":4},"end":{"line":843,"column":4}},{"start":{"line":843,"column":4},"end":{"line":843,"column":4}}]},"84":{"line":846,"type":"if","locations":[{"start":{"line":846,"column":4},"end":{"line":846,"column":4}},{"start":{"line":846,"column":4},"end":{"line":846,"column":4}}]},"85":{"line":856,"type":"binary-expr","locations":[{"start":{"line":856,"column":8},"end":{"line":856,"column":25}},{"start":{"line":856,"column":29},"end":{"line":856,"column":51}}]},"86":{"line":869,"type":"if","locations":[{"start":{"line":869,"column":4},"end":{"line":869,"column":4}},{"start":{"line":869,"column":4},"end":{"line":869,"column":4}}]},"87":{"line":882,"type":"if","locations":[{"start":{"line":882,"column":4},"end":{"line":882,"column":4}},{"start":{"line":882,"column":4},"end":{"line":882,"column":4}}]},"88":{"line":882,"type":"binary-expr","locations":[{"start":{"line":882,"column":8},"end":{"line":882,"column":16}},{"start":{"line":883,"column":8},"end":{"line":883,"column":36}}]},"89":{"line":886,"type":"if","locations":[{"start":{"line":886,"column":8},"end":{"line":886,"column":8}},{"start":{"line":886,"column":8},"end":{"line":886,"column":8}}]},"90":{"line":914,"type":"if","locations":[{"start":{"line":914,"column":4},"end":{"line":914,"column":4}},{"start":{"line":914,"column":4},"end":{"line":914,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint max-statements: [1, 40] max-params: [1, 11] */","/* eslint-disable curly */","","var EventEmitter = require('../lib/event_emitter');","var Buffer = require('buffer').Buffer;","var stat = require('../stat-tags.js');","var util = require('util');","var assert = require('assert');","var process = require('process');","","var HostPort = require('../host-port.js');","var OutRequest = require('./out_request').OutRequest;","var OutResponse = require('./out_response').OutResponse;","var StreamingOutRequest = require('./out_request').StreamingOutRequest;","var StreamingOutResponse = require('./out_response').StreamingOutResponse;","var InRequest = require('../in_request');","var InResponse = require('../in_response');","var States = require('../reqres_states');","var StreamingInRequest = require('../streaming_in_request');","var StreamingInResponse = require('../streaming_in_response');","","var WriteResult = require('bufrw').WriteResult;","","var v2 = require('./index');","var errors = require('../errors');","","var TCHANNEL_LANGUAGE = 'node';","var TCHANNEL_LANGUAGE_VERSION = process.version.slice(1);","var TCHANNEL_VERSION = require('../package.json').version;","","var SERVER_TIMEOUT_DEFAULT = 100;","var GLOBAL_WRITE_BUFFER = new Buffer(v2.Frame.MaxSize);","","module.exports = TChannelV2Handler;","","function TChannelV2Handler(options) {","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.errorFrameEvent = this.defineEvent('errorFrame');","    this.callIncomingErrorFrameEvent = this.defineEvent('callIncomingErrorFrame');","    this.callIncomingRequestEvent = this.defineEvent('callIncomingRequest');","    this.callIncomingResponseEvent = this.defineEvent('callIncomingResponse');","    this.cancelEvent = this.defineEvent('cancel');","    this.initRequestEvent = this.defineEvent('initRequest');","    this.initResponseEvent = this.defineEvent('initResponse');","    this.claimEvent = this.defineEvent('claim');","    this.pingIncomingRequestEvent = this.defineEvent('pingIncomingRequest');","    this.pingIncomingResponseEvent = this.defineEvent('pingIncomingResponse');","    this.writeErrorEvent = this.defineEvent('writeError'); // TODO: could use default throw behavior","","    this.options = options || {};","    this.logger = this.options.logger;","    this.random = this.options.random;","    this.timers = this.options.timers;","    this.tracer = this.options.tracer;","    this.hostPort = this.options.hostPort;","    this.processName = this.options.processName;","    this.connection = this.options.connection;","    this.remoteName = null; // filled in by identify message","    this.lastSentFrameId = 0;","    // TODO: GC these... maybe that's up to TChannel itself wrt ops","    this.streamingReq = Object.create(null);","    this.streamingRes = Object.create(null);","","    this.handleCallLazily = this.options.handleCallLazily || null;","    this.handleFrame = this.handleEagerFrame;","","    this.requireAs = this.options.requireAs === false ? false : true;","    this.requireCn = this.options.requireCn === false ? false : true;","","    var self = this;","    this.boundOnReqError = onReqError;","    this.boundOnResError = onResError;","","    function onReqError(err, req) {","        self.onReqError(err, req);","    }","","    function onResError(err, res) {","        self.onResError(err, res);","    }","}","","util.inherits(TChannelV2Handler, EventEmitter);","","TChannelV2Handler.prototype.justExtendLogInfo = function extendLogInfo(info) {","    info.handlerLastSentFrameId = this.lastSentFrameId;","    info.handlerIsLazy = this.handleFrame === this.handleLazyFrame;","    info.canHandleLazyCalls = !!this.handleCallLazily;","    info.handlerRequireAs = this.requireAs;","    info.handlerRequireCn = this.requireCn;","    return info;","};","","TChannelV2Handler.prototype.extendLogInfo = function extendLogInfo(info) {","    info = this.justExtendLogInfo(info);","","    // adds remoteName, hostPort, remoteAddr, etc","    info = this.connection.extendLogInfo(info);","","    return info;","};","","TChannelV2Handler.prototype.write = function write() {","    this.errorEvent.emit(this, new Error('write not implemented'));","};","","TChannelV2Handler.prototype.writeCopy = function writeCopy(buffer, start, end) {","    // TODO: Optimize, allocating SlowBuffer here is slow","    var copy = new Buffer(end - start);","    buffer.copy(copy, 0, start, end);","    this.write(copy);","};","","var writeRes = new WriteResult();","TChannelV2Handler.prototype.pushFrame = function pushFrame(frame) {","    var writeBuffer = GLOBAL_WRITE_BUFFER;","    var res = v2.Frame.RW.poolWriteInto(writeRes, frame, writeBuffer, 0);","    var err = res.err;","    if (err) {","        if (!Buffer.isBuffer(err.buffer)) {","            var bufCopy = new Buffer(res.offset);","            writeBuffer.copy(bufCopy, 0, 0, res.offset);","            err.buffer = bufCopy;","        }","        if (typeof err.offset !== 'number') err.offset = res.offset;","        this.writeErrorEvent.emit(this, err);","    } else {","        this.writeCopy(writeBuffer, 0, res.offset);","    }","};","","TChannelV2Handler.prototype.nextFrameId = function nextFrameId() {","    this.lastSentFrameId = (this.lastSentFrameId + 1) % v2.Frame.MaxId;","    return this.lastSentFrameId;","};","","TChannelV2Handler.prototype.useLazyFrames = function useLazyFrames(enabled) {","    if (enabled) {","        this.handleFrame = this.handleLazyFrame;","    } else {","        this.handleFrame = this.handleEagerFrame;","    }","};","","TChannelV2Handler.prototype.handleLazyFrame = function handleLazyFrame(frame) {","    frame.start = Date.now();","","    switch (frame.type) {","        // TODO: make some lazy type handlers?","        // case v2.Types.InitRequest:","        // case v2.Types.InitResponse:","        // case v2.Types.Cancel:","        // case v2.Types.Claim:","        // case v2.Types.PingRequest:","        // case v2.Types.PingResponse:","","        case v2.Types.CallRequest:","        case v2.Types.CallResponse:","        case v2.Types.CallRequestCont:","        case v2.Types.CallResponseCont:","        case v2.Types.ErrorResponse:","            if (this.handleCallLazily && this.handleCallLazily(frame)) {","                return;","            }","            break;","        default:","            break;","    }","","    var res = frame.readBody();","    if (res.err) {","        this.errorEvent.emit(this, res.err);","        return;","    }","","    this.handleEagerFrame(frame);","};","","/* eslint-disable complexity */","TChannelV2Handler.prototype.handleEagerFrame = function handleEagerFrame(frame) {","    switch (frame.body.type) {","        case v2.Types.InitRequest:","            return this.handleInitRequest(frame);","        case v2.Types.InitResponse:","            return this.handleInitResponse(frame);","        case v2.Types.CallRequest:","            return this.handleCallRequest(frame);","        case v2.Types.CallResponse:","            return this.handleCallResponse(frame);","        case v2.Types.Cancel:","            return this.handleCancel(frame);","        case v2.Types.CallRequestCont:","            return this.handleCallRequestCont(frame);","        case v2.Types.CallResponseCont:","            return this.handleCallResponseCont(frame);","        case v2.Types.Claim:","            return this.handleClaim(frame);","        case v2.Types.PingRequest:","            return this.handlePingRequest(frame);","        case v2.Types.PingResponse:","            return this.handlePingResponse(frame);","        case v2.Types.ErrorResponse:","            return this.handleError(frame);","        default:","            return this.errorEvent.emit(this, errors.TChannelUnhandledFrameTypeError({","                typeCode: frame.body.type","            }));","    }","};","/* eslint-enable complexity */","","TChannelV2Handler.prototype.handleInitRequest = function handleInitRequest(reqFrame) {","    if (this.remoteName !== null) {","        return this.errorEvent.emit(this, errors.DuplicateInitRequestError());","    }","    var headers = reqFrame.body.headers;","    var init = {","        hostPort: headers.host_port,","        processName: headers.process_name,","        tchannelLanguage: headers.tchannel_language,","        tchannelLanguageVersion: headers.tchannel_language_version,","        tchannelVersion: headers.tchannel_version","    };","","    var reason = HostPort.validateHostPort(init.hostPort, true);","    if (reason) {","        return this.errorEvent.emit(this, errors.InvalidInitHostPortError({","            hostPort: init.hostPort,","            reason: reason","        }));","    }","","    this.sendInitResponse(reqFrame);","    this.remoteName = init.hostPort;","    this.initRequestEvent.emit(this, init);","};","","TChannelV2Handler.prototype.handleInitResponse = function handleInitResponse(resFrame) {","    if (this.remoteName !== null) {","        return this.errorEvent.emit(this, errors.DuplicateInitResponseError());","    }","    var headers = resFrame.body.headers;","    var init = {","        hostPort: headers.host_port,","        processName: headers.process_name,","        tchannelLanguage: headers.tchannel_language,","        tchannelLanguageVersion: headers.tchannel_language_version,","        tchannelVersion: headers.tchannel_version","    };","    this.remoteName = init.hostPort;","    this.initResponseEvent.emit(this, init);","};","","TChannelV2Handler.prototype.handleCallRequest = function handleCallRequest(reqFrame) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.CallReqBeforeInitReqError());","        return;","    }","","    var req = this.buildInRequest(reqFrame);","","    var err = this.checkCallReqFrame(reqFrame);","    if (err) {","        req.errorEvent.emit(req, err);","        return;","    }","","    if (this._handleCallFrame(req, reqFrame, this.streamingReq)) {","        this.callIncomingRequestEvent.emit(this, req);","    }","","    var channel = this.connection.channel;","    channel.emitFastStat(","        'tchannel.inbound.request.size',","        'counter',","        reqFrame.size,","        new stat.InboundRequestSizeTags(","            req.callerName,","            req.serviceName,","            req.endpoint","        )","    );","","    this.emitBytesRecvd(reqFrame);","};","","TChannelV2Handler.prototype.emitBytesRecvd =","function emitBytesRecvd(frame) {","    var channel = this.connection.channel;","    if (channel.emitConnectionMetrics) {","        channel.emitFastStat(","            'tchannel.connections.bytes-recvd',","            'counter',","            frame.size,","            new stat.ConnectionsBytesRcvdTags(","                channel.hostPort || '0.0.0.0:0',","                this.connection.socketRemoteAddr","            )","        );","    }","};","","TChannelV2Handler.prototype.checkCallResFrame = function checkCallResFrame(resFrame) {","    if (!resFrame.body ||","        !resFrame.body.headers ||","        !resFrame.body.headers.as","    ) {","        if (this.requireAs) {","            return errors.InAsHeaderRequired({","                frame: 'response'","            });","        } else {","            this.logger.warn('Expected \"as\" for incoming response', this.extendLogInfo({","                code: resFrame.body.code,","                endpoint: String(resFrame.body.args[0])","            }));","        }","    }","","    return this.checkCallFrameArgs(resFrame);","};","","TChannelV2Handler.prototype.checkCallReqFrame = function checkCallReqFrame(reqFrame) {","    if (!reqFrame.body ||","        !reqFrame.body.headers ||","        !reqFrame.body.headers.as","    ) {","        if (this.requireAs) {","            return errors.InAsHeaderRequired({","                frame: 'request'","            });","        } else {","            this.logger.warn('Expected \"as\" header for incoming req', this.extendLogInfo({","                arg1: String(reqFrame.body.args[0]),","                serviceName: reqFrame.body.service,","                callerName: reqFrame.body.headers.cn","            }));","        }","    }","","    if (!reqFrame.body ||","        !reqFrame.body.headers ||","        !reqFrame.body.headers.cn","    ) {","        if (this.requireCn) {","            return errors.InCnHeaderRequired();","        } else {","            this.logger.warn('Expected \"cn\" header for incoming req', this.extendLogInfo({","                arg1: String(reqFrame.body.args[0]),","                serviceName: reqFrame.body.service","            }));","        }","    }","","    return this.checkCallFrameArgs(reqFrame);","};","","TChannelV2Handler.prototype.checkCallFrameArgs = function checkCallFrameArgs(frame) {","    if (frame.body.args &&","        frame.body.args[0] &&","        frame.body.args[0].length > v2.MaxArg1Size","    ) {","        return errors.Arg1OverLengthLimit({","            length: frame.body.args[0].length,","            limit: v2.MaxArg1Size","        });","    }","","    return null;","};","","TChannelV2Handler.prototype.handleCallResponse = function handleCallResponse(resFrame) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.CallResBeforeInitResError());","        return;","    }","","    var res = this.buildInResponse(resFrame);","","    var err = this.checkCallResFrame(resFrame);","    if (err) {","        res.errorEvent.emit(res, err);","        return;","    }","","    var req = this.connection.ops.getOutReq(res.id);","","    var channel = this.connection.channel;","","    channel.emitFastStat(","        'tchannel.inbound.response.size',","        'counter',","        resFrame.size,","        new stat.InboundResponseSizeTags(","            req ? req.callerName : '',","            req ? req.serviceName : '',","            req ? req.endpoint : ''","        )","    );","","    this.emitBytesRecvd(resFrame);","","    res.remoteAddr = this.remoteName;","    if (this._handleCallFrame(res, resFrame, this.streamingRes)) {","        this.callIncomingResponseEvent.emit(this, res);","    }","};","","// TODO  we should implement clearing of this.streaming{Req,Res}","TChannelV2Handler.prototype.handleCancel = function handleCancel(frame) {","    this.cancelEvent.emit(this, frame);","};","","TChannelV2Handler.prototype.handleCallRequestCont = function handleCallRequestCont(reqFrame, callback) {","    if (this.remoteName === null) {","        return this.errorEvent.emit(this, errors.CallReqContBeforeInitReqError());","    }","    var id = reqFrame.id;","    var req = this.streamingReq[id];","    if (!req) {","        // TODO: maybe we should send an error frame directed at the missing","        // request id?  Currently the handler -> connection boundary only","        // supports \"close them all\" error handling.  If instead we added an","        // option for errors classified as 'BadRequest' to resolve through","        // something like `var refId = errors.badRequestRefId(err); if (refId","        // !== undefined) ...` then we could support it.","        return this.errorEvent.emit(this, errors.OrphanCallRequestCont({","            frameId: id","        }));","    }","","    this._handleCallFrame(req, reqFrame, this.streamingReq);","","    var channel = this.connection.channel;","    channel.emitFastStat(","        'tchannel.inbound.request.size',","        'counter',","        reqFrame.size,","        new stat.InboundRequestSizeTags(","            req.callerName,","            req.serviceName,","            req.endpoint","        )","    );","","    this.emitBytesRecvd(reqFrame);","};","","TChannelV2Handler.prototype.handleCallResponseCont = function handleCallResponseCont(resFrame) {","    if (this.remoteName === null) {","        return this.errorEvent.emit(this, errors.CallResContBeforeInitResError());","    }","    var id = resFrame.id;","    var res = this.streamingRes[id];","    if (!res) {","        // TODO: see note in #handleCallRequestCont","        return this.errorEvent.emit(this, errors.OrphanCallResponseCont({","            frameId: id","        }));","    }","","    var req = this.connection.ops.getOutReq(res.id);","    var channel = this.connection.channel;","","    channel.emitFastStat(","        'tchannel.inbound.response.size',","        'counter',","        resFrame.size,","        new stat.InboundResponseSizeTags(","            req ? req.callerName : '',","            req ? req.serviceName : '',","            req ? req.endpoint : ''","        )","    );","","    this.emitBytesRecvd(resFrame);","","    this._handleCallFrame(res, resFrame, this.streamingRes);","};","","TChannelV2Handler.prototype.handleClaim = function handleClaim(frame) {","    this.claimEvent.emit(this, frame);","};","","TChannelV2Handler.prototype.handlePingRequest = function handlePingRequest(pingFrame) {","    this.pingIncomingRequestEvent.emit(this, pingFrame);","    this.sendPingReponse(pingFrame);","};","","TChannelV2Handler.prototype.handlePingResponse = function handlePingResponse(pingFrame) {","    this.pingIncomingResponseEvent.emit(this, pingFrame);","};","","TChannelV2Handler.prototype.handleError = function handleError(errFrame, callback) {","    if (errFrame.id === v2.Frame.NullId) {","        // error frame not associated with a prior frame","        this.errorFrameEvent.emit(this, errFrame);","        return;","    }","","    delete this.streamingReq[errFrame.id];","    delete this.streamingRes[errFrame.id];","    this.callIncomingErrorFrameEvent.emit(this, errFrame);","};","","TChannelV2Handler.prototype._checkCallFrame = function _checkCallFrame(r, frame) {","    // TODO: this obsoletes similar checks in StreamingIn{Request,Response}#handleFrame","    if (r.state === States.Done) {","        return errors.UnexpectedCallFrameAfterDone({","            frameId: frame.id,","            frameType: frame.body.type","        });","    } else if (r.state === States.Error) {","        return errors.UnexpectedCallFrameAfterError({","            frameId: frame.id,","            frameType: frame.body.type","        });","    }","","    var checksum = r.checksum;","    if (checksum.type !== frame.body.csum.type) {","        return errors.ChecksumTypeChanged({","            initialChecksumType: checksum.type,","            newChecksumType: frame.body.csum.type","        });","    }","","    return frame.body.verifyChecksum(checksum.val);","};","","TChannelV2Handler.prototype._handleCallFrame = function _handleCallFrame(r, frame, streamingColl) {","    var isLast = true;","    var err = this._checkCallFrame(r, frame);","","    if (!err) {","        // TODO: refactor r.handleFrame to just take the whole frame? or should","        // it be (checksum, args)","        isLast = !(frame.body.flags & v2.CallFlags.Fragment);","        r.checksum = frame.body.csum;","        err = r.handleFrame(frame.body.args, isLast);","    }","","    if (err) {","        // TODO wrap context","        r.errorEvent.emit(r, err);","        delete streamingColl[r.id];","        return false;","    }","","    if (isLast) {","        delete streamingColl[r.id];","    } else if (!streamingColl[r.id]) {","        streamingColl[r.id] = r;","    } else {","        assert(streamingColl[r.id] === r);","    }","","    return true;","};","","TChannelV2Handler.prototype.sendInitRequest = function sendInitRequest() {","    var id = this.nextFrameId(); // TODO: assert(id === 1)?","    var hostPort = this.hostPort || '0.0.0.0:0';","    var processName = this.processName;","    /* eslint-disable camelcase */","    var body = new v2.InitRequest(v2.VERSION, {","        host_port: hostPort,","        process_name: processName,","        tchannel_language: TCHANNEL_LANGUAGE,","        tchannel_language_version: TCHANNEL_LANGUAGE_VERSION,","        tchannel_version: TCHANNEL_VERSION","    });","    /* eslint-enable camelcase */","    var reqFrame = new v2.Frame(id, body);","    this.pushFrame(reqFrame);","};","","TChannelV2Handler.prototype.sendInitResponse = function sendInitResponse(reqFrame) {","    var id = reqFrame.id;","    var hostPort = this.hostPort;","    var processName = this.processName;","    /* eslint-disable camelcase */","    var body = new v2.InitResponse(v2.VERSION, {","        host_port: hostPort,","        process_name: processName,","        tchannel_language: TCHANNEL_LANGUAGE,","        tchannel_language_version: TCHANNEL_LANGUAGE_VERSION,","        tchannel_version: TCHANNEL_VERSION","    });","    /* eslint-enable camelcase */","    var resFrame = new v2.Frame(id, body);","    this.pushFrame(resFrame);","};","","TChannelV2Handler.prototype.sendCallRequestFrame =","function sendCallRequestFrame(req, flags, args) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.SendCallReqBeforeIdentifiedError());","        return null;","    }","","    var err = this.verifyCallRequestFrame(req, args);","    if (err) {","        return err;","    }","","    var reqBody = new v2.CallRequest(","        flags, req.timeout, req.tracing, req.serviceName, req.headers,","        req.checksum.type, args","    );","    req.checksum = this.sendCallBodies(","        req.id, reqBody, null,","        'tchannel.outbound.request.size', new stat.OutboundRequestSizeTags(","            req.serviceName,","            req.callerName,","            req.endpoint","        ));","","    return null;","};","","TChannelV2Handler.prototype.emitBytesSent =","function emitBytesSent(size) {","    var channel = this.connection.channel;","    if (channel.emitConnectionMetrics) {","        channel.emitFastStat(","            'tchannel.connections.bytes-sent',","            'counter',","            size,","            new stat.ConnectionsBytesSentTags(","                channel.hostPort || '0.0.0.0:0',","                this.connection.socketRemoteAddr","            )","        );","    }","};","","TChannelV2Handler.prototype.verifyCallRequestFrame =","function verifyCallRequestFrame(req, args) {","    if (!req.headers || !req.headers.as) {","        if (this.requireAs) {","            return errors.OutAsHeaderRequired();","        } else {","            this.logger.error('Expected \"as\" header to be set for request', this.justExtendLogInfo(req.extendLogInfo({","            })));","        }","    }","","    if (!req.callerName) {","        if (this.requireCn) {","            return errors.OutCnHeaderRequired();","        } else {","            this.logger.error('Expected \"cn\" header to be set for request', this.justExtendLogInfo(req.extendLogInfo({","            })));","        }","    }","","    return null;","};","","TChannelV2Handler.prototype.sendCallResponseFrame =","function sendCallResponseFrame(res, flags, args) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.SendCallResBeforeIdentifiedError());","        return null;","    }","","    var err = this.validateCallResponseFrame(res);","    if (err) {","        return err;","    }","","    var req = res.inreq;","    var resBody = new v2.CallResponse(","        flags, res.code, res.tracing, res.headers,","        res.checksum.type, args);","    res.checksum = this.sendCallBodies(","        res.id, resBody, null,","        'tchannel.outbound.response.size', new stat.OutboundResponseSizeTags(","            req.serviceName,","            req.callerName,","            req.endpoint","        ));","};","","TChannelV2Handler.prototype.validateCallResponseFrame =","function validateCallResponseFrame(res) {","    if (this.requireAs) {","        // TODO: consider returning typed error like for req frame validate","        assert(res.headers && res.headers.as,","            'Expected the \"as\" transport header to be set for response');","    } else if (!res.headers || !res.headers.as) {","        this.logger.error('Expected \"as\" header to be set for response', this.justExtendLogInfo(res.extendLogInfo({","        })));","    }","","    return null;","};","","TChannelV2Handler.prototype.sendCallRequestContFrame = function sendCallRequestContFrame(req, flags, args) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.SendCallReqContBeforeIdentifiedError());","        return;","    }","","    var reqBody = new v2.CallRequestCont(flags, req.checksum.type, args);","    req.checksum = this.sendCallBodies(","        req.id, reqBody, req.checksum,","        'tchannel.outbound.request.size', new stat.OutboundRequestSizeTags(","            req ? req.serviceName : '',","            req ? req.callerName : '',","            req ? req.endpoint : ''","        ));","};","","TChannelV2Handler.prototype.sendCallResponseContFrame = function sendCallResponseContFrame(res, flags, args) {","    if (this.remoteName === null) {","        this.errorEvent.emit(this, errors.SendCallResContBeforeIdentifiedError());","        return;","    }","","    var req = res.inreq;","    var resBody = new v2.CallResponseCont(flags, res.checksum.type, args);","    res.checksum = this.sendCallBodies(","        res.id, resBody, res.checksum,","        'tchannel.outbound.response.size', new stat.OutboundResponseSizeTags(","            req.serviceName,","            req.callerName,","            req.endpoint","        ));","};","","TChannelV2Handler.prototype.sendCallBodies =","function sendCallBodies(id, body, checksum, chanStat, tags) {","    var channel = this.connection.channel;","    var frame;","","    var size = 0;","    /* eslint-disable no-cond-assign */","    do {","        if (checksum) {","            body.csum = checksum;","        }","","        frame = new v2.Frame(id, body);","        this.pushFrame(frame);","        size += frame.size;","        checksum = body.csum;","    } while (body = body.cont);","    /* eslint-enable no-cond-assign */","","    if (chanStat) {","        channel.emitFastStat(chanStat, 'counter', size, tags);","    }","    this.emitBytesSent(size);","","    return checksum;","};","","TChannelV2Handler.prototype.sendPingRequest = function sendPingRequest() {","    var id = this.nextFrameId();","    var body = new v2.PingRequest();","    var reqFrame = new v2.Frame(id, body);","    this.pushFrame(reqFrame);","    return id;","};","","TChannelV2Handler.prototype.sendPingReponse = function sendPingReponse(res) {","    var body = new v2.PingResponse();","    var resFrame = new v2.Frame(res.id, body);","    this.pushFrame(resFrame);","};","","TChannelV2Handler.prototype.sendErrorFrame = function sendErrorFrame(id, tracing, codeString, message) {","    var code = v2.ErrorResponse.Codes[codeString];","    if (code === undefined) {","        this.logger.error('invalid error frame code string', this.extendLogInfo({","            codeString: codeString","        }));","        code = v2.ErrorResponse.Codes.UnexpectedError;","        message = 'UNKNOWN CODE(' + codeString + '): ' + message;","    }","    var errBody = new v2.ErrorResponse(code, tracing, message);","    var errFrame = new v2.Frame(id, errBody);","    this.pushFrame(errFrame);","};","","TChannelV2Handler.prototype.buildOutRequest = function buildOutRequest(options) {","    var id = this.nextFrameId();","","    if (options.checksumType === null) {","        options.checksumType = v2.Checksum.Types.CRC32C;","    }","    if (!options.checksum) {","        options.checksum = new v2.Checksum(options.checksumType);","    }","    if (!options.headers.re) {","        options.headers.re = v2.encodeRetryFlags(options.retryFlags);","    }","","    if (options.streamed) {","        return new StreamingOutRequest(this, id, options);","    } else {","        return new OutRequest(this, id, options);","    }","};","","TChannelV2Handler.prototype.buildOutResponse = function buildOutResponse(req, options) {","    if (!options) options = {};","","    options.inreq = req;","    options.channel = req.channel;","    options.logger = this.logger;","    options.random = this.random;","    options.timers = this.timers;","","    options.tracing = req.tracing;","    options.span = req.span;","    options.checksumType = req.checksum.type;","    if (!options.checksum) {","        options.checksum = new v2.Checksum(req.checksum.type);","    }","    if (options.streamed) {","        return new StreamingOutResponse(this, req.id, options);","    } else {","        return new OutResponse(this, req.id, options);","    }","};","","TChannelV2Handler.prototype.buildInRequest = function buildInRequest(reqFrame) {","    var opts = new InRequestOptions(","        this.connection.channel,","        reqFrame.body.ttl || SERVER_TIMEOUT_DEFAULT,","        reqFrame.body.tracing,","        reqFrame.body.service,","        reqFrame.body.headers,","        new v2.Checksum(reqFrame.body.csum.type),","        v2.parseRetryFlags(reqFrame.body.headers.re),","        this.connection,","        this.hostPort,","        this.tracer,","        reqFrame.body.flags","    );","","    var req;","    if (reqFrame.body.flags & v2.CallFlags.Fragment) {","        req = new StreamingInRequest(reqFrame.id, opts);","    } else {","        req = new InRequest(reqFrame.id, opts);","    }","","    req.errorEvent.on(this.boundOnReqError);","","    return req;","};","","TChannelV2Handler.prototype.onReqError = function onReqError(err, req) {","    var codeName = errors.classify(err);","    if (codeName &&","        codeName !== 'ProtocolError'","    ) {","        // TODO: move req to error state?","        if (!req.res) {","            req.res = this.buildOutResponse(req);","        }","        req.res.sendError(codeName, err.message);","    } else {","        this.errorEvent.emit(this, err);","    }","};","","TChannelV2Handler.prototype.onResError = function onResError(err, res) {","    // TODO: wrap errors to clarify \"errors on responses to req...\" ?","    var req = this.connection.ops.getOutReq(res.id);","    req.errorEvent.emit(req, err);","};","","TChannelV2Handler.prototype.buildInResponse = function buildInResponse(resFrame) {","    var opts = {","        logger: this.logger,","        random: this.random,","        timers: this.timers,","        code: resFrame.body.code,","        checksum: new v2.Checksum(resFrame.body.csum.type),","        streamed: resFrame.body.flags & v2.CallFlags.Fragment,","        flags: resFrame.body.flags,","        headers: resFrame.body.headers","    };","","    var res;","    if (opts.streamed) {","        res = new StreamingInResponse(resFrame.id, opts);","    } else {","        res = new InResponse(resFrame.id, opts);","    }","","    res.errorEvent.on(this.boundOnResError);","","    return res;","};","","function InRequestOptions(","    channel, timeout, tracing, serviceName, headers, checksum,","    retryFlags, connection, hostPort, tracer, flags",") {","    this.channel = channel;","    this.timeout = timeout;","    this.tracing = tracing;","    this.serviceName = serviceName;","    this.headers = headers;","    this.checksum = checksum;","    this.retryFlags = retryFlags;","    this.connection = connection;","    this.hostPort = hostPort;","    this.tracer = tracer;","    this.flags = flags;","}",""],"l":{"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"44":1,"46":1,"47":1,"49":1,"50":1,"51":1,"53":1,"54":1,"56":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"84":0,"85":0,"87":0,"88":0,"90":0,"91":0,"93":0,"94":0,"95":0,"97":1,"98":0,"101":1,"102":0,"106":1,"108":1,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"117":1,"118":0,"121":0,"123":0,"126":1,"127":0,"130":1,"132":0,"133":0,"134":0,"137":1,"138":1,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"148":0,"149":0,"151":0,"155":1,"156":0,"157":0,"160":1,"161":0,"162":0,"164":0,"168":1,"169":0,"171":0,"185":0,"186":0,"188":0,"190":0,"193":0,"194":0,"195":0,"196":0,"199":0,"203":1,"204":0,"206":0,"208":0,"210":0,"212":0,"214":0,"216":0,"218":0,"220":0,"222":0,"224":0,"226":0,"228":0,"235":1,"236":0,"237":0,"239":0,"240":0,"248":0,"249":0,"250":0,"256":0,"257":0,"258":0,"261":1,"262":0,"263":0,"265":0,"266":0,"273":0,"274":0,"277":1,"278":0,"279":0,"280":0,"283":0,"285":0,"286":0,"287":0,"288":0,"291":0,"292":0,"295":0,"296":0,"307":0,"310":1,"312":0,"313":0,"314":0,"326":1,"327":0,"331":0,"332":0,"336":0,"343":0,"346":1,"347":0,"351":0,"352":0,"356":0,"364":0,"368":0,"369":0,"371":0,"378":0,"381":1,"382":0,"386":0,"392":0,"395":1,"396":0,"397":0,"398":0,"401":0,"403":0,"404":0,"405":0,"406":0,"409":0,"411":0,"413":0,"424":0,"426":0,"427":0,"428":0,"433":1,"434":0,"437":1,"438":0,"439":0,"441":0,"442":0,"443":0,"450":0,"455":0,"457":0,"458":0,"469":0,"472":1,"473":0,"474":0,"476":0,"477":0,"478":0,"480":0,"485":0,"486":0,"488":0,"499":0,"501":0,"504":1,"505":0,"508":1,"509":0,"510":0,"513":1,"514":0,"517":1,"518":0,"520":0,"521":0,"524":0,"525":0,"526":0,"529":1,"531":0,"532":0,"536":0,"537":0,"543":0,"544":0,"545":0,"551":0,"554":1,"555":0,"556":0,"558":0,"561":0,"562":0,"563":0,"566":0,"568":0,"569":0,"570":0,"573":0,"574":0,"575":0,"576":0,"578":0,"581":0,"584":1,"585":0,"586":0,"587":0,"589":0,"597":0,"598":0,"601":1,"602":0,"603":0,"604":0,"606":0,"614":0,"615":0,"618":1,"620":0,"621":0,"622":0,"625":0,"626":0,"627":0,"630":0,"634":0,"642":0,"645":1,"647":0,"648":0,"649":0,"661":1,"663":0,"664":0,"665":0,"667":0,"672":0,"673":0,"674":0,"676":0,"681":0,"684":1,"686":0,"687":0,"688":0,"691":0,"692":0,"693":0,"696":0,"697":0,"700":0,"709":1,"711":0,"713":0,"715":0,"716":0,"720":0,"723":1,"724":0,"725":0,"726":0,"729":0,"730":0,"739":1,"740":0,"741":0,"742":0,"745":0,"746":0,"747":0,"756":1,"758":0,"759":0,"761":0,"763":0,"764":0,"765":0,"768":0,"769":0,"770":0,"771":0,"775":0,"776":0,"778":0,"780":0,"783":1,"784":0,"785":0,"786":0,"787":0,"788":0,"791":1,"792":0,"793":0,"794":0,"797":1,"798":0,"799":0,"800":0,"803":0,"804":0,"806":0,"807":0,"808":0,"811":1,"812":0,"814":0,"815":0,"817":0,"818":0,"820":0,"821":0,"824":0,"825":0,"827":0,"831":1,"832":0,"834":0,"835":0,"836":0,"837":0,"838":0,"840":0,"841":0,"842":0,"843":0,"844":0,"846":0,"847":0,"849":0,"853":1,"854":0,"868":0,"869":0,"870":0,"872":0,"875":0,"877":0,"880":1,"881":0,"882":0,"886":0,"887":0,"889":0,"891":0,"895":1,"897":0,"898":0,"901":1,"902":0,"913":0,"914":0,"915":0,"917":0,"920":0,"922":0,"925":1,"929":0,"930":0,"931":0,"932":0,"933":0,"934":0,"935":0,"936":0,"937":0,"938":0,"939":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/out_request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/out_request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"V2OutRequest","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":44}}},"2":{"name":"V2StreamingOutRequest","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":53}}},"3":{"name":"_sendCallRequest","line":48,"loc":{"start":{"line":48,"column":0},"end":{"line":48,"column":40}}},"4":{"name":"_sendCallRequestCont","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":44}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":43}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":62}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":28}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":34}},"7":{"start":{"line":32,"column":0},"end":{"line":35,"column":1}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":39}},"9":{"start":{"line":34,"column":4},"end":{"line":34,"column":27}},"10":{"start":{"line":37,"column":0},"end":{"line":37,"column":35}},"11":{"start":{"line":39,"column":0},"end":{"line":42,"column":1}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":48}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":27}},"14":{"start":{"line":44,"column":0},"end":{"line":44,"column":53}},"15":{"start":{"line":46,"column":0},"end":{"line":69,"column":2}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":19}},"17":{"start":{"line":51,"column":4},"end":{"line":51,"column":18}},"18":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"19":{"start":{"line":53,"column":8},"end":{"line":53,"column":36}},"20":{"start":{"line":56,"column":4},"end":{"line":63,"column":5}},"21":{"start":{"line":57,"column":8},"end":{"line":60,"column":11}},"22":{"start":{"line":62,"column":8},"end":{"line":62,"column":67}},"23":{"start":{"line":65,"column":4},"end":{"line":68,"column":5}},"24":{"start":{"line":66,"column":8},"end":{"line":66,"column":43}},"25":{"start":{"line":67,"column":8},"end":{"line":67,"column":28}},"26":{"start":{"line":71,"column":0},"end":{"line":80,"column":2}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":18}},"28":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"29":{"start":{"line":76,"column":8},"end":{"line":76,"column":36}},"30":{"start":{"line":79,"column":4},"end":{"line":79,"column":61}},"31":{"start":{"line":82,"column":0},"end":{"line":82,"column":41}},"32":{"start":{"line":83,"column":0},"end":{"line":83,"column":59}}},"branchMap":{"1":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"2":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"3":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":12}},{"start":{"line":56,"column":16},"end":{"line":56,"column":23}},{"start":{"line":56,"column":27},"end":{"line":56,"column":58}}]},"4":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"5":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","","var OutRequest = require('../out_request');","var StreamingOutRequest = require('../streaming_out_request');","","var CallFlags = require('./call_flags');","var v2 = require('./index');","var errors = require('../errors');","","function V2OutRequest(handler, id, options) {","    OutRequest.call(this, id, options);","    this.handler = handler;","}","","inherits(V2OutRequest, OutRequest);","","function V2StreamingOutRequest(handler, id, options) {","    StreamingOutRequest.call(this, id, options);","    this.handler = handler;","}","","inherits(V2StreamingOutRequest, StreamingOutRequest);","","V2OutRequest.prototype._sendCallRequest =","V2StreamingOutRequest.prototype._sendCallRequest =","function _sendCallRequest(args, isLast) {","    var err = null;","","    var flags = 0;","    if (!isLast) {","        flags |= CallFlags.Fragment;","    }","","    if (args && args[0] && args[0].length > v2.MaxArg1Size) {","        err = errors.Arg1OverLengthLimit({","            length: args[0].length,","            limit: v2.MaxArg1Size","        });","    } else {","        err = this.handler.sendCallRequestFrame(this, flags, args);","    }","","    if (err) {","        this.operations.popOutReq(this.id);","        this.emitError(err);","    }","};","","V2OutRequest.prototype._sendCallRequestCont =","V2StreamingOutRequest.prototype._sendCallRequestCont =","function _sendCallRequestCont(args, isLast) {","    var flags = 0;","    if (!isLast) {","        flags |= CallFlags.Fragment;","    }","","    this.handler.sendCallRequestContFrame(this, flags, args);","};","","module.exports.OutRequest = V2OutRequest;","module.exports.StreamingOutRequest = V2StreamingOutRequest;",""],"l":{"23":1,"25":1,"26":1,"28":1,"29":1,"30":1,"32":1,"33":0,"34":0,"37":1,"39":1,"40":0,"41":0,"44":1,"46":1,"49":0,"51":0,"52":0,"53":0,"56":0,"57":0,"62":0,"65":0,"66":0,"67":0,"71":1,"74":0,"75":0,"76":0,"79":0,"82":1,"83":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/out_request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/out_request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":1,"51":1,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":1,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":1,"108":0,"109":1,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":1,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":1,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":1,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":1,"186":0,"187":0,"188":1,"189":0,"190":0,"191":0,"192":0,"193":1,"194":0,"195":0,"196":0,"197":0,"198":1,"199":0,"200":0,"201":0,"202":0,"203":0,"204":1,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":1,"212":0,"213":0,"214":0,"215":0,"216":1,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":1,"225":0,"226":0,"227":1,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":1,"242":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0,0,0],"28":[0,0,0,0],"29":[0,0],"30":[0,0],"31":[0,0,0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0,0],"49":[0,0],"50":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},"fnMap":{"1":{"name":"TChannelOutRequest","line":35,"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":41}}},"2":{"name":"setupTracing","line":93,"loc":{"start":{"line":93,"column":44},"end":{"line":93,"column":75}}},"3":{"name":"_sendCallRequest","line":112,"loc":{"start":{"line":112,"column":48},"end":{"line":112,"column":88}}},"4":{"name":"_sendCallRequestCont","line":120,"loc":{"start":{"line":120,"column":52},"end":{"line":120,"column":96}}},"5":{"name":"emitPerAttemptErrorStat","line":129,"loc":{"start":{"line":129,"column":0},"end":{"line":129,"column":38}}},"6":{"name":"emitPerAttemptResponseStat","line":162,"loc":{"start":{"line":162,"column":0},"end":{"line":162,"column":41}}},"7":{"name":"emitPerAttemptLatency","line":194,"loc":{"start":{"line":194,"column":0},"end":{"line":194,"column":33}}},"8":{"name":"emitError","line":213,"loc":{"start":{"line":213,"column":41},"end":{"line":213,"column":65}}},"9":{"name":"extendLogInfo","line":235,"loc":{"start":{"line":235,"column":45},"end":{"line":235,"column":74}}},"10":{"name":"emitResponse","line":259,"loc":{"start":{"line":259,"column":44},"end":{"line":259,"column":71}}},"11":{"name":"onFinished","line":273,"loc":{"start":{"line":273,"column":4},"end":{"line":273,"column":26}}},"12":{"name":"markEnd","line":278,"loc":{"start":{"line":278,"column":39},"end":{"line":278,"column":58}}},"13":{"name":"sendParts","line":295,"loc":{"start":{"line":295,"column":41},"end":{"line":295,"column":75}}},"14":{"name":"sendCallRequestFrame","line":329,"loc":{"start":{"line":329,"column":52},"end":{"line":329,"column":96}}},"15":{"name":"sendCallRequestContFrame","line":361,"loc":{"start":{"line":361,"column":56},"end":{"line":361,"column":104}}},"16":{"name":"sendArg1","line":387,"loc":{"start":{"line":387,"column":40},"end":{"line":387,"column":64}}},"17":{"name":"send","line":406,"loc":{"start":{"line":406,"column":36},"end":{"line":406,"column":78}}},"18":{"name":"emitOutboundCallsSent","line":437,"loc":{"start":{"line":437,"column":0},"end":{"line":437,"column":33}}},"19":{"name":"hookupStreamCallback","line":453,"loc":{"start":{"line":453,"column":0},"end":{"line":453,"column":40}}},"20":{"name":"onError","line":460,"loc":{"start":{"line":460,"column":4},"end":{"line":460,"column":26}}},"21":{"name":"onResponse","line":468,"loc":{"start":{"line":468,"column":4},"end":{"line":468,"column":29}}},"22":{"name":"hookupCallback","line":480,"loc":{"start":{"line":480,"column":0},"end":{"line":480,"column":34}}},"23":{"name":"onError","line":491,"loc":{"start":{"line":491,"column":4},"end":{"line":491,"column":26}}},"24":{"name":"onResponse","line":499,"loc":{"start":{"line":499,"column":4},"end":{"line":499,"column":29}}},"25":{"name":"compatCall","line":512,"loc":{"start":{"line":512,"column":8},"end":{"line":512,"column":39}}},"26":{"name":"onTimeout","line":520,"loc":{"start":{"line":520,"column":41},"end":{"line":520,"column":65}}},"27":{"name":"deferOutReqTimeoutErrorEmit","line":553,"loc":{"start":{"line":553,"column":4},"end":{"line":553,"column":43}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":36}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":50}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":39}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":33}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":33}},"9":{"start":{"line":33,"column":0},"end":{"line":33,"column":40}},"10":{"start":{"line":35,"column":0},"end":{"line":87,"column":1}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":28}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":48}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":54}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":50}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":48}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":42}},"17":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"18":{"start":{"line":48,"column":4},"end":{"line":48,"column":46}},"19":{"start":{"line":49,"column":4},"end":{"line":49,"column":35}},"20":{"start":{"line":50,"column":4},"end":{"line":50,"column":29}},"21":{"start":{"line":51,"column":4},"end":{"line":51,"column":44}},"22":{"start":{"line":52,"column":4},"end":{"line":52,"column":41}},"23":{"start":{"line":53,"column":4},"end":{"line":53,"column":52}},"24":{"start":{"line":55,"column":4},"end":{"line":55,"column":47}},"25":{"start":{"line":56,"column":4},"end":{"line":56,"column":40}},"26":{"start":{"line":57,"column":4},"end":{"line":57,"column":43}},"27":{"start":{"line":58,"column":4},"end":{"line":58,"column":49}},"28":{"start":{"line":59,"column":4},"end":{"line":59,"column":66}},"29":{"start":{"line":60,"column":4},"end":{"line":60,"column":41}},"30":{"start":{"line":61,"column":4},"end":{"line":61,"column":50}},"31":{"start":{"line":62,"column":4},"end":{"line":62,"column":45}},"32":{"start":{"line":63,"column":4},"end":{"line":63,"column":54}},"33":{"start":{"line":66,"column":4},"end":{"line":66,"column":27}},"34":{"start":{"line":67,"column":4},"end":{"line":67,"column":31}},"35":{"start":{"line":68,"column":4},"end":{"line":68,"column":17}},"36":{"start":{"line":69,"column":4},"end":{"line":69,"column":32}},"37":{"start":{"line":70,"column":4},"end":{"line":70,"column":19}},"38":{"start":{"line":71,"column":4},"end":{"line":71,"column":17}},"39":{"start":{"line":72,"column":4},"end":{"line":72,"column":26}},"40":{"start":{"line":73,"column":4},"end":{"line":73,"column":21}},"41":{"start":{"line":74,"column":4},"end":{"line":74,"column":23}},"42":{"start":{"line":75,"column":4},"end":{"line":75,"column":21}},"43":{"start":{"line":76,"column":4},"end":{"line":76,"column":20}},"44":{"start":{"line":77,"column":4},"end":{"line":77,"column":20}},"45":{"start":{"line":80,"column":4},"end":{"line":80,"column":25}},"46":{"start":{"line":81,"column":4},"end":{"line":81,"column":26}},"47":{"start":{"line":83,"column":4},"end":{"line":86,"column":5}},"48":{"start":{"line":85,"column":8},"end":{"line":85,"column":35}},"49":{"start":{"line":89,"column":0},"end":{"line":89,"column":43}},"50":{"start":{"line":91,"column":0},"end":{"line":91,"column":64}},"51":{"start":{"line":93,"column":0},"end":{"line":110,"column":2}},"52":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"53":{"start":{"line":96,"column":4},"end":{"line":107,"column":7}},"54":{"start":{"line":109,"column":4},"end":{"line":109,"column":42}},"55":{"start":{"line":112,"column":0},"end":{"line":118,"column":2}},"56":{"start":{"line":113,"column":4},"end":{"line":113,"column":20}},"57":{"start":{"line":114,"column":4},"end":{"line":117,"column":7}},"58":{"start":{"line":120,"column":0},"end":{"line":126,"column":2}},"59":{"start":{"line":121,"column":4},"end":{"line":121,"column":20}},"60":{"start":{"line":122,"column":4},"end":{"line":125,"column":7}},"61":{"start":{"line":128,"column":0},"end":{"line":159,"column":2}},"62":{"start":{"line":130,"column":4},"end":{"line":130,"column":20}},"63":{"start":{"line":132,"column":4},"end":{"line":158,"column":5}},"64":{"start":{"line":133,"column":8},"end":{"line":144,"column":10}},"65":{"start":{"line":146,"column":8},"end":{"line":157,"column":10}},"66":{"start":{"line":161,"column":0},"end":{"line":191,"column":2}},"67":{"start":{"line":163,"column":4},"end":{"line":163,"column":20}},"68":{"start":{"line":165,"column":4},"end":{"line":190,"column":5}},"69":{"start":{"line":166,"column":8},"end":{"line":177,"column":10}},"70":{"start":{"line":179,"column":11},"end":{"line":190,"column":5}},"71":{"start":{"line":180,"column":8},"end":{"line":189,"column":10}},"72":{"start":{"line":193,"column":0},"end":{"line":211,"column":2}},"73":{"start":{"line":195,"column":4},"end":{"line":195,"column":20}},"74":{"start":{"line":197,"column":4},"end":{"line":197,"column":40}},"75":{"start":{"line":199,"column":4},"end":{"line":210,"column":6}},"76":{"start":{"line":213,"column":0},"end":{"line":233,"column":2}},"77":{"start":{"line":214,"column":4},"end":{"line":214,"column":20}},"78":{"start":{"line":216,"column":4},"end":{"line":224,"column":5}},"79":{"start":{"line":217,"column":8},"end":{"line":221,"column":12}},"80":{"start":{"line":223,"column":8},"end":{"line":223,"column":45}},"81":{"start":{"line":226,"column":4},"end":{"line":226,"column":19}},"82":{"start":{"line":227,"column":4},"end":{"line":227,"column":33}},"83":{"start":{"line":228,"column":4},"end":{"line":228,"column":38}},"84":{"start":{"line":230,"column":4},"end":{"line":230,"column":50}},"85":{"start":{"line":232,"column":4},"end":{"line":232,"column":36}},"86":{"start":{"line":235,"column":0},"end":{"line":257,"column":2}},"87":{"start":{"line":236,"column":4},"end":{"line":236,"column":20}},"88":{"start":{"line":238,"column":4},"end":{"line":238,"column":32}},"89":{"start":{"line":240,"column":4},"end":{"line":240,"column":36}},"90":{"start":{"line":241,"column":4},"end":{"line":241,"column":55}},"91":{"start":{"line":242,"column":4},"end":{"line":242,"column":48}},"92":{"start":{"line":243,"column":4},"end":{"line":243,"column":40}},"93":{"start":{"line":244,"column":4},"end":{"line":244,"column":38}},"94":{"start":{"line":245,"column":4},"end":{"line":245,"column":34}},"95":{"start":{"line":247,"column":4},"end":{"line":251,"column":5}},"96":{"start":{"line":248,"column":8},"end":{"line":248,"column":44}},"97":{"start":{"line":250,"column":8},"end":{"line":250,"column":48}},"98":{"start":{"line":256,"column":4},"end":{"line":256,"column":16}},"99":{"start":{"line":259,"column":0},"end":{"line":276,"column":2}},"100":{"start":{"line":260,"column":4},"end":{"line":260,"column":20}},"101":{"start":{"line":262,"column":4},"end":{"line":262,"column":19}},"102":{"start":{"line":263,"column":4},"end":{"line":263,"column":30}},"103":{"start":{"line":265,"column":4},"end":{"line":269,"column":5}},"104":{"start":{"line":266,"column":8},"end":{"line":266,"column":23}},"105":{"start":{"line":268,"column":8},"end":{"line":268,"column":44}},"106":{"start":{"line":271,"column":4},"end":{"line":271,"column":44}},"107":{"start":{"line":273,"column":4},"end":{"line":275,"column":5}},"108":{"start":{"line":274,"column":8},"end":{"line":274,"column":23}},"109":{"start":{"line":278,"column":0},"end":{"line":293,"column":2}},"110":{"start":{"line":279,"column":4},"end":{"line":279,"column":20}},"111":{"start":{"line":281,"column":4},"end":{"line":281,"column":53}},"112":{"start":{"line":283,"column":4},"end":{"line":289,"column":5}},"113":{"start":{"line":284,"column":8},"end":{"line":286,"column":12}},"114":{"start":{"line":288,"column":8},"end":{"line":288,"column":45}},"115":{"start":{"line":291,"column":4},"end":{"line":291,"column":33}},"116":{"start":{"line":292,"column":4},"end":{"line":292,"column":46}},"117":{"start":{"line":295,"column":0},"end":{"line":327,"column":2}},"118":{"start":{"line":296,"column":4},"end":{"line":296,"column":20}},"119":{"start":{"line":298,"column":4},"end":{"line":303,"column":5}},"120":{"start":{"line":299,"column":8},"end":{"line":301,"column":12}},"121":{"start":{"line":302,"column":8},"end":{"line":302,"column":15}},"122":{"start":{"line":305,"column":4},"end":{"line":326,"column":5}},"123":{"start":{"line":307,"column":12},"end":{"line":307,"column":53}},"124":{"start":{"line":308,"column":12},"end":{"line":308,"column":18}},"125":{"start":{"line":310,"column":12},"end":{"line":310,"column":57}},"126":{"start":{"line":311,"column":12},"end":{"line":311,"column":18}},"127":{"start":{"line":315,"column":12},"end":{"line":318,"column":16}},"128":{"start":{"line":319,"column":12},"end":{"line":319,"column":18}},"129":{"start":{"line":322,"column":12},"end":{"line":322,"column":18}},"130":{"start":{"line":325,"column":12},"end":{"line":325,"column":18}},"131":{"start":{"line":329,"column":0},"end":{"line":359,"column":2}},"132":{"start":{"line":330,"column":4},"end":{"line":330,"column":20}},"133":{"start":{"line":331,"column":4},"end":{"line":358,"column":5}},"134":{"start":{"line":333,"column":12},"end":{"line":333,"column":51}},"135":{"start":{"line":334,"column":12},"end":{"line":336,"column":13}},"136":{"start":{"line":335,"column":16},"end":{"line":335,"column":41}},"137":{"start":{"line":337,"column":12},"end":{"line":337,"column":48}},"138":{"start":{"line":338,"column":12},"end":{"line":342,"column":13}},"139":{"start":{"line":339,"column":16},"end":{"line":339,"column":41}},"140":{"start":{"line":341,"column":16},"end":{"line":341,"column":46}},"141":{"start":{"line":343,"column":12},"end":{"line":343,"column":18}},"142":{"start":{"line":345,"column":12},"end":{"line":348,"column":16}},"143":{"start":{"line":349,"column":12},"end":{"line":349,"column":18}},"144":{"start":{"line":351,"column":12},"end":{"line":353,"column":16}},"145":{"start":{"line":354,"column":12},"end":{"line":354,"column":18}},"146":{"start":{"line":357,"column":12},"end":{"line":357,"column":18}},"147":{"start":{"line":361,"column":0},"end":{"line":385,"column":2}},"148":{"start":{"line":362,"column":4},"end":{"line":362,"column":20}},"149":{"start":{"line":363,"column":4},"end":{"line":384,"column":5}},"150":{"start":{"line":365,"column":12},"end":{"line":368,"column":16}},"151":{"start":{"line":369,"column":12},"end":{"line":369,"column":18}},"152":{"start":{"line":371,"column":12},"end":{"line":371,"column":52}},"153":{"start":{"line":372,"column":12},"end":{"line":374,"column":13}},"154":{"start":{"line":373,"column":16},"end":{"line":373,"column":41}},"155":{"start":{"line":375,"column":12},"end":{"line":375,"column":18}},"156":{"start":{"line":377,"column":12},"end":{"line":379,"column":16}},"157":{"start":{"line":380,"column":12},"end":{"line":380,"column":18}},"158":{"start":{"line":383,"column":12},"end":{"line":383,"column":18}},"159":{"start":{"line":387,"column":0},"end":{"line":404,"column":2}},"160":{"start":{"line":388,"column":4},"end":{"line":388,"column":20}},"161":{"start":{"line":390,"column":4},"end":{"line":395,"column":5}},"162":{"start":{"line":391,"column":8},"end":{"line":393,"column":12}},"163":{"start":{"line":394,"column":8},"end":{"line":394,"column":20}},"164":{"start":{"line":397,"column":4},"end":{"line":397,"column":21}},"165":{"start":{"line":398,"column":4},"end":{"line":398,"column":33}},"166":{"start":{"line":399,"column":4},"end":{"line":401,"column":5}},"167":{"start":{"line":400,"column":8},"end":{"line":400,"column":39}},"168":{"start":{"line":403,"column":4},"end":{"line":403,"column":16}},"169":{"start":{"line":406,"column":0},"end":{"line":434,"column":2}},"170":{"start":{"line":407,"column":4},"end":{"line":407,"column":20}},"171":{"start":{"line":409,"column":4},"end":{"line":411,"column":5}},"172":{"start":{"line":410,"column":8},"end":{"line":410,"column":38}},"173":{"start":{"line":413,"column":4},"end":{"line":418,"column":5}},"174":{"start":{"line":414,"column":8},"end":{"line":416,"column":12}},"175":{"start":{"line":417,"column":8},"end":{"line":417,"column":20}},"176":{"start":{"line":420,"column":4},"end":{"line":420,"column":24}},"177":{"start":{"line":422,"column":4},"end":{"line":425,"column":5}},"178":{"start":{"line":423,"column":8},"end":{"line":423,"column":56}},"179":{"start":{"line":424,"column":8},"end":{"line":424,"column":56}},"180":{"start":{"line":427,"column":4},"end":{"line":429,"column":5}},"181":{"start":{"line":428,"column":8},"end":{"line":428,"column":37}},"182":{"start":{"line":431,"column":4},"end":{"line":431,"column":56}},"183":{"start":{"line":432,"column":4},"end":{"line":432,"column":32}},"184":{"start":{"line":433,"column":4},"end":{"line":433,"column":16}},"185":{"start":{"line":436,"column":0},"end":{"line":450,"column":2}},"186":{"start":{"line":438,"column":4},"end":{"line":438,"column":20}},"187":{"start":{"line":440,"column":4},"end":{"line":449,"column":6}},"188":{"start":{"line":452,"column":0},"end":{"line":477,"column":2}},"189":{"start":{"line":454,"column":4},"end":{"line":454,"column":20}},"190":{"start":{"line":455,"column":4},"end":{"line":455,"column":23}},"191":{"start":{"line":457,"column":4},"end":{"line":457,"column":32}},"192":{"start":{"line":458,"column":4},"end":{"line":458,"column":38}},"193":{"start":{"line":460,"column":4},"end":{"line":466,"column":5}},"194":{"start":{"line":461,"column":8},"end":{"line":463,"column":9}},"195":{"start":{"line":462,"column":12},"end":{"line":462,"column":19}},"196":{"start":{"line":464,"column":8},"end":{"line":464,"column":22}},"197":{"start":{"line":465,"column":8},"end":{"line":465,"column":34}},"198":{"start":{"line":468,"column":4},"end":{"line":474,"column":5}},"199":{"start":{"line":469,"column":8},"end":{"line":471,"column":9}},"200":{"start":{"line":470,"column":12},"end":{"line":470,"column":19}},"201":{"start":{"line":472,"column":8},"end":{"line":472,"column":22}},"202":{"start":{"line":473,"column":8},"end":{"line":473,"column":34}},"203":{"start":{"line":476,"column":4},"end":{"line":476,"column":16}},"204":{"start":{"line":479,"column":0},"end":{"line":518,"column":2}},"205":{"start":{"line":481,"column":4},"end":{"line":481,"column":20}},"206":{"start":{"line":483,"column":4},"end":{"line":485,"column":5}},"207":{"start":{"line":484,"column":8},"end":{"line":484,"column":51}},"208":{"start":{"line":486,"column":4},"end":{"line":486,"column":23}},"209":{"start":{"line":488,"column":4},"end":{"line":488,"column":32}},"210":{"start":{"line":489,"column":4},"end":{"line":489,"column":38}},"211":{"start":{"line":491,"column":4},"end":{"line":497,"column":5}},"212":{"start":{"line":492,"column":8},"end":{"line":494,"column":9}},"213":{"start":{"line":493,"column":12},"end":{"line":493,"column":19}},"214":{"start":{"line":495,"column":8},"end":{"line":495,"column":22}},"215":{"start":{"line":496,"column":8},"end":{"line":496,"column":34}},"216":{"start":{"line":499,"column":4},"end":{"line":515,"column":5}},"217":{"start":{"line":500,"column":8},"end":{"line":502,"column":9}},"218":{"start":{"line":501,"column":12},"end":{"line":501,"column":19}},"219":{"start":{"line":503,"column":8},"end":{"line":503,"column":22}},"220":{"start":{"line":504,"column":8},"end":{"line":507,"column":9}},"221":{"start":{"line":505,"column":12},"end":{"line":505,"column":52}},"222":{"start":{"line":506,"column":12},"end":{"line":506,"column":19}},"223":{"start":{"line":508,"column":8},"end":{"line":511,"column":23}},"224":{"start":{"line":512,"column":8},"end":{"line":514,"column":9}},"225":{"start":{"line":513,"column":12},"end":{"line":513,"column":53}},"226":{"start":{"line":517,"column":4},"end":{"line":517,"column":16}},"227":{"start":{"line":520,"column":0},"end":{"line":556,"column":2}},"228":{"start":{"line":521,"column":4},"end":{"line":521,"column":20}},"229":{"start":{"line":522,"column":4},"end":{"line":522,"column":21}},"230":{"start":{"line":524,"column":4},"end":{"line":529,"column":5}},"231":{"start":{"line":525,"column":8},"end":{"line":528,"column":12}},"232":{"start":{"line":531,"column":4},"end":{"line":551,"column":5}},"233":{"start":{"line":534,"column":8},"end":{"line":541,"column":11}},"234":{"start":{"line":542,"column":8},"end":{"line":545,"column":9}},"235":{"start":{"line":543,"column":12},"end":{"line":543,"column":54}},"236":{"start":{"line":544,"column":12},"end":{"line":544,"column":47}},"237":{"start":{"line":547,"column":8},"end":{"line":547,"column":54}},"238":{"start":{"line":548,"column":11},"end":{"line":551,"column":5}},"239":{"start":{"line":549,"column":8},"end":{"line":549,"column":50}},"240":{"start":{"line":550,"column":8},"end":{"line":550,"column":43}},"241":{"start":{"line":553,"column":4},"end":{"line":555,"column":5}},"242":{"start":{"line":554,"column":8},"end":{"line":554,"column":37}}},"branchMap":{"1":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":22},"end":{"line":48,"column":40}},{"start":{"line":48,"column":44},"end":{"line":48,"column":45}}]},"2":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":34}},{"start":{"line":51,"column":38},"end":{"line":51,"column":43}}]},"3":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":18},"end":{"line":52,"column":32}},{"start":{"line":52,"column":36},"end":{"line":52,"column":40}}]},"4":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":23},"end":{"line":53,"column":42}},{"start":{"line":53,"column":46},"end":{"line":53,"column":51}}]},"5":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":22},"end":{"line":55,"column":40}},{"start":{"line":55,"column":44},"end":{"line":55,"column":46}}]},"6":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":19},"end":{"line":56,"column":34}},{"start":{"line":56,"column":38},"end":{"line":56,"column":39}}]},"7":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":19},"end":{"line":57,"column":34}},{"start":{"line":57,"column":38},"end":{"line":57,"column":42}}]},"8":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":23},"end":{"line":58,"column":42}},{"start":{"line":58,"column":46},"end":{"line":58,"column":48}}]},"9":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":22},"end":{"line":59,"column":37}},{"start":{"line":59,"column":41},"end":{"line":59,"column":59}},{"start":{"line":59,"column":63},"end":{"line":59,"column":65}}]},"10":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":19},"end":{"line":60,"column":34}},{"start":{"line":60,"column":38},"end":{"line":60,"column":40}}]},"11":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":24},"end":{"line":61,"column":44}},{"start":{"line":61,"column":48},"end":{"line":61,"column":49}}]},"12":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":20},"end":{"line":62,"column":36}},{"start":{"line":62,"column":40},"end":{"line":62,"column":44}}]},"13":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":24},"end":{"line":63,"column":44}},{"start":{"line":63,"column":48},"end":{"line":63,"column":53}}]},"14":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"15":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":8},"end":{"line":83,"column":30}},{"start":{"line":83,"column":34},"end":{"line":83,"column":52}}]},"16":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":20},"end":{"line":98,"column":34}},{"start":{"line":98,"column":38},"end":{"line":98,"column":57}}]},"17":{"line":103,"type":"cond-expr","locations":[{"start":{"line":103,"column":31},"end":{"line":103,"column":32}},{"start":{"line":103,"column":35},"end":{"line":103,"column":36}}]},"18":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"19":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":16},"end":{"line":154,"column":24}},{"start":{"line":154,"column":28},"end":{"line":154,"column":37}}]},"20":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":4},"end":{"line":165,"column":4}},{"start":{"line":165,"column":4},"end":{"line":165,"column":4}}]},"21":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":11},"end":{"line":179,"column":11}},{"start":{"line":179,"column":11},"end":{"line":179,"column":11}}]},"22":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":4},"end":{"line":216,"column":4}},{"start":{"line":216,"column":4},"end":{"line":216,"column":4}}]},"23":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":4},"end":{"line":247,"column":4}},{"start":{"line":247,"column":4},"end":{"line":247,"column":4}}]},"24":{"line":265,"type":"if","locations":[{"start":{"line":265,"column":4},"end":{"line":265,"column":4}},{"start":{"line":265,"column":4},"end":{"line":265,"column":4}}]},"25":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":4},"end":{"line":283,"column":4}},{"start":{"line":283,"column":4},"end":{"line":283,"column":4}}]},"26":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":4},"end":{"line":298,"column":4}},{"start":{"line":298,"column":4},"end":{"line":298,"column":4}}]},"27":{"line":305,"type":"switch","locations":[{"start":{"line":306,"column":8},"end":{"line":308,"column":18}},{"start":{"line":309,"column":8},"end":{"line":311,"column":18}},{"start":{"line":312,"column":8},"end":{"line":319,"column":18}},{"start":{"line":320,"column":8},"end":{"line":322,"column":18}},{"start":{"line":323,"column":8},"end":{"line":325,"column":18}}]},"28":{"line":331,"type":"switch","locations":[{"start":{"line":332,"column":8},"end":{"line":343,"column":18}},{"start":{"line":344,"column":8},"end":{"line":349,"column":18}},{"start":{"line":350,"column":8},"end":{"line":354,"column":18}},{"start":{"line":355,"column":8},"end":{"line":357,"column":18}}]},"29":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":12},"end":{"line":334,"column":12}},{"start":{"line":334,"column":12},"end":{"line":334,"column":12}}]},"30":{"line":338,"type":"if","locations":[{"start":{"line":338,"column":12},"end":{"line":338,"column":12}},{"start":{"line":338,"column":12},"end":{"line":338,"column":12}}]},"31":{"line":363,"type":"switch","locations":[{"start":{"line":364,"column":8},"end":{"line":369,"column":18}},{"start":{"line":370,"column":8},"end":{"line":375,"column":18}},{"start":{"line":376,"column":8},"end":{"line":380,"column":18}},{"start":{"line":381,"column":8},"end":{"line":383,"column":18}}]},"32":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":12},"end":{"line":372,"column":12}},{"start":{"line":372,"column":12},"end":{"line":372,"column":12}}]},"33":{"line":390,"type":"if","locations":[{"start":{"line":390,"column":4},"end":{"line":390,"column":4}},{"start":{"line":390,"column":4},"end":{"line":390,"column":4}}]},"34":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":4},"end":{"line":399,"column":4}},{"start":{"line":399,"column":4},"end":{"line":399,"column":4}}]},"35":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":4},"end":{"line":409,"column":4}},{"start":{"line":409,"column":4},"end":{"line":409,"column":4}}]},"36":{"line":413,"type":"if","locations":[{"start":{"line":413,"column":4},"end":{"line":413,"column":4}},{"start":{"line":413,"column":4},"end":{"line":413,"column":4}}]},"37":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":4},"end":{"line":422,"column":4}},{"start":{"line":422,"column":4},"end":{"line":422,"column":4}}]},"38":{"line":427,"type":"if","locations":[{"start":{"line":427,"column":4},"end":{"line":427,"column":4}},{"start":{"line":427,"column":4},"end":{"line":427,"column":4}}]},"39":{"line":427,"type":"binary-expr","locations":[{"start":{"line":427,"column":8},"end":{"line":427,"column":30}},{"start":{"line":427,"column":34},"end":{"line":427,"column":55}}]},"40":{"line":461,"type":"if","locations":[{"start":{"line":461,"column":8},"end":{"line":461,"column":8}},{"start":{"line":461,"column":8},"end":{"line":461,"column":8}}]},"41":{"line":469,"type":"if","locations":[{"start":{"line":469,"column":8},"end":{"line":469,"column":8}},{"start":{"line":469,"column":8},"end":{"line":469,"column":8}}]},"42":{"line":483,"type":"if","locations":[{"start":{"line":483,"column":4},"end":{"line":483,"column":4}},{"start":{"line":483,"column":4},"end":{"line":483,"column":4}}]},"43":{"line":492,"type":"if","locations":[{"start":{"line":492,"column":8},"end":{"line":492,"column":8}},{"start":{"line":492,"column":8},"end":{"line":492,"column":8}}]},"44":{"line":500,"type":"if","locations":[{"start":{"line":500,"column":8},"end":{"line":500,"column":8}},{"start":{"line":500,"column":8},"end":{"line":500,"column":8}}]},"45":{"line":504,"type":"if","locations":[{"start":{"line":504,"column":8},"end":{"line":504,"column":8}},{"start":{"line":504,"column":8},"end":{"line":504,"column":8}}]},"46":{"line":524,"type":"if","locations":[{"start":{"line":524,"column":4},"end":{"line":524,"column":4}},{"start":{"line":524,"column":4},"end":{"line":524,"column":4}}]},"47":{"line":531,"type":"if","locations":[{"start":{"line":531,"column":4},"end":{"line":531,"column":4}},{"start":{"line":531,"column":4},"end":{"line":531,"column":4}}]},"48":{"line":531,"type":"binary-expr","locations":[{"start":{"line":531,"column":8},"end":{"line":531,"column":17}},{"start":{"line":531,"column":21},"end":{"line":531,"column":54}},{"start":{"line":532,"column":8},"end":{"line":532,"column":43}}]},"49":{"line":542,"type":"if","locations":[{"start":{"line":542,"column":8},"end":{"line":542,"column":8}},{"start":{"line":542,"column":8},"end":{"line":542,"column":8}}]},"50":{"line":548,"type":"if","locations":[{"start":{"line":548,"column":11},"end":{"line":548,"column":11}},{"start":{"line":548,"column":11},"end":{"line":548,"column":11}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = TChannelOutRequest;","","var assert = require('assert');","var EventEmitter = require('./lib/event_emitter');","var stat = require('./stat-tags.js');","var inherits = require('util').inherits;","var parallel = require('run-parallel');","var process = require('process');","","var errors = require('./errors');","var States = require('./reqres_states');","","function TChannelOutRequest(id, options) {","    /*eslint max-statements: [2, 50], complexity: [2, 25]*/","","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.responseEvent = this.defineEvent('response');","    this.finishEvent = this.defineEvent('finish');","","    // TODO perhaps these ought not be options","    assert(options.channel, 'channel required');","    assert(options.peer, 'peer required');","    assert(id, 'id is required');","","    this.retryCount = options.retryCount || 0;","    this.channel = options.channel;","    this.peer = options.peer;","    this.logical = options.logical || false;","    this.parent = options.parent || null;","    this.hasNoParent = options.hasNoParent || false;","","    this.remoteAddr = options.remoteAddr || '';","    this.timeout = options.timeout || 0;","    this.tracing = options.tracing || null;","    this.serviceName = options.serviceName || '';","    this.callerName = options.headers && options.headers.cn || '';","    this.headers = options.headers || {};","    this.checksumType = options.checksumType || 0;","    this.checksum = options.checksum || null;","    this.forwardTrace = options.forwardTrace || false;","","    // All self requests have id 0","    this.operations = null;","    this.timeHeapHandle = null;","    this.id = id;","    this.state = States.Initial;","    this.start = 0;","    this.end = 0;","    this.streamed = false;","    this.arg1 = null;","    this.endpoint = '';","    this.span = null;","    this.err = null;","    this.res = null;","","    // set for requests created on draining connections","    this.drained = false;","    this.drainReason = '';","","    if (options.channel.tracer && !this.forwardTrace) {","        // new span with new ids","        this.setupTracing(options);","    }","}","","inherits(TChannelOutRequest, EventEmitter);","","TChannelOutRequest.prototype.type = 'tchannel.outgoing-request';","","TChannelOutRequest.prototype.setupTracing = function setupTracing(options) {","    var self = this;","","    self.span = options.channel.tracer.setupNewSpan({","        outgoing: true,","        parentSpan: options.parent && options.parent.span,","        hasNoParent: options.hasNoParent,","        spanid: null,","        traceid: null,","        parentid: null,","        flags: options.trace ? 1 : 0,","        remoteName: self.remoteAddr,","        serviceName: self.serviceName,","        name: '' // fill this in later","    });","","    self.tracing = self.span.getTracing();","};","","TChannelOutRequest.prototype._sendCallRequest = function _sendCallRequest(args, isLast) {","    var self = this;","    throw errors.UnimplementedMethod({","        className: self.constructor.name,","        methodName: '_sendCallRequest'","    });","};","","TChannelOutRequest.prototype._sendCallRequestCont = function _sendCallRequestCont(args, isLast) {","    var self = this;","    throw errors.UnimplementedMethod({","        className: self.constructor.name,","        methodName: '_sendCallRequestCont'","    });","};","","TChannelOutRequest.prototype.emitPerAttemptErrorStat =","function emitPerAttemptErrorStat(err) {","    var self = this;","","    if (err.isErrorFrame) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.per-attempt.system-errors',","            'counter',","            1,","            new stat.OutboundCallsSystemErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                err.codeName,","                self.retryCount","            )","        );","    } else {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.per-attempt.operational-errors',","            'counter',","            1,","            new stat.OutboundCallsPerAttemptOperationalErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                err.type || 'unknown',","                self.retryCounts","            )","        );","    }","};","","TChannelOutRequest.prototype.emitPerAttemptResponseStat =","function emitPerAttemptResponseStat(res) {","    var self = this;","","    if (!res.ok) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.per-attempt.app-errors',","            'counter',","            1,","            new stat.OutboundCallsPerAttemptAppErrorsTags(","                self.serviceName,","                self.callerName,","                self.endpoint,","                'unknown',","                self.retryCount","            )","        );","    // Only emit success if peer-to-peer request or relay","    } else if (self.logical === false) {","        self.channel.emitFastStat(","            'tchannel.outbound.calls.success',","            'counter',","            1,","            new stat.OutboundCallsSuccessTags(","                self.serviceName,","                self.callerName,","                self.endpoint","            )","        );","    }","};","","TChannelOutRequest.prototype.emitPerAttemptLatency =","function emitPerAttemptLatency() {","    var self = this;","","    var latency = self.end - self.start;","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.per-attempt-latency',","        'timing',","        latency,","        new stat.OutboundCallsPerAttemptLatencyTags(","            self.serviceName,","            self.callerName,","            self.endpoint,","            self.remoteAddr,","            self.retryCount","        )","    );","};","","TChannelOutRequest.prototype.emitError = function emitError(err) {","    var self = this;","","    if (self.end) {","        self.channel.logger.warn('Unexpected error after end for OutRequest', self.extendLogInfo({","            hasOldResponse: !!self.res,","            oldError: self.err,","            error: err","        }));","    } else {","        self.end = self.channel.timers.now();","    }","","    self.err = err;","    self.emitPerAttemptLatency();","    self.emitPerAttemptErrorStat(err);","","    self.peer.invalidateScore('outreq.emitError');","","    self.errorEvent.emit(self, err);","};","","TChannelOutRequest.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    info.outRequestId = self.id;","    // TODO: .start / .end","    info.outRequestType = self.type;","    info.outRequestState = States.describe(self.state);","    info.outRequestRemoteAddr = self.remoteAddr;","    info.serviceName = self.serviceName;","    info.callerName = self.callerName;","    info.outRequestErr = self.err;","","    if (self.endpoint !== null) {","        info.outRequestArg1 = self.endpoint;","    } else {","        info.outRequestArg1 = String(self.arg1);","    }","","    // TODO: delegate to self.res.extendLogInfo ?","    // TODO: add hasOldResponse: !!self.res ?","","    return info;","};","","TChannelOutRequest.prototype.emitResponse = function emitResponse(res) {","    var self = this;","","    self.res = res;","    self.res.span = self.span;","","    if (!self.res.streamed) {","        self.markEnd();","    } else {","        self.res.finishEvent.on(onFinished);","    }","","    self.responseEvent.emit(self, self.res);","","    function onFinished() {","        self.markEnd();","    }","};","","TChannelOutRequest.prototype.markEnd = function markEnd() {","    var self = this;","","    self.peer.invalidateScore('outreq.emitResponse');","","    if (self.end) {","        self.channel.logger.warn('Unexpected response after end for OutRequest', self.extendLogInfo({","            hasOldResponse: !!self.res","        }));","    } else {","        self.end = self.channel.timers.now();","    }","","    self.emitPerAttemptLatency();","    self.emitPerAttemptResponseStat(self.res);","};","","TChannelOutRequest.prototype.sendParts = function sendParts(parts, isLast) {","    var self = this;","","    if (self.drained) {","        self.emitError(errors.RequestDrained({","            reason: self.drainReason","        }));","        return;","    }","","    switch (self.state) {","        case States.Initial:","            self.sendCallRequestFrame(parts, isLast);","            break;","        case States.Streaming:","            self.sendCallRequestContFrame(parts, isLast);","            break;","        case States.Done:","            // TODO: could probably happen normally, like say if a","            // streaming request is cancelled","            self.emitError(errors.RequestFrameState({","                attempted: 'arg parts',","                state: 'Done'","            }));","            break;","        case States.Error:","            // TODO: log warn","            break;","        default:","            // TODO: log warn","            break;","    }","};","","TChannelOutRequest.prototype.sendCallRequestFrame = function sendCallRequestFrame(args, isLast) {","    var self = this;","    switch (self.state) {","        case States.Initial:","            self.start = self.channel.timers.now();","            if (self.span) {","                self.span.annotate('cs');","            }","            self._sendCallRequest(args, isLast);","            if (isLast) {","                self.state = States.Done;","            } else {","                self.state = States.Streaming;","            }","            break;","        case States.Streaming:","            self.emitError(errors.RequestFrameState({","                attempted: 'call request',","                state: 'Streaming'","            }));","            break;","        case States.Done:","            self.emitError(errors.RequestAlreadyDone({","                attempted: 'call request'","            }));","            break;","        default:","            // TODO: log warn","            break;","    }","};","","TChannelOutRequest.prototype.sendCallRequestContFrame = function sendCallRequestContFrame(args, isLast) {","    var self = this;","    switch (self.state) {","        case States.Initial:","            self.emitError(errors.RequestFrameState({","                attempted: 'call request continuation',","                state: 'Initial'","            }));","            break;","        case States.Streaming:","            self._sendCallRequestCont(args, isLast);","            if (isLast) {","                self.state = States.Done;","            }","            break;","        case States.Done:","            self.emitError(errors.RequestAlreadyDone({","                attempted: 'call request continuation'","            }));","            break;","        default:","            // TODO: log warn","            break;","    }","};","","TChannelOutRequest.prototype.sendArg1 = function sendArg1(arg1) {","    var self = this;","","    if (self.drained) {","        self.emitError(errors.RequestDrained({","            reason: self.drainReason","        }));","        return self;","    }","","    self.arg1 = arg1;","    self.endpoint = String(arg1);","    if (self.span) {","        self.span.name = self.endpoint;","    }","","    return self;","};","","TChannelOutRequest.prototype.send = function send(arg1, arg2, arg3, callback) {","    var self = this;","","    if (callback) {","        self.hookupCallback(callback);","    }","","    if (self.drained) {","        self.emitError(errors.RequestDrained({","            reason: self.drainReason","        }));","        return self;","    }","","    self.sendArg1(arg1);","","    if (self.span) {","        self.span.annotateBinary('as', self.headers.as);","        self.span.annotateBinary('cn', self.callerName);","    }","","    if (self.logical === false && self.retryCount === 0) {","        self.emitOutboundCallsSent();","    }","","    self.sendCallRequestFrame([arg1, arg2, arg3], true);","    self.finishEvent.emit(self);","    return self;","};","","TChannelOutRequest.prototype.emitOutboundCallsSent =","function emitOutboundCallsSent() {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.sent',","        'counter',","        1,","        new stat.OutboundCallsSentTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","};","","TChannelOutRequest.prototype.hookupStreamCallback =","function hookupStreamCallback(callback) {","    var self = this;","    var called = false;","","    self.errorEvent.on(onError);","    self.responseEvent.on(onResponse);","","    function onError(err) {","        if (called) {","            return;","        }","        called = true;","        callback(err, null, null);","    }","","    function onResponse(res) {","        if (called) {","            return;","        }","        called = true;","        callback(null, self, res);","    }","","    return self;","};","","TChannelOutRequest.prototype.hookupCallback =","function hookupCallback(callback) {","    var self = this;","","    if (callback.canStream) {","        return self.hookupStreamCallback(callback);","    }","    var called = false;","","    self.errorEvent.on(onError);","    self.responseEvent.on(onResponse);","","    function onError(err) {","        if (called) {","            return;","        }","        called = true;","        callback(err, null, null);","    }","","    function onResponse(res) {","        if (called) {","            return;","        }","        called = true;","        if (!res.streamed) {","            callback(null, res, res.arg2, res.arg3);","            return;","        }","        parallel({","            arg2: res.arg2.onValueReady,","            arg3: res.arg3.onValueReady","        }, compatCall);","        function compatCall(err, args) {","            callback(err, res, args.arg2, args.arg3);","        }","    }","","    return self;","};","","TChannelOutRequest.prototype.onTimeout = function onTimeout(now) {","    var self = this;","    var timeoutError;","","    if (self.err) {","        self.channel.logger.warn('unexpected onTimeout for errored out request', self.extendLogInfo({","            hasOldResponse: !!self.res,","            timeoutTime: now","        }));","    }","","    if (!self.res || self.res.state === States.Initial ||","        self.res.state === States.Streaming","    ) {","        timeoutError = errors.RequestTimeoutError({","            id: self.id,","            start: self.start,","            elapsed: now - self.start,","            logical: self.logical,","            timeout: self.timeout,","            remoteAddr: self.remoteAddr","        });","        if (self.operations) {","            self.operations.checkLastTimeoutTime(now);","            self.operations.popOutReq(self.id);","        }","","        process.nextTick(deferOutReqTimeoutErrorEmit);","    } else if (self.operations) {","        self.operations.checkLastTimeoutTime(now);","        self.operations.popOutReq(self.id);","    }","","    function deferOutReqTimeoutErrorEmit() {","        self.emitError(timeoutError);","    }","};",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"32":1,"33":1,"35":1,"38":0,"39":0,"40":0,"41":0,"44":0,"45":0,"46":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"80":0,"81":0,"83":0,"85":0,"89":1,"91":1,"93":1,"94":0,"96":0,"109":0,"112":1,"113":0,"114":0,"120":1,"121":0,"122":0,"128":1,"130":0,"132":0,"133":0,"146":0,"161":1,"163":0,"165":0,"166":0,"179":0,"180":0,"193":1,"195":0,"197":0,"199":0,"213":1,"214":0,"216":0,"217":0,"223":0,"226":0,"227":0,"228":0,"230":0,"232":0,"235":1,"236":0,"238":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"247":0,"248":0,"250":0,"256":0,"259":1,"260":0,"262":0,"263":0,"265":0,"266":0,"268":0,"271":0,"273":1,"274":0,"278":1,"279":0,"281":0,"283":0,"284":0,"288":0,"291":0,"292":0,"295":1,"296":0,"298":0,"299":0,"302":0,"305":0,"307":0,"308":0,"310":0,"311":0,"315":0,"319":0,"322":0,"325":0,"329":1,"330":0,"331":0,"333":0,"334":0,"335":0,"337":0,"338":0,"339":0,"341":0,"343":0,"345":0,"349":0,"351":0,"354":0,"357":0,"361":1,"362":0,"363":0,"365":0,"369":0,"371":0,"372":0,"373":0,"375":0,"377":0,"380":0,"383":0,"387":1,"388":0,"390":0,"391":0,"394":0,"397":0,"398":0,"399":0,"400":0,"403":0,"406":1,"407":0,"409":0,"410":0,"413":0,"414":0,"417":0,"420":0,"422":0,"423":0,"424":0,"427":0,"428":0,"431":0,"432":0,"433":0,"436":1,"438":0,"440":0,"452":1,"454":0,"455":0,"457":0,"458":0,"460":1,"461":0,"462":0,"464":0,"465":0,"468":1,"469":0,"470":0,"472":0,"473":0,"476":0,"479":1,"481":0,"483":0,"484":0,"486":0,"488":0,"489":0,"491":1,"492":0,"493":0,"495":0,"496":0,"499":1,"500":0,"501":0,"503":0,"504":0,"505":0,"506":0,"508":0,"512":1,"513":0,"517":0,"520":1,"521":0,"522":0,"524":0,"525":0,"531":0,"534":0,"542":0,"543":0,"544":0,"547":0,"548":0,"549":0,"550":0,"553":1,"554":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/reqres_states.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/reqres_states.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0},"b":{"1":[0,0,0,0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"classify","line":28,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":51}}},"2":{"name":"describe","line":43,"loc":{"start":{"line":43,"column":26},"end":{"line":43,"column":51}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":27}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":25}},"5":{"start":{"line":28,"column":0},"end":{"line":41,"column":2}},"6":{"start":{"line":29,"column":4},"end":{"line":40,"column":5}},"7":{"start":{"line":31,"column":12},"end":{"line":31,"column":29}},"8":{"start":{"line":33,"column":12},"end":{"line":33,"column":31}},"9":{"start":{"line":35,"column":12},"end":{"line":35,"column":26}},"10":{"start":{"line":37,"column":12},"end":{"line":37,"column":27}},"11":{"start":{"line":39,"column":12},"end":{"line":39,"column":24}},"12":{"start":{"line":43,"column":0},"end":{"line":45,"column":2}},"13":{"start":{"line":44,"column":4},"end":{"line":44,"column":70}}},"branchMap":{"1":{"line":29,"type":"switch","locations":[{"start":{"line":30,"column":8},"end":{"line":31,"column":29}},{"start":{"line":32,"column":8},"end":{"line":33,"column":31}},{"start":{"line":34,"column":8},"end":{"line":35,"column":26}},{"start":{"line":36,"column":8},"end":{"line":37,"column":27}},{"start":{"line":38,"column":8},"end":{"line":39,"column":24}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":11},"end":{"line":44,"column":41}},{"start":{"line":44,"column":45},"end":{"line":44,"column":69}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports.Initial = 0;","module.exports.Streaming = 1;","module.exports.Done = 2;","module.exports.Error = 3;","","module.exports.classify = function classify(state) {","    switch (state) {","        case module.exports.Initial:","            return 'Initial';","        case module.exports.Streaming:","            return 'Streaming';","        case module.exports.Done:","            return 'Done';","        case module.exports.Error:","            return 'Error';","        default:","            return null;","    }","};","","module.exports.describe = function describe(state) {","    return module.exports.classify(state) || 'Unknown(' + state + ')';","};",""],"l":{"23":1,"24":1,"25":1,"26":1,"28":1,"29":0,"31":0,"33":0,"35":0,"37":0,"39":0,"43":1,"44":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_out_request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_out_request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"StreamingOutRequest","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":42}}},"2":{"name":"passError","line":42,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":28}}},"3":{"name":"onFrame","line":46,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":26}}},"4":{"name":"onFinish","line":55,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":24}}},"5":{"name":"sendArg1","line":64,"loc":{"start":{"line":64,"column":41},"end":{"line":64,"column":65}}},"6":{"name":"send","line":71,"loc":{"start":{"line":71,"column":37},"end":{"line":71,"column":79}}},"7":{"name":"sendStreams","line":85,"loc":{"start":{"line":85,"column":44},"end":{"line":85,"column":93}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":55}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":56}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":50}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":30,"column":0},"end":{"line":58,"column":1}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":47}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":25}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":41}},"10":{"start":{"line":34,"column":4},"end":{"line":34,"column":37}},"11":{"start":{"line":35,"column":4},"end":{"line":35,"column":37}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":45}},"14":{"start":{"line":39,"column":4},"end":{"line":39,"column":43}},"15":{"start":{"line":40,"column":4},"end":{"line":40,"column":45}},"16":{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},"17":{"start":{"line":43,"column":8},"end":{"line":43,"column":40}},"18":{"start":{"line":46,"column":4},"end":{"line":53,"column":5}},"19":{"start":{"line":47,"column":8},"end":{"line":47,"column":27}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":28}},"21":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"22":{"start":{"line":50,"column":12},"end":{"line":50,"column":37}},"23":{"start":{"line":52,"column":8},"end":{"line":52,"column":38}},"24":{"start":{"line":55,"column":4},"end":{"line":57,"column":5}},"25":{"start":{"line":56,"column":8},"end":{"line":56,"column":36}},"26":{"start":{"line":60,"column":0},"end":{"line":60,"column":50}},"27":{"start":{"line":62,"column":0},"end":{"line":62,"column":75}},"28":{"start":{"line":64,"column":0},"end":{"line":69,"column":2}},"29":{"start":{"line":65,"column":4},"end":{"line":65,"column":20}},"30":{"start":{"line":67,"column":4},"end":{"line":67,"column":59}},"31":{"start":{"line":68,"column":4},"end":{"line":68,"column":38}},"32":{"start":{"line":71,"column":0},"end":{"line":83,"column":2}},"33":{"start":{"line":72,"column":4},"end":{"line":72,"column":20}},"34":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"35":{"start":{"line":75,"column":8},"end":{"line":75,"column":38}},"36":{"start":{"line":78,"column":4},"end":{"line":78,"column":24}},"37":{"start":{"line":79,"column":4},"end":{"line":79,"column":24}},"38":{"start":{"line":80,"column":4},"end":{"line":80,"column":24}},"39":{"start":{"line":82,"column":4},"end":{"line":82,"column":16}},"40":{"start":{"line":85,"column":0},"end":{"line":96,"column":2}},"41":{"start":{"line":86,"column":4},"end":{"line":86,"column":20}},"42":{"start":{"line":88,"column":4},"end":{"line":90,"column":5}},"43":{"start":{"line":89,"column":8},"end":{"line":89,"column":44}},"44":{"start":{"line":92,"column":4},"end":{"line":92,"column":24}},"45":{"start":{"line":93,"column":4},"end":{"line":93,"column":58}},"46":{"start":{"line":95,"column":4},"end":{"line":95,"column":16}},"47":{"start":{"line":98,"column":0},"end":{"line":98,"column":37}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"2":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"3":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","","var OutArgStream = require('./argstream').OutArgStream;","var pipelineStreams = require('./lib/pipeline_streams');","var TChannelOutRequest = require('./out_request');","var States = require('./reqres_states');","","function StreamingOutRequest(id, options) {","    TChannelOutRequest.call(this, id, options);","    this.streamed = true;","    this._argstream = new OutArgStream();","    this.arg2 = this._argstream.arg2;","    this.arg3 = this._argstream.arg3;","","    var self = this;","    this._argstream.errorEvent.on(passError);","    this._argstream.frameEvent.on(onFrame);","    this._argstream.finishEvent.on(onFinish);","","    function passError(err) {","        self.errorEvent.emit(self, err);","    }","","    function onFrame(tup) {","        var parts = tup[0];","        var isLast = tup[1];","        if (self.state === States.Initial) {","            parts.unshift(self.arg1);","        }","        self.sendParts(parts, isLast);","    }","","    function onFinish() {","        self.finishEvent.emit(self);","    }","}","","inherits(StreamingOutRequest, TChannelOutRequest);","","StreamingOutRequest.prototype.type = 'tchannel.outgoing-request.streaming';","","StreamingOutRequest.prototype.sendArg1 = function sendArg1(arg1) {","    var self = this;","","    TChannelOutRequest.prototype.sendArg1.call(self, arg1);","    self._argstream.deferFlushParts();","};","","StreamingOutRequest.prototype.send = function send(arg1, arg2, arg3, callback) {","    var self = this;","","    if (callback) {","        self.hookupCallback(callback);","    }","","    self.sendArg1(arg1);","    self.arg2.end(arg2);","    self.arg3.end(arg3);","","    return self;","};","","StreamingOutRequest.prototype.sendStreams = function sendStreams(arg1, arg2, arg3, callback) {","    var self = this;","","    if (callback) {","        self.hookupStreamCallback(callback);","    }","","    self.sendArg1(arg1);","    pipelineStreams([arg2, arg3], [self.arg2, self.arg3]);","","    return self;","};","","module.exports = StreamingOutRequest;",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"37":0,"38":0,"39":0,"40":0,"42":1,"43":0,"46":1,"47":0,"48":0,"49":0,"50":0,"52":0,"55":1,"56":0,"60":1,"62":1,"64":1,"65":0,"67":0,"68":0,"71":1,"72":0,"74":0,"75":0,"78":0,"79":0,"80":0,"82":0,"85":1,"86":0,"88":0,"89":0,"92":0,"93":0,"95":0,"98":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/argstream.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/argstream.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":1,"23":0,"24":0,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":1,"77":0,"78":1,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1,"109":0,"110":0,"111":0,"112":0,"113":1,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":1,"126":0,"127":0,"128":0,"129":0,"130":0,"131":1,"132":0,"133":1,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":1,"146":0,"147":0,"148":0,"149":0,"150":1,"151":0,"152":1,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"fnMap":{"1":{"name":"ArgStream","line":49,"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":21}}},"2":{"name":"passError","line":62,"loc":{"start":{"line":62,"column":4},"end":{"line":62,"column":28}}},"3":{"name":"onArg3Start","line":66,"loc":{"start":{"line":66,"column":4},"end":{"line":66,"column":27}}},"4":{"name":"InArgStream","line":75,"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":23}}},"5":{"name":"argFinished","line":86,"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":27}}},"6":{"name":"handleFrame","line":96,"loc":{"start":{"line":96,"column":36},"end":{"line":96,"column":72}}},"7":{"name":"advance","line":128,"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":23}}},"8":{"name":"OutArgStream","line":137,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":24}}},"9":{"name":"onArg2Data","line":150,"loc":{"start":{"line":150,"column":4},"end":{"line":150,"column":31}}},"10":{"name":"onArg3Data","line":154,"loc":{"start":{"line":154,"column":4},"end":{"line":154,"column":31}}},"11":{"name":"onArg2Finish","line":158,"loc":{"start":{"line":158,"column":4},"end":{"line":158,"column":28}}},"12":{"name":"onArg3Finish","line":162,"loc":{"start":{"line":162,"column":4},"end":{"line":162,"column":28}}},"13":{"name":"_handleFrameChunk","line":174,"loc":{"start":{"line":174,"column":43},"end":{"line":174,"column":80}}},"14":{"name":"_appendFrameChunk","line":200,"loc":{"start":{"line":200,"column":43},"end":{"line":200,"column":77}}},"15":{"name":"deferFlushParts","line":211,"loc":{"start":{"line":211,"column":41},"end":{"line":211,"column":68}}},"16":{"name":"flushParts","line":214,"loc":{"start":{"line":214,"column":40},"end":{"line":214,"column":62}}},"17":{"name":"_flushParts","line":220,"loc":{"start":{"line":220,"column":37},"end":{"line":220,"column":66}}},"18":{"name":"StreamArg","line":237,"loc":{"start":{"line":237,"column":0},"end":{"line":237,"column":28}}},"19":{"name":"boundOnValueReady","line":245,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":41}}},"20":{"name":"_write","line":251,"loc":{"start":{"line":251,"column":29},"end":{"line":251,"column":72}}},"21":{"name":"onValueReady","line":260,"loc":{"start":{"line":260,"column":36},"end":{"line":260,"column":68}}},"22":{"name":"bufferStreamData","line":267,"loc":{"start":{"line":267,"column":0},"end":{"line":267,"column":44}}},"23":{"name":"onData","line":272,"loc":{"start":{"line":272,"column":4},"end":{"line":272,"column":27}}},"24":{"name":"finish","line":275,"loc":{"start":{"line":275,"column":4},"end":{"line":275,"column":25}}}},"statementMap":{"1":{"start":{"line":39,"column":0},"end":{"line":39,"column":40}},"2":{"start":{"line":40,"column":0},"end":{"line":40,"column":50}},"3":{"start":{"line":41,"column":0},"end":{"line":41,"column":48}},"4":{"start":{"line":42,"column":0},"end":{"line":42,"column":36}},"5":{"start":{"line":43,"column":0},"end":{"line":43,"column":38}},"6":{"start":{"line":44,"column":0},"end":{"line":44,"column":50}},"7":{"start":{"line":45,"column":0},"end":{"line":45,"column":54}},"8":{"start":{"line":47,"column":0},"end":{"line":47,"column":33}},"9":{"start":{"line":49,"column":0},"end":{"line":71,"column":1}},"10":{"start":{"line":50,"column":4},"end":{"line":50,"column":28}},"11":{"start":{"line":51,"column":4},"end":{"line":51,"column":48}},"12":{"start":{"line":52,"column":4},"end":{"line":52,"column":48}},"13":{"start":{"line":53,"column":4},"end":{"line":53,"column":50}},"14":{"start":{"line":54,"column":4},"end":{"line":54,"column":32}},"15":{"start":{"line":55,"column":4},"end":{"line":55,"column":32}},"16":{"start":{"line":57,"column":4},"end":{"line":57,"column":20}},"17":{"start":{"line":58,"column":4},"end":{"line":58,"column":37}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":37}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":39}},"20":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"21":{"start":{"line":63,"column":8},"end":{"line":63,"column":40}},"22":{"start":{"line":66,"column":4},"end":{"line":70,"column":5}},"23":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"24":{"start":{"line":68,"column":12},"end":{"line":68,"column":28}},"25":{"start":{"line":73,"column":0},"end":{"line":73,"column":34}},"26":{"start":{"line":75,"column":0},"end":{"line":92,"column":1}},"27":{"start":{"line":76,"column":4},"end":{"line":76,"column":25}},"28":{"start":{"line":77,"column":4},"end":{"line":77,"column":42}},"29":{"start":{"line":78,"column":4},"end":{"line":78,"column":22}},"30":{"start":{"line":79,"column":4},"end":{"line":79,"column":26}},"31":{"start":{"line":80,"column":4},"end":{"line":80,"column":26}},"32":{"start":{"line":82,"column":4},"end":{"line":82,"column":20}},"33":{"start":{"line":83,"column":4},"end":{"line":83,"column":40}},"34":{"start":{"line":84,"column":4},"end":{"line":84,"column":40}},"35":{"start":{"line":86,"column":4},"end":{"line":91,"column":5}},"36":{"start":{"line":87,"column":8},"end":{"line":90,"column":9}},"37":{"start":{"line":88,"column":12},"end":{"line":88,"column":33}},"38":{"start":{"line":89,"column":12},"end":{"line":89,"column":40}},"39":{"start":{"line":94,"column":0},"end":{"line":94,"column":33}},"40":{"start":{"line":96,"column":0},"end":{"line":135,"column":2}},"41":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"42":{"start":{"line":98,"column":4},"end":{"line":98,"column":45}},"43":{"start":{"line":100,"column":4},"end":{"line":103,"column":5}},"44":{"start":{"line":102,"column":8},"end":{"line":102,"column":47}},"45":{"start":{"line":105,"column":4},"end":{"line":115,"column":5}},"46":{"start":{"line":106,"column":8},"end":{"line":108,"column":9}},"47":{"start":{"line":107,"column":12},"end":{"line":107,"column":31}},"48":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"49":{"start":{"line":110,"column":12},"end":{"line":110,"column":18}},"50":{"start":{"line":112,"column":8},"end":{"line":114,"column":9}},"51":{"start":{"line":113,"column":12},"end":{"line":113,"column":35}},"52":{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},"53":{"start":{"line":117,"column":8},"end":{"line":117,"column":57}},"54":{"start":{"line":120,"column":4},"end":{"line":124,"column":5}},"55":{"start":{"line":121,"column":8},"end":{"line":123,"column":9}},"56":{"start":{"line":122,"column":12},"end":{"line":122,"column":31}},"57":{"start":{"line":126,"column":4},"end":{"line":126,"column":16}},"58":{"start":{"line":128,"column":4},"end":{"line":134,"column":5}},"59":{"start":{"line":129,"column":8},"end":{"line":132,"column":9}},"60":{"start":{"line":130,"column":12},"end":{"line":130,"column":46}},"61":{"start":{"line":131,"column":12},"end":{"line":131,"column":28}},"62":{"start":{"line":133,"column":8},"end":{"line":133,"column":43}},"63":{"start":{"line":137,"column":0},"end":{"line":170,"column":1}},"64":{"start":{"line":138,"column":4},"end":{"line":138,"column":25}},"65":{"start":{"line":139,"column":4},"end":{"line":139,"column":28}},"66":{"start":{"line":140,"column":4},"end":{"line":140,"column":26}},"67":{"start":{"line":141,"column":4},"end":{"line":141,"column":29}},"68":{"start":{"line":142,"column":4},"end":{"line":142,"column":25}},"69":{"start":{"line":144,"column":4},"end":{"line":144,"column":20}},"70":{"start":{"line":145,"column":4},"end":{"line":145,"column":37}},"71":{"start":{"line":146,"column":4},"end":{"line":146,"column":37}},"72":{"start":{"line":147,"column":4},"end":{"line":147,"column":41}},"73":{"start":{"line":148,"column":4},"end":{"line":148,"column":41}},"74":{"start":{"line":150,"column":4},"end":{"line":152,"column":5}},"75":{"start":{"line":151,"column":8},"end":{"line":151,"column":41}},"76":{"start":{"line":154,"column":4},"end":{"line":156,"column":5}},"77":{"start":{"line":155,"column":8},"end":{"line":155,"column":41}},"78":{"start":{"line":158,"column":4},"end":{"line":160,"column":5}},"79":{"start":{"line":159,"column":8},"end":{"line":159,"column":40}},"80":{"start":{"line":162,"column":4},"end":{"line":169,"column":5}},"81":{"start":{"line":163,"column":8},"end":{"line":168,"column":9}},"82":{"start":{"line":164,"column":12},"end":{"line":164,"column":44}},"83":{"start":{"line":165,"column":12},"end":{"line":165,"column":35}},"84":{"start":{"line":166,"column":12},"end":{"line":166,"column":33}},"85":{"start":{"line":167,"column":12},"end":{"line":167,"column":40}},"86":{"start":{"line":172,"column":0},"end":{"line":172,"column":34}},"87":{"start":{"line":174,"column":0},"end":{"line":198,"column":2}},"88":{"start":{"line":175,"column":4},"end":{"line":175,"column":20}},"89":{"start":{"line":176,"column":4},"end":{"line":196,"column":5}},"90":{"start":{"line":177,"column":8},"end":{"line":180,"column":12}},"91":{"start":{"line":181,"column":11},"end":{"line":196,"column":5}},"92":{"start":{"line":182,"column":8},"end":{"line":187,"column":9}},"93":{"start":{"line":183,"column":12},"end":{"line":186,"column":16}},"94":{"start":{"line":188,"column":8},"end":{"line":188,"column":27}},"95":{"start":{"line":189,"column":8},"end":{"line":189,"column":31}},"96":{"start":{"line":190,"column":11},"end":{"line":196,"column":5}},"97":{"start":{"line":191,"column":8},"end":{"line":193,"column":9}},"98":{"start":{"line":192,"column":12},"end":{"line":192,"column":39}},"99":{"start":{"line":195,"column":8},"end":{"line":195,"column":38}},"100":{"start":{"line":197,"column":4},"end":{"line":197,"column":27}},"101":{"start":{"line":200,"column":0},"end":{"line":209,"column":2}},"102":{"start":{"line":201,"column":4},"end":{"line":201,"column":20}},"103":{"start":{"line":202,"column":4},"end":{"line":202,"column":34}},"104":{"start":{"line":203,"column":4},"end":{"line":203,"column":28}},"105":{"start":{"line":204,"column":4},"end":{"line":208,"column":5}},"106":{"start":{"line":205,"column":8},"end":{"line":205,"column":52}},"107":{"start":{"line":207,"column":8},"end":{"line":207,"column":30}},"108":{"start":{"line":211,"column":0},"end":{"line":218,"column":2}},"109":{"start":{"line":212,"column":4},"end":{"line":212,"column":20}},"110":{"start":{"line":213,"column":4},"end":{"line":217,"column":5}},"111":{"start":{"line":214,"column":8},"end":{"line":216,"column":11}},"112":{"start":{"line":215,"column":12},"end":{"line":215,"column":31}},"113":{"start":{"line":220,"column":0},"end":{"line":235,"column":2}},"114":{"start":{"line":221,"column":4},"end":{"line":221,"column":20}},"115":{"start":{"line":222,"column":4},"end":{"line":225,"column":5}},"116":{"start":{"line":223,"column":8},"end":{"line":223,"column":41}},"117":{"start":{"line":224,"column":8},"end":{"line":224,"column":32}},"118":{"start":{"line":226,"column":4},"end":{"line":228,"column":5}},"119":{"start":{"line":227,"column":8},"end":{"line":227,"column":15}},"120":{"start":{"line":229,"column":4},"end":{"line":229,"column":29}},"121":{"start":{"line":230,"column":4},"end":{"line":230,"column":27}},"122":{"start":{"line":231,"column":4},"end":{"line":231,"column":29}},"123":{"start":{"line":232,"column":4},"end":{"line":234,"column":5}},"124":{"start":{"line":233,"column":8},"end":{"line":233,"column":52}},"125":{"start":{"line":237,"column":0},"end":{"line":248,"column":1}},"126":{"start":{"line":238,"column":4},"end":{"line":238,"column":36}},"127":{"start":{"line":239,"column":4},"end":{"line":239,"column":25}},"128":{"start":{"line":240,"column":4},"end":{"line":240,"column":20}},"129":{"start":{"line":241,"column":4},"end":{"line":241,"column":42}},"130":{"start":{"line":243,"column":4},"end":{"line":243,"column":20}},"131":{"start":{"line":245,"column":4},"end":{"line":247,"column":5}},"132":{"start":{"line":246,"column":8},"end":{"line":246,"column":37}},"133":{"start":{"line":249,"column":0},"end":{"line":249,"column":33}},"134":{"start":{"line":251,"column":0},"end":{"line":258,"column":2}},"135":{"start":{"line":252,"column":4},"end":{"line":252,"column":20}},"136":{"start":{"line":253,"column":4},"end":{"line":256,"column":5}},"137":{"start":{"line":254,"column":8},"end":{"line":254,"column":28}},"138":{"start":{"line":255,"column":8},"end":{"line":255,"column":27}},"139":{"start":{"line":257,"column":4},"end":{"line":257,"column":71}},"140":{"start":{"line":260,"column":0},"end":{"line":265,"column":2}},"141":{"start":{"line":261,"column":4},"end":{"line":261,"column":20}},"142":{"start":{"line":262,"column":4},"end":{"line":262,"column":32}},"143":{"start":{"line":263,"column":4},"end":{"line":263,"column":53}},"144":{"start":{"line":264,"column":4},"end":{"line":264,"column":32}},"145":{"start":{"line":267,"column":0},"end":{"line":286,"column":1}},"146":{"start":{"line":268,"column":4},"end":{"line":268,"column":19}},"147":{"start":{"line":269,"column":4},"end":{"line":269,"column":30}},"148":{"start":{"line":270,"column":4},"end":{"line":270,"column":31}},"149":{"start":{"line":271,"column":4},"end":{"line":271,"column":29}},"150":{"start":{"line":272,"column":4},"end":{"line":274,"column":5}},"151":{"start":{"line":273,"column":8},"end":{"line":273,"column":26}},"152":{"start":{"line":275,"column":4},"end":{"line":285,"column":5}},"153":{"start":{"line":276,"column":8},"end":{"line":276,"column":46}},"154":{"start":{"line":277,"column":8},"end":{"line":277,"column":47}},"155":{"start":{"line":278,"column":8},"end":{"line":278,"column":45}},"156":{"start":{"line":279,"column":8},"end":{"line":279,"column":39}},"157":{"start":{"line":280,"column":8},"end":{"line":280,"column":25}},"158":{"start":{"line":281,"column":8},"end":{"line":283,"column":9}},"159":{"start":{"line":282,"column":12},"end":{"line":282,"column":23}},"160":{"start":{"line":284,"column":8},"end":{"line":284,"column":27}},"161":{"start":{"line":288,"column":0},"end":{"line":288,"column":41}},"162":{"start":{"line":289,"column":0},"end":{"line":289,"column":43}}},"branchMap":{"1":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]},"2":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"3":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":12},"end":{"line":87,"column":36}},{"start":{"line":87,"column":40},"end":{"line":87,"column":54}}]},"4":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"5":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"6":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":109,"column":8}},{"start":{"line":109,"column":8},"end":{"line":109,"column":8}}]},"7":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":112,"column":8}},{"start":{"line":112,"column":8},"end":{"line":112,"column":8}}]},"8":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":4},"end":{"line":116,"column":4}},{"start":{"line":116,"column":4},"end":{"line":116,"column":4}}]},"9":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":4},"end":{"line":120,"column":4}},{"start":{"line":120,"column":4},"end":{"line":120,"column":4}}]},"10":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"11":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":8}},{"start":{"line":163,"column":8},"end":{"line":163,"column":8}}]},"12":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"13":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":11},"end":{"line":181,"column":11}},{"start":{"line":181,"column":11},"end":{"line":181,"column":11}}]},"14":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":182,"column":8}},{"start":{"line":182,"column":8},"end":{"line":182,"column":8}}]},"15":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":11},"end":{"line":190,"column":11}},{"start":{"line":190,"column":11},"end":{"line":190,"column":11}}]},"16":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"17":{"line":204,"type":"if","locations":[{"start":{"line":204,"column":4},"end":{"line":204,"column":4}},{"start":{"line":204,"column":4},"end":{"line":204,"column":4}}]},"18":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":4},"end":{"line":213,"column":4}},{"start":{"line":213,"column":4},"end":{"line":213,"column":4}}]},"19":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":4},"end":{"line":222,"column":4}},{"start":{"line":222,"column":4},"end":{"line":222,"column":4}}]},"20":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":4},"end":{"line":226,"column":4}},{"start":{"line":226,"column":4},"end":{"line":226,"column":4}}]},"21":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":4},"end":{"line":232,"column":4}},{"start":{"line":232,"column":4},"end":{"line":232,"column":4}}]},"22":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":4},"end":{"line":253,"column":4}},{"start":{"line":253,"column":4},"end":{"line":253,"column":4}}]},"23":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":8},"end":{"line":281,"column":8}},{"start":{"line":281,"column":8},"end":{"line":281,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/*"," * Provides federated streams for handling call arguments"," *"," * InArgStream is for handling incoming arg parts from call frames.  It handles"," * dispatching the arg chunks into .arg{1,2,3} streams."," *"," * OutArgStream is for creating outgoing arg parts by writing to .arg{1,2,3}"," * streams.  It handles buffering as many parts as are written within one event"," * loop tick into an Array of arg chunks.  Such array is then flushed using"," * setImmediate."," *"," * Due to the semantic complexity involved here, this code is tested by an"," * accompanying exhaistive search test in test/argstream.js.  This test has"," * both unit tests (disabled by default for speed) and an integration test."," */","","var inherits = require('util').inherits;","var EventEmitter = require('./lib/event_emitter');","var PassThrough = require('stream').PassThrough;","var Ready = require('ready-signal');","var Buffer = require('buffer').Buffer;","var setImmediate = require('timers').setImmediate;","var clearImmediate = require('timers').clearImmediate;","","var errors = require('./errors');","","function ArgStream() {","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.frameEvent = this.defineEvent('frame');","    this.finishEvent = this.defineEvent('finish');","    this.arg2 = new StreamArg();","    this.arg3 = new StreamArg();","","    var self = this;","    this.arg2.on('error', passError);","    this.arg3.on('error', passError);","    this.arg3.on('start', onArg3Start);","","    function passError(err) {","        self.errorEvent.emit(self, err);","    }","","    function onArg3Start() {","        if (!self.arg2._writableState.ended) {","            self.arg2.end();","        }","    }","}","","inherits(ArgStream, EventEmitter);","","function InArgStream() {","    ArgStream.call(this);","    this.streams = [this.arg2, this.arg3];","    this._iStream = 0;","    this.finished = false;","    this._numFinished = 0;","","    var self = this;","    this.arg2.on('finish', argFinished);","    this.arg3.on('finish', argFinished);","","    function argFinished() {","        if (++self._numFinished >= 2 && !self.finished) {","            self.finished = true;","            self.finishEvent.emit(self);","        }","    }","}","","inherits(InArgStream, ArgStream);","","InArgStream.prototype.handleFrame = function handleFrame(parts, isLast) {","    var self = this;","    var stream = self.streams[self._iStream];","","    if (self.finished) {","        // return new Error('unknown frame handling state');","        return errors.ArgStreamFinishedError();","    }","","    for (var i = 0; i < parts.length; i++) {","        if (i > 0) {","            stream = advance();","        }","        if (!stream) {","            break;","        }","        if (parts[i].length) {","            stream.write(parts[i]);","        }","    }","    if (i < parts.length) {","        return errors.ArgStreamExceededFramePartsError();","    }","","    if (isLast) {","        while (stream) {","            stream = advance();","        }","    }","","    return null;","","    function advance() {","        if (self._iStream < self.streams.length) {","            self.streams[self._iStream].end();","            self._iStream++;","        }","        return self.streams[self._iStream];","    }","};","","function OutArgStream() {","    ArgStream.call(this);","    this._flushImmed = null;","    this.finished = false;","    this.frame = [Buffer(0)];","    this.currentArgN = 2;","","    var self = this;","    this.arg2.on('data', onArg2Data);","    this.arg3.on('data', onArg3Data);","    this.arg2.on('finish', onArg2Finish);","    this.arg3.on('finish', onArg3Finish);","","    function onArg2Data(chunk) {","        self._handleFrameChunk(2, chunk);","    }","","    function onArg3Data(chunk) {","        self._handleFrameChunk(3, chunk);","    }","","    function onArg2Finish() {","        self._handleFrameChunk(2, null);","    }","","    function onArg3Finish() {","        if (!self.finished) {","            self._handleFrameChunk(3, null);","            self._flushParts(true);","            self.finished = true;","            self.finishEvent.emit(self);","        }","    }","}","","inherits(OutArgStream, ArgStream);","","OutArgStream.prototype._handleFrameChunk = function _handleFrameChunk(n, chunk) {","    var self = this;","    if (n < self.currentArgN) {","        self.errorEvent.emit(self, errors.ArgChunkOutOfOrderError({","            current: self.currentArgN,","            got: n","        }));","    } else if (n > self.currentArgN) {","        if (n - self.currentArgN > 1) {","            self.errorEvent.emit(self, errors.ArgChunkGapError({","                current: self.currentArgN,","                got: n","            }));","        }","        self.currentArgN++;","        self.frame.push(chunk);","    } else if (chunk === null) {","        if (++self.currentArgN <= 3) {","            self.frame.push(Buffer(0));","        }","    } else {","        self._appendFrameChunk(chunk);","    }","    self.deferFlushParts();","};","","OutArgStream.prototype._appendFrameChunk = function _appendFrameChunk(chunk) {","    var self = this;","    var i = self.frame.length - 1;","    var buf = self.frame[i];","    if (buf.length) {","        self.frame[i] = Buffer.concat([buf, chunk]);","    } else {","        self.frame[i] = chunk;","    }","};","","OutArgStream.prototype.deferFlushParts = function deferFlushParts() {","    var self = this;","    if (!self._flushImmed) {","        self._flushImmed = setImmediate(function flushParts() {","            self._flushParts();","        });","    }","};","","OutArgStream.prototype._flushParts = function _flushParts(isLast) {","    var self = this;","    if (self._flushImmed) {","        clearImmediate(self._flushImmed);","        self._flushImmed = null;","    }","    if (self.finished) {","        return;","    }","    isLast = Boolean(isLast);","    var frame = self.frame;","    self.frame = [Buffer(0)];","    if (frame.length) {","        self.frameEvent.emit(self, [frame, isLast]);","    }","};","","function StreamArg(options) {","    PassThrough.call(this, options);","    this.started = false;","    this.buf = null;","    this.onValueReady = boundOnValueReady;","","    var self = this;","","    function boundOnValueReady(callback) {","        self._onValueReady(callback);","    }","}","inherits(StreamArg, PassThrough);","","StreamArg.prototype._write = function _write(chunk, encoding, callback) {","    var self = this;","    if (!self.started) {","        self.started = true;","        self.emit('start');","    }","    PassThrough.prototype._write.call(self, chunk, encoding, callback);","};","","StreamArg.prototype._onValueReady = function onValueReady(callback) {","    var self = this;","    self.onValueReady = Ready();","    bufferStreamData(self, self.onValueReady.signal);","    self.onValueReady(callback);","};","","function bufferStreamData(stream, callback) {","    var parts = [];","    stream.on('data', onData);","    stream.on('error', finish);","    stream.on('end', finish);","    function onData(chunk) {","        parts.push(chunk);","    }","    function finish(err) {","        stream.removeListener('data', onData);","        stream.removeListener('error', finish);","        stream.removeListener('end', finish);","        var buf = Buffer.concat(parts);","        stream.buf = buf;","        if (err === undefined) {","            err = null;","        }","        callback(err, buf);","    }","}","","module.exports.InArgStream = InArgStream;","module.exports.OutArgStream = OutArgStream;",""],"l":{"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"47":1,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"59":0,"60":0,"62":1,"63":0,"66":1,"67":0,"68":0,"73":1,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"82":0,"83":0,"84":0,"86":1,"87":0,"88":0,"89":0,"94":1,"96":1,"97":0,"98":0,"100":0,"102":0,"105":0,"106":0,"107":0,"109":0,"110":0,"112":0,"113":0,"116":0,"117":0,"120":0,"121":0,"122":0,"126":0,"128":1,"129":0,"130":0,"131":0,"133":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":0,"144":0,"145":0,"146":0,"147":0,"148":0,"150":1,"151":0,"154":1,"155":0,"158":1,"159":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"172":1,"174":1,"175":0,"176":0,"177":0,"181":0,"182":0,"183":0,"188":0,"189":0,"190":0,"191":0,"192":0,"195":0,"197":0,"200":1,"201":0,"202":0,"203":0,"204":0,"205":0,"207":0,"211":1,"212":0,"213":0,"214":0,"215":0,"220":1,"221":0,"222":0,"223":0,"224":0,"226":0,"227":0,"229":0,"230":0,"231":0,"232":0,"233":0,"237":1,"238":0,"239":0,"240":0,"241":0,"243":0,"245":1,"246":0,"249":1,"251":1,"252":0,"253":0,"254":0,"255":0,"257":0,"260":1,"261":0,"262":0,"263":0,"264":0,"267":1,"268":0,"269":0,"270":0,"271":0,"272":1,"273":0,"275":1,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"284":0,"288":1,"289":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/pipeline_streams.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/pipeline_streams.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"pipelineStreams","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":60}}},"2":{"name":"next","line":39,"loc":{"start":{"line":39,"column":4},"end":{"line":39,"column":21}}},"3":{"name":"onEnd","line":75,"loc":{"start":{"line":75,"column":30},"end":{"line":75,"column":47}}},"4":{"name":"onStreamFinished","line":82,"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":36}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":8}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}},"6":{"start":{"line":31,"column":0},"end":{"line":86,"column":1}},"7":{"start":{"line":32,"column":4},"end":{"line":37,"column":5}},"8":{"start":{"line":33,"column":8},"end":{"line":33,"column":27}},"9":{"start":{"line":34,"column":8},"end":{"line":34,"column":21}},"10":{"start":{"line":35,"column":11},"end":{"line":37,"column":5}},"11":{"start":{"line":36,"column":8},"end":{"line":36,"column":21}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":12}},"13":{"start":{"line":39,"column":4},"end":{"line":85,"column":5}},"14":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"15":{"start":{"line":41,"column":12},"end":{"line":43,"column":13}},"16":{"start":{"line":42,"column":16},"end":{"line":42,"column":31}},"17":{"start":{"line":44,"column":12},"end":{"line":44,"column":19}},"18":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"19":{"start":{"line":47,"column":8},"end":{"line":47,"column":27}},"20":{"start":{"line":48,"column":8},"end":{"line":81,"column":9}},"21":{"start":{"line":49,"column":12},"end":{"line":49,"column":22}},"22":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"23":{"start":{"line":51,"column":16},"end":{"line":51,"column":97}},"24":{"start":{"line":53,"column":12},"end":{"line":53,"column":24}},"25":{"start":{"line":54,"column":15},"end":{"line":81,"column":9}},"26":{"start":{"line":55,"column":12},"end":{"line":63,"column":13}},"27":{"start":{"line":56,"column":16},"end":{"line":58,"column":17}},"28":{"start":{"line":57,"column":20},"end":{"line":57,"column":43}},"29":{"start":{"line":60,"column":16},"end":{"line":62,"column":37}},"30":{"start":{"line":64,"column":12},"end":{"line":64,"column":25}},"31":{"start":{"line":65,"column":12},"end":{"line":65,"column":24}},"32":{"start":{"line":67,"column":12},"end":{"line":78,"column":13}},"33":{"start":{"line":68,"column":16},"end":{"line":70,"column":17}},"34":{"start":{"line":69,"column":20},"end":{"line":69,"column":43}},"35":{"start":{"line":72,"column":16},"end":{"line":72,"column":30}},"36":{"start":{"line":73,"column":16},"end":{"line":73,"column":88}},"37":{"start":{"line":74,"column":16},"end":{"line":74,"column":56}},"38":{"start":{"line":75,"column":16},"end":{"line":77,"column":19}},"39":{"start":{"line":76,"column":20},"end":{"line":76,"column":95}},"40":{"start":{"line":79,"column":12},"end":{"line":79,"column":26}},"41":{"start":{"line":80,"column":12},"end":{"line":80,"column":49}},"42":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"43":{"start":{"line":83,"column":12},"end":{"line":83,"column":24}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"2":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":11},"end":{"line":35,"column":11}},{"start":{"line":35,"column":11},"end":{"line":35,"column":11}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]},"4":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":41,"column":12}},{"start":{"line":41,"column":12},"end":{"line":41,"column":12}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":24}},{"start":{"line":48,"column":28},"end":{"line":48,"column":45}}]},"7":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":12}},{"start":{"line":50,"column":12},"end":{"line":50,"column":12}}]},"8":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":15},"end":{"line":54,"column":15}},{"start":{"line":54,"column":15},"end":{"line":54,"column":15}}]},"9":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":19},"end":{"line":54,"column":42}},{"start":{"line":54,"column":46},"end":{"line":54,"column":66}}]},"10":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":55,"column":12}},{"start":{"line":55,"column":12},"end":{"line":55,"column":12}}]},"11":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":16},"end":{"line":56,"column":16}},{"start":{"line":56,"column":16},"end":{"line":56,"column":16}}]},"12":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":12}},{"start":{"line":67,"column":12},"end":{"line":67,"column":12}}]},"13":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":16},"end":{"line":68,"column":16}},{"start":{"line":68,"column":16},"end":{"line":68,"column":16}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var hex;","var util = require('util');","var process = require('process');","var Buffer = require('buffer').Buffer;","","/*eslint complexity: [2, 15], max-statements: [2, 40] */","module.exports = pipelineStreams;","","function pipelineStreams(sources, dests, options, callback) {","    if (typeof options === 'function') {","        callback = options;","        options = {};","    } else if (!options) {","        options = {};","    }","    next(0);","    function next(i) {","        if (i >= dests.length) {","            if (callback) {","                callback(null);","            }","            return;","        }","        var src = sources[i];","        var dst = dests[i];","        if (src === null || src === undefined) {","            dst.end();","            if (options.debug) {","                process.stdout.write(util.format('%s END ARG%s: EMPTY\\n', options.debug, i + 1));","            }","            next(i + 1);","        } else if (typeof src === 'string' || Buffer.isBuffer(src)) {","            if (options.debug) {","                if (!hex) {","                    hex = require('hexer');","                }","","                process.stdout.write(","                    util.format('%s END ARG%s:\\n', options.debug, i + 1) +","                    hex(src) + '\\n');","            }","            dst.end(src);","            next(i + 1);","        } else {","            if (options.debug) {","                if (!hex) {","                    hex = require('hexer');","                }","","                var n = i + 1;","                process.stdout.write(util.format('%s PIPE ARG%s:\\n', options.debug, n));","                src = src.pipe(hex.Spy(process.stdout));","                src.on('end', function onEnd() {","                    process.stdout.write(util.format('%s PIPE ARG%s END\\n', options.debug, n));","                });","            }","            src.pipe(dst);","            dst.once('finish', onStreamFinished);","        }","        function onStreamFinished() {","            next(i + 1);","        }","    }","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"29":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"38":0,"39":1,"40":0,"41":0,"42":0,"44":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"56":0,"57":0,"60":0,"64":0,"65":0,"67":0,"68":0,"69":0,"72":0,"73":0,"74":0,"75":0,"76":0,"79":0,"80":0,"82":1,"83":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/out_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v2/out_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":1,"31":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"V2OutResponse","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":45}}},"2":{"name":"V2StreamingOutResponse","line":41,"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":54}}},"3":{"name":"_sendCallResponse","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":41}}},"4":{"name":"_sendCallResponseCont","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":45}}},"5":{"name":"_sendError","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":41}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}},"2":{"start":{"line":27,"column":0},"end":{"line":27,"column":45}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":64}},"4":{"start":{"line":30,"column":0},"end":{"line":30,"column":40}},"5":{"start":{"line":31,"column":0},"end":{"line":31,"column":28}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":34}},"7":{"start":{"line":34,"column":0},"end":{"line":37,"column":1}},"8":{"start":{"line":35,"column":4},"end":{"line":35,"column":40}},"9":{"start":{"line":36,"column":4},"end":{"line":36,"column":27}},"10":{"start":{"line":39,"column":0},"end":{"line":39,"column":37}},"11":{"start":{"line":41,"column":0},"end":{"line":44,"column":1}},"12":{"start":{"line":42,"column":4},"end":{"line":42,"column":49}},"13":{"start":{"line":43,"column":4},"end":{"line":43,"column":27}},"14":{"start":{"line":46,"column":0},"end":{"line":46,"column":55}},"15":{"start":{"line":48,"column":0},"end":{"line":61,"column":2}},"16":{"start":{"line":51,"column":4},"end":{"line":51,"column":18}},"17":{"start":{"line":52,"column":4},"end":{"line":58,"column":5}},"18":{"start":{"line":53,"column":8},"end":{"line":56,"column":12}},"19":{"start":{"line":57,"column":8},"end":{"line":57,"column":15}},"20":{"start":{"line":59,"column":4},"end":{"line":59,"column":45}},"21":{"start":{"line":59,"column":17},"end":{"line":59,"column":45}},"22":{"start":{"line":60,"column":4},"end":{"line":60,"column":58}},"23":{"start":{"line":63,"column":0},"end":{"line":69,"column":2}},"24":{"start":{"line":66,"column":4},"end":{"line":66,"column":18}},"25":{"start":{"line":67,"column":4},"end":{"line":67,"column":45}},"26":{"start":{"line":67,"column":17},"end":{"line":67,"column":45}},"27":{"start":{"line":68,"column":4},"end":{"line":68,"column":62}},"28":{"start":{"line":71,"column":0},"end":{"line":75,"column":2}},"29":{"start":{"line":74,"column":4},"end":{"line":74,"column":76}},"30":{"start":{"line":77,"column":0},"end":{"line":77,"column":43}},"31":{"start":{"line":78,"column":0},"end":{"line":78,"column":61}}},"branchMap":{"1":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"2":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":12}},{"start":{"line":52,"column":16},"end":{"line":52,"column":23}},{"start":{"line":52,"column":27},"end":{"line":52,"column":58}}]},"3":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"4":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable curly */","","var inherits = require('util').inherits;","","var OutResponse = require('../out_response');","var StreamingOutResponse = require('../streaming_out_response');","","var CallFlags = require('./call_flags');","var v2 = require('./index');","var errors = require('../errors');","","function V2OutResponse(handler, id, options) {","    OutResponse.call(this, id, options);","    this.handler = handler;","}","","inherits(V2OutResponse, OutResponse);","","function V2StreamingOutResponse(handler, id, options) {","    StreamingOutResponse.call(this, id, options);","    this.handler = handler;","}","","inherits(V2StreamingOutResponse, StreamingOutResponse);","","V2OutResponse.prototype._sendCallResponse =","V2StreamingOutResponse.prototype._sendCallResponse =","function _sendCallResponse(args, isLast) {","    var flags = 0;","    if (args && args[0] && args[0].length > v2.MaxArg1Size) {","        this.errorEvent.emit(this, errors.Arg1OverLengthLimit({","            length: args[0].length,","            limit: v2.MaxArg1Size","        }));","        return;","    }","    if (!isLast) flags |= CallFlags.Fragment;","    this.handler.sendCallResponseFrame(this, flags, args);","};","","V2OutResponse.prototype._sendCallResponseCont =","V2StreamingOutResponse.prototype._sendCallResponseCont =","function _sendCallResponseCont(args, isLast) {","    var flags = 0;","    if (!isLast) flags |= CallFlags.Fragment;","    this.handler.sendCallResponseContFrame(this, flags, args);","};","","V2OutResponse.prototype._sendError =","V2StreamingOutResponse.prototype._sendError =","function _sendError(codeString, message) {","    this.handler.sendErrorFrame(this.id, this.tracing, codeString, message);","};","","module.exports.OutResponse = V2OutResponse;","module.exports.StreamingOutResponse = V2StreamingOutResponse;",""],"l":{"25":1,"27":1,"28":1,"30":1,"31":1,"32":1,"34":1,"35":0,"36":0,"39":1,"41":1,"42":0,"43":0,"46":1,"48":1,"51":0,"52":0,"53":0,"57":0,"59":0,"60":0,"63":1,"66":0,"67":0,"68":0,"71":1,"74":0,"77":1,"78":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/out_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/out_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":0,"57":1,"58":0,"59":0,"60":1,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":0,"163":0,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":1,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0,0],"12":[0,0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"TChannelOutResponse","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":42}}},"2":{"name":"extendLogInfo","line":72,"loc":{"start":{"line":72,"column":46},"end":{"line":72,"column":75}}},"3":{"name":"_sendCallResponse","line":93,"loc":{"start":{"line":93,"column":50},"end":{"line":93,"column":91}}},"4":{"name":"_sendCallResponseCont","line":101,"loc":{"start":{"line":101,"column":54},"end":{"line":101,"column":99}}},"5":{"name":"_sendError","line":109,"loc":{"start":{"line":109,"column":43},"end":{"line":109,"column":84}}},"6":{"name":"sendParts","line":117,"loc":{"start":{"line":117,"column":42},"end":{"line":117,"column":76}}},"7":{"name":"sendCallResponseFrame","line":141,"loc":{"start":{"line":141,"column":54},"end":{"line":141,"column":99}}},"8":{"name":"sendCallResponseContFrame","line":183,"loc":{"start":{"line":183,"column":58},"end":{"line":183,"column":107}}},"9":{"name":"responseAlreadyDone","line":212,"loc":{"start":{"line":212,"column":52},"end":{"line":212,"column":83}}},"10":{"name":"sendError","line":233,"loc":{"start":{"line":233,"column":42},"end":{"line":233,"column":82}}},"11":{"name":"emitError","line":277,"loc":{"start":{"line":277,"column":42},"end":{"line":277,"column":66}}},"12":{"name":"emitFinish","line":288,"loc":{"start":{"line":288,"column":43},"end":{"line":288,"column":65}}},"13":{"name":"setOk","line":332,"loc":{"start":{"line":332,"column":38},"end":{"line":332,"column":57}}},"14":{"name":"sendOk","line":347,"loc":{"start":{"line":347,"column":39},"end":{"line":347,"column":67}}},"15":{"name":"sendNotOk","line":353,"loc":{"start":{"line":353,"column":42},"end":{"line":353,"column":73}}},"16":{"name":"send","line":366,"loc":{"start":{"line":366,"column":37},"end":{"line":366,"column":63}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":37}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":31,"column":0},"end":{"line":66,"column":1}},"7":{"start":{"line":32,"column":4},"end":{"line":32,"column":28}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"9":{"start":{"line":34,"column":4},"end":{"line":34,"column":28}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":48}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":46}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":50}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":35}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":31}},"15":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"16":{"start":{"line":42,"column":4},"end":{"line":42,"column":33}},"17":{"start":{"line":43,"column":4},"end":{"line":43,"column":33}},"18":{"start":{"line":45,"column":4},"end":{"line":45,"column":19}},"19":{"start":{"line":46,"column":4},"end":{"line":46,"column":17}},"20":{"start":{"line":47,"column":4},"end":{"line":47,"column":32}},"21":{"start":{"line":48,"column":4},"end":{"line":48,"column":22}},"22":{"start":{"line":49,"column":4},"end":{"line":49,"column":34}},"23":{"start":{"line":50,"column":4},"end":{"line":50,"column":43}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":41}},"25":{"start":{"line":52,"column":4},"end":{"line":52,"column":50}},"26":{"start":{"line":53,"column":4},"end":{"line":53,"column":45}},"27":{"start":{"line":54,"column":4},"end":{"line":54,"column":30}},"28":{"start":{"line":55,"column":4},"end":{"line":55,"column":37}},"29":{"start":{"line":56,"column":4},"end":{"line":56,"column":26}},"30":{"start":{"line":57,"column":4},"end":{"line":57,"column":27}},"31":{"start":{"line":58,"column":4},"end":{"line":58,"column":21}},"32":{"start":{"line":59,"column":4},"end":{"line":59,"column":21}},"33":{"start":{"line":60,"column":4},"end":{"line":60,"column":21}},"34":{"start":{"line":62,"column":4},"end":{"line":62,"column":27}},"35":{"start":{"line":63,"column":4},"end":{"line":63,"column":24}},"36":{"start":{"line":65,"column":4},"end":{"line":65,"column":22}},"37":{"start":{"line":68,"column":0},"end":{"line":68,"column":44}},"38":{"start":{"line":70,"column":0},"end":{"line":70,"column":66}},"39":{"start":{"line":72,"column":0},"end":{"line":91,"column":2}},"40":{"start":{"line":73,"column":4},"end":{"line":73,"column":20}},"41":{"start":{"line":75,"column":4},"end":{"line":75,"column":30}},"42":{"start":{"line":76,"column":4},"end":{"line":76,"column":34}},"43":{"start":{"line":77,"column":4},"end":{"line":77,"column":53}},"44":{"start":{"line":78,"column":4},"end":{"line":78,"column":30}},"45":{"start":{"line":79,"column":4},"end":{"line":79,"column":34}},"46":{"start":{"line":80,"column":4},"end":{"line":80,"column":46}},"47":{"start":{"line":81,"column":4},"end":{"line":81,"column":45}},"48":{"start":{"line":82,"column":4},"end":{"line":82,"column":36}},"49":{"start":{"line":83,"column":4},"end":{"line":83,"column":32}},"50":{"start":{"line":84,"column":4},"end":{"line":84,"column":73}},"51":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"52":{"start":{"line":87,"column":8},"end":{"line":87,"column":46}},"53":{"start":{"line":90,"column":4},"end":{"line":90,"column":16}},"54":{"start":{"line":93,"column":0},"end":{"line":99,"column":2}},"55":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"56":{"start":{"line":95,"column":4},"end":{"line":98,"column":7}},"57":{"start":{"line":101,"column":0},"end":{"line":107,"column":2}},"58":{"start":{"line":102,"column":4},"end":{"line":102,"column":20}},"59":{"start":{"line":103,"column":4},"end":{"line":106,"column":7}},"60":{"start":{"line":109,"column":0},"end":{"line":115,"column":2}},"61":{"start":{"line":110,"column":4},"end":{"line":110,"column":20}},"62":{"start":{"line":111,"column":4},"end":{"line":114,"column":7}},"63":{"start":{"line":117,"column":0},"end":{"line":139,"column":2}},"64":{"start":{"line":118,"column":4},"end":{"line":118,"column":20}},"65":{"start":{"line":119,"column":4},"end":{"line":138,"column":5}},"66":{"start":{"line":121,"column":12},"end":{"line":121,"column":54}},"67":{"start":{"line":122,"column":12},"end":{"line":122,"column":18}},"68":{"start":{"line":124,"column":12},"end":{"line":124,"column":58}},"69":{"start":{"line":125,"column":12},"end":{"line":125,"column":18}},"70":{"start":{"line":127,"column":12},"end":{"line":130,"column":16}},"71":{"start":{"line":131,"column":12},"end":{"line":131,"column":18}},"72":{"start":{"line":134,"column":12},"end":{"line":134,"column":18}},"73":{"start":{"line":136,"column":12},"end":{"line":136,"column":105}},"74":{"start":{"line":137,"column":12},"end":{"line":137,"column":18}},"75":{"start":{"line":141,"column":0},"end":{"line":181,"column":2}},"76":{"start":{"line":142,"column":4},"end":{"line":142,"column":20}},"77":{"start":{"line":143,"column":4},"end":{"line":180,"column":5}},"78":{"start":{"line":145,"column":12},"end":{"line":145,"column":43}},"79":{"start":{"line":146,"column":12},"end":{"line":146,"column":49}},"80":{"start":{"line":147,"column":12},"end":{"line":149,"column":13}},"81":{"start":{"line":148,"column":16},"end":{"line":148,"column":41}},"82":{"start":{"line":150,"column":12},"end":{"line":154,"column":13}},"83":{"start":{"line":151,"column":16},"end":{"line":151,"column":41}},"84":{"start":{"line":153,"column":16},"end":{"line":153,"column":46}},"85":{"start":{"line":155,"column":12},"end":{"line":155,"column":18}},"86":{"start":{"line":157,"column":12},"end":{"line":160,"column":16}},"87":{"start":{"line":161,"column":12},"end":{"line":161,"column":18}},"88":{"start":{"line":164,"column":12},"end":{"line":164,"column":37}},"89":{"start":{"line":165,"column":12},"end":{"line":165,"column":37}},"90":{"start":{"line":167,"column":12},"end":{"line":175,"column":16}},"91":{"start":{"line":176,"column":12},"end":{"line":176,"column":18}},"92":{"start":{"line":179,"column":12},"end":{"line":179,"column":18}},"93":{"start":{"line":183,"column":0},"end":{"line":210,"column":2}},"94":{"start":{"line":184,"column":4},"end":{"line":184,"column":20}},"95":{"start":{"line":185,"column":4},"end":{"line":209,"column":5}},"96":{"start":{"line":187,"column":12},"end":{"line":190,"column":16}},"97":{"start":{"line":191,"column":12},"end":{"line":191,"column":18}},"98":{"start":{"line":193,"column":12},"end":{"line":193,"column":53}},"99":{"start":{"line":194,"column":12},"end":{"line":196,"column":13}},"100":{"start":{"line":195,"column":16},"end":{"line":195,"column":41}},"101":{"start":{"line":197,"column":12},"end":{"line":197,"column":18}},"102":{"start":{"line":200,"column":12},"end":{"line":204,"column":16}},"103":{"start":{"line":205,"column":12},"end":{"line":205,"column":18}},"104":{"start":{"line":208,"column":12},"end":{"line":208,"column":18}},"105":{"start":{"line":212,"column":0},"end":{"line":231,"column":2}},"106":{"start":{"line":213,"column":4},"end":{"line":213,"column":20}},"107":{"start":{"line":215,"column":4},"end":{"line":230,"column":5}},"108":{"start":{"line":216,"column":8},"end":{"line":216,"column":47}},"109":{"start":{"line":217,"column":8},"end":{"line":217,"column":45}},"110":{"start":{"line":218,"column":8},"end":{"line":218,"column":26}},"111":{"start":{"line":219,"column":8},"end":{"line":221,"column":9}},"112":{"start":{"line":220,"column":12},"end":{"line":220,"column":52}},"113":{"start":{"line":223,"column":8},"end":{"line":226,"column":12}},"114":{"start":{"line":227,"column":8},"end":{"line":227,"column":20}},"115":{"start":{"line":229,"column":8},"end":{"line":229,"column":21}},"116":{"start":{"line":233,"column":0},"end":{"line":275,"column":2}},"117":{"start":{"line":234,"column":4},"end":{"line":234,"column":20}},"118":{"start":{"line":236,"column":4},"end":{"line":243,"column":5}},"119":{"start":{"line":238,"column":8},"end":{"line":241,"column":12}},"120":{"start":{"line":242,"column":8},"end":{"line":242,"column":15}},"121":{"start":{"line":245,"column":4},"end":{"line":274,"column":5}},"122":{"start":{"line":246,"column":8},"end":{"line":252,"column":12}},"123":{"start":{"line":254,"column":8},"end":{"line":256,"column":9}},"124":{"start":{"line":255,"column":12},"end":{"line":255,"column":37}},"125":{"start":{"line":257,"column":8},"end":{"line":257,"column":34}},"126":{"start":{"line":259,"column":8},"end":{"line":259,"column":37}},"127":{"start":{"line":260,"column":8},"end":{"line":260,"column":31}},"128":{"start":{"line":261,"column":8},"end":{"line":271,"column":10}},"129":{"start":{"line":272,"column":8},"end":{"line":272,"column":45}},"130":{"start":{"line":273,"column":8},"end":{"line":273,"column":26}},"131":{"start":{"line":277,"column":0},"end":{"line":286,"column":2}},"132":{"start":{"line":278,"column":4},"end":{"line":278,"column":20}},"133":{"start":{"line":280,"column":4},"end":{"line":282,"column":5}},"134":{"start":{"line":281,"column":8},"end":{"line":281,"column":53}},"135":{"start":{"line":284,"column":4},"end":{"line":284,"column":21}},"136":{"start":{"line":285,"column":4},"end":{"line":285,"column":36}},"137":{"start":{"line":288,"column":0},"end":{"line":330,"column":2}},"138":{"start":{"line":289,"column":4},"end":{"line":289,"column":20}},"139":{"start":{"line":290,"column":4},"end":{"line":290,"column":32}},"140":{"start":{"line":292,"column":4},"end":{"line":297,"column":5}},"141":{"start":{"line":293,"column":8},"end":{"line":295,"column":12}},"142":{"start":{"line":296,"column":8},"end":{"line":296,"column":15}},"143":{"start":{"line":299,"column":4},"end":{"line":299,"column":19}},"144":{"start":{"line":301,"column":4},"end":{"line":301,"column":46}},"145":{"start":{"line":303,"column":4},"end":{"line":312,"column":6}},"146":{"start":{"line":314,"column":4},"end":{"line":316,"column":5}},"147":{"start":{"line":315,"column":8},"end":{"line":315,"column":45}},"148":{"start":{"line":318,"column":4},"end":{"line":327,"column":5}},"149":{"start":{"line":322,"column":8},"end":{"line":326,"column":9}},"150":{"start":{"line":323,"column":12},"end":{"line":323,"column":58}},"151":{"start":{"line":325,"column":12},"end":{"line":325,"column":56}},"152":{"start":{"line":329,"column":4},"end":{"line":329,"column":32}},"153":{"start":{"line":332,"column":0},"end":{"line":345,"column":2}},"154":{"start":{"line":333,"column":4},"end":{"line":333,"column":20}},"155":{"start":{"line":334,"column":4},"end":{"line":341,"column":5}},"156":{"start":{"line":335,"column":8},"end":{"line":339,"column":12}},"157":{"start":{"line":340,"column":8},"end":{"line":340,"column":21}},"158":{"start":{"line":342,"column":4},"end":{"line":342,"column":17}},"159":{"start":{"line":343,"column":4},"end":{"line":343,"column":27}},"160":{"start":{"line":344,"column":4},"end":{"line":344,"column":16}},"161":{"start":{"line":347,"column":0},"end":{"line":351,"column":2}},"162":{"start":{"line":348,"column":4},"end":{"line":348,"column":20}},"163":{"start":{"line":349,"column":4},"end":{"line":349,"column":21}},"164":{"start":{"line":350,"column":4},"end":{"line":350,"column":26}},"165":{"start":{"line":353,"column":0},"end":{"line":364,"column":2}},"166":{"start":{"line":354,"column":4},"end":{"line":354,"column":20}},"167":{"start":{"line":355,"column":4},"end":{"line":363,"column":5}},"168":{"start":{"line":356,"column":8},"end":{"line":359,"column":12}},"169":{"start":{"line":361,"column":8},"end":{"line":361,"column":26}},"170":{"start":{"line":362,"column":8},"end":{"line":362,"column":30}},"171":{"start":{"line":366,"column":0},"end":{"line":425,"column":2}},"172":{"start":{"line":367,"column":4},"end":{"line":367,"column":20}},"173":{"start":{"line":370,"column":4},"end":{"line":383,"column":5}},"174":{"start":{"line":371,"column":8},"end":{"line":373,"column":60}},"175":{"start":{"line":375,"column":8},"end":{"line":381,"column":9}},"176":{"start":{"line":377,"column":16},"end":{"line":377,"column":101}},"177":{"start":{"line":378,"column":16},"end":{"line":378,"column":22}},"178":{"start":{"line":380,"column":16},"end":{"line":380,"column":96}},"179":{"start":{"line":382,"column":8},"end":{"line":382,"column":20}},"180":{"start":{"line":385,"column":4},"end":{"line":385,"column":21}},"181":{"start":{"line":386,"column":4},"end":{"line":386,"column":21}},"182":{"start":{"line":388,"column":4},"end":{"line":412,"column":5}},"183":{"start":{"line":389,"column":8},"end":{"line":398,"column":10}},"184":{"start":{"line":401,"column":8},"end":{"line":411,"column":10}},"185":{"start":{"line":415,"column":4},"end":{"line":420,"column":5}},"186":{"start":{"line":417,"column":8},"end":{"line":417,"column":101}},"187":{"start":{"line":419,"column":8},"end":{"line":419,"column":66}},"188":{"start":{"line":422,"column":4},"end":{"line":422,"column":22}},"189":{"start":{"line":424,"column":4},"end":{"line":424,"column":16}},"190":{"start":{"line":427,"column":0},"end":{"line":427,"column":37}}},"branchMap":{"1":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":14},"end":{"line":32,"column":21}},{"start":{"line":32,"column":25},"end":{"line":32,"column":27}}]},"2":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":14},"end":{"line":48,"column":16}},{"start":{"line":48,"column":20},"end":{"line":48,"column":21}}]},"3":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":16},"end":{"line":49,"column":28}},{"start":{"line":49,"column":32},"end":{"line":49,"column":33}}]},"4":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":19},"end":{"line":50,"column":34}},{"start":{"line":50,"column":38},"end":{"line":50,"column":42}}]},"5":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":34}},{"start":{"line":51,"column":38},"end":{"line":51,"column":40}}]},"6":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":24},"end":{"line":52,"column":44}},{"start":{"line":52,"column":48},"end":{"line":52,"column":49}}]},"7":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":20},"end":{"line":53,"column":36}},{"start":{"line":53,"column":40},"end":{"line":53,"column":44}}]},"8":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":28}},{"start":{"line":55,"column":32},"end":{"line":55,"column":36}}]},"9":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":27},"end":{"line":84,"column":45}},{"start":{"line":84,"column":49},"end":{"line":84,"column":72}}]},"10":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"11":{"line":119,"type":"switch","locations":[{"start":{"line":120,"column":8},"end":{"line":122,"column":18}},{"start":{"line":123,"column":8},"end":{"line":125,"column":18}},{"start":{"line":126,"column":8},"end":{"line":131,"column":18}},{"start":{"line":132,"column":8},"end":{"line":134,"column":18}},{"start":{"line":135,"column":8},"end":{"line":137,"column":18}}]},"12":{"line":143,"type":"switch","locations":[{"start":{"line":144,"column":8},"end":{"line":155,"column":18}},{"start":{"line":156,"column":8},"end":{"line":161,"column":18}},{"start":{"line":162,"column":8},"end":{"line":162,"column":25}},{"start":{"line":163,"column":8},"end":{"line":176,"column":18}},{"start":{"line":177,"column":8},"end":{"line":179,"column":18}}]},"13":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":12},"end":{"line":147,"column":12}},{"start":{"line":147,"column":12},"end":{"line":147,"column":12}}]},"14":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":12},"end":{"line":150,"column":12}},{"start":{"line":150,"column":12},"end":{"line":150,"column":12}}]},"15":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":23},"end":{"line":164,"column":30}},{"start":{"line":164,"column":34},"end":{"line":164,"column":36}}]},"16":{"line":165,"type":"binary-expr","locations":[{"start":{"line":165,"column":23},"end":{"line":165,"column":30}},{"start":{"line":165,"column":34},"end":{"line":165,"column":36}}]},"17":{"line":185,"type":"switch","locations":[{"start":{"line":186,"column":8},"end":{"line":191,"column":18}},{"start":{"line":192,"column":8},"end":{"line":197,"column":18}},{"start":{"line":198,"column":8},"end":{"line":198,"column":25}},{"start":{"line":199,"column":8},"end":{"line":205,"column":18}},{"start":{"line":206,"column":8},"end":{"line":208,"column":18}}]},"18":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":12},"end":{"line":194,"column":12}},{"start":{"line":194,"column":12},"end":{"line":194,"column":12}}]},"19":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":215,"column":4}},{"start":{"line":215,"column":4},"end":{"line":215,"column":4}}]},"20":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":34}},{"start":{"line":215,"column":38},"end":{"line":215,"column":65}}]},"21":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":25},"end":{"line":216,"column":40}},{"start":{"line":216,"column":44},"end":{"line":216,"column":46}}]},"22":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":8},"end":{"line":219,"column":8}},{"start":{"line":219,"column":8},"end":{"line":219,"column":8}}]},"23":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":12},"end":{"line":219,"column":32}},{"start":{"line":219,"column":36},"end":{"line":219,"column":63}}]},"24":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":4},"end":{"line":236,"column":4}},{"start":{"line":236,"column":4},"end":{"line":236,"column":4}}]},"25":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":8},"end":{"line":236,"column":29}},{"start":{"line":237,"column":8},"end":{"line":237,"column":37}}]},"26":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":4},"end":{"line":245,"column":4}},{"start":{"line":245,"column":4},"end":{"line":245,"column":4}}]},"27":{"line":245,"type":"binary-expr","locations":[{"start":{"line":245,"column":8},"end":{"line":245,"column":34}},{"start":{"line":245,"column":38},"end":{"line":245,"column":65}}]},"28":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":8},"end":{"line":254,"column":8}},{"start":{"line":254,"column":8},"end":{"line":254,"column":8}}]},"29":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":4},"end":{"line":280,"column":4}},{"start":{"line":280,"column":4},"end":{"line":280,"column":4}}]},"30":{"line":280,"type":"binary-expr","locations":[{"start":{"line":280,"column":8},"end":{"line":280,"column":18}},{"start":{"line":280,"column":22},"end":{"line":280,"column":40}}]},"31":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":4},"end":{"line":292,"column":4}},{"start":{"line":292,"column":4},"end":{"line":292,"column":4}}]},"32":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":4},"end":{"line":314,"column":4}},{"start":{"line":314,"column":4},"end":{"line":314,"column":4}}]},"33":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":4},"end":{"line":318,"column":4}},{"start":{"line":318,"column":4},"end":{"line":318,"column":4}}]},"34":{"line":318,"type":"binary-expr","locations":[{"start":{"line":318,"column":8},"end":{"line":318,"column":18}},{"start":{"line":318,"column":22},"end":{"line":318,"column":40}}]},"35":{"line":322,"type":"if","locations":[{"start":{"line":322,"column":8},"end":{"line":322,"column":8}},{"start":{"line":322,"column":8},"end":{"line":322,"column":8}}]},"36":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":4},"end":{"line":334,"column":4}},{"start":{"line":334,"column":4},"end":{"line":334,"column":4}}]},"37":{"line":343,"type":"cond-expr","locations":[{"start":{"line":343,"column":21},"end":{"line":343,"column":22}},{"start":{"line":343,"column":25},"end":{"line":343,"column":26}}]},"38":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":4},"end":{"line":355,"column":4}},{"start":{"line":355,"column":4},"end":{"line":355,"column":4}}]},"39":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":4},"end":{"line":370,"column":4}},{"start":{"line":370,"column":4},"end":{"line":370,"column":4}}]},"40":{"line":371,"type":"binary-expr","locations":[{"start":{"line":371,"column":28},"end":{"line":371,"column":38}},{"start":{"line":372,"column":28},"end":{"line":372,"column":42}},{"start":{"line":373,"column":28},"end":{"line":373,"column":59}}]},"41":{"line":375,"type":"switch","locations":[{"start":{"line":376,"column":12},"end":{"line":378,"column":22}},{"start":{"line":379,"column":12},"end":{"line":380,"column":96}}]},"42":{"line":388,"type":"if","locations":[{"start":{"line":388,"column":4},"end":{"line":388,"column":4}},{"start":{"line":388,"column":4},"end":{"line":388,"column":4}}]},"43":{"line":415,"type":"if","locations":[{"start":{"line":415,"column":4},"end":{"line":415,"column":4}},{"start":{"line":415,"column":4},"end":{"line":415,"column":4}}]},"44":{"line":415,"type":"binary-expr","locations":[{"start":{"line":415,"column":8},"end":{"line":415,"column":29}},{"start":{"line":416,"column":8},"end":{"line":416,"column":37}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var EventEmitter = require('./lib/event_emitter');","var stat = require('./stat-tags.js');","var inherits = require('util').inherits;","","var errors = require('./errors');","var States = require('./reqres_states');","","/*eslint max-statements: [2, 40]*/","function TChannelOutResponse(id, options) {","    options = options || {};","    var self = this;","    EventEmitter.call(self);","    self.errorEvent = self.defineEvent('error');","    self.spanEvent = self.defineEvent('span');","    self.finishEvent = self.defineEvent('finish');","","    self.channel = options.channel;","    self.inreq = options.inreq;","    self.logger = options.logger;","    self.random = options.random;","    self.timers = options.timers;","","    self.start = 0;","    self.end = 0;","    self.state = States.Initial;","    self.id = id || 0;","    self.code = options.code || 0;","    self.tracing = options.tracing || null;","    self.headers = options.headers || {};","    self.checksumType = options.checksumType || 0;","    self.checksum = options.checksum || null;","    self.ok = self.code === 0;","    self.span = options.span || null;","    self.streamed = false;","    self._argstream = null;","    self.arg1 = null;","    self.arg2 = null;","    self.arg3 = null;","","    self.codeString = null;","    self.message = null;","","    self.error = null;","}","","inherits(TChannelOutResponse, EventEmitter);","","TChannelOutResponse.prototype.type = 'tchannel.outgoing-response';","","TChannelOutResponse.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    info.responseId = self.id;","    info.responseType = self.type;","    info.responseState = States.describe(self.state);","    info.responseOk = self.ok;","    info.responseCode = self.code;","    info.responseCodeString = self.codeString;","    info.responseErrorMessage = self.message;","    info.responseStart = self.start;","    info.responseEnd = self.end;","    info.responseHasArg3 = self.arg3 !== null && self.arg3 !== undefined;","","    if (self.inreq) {","        info = self.inreq.extendLogInfo(info);","    }","","    return info;","};","","TChannelOutResponse.prototype._sendCallResponse = function _sendCallResponse(args, isLast) {","    var self = this;","    throw errors.UnimplementedMethod({","        className: self.constructor.name,","        methodName: '_sendCallResponse'","    });","};","","TChannelOutResponse.prototype._sendCallResponseCont = function _sendCallResponseCont(args, isLast) {","    var self = this;","    throw errors.UnimplementedMethod({","        className: self.constructor.name,","        methodName: '_sendCallResponseCont'","    });","};","","TChannelOutResponse.prototype._sendError = function _sendError(codeString, message) {","    var self = this;","    throw errors.UnimplementedMethod({","        className: self.constructor.name,","        methodName: '_sendError'","    });","};","","TChannelOutResponse.prototype.sendParts = function sendParts(parts, isLast) {","    var self = this;","    switch (self.state) {","        case States.Initial:","            self.sendCallResponseFrame(parts, isLast);","            break;","        case States.Streaming:","            self.sendCallResponseContFrame(parts, isLast);","            break;","        case States.Done:","            self.emitError(errors.ResponseFrameState({","                attempted: 'arg parts',","                state: 'Done'","            }));","            break;","        case States.Error:","            // TODO: log warn","            break;","        default:","            self.channel.logger.error('TChannelOutResponse is in a wrong state', self.extendLogInfo({}));","            break;","    }","};","","TChannelOutResponse.prototype.sendCallResponseFrame = function sendCallResponseFrame(args, isLast) {","    var self = this;","    switch (self.state) {","        case States.Initial:","            self.start = self.timers.now();","            self._sendCallResponse(args, isLast);","            if (self.span) {","                self.span.annotate('ss');","            }","            if (isLast) {","                self.state = States.Done;","            } else {","                self.state = States.Streaming;","            }","            break;","        case States.Streaming:","            self.emitError(errors.ResponseFrameState({","                attempted: 'call response',","                state: 'Streaming'","            }));","            break;","        case States.Done:","        case States.Error:","            var arg2 = args[1] || '';","            var arg3 = args[2] || '';","","            self.emitError(errors.ResponseAlreadyDone({","                attempted: 'call response',","                state: self.state,","                method: 'sendCallResponseFrame',","                bufArg2: arg2.slice(0, 50),","                arg2: String(arg2).slice(0, 50),","                bufArg3: arg3.slice(0, 50),","                arg3: String(arg3).slice(0, 50)","            }));","            break;","        default:","            // TODO: log warn","            break;","    }","};","","TChannelOutResponse.prototype.sendCallResponseContFrame = function sendCallResponseContFrame(args, isLast) {","    var self = this;","    switch (self.state) {","        case States.Initial:","            self.emitError(errors.ResponseFrameState({","                attempted: 'call response continuation',","                state: 'Initial'","            }));","            break;","        case States.Streaming:","            self._sendCallResponseCont(args, isLast);","            if (isLast) {","                self.state = States.Done;","            }","            break;","        case States.Done:","        case States.Error:","            self.emitError(errors.ResponseAlreadyDone({","                attempted: 'call response continuation',","                state: self.state,","                method: 'sendCallResponseContFrame'","            }));","            break;","        default:","            // TODO: log warn","            break;","    }","};","","TChannelOutResponse.prototype.responseAlreadyDone = function responseAlreadyDone() {","    var self = this;","","    if (self.state === States.Done || self.state === States.Error) {","        var errorEvent = self.errorEvent || {};","        var listener = !!errorEvent.listener;","        var listeners = 0;","        if (errorEvent.listeners && errorEvent.listeners.length) {","            listeners = errorEvent.listeners.length;","        }","","        self.logger.error('responseAlreadyDone detected!!', self.extendLogInfo({","            haveErrorListener: listener,","            numberOfErrorListenerrs: listeners","        }));","        return true;","    } else {","        return false;","    }","};","","TChannelOutResponse.prototype.sendError = function sendError(codeString, message) {","    var self = this;","","    if (self.inreq.connection && // because selfpeer/connection","        self.inreq.connection.closing) {","        self.logger.info('ignoring outresponse.sendError on a closed connection', self.extendLogInfo({","            codeString: codeString,","            errorMessage: message","        }));","        return;","    }","","    if (self.state === States.Done || self.state === States.Error) {","        self.emitError(errors.ResponseAlreadyDone({","            attempted: 'error frame',","            currentState: self.state,","            method: 'sendError',","            codeString: codeString,","            errMessage: message","        }));","    } else {","        if (self.span) {","            self.span.annotate('ss');","        }","        self.state = States.Error;","","        self.codeString = codeString;","        self.message = message;","        self.channel.emitFastStat(","            'tchannel.inbound.calls.system-errors',","            'counter',","            1,","            new stat.InboundCallsSystemErrorsTags(","                self.inreq.callerName,","                self.inreq.serviceName,","                String(self.inreq.arg1),","                self.codeString","            )","        );","        self._sendError(codeString, message);","        self.emitFinish();","    }","};","","TChannelOutResponse.prototype.emitError = function emitError(err) {","    var self = this;","","    if (self.inreq && self.inreq.circuit) {","        self.inreq.circuit.state.onRequestError(err);","    }","","    self.error = err;","    self.errorEvent.emit(self, err);","};","","TChannelOutResponse.prototype.emitFinish = function emitFinish() {","    var self = this;","    var now = self.timers.now();","","    if (self.end) {","        self.logger.warn('out response double emitFinish', self.extendLogInfo({","            now: now","        }));","        return;","    }","","    self.end = now;","","    var latency = self.end - self.inreq.start;","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.latency',","        'timing',","        latency,","        new stat.InboundCallsLatencyTags(","            self.inreq.callerName,","            self.inreq.serviceName,","            self.inreq.endpoint","        )","    );","","    if (self.span) {","        self.spanEvent.emit(self, self.span);","    }","","    if (self.inreq && self.inreq.circuit) {","        // TODO distingiush res.ok?","        // note that incoming requests do not have responseEvent and clear out","        // their response upon finish.","        if (errors.isUnhealthy(self.codeString)) {","            self.inreq.circuit.state.onRequestUnhealthy();","        } else {","            self.inreq.circuit.state.onRequestHealthy();","        }","    }","","    self.finishEvent.emit(self);","};","","TChannelOutResponse.prototype.setOk = function setOk(ok) {","    var self = this;","    if (self.state !== States.Initial) {","        self.emitError(errors.ResponseAlreadyStarted({","            state: self.state,","            method: 'setOk',","            ok: ok","        }));","        return false;","    }","    self.ok = ok;","    self.code = ok ? 0 : 1; // TODO: too coupled to v2 specifics?","    return true;","};","","TChannelOutResponse.prototype.sendOk = function sendOk(res1, res2) {","    var self = this;","    self.setOk(true);","    self.send(res1, res2);","};","","TChannelOutResponse.prototype.sendNotOk = function sendNotOk(res1, res2) {","    var self = this;","    if (self.state === States.Error) {","        self.logger.error('cannot send application error, already sent error frame', self.extendLogInfo({","            res1: res1,","            res2: res2","        }));","    } else {","        self.setOk(false);","        self.send(res1, res2);","    }","};","","TChannelOutResponse.prototype.send = function send(res1, res2) {","    var self = this;","","    /* send calls after finish() should be swallowed */","    if (self.end) {","        var inreqErrClass = self.inreq &&","                            self.inreq.err &&","                            errors.classify(self.inreq.err);","","        switch (inreqErrClass) {","            case 'Timeout':","                self.logger.info('OutResponse.send() after inreq timed out', self.extendLogInfo({}));","                break;","            default:","                self.logger.warn('OutResponse called send() after end', self.extendLogInfo({}));","        }","        return self;","    }","","    self.arg2 = res1;","    self.arg3 = res2;","","    if (self.ok) {","        self.channel.emitFastStat(","            'tchannel.inbound.calls.success',","            'counter',","            1,","            new stat.InboundCallsSuccessTags(","                self.inreq.callerName,","                self.inreq.serviceName,","                self.inreq.endpoint","            )","        );","    } else {","        // TODO: add outResponse.setErrorType()","        self.channel.emitFastStat(","            'tchannel.inbound.calls.app-errors',","            'counter',","            1,","            new stat.InboundCallsAppErrorsTags(","                self.inreq.callerName,","                self.inreq.serviceName,","                self.inreq.endpoint,","                'unknown'","            )","        );","    }","","    // TODO: may be spam, consider dropping","    if (self.inreq.connection && // because selfpeer/connection","        self.inreq.connection.closing) {","        self.logger.info('ignoring outresponse.send on a closed connection', self.extendLogInfo({}));","    } else {","        self.sendCallResponseFrame([self.arg1, res1, res2], true);","    }","","    self.emitFinish();","","    return self;","};","","module.exports = TChannelOutResponse;",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"40":0,"41":0,"42":0,"43":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"62":0,"63":0,"65":0,"68":1,"70":1,"72":1,"73":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"86":0,"87":0,"90":0,"93":1,"94":0,"95":0,"101":1,"102":0,"103":0,"109":1,"110":0,"111":0,"117":1,"118":0,"119":0,"121":0,"122":0,"124":0,"125":0,"127":0,"131":0,"134":0,"136":0,"137":0,"141":1,"142":0,"143":0,"145":0,"146":0,"147":0,"148":0,"150":0,"151":0,"153":0,"155":0,"157":0,"161":0,"164":0,"165":0,"167":0,"176":0,"179":0,"183":1,"184":0,"185":0,"187":0,"191":0,"193":0,"194":0,"195":0,"197":0,"200":0,"205":0,"208":0,"212":1,"213":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"223":0,"227":0,"229":0,"233":1,"234":0,"236":0,"238":0,"242":0,"245":0,"246":0,"254":0,"255":0,"257":0,"259":0,"260":0,"261":0,"272":0,"273":0,"277":1,"278":0,"280":0,"281":0,"284":0,"285":0,"288":1,"289":0,"290":0,"292":0,"293":0,"296":0,"299":0,"301":0,"303":0,"314":0,"315":0,"318":0,"322":0,"323":0,"325":0,"329":0,"332":1,"333":0,"334":0,"335":0,"340":0,"342":0,"343":0,"344":0,"347":1,"348":0,"349":0,"350":0,"353":1,"354":0,"355":0,"356":0,"361":0,"362":0,"366":1,"367":0,"370":0,"371":0,"375":0,"377":0,"378":0,"380":0,"382":0,"385":0,"386":0,"388":0,"389":0,"401":0,"415":0,"417":0,"419":0,"422":0,"424":0,"427":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_out_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_out_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"StreamingOutResponse","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":43}}},"2":{"name":"passError","line":43,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":28}}},"3":{"name":"onFrame","line":47,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":26}}},"4":{"name":"onFinish","line":56,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":24}}},"5":{"name":"sendError","line":65,"loc":{"start":{"line":65,"column":43},"end":{"line":65,"column":83}}},"6":{"name":"setOk","line":84,"loc":{"start":{"line":84,"column":39},"end":{"line":84,"column":58}}},"7":{"name":"send","line":98,"loc":{"start":{"line":98,"column":38},"end":{"line":98,"column":64}}},"8":{"name":"sendStreams","line":105,"loc":{"start":{"line":105,"column":45},"end":{"line":105,"column":88}}},"9":{"name":"onError","line":115,"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":26}}},"10":{"name":"finish","line":124,"loc":{"start":{"line":124,"column":4},"end":{"line":124,"column":22}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":55}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":56}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":44}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"7":{"start":{"line":31,"column":0},"end":{"line":59,"column":1}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":40}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":25}},"10":{"start":{"line":34,"column":4},"end":{"line":34,"column":41}},"11":{"start":{"line":35,"column":4},"end":{"line":35,"column":37}},"12":{"start":{"line":36,"column":4},"end":{"line":36,"column":37}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":20}},"14":{"start":{"line":39,"column":4},"end":{"line":39,"column":45}},"15":{"start":{"line":40,"column":4},"end":{"line":40,"column":43}},"16":{"start":{"line":41,"column":4},"end":{"line":41,"column":45}},"17":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"18":{"start":{"line":44,"column":8},"end":{"line":44,"column":40}},"19":{"start":{"line":47,"column":4},"end":{"line":54,"column":5}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":27}},"21":{"start":{"line":49,"column":8},"end":{"line":49,"column":28}},"22":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"23":{"start":{"line":51,"column":12},"end":{"line":51,"column":37}},"24":{"start":{"line":53,"column":8},"end":{"line":53,"column":38}},"25":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"26":{"start":{"line":57,"column":8},"end":{"line":57,"column":26}},"27":{"start":{"line":61,"column":0},"end":{"line":61,"column":44}},"28":{"start":{"line":63,"column":0},"end":{"line":63,"column":77}},"29":{"start":{"line":65,"column":0},"end":{"line":82,"column":2}},"30":{"start":{"line":66,"column":4},"end":{"line":66,"column":20}},"31":{"start":{"line":67,"column":4},"end":{"line":81,"column":5}},"32":{"start":{"line":68,"column":8},"end":{"line":70,"column":12}},"33":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"34":{"start":{"line":73,"column":12},"end":{"line":73,"column":37}},"35":{"start":{"line":75,"column":8},"end":{"line":75,"column":34}},"36":{"start":{"line":76,"column":8},"end":{"line":76,"column":40}},"37":{"start":{"line":77,"column":8},"end":{"line":77,"column":24}},"38":{"start":{"line":78,"column":8},"end":{"line":78,"column":24}},"39":{"start":{"line":79,"column":8},"end":{"line":79,"column":45}},"40":{"start":{"line":80,"column":8},"end":{"line":80,"column":26}},"41":{"start":{"line":84,"column":0},"end":{"line":96,"column":2}},"42":{"start":{"line":85,"column":4},"end":{"line":85,"column":20}},"43":{"start":{"line":86,"column":4},"end":{"line":91,"column":5}},"44":{"start":{"line":87,"column":8},"end":{"line":89,"column":12}},"45":{"start":{"line":90,"column":8},"end":{"line":90,"column":21}},"46":{"start":{"line":92,"column":4},"end":{"line":92,"column":17}},"47":{"start":{"line":93,"column":4},"end":{"line":93,"column":27}},"48":{"start":{"line":94,"column":4},"end":{"line":94,"column":38}},"49":{"start":{"line":95,"column":4},"end":{"line":95,"column":16}},"50":{"start":{"line":98,"column":0},"end":{"line":103,"column":2}},"51":{"start":{"line":99,"column":4},"end":{"line":99,"column":20}},"52":{"start":{"line":100,"column":4},"end":{"line":100,"column":24}},"53":{"start":{"line":101,"column":4},"end":{"line":101,"column":24}},"54":{"start":{"line":102,"column":4},"end":{"line":102,"column":16}},"55":{"start":{"line":105,"column":0},"end":{"line":132,"column":2}},"56":{"start":{"line":106,"column":4},"end":{"line":106,"column":20}},"57":{"start":{"line":107,"column":4},"end":{"line":107,"column":23}},"58":{"start":{"line":108,"column":4},"end":{"line":108,"column":32}},"59":{"start":{"line":109,"column":4},"end":{"line":112,"column":16}},"60":{"start":{"line":113,"column":4},"end":{"line":113,"column":16}},"61":{"start":{"line":115,"column":4},"end":{"line":122,"column":5}},"62":{"start":{"line":116,"column":8},"end":{"line":121,"column":9}},"63":{"start":{"line":117,"column":12},"end":{"line":117,"column":26}},"64":{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},"65":{"start":{"line":119,"column":16},"end":{"line":119,"column":30}},"66":{"start":{"line":124,"column":4},"end":{"line":131,"column":5}},"67":{"start":{"line":125,"column":8},"end":{"line":130,"column":9}},"68":{"start":{"line":126,"column":12},"end":{"line":126,"column":26}},"69":{"start":{"line":127,"column":12},"end":{"line":129,"column":13}},"70":{"start":{"line":128,"column":16},"end":{"line":128,"column":31}},"71":{"start":{"line":134,"column":0},"end":{"line":134,"column":38}}},"branchMap":{"1":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":8},"end":{"line":50,"column":8}}]},"2":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"3":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":34}},{"start":{"line":67,"column":38},"end":{"line":67,"column":65}}]},"4":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"6":{"line":93,"type":"cond-expr","locations":[{"start":{"line":93,"column":21},"end":{"line":93,"column":22}},{"start":{"line":93,"column":25},"end":{"line":93,"column":26}}]},"7":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":116,"column":8}},{"start":{"line":116,"column":8},"end":{"line":116,"column":8}}]},"8":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":118,"column":12}},{"start":{"line":118,"column":12},"end":{"line":118,"column":12}}]},"9":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"10":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":12},"end":{"line":127,"column":12}},{"start":{"line":127,"column":12},"end":{"line":127,"column":12}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","","var OutArgStream = require('./argstream').OutArgStream;","var pipelineStreams = require('./lib/pipeline_streams');","var OutResponse = require('./out_response');","var errors = require('./errors');","var States = require('./reqres_states');","","function StreamingOutResponse(id, options) {","    OutResponse.call(this, id, options);","    this.streamed = true;","    this._argstream = new OutArgStream();","    this.arg2 = this._argstream.arg2;","    this.arg3 = this._argstream.arg3;","","    var self = this;","    this._argstream.errorEvent.on(passError);","    this._argstream.frameEvent.on(onFrame);","    this._argstream.finishEvent.on(onFinish);","","    function passError(err) {","        self.errorEvent.emit(self, err);","    }","","    function onFrame(tup) {","        var parts = tup[0];","        var isLast = tup[1];","        if (self.state === States.Initial) {","            parts.unshift(self.arg1);","        }","        self.sendParts(parts, isLast);","    }","","    function onFinish() {","        self.emitFinish();","    }","}","","inherits(StreamingOutResponse, OutResponse);","","StreamingOutResponse.prototype.type = 'tchannel.outgoing-response.streaming';","","StreamingOutResponse.prototype.sendError = function sendError(codeString, message) {","    var self = this;","    if (self.state === States.Done || self.state === States.Error) {","        self.errorEvent.emit(self, errors.ResponseAlreadyDone({","            attempted: 'send error frame: ' + codeString + ': ' + message","        }));","    } else {","        if (self.span) {","            self.span.annotate('ss');","        }","        self.state = States.Error;","        self._argstream.finished = true;","        self.arg2.end();","        self.arg3.end();","        self._sendError(codeString, message);","        self.emitFinish();","    }","};","","StreamingOutResponse.prototype.setOk = function setOk(ok) {","    var self = this;","    if (self.state !== States.Initial) {","        self.errorEvent.emit(self, errors.ResponseAlreadyStarted({","            state: self.state","        }));","        return false;","    }","    self.ok = ok;","    self.code = ok ? 0 : 1; // TODO: too coupled to v2 specifics?","    self._argstream.deferFlushParts();","    return true;","};","","StreamingOutResponse.prototype.send = function send(res1, res2) {","    var self = this;","    self.arg2.end(res1);","    self.arg3.end(res2);","    return self;","};","","StreamingOutResponse.prototype.sendStreams = function sendStreams(res1, res2, callback) {","    var self = this;","    var called = false;","    self.errorEvent.on(onError);","    pipelineStreams(","        [res1, res2],","        [self.arg2, self.arg3],","        finish);","    return self;","","    function onError(err) {","        if (!called) {","            called = true;","            if (callback) {","                callback(err);","            }","        }","    }","","    function finish() {","        if (!called) {","            called = true;","            if (callback) {","                callback(null);","            }","        }","    }","};","","module.exports = StreamingOutResponse;",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"38":0,"39":0,"40":0,"41":0,"43":1,"44":0,"47":1,"48":0,"49":0,"50":0,"51":0,"53":0,"56":1,"57":0,"61":1,"63":1,"65":1,"66":0,"67":0,"68":0,"72":0,"73":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"84":1,"85":0,"86":0,"87":0,"90":0,"92":0,"93":0,"94":0,"95":0,"98":1,"99":0,"100":0,"101":0,"102":0,"105":1,"106":0,"107":0,"108":0,"109":0,"113":0,"115":1,"116":0,"117":0,"118":0,"119":0,"124":1,"125":0,"126":0,"127":0,"128":0,"134":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/in_request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/in_request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":0,"102":0,"103":1,"104":0,"105":0,"106":1,"107":0,"108":0,"109":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"TChannelInRequest","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":40}}},"2":{"name":"extendLogInfo","line":78,"loc":{"start":{"line":78,"column":44},"end":{"line":78,"column":73}}},"3":{"name":"setupTracing","line":107,"loc":{"start":{"line":107,"column":43},"end":{"line":107,"column":74}}},"4":{"name":"handleFrame","line":129,"loc":{"start":{"line":129,"column":42},"end":{"line":129,"column":78}}},"5":{"name":"emitError","line":150,"loc":{"start":{"line":150,"column":40},"end":{"line":150,"column":64}}},"6":{"name":"emitFinish","line":161,"loc":{"start":{"line":161,"column":41},"end":{"line":161,"column":63}}},"7":{"name":"onTimeout","line":168,"loc":{"start":{"line":168,"column":40},"end":{"line":168,"column":64}}},"8":{"name":"deferInReqTimeoutErrorEmit","line":189,"loc":{"start":{"line":189,"column":4},"end":{"line":189,"column":42}}},"9":{"name":"withArg1","line":202,"loc":{"start":{"line":202,"column":39},"end":{"line":202,"column":67}}},"10":{"name":"withArg23","line":207,"loc":{"start":{"line":207,"column":39},"end":{"line":207,"column":68}}},"11":{"name":"withArg23","line":212,"loc":{"start":{"line":212,"column":40},"end":{"line":212,"column":69}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":28}},"8":{"start":{"line":33,"column":0},"end":{"line":72,"column":1}},"9":{"start":{"line":36,"column":4},"end":{"line":36,"column":28}},"10":{"start":{"line":37,"column":4},"end":{"line":37,"column":48}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":52}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":50}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":40}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":43}},"16":{"start":{"line":44,"column":4},"end":{"line":44,"column":49}},"17":{"start":{"line":45,"column":4},"end":{"line":45,"column":66}},"18":{"start":{"line":46,"column":4},"end":{"line":46,"column":41}},"19":{"start":{"line":47,"column":4},"end":{"line":47,"column":45}},"20":{"start":{"line":48,"column":4},"end":{"line":48,"column":49}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":49}},"22":{"start":{"line":51,"column":4},"end":{"line":51,"column":32}},"23":{"start":{"line":52,"column":4},"end":{"line":52,"column":27}},"24":{"start":{"line":53,"column":4},"end":{"line":53,"column":31}},"25":{"start":{"line":54,"column":4},"end":{"line":54,"column":22}},"26":{"start":{"line":55,"column":4},"end":{"line":55,"column":27}},"27":{"start":{"line":56,"column":4},"end":{"line":56,"column":26}},"28":{"start":{"line":57,"column":4},"end":{"line":57,"column":28}},"29":{"start":{"line":58,"column":4},"end":{"line":58,"column":25}},"30":{"start":{"line":59,"column":4},"end":{"line":59,"column":28}},"31":{"start":{"line":60,"column":4},"end":{"line":60,"column":28}},"32":{"start":{"line":61,"column":4},"end":{"line":61,"column":30}},"33":{"start":{"line":62,"column":4},"end":{"line":62,"column":21}},"34":{"start":{"line":63,"column":4},"end":{"line":63,"column":43}},"35":{"start":{"line":64,"column":4},"end":{"line":64,"column":20}},"36":{"start":{"line":65,"column":4},"end":{"line":65,"column":20}},"37":{"start":{"line":66,"column":4},"end":{"line":66,"column":24}},"38":{"start":{"line":67,"column":4},"end":{"line":67,"column":31}},"39":{"start":{"line":69,"column":4},"end":{"line":71,"column":5}},"40":{"start":{"line":70,"column":8},"end":{"line":70,"column":35}},"41":{"start":{"line":74,"column":0},"end":{"line":74,"column":42}},"42":{"start":{"line":76,"column":0},"end":{"line":76,"column":63}},"43":{"start":{"line":78,"column":0},"end":{"line":105,"column":2}},"44":{"start":{"line":79,"column":4},"end":{"line":79,"column":20}},"45":{"start":{"line":86,"column":4},"end":{"line":86,"column":31}},"46":{"start":{"line":87,"column":4},"end":{"line":87,"column":35}},"47":{"start":{"line":88,"column":4},"end":{"line":88,"column":54}},"48":{"start":{"line":89,"column":4},"end":{"line":89,"column":47}},"49":{"start":{"line":90,"column":4},"end":{"line":90,"column":40}},"50":{"start":{"line":91,"column":4},"end":{"line":91,"column":38}},"51":{"start":{"line":92,"column":4},"end":{"line":92,"column":33}},"52":{"start":{"line":94,"column":4},"end":{"line":98,"column":5}},"53":{"start":{"line":95,"column":8},"end":{"line":95,"column":43}},"54":{"start":{"line":97,"column":8},"end":{"line":97,"column":47}},"55":{"start":{"line":100,"column":4},"end":{"line":102,"column":5}},"56":{"start":{"line":101,"column":8},"end":{"line":101,"column":51}},"57":{"start":{"line":104,"column":4},"end":{"line":104,"column":16}},"58":{"start":{"line":107,"column":0},"end":{"line":127,"column":2}},"59":{"start":{"line":108,"column":4},"end":{"line":108,"column":20}},"60":{"start":{"line":110,"column":4},"end":{"line":118,"column":7}},"61":{"start":{"line":120,"column":4},"end":{"line":120,"column":52}},"62":{"start":{"line":121,"column":4},"end":{"line":121,"column":52}},"63":{"start":{"line":122,"column":4},"end":{"line":124,"column":5}},"64":{"start":{"line":123,"column":8},"end":{"line":123,"column":68}},"65":{"start":{"line":126,"column":4},"end":{"line":126,"column":29}},"66":{"start":{"line":129,"column":0},"end":{"line":148,"column":2}},"67":{"start":{"line":130,"column":4},"end":{"line":130,"column":20}},"68":{"start":{"line":132,"column":4},"end":{"line":134,"column":5}},"69":{"start":{"line":133,"column":8},"end":{"line":133,"column":52}},"70":{"start":{"line":136,"column":4},"end":{"line":136,"column":40}},"71":{"start":{"line":137,"column":4},"end":{"line":137,"column":38}},"72":{"start":{"line":138,"column":4},"end":{"line":138,"column":40}},"73":{"start":{"line":139,"column":4},"end":{"line":139,"column":40}},"74":{"start":{"line":141,"column":4},"end":{"line":143,"column":5}},"75":{"start":{"line":142,"column":8},"end":{"line":142,"column":39}},"76":{"start":{"line":145,"column":4},"end":{"line":145,"column":22}},"77":{"start":{"line":147,"column":4},"end":{"line":147,"column":16}},"78":{"start":{"line":150,"column":0},"end":{"line":159,"column":2}},"79":{"start":{"line":151,"column":4},"end":{"line":151,"column":20}},"80":{"start":{"line":153,"column":4},"end":{"line":155,"column":5}},"81":{"start":{"line":154,"column":8},"end":{"line":154,"column":47}},"82":{"start":{"line":157,"column":4},"end":{"line":157,"column":19}},"83":{"start":{"line":158,"column":4},"end":{"line":158,"column":36}},"84":{"start":{"line":161,"column":0},"end":{"line":166,"column":2}},"85":{"start":{"line":162,"column":4},"end":{"line":162,"column":20}},"86":{"start":{"line":164,"column":4},"end":{"line":164,"column":29}},"87":{"start":{"line":165,"column":4},"end":{"line":165,"column":32}},"88":{"start":{"line":168,"column":0},"end":{"line":199,"column":2}},"89":{"start":{"line":169,"column":4},"end":{"line":169,"column":20}},"90":{"start":{"line":170,"column":4},"end":{"line":170,"column":21}},"91":{"start":{"line":172,"column":4},"end":{"line":187,"column":5}},"92":{"start":{"line":179,"column":8},"end":{"line":185,"column":11}},"93":{"start":{"line":186,"column":8},"end":{"line":186,"column":53}},"94":{"start":{"line":189,"column":4},"end":{"line":198,"column":5}},"95":{"start":{"line":190,"column":8},"end":{"line":193,"column":9}},"96":{"start":{"line":191,"column":12},"end":{"line":191,"column":55}},"97":{"start":{"line":192,"column":12},"end":{"line":192,"column":41}},"98":{"start":{"line":195,"column":8},"end":{"line":197,"column":9}},"99":{"start":{"line":196,"column":12},"end":{"line":196,"column":46}},"100":{"start":{"line":202,"column":0},"end":{"line":205,"column":2}},"101":{"start":{"line":203,"column":4},"end":{"line":203,"column":20}},"102":{"start":{"line":204,"column":4},"end":{"line":204,"column":30}},"103":{"start":{"line":207,"column":0},"end":{"line":210,"column":2}},"104":{"start":{"line":208,"column":4},"end":{"line":208,"column":20}},"105":{"start":{"line":209,"column":4},"end":{"line":209,"column":30}},"106":{"start":{"line":212,"column":0},"end":{"line":215,"column":2}},"107":{"start":{"line":213,"column":4},"end":{"line":213,"column":20}},"108":{"start":{"line":214,"column":4},"end":{"line":214,"column":41}},"109":{"start":{"line":217,"column":0},"end":{"line":217,"column":35}}},"branchMap":{"1":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":19},"end":{"line":42,"column":34}},{"start":{"line":42,"column":38},"end":{"line":42,"column":39}}]},"2":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":19},"end":{"line":43,"column":34}},{"start":{"line":43,"column":38},"end":{"line":43,"column":42}}]},"3":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":42}},{"start":{"line":44,"column":46},"end":{"line":44,"column":48}}]},"4":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":22},"end":{"line":45,"column":37}},{"start":{"line":45,"column":41},"end":{"line":45,"column":59}},{"start":{"line":45,"column":63},"end":{"line":45,"column":65}}]},"5":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":19},"end":{"line":46,"column":34}},{"start":{"line":46,"column":38},"end":{"line":46,"column":40}}]},"6":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":20},"end":{"line":47,"column":36}},{"start":{"line":47,"column":40},"end":{"line":47,"column":44}}]},"7":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":22},"end":{"line":48,"column":40}},{"start":{"line":48,"column":44},"end":{"line":48,"column":48}}]},"8":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":22},"end":{"line":49,"column":40}},{"start":{"line":49,"column":44},"end":{"line":49,"column":48}}]},"9":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":14},"end":{"line":54,"column":16}},{"start":{"line":54,"column":20},"end":{"line":54,"column":21}}]},"10":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"12":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"13":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"14":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"15":{"line":132,"type":"binary-expr","locations":[{"start":{"line":132,"column":8},"end":{"line":132,"column":26}},{"start":{"line":132,"column":30},"end":{"line":132,"column":59}},{"start":{"line":132,"column":63},"end":{"line":132,"column":70}}]},"16":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":16},"end":{"line":136,"column":24}},{"start":{"line":136,"column":28},"end":{"line":136,"column":39}}]},"17":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":16},"end":{"line":138,"column":24}},{"start":{"line":138,"column":28},"end":{"line":138,"column":39}}]},"18":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":16},"end":{"line":139,"column":24}},{"start":{"line":139,"column":28},"end":{"line":139,"column":39}}]},"19":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":141,"column":4}},{"start":{"line":141,"column":4},"end":{"line":141,"column":4}}]},"20":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":153,"column":4}},{"start":{"line":153,"column":4},"end":{"line":153,"column":4}}]},"21":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":4},"end":{"line":172,"column":4}},{"start":{"line":172,"column":4},"end":{"line":172,"column":4}}]},"22":{"line":172,"type":"binary-expr","locations":[{"start":{"line":172,"column":8},"end":{"line":172,"column":17}},{"start":{"line":173,"column":8},"end":{"line":173,"column":41}},{"start":{"line":174,"column":8},"end":{"line":174,"column":43}}]},"23":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":8},"end":{"line":190,"column":8}},{"start":{"line":190,"column":8},"end":{"line":190,"column":8}}]},"24":{"line":190,"type":"binary-expr","locations":[{"start":{"line":190,"column":12},"end":{"line":190,"column":21}},{"start":{"line":190,"column":25},"end":{"line":190,"column":58}}]},"25":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":8},"end":{"line":195,"column":8}},{"start":{"line":195,"column":8},"end":{"line":195,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var EventEmitter = require('./lib/event_emitter');","var inherits = require('util').inherits;","var process = require('process');","var Buffer = require('buffer').Buffer;","","var errors = require('./errors');","var States = require('./reqres_states');","","var emptyBuffer = Buffer(0);","","function TChannelInRequest(id, options) {","    /*eslint max-statements: [2, 40]*/","","    EventEmitter.call(this);","    this.errorEvent = this.defineEvent('error');","    this.timeoutEvent = this.defineEvent('timeout');","    this.finishEvent = this.defineEvent('finish');","    this.channel = options.channel;","","    this.timeout = options.timeout || 0;","    this.tracing = options.tracing || null;","    this.serviceName = options.serviceName || '';","    this.callerName = options.headers && options.headers.cn || '';","    this.headers = options.headers || {};","    this.checksum = options.checksum || null;","    this.retryFlags = options.retryFlags || null;","    this.connection = options.connection || null;","","    this.state = States.Initial;","    this.operations = null;","    this.timeHeapHandle = null;","    this.id = id || 0;","    this.remoteAddr = null;","    this.streamed = false;","    this.arg1 = emptyBuffer;","    this.endpoint = null;","    this.arg2 = emptyBuffer;","    this.arg3 = emptyBuffer;","    this.forwardTrace = false;","    this.span = null;","    this.start = this.channel.timers.now();","    this.res = null;","    this.err = null;","    this.circuit = null;","    this.flags = options.flags;","","    if (options.tracer) {","        this.setupTracing(options);","    }","}","","inherits(TChannelInRequest, EventEmitter);","","TChannelInRequest.prototype.type = 'tchannel.incoming-request';","","TChannelInRequest.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    // TODO: add:","    // - request id?","    // - tracing id?","    // - other?","","    info.inRequestId = self.id;","    info.inRequestType = self.type;","    info.inRequestState = States.describe(self.state);","    info.inRequestRemoteAddr = self.remoteAddr;","    info.serviceName = self.serviceName;","    info.callerName = self.callerName;","    info.inRequestErr = self.err;","","    if (self.endpoint !== null) {","        info.inRequestArg1 = self.endpoint;","    } else {","        info.inRequestArg1 = String(self.arg1);","    }","","    if (self.connection) {","        info = self.connection.extendLogInfo(info);","    }","","    return info;","};","","TChannelInRequest.prototype.setupTracing = function setupTracing(options) {","    var self = this;","","    self.span = options.tracer.setupNewSpan({","        spanid: self.tracing.spanid,","        traceid: self.tracing.traceid,","        parentid: self.tracing.parentid,","        flags: self.tracing.flags,","        remoteName: options.hostPort,","        serviceName: self.serviceName,","        name: '' // fill this in later","    });","","    self.span.annotateBinary('cn', self.callerName);","    self.span.annotateBinary('as', self.headers.as);","    if (self.connection) {","        self.span.annotateBinary('src', self.connection.remoteName);","    }","","    self.span.annotate('sr');","};","","TChannelInRequest.prototype.handleFrame = function handleFrame(parts, isLast) {","    var self = this;","","    if (parts.length !== 3 || self.state !== States.Initial || !isLast) {","        return errors.ArgStreamUnimplementedError();","    }","","    self.arg1 = parts[0] || emptyBuffer;","    self.endpoint = String(self.arg1);","    self.arg2 = parts[1] || emptyBuffer;","    self.arg3 = parts[2] || emptyBuffer;","","    if (self.span) {","        self.span.name = self.endpoint;","    }","","    self.emitFinish();","","    return null;","};","","TChannelInRequest.prototype.emitError = function emitError(err) {","    var self = this;","","    if (self.circuit) {","        self.circuit.state.onRequestError(err);","    }","","    self.err = err;","    self.errorEvent.emit(self, err);","};","","TChannelInRequest.prototype.emitFinish = function emitFinish() {","    var self = this;","","    self.state = States.Done;","    self.finishEvent.emit(self);","};","","TChannelInRequest.prototype.onTimeout = function onTimeout(now) {","    var self = this;","    var timeoutError;","","    if (!self.res ||","        self.res.state === States.Initial ||","        self.res.state === States.Streaming","    ) {","        // TODO: send an error frame response?","        // TODO: emit error on self.res instead / in addition to?","        // TODO: should cancel any pending handler","        timeoutError = errors.RequestTimeoutError({","            id: self.id,","            start: self.start,","            elapsed: now - self.start,","            timeout: self.timeout,","            remoteAddr: self.remoteAddr","        });","        process.nextTick(deferInReqTimeoutErrorEmit);","    }","","    function deferInReqTimeoutErrorEmit() {","        if (!self.res || self.res.state === States.Initial) {","            self.timeoutEvent.emit(self, timeoutError);","            self.emitError(timeoutError);","        }","","        if (self.operations) {","            self.operations.popInReq(self.id);","        }","    }","};","","// TODO: deprecated, remove","TChannelInRequest.prototype.withArg1 = function withArg1(callback) {","    var self = this;","    callback(null, self.arg1);","};","","TChannelInRequest.prototype.withArg2 = function withArg23(callback) {","    var self = this;","    callback(null, self.arg2);","};","","TChannelInRequest.prototype.withArg23 = function withArg23(callback) {","    var self = this;","    callback(null, self.arg2, self.arg3);","};","","module.exports = TChannelInRequest;",""],"l":{"23":1,"24":1,"25":1,"26":1,"28":1,"29":1,"31":1,"33":1,"36":0,"37":0,"38":0,"39":0,"40":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"69":0,"70":0,"74":1,"76":1,"78":1,"79":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"94":0,"95":0,"97":0,"100":0,"101":0,"104":0,"107":1,"108":0,"110":0,"120":0,"121":0,"122":0,"123":0,"126":0,"129":1,"130":0,"132":0,"133":0,"136":0,"137":0,"138":0,"139":0,"141":0,"142":0,"145":0,"147":0,"150":1,"151":0,"153":0,"154":0,"157":0,"158":0,"161":1,"162":0,"164":0,"165":0,"168":1,"169":0,"170":0,"172":0,"179":0,"186":0,"189":1,"190":0,"191":0,"192":0,"195":0,"196":0,"202":1,"203":0,"204":0,"207":1,"208":0,"209":0,"212":1,"213":0,"214":0,"217":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/in_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/in_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"TChannelInResponse","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":41}}},"2":{"name":"extendLogInfo","line":68,"loc":{"start":{"line":68,"column":45},"end":{"line":68,"column":74}}},"3":{"name":"onFinish","line":80,"loc":{"start":{"line":80,"column":40},"end":{"line":80,"column":70}}},"4":{"name":"handleFrame","line":84,"loc":{"start":{"line":84,"column":43},"end":{"line":84,"column":79}}},"5":{"name":"withArg23","line":100,"loc":{"start":{"line":100,"column":41},"end":{"line":100,"column":70}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":38}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":28}},"7":{"start":{"line":32,"column":0},"end":{"line":62,"column":1}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":28}},"9":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":28}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":48}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":50}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":33}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":33}},"15":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"16":{"start":{"line":42,"column":4},"end":{"line":42,"column":31}},"17":{"start":{"line":44,"column":4},"end":{"line":44,"column":32}},"18":{"start":{"line":45,"column":4},"end":{"line":45,"column":27}},"19":{"start":{"line":46,"column":4},"end":{"line":46,"column":22}},"20":{"start":{"line":47,"column":4},"end":{"line":47,"column":34}},"21":{"start":{"line":48,"column":4},"end":{"line":48,"column":45}},"22":{"start":{"line":49,"column":4},"end":{"line":49,"column":41}},"23":{"start":{"line":50,"column":4},"end":{"line":50,"column":30}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":37}},"25":{"start":{"line":53,"column":4},"end":{"line":53,"column":26}},"26":{"start":{"line":54,"column":4},"end":{"line":54,"column":27}},"27":{"start":{"line":55,"column":4},"end":{"line":55,"column":28}},"28":{"start":{"line":56,"column":4},"end":{"line":56,"column":28}},"29":{"start":{"line":57,"column":4},"end":{"line":57,"column":28}},"30":{"start":{"line":59,"column":4},"end":{"line":59,"column":35}},"31":{"start":{"line":61,"column":4},"end":{"line":61,"column":39}},"32":{"start":{"line":64,"column":0},"end":{"line":64,"column":43}},"33":{"start":{"line":66,"column":0},"end":{"line":66,"column":65}},"34":{"start":{"line":68,"column":0},"end":{"line":78,"column":2}},"35":{"start":{"line":69,"column":4},"end":{"line":69,"column":20}},"36":{"start":{"line":71,"column":4},"end":{"line":71,"column":30}},"37":{"start":{"line":72,"column":4},"end":{"line":72,"column":34}},"38":{"start":{"line":73,"column":4},"end":{"line":73,"column":53}},"39":{"start":{"line":74,"column":4},"end":{"line":74,"column":30}},"40":{"start":{"line":75,"column":4},"end":{"line":75,"column":34}},"41":{"start":{"line":77,"column":4},"end":{"line":77,"column":16}},"42":{"start":{"line":80,"column":0},"end":{"line":82,"column":2}},"43":{"start":{"line":81,"column":4},"end":{"line":81,"column":29}},"44":{"start":{"line":84,"column":0},"end":{"line":98,"column":2}},"45":{"start":{"line":85,"column":4},"end":{"line":85,"column":20}},"46":{"start":{"line":87,"column":4},"end":{"line":89,"column":5}},"47":{"start":{"line":88,"column":8},"end":{"line":88,"column":52}},"48":{"start":{"line":91,"column":4},"end":{"line":91,"column":40}},"49":{"start":{"line":92,"column":4},"end":{"line":92,"column":40}},"50":{"start":{"line":93,"column":4},"end":{"line":93,"column":40}},"51":{"start":{"line":95,"column":4},"end":{"line":95,"column":32}},"52":{"start":{"line":97,"column":4},"end":{"line":97,"column":16}},"53":{"start":{"line":100,"column":0},"end":{"line":103,"column":2}},"54":{"start":{"line":101,"column":4},"end":{"line":101,"column":20}},"55":{"start":{"line":102,"column":4},"end":{"line":102,"column":41}},"56":{"start":{"line":105,"column":0},"end":{"line":105,"column":36}}},"branchMap":{"1":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":14},"end":{"line":33,"column":21}},{"start":{"line":33,"column":25},"end":{"line":33,"column":27}}]},"2":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":14},"end":{"line":46,"column":16}},{"start":{"line":46,"column":20},"end":{"line":46,"column":21}}]},"3":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":16},"end":{"line":47,"column":28}},{"start":{"line":47,"column":32},"end":{"line":47,"column":33}}]},"4":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":20},"end":{"line":48,"column":36}},{"start":{"line":48,"column":40},"end":{"line":48,"column":44}}]},"5":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":19},"end":{"line":49,"column":34}},{"start":{"line":49,"column":38},"end":{"line":49,"column":40}}]},"6":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":16},"end":{"line":51,"column":28}},{"start":{"line":51,"column":32},"end":{"line":51,"column":36}}]},"7":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"8":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":26}},{"start":{"line":87,"column":30},"end":{"line":87,"column":59}},{"start":{"line":87,"column":63},"end":{"line":87,"column":70}}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":24}},{"start":{"line":91,"column":28},"end":{"line":91,"column":39}}]},"10":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":24}},{"start":{"line":92,"column":28},"end":{"line":92,"column":39}}]},"11":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":16},"end":{"line":93,"column":24}},{"start":{"line":93,"column":28},"end":{"line":93,"column":39}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var EventEmitter = require('./lib/event_emitter');","var inherits = require('util').inherits;","var Buffer = require('buffer').Buffer;","","var errors = require('./errors');","var States = require('./reqres_states');","","var emptyBuffer = Buffer(0);","","function TChannelInResponse(id, options) {","    options = options || {};","    var self = this;","    EventEmitter.call(self);","    self.errorEvent = self.defineEvent('error');","    self.finishEvent = self.defineEvent('finish');","","    self.logger = options.logger;","    self.random = options.random;","    self.timers = options.timers;","    self.flags = options.flags;","","    self.state = States.Initial;","    self.remoteAddr = null;","    self.id = id || 0;","    self.code = options.code || 0;","    self.checksum = options.checksum || null;","    self.headers = options.headers || {};","    self.ok = self.code === 0; // TODO: probably okay, but a bit jank","    self.span = options.span || null;","","    self.streamed = false;","    self._argstream = null;","    self.arg1 = emptyBuffer;","    self.arg2 = emptyBuffer;","    self.arg3 = emptyBuffer;","","    self.start = self.timers.now();","","    self.finishEvent.on(self.onFinish);","}","","inherits(TChannelInResponse, EventEmitter);","","TChannelInResponse.prototype.type = 'tchannel.incoming-response';","","TChannelInResponse.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    info.responseId = self.id;","    info.responseType = self.type;","    info.responseState = States.describe(self.state);","    info.responseOk = self.ok;","    info.responseCode = self.code;","","    return info;","};","","TChannelInResponse.prototype.onFinish = function onFinish(_arg, resp) {","    resp.state = States.Done;","};","","TChannelInResponse.prototype.handleFrame = function handleFrame(parts, isLast) {","    var self = this;","","    if (parts.length !== 3 || self.state !== States.Initial || !isLast) {","        return errors.ArgStreamUnimplementedError();","    }","","    self.arg1 = parts[0] || emptyBuffer;","    self.arg2 = parts[1] || emptyBuffer;","    self.arg3 = parts[2] || emptyBuffer;","","    self.finishEvent.emit(self);","","    return null;","};","","TChannelInResponse.prototype.withArg23 = function withArg23(callback) {","    var self = this;","    callback(null, self.arg2, self.arg3);","};","","module.exports = TChannelInResponse;",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":1,"30":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"40":0,"41":0,"42":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"56":0,"57":0,"59":0,"61":0,"64":1,"66":1,"68":1,"69":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"80":1,"81":0,"84":1,"85":0,"87":0,"88":0,"91":0,"92":0,"93":0,"95":0,"97":0,"100":1,"101":0,"102":0,"105":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_in_request.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_in_request.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1,"21":0,"22":1,"23":1,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":1,"46":0,"47":0,"48":1,"49":0,"50":0,"51":1,"52":0,"53":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"StreamingInRequest","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":41}}},"2":{"name":"passError","line":46,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":28}}},"3":{"name":"onFinish","line":50,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":24}}},"4":{"name":"handleFrame","line":59,"loc":{"start":{"line":59,"column":43},"end":{"line":59,"column":79}}},"5":{"name":"withArg1","line":90,"loc":{"start":{"line":90,"column":40},"end":{"line":90,"column":68}}},"6":{"name":"withArg2","line":95,"loc":{"start":{"line":95,"column":40},"end":{"line":95,"column":68}}},"7":{"name":"withArg23","line":100,"loc":{"start":{"line":100,"column":41},"end":{"line":100,"column":70}}},"8":{"name":"compatCall","line":106,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":35}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":39}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":53}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":28}},"9":{"start":{"line":34,"column":0},"end":{"line":53,"column":1}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":38}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":25}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":40}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":37}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":37}},"15":{"start":{"line":42,"column":4},"end":{"line":42,"column":20}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":45}},"17":{"start":{"line":44,"column":4},"end":{"line":44,"column":45}},"18":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"19":{"start":{"line":47,"column":8},"end":{"line":47,"column":40}},"20":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"21":{"start":{"line":51,"column":8},"end":{"line":51,"column":26}},"22":{"start":{"line":55,"column":0},"end":{"line":55,"column":40}},"23":{"start":{"line":57,"column":0},"end":{"line":57,"column":74}},"24":{"start":{"line":59,"column":0},"end":{"line":87,"column":2}},"25":{"start":{"line":60,"column":4},"end":{"line":60,"column":20}},"26":{"start":{"line":62,"column":4},"end":{"line":75,"column":5}},"27":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"28":{"start":{"line":64,"column":12},"end":{"line":64,"column":43}},"29":{"start":{"line":67,"column":8},"end":{"line":67,"column":49}},"30":{"start":{"line":68,"column":8},"end":{"line":68,"column":42}},"31":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"32":{"start":{"line":70,"column":12},"end":{"line":70,"column":43}},"33":{"start":{"line":72,"column":8},"end":{"line":72,"column":38}},"34":{"start":{"line":73,"column":11},"end":{"line":75,"column":5}},"35":{"start":{"line":74,"column":8},"end":{"line":74,"column":64}},"36":{"start":{"line":77,"column":4},"end":{"line":77,"column":57}},"37":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"38":{"start":{"line":79,"column":8},"end":{"line":79,"column":19}},"39":{"start":{"line":82,"column":4},"end":{"line":84,"column":5}},"40":{"start":{"line":83,"column":8},"end":{"line":83,"column":64}},"41":{"start":{"line":86,"column":4},"end":{"line":86,"column":16}},"42":{"start":{"line":90,"column":0},"end":{"line":93,"column":2}},"43":{"start":{"line":91,"column":4},"end":{"line":91,"column":20}},"44":{"start":{"line":92,"column":4},"end":{"line":92,"column":30}},"45":{"start":{"line":95,"column":0},"end":{"line":98,"column":2}},"46":{"start":{"line":96,"column":4},"end":{"line":96,"column":20}},"47":{"start":{"line":97,"column":4},"end":{"line":97,"column":37}},"48":{"start":{"line":100,"column":0},"end":{"line":109,"column":2}},"49":{"start":{"line":101,"column":4},"end":{"line":101,"column":20}},"50":{"start":{"line":102,"column":4},"end":{"line":105,"column":19}},"51":{"start":{"line":106,"column":4},"end":{"line":108,"column":5}},"52":{"start":{"line":107,"column":8},"end":{"line":107,"column":44}},"53":{"start":{"line":111,"column":0},"end":{"line":111,"column":36}}},"branchMap":{"1":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"2":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"3":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":20},"end":{"line":67,"column":33}},{"start":{"line":67,"column":37},"end":{"line":67,"column":48}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"5":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":11},"end":{"line":73,"column":11}},{"start":{"line":73,"column":11},"end":{"line":73,"column":11}}]},"6":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"7":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"8":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":15}},{"start":{"line":82,"column":19},"end":{"line":82,"column":50}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var parallel = require('run-parallel');","var InRequest = require('./in_request');","var inherits = require('util').inherits;","var errors = require('./errors');","var Buffer = require('buffer').Buffer;","","var States = require('./reqres_states');","var InArgStream = require('./argstream').InArgStream;","","var emptyBuffer = Buffer(0);","","function StreamingInRequest(id, options) {","    InRequest.call(this, id, options);","","    this.streamed = true;","    this._argstream = new InArgStream();","    this.arg2 = this._argstream.arg2;","    this.arg3 = this._argstream.arg3;","","    var self = this;","    this._argstream.errorEvent.on(passError);","    this._argstream.finishEvent.on(onFinish);","","    function passError(err) {","        self.errorEvent.emit(self, err);","    }","","    function onFinish() {","        self.emitFinish();","    }","}","","inherits(StreamingInRequest, InRequest);","","StreamingInRequest.prototype.type = 'tchannel.incoming-request.streaming';","","StreamingInRequest.prototype.handleFrame = function handleFrame(parts, isLast) {","    var self = this;","","    if (self.state === States.Initial) {","        if (parts.length < 2) {","            return errors.Arg1Fragmented();","        }","","        self.arg1 = parts.shift() || emptyBuffer;","        self.endpoint = String(self.arg1);","        if (self.span) {","            self.span.name = self.endpoint;","        }","        self.state = States.Streaming;","    } else if (self.state !== States.Streaming) {","        return errors.ArgStreamUnknownFrameHandlingStateError();","    }","","    var err = self._argstream.handleFrame(parts, isLast);","    if (err) {","        return err;","    }","","    if (!isLast && self.state !== States.Streaming) {","        return errors.ArgStreamUnknownFrameHandlingStateError();","    }","","    return null;","};","","// TODO: deprecated, remove","StreamingInRequest.prototype.withArg1 = function withArg1(callback) {","    var self = this;","    callback(null, self.arg1);","};","","StreamingInRequest.prototype.withArg2 = function withArg2(callback) {","    var self = this;","    self.arg2.onValueReady(callback);","};","","StreamingInRequest.prototype.withArg23 = function withArg23(callback) {","    var self = this;","    parallel({","        arg2: self.arg2.onValueReady,","        arg3: self.arg3.onValueReady","    }, compatCall);","    function compatCall(err, args) {","        callback(err, args.arg2, args.arg3);","    }","};","","module.exports = StreamingInRequest;",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"29":1,"30":1,"32":1,"34":1,"35":0,"37":0,"38":0,"39":0,"40":0,"42":0,"43":0,"44":0,"46":1,"47":0,"50":1,"51":0,"55":1,"57":1,"59":1,"60":0,"62":0,"63":0,"64":0,"67":0,"68":0,"69":0,"70":0,"72":0,"73":0,"74":0,"77":0,"78":0,"79":0,"82":0,"83":0,"86":0,"90":1,"91":0,"92":0,"95":1,"96":0,"97":0,"100":1,"101":0,"102":0,"106":1,"107":0,"111":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_in_response.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/streaming_in_response.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":1,"22":0,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":1,"44":0,"45":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"StreamingInResponse","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":42}}},"2":{"name":"passError","line":47,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":28}}},"3":{"name":"onFinish","line":51,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":24}}},"4":{"name":"handleFrame","line":60,"loc":{"start":{"line":60,"column":44},"end":{"line":60,"column":80}}},"5":{"name":"withArg23","line":86,"loc":{"start":{"line":86,"column":42},"end":{"line":86,"column":71}}},"6":{"name":"compatCall","line":92,"loc":{"start":{"line":92,"column":4},"end":{"line":92,"column":35}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":39}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":42}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":53}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":28}},"9":{"start":{"line":34,"column":0},"end":{"line":54,"column":1}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":28}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":39}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":25}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":40}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":37}},"15":{"start":{"line":41,"column":4},"end":{"line":41,"column":37}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":20}},"17":{"start":{"line":44,"column":4},"end":{"line":44,"column":45}},"18":{"start":{"line":45,"column":4},"end":{"line":45,"column":45}},"19":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":40}},"21":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"22":{"start":{"line":52,"column":8},"end":{"line":52,"column":36}},"23":{"start":{"line":56,"column":0},"end":{"line":56,"column":42}},"24":{"start":{"line":58,"column":0},"end":{"line":58,"column":76}},"25":{"start":{"line":60,"column":0},"end":{"line":84,"column":2}},"26":{"start":{"line":61,"column":4},"end":{"line":61,"column":20}},"27":{"start":{"line":63,"column":4},"end":{"line":72,"column":5}},"28":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"29":{"start":{"line":65,"column":12},"end":{"line":65,"column":43}},"30":{"start":{"line":68,"column":8},"end":{"line":68,"column":49}},"31":{"start":{"line":69,"column":8},"end":{"line":69,"column":38}},"32":{"start":{"line":70,"column":11},"end":{"line":72,"column":5}},"33":{"start":{"line":71,"column":8},"end":{"line":71,"column":64}},"34":{"start":{"line":74,"column":4},"end":{"line":74,"column":57}},"35":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"36":{"start":{"line":76,"column":8},"end":{"line":76,"column":19}},"37":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"38":{"start":{"line":80,"column":8},"end":{"line":80,"column":64}},"39":{"start":{"line":83,"column":4},"end":{"line":83,"column":16}},"40":{"start":{"line":86,"column":0},"end":{"line":95,"column":2}},"41":{"start":{"line":87,"column":4},"end":{"line":87,"column":20}},"42":{"start":{"line":88,"column":4},"end":{"line":91,"column":19}},"43":{"start":{"line":92,"column":4},"end":{"line":94,"column":5}},"44":{"start":{"line":93,"column":8},"end":{"line":93,"column":44}},"45":{"start":{"line":97,"column":0},"end":{"line":97,"column":37}}},"branchMap":{"1":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":14},"end":{"line":35,"column":21}},{"start":{"line":35,"column":25},"end":{"line":35,"column":27}}]},"2":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"3":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":64,"column":8}},{"start":{"line":64,"column":8},"end":{"line":64,"column":8}}]},"4":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":20},"end":{"line":68,"column":33}},{"start":{"line":68,"column":37},"end":{"line":68,"column":48}}]},"5":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":11},"end":{"line":70,"column":11}},{"start":{"line":70,"column":11},"end":{"line":70,"column":11}}]},"6":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"7":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"8":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":15}},{"start":{"line":79,"column":19},"end":{"line":79,"column":50}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var parallel = require('run-parallel');","var InResponse = require('./in_response');","var inherits = require('util').inherits;","var Buffer = require('buffer').Buffer;","","var errors = require('./errors');","var States = require('./reqres_states');","var InArgStream = require('./argstream').InArgStream;","","var emptyBuffer = Buffer(0);","","function StreamingInResponse(id, options) {","    options = options || {};","    InResponse.call(this, id, options);","","    this.streamed = true;","    this._argstream = new InArgStream();","    this.arg2 = this._argstream.arg2;","    this.arg3 = this._argstream.arg3;","","    var self = this;","    this._argstream.errorEvent.on(passError);","    this._argstream.finishEvent.on(onFinish);","","    function passError(err) {","        self.errorEvent.emit(self, err);","    }","","    function onFinish() {","        self.finishEvent.emit(self);","    }","}","","inherits(StreamingInResponse, InResponse);","","StreamingInResponse.prototype.type = 'tchannel.incoming-response.streaming';","","StreamingInResponse.prototype.handleFrame = function handleFrame(parts, isLast) {","    var self = this;","","    if (self.state === States.Initial) {","        if (parts.length < 2) {","            return errors.Arg1Fragmented();","        }","","        self.arg1 = parts.shift() || emptyBuffer;","        self.state = States.Streaming;","    } else if (self.state !== States.Streaming) {","        return errors.ArgStreamUnknownFrameHandlingStateError();","    }","","    var err = self._argstream.handleFrame(parts, isLast);","    if (err) {","        return err;","    }","","    if (!isLast && self.state !== States.Streaming) {","        return errors.ArgStreamUnknownFrameHandlingStateError();","    }","","    return null;","};","","StreamingInResponse.prototype.withArg23 = function withArg23(callback) {","    var self = this;","    parallel({","        arg2: self.arg2.onValueReady,","        arg3: self.arg3.onValueReady","    }, compatCall);","    function compatCall(err, args) {","        callback(err, args.arg2, args.arg3);","    }","};","","module.exports = StreamingInResponse;",""],"l":{"23":1,"24":1,"25":1,"26":1,"28":1,"29":1,"30":1,"32":1,"34":1,"35":0,"36":0,"38":0,"39":0,"40":0,"41":0,"43":0,"44":0,"45":0,"47":1,"48":0,"51":1,"52":0,"56":1,"58":1,"60":1,"61":0,"63":0,"64":0,"65":0,"68":0,"69":0,"70":0,"71":0,"74":0,"75":0,"76":0,"79":0,"80":0,"83":0,"86":1,"87":0,"88":0,"92":1,"93":0,"97":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/operations.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/operations.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":1,"104":0,"105":0,"106":0,"107":0,"108":1,"109":0,"110":0,"111":1,"112":0,"113":0,"114":1,"115":0,"116":0,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":1,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":1,"156":0,"157":0,"158":0,"159":0,"160":1,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":1,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":1,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":1,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":1,"227":0,"228":0,"229":1,"230":0,"231":0,"232":0,"233":0,"234":1,"235":0,"236":0,"237":0,"238":1,"239":0,"240":0,"241":0,"242":0,"243":0,"244":1,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":1,"288":0,"289":0,"290":0,"291":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"fnMap":{"1":{"name":"Operations","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":26}}},"2":{"name":"emitPendingChange","line":64,"loc":{"start":{"line":64,"column":0},"end":{"line":64,"column":53}}},"3":{"name":"extendLogInfo","line":81,"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":29}}},"4":{"name":"setMaxTombstoneTTL","line":92,"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":33}}},"5":{"name":"OperationTombstone","line":98,"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":64}}},"6":{"name":"extendLogInfo","line":125,"loc":{"start":{"line":125,"column":45},"end":{"line":125,"column":74}}},"7":{"name":"destroy","line":150,"loc":{"start":{"line":150,"column":39},"end":{"line":150,"column":61}}},"8":{"name":"onTimeout","line":158,"loc":{"start":{"line":158,"column":41},"end":{"line":158,"column":65}}},"9":{"name":"resetLastTimeoutTime","line":185,"loc":{"start":{"line":185,"column":44},"end":{"line":185,"column":76}}},"10":{"name":"checkLastTimeoutTime","line":191,"loc":{"start":{"line":191,"column":44},"end":{"line":191,"column":79}}},"11":{"name":"_deferResetDueToTimeouts","line":203,"loc":{"start":{"line":203,"column":48},"end":{"line":203,"column":87}}},"12":{"name":"opCheckLastTimedout","line":214,"loc":{"start":{"line":214,"column":4},"end":{"line":214,"column":35}}},"13":{"name":"getRequests","line":222,"loc":{"start":{"line":222,"column":35},"end":{"line":222,"column":58}}},"14":{"name":"getPending","line":228,"loc":{"start":{"line":228,"column":34},"end":{"line":228,"column":56}}},"15":{"name":"getOutTombstone","line":235,"loc":{"start":{"line":235,"column":39},"end":{"line":235,"column":68}}},"16":{"name":"getOutReq","line":246,"loc":{"start":{"line":246,"column":33},"end":{"line":246,"column":56}}},"17":{"name":"getInReq","line":257,"loc":{"start":{"line":257,"column":32},"end":{"line":257,"column":54}}},"18":{"name":"addOutReq","line":263,"loc":{"start":{"line":263,"column":33},"end":{"line":263,"column":57}}},"19":{"name":"addInReq","line":277,"loc":{"start":{"line":277,"column":32},"end":{"line":277,"column":55}}},"20":{"name":"hasDrained","line":291,"loc":{"start":{"line":291,"column":34},"end":{"line":291,"column":56}}},"21":{"name":"checkDrained","line":305,"loc":{"start":{"line":305,"column":36},"end":{"line":305,"column":60}}},"22":{"name":"_isCollDrained","line":314,"loc":{"start":{"line":314,"column":38},"end":{"line":314,"column":68}}},"23":{"name":"popOutReq","line":333,"loc":{"start":{"line":333,"column":33},"end":{"line":333,"column":65}}},"24":{"name":"logMissingOutRequest","line":381,"loc":{"start":{"line":381,"column":0},"end":{"line":381,"column":43}}},"25":{"name":"popInReq","line":411,"loc":{"start":{"line":411,"column":32},"end":{"line":411,"column":54}}},"26":{"name":"clear","line":437,"loc":{"start":{"line":437,"column":29},"end":{"line":437,"column":46}}},"27":{"name":"destroy","line":458,"loc":{"start":{"line":458,"column":31},"end":{"line":458,"column":50}}},"28":{"name":"sanitySweep","line":464,"loc":{"start":{"line":464,"column":35},"end":{"line":464,"column":66}}},"29":{"name":"doneSweep","line":471,"loc":{"start":{"line":471,"column":4},"end":{"line":471,"column":25}}},"30":{"name":"_sweepOps","line":479,"loc":{"start":{"line":479,"column":33},"end":{"line":479,"column":78}}},"31":{"name":"nextOp","line":498,"loc":{"start":{"line":498,"column":4},"end":{"line":498,"column":37}}},"32":{"name":"deferNextOp","line":571,"loc":{"start":{"line":571,"column":8},"end":{"line":571,"column":31}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":36}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":50}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":50}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":31}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":28}},"9":{"start":{"line":34,"column":0},"end":{"line":60,"column":1}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":28}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":26}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":48}},"13":{"start":{"line":38,"column":4},"end":{"line":38,"column":64}},"14":{"start":{"line":39,"column":4},"end":{"line":39,"column":35}},"15":{"start":{"line":41,"column":4},"end":{"line":41,"column":30}},"16":{"start":{"line":42,"column":4},"end":{"line":42,"column":30}},"17":{"start":{"line":43,"column":4},"end":{"line":43,"column":30}},"18":{"start":{"line":44,"column":4},"end":{"line":44,"column":60}},"19":{"start":{"line":45,"column":4},"end":{"line":45,"column":48}},"20":{"start":{"line":46,"column":4},"end":{"line":46,"column":38}},"21":{"start":{"line":48,"column":4},"end":{"line":48,"column":27}},"22":{"start":{"line":50,"column":4},"end":{"line":53,"column":6}},"23":{"start":{"line":54,"column":4},"end":{"line":58,"column":6}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":29}},"25":{"start":{"line":61,"column":0},"end":{"line":61,"column":35}},"26":{"start":{"line":63,"column":0},"end":{"line":78,"column":2}},"27":{"start":{"line":65,"column":4},"end":{"line":65,"column":20}},"28":{"start":{"line":67,"column":4},"end":{"line":77,"column":5}},"29":{"start":{"line":68,"column":8},"end":{"line":68,"column":44}},"30":{"start":{"line":69,"column":8},"end":{"line":69,"column":46}},"31":{"start":{"line":70,"column":8},"end":{"line":70,"column":52}},"32":{"start":{"line":72,"column":8},"end":{"line":76,"column":11}},"33":{"start":{"line":80,"column":0},"end":{"line":89,"column":2}},"34":{"start":{"line":82,"column":4},"end":{"line":82,"column":20}},"35":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"36":{"start":{"line":85,"column":8},"end":{"line":85,"column":51}},"37":{"start":{"line":88,"column":4},"end":{"line":88,"column":16}},"38":{"start":{"line":91,"column":0},"end":{"line":96,"column":2}},"39":{"start":{"line":93,"column":4},"end":{"line":93,"column":20}},"40":{"start":{"line":95,"column":4},"end":{"line":95,"column":31}},"41":{"start":{"line":98,"column":0},"end":{"line":123,"column":1}},"42":{"start":{"line":99,"column":4},"end":{"line":99,"column":20}},"43":{"start":{"line":101,"column":4},"end":{"line":104,"column":6}},"44":{"start":{"line":106,"column":4},"end":{"line":106,"column":47}},"45":{"start":{"line":107,"column":4},"end":{"line":107,"column":28}},"46":{"start":{"line":108,"column":4},"end":{"line":108,"column":36}},"47":{"start":{"line":109,"column":4},"end":{"line":109,"column":33}},"48":{"start":{"line":110,"column":4},"end":{"line":110,"column":17}},"49":{"start":{"line":111,"column":4},"end":{"line":111,"column":21}},"50":{"start":{"line":112,"column":4},"end":{"line":112,"column":27}},"51":{"start":{"line":113,"column":4},"end":{"line":113,"column":31}},"52":{"start":{"line":114,"column":4},"end":{"line":114,"column":27}},"53":{"start":{"line":115,"column":4},"end":{"line":115,"column":39}},"54":{"start":{"line":116,"column":4},"end":{"line":116,"column":37}},"55":{"start":{"line":117,"column":4},"end":{"line":117,"column":33}},"56":{"start":{"line":119,"column":4},"end":{"line":119,"column":32}},"57":{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},"58":{"start":{"line":121,"column":8},"end":{"line":121,"column":70}},"59":{"start":{"line":125,"column":0},"end":{"line":148,"column":2}},"60":{"start":{"line":126,"column":4},"end":{"line":126,"column":20}},"61":{"start":{"line":128,"column":4},"end":{"line":128,"column":22}},"62":{"start":{"line":129,"column":4},"end":{"line":129,"column":40}},"63":{"start":{"line":130,"column":4},"end":{"line":130,"column":38}},"64":{"start":{"line":131,"column":4},"end":{"line":131,"column":34}},"65":{"start":{"line":132,"column":4},"end":{"line":132,"column":35}},"66":{"start":{"line":133,"column":4},"end":{"line":133,"column":37}},"67":{"start":{"line":134,"column":4},"end":{"line":134,"column":73}},"68":{"start":{"line":135,"column":4},"end":{"line":135,"column":80}},"69":{"start":{"line":136,"column":4},"end":{"line":136,"column":79}},"70":{"start":{"line":138,"column":4},"end":{"line":145,"column":5}},"71":{"start":{"line":139,"column":8},"end":{"line":139,"column":51}},"72":{"start":{"line":140,"column":8},"end":{"line":140,"column":58}},"73":{"start":{"line":141,"column":8},"end":{"line":144,"column":9}},"74":{"start":{"line":142,"column":12},"end":{"line":142,"column":42}},"75":{"start":{"line":143,"column":12},"end":{"line":143,"column":93}},"76":{"start":{"line":147,"column":4},"end":{"line":147,"column":16}},"77":{"start":{"line":150,"column":0},"end":{"line":156,"column":2}},"78":{"start":{"line":151,"column":4},"end":{"line":151,"column":20}},"79":{"start":{"line":153,"column":4},"end":{"line":153,"column":26}},"80":{"start":{"line":155,"column":4},"end":{"line":155,"column":24}},"81":{"start":{"line":158,"column":0},"end":{"line":183,"column":2}},"82":{"start":{"line":159,"column":4},"end":{"line":159,"column":20}},"83":{"start":{"line":161,"column":4},"end":{"line":167,"column":5}},"84":{"start":{"line":162,"column":8},"end":{"line":166,"column":12}},"85":{"start":{"line":169,"column":4},"end":{"line":180,"column":5}},"86":{"start":{"line":171,"column":8},"end":{"line":171,"column":53}},"87":{"start":{"line":172,"column":8},"end":{"line":175,"column":9}},"88":{"start":{"line":173,"column":12},"end":{"line":173,"column":45}},"89":{"start":{"line":174,"column":12},"end":{"line":174,"column":56}},"90":{"start":{"line":176,"column":8},"end":{"line":176,"column":31}},"91":{"start":{"line":178,"column":8},"end":{"line":178,"column":91}},"92":{"start":{"line":179,"column":8},"end":{"line":179,"column":31}},"93":{"start":{"line":182,"column":4},"end":{"line":182,"column":31}},"94":{"start":{"line":185,"column":0},"end":{"line":189,"column":2}},"95":{"start":{"line":186,"column":4},"end":{"line":186,"column":20}},"96":{"start":{"line":188,"column":4},"end":{"line":188,"column":29}},"97":{"start":{"line":191,"column":0},"end":{"line":201,"column":2}},"98":{"start":{"line":192,"column":4},"end":{"line":192,"column":20}},"99":{"start":{"line":194,"column":4},"end":{"line":200,"column":5}},"100":{"start":{"line":197,"column":8},"end":{"line":197,"column":43}},"101":{"start":{"line":198,"column":11},"end":{"line":200,"column":5}},"102":{"start":{"line":199,"column":8},"end":{"line":199,"column":35}},"103":{"start":{"line":203,"column":0},"end":{"line":220,"column":2}},"104":{"start":{"line":204,"column":4},"end":{"line":204,"column":20}},"105":{"start":{"line":206,"column":4},"end":{"line":206,"column":45}},"106":{"start":{"line":207,"column":4},"end":{"line":211,"column":7}},"107":{"start":{"line":212,"column":4},"end":{"line":212,"column":42}},"108":{"start":{"line":214,"column":4},"end":{"line":219,"column":5}},"109":{"start":{"line":215,"column":8},"end":{"line":217,"column":12}},"110":{"start":{"line":218,"column":8},"end":{"line":218,"column":38}},"111":{"start":{"line":222,"column":0},"end":{"line":226,"column":2}},"112":{"start":{"line":223,"column":4},"end":{"line":223,"column":20}},"113":{"start":{"line":225,"column":4},"end":{"line":225,"column":25}},"114":{"start":{"line":228,"column":0},"end":{"line":232,"column":2}},"115":{"start":{"line":229,"column":4},"end":{"line":229,"column":20}},"116":{"start":{"line":231,"column":4},"end":{"line":231,"column":24}},"117":{"start":{"line":235,"column":0},"end":{"line":244,"column":2}},"118":{"start":{"line":236,"column":4},"end":{"line":236,"column":20}},"119":{"start":{"line":238,"column":4},"end":{"line":238,"column":43}},"120":{"start":{"line":239,"column":4},"end":{"line":241,"column":5}},"121":{"start":{"line":240,"column":8},"end":{"line":240,"column":20}},"122":{"start":{"line":243,"column":4},"end":{"line":243,"column":14}},"123":{"start":{"line":246,"column":0},"end":{"line":255,"column":2}},"124":{"start":{"line":247,"column":4},"end":{"line":247,"column":20}},"125":{"start":{"line":249,"column":4},"end":{"line":249,"column":44}},"126":{"start":{"line":250,"column":4},"end":{"line":252,"column":5}},"127":{"start":{"line":251,"column":8},"end":{"line":251,"column":20}},"128":{"start":{"line":254,"column":4},"end":{"line":254,"column":15}},"129":{"start":{"line":257,"column":0},"end":{"line":261,"column":2}},"130":{"start":{"line":258,"column":4},"end":{"line":258,"column":20}},"131":{"start":{"line":260,"column":4},"end":{"line":260,"column":32}},"132":{"start":{"line":263,"column":0},"end":{"line":275,"column":2}},"133":{"start":{"line":264,"column":4},"end":{"line":264,"column":20}},"134":{"start":{"line":266,"column":4},"end":{"line":266,"column":26}},"135":{"start":{"line":267,"column":4},"end":{"line":267,"column":36}},"136":{"start":{"line":268,"column":4},"end":{"line":268,"column":23}},"137":{"start":{"line":270,"column":4},"end":{"line":270,"column":70}},"138":{"start":{"line":272,"column":4},"end":{"line":272,"column":36}},"139":{"start":{"line":274,"column":4},"end":{"line":274,"column":15}},"140":{"start":{"line":277,"column":0},"end":{"line":289,"column":2}},"141":{"start":{"line":278,"column":4},"end":{"line":278,"column":20}},"142":{"start":{"line":280,"column":4},"end":{"line":280,"column":26}},"143":{"start":{"line":281,"column":4},"end":{"line":281,"column":35}},"144":{"start":{"line":282,"column":4},"end":{"line":282,"column":22}},"145":{"start":{"line":284,"column":4},"end":{"line":284,"column":70}},"146":{"start":{"line":286,"column":4},"end":{"line":286,"column":36}},"147":{"start":{"line":288,"column":4},"end":{"line":288,"column":15}},"148":{"start":{"line":291,"column":0},"end":{"line":303,"column":2}},"149":{"start":{"line":292,"column":4},"end":{"line":292,"column":20}},"150":{"start":{"line":294,"column":4},"end":{"line":300,"column":5}},"151":{"start":{"line":296,"column":8},"end":{"line":296,"column":20}},"152":{"start":{"line":297,"column":11},"end":{"line":300,"column":5}},"153":{"start":{"line":299,"column":8},"end":{"line":299,"column":20}},"154":{"start":{"line":302,"column":4},"end":{"line":302,"column":17}},"155":{"start":{"line":305,"column":0},"end":{"line":312,"column":2}},"156":{"start":{"line":306,"column":4},"end":{"line":306,"column":20}},"157":{"start":{"line":308,"column":4},"end":{"line":311,"column":5}},"158":{"start":{"line":309,"column":8},"end":{"line":309,"column":35}},"159":{"start":{"line":310,"column":8},"end":{"line":310,"column":45}},"160":{"start":{"line":314,"column":0},"end":{"line":331,"column":2}},"161":{"start":{"line":315,"column":4},"end":{"line":315,"column":20}},"162":{"start":{"line":318,"column":4},"end":{"line":327,"column":5}},"163":{"start":{"line":319,"column":8},"end":{"line":319,"column":26}},"164":{"start":{"line":320,"column":8},"end":{"line":326,"column":9}},"165":{"start":{"line":325,"column":12},"end":{"line":325,"column":25}},"166":{"start":{"line":330,"column":4},"end":{"line":330,"column":16}},"167":{"start":{"line":333,"column":0},"end":{"line":378,"column":2}},"168":{"start":{"line":334,"column":4},"end":{"line":334,"column":20}},"169":{"start":{"line":336,"column":4},"end":{"line":336,"column":36}},"170":{"start":{"line":337,"column":4},"end":{"line":342,"column":5}},"171":{"start":{"line":338,"column":8},"end":{"line":338,"column":47}},"172":{"start":{"line":339,"column":8},"end":{"line":339,"column":20}},"173":{"start":{"line":340,"column":11},"end":{"line":342,"column":5}},"174":{"start":{"line":341,"column":8},"end":{"line":341,"column":20}},"175":{"start":{"line":344,"column":4},"end":{"line":354,"column":5}},"176":{"start":{"line":345,"column":8},"end":{"line":345,"column":36}},"177":{"start":{"line":346,"column":8},"end":{"line":346,"column":34}},"178":{"start":{"line":348,"column":8},"end":{"line":353,"column":11}},"179":{"start":{"line":356,"column":4},"end":{"line":358,"column":6}},"180":{"start":{"line":359,"column":4},"end":{"line":359,"column":38}},"181":{"start":{"line":360,"column":4},"end":{"line":360,"column":98}},"182":{"start":{"line":362,"column":4},"end":{"line":362,"column":26}},"183":{"start":{"line":364,"column":4},"end":{"line":367,"column":5}},"184":{"start":{"line":365,"column":8},"end":{"line":365,"column":30}},"185":{"start":{"line":366,"column":8},"end":{"line":366,"column":24}},"186":{"start":{"line":369,"column":4},"end":{"line":369,"column":26}},"187":{"start":{"line":370,"column":4},"end":{"line":370,"column":23}},"188":{"start":{"line":371,"column":4},"end":{"line":373,"column":5}},"189":{"start":{"line":372,"column":8},"end":{"line":372,"column":28}},"190":{"start":{"line":375,"column":4},"end":{"line":375,"column":49}},"191":{"start":{"line":377,"column":4},"end":{"line":377,"column":15}},"192":{"start":{"line":380,"column":0},"end":{"line":409,"column":2}},"193":{"start":{"line":382,"column":4},"end":{"line":382,"column":20}},"194":{"start":{"line":385,"column":4},"end":{"line":399,"column":5}},"195":{"start":{"line":386,"column":8},"end":{"line":390,"column":10}},"196":{"start":{"line":391,"column":11},"end":{"line":399,"column":5}},"197":{"start":{"line":392,"column":8},"end":{"line":398,"column":10}},"198":{"start":{"line":402,"column":4},"end":{"line":408,"column":6}},"199":{"start":{"line":411,"column":0},"end":{"line":435,"column":2}},"200":{"start":{"line":412,"column":4},"end":{"line":412,"column":20}},"201":{"start":{"line":414,"column":4},"end":{"line":414,"column":35}},"202":{"start":{"line":415,"column":4},"end":{"line":418,"column":5}},"203":{"start":{"line":417,"column":8},"end":{"line":417,"column":20}},"204":{"start":{"line":420,"column":4},"end":{"line":423,"column":5}},"205":{"start":{"line":421,"column":8},"end":{"line":421,"column":36}},"206":{"start":{"line":422,"column":8},"end":{"line":422,"column":34}},"207":{"start":{"line":425,"column":4},"end":{"line":425,"column":32}},"208":{"start":{"line":426,"column":4},"end":{"line":426,"column":22}},"209":{"start":{"line":428,"column":4},"end":{"line":428,"column":37}},"210":{"start":{"line":430,"column":4},"end":{"line":432,"column":5}},"211":{"start":{"line":431,"column":8},"end":{"line":431,"column":28}},"212":{"start":{"line":434,"column":4},"end":{"line":434,"column":15}},"213":{"start":{"line":437,"column":0},"end":{"line":456,"column":2}},"214":{"start":{"line":438,"column":4},"end":{"line":438,"column":20}},"215":{"start":{"line":440,"column":4},"end":{"line":440,"column":32}},"216":{"start":{"line":441,"column":4},"end":{"line":441,"column":50}},"217":{"start":{"line":442,"column":4},"end":{"line":442,"column":52}},"218":{"start":{"line":444,"column":4},"end":{"line":446,"column":5}},"219":{"start":{"line":445,"column":8},"end":{"line":445,"column":36}},"220":{"start":{"line":447,"column":4},"end":{"line":455,"column":5}},"221":{"start":{"line":448,"column":8},"end":{"line":448,"column":38}},"222":{"start":{"line":450,"column":8},"end":{"line":450,"column":57}},"223":{"start":{"line":451,"column":8},"end":{"line":453,"column":9}},"224":{"start":{"line":452,"column":12},"end":{"line":452,"column":46}},"225":{"start":{"line":454,"column":8},"end":{"line":454,"column":31}},"226":{"start":{"line":458,"column":0},"end":{"line":462,"column":2}},"227":{"start":{"line":459,"column":4},"end":{"line":459,"column":20}},"228":{"start":{"line":461,"column":4},"end":{"line":461,"column":26}},"229":{"start":{"line":464,"column":0},"end":{"line":477,"column":2}},"230":{"start":{"line":465,"column":4},"end":{"line":465,"column":20}},"231":{"start":{"line":467,"column":4},"end":{"line":467,"column":54}},"232":{"start":{"line":468,"column":4},"end":{"line":468,"column":56}},"233":{"start":{"line":470,"column":4},"end":{"line":470,"column":14}},"234":{"start":{"line":471,"column":4},"end":{"line":476,"column":5}},"235":{"start":{"line":472,"column":8},"end":{"line":472,"column":12}},"236":{"start":{"line":473,"column":8},"end":{"line":475,"column":9}},"237":{"start":{"line":474,"column":12},"end":{"line":474,"column":23}},"238":{"start":{"line":479,"column":0},"end":{"line":580,"column":2}},"239":{"start":{"line":481,"column":4},"end":{"line":481,"column":20}},"240":{"start":{"line":486,"column":4},"end":{"line":490,"column":6}},"241":{"start":{"line":491,"column":4},"end":{"line":491,"column":29}},"242":{"start":{"line":493,"column":4},"end":{"line":493,"column":32}},"243":{"start":{"line":495,"column":4},"end":{"line":495,"column":42}},"244":{"start":{"line":498,"column":4},"end":{"line":574,"column":5}},"245":{"start":{"line":499,"column":8},"end":{"line":502,"column":9}},"246":{"start":{"line":500,"column":12},"end":{"line":500,"column":23}},"247":{"start":{"line":501,"column":12},"end":{"line":501,"column":19}},"248":{"start":{"line":504,"column":8},"end":{"line":504,"column":27}},"249":{"start":{"line":505,"column":8},"end":{"line":505,"column":25}},"250":{"start":{"line":507,"column":8},"end":{"line":510,"column":9}},"251":{"start":{"line":508,"column":12},"end":{"line":508,"column":38}},"252":{"start":{"line":509,"column":12},"end":{"line":509,"column":19}},"253":{"start":{"line":512,"column":8},"end":{"line":567,"column":9}},"254":{"start":{"line":513,"column":12},"end":{"line":516,"column":15}},"255":{"start":{"line":517,"column":15},"end":{"line":567,"column":9}},"256":{"start":{"line":518,"column":12},"end":{"line":521,"column":15}},"257":{"start":{"line":523,"column":12},"end":{"line":529,"column":13}},"258":{"start":{"line":524,"column":16},"end":{"line":524,"column":34}},"259":{"start":{"line":525,"column":16},"end":{"line":525,"column":36}},"260":{"start":{"line":526,"column":19},"end":{"line":529,"column":13}},"261":{"start":{"line":527,"column":16},"end":{"line":527,"column":35}},"262":{"start":{"line":528,"column":16},"end":{"line":528,"column":36}},"263":{"start":{"line":530,"column":15},"end":{"line":567,"column":9}},"264":{"start":{"line":531,"column":12},"end":{"line":531,"column":56}},"265":{"start":{"line":532,"column":12},"end":{"line":532,"column":50}},"266":{"start":{"line":534,"column":12},"end":{"line":566,"column":13}},"267":{"start":{"line":535,"column":16},"end":{"line":538,"column":20}},"268":{"start":{"line":539,"column":16},"end":{"line":539,"column":31}},"269":{"start":{"line":540,"column":16},"end":{"line":544,"column":17}},"270":{"start":{"line":541,"column":20},"end":{"line":541,"column":42}},"271":{"start":{"line":542,"column":20},"end":{"line":542,"column":53}},"272":{"start":{"line":543,"column":20},"end":{"line":543,"column":40}},"273":{"start":{"line":545,"column":16},"end":{"line":545,"column":37}},"274":{"start":{"line":546,"column":16},"end":{"line":546,"column":43}},"275":{"start":{"line":547,"column":16},"end":{"line":547,"column":41}},"276":{"start":{"line":548,"column":19},"end":{"line":566,"column":13}},"277":{"start":{"line":549,"column":16},"end":{"line":556,"column":20}},"278":{"start":{"line":557,"column":16},"end":{"line":557,"column":31}},"279":{"start":{"line":558,"column":16},"end":{"line":562,"column":17}},"280":{"start":{"line":559,"column":20},"end":{"line":559,"column":42}},"281":{"start":{"line":560,"column":20},"end":{"line":560,"column":53}},"282":{"start":{"line":561,"column":20},"end":{"line":561,"column":40}},"283":{"start":{"line":563,"column":16},"end":{"line":563,"column":37}},"284":{"start":{"line":564,"column":16},"end":{"line":564,"column":43}},"285":{"start":{"line":565,"column":16},"end":{"line":565,"column":41}},"286":{"start":{"line":569,"column":8},"end":{"line":569,"column":34}},"287":{"start":{"line":571,"column":8},"end":{"line":573,"column":9}},"288":{"start":{"line":572,"column":12},"end":{"line":572,"column":40}},"289":{"start":{"line":576,"column":4},"end":{"line":578,"column":5}},"290":{"start":{"line":577,"column":8},"end":{"line":577,"column":68}},"291":{"start":{"line":579,"column":4},"end":{"line":579,"column":35}}},"branchMap":{"1":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"2":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"3":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":4},"end":{"line":120,"column":4}},{"start":{"line":120,"column":4},"end":{"line":120,"column":4}}]},"4":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":15}},{"start":{"line":120,"column":19},"end":{"line":120,"column":39}}]},"5":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":24},"end":{"line":134,"column":43}},{"start":{"line":134,"column":47},"end":{"line":134,"column":72}}]},"6":{"line":135,"type":"binary-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":45}},{"start":{"line":135,"column":49},"end":{"line":135,"column":79}}]},"7":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":22},"end":{"line":136,"column":41}},{"start":{"line":136,"column":45},"end":{"line":136,"column":78}}]},"8":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":4},"end":{"line":138,"column":4}},{"start":{"line":138,"column":4},"end":{"line":138,"column":4}}]},"9":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"10":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":40},"end":{"line":143,"column":45}},{"start":{"line":143,"column":49},"end":{"line":143,"column":66}},{"start":{"line":143,"column":70},"end":{"line":143,"column":92}}]},"11":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"12":{"line":161,"type":"binary-expr","locations":[{"start":{"line":161,"column":8},"end":{"line":161,"column":23}},{"start":{"line":161,"column":27},"end":{"line":161,"column":57}}]},"13":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":169,"column":4}},{"start":{"line":169,"column":4},"end":{"line":169,"column":4}}]},"14":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":8},"end":{"line":169,"column":23}},{"start":{"line":170,"column":8},"end":{"line":170,"column":54}}]},"15":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":8},"end":{"line":172,"column":8}},{"start":{"line":172,"column":8},"end":{"line":172,"column":8}}]},"16":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":4},"end":{"line":194,"column":4}},{"start":{"line":194,"column":4},"end":{"line":194,"column":4}}]},"17":{"line":194,"type":"binary-expr","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":28}},{"start":{"line":195,"column":8},"end":{"line":195,"column":63}}]},"18":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":11},"end":{"line":198,"column":11}},{"start":{"line":198,"column":11},"end":{"line":198,"column":11}}]},"19":{"line":238,"type":"binary-expr","locations":[{"start":{"line":238,"column":13},"end":{"line":238,"column":34}},{"start":{"line":238,"column":38},"end":{"line":238,"column":42}}]},"20":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":4},"end":{"line":239,"column":4}},{"start":{"line":239,"column":4},"end":{"line":239,"column":4}}]},"21":{"line":239,"type":"binary-expr","locations":[{"start":{"line":239,"column":8},"end":{"line":239,"column":10}},{"start":{"line":239,"column":14},"end":{"line":239,"column":29}}]},"22":{"line":249,"type":"binary-expr","locations":[{"start":{"line":249,"column":14},"end":{"line":249,"column":35}},{"start":{"line":249,"column":39},"end":{"line":249,"column":43}}]},"23":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":4},"end":{"line":250,"column":4}},{"start":{"line":250,"column":4},"end":{"line":250,"column":4}}]},"24":{"line":250,"type":"binary-expr","locations":[{"start":{"line":250,"column":8},"end":{"line":250,"column":11}},{"start":{"line":250,"column":15},"end":{"line":250,"column":30}}]},"25":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":4},"end":{"line":294,"column":4}},{"start":{"line":294,"column":4},"end":{"line":294,"column":4}}]},"26":{"line":294,"type":"binary-expr","locations":[{"start":{"line":294,"column":8},"end":{"line":294,"column":29}},{"start":{"line":295,"column":8},"end":{"line":295,"column":30}}]},"27":{"line":297,"type":"if","locations":[{"start":{"line":297,"column":11},"end":{"line":297,"column":11}},{"start":{"line":297,"column":11},"end":{"line":297,"column":11}}]},"28":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":15},"end":{"line":297,"column":52}},{"start":{"line":298,"column":15},"end":{"line":298,"column":53}}]},"29":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":4},"end":{"line":308,"column":4}},{"start":{"line":308,"column":4},"end":{"line":308,"column":4}}]},"30":{"line":320,"type":"if","locations":[{"start":{"line":320,"column":8},"end":{"line":320,"column":8}},{"start":{"line":320,"column":8},"end":{"line":320,"column":8}}]},"31":{"line":320,"type":"binary-expr","locations":[{"start":{"line":320,"column":12},"end":{"line":320,"column":47}},{"start":{"line":321,"column":12},"end":{"line":321,"column":23}},{"start":{"line":321,"column":27},"end":{"line":323,"column":56}}]},"32":{"line":322,"type":"binary-expr","locations":[{"start":{"line":322,"column":16},"end":{"line":322,"column":51}},{"start":{"line":323,"column":16},"end":{"line":323,"column":55}}]},"33":{"line":337,"type":"if","locations":[{"start":{"line":337,"column":4},"end":{"line":337,"column":4}},{"start":{"line":337,"column":4},"end":{"line":337,"column":4}}]},"34":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":11},"end":{"line":340,"column":11}},{"start":{"line":340,"column":11},"end":{"line":340,"column":11}}]},"35":{"line":344,"type":"if","locations":[{"start":{"line":344,"column":4},"end":{"line":344,"column":4}},{"start":{"line":344,"column":4},"end":{"line":344,"column":4}}]},"36":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":4},"end":{"line":364,"column":4}},{"start":{"line":364,"column":4},"end":{"line":364,"column":4}}]},"37":{"line":371,"type":"if","locations":[{"start":{"line":371,"column":4},"end":{"line":371,"column":4}},{"start":{"line":371,"column":4},"end":{"line":371,"column":4}}]},"38":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":4},"end":{"line":385,"column":4}},{"start":{"line":385,"column":4},"end":{"line":385,"column":4}}]},"39":{"line":385,"type":"binary-expr","locations":[{"start":{"line":385,"column":8},"end":{"line":385,"column":15}},{"start":{"line":385,"column":19},"end":{"line":385,"column":37}}]},"40":{"line":391,"type":"if","locations":[{"start":{"line":391,"column":11},"end":{"line":391,"column":11}},{"start":{"line":391,"column":11},"end":{"line":391,"column":11}}]},"41":{"line":391,"type":"binary-expr","locations":[{"start":{"line":391,"column":15},"end":{"line":391,"column":22}},{"start":{"line":391,"column":26},"end":{"line":391,"column":36}}]},"42":{"line":395,"type":"cond-expr","locations":[{"start":{"line":396,"column":16},"end":{"line":396,"column":36}},{"start":{"line":396,"column":39},"end":{"line":396,"column":54}}]},"43":{"line":415,"type":"if","locations":[{"start":{"line":415,"column":4},"end":{"line":415,"column":4}},{"start":{"line":415,"column":4},"end":{"line":415,"column":4}}]},"44":{"line":420,"type":"if","locations":[{"start":{"line":420,"column":4},"end":{"line":420,"column":4}},{"start":{"line":420,"column":4},"end":{"line":420,"column":4}}]},"45":{"line":430,"type":"if","locations":[{"start":{"line":430,"column":4},"end":{"line":430,"column":4}},{"start":{"line":430,"column":4},"end":{"line":430,"column":4}}]},"46":{"line":451,"type":"if","locations":[{"start":{"line":451,"column":8},"end":{"line":451,"column":8}},{"start":{"line":451,"column":8},"end":{"line":451,"column":8}}]},"47":{"line":473,"type":"if","locations":[{"start":{"line":473,"column":8},"end":{"line":473,"column":8}},{"start":{"line":473,"column":8},"end":{"line":473,"column":8}}]},"48":{"line":499,"type":"if","locations":[{"start":{"line":499,"column":8},"end":{"line":499,"column":8}},{"start":{"line":499,"column":8},"end":{"line":499,"column":8}}]},"49":{"line":507,"type":"if","locations":[{"start":{"line":507,"column":8},"end":{"line":507,"column":8}},{"start":{"line":507,"column":8},"end":{"line":507,"column":8}}]},"50":{"line":512,"type":"if","locations":[{"start":{"line":512,"column":8},"end":{"line":512,"column":8}},{"start":{"line":512,"column":8},"end":{"line":512,"column":8}}]},"51":{"line":512,"type":"binary-expr","locations":[{"start":{"line":512,"column":12},"end":{"line":512,"column":28}},{"start":{"line":512,"column":33},"end":{"line":512,"column":42}}]},"52":{"line":517,"type":"if","locations":[{"start":{"line":517,"column":15},"end":{"line":517,"column":15}},{"start":{"line":517,"column":15},"end":{"line":517,"column":15}}]},"53":{"line":523,"type":"if","locations":[{"start":{"line":523,"column":12},"end":{"line":523,"column":12}},{"start":{"line":523,"column":12},"end":{"line":523,"column":12}}]},"54":{"line":526,"type":"if","locations":[{"start":{"line":526,"column":19},"end":{"line":526,"column":19}},{"start":{"line":526,"column":19},"end":{"line":526,"column":19}}]},"55":{"line":530,"type":"if","locations":[{"start":{"line":530,"column":15},"end":{"line":530,"column":15}},{"start":{"line":530,"column":15},"end":{"line":530,"column":15}}]},"56":{"line":534,"type":"if","locations":[{"start":{"line":534,"column":12},"end":{"line":534,"column":12}},{"start":{"line":534,"column":12},"end":{"line":534,"column":12}}]},"57":{"line":540,"type":"if","locations":[{"start":{"line":540,"column":16},"end":{"line":540,"column":16}},{"start":{"line":540,"column":16},"end":{"line":540,"column":16}}]},"58":{"line":548,"type":"if","locations":[{"start":{"line":548,"column":19},"end":{"line":548,"column":19}},{"start":{"line":548,"column":19},"end":{"line":548,"column":19}}]},"59":{"line":548,"type":"binary-expr","locations":[{"start":{"line":548,"column":23},"end":{"line":548,"column":39}},{"start":{"line":548,"column":43},"end":{"line":548,"column":68}}]},"60":{"line":558,"type":"if","locations":[{"start":{"line":558,"column":16},"end":{"line":558,"column":16}},{"start":{"line":558,"column":16},"end":{"line":558,"column":16}}]},"61":{"line":576,"type":"if","locations":[{"start":{"line":576,"column":4},"end":{"line":576,"column":4}},{"start":{"line":576,"column":4},"end":{"line":576,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var errors = require('./errors.js');","var inherits = require('util').inherits;","var process = require('process');","var Buffer = require('buffer').Buffer;","var setImmediate = require('timers').setImmediate;","var EventEmitter = require('./lib/event_emitter');","","var TOMBSTONE_TTL_OFFSET = 500;","","module.exports = Operations;","","function Operations(opts) {","    EventEmitter.call(this);","    this.draining = false;","    this.drainEvent = this.defineEvent('drain');","    this.pendingChangeEvent = this.defineEvent('pendingChange');","    this.pendingChangeDelta = null;","","    this.timers = opts.timers;","    this.logger = opts.logger;","    this.random = opts.random;","    this.connectionStalePeriod = opts.connectionStalePeriod;","    this.maxTombstoneTTL = opts.maxTombstoneTTL;","    this.connection = opts.connection;","    // TODO need this?","    this.destroyed = false;","","    this.requests = {","        in: Object.create(null),","        out: Object.create(null)","    };","    this.pending = {","        in: 0,","        out: 0,","        errors: 0","    };","    this.lastTimeoutTime = 0;","}","inherits(Operations, EventEmitter);","","Operations.prototype.emitPendingChange =","function emitPendingChange(numIn, numOut, numErrors) {","    var self = this;","","    if (self.pendingChangeDelta !== null) {","        self.pendingChangeDelta.in += numIn;","        self.pendingChangeDelta.out += numOut;","        self.pendingChangeDelta.errors += numErrors;","    } else {","        self.pendingChangeEvent.emit(self, {","            in: numIn,","            out: numOut,","            errors: numErrors","        });","    }","};","","Operations.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    if (self.connection) {","        info = self.connection.extendLogInfo(info);","    }","","    return info;","};","","Operations.prototype.setMaxTombstoneTTL =","function setMaxTombstoneTTL(ttl) {","    var self = this;","","    self.maxTombstoneTTL = ttl;","};","","function OperationTombstone(operations, id, time, req, context) {","    var self = this;","","    var timeout = Math.min(","        TOMBSTONE_TTL_OFFSET + req.timeout,","        operations.maxTombstoneTTL","    );","","    self.type = 'tchannel.operation.tombstone';","    self.isTombstone = true;","    self.logger = operations.logger;","    self.operations = operations;","    self.id = id;","    self.time = time;","    self.timeout = timeout;","    self.timeHeapHandle = null;","    self.destroyed = false;","    self.serviceName = req.serviceName;","    self.callerName = req.callerName;","    self.endpoint = req.endpoint;","","    self.isPendingError = false;","    if (context && context.isErrorFrame) {","        self.isPendingError = errors.isPendingError(context.codeName);","    }","}","","OperationTombstone.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    info.id = self.id;","    info.serviceName = self.serviceName;","    info.callerName = self.callerName;","    info.endpoint = self.endpoint;","    info.tombstoneTime = self.time;","    info.tombstoneTTL = self.timeout;","    info.heapCanceled = self.timeHeapHandle && !self.timeHeapHandle.item;","    info.heapExpireTime = self.timeHeapHandle && self.timeHeapHandle.expireTime;","    info.heapAmItem = self.timeHeapHandle && self.timeHeapHandle.item === self;","","    if (self.operations) {","        info = self.operations.extendLogInfo(info);","        var other = self.operations.requests.out[self.id];","        if (self !== other) {","            info.otherType = typeof other;","            info.otherConstructorName = other && other.constructor && other.constructor.name;","        }","    }","","    return info;","};","","OperationTombstone.prototype.destroy = function destroy(now) {","    var self = this;","","    self.destroyed = true;","","    self.onTimeout(now);","};","","OperationTombstone.prototype.onTimeout = function onTimeout(now) {","    var self = this;","","    if (!self.destroyed && now < self.timeout + self.time) {","        self.logger.error('tombstone timed out too early', self.extendLogInfo({","            now: now,","            expireTime: self.timeout + self.time,","            delta: (self.timeout + self.time) - now","        }));","    }","","    if (self.operations &&","        self.operations.requests.out[self.id] === self) {","        delete self.operations.requests.out[self.id];","        if (self.isPendingError) {","            self.operations.pending.errors--;","            self.operations.emitPendingChange(0, 0, -1);","        }","        self.operations = null;","    } else {","        self.logger.warn('mismatched expired operation tombstone', self.extendLogInfo({}));","        self.operations = null;","    }","","    self.timeHeapHandle = null;","};","","Operations.prototype.resetLastTimeoutTime = function resetLastTimeoutTime() {","    var self = this;","","    self.lastTimeoutTime = 0;","};","","Operations.prototype.checkLastTimeoutTime = function checkLastTimeoutTime(now) {","    var self = this;","","    if (self.lastTimeoutTime &&","        now > self.lastTimeoutTime + self.connectionStalePeriod","    ) {","        self._deferResetDueToTimeouts(now);","    } else if (!self.lastTimeoutTime) {","        self.lastTimeoutTime = now;","    }","};","","Operations.prototype._deferResetDueToTimeouts = function _deferResetDueToTimeouts(now) {","    var self = this;","","    var elapsed = now - self.lastTimeoutTime;","    var err = errors.ConnectionStaleTimeoutError({","        period: self.connectionStalePeriod,","        elapsed: elapsed,","        lastTimeoutTime: self.lastTimeoutTime","    });","    process.nextTick(opCheckLastTimedout);","","    function opCheckLastTimedout() {","        self.logger.warn('destroying socket from timeouts', self.connection.extendLogInfo({","            error: err","        }));","        self.connection.resetAll(err);","    }","};","","Operations.prototype.getRequests = function getRequests() {","    var self = this;","","    return self.requests;","};","","Operations.prototype.getPending = function getPending() {","    var self = this;","","    return self.pending;","};","","// TODO: Merge getOutTombstone() with getOutReq()","Operations.prototype.getOutTombstone = function getOutTombstone(id) {","    var self = this;","","    var op = self.requests.out[id] || null;","    if (op && !op.isTombstone) {","        return null;","    }","","    return op;","};","","Operations.prototype.getOutReq = function getOutReq(id) {","    var self = this;","","    var req = self.requests.out[id] || null;","    if (req && req.isTombstone) {","        return null;","    }","","    return req;","};","","Operations.prototype.getInReq = function getInReq(id) {","    var self = this;","","    return self.requests.in[id];","};","","Operations.prototype.addOutReq = function addOutReq(req) {","    var self = this;","","    req.operations = self;","    self.requests.out[req.id] = req;","    self.pending.out++;","","    req.timeHeapHandle = self.connection.channel.timeHeap.update(req);","","    self.emitPendingChange(0, 1, 0);","","    return req;","};","","Operations.prototype.addInReq = function addInReq(req) {","    var self = this;","","    req.operations = self;","    self.requests.in[req.id] = req;","    self.pending.in++;","","    req.timeHeapHandle = self.connection.channel.timeHeap.update(req);","","    self.emitPendingChange(1, 0, 0);","","    return req;","};","","Operations.prototype.hasDrained = function hasDrained() {","    var self = this;","","    if (self.pending.in === 0 &&","        self.pending.out === 0) {","        return true;","    } else if (self._isCollDrained(self.requests.in) &&","               self._isCollDrained(self.requests.out)) {","        return true;","    }","","    return false;","};","","Operations.prototype.checkDrained = function checkDrained() {","    var self = this;","","    if (self.hasDrained()) {","        self.drainEvent.emit(self);","        self.drainEvent.removeAllListeners();","    }","};","","Operations.prototype._isCollDrained = function _isCollDrained(coll) {","    var self = this;","","    /*eslint-disable guard-for-in*/","    for (var id in coll) {","        var op = coll[id];","        if (!(op instanceof OperationTombstone) &&","            !op.drained && !(","                self.connection.channel.drainExempt &&","                self.connection.channel.drainExempt(op))","        ) {","            return false;","        }","    }","    /*eslint-enable guard-for-in*/","","    return true;","};","","Operations.prototype.popOutReq = function popOutReq(id, context) {","    var self = this;","","    var req = self.requests.out[id];","    if (!req) {","        self.logMissingOutRequest(id, context);","        return null;","    } else if (req.isTombstone) {","        return null;","    }","","    if (req.timeHeapHandle) {","        req.timeHeapHandle.cancel();","        req.timeHeapHandle = null;","    } else {","        self.logger.warn('Found OutRequest without timeHeapHandle', {","            serviceName: req.serviceName,","            endpoint: req.endpoint,","            socketRemoteAddr: req.remoteAddr,","            callerName: req.callerName","        });","    }","","    var tombstone = new OperationTombstone(","        self, id, self.timers.now(), req, context","    );","    self.requests.out[id] = tombstone;","    tombstone.timeHeapHandle = self.connection.channel.timeHeap.update(tombstone, tombstone.time);","","    var pendingErrors = 0;","","    if (tombstone.isPendingError) {","        self.pending.errors++;","        pendingErrors++;","    }","","    req.operations = null;","    self.pending.out--;","    if (self.draining) {","        self.checkDrained();","    }","","    self.emitPendingChange(0, -1, pendingErrors);","","    return req;","};","","Operations.prototype.logMissingOutRequest =","function logMissingOutRequest(id, context) {","    var self = this;","","    // context is err or res","    if (context && context.originalId) {","        context = {","            error: context,","            id: context.originalId,","            info: 'got error frame for unknown id'","        };","    } else if (context && context.id) {","        context = {","            responseId: context.id,","            code: context.code,","            arg1: Buffer.isBuffer(context.arg1) ?","                String(context.arg1) : 'streamed-arg1',","            info: 'got call response for unknown id'","        };","    }","","    // This could be because of a confused / corrupted server.","    self.logger.info('popOutReq received for unknown or lost id',","        self.connection.extendLogInfo({","            context: context,","            socketRemoteAddr: self.connection.socketRemoteAddr,","            direction: self.connection.direction","        })","    );","};","","Operations.prototype.popInReq = function popInReq(id) {","    var self = this;","","    var req = self.requests.in[id];","    if (!req) {","        // TODO warn ?","        return null;","    }","","    if (req.timeHeapHandle) {","        req.timeHeapHandle.cancel();","        req.timeHeapHandle = null;","    }","","    delete self.requests.in[id];","    self.pending.in--;","","    self.emitPendingChange(-1, 0, 0);","","    if (self.draining) {","        self.checkDrained();","    }","","    return req;","};","","Operations.prototype.clear = function clear() {","    var self = this;","","    var now = self.timers.now();","    var inReqKeys = Object.keys(self.requests.in);","    var outReqKeys = Object.keys(self.requests.out);","","    for (var i = 0; i < inReqKeys.length; i++) {","        self.popInReq(inReqKeys[i]);","    }","    for (var j = 0; j < outReqKeys.length; j++) {","        self.popOutReq(outReqKeys[j]);","","        var tombstone = self.requests.out[outReqKeys[j]];","        if (tombstone.timeHeapHandle) {","            tombstone.timeHeapHandle.cancel();","        }","        tombstone.destroy(now);","    }","};","","Operations.prototype.destroy = function destroy() {","    var self = this;","","    self.destroyed = true;","};","","Operations.prototype.sanitySweep = function sanitySweep(callback) {","    var self = this;","","    self._sweepOps(self.requests.in, 'in', doneSweep);","    self._sweepOps(self.requests.out, 'out', doneSweep);","","    var i = 0;","    function doneSweep() {","        i++;","        if (i === 2) {","            callback();","        }","    }","};","","Operations.prototype._sweepOps = function _sweepOps(ops, direction, callback) {","    /*eslint max-statements: [2, 40]*/","    var self = this;","","    // keep track of all pending change made during the sweep so we can","    // (maybe) emit one event at the end of the sweep","","    self.pendingChangeDelta = {","        in: 0,","        out: 0,","        errors: 0","    };","    var pendingDirty = false;","","    var now = self.timers.now();","","    nextOp(Object.keys(ops), 0, callback);","","    /*eslint complexity: 0*/","    function nextOp(opKeys, i, done) {","        if (i >= opKeys.length) {","            done(null);","            return;","        }","","        var id = opKeys[i];","        var op = ops[id];","","        if (!Object.prototype.hasOwnProperty.call(ops, id)) {","            setImmediate(deferNextOp);","            return;","        }","","        if (op === undefined && (id in ops)) {","            self.logger.warn('unexpected undefined operation', {","                direction: direction,","                id: id","            });","        } else if (op.timedOut) {","            self.logger.warn('lingering timed-out operation', {","                direction: direction,","                id: id","            });","","            if (direction === 'in') {","                self.popInReq(id);","                pendingDirty = true;","            } else if (direction === 'out') {","                self.popOutReq(id);","                pendingDirty = true;","            }","        } else if (op.isTombstone) {","            var heap = self.connection.channel.timeHeap;","            var expireTime = op.time + op.timeout;","","            if (!op.operations) {","                self.logger.warn('zombie tombstone', op.extendLogInfo({","                    direction: direction,","                    opKey: id","                }));","                delete ops[id];","                if (op.isPendingError) {","                    self.pending.errors--;","                    self.pendingChangeDelta.errors--;","                    pendingDirty = true;","                }","                op.operations = null;","                op.timeHeapHandle.cancel();","                op.timeHeapHandle = null;","            } else if (expireTime < now && heap.lastRun > expireTime) {","                self.logger.warn('stale tombstone', op.extendLogInfo({","                    direction: direction,","                    opKey: id,","                    now: now,","                    staleDelta: op.time + op.timeout - now,","                    expireTime: expireTime,","                    heapLastRun: heap.lastRun","                }));","                delete ops[id];","                if (op.isPendingError) {","                    self.pending.errors--;","                    self.pendingChangeDelta.errors--;","                    pendingDirty = true;","                }","                op.operations = null;","                op.timeHeapHandle.cancel();","                op.timeHeapHandle = null;","            }","        }","","        setImmediate(deferNextOp);","","        function deferNextOp() {","            nextOp(opKeys, i + 1, done);","        }","    }","","    if (pendingDirty) {","        self.pendingChangeEvent.emit(self, self.pendingChangeDelta);","    }","    self.pendingChangeDelta = null;","};",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"30":1,"32":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"48":0,"50":0,"54":0,"59":0,"61":1,"63":1,"65":0,"67":0,"68":0,"69":0,"70":0,"72":0,"80":1,"82":0,"84":0,"85":0,"88":0,"91":1,"93":0,"95":0,"98":1,"99":0,"101":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"119":0,"120":0,"121":0,"125":1,"126":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"147":0,"150":1,"151":0,"153":0,"155":0,"158":1,"159":0,"161":0,"162":0,"169":0,"171":0,"172":0,"173":0,"174":0,"176":0,"178":0,"179":0,"182":0,"185":1,"186":0,"188":0,"191":1,"192":0,"194":0,"197":0,"198":0,"199":0,"203":1,"204":0,"206":0,"207":0,"212":0,"214":1,"215":0,"218":0,"222":1,"223":0,"225":0,"228":1,"229":0,"231":0,"235":1,"236":0,"238":0,"239":0,"240":0,"243":0,"246":1,"247":0,"249":0,"250":0,"251":0,"254":0,"257":1,"258":0,"260":0,"263":1,"264":0,"266":0,"267":0,"268":0,"270":0,"272":0,"274":0,"277":1,"278":0,"280":0,"281":0,"282":0,"284":0,"286":0,"288":0,"291":1,"292":0,"294":0,"296":0,"297":0,"299":0,"302":0,"305":1,"306":0,"308":0,"309":0,"310":0,"314":1,"315":0,"318":0,"319":0,"320":0,"325":0,"330":0,"333":1,"334":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"344":0,"345":0,"346":0,"348":0,"356":0,"359":0,"360":0,"362":0,"364":0,"365":0,"366":0,"369":0,"370":0,"371":0,"372":0,"375":0,"377":0,"380":1,"382":0,"385":0,"386":0,"391":0,"392":0,"402":0,"411":1,"412":0,"414":0,"415":0,"417":0,"420":0,"421":0,"422":0,"425":0,"426":0,"428":0,"430":0,"431":0,"434":0,"437":1,"438":0,"440":0,"441":0,"442":0,"444":0,"445":0,"447":0,"448":0,"450":0,"451":0,"452":0,"454":0,"458":1,"459":0,"461":0,"464":1,"465":0,"467":0,"468":0,"470":0,"471":1,"472":0,"473":0,"474":0,"479":1,"481":0,"486":0,"491":0,"493":0,"495":0,"498":1,"499":0,"500":0,"501":0,"504":0,"505":0,"507":0,"508":0,"509":0,"512":0,"513":0,"517":0,"518":0,"523":0,"524":0,"525":0,"526":0,"527":0,"528":0,"530":0,"531":0,"532":0,"534":0,"535":0,"539":0,"540":0,"541":0,"542":0,"543":0,"545":0,"546":0,"547":0,"548":0,"549":0,"557":0,"558":0,"559":0,"560":0,"561":0,"563":0,"564":0,"565":0,"569":0,"571":1,"572":0,"576":0,"577":0,"579":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/root_peers.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/root_peers.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"TChannelRootPeers","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":45}}},"2":{"name":"close","line":37,"loc":{"start":{"line":37,"column":36},"end":{"line":37,"column":61}}},"3":{"name":"add","line":44,"loc":{"start":{"line":44,"column":34},"end":{"line":44,"column":66}}},"4":{"name":"clear","line":64,"loc":{"start":{"line":64,"column":36},"end":{"line":64,"column":53}}},"5":{"name":"_del","line":77,"loc":{"start":{"line":77,"column":38},"end":{"line":77,"column":58}}},"6":{"name":"choosePeer","line":91,"loc":{"start":{"line":91,"column":41},"end":{"line":91,"column":66}}},"7":{"name":"popout","line":95,"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":26}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":30}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":51}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"5":{"start":{"line":29,"column":0},"end":{"line":33,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":51}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":56}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":54}},"9":{"start":{"line":35,"column":0},"end":{"line":35,"column":47}},"10":{"start":{"line":37,"column":0},"end":{"line":42,"column":2}},"11":{"start":{"line":38,"column":4},"end":{"line":38,"column":20}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":30}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":66}},"14":{"start":{"line":44,"column":0},"end":{"line":62,"column":2}},"15":{"start":{"line":46,"column":4},"end":{"line":46,"column":20}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":35}},"17":{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},"18":{"start":{"line":50,"column":8},"end":{"line":50,"column":20}},"19":{"start":{"line":53,"column":4},"end":{"line":53,"column":54}},"20":{"start":{"line":54,"column":4},"end":{"line":54,"column":71}},"21":{"start":{"line":55,"column":4},"end":{"line":55,"column":61}},"22":{"start":{"line":56,"column":4},"end":{"line":56,"column":41}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":31}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":30}},"25":{"start":{"line":61,"column":4},"end":{"line":61,"column":16}},"26":{"start":{"line":64,"column":0},"end":{"line":75,"column":2}},"27":{"start":{"line":65,"column":4},"end":{"line":65,"column":20}},"28":{"start":{"line":67,"column":4},"end":{"line":67,"column":54}},"29":{"start":{"line":68,"column":4},"end":{"line":71,"column":5}},"30":{"start":{"line":69,"column":8},"end":{"line":69,"column":60}},"31":{"start":{"line":70,"column":8},"end":{"line":70,"column":33}},"32":{"start":{"line":73,"column":4},"end":{"line":73,"column":36}},"33":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}},"34":{"start":{"line":77,"column":0},"end":{"line":89,"column":2}},"35":{"start":{"line":78,"column":4},"end":{"line":78,"column":20}},"36":{"start":{"line":80,"column":4},"end":{"line":80,"column":54}},"37":{"start":{"line":81,"column":4},"end":{"line":84,"column":5}},"38":{"start":{"line":82,"column":8},"end":{"line":82,"column":60}},"39":{"start":{"line":83,"column":8},"end":{"line":83,"column":39}},"40":{"start":{"line":86,"column":4},"end":{"line":86,"column":36}},"41":{"start":{"line":87,"column":4},"end":{"line":87,"column":50}},"42":{"start":{"line":88,"column":4},"end":{"line":88,"column":30}},"43":{"start":{"line":91,"column":0},"end":{"line":93,"column":2}},"44":{"start":{"line":92,"column":4},"end":{"line":92,"column":16}},"45":{"start":{"line":95,"column":0},"end":{"line":107,"column":1}},"46":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"47":{"start":{"line":97,"column":8},"end":{"line":97,"column":15}},"48":{"start":{"line":100,"column":4},"end":{"line":100,"column":29}},"49":{"start":{"line":101,"column":4},"end":{"line":105,"column":5}},"50":{"start":{"line":102,"column":8},"end":{"line":102,"column":27}},"51":{"start":{"line":103,"column":8},"end":{"line":103,"column":28}},"52":{"start":{"line":104,"column":8},"end":{"line":104,"column":23}},"53":{"start":{"line":106,"column":4},"end":{"line":106,"column":16}},"54":{"start":{"line":109,"column":0},"end":{"line":109,"column":35}}},"branchMap":{"1":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":23},"end":{"line":32,"column":47}},{"start":{"line":32,"column":51},"end":{"line":32,"column":53}}]},"2":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"3":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":14},"end":{"line":53,"column":21}},{"start":{"line":53,"column":25},"end":{"line":53,"column":53}}]},"4":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"5":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","var extend = require('xtend');","","var TChannelPeersBase = require('./peers_base.js');","var TChannelPeer = require('./peer');","","function TChannelRootPeers(channel, options) {","    TChannelPeersBase.call(this, channel, options);","    this.allocPeerEvent = this.defineEvent('allocPeer');","    this.peerOptions = this.options.peerOptions || {};","}","","inherits(TChannelRootPeers, TChannelPeersBase);","","TChannelRootPeers.prototype.close = function close(callback) {","    var self = this;","","    var peers = self.values();","    TChannelPeersBase.prototype.close.call(self, peers, callback);","};","","TChannelRootPeers.prototype.add = function add(hostPort, options) {","    /*eslint max-statements: [2, 25]*/","    var self = this;","","    var peer = self._map[hostPort];","    if (peer) {","        return peer;","    }","","    options = options || extend({}, self.peerOptions);","    options.preferConnectionDirection = self.preferConnectionDirection;","    peer = new TChannelPeer(self.channel, hostPort, options);","    self.allocPeerEvent.emit(self, peer);","","    self._map[hostPort] = peer;","    self._keys.push(hostPort);","","    return peer;","};","","TChannelRootPeers.prototype.clear = function clear() {","    var self = this;","","    var names = Object.keys(self.channel.subChannels);","    for (var i = 0; i < names.length; i++) {","        var subChannel = self.channel.subChannels[names[i]];","        subChannel.peers.clear();","    }","","    self._map = Object.create(null);","    self._keys = [];","};","","TChannelRootPeers.prototype._delete = function _del(peer) {","    var self = this;","","    var names = Object.keys(self.channel.subChannels);","    for (var i = 0; i < names.length; i++) {","        var subChannel = self.channel.subChannels[names[i]];","        subChannel.peers._delete(peer);","    }","","    delete self._map[peer.hostPort];","    var index = self._keys.indexOf(peer.hostPort);","    popout(self._keys, index);","};","","TChannelRootPeers.prototype.choosePeer = function choosePeer(req) {","    return null;","};","","function popout(array, i) {","    if (!array.length) {","        return;","    }","","    var j = array.length - 1;","    if (i !== j) {","        var tmp = array[i];","        array[i] = array[j];","        array[j] = tmp;","    }","    array.pop();","}","","module.exports = TChannelRootPeers;",""],"l":{"23":1,"24":1,"26":1,"27":1,"29":1,"30":0,"31":0,"32":0,"35":1,"37":1,"38":0,"40":0,"41":0,"44":1,"46":0,"48":0,"49":0,"50":0,"53":0,"54":0,"55":0,"56":0,"58":0,"59":0,"61":0,"64":1,"65":0,"67":0,"68":0,"69":0,"70":0,"73":0,"74":0,"77":1,"78":0,"80":0,"81":0,"82":0,"83":0,"86":0,"87":0,"88":0,"91":1,"92":0,"95":1,"96":0,"97":0,"100":0,"101":0,"102":0,"103":0,"104":0,"106":0,"109":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peers_base.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peers_base.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":1,"54":0,"55":0,"56":1,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"TChannelPeersBase","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":45}}},"2":{"name":"extendLogInfo","line":40,"loc":{"start":{"line":40,"column":0},"end":{"line":40,"column":29}}},"3":{"name":"close","line":48,"loc":{"start":{"line":48,"column":36},"end":{"line":48,"column":68}}},"4":{"name":"eachPeer","line":52,"loc":{"start":{"line":52,"column":18},"end":{"line":52,"column":42}}},"5":{"name":"onClose","line":58,"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":23}}},"6":{"name":"sanitySweep","line":71,"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":31}}},"7":{"name":"nextPeer","line":76,"loc":{"start":{"line":76,"column":4},"end":{"line":76,"column":38}}},"8":{"name":"connSweepDone","line":84,"loc":{"start":{"line":84,"column":38},"end":{"line":84,"column":66}}},"9":{"name":"deferNextPeer","line":92,"loc":{"start":{"line":92,"column":8},"end":{"line":92,"column":33}}},"10":{"name":"nextConn","line":97,"loc":{"start":{"line":97,"column":4},"end":{"line":97,"column":38}}},"11":{"name":"opsSweepDone","line":104,"loc":{"start":{"line":104,"column":29},"end":{"line":104,"column":53}}},"12":{"name":"deferNextConn","line":108,"loc":{"start":{"line":108,"column":8},"end":{"line":108,"column":33}}},"13":{"name":"get","line":114,"loc":{"start":{"line":114,"column":34},"end":{"line":114,"column":57}}},"14":{"name":"keys","line":120,"loc":{"start":{"line":120,"column":35},"end":{"line":120,"column":51}}},"15":{"name":"values","line":126,"loc":{"start":{"line":126,"column":37},"end":{"line":126,"column":55}}},"16":{"name":"entries","line":138,"loc":{"start":{"line":138,"column":38},"end":{"line":138,"column":57}}},"17":{"name":"del","line":149,"loc":{"start":{"line":149,"column":37},"end":{"line":149,"column":60}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":50}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":50}},"4":{"start":{"line":27,"column":0},"end":{"line":35,"column":1}},"5":{"start":{"line":28,"column":4},"end":{"line":28,"column":28}},"6":{"start":{"line":29,"column":4},"end":{"line":29,"column":27}},"7":{"start":{"line":30,"column":4},"end":{"line":30,"column":38}},"8":{"start":{"line":31,"column":4},"end":{"line":31,"column":33}},"9":{"start":{"line":32,"column":4},"end":{"line":32,"column":36}},"10":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"11":{"start":{"line":34,"column":4},"end":{"line":34,"column":85}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":42}},"13":{"start":{"line":39,"column":0},"end":{"line":46,"column":2}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":20}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":44}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":16}},"17":{"start":{"line":48,"column":0},"end":{"line":68,"column":2}},"18":{"start":{"line":49,"column":4},"end":{"line":49,"column":20}},"19":{"start":{"line":51,"column":4},"end":{"line":51,"column":35}},"20":{"start":{"line":52,"column":4},"end":{"line":54,"column":7}},"21":{"start":{"line":53,"column":8},"end":{"line":53,"column":28}},"22":{"start":{"line":55,"column":4},"end":{"line":55,"column":17}},"23":{"start":{"line":56,"column":4},"end":{"line":56,"column":14}},"24":{"start":{"line":58,"column":4},"end":{"line":67,"column":5}},"25":{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},"26":{"start":{"line":60,"column":12},"end":{"line":64,"column":13}},"27":{"start":{"line":61,"column":16},"end":{"line":63,"column":19}},"28":{"start":{"line":65,"column":12},"end":{"line":65,"column":23}},"29":{"start":{"line":70,"column":0},"end":{"line":112,"column":2}},"30":{"start":{"line":72,"column":4},"end":{"line":72,"column":20}},"31":{"start":{"line":74,"column":4},"end":{"line":74,"column":41}},"32":{"start":{"line":76,"column":4},"end":{"line":95,"column":5}},"33":{"start":{"line":77,"column":8},"end":{"line":80,"column":9}},"34":{"start":{"line":78,"column":12},"end":{"line":78,"column":23}},"35":{"start":{"line":79,"column":12},"end":{"line":79,"column":19}},"36":{"start":{"line":82,"column":8},"end":{"line":82,"column":28}},"37":{"start":{"line":84,"column":8},"end":{"line":90,"column":11}},"38":{"start":{"line":85,"column":12},"end":{"line":88,"column":13}},"39":{"start":{"line":86,"column":16},"end":{"line":86,"column":26}},"40":{"start":{"line":87,"column":16},"end":{"line":87,"column":23}},"41":{"start":{"line":89,"column":12},"end":{"line":89,"column":40}},"42":{"start":{"line":92,"column":8},"end":{"line":94,"column":9}},"43":{"start":{"line":93,"column":12},"end":{"line":93,"column":41}},"44":{"start":{"line":97,"column":4},"end":{"line":111,"column":5}},"45":{"start":{"line":98,"column":8},"end":{"line":101,"column":9}},"46":{"start":{"line":99,"column":12},"end":{"line":99,"column":23}},"47":{"start":{"line":100,"column":12},"end":{"line":100,"column":19}},"48":{"start":{"line":103,"column":8},"end":{"line":103,"column":28}},"49":{"start":{"line":104,"column":8},"end":{"line":106,"column":11}},"50":{"start":{"line":105,"column":12},"end":{"line":105,"column":40}},"51":{"start":{"line":108,"column":8},"end":{"line":110,"column":9}},"52":{"start":{"line":109,"column":12},"end":{"line":109,"column":41}},"53":{"start":{"line":114,"column":0},"end":{"line":118,"column":2}},"54":{"start":{"line":115,"column":4},"end":{"line":115,"column":20}},"55":{"start":{"line":117,"column":4},"end":{"line":117,"column":39}},"56":{"start":{"line":120,"column":0},"end":{"line":124,"column":2}},"57":{"start":{"line":121,"column":4},"end":{"line":121,"column":20}},"58":{"start":{"line":123,"column":4},"end":{"line":123,"column":30}},"59":{"start":{"line":126,"column":0},"end":{"line":136,"column":2}},"60":{"start":{"line":127,"column":4},"end":{"line":127,"column":20}},"61":{"start":{"line":129,"column":4},"end":{"line":129,"column":26}},"62":{"start":{"line":130,"column":4},"end":{"line":130,"column":37}},"63":{"start":{"line":131,"column":4},"end":{"line":133,"column":5}},"64":{"start":{"line":132,"column":8},"end":{"line":132,"column":36}},"65":{"start":{"line":135,"column":4},"end":{"line":135,"column":15}},"66":{"start":{"line":138,"column":0},"end":{"line":147,"column":2}},"67":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"68":{"start":{"line":141,"column":4},"end":{"line":141,"column":26}},"69":{"start":{"line":142,"column":4},"end":{"line":142,"column":37}},"70":{"start":{"line":143,"column":4},"end":{"line":145,"column":5}},"71":{"start":{"line":144,"column":8},"end":{"line":144,"column":47}},"72":{"start":{"line":146,"column":4},"end":{"line":146,"column":15}},"73":{"start":{"line":149,"column":0},"end":{"line":160,"column":2}},"74":{"start":{"line":150,"column":4},"end":{"line":150,"column":20}},"75":{"start":{"line":151,"column":4},"end":{"line":151,"column":35}},"76":{"start":{"line":153,"column":4},"end":{"line":155,"column":5}},"77":{"start":{"line":154,"column":8},"end":{"line":154,"column":20}},"78":{"start":{"line":157,"column":4},"end":{"line":157,"column":23}},"79":{"start":{"line":159,"column":4},"end":{"line":159,"column":16}},"80":{"start":{"line":162,"column":0},"end":{"line":162,"column":35}}},"branchMap":{"1":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":19},"end":{"line":31,"column":26}},{"start":{"line":31,"column":30},"end":{"line":31,"column":32}}]},"2":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":37},"end":{"line":34,"column":75}},{"start":{"line":34,"column":79},"end":{"line":34,"column":84}}]},"3":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":59,"column":8}},{"start":{"line":59,"column":8},"end":{"line":59,"column":8}}]},"4":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":60,"column":12}},{"start":{"line":60,"column":12},"end":{"line":60,"column":12}}]},"5":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":77,"column":8}},{"start":{"line":77,"column":8},"end":{"line":77,"column":8}}]},"6":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"7":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":8}},{"start":{"line":98,"column":8},"end":{"line":98,"column":8}}]},"8":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":11},"end":{"line":117,"column":30}},{"start":{"line":117,"column":34},"end":{"line":117,"column":38}}]},"9":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":153,"column":4}},{"start":{"line":153,"column":4},"end":{"line":153,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","var setImmediate = require('timers').setImmediate;","var EventEmitter = require('./lib/event_emitter');","","function TChannelPeersBase(channel, options) {","    EventEmitter.call(this);","    this.channel = channel;","    this.logger = this.channel.logger;","    this.options = options || {};","    this._map = Object.create(null);","    this._keys = [];","    this.preferConnectionDirection = this.options.preferConnectionDirection || 'any';","}","","inherits(TChannelPeersBase, EventEmitter);","","TChannelPeersBase.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    info = self.channel.extendLogInfo(info);","","    return info;","};","","TChannelPeersBase.prototype.close = function close(peers, callback) {","    var self = this;","","    var counter = peers.length + 1;","    peers.forEach(function eachPeer(peer) {","        peer.close(onClose);","    });","    self.clear();","    onClose();","","    function onClose() {","        if (--counter <= 0) {","            if (counter < 0) {","                self.logger.error('closed more peers than expected', {","                    counter: counter","                });","            }","            callback();","        }","    }","};","","TChannelPeersBase.prototype.sanitySweep =","function sanitySweep(callback) {","    var self = this;","","    nextPeer(self.values(), 0, callback);","","    function nextPeer(peers, i, done) {","        if (i >= peers.length) {","            done(null);","            return;","        }","","        var peer = peers[i];","","        nextConn(peer.connections, 0, function connSweepDone(err) {","            if (err) {","                done(err);","                return;","            }","            setImmediate(deferNextPeer);","        });","","        function deferNextPeer() {","            nextPeer(peers, i + 1, done);","        }","    }","","    function nextConn(conns, i, done) {","        if (i >= conns.length) {","            done(null);","            return;","        }","","        var conn = conns[i];","        conn.ops.sanitySweep(function opsSweepDone() {","            setImmediate(deferNextConn);","        });","","        function deferNextConn() {","            nextConn(conns, i + 1, done);","        }","    }","};","","TChannelPeersBase.prototype.get = function get(hostPort) {","    var self = this;","","    return self._map[hostPort] || null;","};","","TChannelPeersBase.prototype.keys = function keys() {","    var self = this;","","    return self._keys.slice();","};","","TChannelPeersBase.prototype.values = function values() {","    var self = this;","","    var keys = self._keys;","    var ret = new Array(keys.length);","    for (var i = 0; i < keys.length; i++) {","        ret[i] = self._map[keys[i]];","    }","","    return ret;","};","","TChannelPeersBase.prototype.entries = function entries() {","    var self = this;","","    var keys = self._keys;","    var ret = new Array(keys.length);","    for (var i = 0; i < keys.length; i++) {","        ret[i] = [keys[i], self._map[keys[i]]];","    }","    return ret;","};","","TChannelPeersBase.prototype.delete = function del(hostPort) {","    var self = this;","    var peer = self._map[hostPort];","","    if (!peer) {","        return null;","    }","","    self._delete(peer);","","    return peer;","};","","module.exports = TChannelPeersBase;",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"37":1,"39":1,"41":0,"43":0,"45":0,"48":1,"49":0,"51":0,"52":0,"53":0,"55":0,"56":0,"58":1,"59":0,"60":0,"61":0,"65":0,"70":1,"72":0,"74":0,"76":1,"77":0,"78":0,"79":0,"82":0,"84":0,"85":0,"86":0,"87":0,"89":0,"92":1,"93":0,"97":1,"98":0,"99":0,"100":0,"103":0,"104":0,"105":0,"108":1,"109":0,"114":1,"115":0,"117":0,"120":1,"121":0,"123":0,"126":1,"127":0,"129":0,"130":0,"131":0,"132":0,"135":0,"138":1,"139":0,"141":0,"142":0,"143":0,"144":0,"146":0,"149":1,"150":0,"151":0,"153":0,"154":0,"157":0,"159":0,"162":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":1,"59":0,"60":1,"61":0,"62":1,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":1,"73":1,"74":1,"75":1,"76":0,"77":0,"78":1,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":1,"116":0,"117":0,"118":1,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":1,"157":0,"158":0,"159":0,"160":0,"161":1,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":1,"173":0,"174":0,"175":0,"176":0,"177":1,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":1,"192":0,"193":0,"194":1,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":1,"209":0,"210":0,"211":1,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":1,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":1,"233":0,"234":0,"235":1,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":1,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":1,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":1,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":1,"284":0,"285":1,"286":0,"287":1,"288":0,"289":1,"290":0,"291":0,"292":0,"293":0,"294":0,"295":1,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":1,"311":0,"312":0,"313":0,"314":0,"315":0,"316":1,"317":0,"318":0,"319":0,"320":1,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":1,"339":0,"340":0,"341":0,"342":1,"343":0,"344":0,"345":1,"346":0,"347":0,"348":1,"349":0,"350":0,"351":1,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":1,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":1,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":1,"388":0,"389":0,"390":0,"391":0,"392":0,"393":1,"394":0,"395":0,"396":0,"397":0,"398":0,"399":1,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":1,"408":0,"409":0,"410":0,"411":1,"412":0,"413":0,"414":1,"415":0,"416":0,"417":0,"418":0,"419":1,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":1,"427":1,"428":0,"429":0,"430":0,"431":0,"432":1,"433":0,"434":0,"435":0,"436":0,"437":1,"438":0,"439":0,"440":0,"441":0,"442":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0},"fnMap":{"1":{"name":"TChannelPeer","line":47,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":50}}},"2":{"name":"onIdentified","line":100,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":35}}},"3":{"name":"onConnectionError","line":104,"loc":{"start":{"line":104,"column":4},"end":{"line":104,"column":42}}},"4":{"name":"onConnectionClose","line":108,"loc":{"start":{"line":108,"column":4},"end":{"line":108,"column":40}}},"5":{"name":"onPendingChange","line":112,"loc":{"start":{"line":112,"column":4},"end":{"line":112,"column":44}}},"6":{"name":"onReport","line":116,"loc":{"start":{"line":116,"column":4},"end":{"line":116,"column":24}}},"7":{"name":"toString","line":147,"loc":{"start":{"line":147,"column":0},"end":{"line":147,"column":20}}},"8":{"name":"inspectPeer","line":153,"loc":{"start":{"line":153,"column":0},"end":{"line":153,"column":23}}},"9":{"name":"extendLogInfo","line":159,"loc":{"start":{"line":159,"column":0},"end":{"line":159,"column":29}}},"10":{"name":"drain","line":174,"loc":{"start":{"line":174,"column":0},"end":{"line":174,"column":34}}},"11":{"name":"clearDrain","line":182,"loc":{"start":{"line":182,"column":0},"end":{"line":182,"column":28}}},"12":{"name":"setMaxTombstoneTTL","line":192,"loc":{"start":{"line":192,"column":0},"end":{"line":192,"column":33}}},"13":{"name":"setPreferConnectionDirection","line":201,"loc":{"start":{"line":201,"column":54},"end":{"line":201,"column":103}}},"14":{"name":"setScoreStrategy","line":219,"loc":{"start":{"line":219,"column":42},"end":{"line":219,"column":83}}},"15":{"name":"invalidateScore","line":225,"loc":{"start":{"line":225,"column":41},"end":{"line":225,"column":74}}},"16":{"name":"isConnected","line":257,"loc":{"start":{"line":257,"column":37},"end":{"line":257,"column":81}}},"17":{"name":"closeDrainedConnections","line":278,"loc":{"start":{"line":278,"column":0},"end":{"line":278,"column":43}}},"18":{"name":"onClose","line":293,"loc":{"start":{"line":293,"column":4},"end":{"line":293,"column":23}}},"19":{"name":"close","line":306,"loc":{"start":{"line":306,"column":0},"end":{"line":306,"column":25}}},"20":{"name":"onClose","line":323,"loc":{"start":{"line":323,"column":4},"end":{"line":323,"column":23}}},"21":{"name":"getInConnection","line":335,"loc":{"start":{"line":335,"column":41},"end":{"line":335,"column":84}}},"22":{"name":"getIdentifiedInConnection","line":356,"loc":{"start":{"line":356,"column":51},"end":{"line":356,"column":88}}},"23":{"name":"getOutConnection","line":361,"loc":{"start":{"line":361,"column":42},"end":{"line":361,"column":86}}},"24":{"name":"getIdentifiedOutConnection","line":382,"loc":{"start":{"line":382,"column":52},"end":{"line":382,"column":90}}},"25":{"name":"countConnections","line":387,"loc":{"start":{"line":387,"column":42},"end":{"line":387,"column":79}}},"26":{"name":"connect","line":406,"loc":{"start":{"line":406,"column":0},"end":{"line":406,"column":26}}},"27":{"name":"connectTo","line":424,"loc":{"start":{"line":424,"column":35},"end":{"line":424,"column":56}}},"28":{"name":"tryConnect","line":429,"loc":{"start":{"line":429,"column":36},"end":{"line":429,"column":58}}},"29":{"name":"onIdentified","line":447,"loc":{"start":{"line":447,"column":4},"end":{"line":447,"column":31}}},"30":{"name":"waitForIdentified","line":479,"loc":{"start":{"line":479,"column":0},"end":{"line":479,"column":43}}},"31":{"name":"_waitForIdentified","line":499,"loc":{"start":{"line":499,"column":0},"end":{"line":499,"column":44}}},"32":{"name":"onConnectionError","line":522,"loc":{"start":{"line":522,"column":4},"end":{"line":522,"column":36}}},"33":{"name":"onConnectionClose","line":526,"loc":{"start":{"line":526,"column":4},"end":{"line":526,"column":36}}},"34":{"name":"onIdentified","line":530,"loc":{"start":{"line":530,"column":4},"end":{"line":530,"column":28}}},"35":{"name":"finish","line":534,"loc":{"start":{"line":534,"column":4},"end":{"line":534,"column":25}}},"36":{"name":"stopWaitingForIdentified","line":547,"loc":{"start":{"line":547,"column":0},"end":{"line":547,"column":40}}},"37":{"name":"getIdentDescriptorSlot","line":575,"loc":{"start":{"line":575,"column":0},"end":{"line":575,"column":34}}},"38":{"name":"peerRequest","line":585,"loc":{"start":{"line":585,"column":33},"end":{"line":585,"column":63}}},"39":{"name":"addConnection","line":591,"loc":{"start":{"line":591,"column":39},"end":{"line":591,"column":68}}},"40":{"name":"onIdentified","line":625,"loc":{"start":{"line":625,"column":0},"end":{"line":625,"column":28}}},"41":{"name":"onConnectionError","line":633,"loc":{"start":{"line":633,"column":0},"end":{"line":633,"column":38}}},"42":{"name":"onConnectionClose","line":639,"loc":{"start":{"line":639,"column":0},"end":{"line":639,"column":33}}},"43":{"name":"onPendingChange","line":645,"loc":{"start":{"line":645,"column":0},"end":{"line":645,"column":27}}},"44":{"name":"removeConnectionFrom","line":655,"loc":{"start":{"line":655,"column":0},"end":{"line":655,"column":41}}},"45":{"name":"removeConnection","line":679,"loc":{"start":{"line":679,"column":42},"end":{"line":679,"column":74}}},"46":{"name":"makeOutSocket","line":700,"loc":{"start":{"line":700,"column":39},"end":{"line":700,"column":64}}},"47":{"name":"makeOutConnection","line":719,"loc":{"start":{"line":719,"column":43},"end":{"line":719,"column":78}}},"48":{"name":"pendingWeightedRange","line":751,"loc":{"start":{"line":751,"column":46},"end":{"line":751,"column":78}}},"49":{"name":"countPending","line":761,"loc":{"start":{"line":761,"column":38},"end":{"line":761,"column":62}}},"50":{"name":"_maybeInvalidateScore","line":781,"loc":{"start":{"line":781,"column":0},"end":{"line":781,"column":39}}},"51":{"name":"getScoreRange","line":789,"loc":{"start":{"line":789,"column":39},"end":{"line":789,"column":64}}},"52":{"name":"computeScoreRange","line":795,"loc":{"start":{"line":795,"column":43},"end":{"line":795,"column":72}}},"53":{"name":"getScore","line":804,"loc":{"start":{"line":804,"column":34},"end":{"line":804,"column":54}}},"54":{"name":"WaitForIdentifiedDescriptor","line":817,"loc":{"start":{"line":817,"column":0},"end":{"line":817,"column":64}}},"55":{"name":"reset","line":825,"loc":{"start":{"line":825,"column":0},"end":{"line":825,"column":42}}},"56":{"name":"clear","line":833,"loc":{"start":{"line":833,"column":0},"end":{"line":833,"column":17}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":38}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":50}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":25}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":49}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":41}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":33}},"10":{"start":{"line":33,"column":0},"end":{"line":33,"column":35}},"11":{"start":{"line":34,"column":0},"end":{"line":34,"column":74}},"12":{"start":{"line":35,"column":0},"end":{"line":35,"column":70}},"13":{"start":{"line":36,"column":0},"end":{"line":36,"column":74}},"14":{"start":{"line":37,"column":0},"end":{"line":37,"column":31}},"15":{"start":{"line":38,"column":0},"end":{"line":38,"column":48}},"16":{"start":{"line":39,"column":0},"end":{"line":39,"column":46}},"17":{"start":{"line":41,"column":0},"end":{"line":41,"column":35}},"18":{"start":{"line":42,"column":0},"end":{"line":42,"column":38}},"19":{"start":{"line":43,"column":0},"end":{"line":43,"column":37}},"20":{"start":{"line":44,"column":0},"end":{"line":44,"column":39}},"21":{"start":{"line":47,"column":0},"end":{"line":138,"column":1}},"22":{"start":{"line":48,"column":4},"end":{"line":48,"column":69}},"23":{"start":{"line":50,"column":4},"end":{"line":50,"column":28}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":28}},"25":{"start":{"line":53,"column":4},"end":{"line":53,"column":62}},"26":{"start":{"line":54,"column":4},"end":{"line":54,"column":68}},"27":{"start":{"line":55,"column":4},"end":{"line":55,"column":70}},"28":{"start":{"line":56,"column":4},"end":{"line":56,"column":74}},"29":{"start":{"line":58,"column":4},"end":{"line":58,"column":27}},"30":{"start":{"line":59,"column":4},"end":{"line":59,"column":49}},"31":{"start":{"line":60,"column":4},"end":{"line":60,"column":38}},"32":{"start":{"line":61,"column":4},"end":{"line":61,"column":38}},"33":{"start":{"line":62,"column":4},"end":{"line":62,"column":38}},"34":{"start":{"line":63,"column":4},"end":{"line":63,"column":29}},"35":{"start":{"line":64,"column":4},"end":{"line":64,"column":26}},"36":{"start":{"line":65,"column":4},"end":{"line":65,"column":31}},"37":{"start":{"line":66,"column":4},"end":{"line":66,"column":27}},"38":{"start":{"line":67,"column":4},"end":{"line":67,"column":30}},"39":{"start":{"line":68,"column":4},"end":{"line":68,"column":25}},"40":{"start":{"line":69,"column":4},"end":{"line":69,"column":42}},"41":{"start":{"line":70,"column":4},"end":{"line":70,"column":52}},"42":{"start":{"line":71,"column":4},"end":{"line":71,"column":52}},"43":{"start":{"line":72,"column":4},"end":{"line":72,"column":48}},"44":{"start":{"line":73,"column":4},"end":{"line":73,"column":27}},"45":{"start":{"line":76,"column":4},"end":{"line":76,"column":33}},"46":{"start":{"line":78,"column":4},"end":{"line":78,"column":34}},"47":{"start":{"line":80,"column":4},"end":{"line":80,"column":38}},"48":{"start":{"line":82,"column":4},"end":{"line":82,"column":41}},"49":{"start":{"line":84,"column":4},"end":{"line":84,"column":76}},"50":{"start":{"line":85,"column":4},"end":{"line":89,"column":5}},"51":{"start":{"line":86,"column":8},"end":{"line":88,"column":10}},"52":{"start":{"line":91,"column":4},"end":{"line":92,"column":35}},"53":{"start":{"line":93,"column":4},"end":{"line":94,"column":31}},"54":{"start":{"line":96,"column":4},"end":{"line":96,"column":82}},"55":{"start":{"line":98,"column":4},"end":{"line":98,"column":20}},"56":{"start":{"line":100,"column":4},"end":{"line":102,"column":5}},"57":{"start":{"line":101,"column":8},"end":{"line":101,"column":32}},"58":{"start":{"line":104,"column":4},"end":{"line":106,"column":5}},"59":{"start":{"line":105,"column":8},"end":{"line":105,"column":42}},"60":{"start":{"line":108,"column":4},"end":{"line":110,"column":5}},"61":{"start":{"line":109,"column":8},"end":{"line":109,"column":37}},"62":{"start":{"line":112,"column":4},"end":{"line":114,"column":5}},"63":{"start":{"line":113,"column":8},"end":{"line":113,"column":44}},"64":{"start":{"line":116,"column":4},"end":{"line":137,"column":5}},"65":{"start":{"line":117,"column":8},"end":{"line":119,"column":9}},"66":{"start":{"line":118,"column":12},"end":{"line":118,"column":19}},"67":{"start":{"line":121,"column":8},"end":{"line":121,"column":49}},"68":{"start":{"line":122,"column":8},"end":{"line":132,"column":9}},"69":{"start":{"line":123,"column":12},"end":{"line":131,"column":14}},"70":{"start":{"line":134,"column":8},"end":{"line":136,"column":10}},"71":{"start":{"line":140,"column":0},"end":{"line":140,"column":37}},"72":{"start":{"line":142,"column":0},"end":{"line":142,"column":61}},"73":{"start":{"line":143,"column":0},"end":{"line":143,"column":79}},"74":{"start":{"line":144,"column":0},"end":{"line":144,"column":73}},"75":{"start":{"line":146,"column":0},"end":{"line":150,"column":2}},"76":{"start":{"line":148,"column":4},"end":{"line":148,"column":20}},"77":{"start":{"line":149,"column":4},"end":{"line":149,"column":49}},"78":{"start":{"line":152,"column":0},"end":{"line":156,"column":2}},"79":{"start":{"line":154,"column":4},"end":{"line":154,"column":20}},"80":{"start":{"line":155,"column":4},"end":{"line":155,"column":67}},"81":{"start":{"line":158,"column":0},"end":{"line":171,"column":2}},"82":{"start":{"line":160,"column":4},"end":{"line":160,"column":20}},"83":{"start":{"line":162,"column":4},"end":{"line":162,"column":34}},"84":{"start":{"line":163,"column":4},"end":{"line":163,"column":40}},"85":{"start":{"line":164,"column":4},"end":{"line":164,"column":38}},"86":{"start":{"line":166,"column":4},"end":{"line":168,"column":5}},"87":{"start":{"line":167,"column":8},"end":{"line":167,"column":42}},"88":{"start":{"line":170,"column":4},"end":{"line":170,"column":16}},"89":{"start":{"line":173,"column":0},"end":{"line":179,"column":2}},"90":{"start":{"line":175,"column":4},"end":{"line":175,"column":20}},"91":{"start":{"line":176,"column":4},"end":{"line":176,"column":57}},"92":{"start":{"line":177,"column":4},"end":{"line":177,"column":59}},"93":{"start":{"line":178,"column":4},"end":{"line":178,"column":26}},"94":{"start":{"line":181,"column":0},"end":{"line":189,"column":2}},"95":{"start":{"line":183,"column":4},"end":{"line":183,"column":20}},"96":{"start":{"line":185,"column":4},"end":{"line":188,"column":5}},"97":{"start":{"line":186,"column":8},"end":{"line":186,"column":35}},"98":{"start":{"line":187,"column":8},"end":{"line":187,"column":29}},"99":{"start":{"line":191,"column":0},"end":{"line":199,"column":2}},"100":{"start":{"line":193,"column":4},"end":{"line":193,"column":20}},"101":{"start":{"line":195,"column":4},"end":{"line":198,"column":5}},"102":{"start":{"line":196,"column":8},"end":{"line":196,"column":39}},"103":{"start":{"line":197,"column":8},"end":{"line":197,"column":41}},"104":{"start":{"line":201,"column":0},"end":{"line":217,"column":2}},"105":{"start":{"line":202,"column":4},"end":{"line":202,"column":20}},"106":{"start":{"line":203,"column":4},"end":{"line":205,"column":5}},"107":{"start":{"line":204,"column":8},"end":{"line":204,"column":15}},"108":{"start":{"line":207,"column":4},"end":{"line":207,"column":47}},"109":{"start":{"line":208,"column":4},"end":{"line":214,"column":5}},"110":{"start":{"line":209,"column":8},"end":{"line":209,"column":46}},"111":{"start":{"line":210,"column":11},"end":{"line":214,"column":5}},"112":{"start":{"line":211,"column":8},"end":{"line":211,"column":46}},"113":{"start":{"line":213,"column":8},"end":{"line":213,"column":44}},"114":{"start":{"line":216,"column":4},"end":{"line":216,"column":57}},"115":{"start":{"line":219,"column":0},"end":{"line":223,"column":2}},"116":{"start":{"line":220,"column":4},"end":{"line":220,"column":20}},"117":{"start":{"line":222,"column":4},"end":{"line":222,"column":49}},"118":{"start":{"line":225,"column":0},"end":{"line":255,"column":2}},"119":{"start":{"line":226,"column":4},"end":{"line":226,"column":20}},"120":{"start":{"line":228,"column":4},"end":{"line":228,"column":47}},"121":{"start":{"line":230,"column":4},"end":{"line":232,"column":5}},"122":{"start":{"line":231,"column":8},"end":{"line":231,"column":15}},"123":{"start":{"line":234,"column":4},"end":{"line":240,"column":13}},"124":{"start":{"line":242,"column":4},"end":{"line":242,"column":32}},"125":{"start":{"line":243,"column":4},"end":{"line":250,"column":5}},"126":{"start":{"line":244,"column":8},"end":{"line":244,"column":38}},"127":{"start":{"line":245,"column":8},"end":{"line":248,"column":9}},"128":{"start":{"line":246,"column":12},"end":{"line":246,"column":42}},"129":{"start":{"line":247,"column":12},"end":{"line":247,"column":36}},"130":{"start":{"line":249,"column":8},"end":{"line":249,"column":21}},"131":{"start":{"line":252,"column":4},"end":{"line":254,"column":5}},"132":{"start":{"line":253,"column":8},"end":{"line":253,"column":54}},"133":{"start":{"line":257,"column":0},"end":{"line":275,"column":2}},"134":{"start":{"line":258,"column":4},"end":{"line":258,"column":20}},"135":{"start":{"line":260,"column":4},"end":{"line":262,"column":5}},"136":{"start":{"line":261,"column":8},"end":{"line":261,"column":26}},"137":{"start":{"line":263,"column":4},"end":{"line":272,"column":5}},"138":{"start":{"line":264,"column":8},"end":{"line":264,"column":39}},"139":{"start":{"line":265,"column":8},"end":{"line":271,"column":9}},"140":{"start":{"line":266,"column":12},"end":{"line":266,"column":21}},"141":{"start":{"line":267,"column":15},"end":{"line":271,"column":9}},"142":{"start":{"line":268,"column":12},"end":{"line":268,"column":21}},"143":{"start":{"line":269,"column":15},"end":{"line":271,"column":9}},"144":{"start":{"line":270,"column":12},"end":{"line":270,"column":24}},"145":{"start":{"line":274,"column":4},"end":{"line":274,"column":17}},"146":{"start":{"line":277,"column":0},"end":{"line":303,"column":2}},"147":{"start":{"line":279,"column":4},"end":{"line":279,"column":20}},"148":{"start":{"line":281,"column":4},"end":{"line":281,"column":20}},"149":{"start":{"line":282,"column":4},"end":{"line":282,"column":42}},"150":{"start":{"line":284,"column":4},"end":{"line":290,"column":5}},"151":{"start":{"line":285,"column":8},"end":{"line":285,"column":28}},"152":{"start":{"line":286,"column":8},"end":{"line":289,"column":9}},"153":{"start":{"line":287,"column":12},"end":{"line":287,"column":22}},"154":{"start":{"line":288,"column":12},"end":{"line":288,"column":32}},"155":{"start":{"line":291,"column":4},"end":{"line":291,"column":14}},"156":{"start":{"line":293,"column":4},"end":{"line":302,"column":5}},"157":{"start":{"line":294,"column":8},"end":{"line":301,"column":9}},"158":{"start":{"line":295,"column":12},"end":{"line":299,"column":13}},"159":{"start":{"line":296,"column":16},"end":{"line":298,"column":19}},"160":{"start":{"line":300,"column":12},"end":{"line":300,"column":27}},"161":{"start":{"line":305,"column":0},"end":{"line":333,"column":2}},"162":{"start":{"line":307,"column":4},"end":{"line":307,"column":20}},"163":{"start":{"line":309,"column":4},"end":{"line":312,"column":5}},"164":{"start":{"line":310,"column":8},"end":{"line":310,"column":51}},"165":{"start":{"line":311,"column":8},"end":{"line":311,"column":32}},"166":{"start":{"line":314,"column":4},"end":{"line":314,"column":42}},"167":{"start":{"line":315,"column":4},"end":{"line":315,"column":31}},"168":{"start":{"line":316,"column":4},"end":{"line":322,"column":5}},"169":{"start":{"line":317,"column":8},"end":{"line":319,"column":9}},"170":{"start":{"line":318,"column":12},"end":{"line":318,"column":36}},"171":{"start":{"line":321,"column":8},"end":{"line":321,"column":23}},"172":{"start":{"line":323,"column":4},"end":{"line":332,"column":5}},"173":{"start":{"line":324,"column":8},"end":{"line":331,"column":9}},"174":{"start":{"line":325,"column":12},"end":{"line":329,"column":13}},"175":{"start":{"line":326,"column":16},"end":{"line":328,"column":19}},"176":{"start":{"line":330,"column":12},"end":{"line":330,"column":27}},"177":{"start":{"line":335,"column":0},"end":{"line":354,"column":2}},"178":{"start":{"line":336,"column":4},"end":{"line":336,"column":20}},"179":{"start":{"line":337,"column":4},"end":{"line":337,"column":25}},"180":{"start":{"line":338,"column":4},"end":{"line":352,"column":5}},"181":{"start":{"line":339,"column":8},"end":{"line":339,"column":39}},"182":{"start":{"line":340,"column":8},"end":{"line":342,"column":9}},"183":{"start":{"line":341,"column":12},"end":{"line":341,"column":21}},"184":{"start":{"line":343,"column":8},"end":{"line":345,"column":9}},"185":{"start":{"line":344,"column":12},"end":{"line":344,"column":24}},"186":{"start":{"line":346,"column":8},"end":{"line":348,"column":9}},"187":{"start":{"line":347,"column":12},"end":{"line":347,"column":24}},"188":{"start":{"line":349,"column":8},"end":{"line":351,"column":9}},"189":{"start":{"line":350,"column":12},"end":{"line":350,"column":29}},"190":{"start":{"line":353,"column":4},"end":{"line":353,"column":21}},"191":{"start":{"line":356,"column":0},"end":{"line":359,"column":2}},"192":{"start":{"line":357,"column":4},"end":{"line":357,"column":20}},"193":{"start":{"line":358,"column":4},"end":{"line":358,"column":38}},"194":{"start":{"line":361,"column":0},"end":{"line":380,"column":2}},"195":{"start":{"line":362,"column":4},"end":{"line":362,"column":20}},"196":{"start":{"line":363,"column":4},"end":{"line":363,"column":25}},"197":{"start":{"line":364,"column":4},"end":{"line":378,"column":5}},"198":{"start":{"line":365,"column":8},"end":{"line":365,"column":39}},"199":{"start":{"line":366,"column":8},"end":{"line":368,"column":9}},"200":{"start":{"line":367,"column":12},"end":{"line":367,"column":21}},"201":{"start":{"line":369,"column":8},"end":{"line":371,"column":9}},"202":{"start":{"line":370,"column":12},"end":{"line":370,"column":24}},"203":{"start":{"line":372,"column":8},"end":{"line":374,"column":9}},"204":{"start":{"line":373,"column":12},"end":{"line":373,"column":24}},"205":{"start":{"line":375,"column":8},"end":{"line":377,"column":9}},"206":{"start":{"line":376,"column":12},"end":{"line":376,"column":29}},"207":{"start":{"line":379,"column":4},"end":{"line":379,"column":21}},"208":{"start":{"line":382,"column":0},"end":{"line":385,"column":2}},"209":{"start":{"line":383,"column":4},"end":{"line":383,"column":20}},"210":{"start":{"line":384,"column":4},"end":{"line":384,"column":39}},"211":{"start":{"line":387,"column":0},"end":{"line":402,"column":2}},"212":{"start":{"line":388,"column":4},"end":{"line":388,"column":20}},"213":{"start":{"line":389,"column":4},"end":{"line":391,"column":5}},"214":{"start":{"line":390,"column":8},"end":{"line":390,"column":39}},"215":{"start":{"line":393,"column":4},"end":{"line":393,"column":18}},"216":{"start":{"line":394,"column":4},"end":{"line":399,"column":5}},"217":{"start":{"line":395,"column":8},"end":{"line":395,"column":39}},"218":{"start":{"line":396,"column":8},"end":{"line":398,"column":9}},"219":{"start":{"line":397,"column":12},"end":{"line":397,"column":20}},"220":{"start":{"line":401,"column":4},"end":{"line":401,"column":17}},"221":{"start":{"line":405,"column":0},"end":{"line":421,"column":2}},"222":{"start":{"line":407,"column":4},"end":{"line":407,"column":20}},"223":{"start":{"line":408,"column":4},"end":{"line":408,"column":20}},"224":{"start":{"line":409,"column":4},"end":{"line":413,"column":5}},"225":{"start":{"line":410,"column":8},"end":{"line":410,"column":48}},"226":{"start":{"line":412,"column":8},"end":{"line":412,"column":49}},"227":{"start":{"line":415,"column":4},"end":{"line":419,"column":5}},"228":{"start":{"line":416,"column":8},"end":{"line":416,"column":42}},"229":{"start":{"line":417,"column":8},"end":{"line":417,"column":46}},"230":{"start":{"line":418,"column":8},"end":{"line":418,"column":33}},"231":{"start":{"line":420,"column":4},"end":{"line":420,"column":16}},"232":{"start":{"line":424,"column":0},"end":{"line":427,"column":2}},"233":{"start":{"line":425,"column":4},"end":{"line":425,"column":20}},"234":{"start":{"line":426,"column":4},"end":{"line":426,"column":30}},"235":{"start":{"line":429,"column":0},"end":{"line":476,"column":2}},"236":{"start":{"line":430,"column":4},"end":{"line":430,"column":20}},"237":{"start":{"line":432,"column":4},"end":{"line":432,"column":33}},"238":{"start":{"line":433,"column":4},"end":{"line":437,"column":5}},"239":{"start":{"line":436,"column":8},"end":{"line":436,"column":15}},"240":{"start":{"line":438,"column":4},"end":{"line":438,"column":37}},"241":{"start":{"line":440,"column":4},"end":{"line":440,"column":39}},"242":{"start":{"line":441,"column":4},"end":{"line":443,"column":5}},"243":{"start":{"line":442,"column":8},"end":{"line":442,"column":32}},"244":{"start":{"line":445,"column":4},"end":{"line":445,"column":47}},"245":{"start":{"line":447,"column":4},"end":{"line":475,"column":5}},"246":{"start":{"line":448,"column":8},"end":{"line":448,"column":42}},"247":{"start":{"line":450,"column":8},"end":{"line":454,"column":9}},"248":{"start":{"line":451,"column":12},"end":{"line":451,"column":42}},"249":{"start":{"line":452,"column":12},"end":{"line":452,"column":41}},"250":{"start":{"line":453,"column":12},"end":{"line":453,"column":19}},"251":{"start":{"line":456,"column":8},"end":{"line":466,"column":9}},"252":{"start":{"line":457,"column":12},"end":{"line":457,"column":68}},"253":{"start":{"line":459,"column":12},"end":{"line":459,"column":70}},"254":{"start":{"line":461,"column":12},"end":{"line":461,"column":81}},"255":{"start":{"line":463,"column":12},"end":{"line":465,"column":14}},"256":{"start":{"line":468,"column":8},"end":{"line":468,"column":38}},"257":{"start":{"line":469,"column":8},"end":{"line":474,"column":9}},"258":{"start":{"line":471,"column":12},"end":{"line":471,"column":80}},"259":{"start":{"line":478,"column":0},"end":{"line":496,"column":2}},"260":{"start":{"line":480,"column":4},"end":{"line":480,"column":20}},"261":{"start":{"line":482,"column":4},"end":{"line":485,"column":5}},"262":{"start":{"line":483,"column":8},"end":{"line":483,"column":24}},"263":{"start":{"line":484,"column":8},"end":{"line":484,"column":30}},"264":{"start":{"line":487,"column":4},"end":{"line":493,"column":5}},"265":{"start":{"line":488,"column":8},"end":{"line":488,"column":34}},"266":{"start":{"line":489,"column":11},"end":{"line":493,"column":5}},"267":{"start":{"line":490,"column":8},"end":{"line":490,"column":23}},"268":{"start":{"line":492,"column":8},"end":{"line":492,"column":55}},"269":{"start":{"line":495,"column":4},"end":{"line":495,"column":14}},"270":{"start":{"line":498,"column":0},"end":{"line":544,"column":2}},"271":{"start":{"line":500,"column":4},"end":{"line":500,"column":20}},"272":{"start":{"line":501,"column":4},"end":{"line":501,"column":23}},"273":{"start":{"line":504,"column":4},"end":{"line":504,"column":45}},"274":{"start":{"line":505,"column":4},"end":{"line":505,"column":57}},"275":{"start":{"line":506,"column":4},"end":{"line":511,"column":6}},"276":{"start":{"line":512,"column":4},"end":{"line":512,"column":55}},"277":{"start":{"line":514,"column":4},"end":{"line":514,"column":29}},"278":{"start":{"line":515,"column":4},"end":{"line":515,"column":42}},"279":{"start":{"line":516,"column":4},"end":{"line":516,"column":42}},"280":{"start":{"line":517,"column":4},"end":{"line":517,"column":42}},"281":{"start":{"line":518,"column":4},"end":{"line":518,"column":46}},"282":{"start":{"line":520,"column":4},"end":{"line":520,"column":16}},"283":{"start":{"line":522,"column":4},"end":{"line":524,"column":5}},"284":{"start":{"line":523,"column":8},"end":{"line":523,"column":20}},"285":{"start":{"line":526,"column":4},"end":{"line":528,"column":5}},"286":{"start":{"line":527,"column":8},"end":{"line":527,"column":20}},"287":{"start":{"line":530,"column":4},"end":{"line":532,"column":5}},"288":{"start":{"line":531,"column":8},"end":{"line":531,"column":21}},"289":{"start":{"line":534,"column":4},"end":{"line":543,"column":5}},"290":{"start":{"line":536,"column":8},"end":{"line":538,"column":9}},"291":{"start":{"line":537,"column":12},"end":{"line":537,"column":19}},"292":{"start":{"line":539,"column":8},"end":{"line":539,"column":22}},"293":{"start":{"line":541,"column":8},"end":{"line":541,"column":44}},"294":{"start":{"line":542,"column":8},"end":{"line":542,"column":22}},"295":{"start":{"line":546,"column":0},"end":{"line":572,"column":2}},"296":{"start":{"line":548,"column":4},"end":{"line":548,"column":87}},"297":{"start":{"line":550,"column":4},"end":{"line":554,"column":5}},"298":{"start":{"line":553,"column":8},"end":{"line":553,"column":15}},"299":{"start":{"line":556,"column":4},"end":{"line":556,"column":59}},"300":{"start":{"line":557,"column":4},"end":{"line":557,"column":49}},"301":{"start":{"line":559,"column":4},"end":{"line":561,"column":5}},"302":{"start":{"line":560,"column":8},"end":{"line":560,"column":15}},"303":{"start":{"line":563,"column":4},"end":{"line":563,"column":31}},"304":{"start":{"line":565,"column":4},"end":{"line":565,"column":53}},"305":{"start":{"line":566,"column":4},"end":{"line":566,"column":53}},"306":{"start":{"line":567,"column":4},"end":{"line":567,"column":58}},"307":{"start":{"line":568,"column":4},"end":{"line":568,"column":31}},"308":{"start":{"line":569,"column":4},"end":{"line":569,"column":55}},"309":{"start":{"line":571,"column":4},"end":{"line":571,"column":22}},"310":{"start":{"line":574,"column":0},"end":{"line":583,"column":2}},"311":{"start":{"line":576,"column":4},"end":{"line":576,"column":10}},"312":{"start":{"line":577,"column":4},"end":{"line":581,"column":5}},"313":{"start":{"line":578,"column":8},"end":{"line":580,"column":9}},"314":{"start":{"line":579,"column":12},"end":{"line":579,"column":21}},"315":{"start":{"line":582,"column":4},"end":{"line":582,"column":50}},"316":{"start":{"line":585,"column":0},"end":{"line":589,"column":2}},"317":{"start":{"line":586,"column":4},"end":{"line":586,"column":20}},"318":{"start":{"line":587,"column":4},"end":{"line":587,"column":64}},"319":{"start":{"line":588,"column":4},"end":{"line":588,"column":43}},"320":{"start":{"line":591,"column":0},"end":{"line":622,"column":2}},"321":{"start":{"line":592,"column":4},"end":{"line":592,"column":20}},"322":{"start":{"line":595,"column":4},"end":{"line":600,"column":5}},"323":{"start":{"line":596,"column":8},"end":{"line":596,"column":36}},"324":{"start":{"line":597,"column":8},"end":{"line":597,"column":51}},"325":{"start":{"line":599,"column":8},"end":{"line":599,"column":39}},"326":{"start":{"line":602,"column":4},"end":{"line":602,"column":52}},"327":{"start":{"line":603,"column":4},"end":{"line":603,"column":52}},"328":{"start":{"line":604,"column":4},"end":{"line":604,"column":62}},"329":{"start":{"line":606,"column":4},"end":{"line":606,"column":48}},"330":{"start":{"line":607,"column":4},"end":{"line":611,"column":5}},"331":{"start":{"line":610,"column":8},"end":{"line":610,"column":56}},"332":{"start":{"line":613,"column":4},"end":{"line":619,"column":5}},"333":{"start":{"line":614,"column":8},"end":{"line":618,"column":9}},"334":{"start":{"line":615,"column":12},"end":{"line":615,"column":55}},"335":{"start":{"line":616,"column":15},"end":{"line":618,"column":9}},"336":{"start":{"line":617,"column":12},"end":{"line":617,"column":48}},"337":{"start":{"line":621,"column":4},"end":{"line":621,"column":16}},"338":{"start":{"line":624,"column":0},"end":{"line":630,"column":2}},"339":{"start":{"line":626,"column":4},"end":{"line":626,"column":20}},"340":{"start":{"line":628,"column":4},"end":{"line":628,"column":64}},"341":{"start":{"line":629,"column":4},"end":{"line":629,"column":63}},"342":{"start":{"line":632,"column":0},"end":{"line":636,"column":2}},"343":{"start":{"line":634,"column":4},"end":{"line":634,"column":20}},"344":{"start":{"line":635,"column":4},"end":{"line":635,"column":41}},"345":{"start":{"line":638,"column":0},"end":{"line":642,"column":2}},"346":{"start":{"line":640,"column":4},"end":{"line":640,"column":20}},"347":{"start":{"line":641,"column":4},"end":{"line":641,"column":42}},"348":{"start":{"line":644,"column":0},"end":{"line":652,"column":2}},"349":{"start":{"line":646,"column":4},"end":{"line":646,"column":20}},"350":{"start":{"line":651,"column":4},"end":{"line":651,"column":48}},"351":{"start":{"line":654,"column":0},"end":{"line":677,"column":2}},"352":{"start":{"line":656,"column":4},"end":{"line":656,"column":20}},"353":{"start":{"line":658,"column":4},"end":{"line":658,"column":64}},"354":{"start":{"line":659,"column":4},"end":{"line":659,"column":64}},"355":{"start":{"line":660,"column":4},"end":{"line":660,"column":64}},"356":{"start":{"line":661,"column":4},"end":{"line":661,"column":74}},"357":{"start":{"line":663,"column":4},"end":{"line":674,"column":5}},"358":{"start":{"line":664,"column":8},"end":{"line":666,"column":11}},"359":{"start":{"line":667,"column":8},"end":{"line":667,"column":44}},"360":{"start":{"line":668,"column":8},"end":{"line":673,"column":9}},"361":{"start":{"line":670,"column":12},"end":{"line":670,"column":67}},"362":{"start":{"line":672,"column":12},"end":{"line":672,"column":80}},"363":{"start":{"line":676,"column":4},"end":{"line":676,"column":32}},"364":{"start":{"line":679,"column":0},"end":{"line":698,"column":2}},"365":{"start":{"line":680,"column":4},"end":{"line":680,"column":20}},"366":{"start":{"line":682,"column":4},"end":{"line":682,"column":19}},"367":{"start":{"line":683,"column":4},"end":{"line":683,"column":26}},"368":{"start":{"line":685,"column":4},"end":{"line":685,"column":71}},"369":{"start":{"line":686,"column":4},"end":{"line":689,"column":5}},"370":{"start":{"line":687,"column":8},"end":{"line":687,"column":51}},"371":{"start":{"line":688,"column":8},"end":{"line":688,"column":45}},"372":{"start":{"line":691,"column":4},"end":{"line":691,"column":51}},"373":{"start":{"line":693,"column":4},"end":{"line":693,"column":48}},"374":{"start":{"line":694,"column":4},"end":{"line":696,"column":5}},"375":{"start":{"line":695,"column":8},"end":{"line":695,"column":52}},"376":{"start":{"line":697,"column":4},"end":{"line":697,"column":15}},"377":{"start":{"line":700,"column":0},"end":{"line":717,"column":2}},"378":{"start":{"line":701,"column":4},"end":{"line":701,"column":20}},"379":{"start":{"line":703,"column":4},"end":{"line":703,"column":65}},"380":{"start":{"line":704,"column":4},"end":{"line":706,"column":5}},"381":{"start":{"line":705,"column":8},"end":{"line":705,"column":30}},"382":{"start":{"line":708,"column":4},"end":{"line":708,"column":41}},"383":{"start":{"line":709,"column":4},"end":{"line":709,"column":24}},"384":{"start":{"line":710,"column":4},"end":{"line":710,"column":38}},"385":{"start":{"line":712,"column":4},"end":{"line":715,"column":7}},"386":{"start":{"line":716,"column":4},"end":{"line":716,"column":18}},"387":{"start":{"line":719,"column":0},"end":{"line":727,"column":2}},"388":{"start":{"line":720,"column":4},"end":{"line":720,"column":20}},"389":{"start":{"line":721,"column":4},"end":{"line":721,"column":55}},"390":{"start":{"line":722,"column":4},"end":{"line":724,"column":6}},"391":{"start":{"line":725,"column":4},"end":{"line":725,"column":47}},"392":{"start":{"line":726,"column":4},"end":{"line":726,"column":16}},"393":{"start":{"line":751,"column":0},"end":{"line":759,"column":2}},"394":{"start":{"line":752,"column":4},"end":{"line":752,"column":20}},"395":{"start":{"line":754,"column":4},"end":{"line":754,"column":38}},"396":{"start":{"line":755,"column":4},"end":{"line":755,"column":37}},"397":{"start":{"line":756,"column":4},"end":{"line":756,"column":22}},"398":{"start":{"line":758,"column":4},"end":{"line":758,"column":31}},"399":{"start":{"line":761,"column":0},"end":{"line":774,"column":2}},"400":{"start":{"line":762,"column":4},"end":{"line":762,"column":20}},"401":{"start":{"line":764,"column":4},"end":{"line":764,"column":41}},"402":{"start":{"line":766,"column":4},"end":{"line":771,"column":5}},"403":{"start":{"line":767,"column":8},"end":{"line":767,"column":67}},"404":{"start":{"line":769,"column":8},"end":{"line":769,"column":35}},"405":{"start":{"line":770,"column":8},"end":{"line":770,"column":38}},"406":{"start":{"line":773,"column":4},"end":{"line":773,"column":19}},"407":{"start":{"line":780,"column":0},"end":{"line":787,"column":2}},"408":{"start":{"line":782,"column":4},"end":{"line":782,"column":20}},"409":{"start":{"line":784,"column":4},"end":{"line":786,"column":5}},"410":{"start":{"line":785,"column":8},"end":{"line":785,"column":37}},"411":{"start":{"line":789,"column":0},"end":{"line":793,"column":2}},"412":{"start":{"line":790,"column":4},"end":{"line":790,"column":20}},"413":{"start":{"line":792,"column":4},"end":{"line":792,"column":27}},"414":{"start":{"line":795,"column":0},"end":{"line":802,"column":2}},"415":{"start":{"line":796,"column":4},"end":{"line":796,"column":20}},"416":{"start":{"line":798,"column":4},"end":{"line":798,"column":51}},"417":{"start":{"line":799,"column":4},"end":{"line":799,"column":48}},"418":{"start":{"line":801,"column":4},"end":{"line":801,"column":17}},"419":{"start":{"line":804,"column":0},"end":{"line":813,"column":2}},"420":{"start":{"line":806,"column":4},"end":{"line":806,"column":20}},"421":{"start":{"line":807,"column":4},"end":{"line":807,"column":55}},"422":{"start":{"line":808,"column":4},"end":{"line":808,"column":29}},"423":{"start":{"line":809,"column":4},"end":{"line":811,"column":5}},"424":{"start":{"line":810,"column":8},"end":{"line":810,"column":17}},"425":{"start":{"line":812,"column":4},"end":{"line":812,"column":44}},"426":{"start":{"line":815,"column":0},"end":{"line":815,"column":30}},"427":{"start":{"line":817,"column":0},"end":{"line":822,"column":1}},"428":{"start":{"line":818,"column":4},"end":{"line":818,"column":22}},"429":{"start":{"line":819,"column":4},"end":{"line":819,"column":22}},"430":{"start":{"line":820,"column":4},"end":{"line":820,"column":22}},"431":{"start":{"line":821,"column":4},"end":{"line":821,"column":21}},"432":{"start":{"line":824,"column":0},"end":{"line":830,"column":2}},"433":{"start":{"line":826,"column":4},"end":{"line":826,"column":23}},"434":{"start":{"line":827,"column":4},"end":{"line":827,"column":23}},"435":{"start":{"line":828,"column":4},"end":{"line":828,"column":23}},"436":{"start":{"line":829,"column":4},"end":{"line":829,"column":21}},"437":{"start":{"line":832,"column":0},"end":{"line":838,"column":2}},"438":{"start":{"line":834,"column":4},"end":{"line":834,"column":22}},"439":{"start":{"line":835,"column":4},"end":{"line":835,"column":22}},"440":{"start":{"line":836,"column":4},"end":{"line":836,"column":22}},"441":{"start":{"line":837,"column":4},"end":{"line":837,"column":21}},"442":{"start":{"line":840,"column":0},"end":{"line":840,"column":68}}},"branchMap":{"1":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":14},"end":{"line":50,"column":21}},{"start":{"line":50,"column":25},"end":{"line":50,"column":27}}]},"2":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":26},"end":{"line":84,"column":48}},{"start":{"line":84,"column":52},"end":{"line":84,"column":75}}]},"3":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"4":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":31}},{"start":{"line":85,"column":35},"end":{"line":85,"column":69}}]},"5":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":34},"end":{"line":91,"column":69}},{"start":{"line":92,"column":8},"end":{"line":92,"column":34}}]},"6":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":37},"end":{"line":93,"column":75}},{"start":{"line":94,"column":8},"end":{"line":94,"column":30}}]},"7":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":38},"end":{"line":96,"column":71}},{"start":{"line":96,"column":75},"end":{"line":96,"column":80}}]},"8":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":117,"column":8}},{"start":{"line":117,"column":8},"end":{"line":117,"column":8}}]},"9":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"10":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":4},"end":{"line":166,"column":4}},{"start":{"line":166,"column":4},"end":{"line":166,"column":4}}]},"11":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":4},"end":{"line":185,"column":4}},{"start":{"line":185,"column":4},"end":{"line":185,"column":4}}]},"12":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":4},"end":{"line":203,"column":4}},{"start":{"line":203,"column":4},"end":{"line":203,"column":4}}]},"13":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":4},"end":{"line":208,"column":4}},{"start":{"line":208,"column":4},"end":{"line":208,"column":4}}]},"14":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":11},"end":{"line":210,"column":11}},{"start":{"line":210,"column":11},"end":{"line":210,"column":11}}]},"15":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":4},"end":{"line":230,"column":4}},{"start":{"line":230,"column":4},"end":{"line":230,"column":4}}]},"16":{"line":234,"type":"cond-expr","locations":[{"start":{"line":234,"column":46},"end":{"line":240,"column":5}},{"start":{"line":240,"column":8},"end":{"line":240,"column":12}}]},"17":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":16},"end":{"line":236,"column":22}},{"start":{"line":236,"column":26},"end":{"line":236,"column":35}}]},"18":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":8},"end":{"line":245,"column":8}},{"start":{"line":245,"column":8},"end":{"line":245,"column":8}}]},"19":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":4},"end":{"line":252,"column":4}},{"start":{"line":252,"column":4},"end":{"line":252,"column":4}}]},"20":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":4},"end":{"line":260,"column":4}},{"start":{"line":260,"column":4},"end":{"line":260,"column":4}}]},"21":{"line":265,"type":"if","locations":[{"start":{"line":265,"column":8},"end":{"line":265,"column":8}},{"start":{"line":265,"column":8},"end":{"line":265,"column":8}}]},"22":{"line":265,"type":"binary-expr","locations":[{"start":{"line":265,"column":12},"end":{"line":265,"column":21}},{"start":{"line":265,"column":25},"end":{"line":265,"column":53}}]},"23":{"line":267,"type":"if","locations":[{"start":{"line":267,"column":15},"end":{"line":267,"column":15}},{"start":{"line":267,"column":15},"end":{"line":267,"column":15}}]},"24":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":15},"end":{"line":269,"column":15}},{"start":{"line":269,"column":15},"end":{"line":269,"column":15}}]},"25":{"line":269,"type":"binary-expr","locations":[{"start":{"line":269,"column":19},"end":{"line":269,"column":43}},{"start":{"line":269,"column":47},"end":{"line":269,"column":58}}]},"26":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":8},"end":{"line":286,"column":8}},{"start":{"line":286,"column":8},"end":{"line":286,"column":8}}]},"27":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":8},"end":{"line":294,"column":8}},{"start":{"line":294,"column":8},"end":{"line":294,"column":8}}]},"28":{"line":295,"type":"if","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":12}},{"start":{"line":295,"column":12},"end":{"line":295,"column":12}}]},"29":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":4},"end":{"line":309,"column":4}},{"start":{"line":309,"column":4},"end":{"line":309,"column":4}}]},"30":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":4},"end":{"line":316,"column":4}},{"start":{"line":316,"column":4},"end":{"line":316,"column":4}}]},"31":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":8},"end":{"line":324,"column":8}},{"start":{"line":324,"column":8},"end":{"line":324,"column":8}}]},"32":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":12},"end":{"line":325,"column":12}},{"start":{"line":325,"column":12},"end":{"line":325,"column":12}}]},"33":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":8},"end":{"line":340,"column":8}},{"start":{"line":340,"column":8},"end":{"line":340,"column":8}}]},"34":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":8},"end":{"line":343,"column":8}},{"start":{"line":343,"column":8},"end":{"line":343,"column":8}}]},"35":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":8},"end":{"line":346,"column":8}},{"start":{"line":346,"column":8},"end":{"line":346,"column":8}}]},"36":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":8},"end":{"line":349,"column":8}},{"start":{"line":349,"column":8},"end":{"line":349,"column":8}}]},"37":{"line":366,"type":"if","locations":[{"start":{"line":366,"column":8},"end":{"line":366,"column":8}},{"start":{"line":366,"column":8},"end":{"line":366,"column":8}}]},"38":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":8},"end":{"line":369,"column":8}},{"start":{"line":369,"column":8},"end":{"line":369,"column":8}}]},"39":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":8},"end":{"line":372,"column":8}},{"start":{"line":372,"column":8},"end":{"line":372,"column":8}}]},"40":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":8},"end":{"line":375,"column":8}},{"start":{"line":375,"column":8},"end":{"line":375,"column":8}}]},"41":{"line":389,"type":"if","locations":[{"start":{"line":389,"column":4},"end":{"line":389,"column":4}},{"start":{"line":389,"column":4},"end":{"line":389,"column":4}}]},"42":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":8},"end":{"line":396,"column":8}},{"start":{"line":396,"column":8},"end":{"line":396,"column":8}}]},"43":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":4},"end":{"line":409,"column":4}},{"start":{"line":409,"column":4},"end":{"line":409,"column":4}}]},"44":{"line":409,"type":"binary-expr","locations":[{"start":{"line":409,"column":8},"end":{"line":409,"column":47}},{"start":{"line":409,"column":51},"end":{"line":409,"column":59}}]},"45":{"line":415,"type":"if","locations":[{"start":{"line":415,"column":4},"end":{"line":415,"column":4}},{"start":{"line":415,"column":4},"end":{"line":415,"column":4}}]},"46":{"line":415,"type":"binary-expr","locations":[{"start":{"line":415,"column":8},"end":{"line":415,"column":13}},{"start":{"line":415,"column":18},"end":{"line":415,"column":25}},{"start":{"line":415,"column":29},"end":{"line":415,"column":53}}]},"47":{"line":433,"type":"if","locations":[{"start":{"line":433,"column":4},"end":{"line":433,"column":4}},{"start":{"line":433,"column":4},"end":{"line":433,"column":4}}]},"48":{"line":433,"type":"binary-expr","locations":[{"start":{"line":433,"column":8},"end":{"line":433,"column":46}},{"start":{"line":434,"column":8},"end":{"line":434,"column":33}}]},"49":{"line":441,"type":"if","locations":[{"start":{"line":441,"column":4},"end":{"line":441,"column":4}},{"start":{"line":441,"column":4},"end":{"line":441,"column":4}}]},"50":{"line":441,"type":"binary-expr","locations":[{"start":{"line":441,"column":8},"end":{"line":441,"column":13}},{"start":{"line":441,"column":17},"end":{"line":441,"column":41}}]},"51":{"line":450,"type":"if","locations":[{"start":{"line":450,"column":8},"end":{"line":450,"column":8}},{"start":{"line":450,"column":8},"end":{"line":450,"column":8}}]},"52":{"line":456,"type":"if","locations":[{"start":{"line":456,"column":8},"end":{"line":456,"column":8}},{"start":{"line":456,"column":8},"end":{"line":456,"column":8}}]},"53":{"line":469,"type":"if","locations":[{"start":{"line":469,"column":8},"end":{"line":469,"column":8}},{"start":{"line":469,"column":8},"end":{"line":469,"column":8}}]},"54":{"line":482,"type":"if","locations":[{"start":{"line":482,"column":4},"end":{"line":482,"column":4}},{"start":{"line":482,"column":4},"end":{"line":482,"column":4}}]},"55":{"line":482,"type":"binary-expr","locations":[{"start":{"line":482,"column":8},"end":{"line":482,"column":34}},{"start":{"line":482,"column":38},"end":{"line":482,"column":47}}]},"56":{"line":487,"type":"if","locations":[{"start":{"line":487,"column":4},"end":{"line":487,"column":4}},{"start":{"line":487,"column":4},"end":{"line":487,"column":4}}]},"57":{"line":489,"type":"if","locations":[{"start":{"line":489,"column":11},"end":{"line":489,"column":11}},{"start":{"line":489,"column":11},"end":{"line":489,"column":11}}]},"58":{"line":536,"type":"if","locations":[{"start":{"line":536,"column":8},"end":{"line":536,"column":8}},{"start":{"line":536,"column":8},"end":{"line":536,"column":8}}]},"59":{"line":550,"type":"if","locations":[{"start":{"line":550,"column":4},"end":{"line":550,"column":4}},{"start":{"line":550,"column":4},"end":{"line":550,"column":4}}]},"60":{"line":559,"type":"if","locations":[{"start":{"line":559,"column":4},"end":{"line":559,"column":4}},{"start":{"line":559,"column":4},"end":{"line":559,"column":4}}]},"61":{"line":559,"type":"binary-expr","locations":[{"start":{"line":559,"column":8},"end":{"line":559,"column":19}},{"start":{"line":559,"column":23},"end":{"line":559,"column":39}}]},"62":{"line":578,"type":"if","locations":[{"start":{"line":578,"column":8},"end":{"line":578,"column":8}},{"start":{"line":578,"column":8},"end":{"line":578,"column":8}}]},"63":{"line":587,"type":"binary-expr","locations":[{"start":{"line":587,"column":22},"end":{"line":587,"column":37}},{"start":{"line":587,"column":41},"end":{"line":587,"column":63}}]},"64":{"line":595,"type":"if","locations":[{"start":{"line":595,"column":4},"end":{"line":595,"column":4}},{"start":{"line":595,"column":4},"end":{"line":595,"column":4}}]},"65":{"line":607,"type":"if","locations":[{"start":{"line":607,"column":4},"end":{"line":607,"column":4}},{"start":{"line":607,"column":4},"end":{"line":607,"column":4}}]},"66":{"line":613,"type":"if","locations":[{"start":{"line":613,"column":4},"end":{"line":613,"column":4}},{"start":{"line":613,"column":4},"end":{"line":613,"column":4}}]},"67":{"line":614,"type":"if","locations":[{"start":{"line":614,"column":8},"end":{"line":614,"column":8}},{"start":{"line":614,"column":8},"end":{"line":614,"column":8}}]},"68":{"line":616,"type":"if","locations":[{"start":{"line":616,"column":15},"end":{"line":616,"column":15}},{"start":{"line":616,"column":15},"end":{"line":616,"column":15}}]},"69":{"line":663,"type":"if","locations":[{"start":{"line":663,"column":4},"end":{"line":663,"column":4}},{"start":{"line":663,"column":4},"end":{"line":663,"column":4}}]},"70":{"line":668,"type":"if","locations":[{"start":{"line":668,"column":8},"end":{"line":668,"column":8}},{"start":{"line":668,"column":8},"end":{"line":668,"column":8}}]},"71":{"line":668,"type":"binary-expr","locations":[{"start":{"line":668,"column":12},"end":{"line":668,"column":34}},{"start":{"line":669,"column":12},"end":{"line":669,"column":39}}]},"72":{"line":685,"type":"cond-expr","locations":[{"start":{"line":685,"column":35},"end":{"line":685,"column":65}},{"start":{"line":685,"column":68},"end":{"line":685,"column":70}}]},"73":{"line":686,"type":"if","locations":[{"start":{"line":686,"column":4},"end":{"line":686,"column":4}},{"start":{"line":686,"column":4},"end":{"line":686,"column":4}}]},"74":{"line":694,"type":"if","locations":[{"start":{"line":694,"column":4},"end":{"line":694,"column":4}},{"start":{"line":694,"column":4},"end":{"line":694,"column":4}}]},"75":{"line":704,"type":"if","locations":[{"start":{"line":704,"column":4},"end":{"line":704,"column":4}},{"start":{"line":704,"column":4},"end":{"line":704,"column":4}}]},"76":{"line":721,"type":"binary-expr","locations":[{"start":{"line":721,"column":15},"end":{"line":721,"column":38}},{"start":{"line":721,"column":42},"end":{"line":721,"column":54}}]},"77":{"line":784,"type":"if","locations":[{"start":{"line":784,"column":4},"end":{"line":784,"column":4}},{"start":{"line":784,"column":4},"end":{"line":784,"column":4}}]},"78":{"line":809,"type":"if","locations":[{"start":{"line":809,"column":4},"end":{"line":809,"column":4}},{"start":{"line":809,"column":4},"end":{"line":809,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var inherits = require('util').inherits;","var inspect = require('util').inspect;","var EventEmitter = require('./lib/event_emitter');","var stat = require('./stat-tags.js');","var net = require('net');","","var TChannelConnection = require('./connection');","var HostPort = require('./host-port.js');","var errors = require('./errors');","var Request = require('./request');","var PreferOutgoing = require('./peer_score_strategies.js').PreferOutgoing;","var NoPreference = require('./peer_score_strategies.js').NoPreference;","var PreferIncoming = require('./peer_score_strategies.js').PreferIncoming;","var Range = require('./range');","var PeerDrain = require('./drain.js').PeerDrain;","var ObjectPool = require('./lib/object_pool');","","var DEFAULT_REPORT_INTERVAL = 1000;","var INITIAL_CONN_ATTEMPT_DELAY = 5000;","var CONN_ATTEMPT_DELAY_MULTIPLER = 2;","var MAX_CONN_ATTEMPT_DELAY = 30 * 1000;","","/*eslint max-statements: [2, 40]*/","function TChannelPeer(channel, hostPort, options) {","    assert(hostPort !== '0.0.0.0:0', 'Cannot create ephemeral peer');","","    options = options || {};","    EventEmitter.call(this);","","    this.stateChangedEvent = this.defineEvent('stateChanged');","    this.allocConnectionEvent = this.defineEvent('allocConnection');","    this.removeConnectionEvent = this.defineEvent('removeConnection');","    this.deltaOutConnectionEvent = this.defineEvent('deltaOutConnection');","","    this.channel = channel;","    this.socketInitTimeout = channel.initTimeout;","    this.logger = this.channel.logger;","    this.timers = this.channel.timers;","    this.random = this.channel.random;","    this.hostPort = hostPort;","    this.connections = [];","    this.pendingIdentified = 0;","    this.heapElements = [];","    this.scoreStrategy = null;","    this.draining = null;","    this.boundOnIdentified = onIdentified;","    this.boundOnConnectionError = onConnectionError;","    this.boundOnConnectionClose = onConnectionClose;","    this.boundOnPendingChange = onPendingChange;","    this.scoreRange = null;","","    // Timestamp when next conn attempt is allowed","    this.nextConnAttemptTime = 0;","    // How long to delay conn attempt by on failure (ms)","    this.nextConnAttemptDelay = 0;","    // Whether we are doing a connection attempt","    this.hasConnectionAttempt = false;","","    this.waitForIdentifiedListeners = [];","","    this.reportInterval = options.reportInterval || DEFAULT_REPORT_INTERVAL;","    if (this.reportInterval > 0 && this.channel.emitConnectionMetrics) {","        this.reportTimer = this.timers.setTimeout(","            onReport, this.reportInterval","        );","    }","","    this.connectionAttemptDelay = this.channel.connectionAttemptDelay ||","        INITIAL_CONN_ATTEMPT_DELAY;","    this.maxConnectionAttemptDelay = this.channel.maxConnectionAttemptDelay ||","        MAX_CONN_ATTEMPT_DELAY;","","    this.setPreferConnectionDirection(options.preferConnectionDirection || 'any');","","    var self = this;","","    function onIdentified(_, conn) {","        self.onIdentified(conn);","    }","","    function onConnectionError(err, conn) {","        self.onConnectionError(err, conn);","    }","","    function onConnectionClose(_, conn) {","        self.onConnectionClose(conn);","    }","","    function onPendingChange(pending, conn) {","        self.onPendingChange(conn, pending);","    }","","    function onReport() {","        if (!self.hostPort) {","            return;","        }","","        var count = self.countConnections('out');","        if (self.channel.emitConnectionMetrics) {","            self.channel.emitFastStat(","                'tchannel.connections.active',","                'gauge',","                count,","                new stat.ConnectionsActiveTags(","                    self.channel.hostPort,","                    self.hostPort","                )","            );","        }","","        self.reportTimer = self.timers.setTimeout(","            onReport, self.reportInterval","        );","    }","}","","inherits(TChannelPeer, EventEmitter);","","TChannelPeer.prototype.DRAIN_GOAL_NOOP = PeerDrain.GOAL_NOOP;","TChannelPeer.prototype.DRAIN_GOAL_CLOSE_DRAINED = PeerDrain.GOAL_CLOSE_DRAINED;","TChannelPeer.prototype.DRAIN_GOAL_CLOSE_PEER = PeerDrain.GOAL_CLOSE_PEER;","","TChannelPeer.prototype.toString =","function toString() {","    var self = this;","    return 'TChannelPeer(' + self.hostPort + ')';","};","","TChannelPeer.prototype.inspect =","function inspectPeer() {","    var self = this;","    return 'TChannelPeer(' + inspect(self.extendLogInfo({})) + ')';","};","","TChannelPeer.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    info.hostPort = self.hostPort;","    info.peerDraining = !!self.draining;","    info.scoreRange = self.scoreRange;","","    if (self.draining) {","        self.draining.extendLogInfo(info);","    }","","    return info;","};","","TChannelPeer.prototype.drain =","function drain(options, callback) {","    var self = this;","    assert(!self.draining, 'cannot double drain a peer');","    self.draining = new PeerDrain(self, options, callback);","    self.draining.start();","};","","TChannelPeer.prototype.clearDrain =","function clearDrain(reason) {","    var self = this;","","    if (self.draining) {","        self.draining.stop(reason);","        self.draining = null;","    }","};","","TChannelPeer.prototype.setMaxTombstoneTTL =","function setMaxTombstoneTTL(ttl) {","    var self = this;","","    for (var i = 0; i < self.connections.length; i++) {","        var conn = self.connections[i];","        conn.ops.setMaxTombstoneTTL(ttl);","    }","};","","TChannelPeer.prototype.setPreferConnectionDirection = function setPreferConnectionDirection(direction) {","    var self = this;","    if (self.preferConnectionDirection === direction) {","        return;","    }","","    self.preferConnectionDirection = direction;","    if (self.preferConnectionDirection === 'out') {","        self.setScoreStrategy(PreferOutgoing);","    } else if (self.preferConnectionDirection === 'in') {","        self.setScoreStrategy(PreferIncoming);","    } else {","        self.setScoreStrategy(NoPreference);","    }","","    self.invalidateScore('setPreferConnectionDirection');","};","","TChannelPeer.prototype.setScoreStrategy = function setScoreStrategy(ScoreStrategy) {","    var self = this;","","    self.scoreStrategy = new ScoreStrategy(self);","};","","TChannelPeer.prototype.invalidateScore = function invalidateScore(reason) {","    var self = this;","","    self.scoreRange = self.computeScoreRange();","","    if (!self.heapElements.length) {","        return;","    }","","    var info = self.channel.peerScoredEvent ? {","        peer: self,","        reason: reason || 'unknown',","        score: 0,","        oldScores: [],","        scores: []","    } : null;","","    var range = self.scoreRange;","    for (var i = 0; i < self.heapElements.length; i++) {","        var el = self.heapElements[i];","        if (info) {","            info.oldScores.push(el.range);","            info.scores.push(range);","        }","        el.rescore();","    }","","    if (info) {","        self.channel.peerScoredEvent.emit(self, info);","    }","};","","TChannelPeer.prototype.isConnected = function isConnected(direction, identified) {","    var self = this;","","    if (identified === undefined) {","        identified = true;","    }","    for (var i = 0; i < self.connections.length; i++) {","        var conn = self.connections[i];","        if (direction && conn.direction !== direction) {","            continue;","        } else if (conn.closing) {","            continue;","        } else if (conn.remoteName !== null || !identified) {","            return true;","        }","    }","","    return false;","};","","TChannelPeer.prototype.closeDrainedConnections =","function closeDrainedConnections(callback) {","    var self = this;","","    var counter = 1;","    var conns = self.connections.slice(0);","","    for (var i = 0; i < conns.length; i++) {","        var conn = conns[i];","        if (conn.draining) {","            counter++;","            conn.close(onClose);","        }","    }","    onClose();","","    function onClose() {","        if (--counter <= 0) {","            if (counter < 0) {","                self.logger.error('closed more peer sockets than expected', {","                    counter: counter","                });","            }","            callback(null);","        }","    }","};","","TChannelPeer.prototype.close =","function close(callback) {","    var self = this;","","    if (self.reportTimer) {","        self.timers.clearTimeout(self.reportTimer);","        self.reportTimer = null;","    }","","    var conns = self.connections.slice(0);","    var counter = conns.length;","    if (counter) {","        for (var i = 0; i < conns.length; i++) {","            conns[i].close(onClose);","        }","    } else {","        callback(null);","    }","    function onClose() {","        if (--counter <= 0) {","            if (counter < 0) {","                self.logger.error('closed more peer sockets than expected', {","                    counter: counter","                });","            }","            callback(null);","        }","    }","};","","TChannelPeer.prototype.getInConnection = function getInConnection(preferIdentified) {","    var self = this;","    var candidate = null;","    for (var i = 0; i < self.connections.length; i++) {","        var conn = self.connections[i];","        if (conn.closing) {","            continue;","        }","        if (!preferIdentified) {","            return conn; // user doesn't care, take first incoming","        }","        if (conn.remoteName) {","            return conn; // user wanted an identified channel, and we found one","        }","        if (!candidate) {","            candidate = conn; // we'll fallback to returning this if we can't find an identified one","        }","    }","    return candidate;","};","","TChannelPeer.prototype.getIdentifiedInConnection = function getIdentifiedInConnection() {","    var self = this;","    return self.getInConnection(true);","};","","TChannelPeer.prototype.getOutConnection = function getOutConnection(preferIdentified) {","    var self = this;","    var candidate = null;","    for (var i = self.connections.length - 1; i >= 0; i--) {","        var conn = self.connections[i];","        if (conn.closing) {","            continue;","        }","        if (!preferIdentified) {","            return conn; // user doesn't care, take last outgoing","        }","        if (conn.remoteName) {","            return conn; // user wanted an identified channel, and we found one","        }","        if (!candidate) {","            candidate = conn; // we'll fallback to returning this if we can't find an identified one","        }","    }","    return candidate;","};","","TChannelPeer.prototype.getIdentifiedOutConnection = function getIdentifiedOutConnection() {","    var self = this;","    return self.getOutConnection(true);","};","","TChannelPeer.prototype.countConnections = function countConnections(direction) {","    var self = this;","    if (!direction) {","        return self.connections.length;","    }","","    var count = 0;","    for (var i = 0; i < self.connections.length; i++) {","        var conn = self.connections[i];","        if (conn.direction === direction) {","            count++;","        }","    }","","    return count;","};","","// ensures that a connection exists","TChannelPeer.prototype.connect =","function connect(outOnly) {","    var self = this;","    var conn = null;","    if (self.preferConnectionDirection === 'in' && !outOnly) {","        conn = self.getIdentifiedInConnection();","    } else {","        conn = self.getIdentifiedOutConnection();","    }","","    if (!conn || (outOnly && conn.direction !== 'out')) {","        var socket = self.makeOutSocket();","        conn = self.makeOutConnection(socket);","        self.addConnection(conn);","    }","    return conn;","};","","// ensures that an outbound connection exists","TChannelPeer.prototype.connectTo = function connectTo() {","    var self = this;","    return self.connect(true);","};","","TChannelPeer.prototype.tryConnect = function tryConnect() {","    var self = this;","","    var connectTime = Date.now();","    if (connectTime < self.nextConnAttemptTime ||","        self.hasConnectionAttempt","    ) {","        return;","    }","    self.hasConnectionAttempt = true;","","    var conn = this.getOutConnection();","    if (!conn || conn.direction !== 'out') {","        conn = this.connectTo();","    }","","    this.waitForIdentified(conn, onIdentified);","","    function onIdentified(err) {","        self.hasConnectionAttempt = false;","","        if (!err) {","            self.nextConnAttemptDelay = 0;","            self.nextConnAttemptTime = 0;","            return;","        }","","        if (self.nextConnAttemptDelay === 0) {","            self.nextConnAttemptDelay = self.connectionAttemptDelay;","        } else {","            self.nextConnAttemptDelay *= CONN_ATTEMPT_DELAY_MULTIPLER;","            // Add some amount of fuzz, +-100ms","            self.nextConnAttemptDelay += Math.floor(100 * (Math.random() - 0.5));","","            self.nextConnAttemptDelay = Math.min(","                self.nextConnAttemptDelay, self.maxConnectionAttemptDelay","            );","        }","","        var afterConnect = Date.now();","        if (self.nextConnAttemptTime < afterConnect) {","            // When in the past set next attempt to now + delay","            self.nextConnAttemptTime = afterConnect + self.nextConnAttemptDelay;","        } else {","            // When in the future; leave it alone.","        }","    }","};","","TChannelPeer.prototype.waitForIdentified =","function waitForIdentified(conn, callback) {","    var self = this;","","    if (typeof conn === 'function' && !callback) {","        callback = conn;","        conn = self.connect();","    }","","    if (conn.closing) {","        callback(conn.closeError);","    } else if (conn.remoteName) {","        callback(null);","    } else {","        return self._waitForIdentified(conn, callback);","    }","","    return -1;","};","","TChannelPeer.prototype._waitForIdentified =","function _waitForIdentified(conn, callback) {","    var self = this;","    var called = false;","","    // Setup an ident descriptor so we can stop waiting for identified later","    var slot = self.getIdentDescriptorSlot();","    var descriptor = WaitForIdentifiedDescriptor.alloc();","    descriptor.reset(","        onConnectionClose,","        onConnectionError,","        onIdentified,","        conn","    );","    self.waitForIdentifiedListeners[slot] = descriptor;","","    self.pendingIdentified++;","    conn.errorEvent.on(onConnectionError);","    conn.closeEvent.on(onConnectionClose);","    conn.identifiedEvent.on(onIdentified);","    self.invalidateScore('waitForIdentified');","","    return slot;","","    function onConnectionError(err) {","        finish(err);","    }","","    function onConnectionClose(err) {","        finish(err);","    }","","    function onIdentified() {","        finish(null);","    }","","    function finish(err) {","        // Multiple events can trigger which causes double callback hilarity.","        if (called) {","            return;","        }","        called = true;","","        self.stopWaitingForIdentified(slot);","        callback(err);","    }","};","","TChannelPeer.prototype.stopWaitingForIdentified =","function stopWaitingForIdentified(slot) {","    assert(typeof slot === 'number', 'stopWaitingForIdentified arg1 should be number');","","    if (slot === -1) {","        // when connection was already identified, `waitForIdentified` will","        // return -1","        return;","    }","","    var descriptor = this.waitForIdentifiedListeners[slot];","    this.waitForIdentifiedListeners[slot] = null;","","    if (!descriptor || !descriptor.conn) {","        return;","    }","","    var conn = descriptor.conn;","","    conn.errorEvent.removeListener(descriptor.error);","    conn.closeEvent.removeListener(descriptor.close);","    conn.identifiedEvent.removeListener(descriptor.ident);","    this.pendingIdentified = 0;","    this.invalidateScore('waitForIdentified > finish');","","    descriptor.free();","};","","TChannelPeer.prototype.getIdentDescriptorSlot =","function getIdentDescriptorSlot() {","    var i;","    for (i = 0; i < this.waitForIdentifiedListeners.length; i++) {","        if (this.waitForIdentifiedListeners[i] === null) {","            return i;","        }","    }","    return this.waitForIdentifiedListeners.length;","};","","TChannelPeer.prototype.request = function peerRequest(options) {","    var self = this;","    options.timeout = options.timeout || Request.defaultTimeout;","    return self.connect().request(options);","};","","TChannelPeer.prototype.addConnection = function addConnection(conn) {","    var self = this;","    // TODO: first approx alert for self.connections.length > 2","    // TODO: second approx support pruning","    if (conn.direction === 'out') {","        self.connections.push(conn);","        self.deltaOutConnectionEvent.emit(self, 1);","    } else {","        self.connections.unshift(conn);","    }","","    conn.errorEvent.on(self.boundOnConnectionError);","    conn.closeEvent.on(self.boundOnConnectionClose);","    conn.ops.pendingChangeEvent.on(self.boundOnPendingChange);","","    self._maybeInvalidateScore('addConnection');","    if (!conn.remoteName) {","        // TODO: could optimize if handler had a way of saying \"would a new","        // identified connection change your Tier?\"","        conn.identifiedEvent.on(self.boundOnIdentified);","    }","","    if (!conn.draining) {","        if (conn.channel.draining) {","            conn.drain(conn.channel.drainReason, null);","        } else if (self.draining) {","            self.draining.drainConnection(conn);","        }","    }","","    return conn;","};","","TChannelPeer.prototype.onIdentified =","function onIdentified(conn) {","    var self = this;","","    conn.identifiedEvent.removeListener(self.boundOnIdentified);","    self._maybeInvalidateScore('addConnection > onIdentified');","};","","TChannelPeer.prototype.onConnectionError =","function onConnectionError(err, conn) {","    var self = this;","    self.removeConnectionFrom(err, conn);","};","","TChannelPeer.prototype.onConnectionClose =","function onConnectionClose(conn) {","    var self = this;","    self.removeConnectionFrom(null, conn);","};","","TChannelPeer.prototype.onPendingChange =","function onPendingChange() {","    var self = this;","","    // TODO: it would be possible to a faster partial-recomputation based only","    // on the change of pending for the this one connection. Note arguments are","    // (conn, pending)","    self._maybeInvalidateScore('pendingChange');","};","","TChannelPeer.prototype.removeConnectionFrom =","function removeConnectionFrom(err, conn) {","    var self = this;","","    conn.closeEvent.removeListener(self.boundOnConnectionClose);","    conn.errorEvent.removeListener(self.boundOnConnectionError);","    conn.identifiedEvent.removeListener(self.boundOnIdentified);","    conn.ops.pendingChangeEvent.removeListener(self.boundOnPendingChange);","","    if (err) {","        var loggerInfo = conn.extendLogInfo({","            error: err","        });","        var codeName = errors.classify(err);","        if (codeName === 'Timeout' ||","            codeName === 'NetworkError') {","            self.logger.warn('Got a connection error', loggerInfo);","        } else {","            self.logger.error('Got an unexpected connection error', loggerInfo);","        }","    }","","    self.removeConnection(conn);","};","","TChannelPeer.prototype.removeConnection = function removeConnection(conn) {","    var self = this;","","    var ret = null;","    var isRemoved = false;","","    var index = self.connections ? self.connections.indexOf(conn) : -1;","    if (index !== -1) {","        ret = self.connections.splice(index, 1)[0];","        isRemoved = conn.direction === 'out';","    }","","    self._maybeInvalidateScore('removeConnection');","","    self.removeConnectionEvent.emit(self, conn);","    if (isRemoved) {","        self.deltaOutConnectionEvent.emit(self, -1);","    }","    return ret;","};","","TChannelPeer.prototype.makeOutSocket = function makeOutSocket() {","    var self = this;","","    var reason = HostPort.validateHostPort(self.hostPort, false);","    if (reason) {","        assert(false, reason);","    }","","    var parts = self.hostPort.split(':');","    var host = parts[0];","    var port = parseInt(parts[1], 10);","","    var socket = net.createConnection({","        host: host,","        port: port","    });","    return socket;","};","","TChannelPeer.prototype.makeOutConnection = function makeOutConnection(socket) {","    var self = this;","    var chan = self.channel.topChannel || self.channel;","    var conn = new TChannelConnection(","        chan, socket, 'out', self.hostPort, this.socketInitTimeout","    );","    self.allocConnectionEvent.emit(self, conn);","    return conn;","};","","// Returns a range from 0 to 1, where it is preferable to use","// a peer with a higher score over one with a lower score.","// This range is divided among an infinite set of subranges corresponding","// to peers with the same number of pending requests.","// So, the range (1/2, 1] is reserved for peers with 0 pending connections.","// The range (1/4, 1/2] is reserved for peers with 1 pending connections.","// The range (1/8, 1/4] is reserved for peers with 2 pending connections.","// Ad nauseam.","// Within each equivalence class, each peer receives a uniform random","// value.","//","// The previous score was a weighted random variable:","//   random() ** (1 + pending)","// This had the attribute that a less loaded peer was merely more likely to","// be chosen over a more loaded peer.","// We observed with the introduction of a heap, that a less favored peer","// would have its score less frequently re-evaluated.","// An emergent behavior was that scores would, over time, be squeezed","// toward zero and the least favored peer would remain the least favored","// for ever increasing durations.","//","// This remains true with this algorithm, within each equivalence class.","TChannelPeer.prototype.pendingWeightedRange = function pendingWeightedRange() {","    var self = this;","","    var pending = self.countPending();","    var max = Math.pow(0.5, pending);","    var min = max / 2;","","    return new Range(min, max);","};","","TChannelPeer.prototype.countPending = function countPending() {","    var self = this;","","    var pending = self.pendingIdentified;","","    for (var index = 0; index < self.connections.length; index++) {","        var connPending = self.connections[index].ops.getPending();","","        pending += connPending.out;","        pending += connPending.errors;","    }","","    return pending;","};","","// TODO: on connection #getScore impacting event","// - on identified","","// Called on connection change event","TChannelPeer.prototype._maybeInvalidateScore =","function _maybeInvalidateScore(reason) {","    var self = this;","","    if (self.scoreStrategy.getTier() !== self.scoreStrategy.lastTier) {","        self.invalidateScore(reason);","    }","};","","TChannelPeer.prototype.getScoreRange = function getScoreRange() {","    var self = this;","","    return self.scoreRange;","};","","TChannelPeer.prototype.computeScoreRange = function computeScoreRange() {","    var self = this;","","    var range = self.scoreStrategy.getScoreRange();","    range.multiply(self.pendingWeightedRange());","","    return range;","};","","TChannelPeer.prototype.getScore = function getScore() {","    // This is INLINED into peer_heap.js#115","    var self = this;","    var diff = self.scoreRange.hi - self.scoreRange.lo;","    var rand = self.random();","    if (rand === 0) {","        rand = 1;","    }","    return self.scoreRange.lo + diff * rand;","};","","module.exports = TChannelPeer;","","function WaitForIdentifiedDescriptor(close, error, ident, conn) {","    this.close = null;","    this.error = null;","    this.ident = null;","    this.conn = null;","}","","WaitForIdentifiedDescriptor.prototype.reset =","function reset(close, error, ident, conn) {","    this.close = close;","    this.error = error;","    this.ident = ident;","    this.conn = conn;","};","","WaitForIdentifiedDescriptor.prototype.clear =","function clear() {","    this.close = null;","    this.error = null;","    this.ident = null;","    this.conn = null;","};","","ObjectPool.setup({Type: WaitForIdentifiedDescriptor, maxSize: 100});",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"41":1,"42":1,"43":1,"44":1,"47":1,"48":0,"50":0,"51":0,"53":0,"54":0,"55":0,"56":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"76":0,"78":0,"80":0,"82":0,"84":0,"85":0,"86":0,"91":0,"93":0,"96":0,"98":0,"100":1,"101":0,"104":1,"105":0,"108":1,"109":0,"112":1,"113":0,"116":1,"117":0,"118":0,"121":0,"122":0,"123":0,"134":0,"140":1,"142":1,"143":1,"144":1,"146":1,"148":0,"149":0,"152":1,"154":0,"155":0,"158":1,"160":0,"162":0,"163":0,"164":0,"166":0,"167":0,"170":0,"173":1,"175":0,"176":0,"177":0,"178":0,"181":1,"183":0,"185":0,"186":0,"187":0,"191":1,"193":0,"195":0,"196":0,"197":0,"201":1,"202":0,"203":0,"204":0,"207":0,"208":0,"209":0,"210":0,"211":0,"213":0,"216":0,"219":1,"220":0,"222":0,"225":1,"226":0,"228":0,"230":0,"231":0,"234":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"249":0,"252":0,"253":0,"257":1,"258":0,"260":0,"261":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"274":0,"277":1,"279":0,"281":0,"282":0,"284":0,"285":0,"286":0,"287":0,"288":0,"291":0,"293":1,"294":0,"295":0,"296":0,"300":0,"305":1,"307":0,"309":0,"310":0,"311":0,"314":0,"315":0,"316":0,"317":0,"318":0,"321":0,"323":1,"324":0,"325":0,"326":0,"330":0,"335":1,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"343":0,"344":0,"346":0,"347":0,"349":0,"350":0,"353":0,"356":1,"357":0,"358":0,"361":1,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"369":0,"370":0,"372":0,"373":0,"375":0,"376":0,"379":0,"382":1,"383":0,"384":0,"387":1,"388":0,"389":0,"390":0,"393":0,"394":0,"395":0,"396":0,"397":0,"401":0,"405":1,"407":0,"408":0,"409":0,"410":0,"412":0,"415":0,"416":0,"417":0,"418":0,"420":0,"424":1,"425":0,"426":0,"429":1,"430":0,"432":0,"433":0,"436":0,"438":0,"440":0,"441":0,"442":0,"445":0,"447":1,"448":0,"450":0,"451":0,"452":0,"453":0,"456":0,"457":0,"459":0,"461":0,"463":0,"468":0,"469":0,"471":0,"478":1,"480":0,"482":0,"483":0,"484":0,"487":0,"488":0,"489":0,"490":0,"492":0,"495":0,"498":1,"500":0,"501":0,"504":0,"505":0,"506":0,"512":0,"514":0,"515":0,"516":0,"517":0,"518":0,"520":0,"522":1,"523":0,"526":1,"527":0,"530":1,"531":0,"534":1,"536":0,"537":0,"539":0,"541":0,"542":0,"546":1,"548":0,"550":0,"553":0,"556":0,"557":0,"559":0,"560":0,"563":0,"565":0,"566":0,"567":0,"568":0,"569":0,"571":0,"574":1,"576":0,"577":0,"578":0,"579":0,"582":0,"585":1,"586":0,"587":0,"588":0,"591":1,"592":0,"595":0,"596":0,"597":0,"599":0,"602":0,"603":0,"604":0,"606":0,"607":0,"610":0,"613":0,"614":0,"615":0,"616":0,"617":0,"621":0,"624":1,"626":0,"628":0,"629":0,"632":1,"634":0,"635":0,"638":1,"640":0,"641":0,"644":1,"646":0,"651":0,"654":1,"656":0,"658":0,"659":0,"660":0,"661":0,"663":0,"664":0,"667":0,"668":0,"670":0,"672":0,"676":0,"679":1,"680":0,"682":0,"683":0,"685":0,"686":0,"687":0,"688":0,"691":0,"693":0,"694":0,"695":0,"697":0,"700":1,"701":0,"703":0,"704":0,"705":0,"708":0,"709":0,"710":0,"712":0,"716":0,"719":1,"720":0,"721":0,"722":0,"725":0,"726":0,"751":1,"752":0,"754":0,"755":0,"756":0,"758":0,"761":1,"762":0,"764":0,"766":0,"767":0,"769":0,"770":0,"773":0,"780":1,"782":0,"784":0,"785":0,"789":1,"790":0,"792":0,"795":1,"796":0,"798":0,"799":0,"801":0,"804":1,"806":0,"807":0,"808":0,"809":0,"810":0,"812":0,"815":1,"817":1,"818":0,"819":0,"820":0,"821":0,"824":1,"826":0,"827":0,"828":0,"829":0,"832":1,"834":0,"835":0,"836":0,"837":0,"840":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer_score_strategies.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer_score_strategies.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":1,"33":1,"34":1,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0,0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"PreferOutgoing","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":30}}},"2":{"name":"getTier","line":39,"loc":{"start":{"line":39,"column":35},"end":{"line":39,"column":54}}},"3":{"name":"getScoreRange","line":54,"loc":{"start":{"line":54,"column":41},"end":{"line":54,"column":66}}},"4":{"name":"NoPreference","line":75,"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":28}}},"5":{"name":"getTier","line":84,"loc":{"start":{"line":84,"column":33},"end":{"line":84,"column":52}}},"6":{"name":"getScoreRange","line":96,"loc":{"start":{"line":96,"column":39},"end":{"line":96,"column":64}}},"7":{"name":"PreferIncoming","line":115,"loc":{"start":{"line":115,"column":0},"end":{"line":115,"column":30}}},"8":{"name":"getTier","line":125,"loc":{"start":{"line":125,"column":35},"end":{"line":125,"column":54}}},"9":{"name":"getScoreRange","line":140,"loc":{"start":{"line":140,"column":41},"end":{"line":140,"column":66}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":47}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":43}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":47}},"5":{"start":{"line":29,"column":0},"end":{"line":32,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":21}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":35}},"8":{"start":{"line":34,"column":0},"end":{"line":34,"column":31}},"9":{"start":{"line":35,"column":0},"end":{"line":35,"column":33}},"10":{"start":{"line":36,"column":0},"end":{"line":36,"column":34}},"11":{"start":{"line":37,"column":0},"end":{"line":37,"column":34}},"12":{"start":{"line":39,"column":0},"end":{"line":52,"column":2}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":45}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":57}},"15":{"start":{"line":43,"column":4},"end":{"line":51,"column":5}},"16":{"start":{"line":44,"column":8},"end":{"line":44,"column":42}},"17":{"start":{"line":45,"column":11},"end":{"line":51,"column":5}},"18":{"start":{"line":46,"column":8},"end":{"line":46,"column":44}},"19":{"start":{"line":47,"column":11},"end":{"line":51,"column":5}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":45}},"21":{"start":{"line":50,"column":8},"end":{"line":50,"column":45}},"22":{"start":{"line":54,"column":0},"end":{"line":73,"column":2}},"23":{"start":{"line":59,"column":4},"end":{"line":59,"column":30}},"24":{"start":{"line":60,"column":4},"end":{"line":60,"column":25}},"25":{"start":{"line":61,"column":4},"end":{"line":72,"column":5}},"26":{"start":{"line":65,"column":12},"end":{"line":65,"column":39}},"27":{"start":{"line":69,"column":12},"end":{"line":69,"column":39}},"28":{"start":{"line":71,"column":12},"end":{"line":71,"column":39}},"29":{"start":{"line":75,"column":0},"end":{"line":78,"column":1}},"30":{"start":{"line":76,"column":4},"end":{"line":76,"column":21}},"31":{"start":{"line":77,"column":4},"end":{"line":77,"column":35}},"32":{"start":{"line":80,"column":0},"end":{"line":80,"column":29}},"33":{"start":{"line":81,"column":0},"end":{"line":81,"column":27}},"34":{"start":{"line":82,"column":0},"end":{"line":82,"column":28}},"35":{"start":{"line":84,"column":0},"end":{"line":94,"column":2}},"36":{"start":{"line":85,"column":4},"end":{"line":85,"column":54}},"37":{"start":{"line":87,"column":4},"end":{"line":93,"column":5}},"38":{"start":{"line":88,"column":8},"end":{"line":88,"column":40}},"39":{"start":{"line":89,"column":11},"end":{"line":93,"column":5}},"40":{"start":{"line":90,"column":8},"end":{"line":90,"column":38}},"41":{"start":{"line":92,"column":8},"end":{"line":92,"column":39}},"42":{"start":{"line":96,"column":0},"end":{"line":113,"column":2}},"43":{"start":{"line":101,"column":4},"end":{"line":101,"column":30}},"44":{"start":{"line":102,"column":4},"end":{"line":102,"column":25}},"45":{"start":{"line":103,"column":4},"end":{"line":112,"column":5}},"46":{"start":{"line":107,"column":12},"end":{"line":107,"column":39}},"47":{"start":{"line":109,"column":12},"end":{"line":109,"column":39}},"48":{"start":{"line":111,"column":12},"end":{"line":111,"column":39}},"49":{"start":{"line":115,"column":0},"end":{"line":118,"column":1}},"50":{"start":{"line":116,"column":4},"end":{"line":116,"column":21}},"51":{"start":{"line":117,"column":4},"end":{"line":117,"column":35}},"52":{"start":{"line":120,"column":0},"end":{"line":120,"column":31}},"53":{"start":{"line":121,"column":0},"end":{"line":121,"column":33}},"54":{"start":{"line":122,"column":0},"end":{"line":122,"column":34}},"55":{"start":{"line":123,"column":0},"end":{"line":123,"column":34}},"56":{"start":{"line":125,"column":0},"end":{"line":138,"column":2}},"57":{"start":{"line":126,"column":4},"end":{"line":126,"column":47}},"58":{"start":{"line":127,"column":4},"end":{"line":127,"column":55}},"59":{"start":{"line":129,"column":4},"end":{"line":137,"column":5}},"60":{"start":{"line":130,"column":8},"end":{"line":130,"column":42}},"61":{"start":{"line":131,"column":11},"end":{"line":137,"column":5}},"62":{"start":{"line":132,"column":8},"end":{"line":132,"column":44}},"63":{"start":{"line":133,"column":11},"end":{"line":137,"column":5}},"64":{"start":{"line":134,"column":8},"end":{"line":134,"column":45}},"65":{"start":{"line":136,"column":8},"end":{"line":136,"column":45}},"66":{"start":{"line":140,"column":0},"end":{"line":159,"column":2}},"67":{"start":{"line":145,"column":4},"end":{"line":145,"column":30}},"68":{"start":{"line":146,"column":4},"end":{"line":146,"column":25}},"69":{"start":{"line":147,"column":4},"end":{"line":158,"column":5}},"70":{"start":{"line":151,"column":12},"end":{"line":151,"column":39}},"71":{"start":{"line":155,"column":12},"end":{"line":155,"column":39}},"72":{"start":{"line":157,"column":12},"end":{"line":157,"column":39}}},"branchMap":{"1":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"2":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":15}},{"start":{"line":43,"column":19},"end":{"line":43,"column":27}}]},"3":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":11},"end":{"line":45,"column":11}},{"start":{"line":45,"column":11},"end":{"line":45,"column":11}}]},"4":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":15},"end":{"line":45,"column":23}},{"start":{"line":45,"column":27},"end":{"line":45,"column":54}}]},"5":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":11},"end":{"line":47,"column":11}},{"start":{"line":47,"column":11},"end":{"line":47,"column":11}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":16}},{"start":{"line":64,"column":8},"end":{"line":65,"column":39}},{"start":{"line":66,"column":8},"end":{"line":66,"column":42}},{"start":{"line":68,"column":8},"end":{"line":69,"column":39}},{"start":{"line":70,"column":8},"end":{"line":71,"column":39}}]},"7":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"8":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":11},"end":{"line":89,"column":11}},{"start":{"line":89,"column":11},"end":{"line":89,"column":11}}]},"9":{"line":103,"type":"switch","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":16}},{"start":{"line":106,"column":8},"end":{"line":107,"column":39}},{"start":{"line":108,"column":8},"end":{"line":109,"column":39}},{"start":{"line":110,"column":8},"end":{"line":111,"column":39}}]},"10":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"11":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":15}},{"start":{"line":129,"column":19},"end":{"line":129,"column":27}}]},"12":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":11},"end":{"line":131,"column":11}},{"start":{"line":131,"column":11},"end":{"line":131,"column":11}}]},"13":{"line":131,"type":"binary-expr","locations":[{"start":{"line":131,"column":15},"end":{"line":131,"column":22}},{"start":{"line":131,"column":26},"end":{"line":131,"column":51}}]},"14":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":11},"end":{"line":133,"column":11}},{"start":{"line":133,"column":11},"end":{"line":133,"column":11}}]},"15":{"line":147,"type":"switch","locations":[{"start":{"line":148,"column":8},"end":{"line":148,"column":16}},{"start":{"line":150,"column":8},"end":{"line":151,"column":39}},{"start":{"line":152,"column":8},"end":{"line":152,"column":42}},{"start":{"line":154,"column":8},"end":{"line":155,"column":39}},{"start":{"line":156,"column":8},"end":{"line":157,"column":39}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var Range = require('./range');","","module.exports.PreferOutgoing = PreferOutgoing;","module.exports.NoPreference = NoPreference;","module.exports.PreferIncoming = PreferIncoming;","","function PreferOutgoing(peer) {","    this.peer = peer;","    this.lastTier = this.getTier();","}","","PreferOutgoing.UNCONNECTED = 0;","PreferOutgoing.ONLY_INCOMING = 1;","PreferOutgoing.FRESH_OUTGOING = 2;","PreferOutgoing.READY_OUTGOING = 3;","","PreferOutgoing.prototype.getTier = function getTier() {","    var inconn = this.peer.getInConnection();","    var outconn = this.peer.getIdentifiedOutConnection();","","    if (!inconn && !outconn) {","        return PreferOutgoing.UNCONNECTED;","    } else if (!outconn || outconn.direction !== 'out') {","        return PreferOutgoing.ONLY_INCOMING;","    } else if (outconn.remoteName === null) {","        return PreferOutgoing.FRESH_OUTGOING;","    } else {","        return PreferOutgoing.READY_OUTGOING;","    }","};","","PreferOutgoing.prototype.getScoreRange = function getScoreRange() {","    // space:","    //   [0.1, 0.2)  peers with zero connections","    //   [0.2, 0.4)  peers with no identified outgoing connection","    //   [0.4, 1.0)  identified outgoing connections","    var tier = this.getTier();","    this.lastTier = tier;","    switch (tier) {","        default:","            /* falls through */","        case PreferOutgoing.UNCONNECTED:","            return new Range(0.1, 0.2);","        case PreferOutgoing.ONLY_INCOMING:","            /* falls through */","        case PreferOutgoing.FRESH_OUTGOING:","            return new Range(0.2, 0.4);","        case PreferOutgoing.READY_OUTGOING:","            return new Range(0.4, 1.0);","    }","};","","function NoPreference(peer) {","    this.peer = peer;","    this.lastTier = this.getTier();","}","","NoPreference.UNCONNECTED = 0;","NoPreference.CONNECTED = 1;","NoPreference.IDENTIFIED = 2;","","NoPreference.prototype.getTier = function getTier() {","    var conn = this.peer.getIdentifiedOutConnection();","","    if (!conn) {","        return NoPreference.UNCONNECTED;","    } else if (conn.remoteName === null) {","        return NoPreference.CONNECTED;","    } else {","        return NoPreference.IDENTIFIED;","    }","};","","NoPreference.prototype.getScoreRange = function getScoreRange() {","    // space:","    //   [0.1, 0.2)  peers with zero connections","    //   (0.2, 0.4]  peers with no identified connection","    //   (0.4, 1.0]  identified connections","    var tier = this.getTier();","    this.lastTier = tier;","    switch (tier) {","        default:","            /* falls through */","        case NoPreference.UNCONNECTED:","            return new Range(0.1, 0.2);","        case NoPreference.CONNECTED:","            return new Range(0.2, 0.4);","        case NoPreference.IDENTIFIED:","            return new Range(0.4, 1.0);","    }","};","","function PreferIncoming(peer) {","    this.peer = peer;","    this.lastTier = this.getTier();","}","","PreferIncoming.UNCONNECTED = 0;","PreferIncoming.ONLY_OUTGOING = 1;","PreferIncoming.FRESH_INCOMING = 2;","PreferIncoming.READY_INCOMING = 3;","","PreferIncoming.prototype.getTier = function getTier() {","    var outconn = this.peer.getOutConnection();","    var inconn = this.peer.getIdentifiedInConnection();","","    if (!inconn && !outconn) {","        return PreferIncoming.UNCONNECTED;","    } else if (!inconn || inconn.direction !== 'in') {","        return PreferIncoming.ONLY_OUTGOING;","    } else if (inconn.remoteName === null) {","        return PreferIncoming.FRESH_INCOMING;","    } else {","        return PreferIncoming.READY_INCOMING;","    }","};","","PreferIncoming.prototype.getScoreRange = function getScoreRange() {","    // space:","    //   [0.1, 0.2)  peers with zero connections","    //   [0.2, 0.4)  peers with no identified incoming connection","    //   [0.4, 1.0)  identified incoming connections","    var tier = this.getTier();","    this.lastTier = tier;","    switch (tier) {","        default:","            /* falls through */","        case PreferIncoming.UNCONNECTED:","            return new Range(0.1, 0.2);","        case PreferIncoming.ONLY_OUTGOING:","            /* falls through */","        case PreferIncoming.FRESH_INCOMING:","            return new Range(0.2, 0.4);","        case PreferIncoming.READY_INCOMING:","            return new Range(0.4, 1.0);","    }","};",""],"l":{"23":1,"25":1,"26":1,"27":1,"29":1,"30":0,"31":0,"34":1,"35":1,"36":1,"37":1,"39":1,"40":0,"41":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"50":0,"54":1,"59":0,"60":0,"61":0,"65":0,"69":0,"71":0,"75":1,"76":0,"77":0,"80":1,"81":1,"82":1,"84":1,"85":0,"87":0,"88":0,"89":0,"90":0,"92":0,"96":1,"101":0,"102":0,"103":0,"107":0,"109":0,"111":0,"115":1,"116":0,"117":0,"120":1,"121":1,"122":1,"123":1,"125":1,"126":0,"127":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"136":0,"140":1,"145":0,"146":0,"147":0,"151":0,"155":0,"157":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/range.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/range.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Range","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":23}}},"2":{"name":"multiply","line":31,"loc":{"start":{"line":31,"column":27},"end":{"line":31,"column":52}}},"3":{"name":"toString","line":38,"loc":{"start":{"line":38,"column":27},"end":{"line":38,"column":47}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":23}},"2":{"start":{"line":25,"column":0},"end":{"line":28,"column":1}},"3":{"start":{"line":26,"column":4},"end":{"line":26,"column":17}},"4":{"start":{"line":27,"column":4},"end":{"line":27,"column":17}},"5":{"start":{"line":31,"column":0},"end":{"line":35,"column":2}},"6":{"start":{"line":32,"column":4},"end":{"line":32,"column":33}},"7":{"start":{"line":33,"column":4},"end":{"line":33,"column":42}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":33}},"9":{"start":{"line":37,"column":0},"end":{"line":40,"column":2}},"10":{"start":{"line":39,"column":4},"end":{"line":39,"column":53}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = Range;","","function Range(lo, hi) {","    this.lo = lo;","    this.hi = hi;","}","","// Scale this range by another range","Range.prototype.multiply = function multiply(range) {","    var diff = this.hi - this.lo;","    this.hi = this.lo + (range.hi * diff);","    this.lo += (range.lo * diff);","};","","Range.prototype.inspect =","Range.prototype.toString = function toString() {","    return 'Range(' + this.lo + ', ' + this.hi + ')';","};","",""],"l":{"23":1,"25":1,"26":0,"27":0,"31":1,"32":0,"33":0,"34":0,"37":1,"39":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/drain.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/drain.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":1},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"PeerDrain","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":44}}},"2":{"name":"thenFinish","line":66,"loc":{"start":{"line":66,"column":4},"end":{"line":66,"column":29}}},"3":{"name":"extendLogInfo","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":29}}},"4":{"name":"start","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":17}}},"5":{"name":"drainDone","line":115,"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":25}}},"6":{"name":"drainTimedOut","line":120,"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":29}}},"7":{"name":"finish","line":132,"loc":{"start":{"line":132,"column":4},"end":{"line":132,"column":30}}},"8":{"name":"stop","line":160,"loc":{"start":{"line":160,"column":0},"end":{"line":160,"column":22}}},"9":{"name":"thenCloseDrained","line":180,"loc":{"start":{"line":180,"column":0},"end":{"line":180,"column":31}}},"10":{"name":"thenClosePeer","line":203,"loc":{"start":{"line":203,"column":0},"end":{"line":203,"column":28}}},"11":{"name":"finish","line":226,"loc":{"start":{"line":226,"column":0},"end":{"line":226,"column":26}}},"12":{"name":"drainConnection","line":240,"loc":{"start":{"line":240,"column":0},"end":{"line":240,"column":31}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":33}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":57}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":23}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":53}},"7":{"start":{"line":30,"column":0},"end":{"line":30,"column":35}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":32}},"9":{"start":{"line":33,"column":0},"end":{"line":33,"column":50}},"10":{"start":{"line":34,"column":0},"end":{"line":34,"column":44}},"11":{"start":{"line":38,"column":0},"end":{"line":70,"column":1}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":55}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":43}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":51}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":76}},"16":{"start":{"line":44,"column":4},"end":{"line":48,"column":45}},"17":{"start":{"line":50,"column":4},"end":{"line":50,"column":52}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":24}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":21}},"20":{"start":{"line":53,"column":4},"end":{"line":53,"column":40}},"21":{"start":{"line":54,"column":4},"end":{"line":54,"column":33}},"22":{"start":{"line":55,"column":4},"end":{"line":55,"column":49}},"23":{"start":{"line":56,"column":4},"end":{"line":56,"column":37}},"24":{"start":{"line":57,"column":4},"end":{"line":57,"column":22}},"25":{"start":{"line":58,"column":4},"end":{"line":58,"column":24}},"26":{"start":{"line":59,"column":4},"end":{"line":59,"column":23}},"27":{"start":{"line":60,"column":4},"end":{"line":60,"column":23}},"28":{"start":{"line":61,"column":4},"end":{"line":61,"column":24}},"29":{"start":{"line":62,"column":4},"end":{"line":62,"column":33}},"30":{"start":{"line":64,"column":4},"end":{"line":64,"column":20}},"31":{"start":{"line":66,"column":4},"end":{"line":69,"column":5}},"32":{"start":{"line":67,"column":8},"end":{"line":67,"column":44}},"33":{"start":{"line":68,"column":8},"end":{"line":68,"column":30}},"34":{"start":{"line":72,"column":0},"end":{"line":86,"column":2}},"35":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}},"36":{"start":{"line":76,"column":4},"end":{"line":76,"column":31}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":35}},"38":{"start":{"line":78,"column":4},"end":{"line":78,"column":37}},"39":{"start":{"line":79,"column":4},"end":{"line":79,"column":41}},"40":{"start":{"line":80,"column":4},"end":{"line":80,"column":41}},"41":{"start":{"line":81,"column":4},"end":{"line":81,"column":41}},"42":{"start":{"line":82,"column":4},"end":{"line":82,"column":43}},"43":{"start":{"line":83,"column":4},"end":{"line":83,"column":61}},"44":{"start":{"line":85,"column":4},"end":{"line":85,"column":16}},"45":{"start":{"line":88,"column":0},"end":{"line":157,"column":2}},"46":{"start":{"line":90,"column":4},"end":{"line":90,"column":20}},"47":{"start":{"line":92,"column":4},"end":{"line":92,"column":47}},"48":{"start":{"line":93,"column":4},"end":{"line":93,"column":41}},"49":{"start":{"line":95,"column":4},"end":{"line":95,"column":21}},"50":{"start":{"line":96,"column":4},"end":{"line":102,"column":5}},"51":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"52":{"start":{"line":98,"column":12},"end":{"line":98,"column":57}},"53":{"start":{"line":100,"column":8},"end":{"line":100,"column":76}},"54":{"start":{"line":101,"column":8},"end":{"line":101,"column":27}},"55":{"start":{"line":104,"column":4},"end":{"line":104,"column":42}},"56":{"start":{"line":105,"column":4},"end":{"line":105,"column":28}},"57":{"start":{"line":107,"column":4},"end":{"line":109,"column":5}},"58":{"start":{"line":108,"column":8},"end":{"line":108,"column":55}},"59":{"start":{"line":111,"column":4},"end":{"line":113,"column":7}},"60":{"start":{"line":115,"column":4},"end":{"line":118,"column":5}},"61":{"start":{"line":116,"column":8},"end":{"line":116,"column":44}},"62":{"start":{"line":117,"column":8},"end":{"line":117,"column":26}},"63":{"start":{"line":120,"column":4},"end":{"line":130,"column":5}},"64":{"start":{"line":121,"column":8},"end":{"line":123,"column":9}},"65":{"start":{"line":122,"column":12},"end":{"line":122,"column":19}},"66":{"start":{"line":124,"column":8},"end":{"line":124,"column":44}},"67":{"start":{"line":125,"column":8},"end":{"line":129,"column":17}},"68":{"start":{"line":132,"column":4},"end":{"line":156,"column":5}},"69":{"start":{"line":133,"column":8},"end":{"line":138,"column":9}},"70":{"start":{"line":134,"column":12},"end":{"line":134,"column":52}},"71":{"start":{"line":135,"column":12},"end":{"line":137,"column":13}},"72":{"start":{"line":136,"column":16},"end":{"line":136,"column":34}},"73":{"start":{"line":140,"column":8},"end":{"line":155,"column":9}},"74":{"start":{"line":142,"column":16},"end":{"line":142,"column":38}},"75":{"start":{"line":143,"column":16},"end":{"line":143,"column":22}},"76":{"start":{"line":146,"column":16},"end":{"line":146,"column":43}},"77":{"start":{"line":147,"column":16},"end":{"line":147,"column":22}},"78":{"start":{"line":150,"column":16},"end":{"line":150,"column":40}},"79":{"start":{"line":151,"column":16},"end":{"line":151,"column":22}},"80":{"start":{"line":154,"column":16},"end":{"line":154,"column":73}},"81":{"start":{"line":159,"column":0},"end":{"line":177,"column":2}},"82":{"start":{"line":161,"column":4},"end":{"line":161,"column":20}},"83":{"start":{"line":163,"column":4},"end":{"line":167,"column":7}},"84":{"start":{"line":169,"column":4},"end":{"line":169,"column":47}},"85":{"start":{"line":171,"column":4},"end":{"line":174,"column":5}},"86":{"start":{"line":172,"column":8},"end":{"line":172,"column":53}},"87":{"start":{"line":173,"column":8},"end":{"line":173,"column":26}},"88":{"start":{"line":176,"column":4},"end":{"line":176,"column":25}},"89":{"start":{"line":179,"column":0},"end":{"line":200,"column":2}},"90":{"start":{"line":181,"column":4},"end":{"line":181,"column":20}},"91":{"start":{"line":183,"column":4},"end":{"line":197,"column":5}},"92":{"start":{"line":184,"column":8},"end":{"line":186,"column":12}},"93":{"start":{"line":188,"column":8},"end":{"line":196,"column":9}},"94":{"start":{"line":189,"column":12},"end":{"line":191,"column":22}},"95":{"start":{"line":193,"column":12},"end":{"line":195,"column":22}},"96":{"start":{"line":199,"column":4},"end":{"line":199,"column":55}},"97":{"start":{"line":202,"column":0},"end":{"line":223,"column":2}},"98":{"start":{"line":204,"column":4},"end":{"line":204,"column":20}},"99":{"start":{"line":206,"column":4},"end":{"line":220,"column":5}},"100":{"start":{"line":207,"column":8},"end":{"line":209,"column":12}},"101":{"start":{"line":211,"column":8},"end":{"line":219,"column":9}},"102":{"start":{"line":212,"column":12},"end":{"line":214,"column":22}},"103":{"start":{"line":216,"column":12},"end":{"line":218,"column":22}},"104":{"start":{"line":222,"column":4},"end":{"line":222,"column":37}},"105":{"start":{"line":225,"column":0},"end":{"line":237,"column":2}},"106":{"start":{"line":227,"column":4},"end":{"line":227,"column":20}},"107":{"start":{"line":229,"column":4},"end":{"line":236,"column":5}},"108":{"start":{"line":230,"column":8},"end":{"line":230,"column":30}},"109":{"start":{"line":232,"column":8},"end":{"line":235,"column":9}},"110":{"start":{"line":233,"column":12},"end":{"line":233,"column":31}},"111":{"start":{"line":234,"column":12},"end":{"line":234,"column":33}},"112":{"start":{"line":239,"column":0},"end":{"line":248,"column":2}},"113":{"start":{"line":241,"column":4},"end":{"line":241,"column":20}},"114":{"start":{"line":243,"column":4},"end":{"line":247,"column":5}},"115":{"start":{"line":245,"column":8},"end":{"line":245,"column":31}},"116":{"start":{"line":246,"column":8},"end":{"line":246,"column":53}},"117":{"start":{"line":250,"column":0},"end":{"line":250,"column":37}}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":15},"end":{"line":39,"column":38}},{"start":{"line":39,"column":42},"end":{"line":39,"column":54}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":11},"end":{"line":44,"column":24}},{"start":{"line":45,"column":11},"end":{"line":45,"column":37}},{"start":{"line":46,"column":11},"end":{"line":46,"column":46}},{"start":{"line":47,"column":11},"end":{"line":47,"column":43}}]},"3":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":16},"end":{"line":50,"column":28}},{"start":{"line":50,"column":32},"end":{"line":50,"column":51}}]},"4":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":19},"end":{"line":53,"column":34}},{"start":{"line":53,"column":38},"end":{"line":53,"column":39}}]},"5":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":21},"end":{"line":55,"column":38}},{"start":{"line":55,"column":42},"end":{"line":55,"column":48}}]},"6":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":20},"end":{"line":56,"column":28}},{"start":{"line":56,"column":32},"end":{"line":56,"column":36}}]},"7":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":24},"end":{"line":83,"column":36}},{"start":{"line":83,"column":40},"end":{"line":83,"column":60}}]},"8":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"9":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"10":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":8}},{"start":{"line":121,"column":8},"end":{"line":121,"column":8}}]},"11":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]},"12":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":12},"end":{"line":135,"column":12}},{"start":{"line":135,"column":12},"end":{"line":135,"column":12}}]},"13":{"line":140,"type":"switch","locations":[{"start":{"line":141,"column":12},"end":{"line":143,"column":22}},{"start":{"line":145,"column":12},"end":{"line":147,"column":22}},{"start":{"line":149,"column":12},"end":{"line":151,"column":22}},{"start":{"line":153,"column":12},"end":{"line":154,"column":73}}]},"14":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":28},"end":{"line":154,"column":31}},{"start":{"line":154,"column":35},"end":{"line":154,"column":66}}]},"15":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":4},"end":{"line":171,"column":4}},{"start":{"line":171,"column":4},"end":{"line":171,"column":4}}]},"16":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":4},"end":{"line":183,"column":4}},{"start":{"line":183,"column":4},"end":{"line":183,"column":4}}]},"17":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":8},"end":{"line":188,"column":8}},{"start":{"line":188,"column":8},"end":{"line":188,"column":8}}]},"18":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":206,"column":4}},{"start":{"line":206,"column":4},"end":{"line":206,"column":4}}]},"19":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"20":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":4},"end":{"line":229,"column":4}},{"start":{"line":229,"column":4},"end":{"line":229,"column":4}}]},"21":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":8}},{"start":{"line":232,"column":8},"end":{"line":232,"column":8}}]},"22":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":4},"end":{"line":243,"column":4}},{"start":{"line":243,"column":4},"end":{"line":243,"column":4}}]},"23":{"line":243,"type":"binary-expr","locations":[{"start":{"line":243,"column":8},"end":{"line":243,"column":33}},{"start":{"line":244,"column":8},"end":{"line":244,"column":41}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var process = require('process');","var CountedReadySignal = require('ready-signal/counted');","var errors = require('./errors');","","var GOAL_NOOP = 'noop';","var GOAL_CLOSE_DRAINED = 'close drained connections';","var GOAL_CLOSE_PEER = 'close peer';","","PeerDrain.GOAL_NOOP = GOAL_NOOP;","PeerDrain.GOAL_CLOSE_DRAINED = GOAL_CLOSE_DRAINED;","PeerDrain.GOAL_CLOSE_PEER = GOAL_CLOSE_PEER;","","// TODO: subsume and unify with channel draining","","function PeerDrain(peer, options, callback) {","    var chan = peer.channel.topChannel || peer.channel;","","    assert(options, 'options is required');","    assert(options.reason, 'a reason is required');","    assert(!chan.draining, 'cannot drain a peer while channel is draining');","    assert(!options.goal ||","           options.goal === GOAL_NOOP ||","           options.goal === GOAL_CLOSE_DRAINED ||","           options.goal === GOAL_CLOSE_PEER,","           'expected a valid goal (if any)');","","    this.goal = options.goal || PeerDrain.GOAL_NOOP;","    this.channel = chan;","    this.peer = peer;","    this.timeout = options.timeout || 0;","    this.reason = options.reason;","    this.direction = options.direction || 'both';","    this.callback = callback || null;","    this.timer = null;","    this.drained = null;","    this.startedAt = 0;","    this.stoppedAt = 0;","    this.finishedAt = 0;","    this.thenFinish = thenFinish;","","    var self = this;","","    function thenFinish(err) {","        var now = self.channel.timers.now();","        self.finish(err, now);","    }","}","","PeerDrain.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    info.drainGoal = self.goal;","    info.drainReason = self.reason;","    info.drainTimeout = self.timeout;","    info.drainDirection = self.direction;","    info.drainStartedAt = self.startedAt;","    info.drainStoppedAt = self.stoppedAt;","    info.drainFinishedAt = self.finishedAt;","    info.drainCounter = self.drained && self.drained.counter;","","    return info;","};","","PeerDrain.prototype.start =","function start() {","    var self = this;","","    self.startedAt = self.channel.timers.now();","    self.drained = CountedReadySignal(1);","","    var timer = null;","    if (self.timeout) {","        if (self.timer) {","            self.channel.timers.clearTimeout(self.timer);","        }","        timer = self.channel.timers.setTimeout(drainTimedOut, self.timeout);","        self.timer = timer;","    }","","    process.nextTick(self.drained.signal);","    self.drained(drainDone);","","    for (var i = 0; i < self.peer.connections.length; i++) {","        self.drainConnection(self.peer.connections[i]);","    }","","    self.peer.logger.info('draining peer', self.peer.extendLogInfo(","        self.extendLogInfo({})","    ));","","    function drainDone() {","        var now = self.channel.timers.now();","        finish(null, now);","    }","","    function drainTimedOut() {","        if (self.finishedAt) {","            return;","        }","        var now = self.channel.timers.now();","        finish(errors.PeerDrainTimedOutError({","            direction: self.direction,","            elapsed: now - self.startedAt,","            timeout: self.timeout","        }), now);","    }","","    function finish(err, now) {","        if (timer) {","            self.channel.timers.clearTimeout(timer);","            if (self.timer === timer) {","                self.timer = null;","            }","        }","","        switch (self.goal) {","            case GOAL_NOOP:","                self.finish(err, now);","                break;","","            case GOAL_CLOSE_DRAINED:","                self.thenCloseDrained(err);","                break;","","            case GOAL_CLOSE_PEER:","                self.thenClosePeer(err);","                break;","","            default:","                self.finish(err || new Error('invalid drain goal'), now);","        }","    }","};","","PeerDrain.prototype.stop =","function stop(reason) {","    var self = this;","","    self.peer.logger.info('stopping peer drain', self.peer.extendLogInfo(","        self.extendLogInfo({","            stopReason: reason","        })","    ));","","    self.stoppedAt = self.channel.timers.now();","","    if (self.timer) {","        self.channel.timers.clearTimeout(self.timer);","        self.timer = null;","    }","","    self.callback = null;","};","","PeerDrain.prototype.thenCloseDrained =","function thenCloseDrained(err) {","    var self = this;","","    if (err) {","        var info = self.peer.extendLogInfo(self.extendLogInfo({","            error: err","        }));","","        if (err.type === 'tchannel.drain.peer.timed-out') {","            self.peer.logger.warn(","                'drain timed out, force closing connections',","                info);","        } else {","            self.peer.logger.warn(","                'unexpected error draining connections, closing anyhow',","                info);","        }","    }","","    self.peer.closeDrainedConnections(self.thenFinish);","};","","PeerDrain.prototype.thenClosePeer =","function thenClosePeer(err) {","    var self = this;","","    if (err) {","        var info = self.peer.extendLogInfo(self.extendLogInfo({","            error: err","        }));","","        if (err.type === 'tchannel.drain.peer.timed-out') {","            self.peer.logger.warn(","                'drain timed out, force closing peer',","                info);","        } else {","            self.peer.logger.warn(","                'unexpected error draining connections, closing peer anyhow',","                info);","        }","    }","","    self.peer.close(self.thenFinish);","};","","PeerDrain.prototype.finish =","function finish(err, now) {","    var self = this;","","    if (!self.finishedAt) {","        self.finishedAt = now;","","        if (self.callback) {","            self.callback(err);","            self.callback = null;","        }","    }","};","","PeerDrain.prototype.drainConnection =","function drainConnection(conn) {","    var self = this;","","    if (self.direction === 'both' ||","        self.direction === conn.direction) {","        self.drained.counter++;","        conn.drain(self.reason, self.drained.signal);","    }","};","","module.exports.PeerDrain = PeerDrain;",""],"l":{"23":1,"24":1,"25":1,"26":1,"28":1,"29":1,"30":1,"32":1,"33":1,"34":1,"38":1,"39":0,"41":0,"42":0,"43":0,"44":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"66":1,"67":0,"68":0,"72":1,"74":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"85":0,"88":1,"90":0,"92":0,"93":0,"95":0,"96":0,"97":0,"98":0,"100":0,"101":0,"104":0,"105":0,"107":0,"108":0,"111":0,"115":1,"116":0,"117":0,"120":1,"121":0,"122":0,"124":0,"125":0,"132":1,"133":0,"134":0,"135":0,"136":0,"140":0,"142":0,"143":0,"146":0,"147":0,"150":0,"151":0,"154":0,"159":1,"161":0,"163":0,"169":0,"171":0,"172":0,"173":0,"176":0,"179":1,"181":0,"183":0,"184":0,"188":0,"189":0,"193":0,"199":0,"202":1,"204":0,"206":0,"207":0,"211":0,"212":0,"216":0,"222":0,"225":1,"227":0,"229":0,"230":0,"232":0,"233":0,"234":0,"239":1,"241":0,"243":0,"245":0,"246":0,"250":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/sub_peers.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/sub_peers.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":1,"143":0,"144":0,"145":1,"146":0,"147":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0,0],"25":[0,0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"TChannelSubPeers","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":44}}},"2":{"name":"boundOnOutConnectionDelta","line":59,"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":52}}},"3":{"name":"boundOnRefreshConnectedPeers","line":63,"loc":{"start":{"line":63,"column":4},"end":{"line":63,"column":44}}},"4":{"name":"refreshConnectedPeers","line":71,"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":33}}},"5":{"name":"onOutConnectionDelta","line":88,"loc":{"start":{"line":88,"column":0},"end":{"line":88,"column":43}}},"6":{"name":"close","line":98,"loc":{"start":{"line":98,"column":35},"end":{"line":98,"column":60}}},"7":{"name":"add","line":109,"loc":{"start":{"line":109,"column":33},"end":{"line":109,"column":65}}},"8":{"name":"clear","line":139,"loc":{"start":{"line":139,"column":35},"end":{"line":139,"column":52}}},"9":{"name":"_del","line":147,"loc":{"start":{"line":147,"column":37},"end":{"line":147,"column":57}}},"10":{"name":"setChoosePeerWithHeap","line":175,"loc":{"start":{"line":175,"column":51},"end":{"line":175,"column":91}}},"11":{"name":"choosePeer","line":181,"loc":{"start":{"line":181,"column":40},"end":{"line":181,"column":65}}},"12":{"name":"chooseLinearPeer","line":192,"loc":{"start":{"line":192,"column":46},"end":{"line":192,"column":77}}},"13":{"name":"noop","line":267,"loc":{"start":{"line":267,"column":0},"end":{"line":267,"column":16}}},"14":{"name":"chooseHeapPeer","line":269,"loc":{"start":{"line":269,"column":44},"end":{"line":269,"column":73}}},"15":{"name":"_choosePeerSkipTried","line":290,"loc":{"start":{"line":290,"column":0},"end":{"line":290,"column":35}}},"16":{"name":"filterTriedPeers","line":295,"loc":{"start":{"line":295,"column":4},"end":{"line":295,"column":36}}},"17":{"name":"popout","line":301,"loc":{"start":{"line":301,"column":0},"end":{"line":301,"column":26}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":46}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":50}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":51}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":41}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":30}},"7":{"start":{"line":32,"column":0},"end":{"line":66,"column":1}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":51}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":20}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":67}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":57}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":49}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":72}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":49}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":35}},"16":{"start":{"line":44,"column":4},"end":{"line":44,"column":52}},"17":{"start":{"line":46,"column":4},"end":{"line":46,"column":63}},"18":{"start":{"line":47,"column":4},"end":{"line":47,"column":69}},"19":{"start":{"line":49,"column":4},"end":{"line":49,"column":29}},"20":{"start":{"line":50,"column":4},"end":{"line":51,"column":22}},"21":{"start":{"line":53,"column":4},"end":{"line":57,"column":5}},"22":{"start":{"line":54,"column":8},"end":{"line":56,"column":10}},"23":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},"24":{"start":{"line":60,"column":8},"end":{"line":60,"column":47}},"25":{"start":{"line":63,"column":4},"end":{"line":65,"column":5}},"26":{"start":{"line":64,"column":8},"end":{"line":64,"column":37}},"27":{"start":{"line":68,"column":0},"end":{"line":68,"column":46}},"28":{"start":{"line":70,"column":0},"end":{"line":85,"column":2}},"29":{"start":{"line":72,"column":4},"end":{"line":72,"column":30}},"30":{"start":{"line":74,"column":4},"end":{"line":74,"column":34}},"31":{"start":{"line":75,"column":4},"end":{"line":79,"column":5}},"32":{"start":{"line":76,"column":8},"end":{"line":78,"column":9}},"33":{"start":{"line":77,"column":12},"end":{"line":77,"column":36}},"34":{"start":{"line":81,"column":4},"end":{"line":81,"column":55}},"35":{"start":{"line":82,"column":4},"end":{"line":84,"column":6}},"36":{"start":{"line":87,"column":0},"end":{"line":96,"column":2}},"37":{"start":{"line":89,"column":4},"end":{"line":89,"column":49}},"38":{"start":{"line":91,"column":4},"end":{"line":95,"column":5}},"39":{"start":{"line":92,"column":8},"end":{"line":92,"column":37}},"40":{"start":{"line":93,"column":11},"end":{"line":95,"column":5}},"41":{"start":{"line":94,"column":8},"end":{"line":94,"column":37}},"42":{"start":{"line":98,"column":0},"end":{"line":107,"column":2}},"43":{"start":{"line":99,"column":4},"end":{"line":99,"column":20}},"44":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"45":{"start":{"line":102,"column":8},"end":{"line":102,"column":40}},"46":{"start":{"line":105,"column":4},"end":{"line":105,"column":30}},"47":{"start":{"line":106,"column":4},"end":{"line":106,"column":66}},"48":{"start":{"line":109,"column":0},"end":{"line":137,"column":2}},"49":{"start":{"line":111,"column":4},"end":{"line":111,"column":20}},"50":{"start":{"line":113,"column":4},"end":{"line":113,"column":35}},"51":{"start":{"line":114,"column":4},"end":{"line":116,"column":5}},"52":{"start":{"line":115,"column":8},"end":{"line":115,"column":20}},"53":{"start":{"line":118,"column":4},"end":{"line":118,"column":45}},"54":{"start":{"line":120,"column":4},"end":{"line":120,"column":51}},"55":{"start":{"line":121,"column":4},"end":{"line":121,"column":70}},"56":{"start":{"line":122,"column":4},"end":{"line":122,"column":52}},"57":{"start":{"line":124,"column":4},"end":{"line":126,"column":5}},"58":{"start":{"line":125,"column":8},"end":{"line":125,"column":37}},"59":{"start":{"line":128,"column":4},"end":{"line":128,"column":68}},"60":{"start":{"line":130,"column":4},"end":{"line":130,"column":31}},"61":{"start":{"line":131,"column":4},"end":{"line":131,"column":30}},"62":{"start":{"line":133,"column":4},"end":{"line":133,"column":34}},"63":{"start":{"line":134,"column":4},"end":{"line":134,"column":31}},"64":{"start":{"line":136,"column":4},"end":{"line":136,"column":16}},"65":{"start":{"line":139,"column":0},"end":{"line":145,"column":2}},"66":{"start":{"line":140,"column":4},"end":{"line":140,"column":20}},"67":{"start":{"line":142,"column":4},"end":{"line":142,"column":36}},"68":{"start":{"line":143,"column":4},"end":{"line":143,"column":20}},"69":{"start":{"line":144,"column":4},"end":{"line":144,"column":23}},"70":{"start":{"line":147,"column":0},"end":{"line":173,"column":2}},"71":{"start":{"line":148,"column":4},"end":{"line":148,"column":20}},"72":{"start":{"line":150,"column":4},"end":{"line":150,"column":50}},"73":{"start":{"line":151,"column":4},"end":{"line":153,"column":5}},"74":{"start":{"line":152,"column":8},"end":{"line":152,"column":15}},"75":{"start":{"line":155,"column":4},"end":{"line":157,"column":5}},"76":{"start":{"line":156,"column":8},"end":{"line":156,"column":37}},"77":{"start":{"line":159,"column":4},"end":{"line":160,"column":56}},"78":{"start":{"line":162,"column":4},"end":{"line":162,"column":36}},"79":{"start":{"line":163,"column":4},"end":{"line":163,"column":30}},"80":{"start":{"line":165,"column":4},"end":{"line":172,"column":5}},"81":{"start":{"line":166,"column":8},"end":{"line":166,"column":38}},"82":{"start":{"line":167,"column":8},"end":{"line":171,"column":9}},"83":{"start":{"line":168,"column":12},"end":{"line":168,"column":37}},"84":{"start":{"line":169,"column":12},"end":{"line":169,"column":41}},"85":{"start":{"line":170,"column":12},"end":{"line":170,"column":18}},"86":{"start":{"line":175,"column":0},"end":{"line":179,"column":2}},"87":{"start":{"line":176,"column":4},"end":{"line":176,"column":20}},"88":{"start":{"line":178,"column":4},"end":{"line":178,"column":38}},"89":{"start":{"line":181,"column":0},"end":{"line":189,"column":2}},"90":{"start":{"line":182,"column":4},"end":{"line":182,"column":20}},"91":{"start":{"line":184,"column":4},"end":{"line":186,"column":5}},"92":{"start":{"line":185,"column":8},"end":{"line":185,"column":40}},"93":{"start":{"line":188,"column":4},"end":{"line":188,"column":38}},"94":{"start":{"line":192,"column":0},"end":{"line":265,"column":2}},"95":{"start":{"line":194,"column":4},"end":{"line":194,"column":20}},"96":{"start":{"line":196,"column":4},"end":{"line":196,"column":27}},"97":{"start":{"line":197,"column":4},"end":{"line":199,"column":5}},"98":{"start":{"line":198,"column":8},"end":{"line":198,"column":20}},"99":{"start":{"line":201,"column":4},"end":{"line":201,"column":44}},"100":{"start":{"line":203,"column":4},"end":{"line":203,"column":28}},"101":{"start":{"line":204,"column":4},"end":{"line":204,"column":29}},"102":{"start":{"line":205,"column":4},"end":{"line":205,"column":26}},"103":{"start":{"line":206,"column":4},"end":{"line":206,"column":27}},"104":{"start":{"line":208,"column":4},"end":{"line":208,"column":31}},"105":{"start":{"line":209,"column":4},"end":{"line":211,"column":5}},"106":{"start":{"line":210,"column":8},"end":{"line":210,"column":74}},"107":{"start":{"line":213,"column":4},"end":{"line":250,"column":5}},"108":{"start":{"line":214,"column":8},"end":{"line":214,"column":32}},"109":{"start":{"line":215,"column":8},"end":{"line":215,"column":39}},"110":{"start":{"line":217,"column":8},"end":{"line":217,"column":87}},"111":{"start":{"line":218,"column":8},"end":{"line":249,"column":9}},"112":{"start":{"line":219,"column":12},"end":{"line":219,"column":72}},"113":{"start":{"line":220,"column":12},"end":{"line":220,"column":43}},"114":{"start":{"line":222,"column":12},"end":{"line":228,"column":13}},"115":{"start":{"line":223,"column":16},"end":{"line":227,"column":19}},"116":{"start":{"line":230,"column":12},"end":{"line":230,"column":21}},"117":{"start":{"line":231,"column":12},"end":{"line":238,"column":13}},"118":{"start":{"line":232,"column":16},"end":{"line":234,"column":18}},"119":{"start":{"line":236,"column":16},"end":{"line":237,"column":69}},"120":{"start":{"line":240,"column":12},"end":{"line":248,"column":13}},"121":{"start":{"line":241,"column":16},"end":{"line":247,"column":17}},"122":{"start":{"line":242,"column":20},"end":{"line":242,"column":41}},"123":{"start":{"line":243,"column":20},"end":{"line":243,"column":43}},"124":{"start":{"line":245,"column":20},"end":{"line":245,"column":40}},"125":{"start":{"line":246,"column":20},"end":{"line":246,"column":42}},"126":{"start":{"line":252,"column":4},"end":{"line":257,"column":5}},"127":{"start":{"line":253,"column":8},"end":{"line":256,"column":11}},"128":{"start":{"line":259,"column":4},"end":{"line":262,"column":5}},"129":{"start":{"line":260,"column":8},"end":{"line":260,"column":38}},"130":{"start":{"line":261,"column":8},"end":{"line":261,"column":29}},"131":{"start":{"line":264,"column":4},"end":{"line":264,"column":41}},"132":{"start":{"line":267,"column":0},"end":{"line":267,"column":18}},"133":{"start":{"line":269,"column":0},"end":{"line":287,"column":2}},"134":{"start":{"line":270,"column":4},"end":{"line":270,"column":20}},"135":{"start":{"line":272,"column":4},"end":{"line":272,"column":13}},"136":{"start":{"line":273,"column":4},"end":{"line":277,"column":5}},"137":{"start":{"line":274,"column":8},"end":{"line":274,"column":46}},"138":{"start":{"line":276,"column":8},"end":{"line":276,"column":58}},"139":{"start":{"line":279,"column":4},"end":{"line":284,"column":5}},"140":{"start":{"line":280,"column":8},"end":{"line":283,"column":11}},"141":{"start":{"line":286,"column":4},"end":{"line":286,"column":16}},"142":{"start":{"line":289,"column":0},"end":{"line":299,"column":2}},"143":{"start":{"line":291,"column":4},"end":{"line":291,"column":20}},"144":{"start":{"line":293,"column":4},"end":{"line":293,"column":72}},"145":{"start":{"line":295,"column":4},"end":{"line":298,"column":5}},"146":{"start":{"line":296,"column":8},"end":{"line":296,"column":61}},"147":{"start":{"line":297,"column":8},"end":{"line":297,"column":27}},"148":{"start":{"line":301,"column":0},"end":{"line":313,"column":1}},"149":{"start":{"line":302,"column":4},"end":{"line":304,"column":5}},"150":{"start":{"line":303,"column":8},"end":{"line":303,"column":15}},"151":{"start":{"line":306,"column":4},"end":{"line":306,"column":29}},"152":{"start":{"line":307,"column":4},"end":{"line":311,"column":5}},"153":{"start":{"line":308,"column":8},"end":{"line":308,"column":27}},"154":{"start":{"line":309,"column":8},"end":{"line":309,"column":28}},"155":{"start":{"line":310,"column":8},"end":{"line":310,"column":23}},"156":{"start":{"line":312,"column":4},"end":{"line":312,"column":16}},"157":{"start":{"line":315,"column":0},"end":{"line":315,"column":34}}},"branchMap":{"1":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":30},"end":{"line":36,"column":61}},{"start":{"line":36,"column":65},"end":{"line":36,"column":66}}]},"2":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":38},"end":{"line":50,"column":77}},{"start":{"line":51,"column":8},"end":{"line":51,"column":21}}]},"3":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"4":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":76,"column":8}},{"start":{"line":76,"column":8},"end":{"line":76,"column":8}}]},"5":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"6":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":19}},{"start":{"line":91,"column":23},"end":{"line":91,"column":38}}]},"7":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":11},"end":{"line":93,"column":11}},{"start":{"line":93,"column":11},"end":{"line":93,"column":11}}]},"8":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":15},"end":{"line":93,"column":27}},{"start":{"line":93,"column":31},"end":{"line":93,"column":46}}]},"9":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"10":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"11":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":4},"end":{"line":124,"column":4}},{"start":{"line":124,"column":4},"end":{"line":124,"column":4}}]},"12":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":4},"end":{"line":151,"column":4}},{"start":{"line":151,"column":4},"end":{"line":151,"column":4}}]},"13":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]},"14":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":8}},{"start":{"line":167,"column":8},"end":{"line":167,"column":8}}]},"15":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":4},"end":{"line":184,"column":4}},{"start":{"line":184,"column":4},"end":{"line":184,"column":4}}]},"16":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":197,"column":4}},{"start":{"line":197,"column":4},"end":{"line":197,"column":4}}]},"17":{"line":197,"type":"binary-expr","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":14}},{"start":{"line":197,"column":18},"end":{"line":197,"column":31}}]},"18":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":4},"end":{"line":209,"column":4}},{"start":{"line":209,"column":4},"end":{"line":209,"column":4}}]},"19":{"line":217,"type":"binary-expr","locations":[{"start":{"line":217,"column":25},"end":{"line":217,"column":28}},{"start":{"line":217,"column":32},"end":{"line":217,"column":52}},{"start":{"line":217,"column":56},"end":{"line":217,"column":86}}]},"20":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":8},"end":{"line":218,"column":8}},{"start":{"line":218,"column":8},"end":{"line":218,"column":8}}]},"21":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":30},"end":{"line":219,"column":44}},{"start":{"line":219,"column":48},"end":{"line":219,"column":71}}]},"22":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":12},"end":{"line":222,"column":12}},{"start":{"line":222,"column":12},"end":{"line":222,"column":12}}]},"23":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":12}},{"start":{"line":231,"column":12},"end":{"line":231,"column":12}}]},"24":{"line":232,"type":"binary-expr","locations":[{"start":{"line":232,"column":23},"end":{"line":232,"column":40}},{"start":{"line":233,"column":20},"end":{"line":233,"column":42}},{"start":{"line":233,"column":46},"end":{"line":233,"column":68}}]},"25":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":23},"end":{"line":236,"column":40}},{"start":{"line":237,"column":21},"end":{"line":237,"column":42}},{"start":{"line":237,"column":46},"end":{"line":237,"column":67}}]},"26":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":12},"end":{"line":240,"column":12}},{"start":{"line":240,"column":12},"end":{"line":240,"column":12}}]},"27":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":16},"end":{"line":241,"column":16}},{"start":{"line":241,"column":16},"end":{"line":241,"column":16}}]},"28":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":4},"end":{"line":252,"column":4}},{"start":{"line":252,"column":4},"end":{"line":252,"column":4}}]},"29":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":4},"end":{"line":259,"column":4}},{"start":{"line":259,"column":4},"end":{"line":259,"column":4}}]},"30":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":8},"end":{"line":259,"column":38}},{"start":{"line":259,"column":42},"end":{"line":259,"column":54}}]},"31":{"line":264,"type":"binary-expr","locations":[{"start":{"line":264,"column":11},"end":{"line":264,"column":23}},{"start":{"line":264,"column":27},"end":{"line":264,"column":40}}]},"32":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":4},"end":{"line":273,"column":4}},{"start":{"line":273,"column":4},"end":{"line":273,"column":4}}]},"33":{"line":273,"type":"binary-expr","locations":[{"start":{"line":273,"column":9},"end":{"line":273,"column":12}},{"start":{"line":273,"column":16},"end":{"line":273,"column":36}}]},"34":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":4},"end":{"line":279,"column":4}},{"start":{"line":279,"column":4},"end":{"line":279,"column":4}}]},"35":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":4},"end":{"line":302,"column":4}},{"start":{"line":302,"column":4},"end":{"line":302,"column":4}}]},"36":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":4}},{"start":{"line":307,"column":4},"end":{"line":307,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var inherits = require('util').inherits;","var setTimeout = require('timers').setTimeout;","var clearTimeout = require('timers').clearTimeout;","","var TChannelPeersBase = require('./peers_base.js');","var PeerHeap = require('./peer_heap.js');","","var REFRESH_TIMER = 60 * 1000;","","function TChannelSubPeers(channel, options) {","    TChannelPeersBase.call(this, channel, options);","","    var self = this;","    this.peerScoreThreshold = this.options.peerScoreThreshold || 0;","    this.choosePeerWithHeap = channel.choosePeerWithHeap;","    this.socketInitTimeout = channel.initTimeout;","","    this.hasMinConnections = typeof options.minConnections === 'number';","    this.minConnections = options.minConnections;","","    this.currentConnectedPeers = 0;","    this._heap = new PeerHeap(this, channel.random);","","    this.boundOnOutConnectionDelta = boundOnOutConnectionDelta;","    this.boundOnRefreshConnectedPeers = boundOnRefreshConnectedPeers;","","    this.refreshTimer = null;","    this.refreshConnectedPeersDelay = this.channel.refreshConnectedPeersDelay ||","        REFRESH_TIMER;","","    if (this.hasMinConnections) {","        this.refreshTimer = setTimeout(","            this.boundOnRefreshConnectedPeers, this.refreshConnectedPeersDelay","        );","    }","","    function boundOnOutConnectionDelta(delta, peer) {","        self.onOutConnectionDelta(peer, delta);","    }","","    function boundOnRefreshConnectedPeers() {","        self.refreshConnectedPeers();","    }","}","","inherits(TChannelSubPeers, TChannelPeersBase);","","TChannelSubPeers.prototype.refreshConnectedPeers =","function refreshConnectedPeers() {","    var peers = this.values();","","    var currentConnectedPeers = 0;","    for (var i = 0; i < peers.length; i++) {","        if (peers[i].countConnections('out') > 0) {","            currentConnectedPeers++;","        }","    }","","    this.currentConnectedPeers = currentConnectedPeers;","    this.refreshTimer = setTimeout(","        this.boundOnRefreshConnectedPeers, this.refreshConnectedPeersDelay","    );","};","","TChannelSubPeers.prototype.onOutConnectionDelta =","function onOutConnectionDelta(peer, delta) {","    var connCount = peer.countConnections('out');","","    if (delta === 1 && connCount === 1) {","        this.currentConnectedPeers++;","    } else if (delta === -1 && connCount === 0) {","        this.currentConnectedPeers--;","    }","};","","TChannelSubPeers.prototype.close = function close(callback) {","    var self = this;","","    if (self.refreshTimer) {","        clearTimeout(self.refreshTimer);","    }","","    var peers = self.values();","    TChannelPeersBase.prototype.close.call(self, peers, callback);","};","","TChannelSubPeers.prototype.add = function add(hostPort, options) {","    /* eslint max-statements: [2, 25]*/","    var self = this;","","    var peer = self._map[hostPort];","    if (peer) {","        return peer;","    }","","    var topChannel = self.channel.topChannel;","","    peer = topChannel.peers.add(hostPort, options);","    peer.setPreferConnectionDirection(self.preferConnectionDirection);","    peer.socketInitTimeout = this.socketInitTimeout;","","    if (peer.countConnections('out') > 0) {","        this.currentConnectedPeers++;","    }","","    peer.deltaOutConnectionEvent.on(self.boundOnOutConnectionDelta);","","    self._map[hostPort] = peer;","    self._keys.push(hostPort);","","    var el = self._heap.add(peer);","    peer.heapElements.push(el);","","    return peer;","};","","TChannelSubPeers.prototype.clear = function clear() {","    var self = this;","","    self._map = Object.create(null);","    self._keys = [];","    self._heap.clear();","};","","TChannelSubPeers.prototype._delete = function _del(peer) {","    var self = this;","","    var index = self._keys.indexOf(peer.hostPort);","    if (index === -1) {","        return;","    }","","    if (peer.countConnections('out') > 0) {","        this.currentConnectedPeers--;","    }","","    peer.deltaOutConnectionEvent","        .removeListener(self.boundOnOutConnectionDelta);","","    delete self._map[peer.hostPort];","    popout(self._keys, index);","","    for (var i = 0; i < peer.heapElements.length; i++) {","        var el = peer.heapElements[i];","        if (el.heap === self._heap) {","            el.heap.remove(el.index);","            popout(peer.heapElements, i);","            break;","        }","    }","};","","TChannelSubPeers.prototype.setChoosePeerWithHeap = function setChoosePeerWithHeap(enabled) {","    var self = this;","","    self.choosePeerWithHeap = enabled;","};","","TChannelSubPeers.prototype.choosePeer = function choosePeer(req) {","    var self = this;","","    if (self.choosePeerWithHeap) {","        return self.chooseHeapPeer(req);","    }","","    return self.chooseLinearPeer(req);","};","","/*eslint max-statements: [2, 40]*/","TChannelSubPeers.prototype.chooseLinearPeer = function chooseLinearPeer(req) {","    /* eslint complexity: [2, 15]*/","    var self = this;","","    var hosts = self._keys;","    if (!hosts || !hosts.length) {","        return null;","    }","","    var threshold = self.peerScoreThreshold;","","    var selectedPeer = null;","    var secondaryPeer = null;","    var selectedScore = 0;","    var secondaryScore = 0;","","    var notEnoughPeers = false;","    if (this.hasMinConnections) {","        notEnoughPeers = this.currentConnectedPeers < this.minConnections;","    }","","    for (var i = 0; i < hosts.length; i++) {","        var hostPort = hosts[i];","        var peer = self._map[hostPort];","","        var shouldSkip = req && req.triedRemoteAddrs && req.triedRemoteAddrs[hostPort];","        if (!shouldSkip) {","            var isSecondary = notEnoughPeers && peer.isConnected('out');","            var score = peer.getScore(req);","","            if (self.channel.topChannel.peerScoredEvent) {","                self.channel.topChannel.peerScoredEvent.emit(peer, {","                    peer: peer,","                    reason: 'chooseLinearPeer',","                    score: score","                });","            }","","            var want;","            if (isSecondary) {","                want = score > threshold && (","                    secondaryPeer === null || score > secondaryScore","                );","            } else {","                want = score > threshold &&","                    (selectedPeer === null || score > selectedScore);","            }","","            if (want) {","                if (isSecondary) {","                    secondaryPeer = peer;","                    secondaryScore = score;","                } else {","                    selectedPeer = peer;","                    selectedScore = score;","                }","            }","        }","    }","","    if (self.channel.topChannel.peerChosenEvent) {","        self.channel.topChannel.peerChosenEvent.emit(self, {","            mode: 'linear',","            peer: selectedPeer","        });","    }","","    if (secondaryScore > selectedScore && selectedPeer) {","        selectedPeer.tryConnect(noop);","        return secondaryPeer;","    }","","    return selectedPeer || secondaryPeer;","};","","function noop() {}","","TChannelSubPeers.prototype.chooseHeapPeer = function chooseHeapPeer(req) {","    var self = this;","","    var peer;","    if ((req && req.triedRemoteAddrs)) {","        peer = self._choosePeerSkipTried(req);","    } else {","        peer = self._heap.choose(self.peerScoreThreshold);","    }","","    if (self.channel.topChannel.peerChosenEvent) {","        self.channel.topChannel.peerChosenEvent.emit(self, {","            mode: 'heap',","            peer: peer","        });","    }","","    return peer;","};","","TChannelSubPeers.prototype._choosePeerSkipTried =","function _choosePeerSkipTried(req) {","    var self = this;","","    return self._heap.choose(self.peerScoreThreshold, filterTriedPeers);","","    function filterTriedPeers(peer) {","        var shouldSkip = req.triedRemoteAddrs[peer.hostPort];","        return !shouldSkip;","    }","};","","function popout(array, i) {","    if (!array.length) {","        return;","    }","","    var j = array.length - 1;","    if (i !== j) {","        var tmp = array[i];","        array[i] = array[j];","        array[j] = tmp;","    }","    array.pop();","}","","module.exports = TChannelSubPeers;",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":1,"30":1,"32":1,"33":0,"35":0,"36":0,"37":0,"38":0,"40":0,"41":0,"43":0,"44":0,"46":0,"47":0,"49":0,"50":0,"53":0,"54":0,"59":1,"60":0,"63":1,"64":0,"68":1,"70":1,"72":0,"74":0,"75":0,"76":0,"77":0,"81":0,"82":0,"87":1,"89":0,"91":0,"92":0,"93":0,"94":0,"98":1,"99":0,"101":0,"102":0,"105":0,"106":0,"109":1,"111":0,"113":0,"114":0,"115":0,"118":0,"120":0,"121":0,"122":0,"124":0,"125":0,"128":0,"130":0,"131":0,"133":0,"134":0,"136":0,"139":1,"140":0,"142":0,"143":0,"144":0,"147":1,"148":0,"150":0,"151":0,"152":0,"155":0,"156":0,"159":0,"162":0,"163":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"175":1,"176":0,"178":0,"181":1,"182":0,"184":0,"185":0,"188":0,"192":1,"194":0,"196":0,"197":0,"198":0,"201":0,"203":0,"204":0,"205":0,"206":0,"208":0,"209":0,"210":0,"213":0,"214":0,"215":0,"217":0,"218":0,"219":0,"220":0,"222":0,"223":0,"230":0,"231":0,"232":0,"236":0,"240":0,"241":0,"242":0,"243":0,"245":0,"246":0,"252":0,"253":0,"259":0,"260":0,"261":0,"264":0,"267":1,"269":1,"270":0,"272":0,"273":0,"274":0,"276":0,"279":0,"280":0,"286":0,"289":1,"291":0,"293":0,"295":1,"296":0,"297":0,"301":1,"302":0,"303":0,"306":0,"307":0,"308":0,"309":0,"310":0,"312":0,"315":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer_heap.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer_heap.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":1,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":1,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":1,"183":0,"184":0,"185":0,"186":0,"187":0,"188":1,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"PeerHeap","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}}},"2":{"name":"choose","line":51,"loc":{"start":{"line":51,"column":28},"end":{"line":51,"column":63}}},"3":{"name":"noop","line":160,"loc":{"start":{"line":160,"column":0},"end":{"line":160,"column":16}}},"4":{"name":"clear","line":162,"loc":{"start":{"line":162,"column":27},"end":{"line":162,"column":44}}},"5":{"name":"add","line":177,"loc":{"start":{"line":177,"column":25},"end":{"line":177,"column":44}}},"6":{"name":"rescore","line":186,"loc":{"start":{"line":186,"column":29},"end":{"line":186,"column":48}}},"7":{"name":"heapify","line":196,"loc":{"start":{"line":196,"column":29},"end":{"line":196,"column":48}}},"8":{"name":"remove","line":208,"loc":{"start":{"line":208,"column":28},"end":{"line":208,"column":47}}},"9":{"name":"push","line":231,"loc":{"start":{"line":231,"column":26},"end":{"line":231,"column":53}}},"10":{"name":"pop","line":243,"loc":{"start":{"line":243,"column":25},"end":{"line":243,"column":40}}},"11":{"name":"siftdown","line":263,"loc":{"start":{"line":263,"column":30},"end":{"line":263,"column":51}}},"12":{"name":"siftup","line":294,"loc":{"start":{"line":294,"column":28},"end":{"line":294,"column":47}}},"13":{"name":"swap","line":317,"loc":{"start":{"line":317,"column":26},"end":{"line":317,"column":46}}},"14":{"name":"PeerHeapElement","line":337,"loc":{"start":{"line":337,"column":0},"end":{"line":337,"column":31}}},"15":{"name":"rescore","line":346,"loc":{"start":{"line":346,"column":36},"end":{"line":346,"column":60}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":26}},"3":{"start":{"line":31,"column":0},"end":{"line":31,"column":25}},"4":{"start":{"line":33,"column":0},"end":{"line":47,"column":1}},"5":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"6":{"start":{"line":35,"column":4},"end":{"line":35,"column":31}},"7":{"start":{"line":36,"column":4},"end":{"line":36,"column":69}},"8":{"start":{"line":38,"column":4},"end":{"line":38,"column":40}},"9":{"start":{"line":39,"column":4},"end":{"line":39,"column":77}},"10":{"start":{"line":43,"column":4},"end":{"line":43,"column":23}},"11":{"start":{"line":44,"column":4},"end":{"line":44,"column":23}},"12":{"start":{"line":46,"column":4},"end":{"line":46,"column":27}},"13":{"start":{"line":51,"column":0},"end":{"line":156,"column":2}},"14":{"start":{"line":52,"column":4},"end":{"line":52,"column":20}},"15":{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},"16":{"start":{"line":55,"column":8},"end":{"line":55,"column":20}},"17":{"start":{"line":58,"column":4},"end":{"line":58,"column":28}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":26}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":29}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":31}},"21":{"start":{"line":62,"column":4},"end":{"line":62,"column":33}},"22":{"start":{"line":63,"column":4},"end":{"line":63,"column":51}},"23":{"start":{"line":65,"column":4},"end":{"line":65,"column":31}},"24":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"25":{"start":{"line":67,"column":8},"end":{"line":67,"column":86}},"26":{"start":{"line":71,"column":4},"end":{"line":71,"column":23}},"27":{"start":{"line":72,"column":4},"end":{"line":72,"column":21}},"28":{"start":{"line":74,"column":4},"end":{"line":92,"column":5}},"29":{"start":{"line":77,"column":8},"end":{"line":77,"column":43}},"30":{"start":{"line":78,"column":8},"end":{"line":78,"column":69}},"31":{"start":{"line":80,"column":8},"end":{"line":86,"column":9}},"32":{"start":{"line":81,"column":12},"end":{"line":81,"column":38}},"33":{"start":{"line":82,"column":12},"end":{"line":82,"column":46}},"34":{"start":{"line":84,"column":12},"end":{"line":84,"column":35}},"35":{"start":{"line":85,"column":12},"end":{"line":85,"column":44}},"36":{"start":{"line":90,"column":8},"end":{"line":90,"column":23}},"37":{"start":{"line":91,"column":8},"end":{"line":91,"column":21}},"38":{"start":{"line":94,"column":4},"end":{"line":148,"column":5}},"39":{"start":{"line":95,"column":8},"end":{"line":95,"column":37}},"40":{"start":{"line":96,"column":8},"end":{"line":96,"column":21}},"41":{"start":{"line":98,"column":8},"end":{"line":98,"column":31}},"42":{"start":{"line":100,"column":8},"end":{"line":109,"column":9}},"43":{"start":{"line":108,"column":12},"end":{"line":108,"column":21}},"44":{"start":{"line":111,"column":8},"end":{"line":136,"column":9}},"45":{"start":{"line":112,"column":12},"end":{"line":112,"column":71}},"46":{"start":{"line":115,"column":12},"end":{"line":115,"column":38}},"47":{"start":{"line":116,"column":12},"end":{"line":116,"column":38}},"48":{"start":{"line":117,"column":12},"end":{"line":117,"column":37}},"49":{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},"50":{"start":{"line":119,"column":16},"end":{"line":119,"column":25}},"51":{"start":{"line":121,"column":12},"end":{"line":121,"column":54}},"52":{"start":{"line":123,"column":12},"end":{"line":125,"column":53}},"53":{"start":{"line":127,"column":12},"end":{"line":135,"column":13}},"54":{"start":{"line":128,"column":16},"end":{"line":134,"column":17}},"55":{"start":{"line":129,"column":20},"end":{"line":129,"column":55}},"56":{"start":{"line":130,"column":20},"end":{"line":130,"column":44}},"57":{"start":{"line":132,"column":20},"end":{"line":132,"column":53}},"58":{"start":{"line":133,"column":20},"end":{"line":133,"column":41}},"59":{"start":{"line":140,"column":8},"end":{"line":140,"column":29}},"60":{"start":{"line":141,"column":8},"end":{"line":141,"column":29}},"61":{"start":{"line":142,"column":8},"end":{"line":147,"column":9}},"62":{"start":{"line":143,"column":12},"end":{"line":143,"column":40}},"63":{"start":{"line":144,"column":12},"end":{"line":146,"column":13}},"64":{"start":{"line":145,"column":16},"end":{"line":145,"column":45}},"65":{"start":{"line":150,"column":4},"end":{"line":153,"column":5}},"66":{"start":{"line":151,"column":8},"end":{"line":151,"column":36}},"67":{"start":{"line":152,"column":8},"end":{"line":152,"column":29}},"68":{"start":{"line":155,"column":4},"end":{"line":155,"column":39}},"69":{"start":{"line":160,"column":0},"end":{"line":160,"column":18}},"70":{"start":{"line":162,"column":0},"end":{"line":175,"column":2}},"71":{"start":{"line":163,"column":4},"end":{"line":163,"column":20}},"72":{"start":{"line":165,"column":4},"end":{"line":171,"column":5}},"73":{"start":{"line":166,"column":8},"end":{"line":166,"column":31}},"74":{"start":{"line":167,"column":8},"end":{"line":167,"column":23}},"75":{"start":{"line":168,"column":8},"end":{"line":168,"column":23}},"76":{"start":{"line":169,"column":8},"end":{"line":169,"column":21}},"77":{"start":{"line":170,"column":8},"end":{"line":170,"column":24}},"78":{"start":{"line":172,"column":4},"end":{"line":172,"column":26}},"79":{"start":{"line":173,"column":4},"end":{"line":173,"column":29}},"80":{"start":{"line":174,"column":4},"end":{"line":174,"column":29}},"81":{"start":{"line":177,"column":0},"end":{"line":184,"column":2}},"82":{"start":{"line":178,"column":4},"end":{"line":178,"column":20}},"83":{"start":{"line":180,"column":4},"end":{"line":180,"column":32}},"84":{"start":{"line":181,"column":4},"end":{"line":181,"column":35}},"85":{"start":{"line":182,"column":4},"end":{"line":182,"column":27}},"86":{"start":{"line":183,"column":4},"end":{"line":183,"column":14}},"87":{"start":{"line":186,"column":0},"end":{"line":194,"column":2}},"88":{"start":{"line":187,"column":4},"end":{"line":187,"column":20}},"89":{"start":{"line":189,"column":4},"end":{"line":192,"column":5}},"90":{"start":{"line":190,"column":8},"end":{"line":190,"column":31}},"91":{"start":{"line":191,"column":8},"end":{"line":191,"column":43}},"92":{"start":{"line":193,"column":4},"end":{"line":193,"column":19}},"93":{"start":{"line":196,"column":0},"end":{"line":206,"column":2}},"94":{"start":{"line":197,"column":4},"end":{"line":197,"column":20}},"95":{"start":{"line":199,"column":4},"end":{"line":201,"column":5}},"96":{"start":{"line":200,"column":8},"end":{"line":200,"column":15}},"97":{"start":{"line":203,"column":4},"end":{"line":205,"column":5}},"98":{"start":{"line":204,"column":8},"end":{"line":204,"column":25}},"99":{"start":{"line":208,"column":0},"end":{"line":229,"column":2}},"100":{"start":{"line":209,"column":4},"end":{"line":209,"column":20}},"101":{"start":{"line":211,"column":4},"end":{"line":213,"column":5}},"102":{"start":{"line":212,"column":8},"end":{"line":212,"column":15}},"103":{"start":{"line":215,"column":4},"end":{"line":218,"column":5}},"104":{"start":{"line":216,"column":8},"end":{"line":216,"column":25}},"105":{"start":{"line":217,"column":8},"end":{"line":217,"column":15}},"106":{"start":{"line":220,"column":4},"end":{"line":220,"column":34}},"107":{"start":{"line":221,"column":4},"end":{"line":224,"column":5}},"108":{"start":{"line":222,"column":8},"end":{"line":222,"column":25}},"109":{"start":{"line":223,"column":8},"end":{"line":223,"column":15}},"110":{"start":{"line":226,"column":4},"end":{"line":226,"column":20}},"111":{"start":{"line":227,"column":4},"end":{"line":227,"column":21}},"112":{"start":{"line":228,"column":4},"end":{"line":228,"column":19}},"113":{"start":{"line":231,"column":0},"end":{"line":241,"column":2}},"114":{"start":{"line":232,"column":4},"end":{"line":232,"column":20}},"115":{"start":{"line":234,"column":4},"end":{"line":234,"column":39}},"116":{"start":{"line":235,"column":4},"end":{"line":235,"column":19}},"117":{"start":{"line":236,"column":4},"end":{"line":236,"column":31}},"118":{"start":{"line":237,"column":4},"end":{"line":237,"column":33}},"119":{"start":{"line":239,"column":4},"end":{"line":239,"column":24}},"120":{"start":{"line":240,"column":4},"end":{"line":240,"column":33}},"121":{"start":{"line":243,"column":0},"end":{"line":261,"column":2}},"122":{"start":{"line":244,"column":4},"end":{"line":244,"column":20}},"123":{"start":{"line":245,"column":4},"end":{"line":245,"column":20}},"124":{"start":{"line":247,"column":4},"end":{"line":249,"column":5}},"125":{"start":{"line":248,"column":8},"end":{"line":248,"column":20}},"126":{"start":{"line":251,"column":4},"end":{"line":254,"column":5}},"127":{"start":{"line":252,"column":8},"end":{"line":252,"column":32}},"128":{"start":{"line":253,"column":8},"end":{"line":253,"column":20}},"129":{"start":{"line":256,"column":4},"end":{"line":256,"column":30}},"130":{"start":{"line":257,"column":4},"end":{"line":257,"column":37}},"131":{"start":{"line":258,"column":4},"end":{"line":258,"column":21}},"132":{"start":{"line":260,"column":4},"end":{"line":260,"column":16}},"133":{"start":{"line":263,"column":0},"end":{"line":292,"column":2}},"134":{"start":{"line":264,"column":4},"end":{"line":264,"column":20}},"135":{"start":{"line":266,"column":4},"end":{"line":291,"column":5}},"136":{"start":{"line":267,"column":8},"end":{"line":267,"column":31}},"137":{"start":{"line":268,"column":8},"end":{"line":273,"column":9}},"138":{"start":{"line":269,"column":12},"end":{"line":269,"column":54}},"139":{"start":{"line":270,"column":12},"end":{"line":270,"column":54}},"140":{"start":{"line":271,"column":12},"end":{"line":271,"column":80}},"141":{"start":{"line":272,"column":12},"end":{"line":272,"column":21}},"142":{"start":{"line":275,"column":8},"end":{"line":275,"column":29}},"143":{"start":{"line":276,"column":8},"end":{"line":276,"column":25}},"144":{"start":{"line":277,"column":8},"end":{"line":280,"column":9}},"145":{"start":{"line":279,"column":12},"end":{"line":279,"column":26}},"146":{"start":{"line":282,"column":8},"end":{"line":290,"column":9}},"147":{"start":{"line":283,"column":12},"end":{"line":283,"column":32}},"148":{"start":{"line":284,"column":12},"end":{"line":284,"column":22}},"149":{"start":{"line":286,"column":12},"end":{"line":286,"column":54}},"150":{"start":{"line":287,"column":12},"end":{"line":287,"column":54}},"151":{"start":{"line":288,"column":12},"end":{"line":288,"column":80}},"152":{"start":{"line":289,"column":12},"end":{"line":289,"column":21}},"153":{"start":{"line":294,"column":0},"end":{"line":315,"column":2}},"154":{"start":{"line":295,"column":4},"end":{"line":295,"column":20}},"155":{"start":{"line":297,"column":4},"end":{"line":308,"column":5}},"156":{"start":{"line":298,"column":8},"end":{"line":298,"column":42}},"157":{"start":{"line":299,"column":8},"end":{"line":307,"column":9}},"158":{"start":{"line":300,"column":12},"end":{"line":300,"column":30}},"159":{"start":{"line":301,"column":12},"end":{"line":301,"column":20}},"160":{"start":{"line":303,"column":12},"end":{"line":303,"column":54}},"161":{"start":{"line":304,"column":12},"end":{"line":304,"column":54}},"162":{"start":{"line":305,"column":12},"end":{"line":305,"column":80}},"163":{"start":{"line":306,"column":12},"end":{"line":306,"column":21}},"164":{"start":{"line":310,"column":4},"end":{"line":310,"column":46}},"165":{"start":{"line":311,"column":4},"end":{"line":311,"column":46}},"166":{"start":{"line":312,"column":4},"end":{"line":312,"column":72}},"167":{"start":{"line":314,"column":4},"end":{"line":314,"column":13}},"168":{"start":{"line":317,"column":0},"end":{"line":335,"column":2}},"169":{"start":{"line":318,"column":4},"end":{"line":318,"column":20}},"170":{"start":{"line":320,"column":4},"end":{"line":320,"column":26}},"171":{"start":{"line":321,"column":4},"end":{"line":321,"column":26}},"172":{"start":{"line":323,"column":4},"end":{"line":323,"column":22}},"173":{"start":{"line":324,"column":4},"end":{"line":324,"column":22}},"174":{"start":{"line":325,"column":4},"end":{"line":325,"column":16}},"175":{"start":{"line":326,"column":4},"end":{"line":326,"column":16}},"176":{"start":{"line":328,"column":4},"end":{"line":328,"column":34}},"177":{"start":{"line":329,"column":4},"end":{"line":329,"column":34}},"178":{"start":{"line":330,"column":4},"end":{"line":330,"column":72}},"179":{"start":{"line":332,"column":4},"end":{"line":332,"column":34}},"180":{"start":{"line":333,"column":4},"end":{"line":333,"column":34}},"181":{"start":{"line":334,"column":4},"end":{"line":334,"column":72}},"182":{"start":{"line":337,"column":0},"end":{"line":344,"column":1}},"183":{"start":{"line":338,"column":4},"end":{"line":338,"column":20}},"184":{"start":{"line":340,"column":4},"end":{"line":340,"column":21}},"185":{"start":{"line":341,"column":4},"end":{"line":341,"column":21}},"186":{"start":{"line":342,"column":4},"end":{"line":342,"column":19}},"187":{"start":{"line":343,"column":4},"end":{"line":343,"column":22}},"188":{"start":{"line":346,"column":0},"end":{"line":356,"column":2}},"189":{"start":{"line":347,"column":4},"end":{"line":347,"column":20}},"190":{"start":{"line":349,"column":4},"end":{"line":351,"column":5}},"191":{"start":{"line":350,"column":8},"end":{"line":350,"column":15}},"192":{"start":{"line":353,"column":4},"end":{"line":353,"column":38}},"193":{"start":{"line":354,"column":4},"end":{"line":354,"column":46}},"194":{"start":{"line":355,"column":4},"end":{"line":355,"column":48}}},"branchMap":{"1":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":17},"end":{"line":35,"column":22}},{"start":{"line":35,"column":26},"end":{"line":35,"column":30}}]},"2":{"line":36,"type":"cond-expr","locations":[{"start":{"line":36,"column":37},"end":{"line":36,"column":60}},{"start":{"line":36,"column":63},"end":{"line":36,"column":68}}]},"3":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":18},"end":{"line":38,"column":24}},{"start":{"line":38,"column":28},"end":{"line":38,"column":39}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"5":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"6":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"7":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":30}},{"start":{"line":74,"column":35},"end":{"line":74,"column":42}},{"start":{"line":74,"column":46},"end":{"line":74,"column":72}}]},"8":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":22},"end":{"line":78,"column":36}},{"start":{"line":78,"column":40},"end":{"line":78,"column":68}}]},"9":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"10":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"11":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":12},"end":{"line":100,"column":15}},{"start":{"line":101,"column":12},"end":{"line":101,"column":50}},{"start":{"line":102,"column":13},"end":{"line":102,"column":20}},{"start":{"line":102,"column":24},"end":{"line":102,"column":39}}]},"12":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":8}},{"start":{"line":111,"column":8},"end":{"line":111,"column":8}}]},"13":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":12},"end":{"line":111,"column":19}},{"start":{"line":111,"column":23},"end":{"line":111,"column":38}}]},"14":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":26},"end":{"line":112,"column":40}},{"start":{"line":112,"column":44},"end":{"line":112,"column":70}}]},"15":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":118,"column":12}},{"start":{"line":118,"column":12},"end":{"line":118,"column":12}}]},"16":{"line":123,"type":"cond-expr","locations":[{"start":{"line":124,"column":17},"end":{"line":124,"column":49}},{"start":{"line":125,"column":17},"end":{"line":125,"column":51}}]},"17":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":12},"end":{"line":127,"column":12}},{"start":{"line":127,"column":12},"end":{"line":127,"column":12}}]},"18":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":17},"end":{"line":127,"column":40}},{"start":{"line":127,"column":45},"end":{"line":127,"column":57}}]},"19":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":16},"end":{"line":128,"column":16}},{"start":{"line":128,"column":16},"end":{"line":128,"column":16}}]},"20":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":142,"column":8}},{"start":{"line":142,"column":8},"end":{"line":142,"column":8}}]},"21":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":12},"end":{"line":144,"column":12}},{"start":{"line":144,"column":12},"end":{"line":144,"column":12}}]},"22":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":4},"end":{"line":150,"column":4}},{"start":{"line":150,"column":4},"end":{"line":150,"column":4}}]},"23":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":49}},{"start":{"line":150,"column":53},"end":{"line":150,"column":63}}]},"24":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":11},"end":{"line":155,"column":21}},{"start":{"line":155,"column":25},"end":{"line":155,"column":38}}]},"25":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":4},"end":{"line":199,"column":4}},{"start":{"line":199,"column":4},"end":{"line":199,"column":4}}]},"26":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":4},"end":{"line":211,"column":4}},{"start":{"line":211,"column":4},"end":{"line":211,"column":4}}]},"27":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":215,"column":4}},{"start":{"line":215,"column":4},"end":{"line":215,"column":4}}]},"28":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":4},"end":{"line":221,"column":4}},{"start":{"line":221,"column":4},"end":{"line":221,"column":4}}]},"29":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":4},"end":{"line":247,"column":4}},{"start":{"line":247,"column":4},"end":{"line":247,"column":4}}]},"30":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":4},"end":{"line":251,"column":4}},{"start":{"line":251,"column":4},"end":{"line":251,"column":4}}]},"31":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":8},"end":{"line":268,"column":8}},{"start":{"line":268,"column":8},"end":{"line":268,"column":8}}]},"32":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":8},"end":{"line":277,"column":8}},{"start":{"line":277,"column":8},"end":{"line":277,"column":8}}]},"33":{"line":277,"type":"binary-expr","locations":[{"start":{"line":277,"column":12},"end":{"line":277,"column":37}},{"start":{"line":278,"column":12},"end":{"line":278,"column":66}}]},"34":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":8},"end":{"line":282,"column":8}},{"start":{"line":282,"column":8},"end":{"line":282,"column":8}}]},"35":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":8},"end":{"line":299,"column":8}},{"start":{"line":299,"column":8},"end":{"line":299,"column":8}}]},"36":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":4},"end":{"line":349,"column":4}},{"start":{"line":349,"column":4},"end":{"line":349,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","","module.exports = PeerHeap;","","// A max-score (pre-computed) for peer selection","","// This is used for every DFS. It will end up being the size of the largest","// peer list.","var dfsStack = [0, 1, 2];","","function PeerHeap(peers, random) {","    this.array = [];","    this.peers = peers || null;","    this.hasMinConnections = peers ? peers.hasMinConnections : false;","","    this.random = random || Math.random;","    assert(typeof this.random === 'function', 'PeerHeap expected random fn');","","    // We cache the range los and his so they can be stored as a contiguous","    // array of boxed doubles. This has a noticable speed increase.","    this.rangehis = [];","    this.rangelos = [];","","    this.maxRangeStart = 0;","}","","/*eslint-disable complexity */","/*eslint-disable max-statements */","PeerHeap.prototype.choose = function choose(threshold, filter) {","    var self = this;","","    if (!self.array.length) {","        return null;","    }","","    var isSecondary = false;","    var chosenPeer = null;","    var secondaryPeer = null;","    var highestProbability = 0;","    var secondaryProbability = 0;","    var firstScore = self.array[0].peer.getScore();","","    var notEnoughPeers = false;","    if (self.hasMinConnections) {","        notEnoughPeers = self.peers.currentConnectedPeers < self.peers.minConnections;","    }","","    // Pointers into dfsStack","    var stackBegin = 0;","    var stackEnd = 0;","","    if (firstScore > threshold && (!filter || filter(self.array[0].peer))) {","        // Don't check first peer if it looks good, check its children though","","        var firstPeer = self.array[0].peer;","        isSecondary = notEnoughPeers && firstPeer.isConnected('out');","","        if (isSecondary) {","            secondaryPeer = firstPeer;","            secondaryProbability = firstScore;","        } else {","            chosenPeer = firstPeer;","            highestProbability = firstScore;","        }","","        // The array is seeded with 0, 1, 2 so we just have to advance the","        // stack pointers","        stackBegin = 1;","        stackEnd = 2;","    }","","    while (stackBegin <= stackEnd) {","        var i = dfsStack[stackBegin];","        stackBegin++;","","        var el = self.array[i];","","        if (!el || (","            self.rangehis[i] <= self.maxRangeStart &&","            (!filter && !notEnoughPeers)","        )) {","            // This range ends before the range with the largest start begins,","            // so it can't possibly be chosen over any of the ranges we've","            // seen. All ranges below this one have a smaller end, so this","            // range and any below it can't be chosen.","            continue;","        }","","        if (!filter || filter(el.peer)) {","            isSecondary = notEnoughPeers && el.peer.isConnected('out');","","            // INLINE of TChannelPeer#getScore","            var lo = self.rangelos[i];","            var hi = self.rangehis[i];","            var rand = self.random();","            if (rand === 0) {","                rand = 1;","            }","            var probability = lo + ((hi - lo) * rand);","","            var isBestChoice = !isSecondary ?","                (probability > highestProbability) :","                (probability > secondaryProbability);","","            if ((probability > threshold) && isBestChoice) {","                if (isSecondary) {","                    secondaryProbability = probability;","                    secondaryPeer = el.peer;","                } else {","                    highestProbability = probability;","                    chosenPeer = el.peer;","                }","            }","        }","","        // Continue DFS by 'pushing' left and right indexes onto end of","        // dfsStack, if the source array is long enough for that","        var left = 2 * i + 1;","        var right = left + 1;","        if (left < self.array.length) {","            dfsStack[++stackEnd] = left;","            if (right < self.array.length) {","                dfsStack[++stackEnd] = right;","            }","        }","    }","","    if (secondaryProbability > highestProbability && chosenPeer) {","        chosenPeer.tryConnect(noop);","        return secondaryPeer;","    }","","    return chosenPeer || secondaryPeer;","};","/*eslint-enable complexity */","/*eslint-enable max-statements */","","function noop() {}","","PeerHeap.prototype.clear = function clear() {","    var self = this;","","    for (var i = 0; i < self.array.length; i++) {","        var el = self.array[i];","        el.heap = null;","        el.peer = null;","        el.index = 0;","        el.range = null;","    }","    self.array.length = 0;","    self.rangehis.length = 0;","    self.rangelos.length = 0;","};","","PeerHeap.prototype.add = function add(peer) {","    var self = this;","","    var range = peer.scoreRange;","    var i = self.push(peer, range);","    var el = self.array[i];","    return el;","};","","PeerHeap.prototype.rescore = function rescore() {","    var self = this;","","    for (var i = 0; i < self.array.length; i++) {","        var el = self.array[i];","        el.range = el.peer.getScoreRange();","    }","    self.heapify();","};","","PeerHeap.prototype.heapify = function heapify() {","    var self = this;","","    if (self.array.length <= 1) {","        return;","    }","","    for (var i = Math.floor(self.array.length / 2 - 1); i >= 0; i--) {","        self.siftdown(i);","    }","};","","PeerHeap.prototype.remove = function remove(i) {","    var self = this;","","    if (i >= self.array.length) {","        return;","    }","","    if (self.array.length === 1) {","        self.array.pop();","        return;","    }","","    var j = self.array.length - 1;","    if (i === j) {","        self.array.pop();","        return;","    }","","    self.swap(i, j);","    self.array.pop();","    self.siftup(i);","};","","PeerHeap.prototype.push = function push(peer, range) {","    var self = this;","","    var el = new PeerHeapElement(self);","    el.peer = peer;","    el.range = peer.scoreRange;","    el.index = self.array.length;","","    self.array.push(el);","    return self.siftup(el.index);","};","","PeerHeap.prototype.pop = function pop() {","    var self = this;","    var peer = null;","","    if (!self.array.length) {","        return peer;","    }","","    if (self.array.length === 1) {","        peer = self.array.pop();","        return peer;","    }","","    peer = self.array[0].peer;","    self.array[0] = self.array.pop();","    self.siftdown(0);","","    return peer;","};","","PeerHeap.prototype.siftdown = function siftdown(i) {","    var self = this;","","    for (;;) {","        var left = (2 * i) + 1;","        if (left >= self.array.length) {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            self.maxRangeStart = Math.max(self.rangelos[i], self.maxRangeStart);","            return i;","        }","","        var right = left + 1;","        var child = left;","        if (right < self.array.length &&","            self.array[right].range.hi > self.array[left].range.hi) {","            child = right;","        }","","        if (self.array[child].range.hi > self.array[i].range.hi) {","            self.swap(i, child);","            i = child;","        } else {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            self.maxRangeStart = Math.max(self.rangelos[i], self.maxRangeStart);","            return i;","        }","    }","};","","PeerHeap.prototype.siftup = function siftup(i) {","    var self = this;","","    while (i > 0) {","        var par = Math.floor((i - 1) / 2);","        if (self.array[i].range.hi > self.array[par].range.hi) {","            self.swap(i, par);","            i = par;","        } else {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            self.maxRangeStart = Math.max(self.rangelos[i], self.maxRangeStart);","            return i;","        }","    }","","    self.rangehis[0] = self.array[0].range.hi;","    self.rangelos[0] = self.array[0].range.lo;","    self.maxRangeStart = Math.max(self.rangelos[i], self.maxRangeStart);","","    return 0;","};","","PeerHeap.prototype.swap = function swap(i, j) {","    var self = this;","","    var a = self.array[i];","    var b = self.array[j];","","    self.array[i] = b;","    self.array[j] = a;","    b.index = i;","    a.index = j;","","    self.rangehis[j] = a.range.hi;","    self.rangelos[j] = a.range.lo;","    self.maxRangeStart = Math.max(self.rangelos[j], self.maxRangeStart);","","    self.rangehis[i] = b.range.hi;","    self.rangelos[i] = b.range.lo;","    self.maxRangeStart = Math.max(self.rangelos[i], self.maxRangeStart);","};","","function PeerHeapElement(heap) {","    var self = this;","","    self.heap = heap;","    self.peer = null;","    self.index = 0;","    self.range = null;","}","","PeerHeapElement.prototype.rescore = function rescore(range) {","    var self = this;","","    if (!self.heap) {","        return;","    }","","    self.range = self.peer.scoreRange;","    self.index = self.heap.siftup(self.index);","    self.index = self.heap.siftdown(self.index);","};",""],"l":{"23":1,"25":1,"31":1,"33":1,"34":0,"35":0,"36":0,"38":0,"39":0,"43":0,"44":0,"46":0,"51":1,"52":0,"54":0,"55":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"65":0,"66":0,"67":0,"71":0,"72":0,"74":0,"77":0,"78":0,"80":0,"81":0,"82":0,"84":0,"85":0,"90":0,"91":0,"94":0,"95":0,"96":0,"98":0,"100":0,"108":0,"111":0,"112":0,"115":0,"116":0,"117":0,"118":0,"119":0,"121":0,"123":0,"127":0,"128":0,"129":0,"130":0,"132":0,"133":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"150":0,"151":0,"152":0,"155":0,"160":1,"162":1,"163":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"172":0,"173":0,"174":0,"177":1,"178":0,"180":0,"181":0,"182":0,"183":0,"186":1,"187":0,"189":0,"190":0,"191":0,"193":0,"196":1,"197":0,"199":0,"200":0,"203":0,"204":0,"208":1,"209":0,"211":0,"212":0,"215":0,"216":0,"217":0,"220":0,"221":0,"222":0,"223":0,"226":0,"227":0,"228":0,"231":1,"232":0,"234":0,"235":0,"236":0,"237":0,"239":0,"240":0,"243":1,"244":0,"245":0,"247":0,"248":0,"251":0,"252":0,"253":0,"256":0,"257":0,"258":0,"260":0,"263":1,"264":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"275":0,"276":0,"277":0,"279":0,"282":0,"283":0,"284":0,"286":0,"287":0,"288":0,"289":0,"294":1,"295":0,"297":0,"298":0,"299":0,"300":0,"301":0,"303":0,"304":0,"305":0,"306":0,"310":0,"311":0,"312":0,"314":0,"317":1,"318":0,"320":0,"321":0,"323":0,"324":0,"325":0,"326":0,"328":0,"329":0,"330":0,"332":0,"333":0,"334":0,"337":1,"338":0,"340":0,"341":0,"342":0,"343":0,"346":1,"347":0,"349":0,"350":0,"353":0,"354":0,"355":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/services.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/services.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":1,"50":0,"51":1,"52":0,"53":1,"54":0,"55":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"TChannelServices","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":28}}},"2":{"name":"errorIfExceedsMaxPending","line":37,"loc":{"start":{"line":37,"column":54},"end":{"line":37,"column":93}}},"3":{"name":"onRequest","line":51,"loc":{"start":{"line":51,"column":39},"end":{"line":51,"column":63}}},"4":{"name":"onRequestResponse","line":69,"loc":{"start":{"line":69,"column":47},"end":{"line":69,"column":79}}},"5":{"name":"onRequestError","line":79,"loc":{"start":{"line":79,"column":44},"end":{"line":79,"column":73}}},"6":{"name":"TChannelService","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":27}}},"7":{"name":"errorIfExceedsMaxPending","line":95,"loc":{"start":{"line":95,"column":53},"end":{"line":95,"column":89}}},"8":{"name":"onRequest","line":104,"loc":{"start":{"line":104,"column":38},"end":{"line":104,"column":59}}},"9":{"name":"onRequestResponse","line":108,"loc":{"start":{"line":108,"column":46},"end":{"line":108,"column":75}}},"10":{"name":"onRequestError","line":112,"loc":{"start":{"line":112,"column":43},"end":{"line":112,"column":69}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":25,"column":0},"end":{"line":35,"column":1}},"3":{"start":{"line":31,"column":4},"end":{"line":31,"column":23}},"4":{"start":{"line":32,"column":4},"end":{"line":32,"column":41}},"5":{"start":{"line":33,"column":4},"end":{"line":33,"column":31}},"6":{"start":{"line":34,"column":4},"end":{"line":34,"column":21}},"7":{"start":{"line":37,"column":0},"end":{"line":49,"column":2}},"8":{"start":{"line":38,"column":4},"end":{"line":42,"column":5}},"9":{"start":{"line":39,"column":8},"end":{"line":41,"column":11}},"10":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"11":{"start":{"line":44,"column":8},"end":{"line":44,"column":20}},"12":{"start":{"line":46,"column":4},"end":{"line":46,"column":43}},"13":{"start":{"line":47,"column":4},"end":{"line":47,"column":44}},"14":{"start":{"line":48,"column":4},"end":{"line":48,"column":57}},"15":{"start":{"line":51,"column":0},"end":{"line":67,"column":2}},"16":{"start":{"line":52,"column":4},"end":{"line":52,"column":19}},"17":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"18":{"start":{"line":54,"column":8},"end":{"line":54,"column":15}},"19":{"start":{"line":56,"column":4},"end":{"line":56,"column":43}},"20":{"start":{"line":57,"column":4},"end":{"line":57,"column":44}},"21":{"start":{"line":58,"column":4},"end":{"line":65,"column":5}},"22":{"start":{"line":59,"column":8},"end":{"line":59,"column":40}},"23":{"start":{"line":60,"column":8},"end":{"line":60,"column":46}},"24":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"25":{"start":{"line":62,"column":12},"end":{"line":62,"column":59}},"26":{"start":{"line":64,"column":8},"end":{"line":64,"column":44}},"27":{"start":{"line":66,"column":4},"end":{"line":66,"column":24}},"28":{"start":{"line":69,"column":0},"end":{"line":77,"column":2}},"29":{"start":{"line":70,"column":4},"end":{"line":70,"column":19}},"30":{"start":{"line":71,"column":4},"end":{"line":73,"column":5}},"31":{"start":{"line":72,"column":8},"end":{"line":72,"column":15}},"32":{"start":{"line":74,"column":4},"end":{"line":74,"column":43}},"33":{"start":{"line":75,"column":4},"end":{"line":75,"column":44}},"34":{"start":{"line":76,"column":4},"end":{"line":76,"column":32}},"35":{"start":{"line":79,"column":0},"end":{"line":87,"column":2}},"36":{"start":{"line":80,"column":4},"end":{"line":80,"column":19}},"37":{"start":{"line":81,"column":4},"end":{"line":83,"column":5}},"38":{"start":{"line":82,"column":8},"end":{"line":82,"column":15}},"39":{"start":{"line":84,"column":4},"end":{"line":84,"column":43}},"40":{"start":{"line":85,"column":4},"end":{"line":85,"column":44}},"41":{"start":{"line":86,"column":4},"end":{"line":86,"column":29}},"42":{"start":{"line":89,"column":0},"end":{"line":93,"column":1}},"43":{"start":{"line":90,"column":4},"end":{"line":90,"column":28}},"44":{"start":{"line":91,"column":4},"end":{"line":91,"column":31}},"45":{"start":{"line":92,"column":4},"end":{"line":92,"column":21}},"46":{"start":{"line":95,"column":0},"end":{"line":102,"column":2}},"47":{"start":{"line":96,"column":4},"end":{"line":101,"column":5}},"48":{"start":{"line":97,"column":8},"end":{"line":100,"column":11}},"49":{"start":{"line":104,"column":0},"end":{"line":106,"column":2}},"50":{"start":{"line":105,"column":4},"end":{"line":105,"column":22}},"51":{"start":{"line":108,"column":0},"end":{"line":110,"column":2}},"52":{"start":{"line":109,"column":4},"end":{"line":109,"column":22}},"53":{"start":{"line":112,"column":0},"end":{"line":114,"column":2}},"54":{"start":{"line":113,"column":4},"end":{"line":113,"column":22}},"55":{"start":{"line":116,"column":0},"end":{"line":116,"column":34}}},"branchMap":{"1":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"2":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"3":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":11},"end":{"line":48,"column":18}},{"start":{"line":48,"column":22},"end":{"line":48,"column":56}}]},"4":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"5":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":58,"column":4}},{"start":{"line":58,"column":4},"end":{"line":58,"column":4}}]},"6":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"7":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"8":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"9":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var errors = require('./errors');","","function TChannelServices() {","    // Maps service name with '$' prefix to service tracking object.","    // The prefix ensures that we cannot be lost or confused if some joker","    // names their service 'toString' or '__proto__'.","    // '_' as a prefix would still be confused by '_proto__', '__' would be","    // confused by 'proto__'.","    this.services = {};","    this.maxPendingForService = Infinity;","    this.maxPending = Infinity;","    this.pending = 0;","}","","TChannelServices.prototype.errorIfExceedsMaxPending = function errorIfExceedsMaxPending(req) {","    if (this.pending >= this.maxPending) {","        return errors.MaxPendingError({","            pending: this.pending","        });","    }","    if (!req.serviceName) {","        return null;","    }","    var serviceKey = '$' + req.serviceName;","    var service = this.services[serviceKey];","    return service && service.errorIfExceedsMaxPending();","};","","TChannelServices.prototype.onRequest = function onRequest(req) {","    this.pending++;","    if (!req.serviceName) {","        return;","    }","    var serviceKey = '$' + req.serviceName;","    var service = this.services[serviceKey];","    if (!service) {","        service = new TChannelService();","        service.serviceName = req.serviceName;","        if (this.maxPendingForService !== undefined) {","            service.maxPending = this.maxPendingForService;","        }","        this.services[serviceKey] = service;","    }","    service.onRequest();","};","","TChannelServices.prototype.onRequestResponse = function onRequestResponse(req) {","    this.pending--;","    if (!req.serviceName) {","        return;","    }","    var serviceKey = '$' + req.serviceName;","    var service = this.services[serviceKey];","    service.onRequestResponse();","};","","TChannelServices.prototype.onRequestError = function onRequestError(req) {","    this.pending--;","    if (!req.serviceName) {","        return;","    }","    var serviceKey = '$' + req.serviceName;","    var service = this.services[serviceKey];","    service.onRequestError();","};","","function TChannelService() {","    this.serviceName = null;","    this.maxPending = Infinity;","    this.pending = 0;","}","","TChannelService.prototype.errorIfExceedsMaxPending = function errorIfExceedsMaxPending() {","    if (this.pending >= this.maxPending) {","        return errors.MaxPendingForServiceError({","            serviceName: this.serviceName,","            pending: this.pending","        });","    }","};","","TChannelService.prototype.onRequest = function onRequest() {","    this.pending += 1;","};","","TChannelService.prototype.onRequestResponse = function onRequestResponse() {","    this.pending -= 1;","};","","TChannelService.prototype.onRequestError = function onRequestError() {","    this.pending -= 1;","};","","module.exports = TChannelServices;",""],"l":{"23":1,"25":1,"31":0,"32":0,"33":0,"34":0,"37":1,"38":0,"39":0,"43":0,"44":0,"46":0,"47":0,"48":0,"51":1,"52":0,"53":0,"54":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"66":0,"69":1,"70":0,"71":0,"72":0,"74":0,"75":0,"76":0,"79":1,"80":0,"81":0,"82":0,"84":0,"85":0,"86":0,"89":1,"90":0,"91":0,"92":0,"95":1,"96":0,"97":0,"104":1,"105":0,"108":1,"109":0,"112":1,"113":0,"116":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/time_heap.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/time_heap.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":1,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":1,"144":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"fnMap":{"1":{"name":"TimeHeap","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":27}}},"2":{"name":"boundDrainExpired","line":91,"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":33}}},"3":{"name":"clear","line":99,"loc":{"start":{"line":99,"column":27},"end":{"line":99,"column":44}}},"4":{"name":"getNextTimeout","line":110,"loc":{"start":{"line":110,"column":36},"end":{"line":110,"column":65}}},"5":{"name":"update","line":122,"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":55}}},"6":{"name":"scheduleDrainExpired","line":140,"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":35}}},"7":{"name":"setNextTimer","line":151,"loc":{"start":{"line":151,"column":34},"end":{"line":151,"column":61}}},"8":{"name":"onTimeout","line":161,"loc":{"start":{"line":161,"column":4},"end":{"line":161,"column":25}}},"9":{"name":"onTimeout","line":167,"loc":{"start":{"line":167,"column":31},"end":{"line":167,"column":55}}},"10":{"name":"drainExpired","line":178,"loc":{"start":{"line":178,"column":34},"end":{"line":178,"column":61}}},"11":{"name":"callExpiredTimeouts","line":206,"loc":{"start":{"line":206,"column":41},"end":{"line":206,"column":75}}},"12":{"name":"push","line":215,"loc":{"start":{"line":215,"column":26},"end":{"line":215,"column":58}}},"13":{"name":"pop","line":230,"loc":{"start":{"line":230,"column":25},"end":{"line":230,"column":40}}},"14":{"name":"siftdown","line":248,"loc":{"start":{"line":248,"column":30},"end":{"line":248,"column":51}}},"15":{"name":"siftup","line":274,"loc":{"start":{"line":274,"column":28},"end":{"line":274,"column":47}}},"16":{"name":"swap","line":289,"loc":{"start":{"line":289,"column":26},"end":{"line":289,"column":46}}},"17":{"name":"TimeHeapElement","line":297,"loc":{"start":{"line":297,"column":0},"end":{"line":297,"column":27}}},"18":{"name":"cancel","line":302,"loc":{"start":{"line":302,"column":35},"end":{"line":302,"column":53}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":34}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":26}},"4":{"start":{"line":29,"column":0},"end":{"line":33,"column":2}},"5":{"start":{"line":73,"column":0},"end":{"line":97,"column":1}},"6":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}},"7":{"start":{"line":75,"column":4},"end":{"line":75,"column":28}},"8":{"start":{"line":77,"column":4},"end":{"line":77,"column":49}},"9":{"start":{"line":78,"column":4},"end":{"line":78,"column":49}},"10":{"start":{"line":79,"column":4},"end":{"line":79,"column":20}},"11":{"start":{"line":80,"column":4},"end":{"line":80,"column":22}},"12":{"start":{"line":81,"column":4},"end":{"line":81,"column":38}},"13":{"start":{"line":82,"column":4},"end":{"line":82,"column":22}},"14":{"start":{"line":83,"column":4},"end":{"line":83,"column":17}},"15":{"start":{"line":84,"column":4},"end":{"line":84,"column":21}},"16":{"start":{"line":85,"column":4},"end":{"line":85,"column":24}},"17":{"start":{"line":87,"column":4},"end":{"line":87,"column":31}},"18":{"start":{"line":89,"column":4},"end":{"line":89,"column":47}},"19":{"start":{"line":91,"column":4},"end":{"line":96,"column":5}},"20":{"start":{"line":92,"column":8},"end":{"line":92,"column":38}},"21":{"start":{"line":93,"column":8},"end":{"line":93,"column":35}},"22":{"start":{"line":95,"column":8},"end":{"line":95,"column":31}},"23":{"start":{"line":99,"column":0},"end":{"line":108,"column":2}},"24":{"start":{"line":100,"column":4},"end":{"line":100,"column":20}},"25":{"start":{"line":102,"column":4},"end":{"line":102,"column":41}},"26":{"start":{"line":103,"column":4},"end":{"line":103,"column":20}},"27":{"start":{"line":104,"column":4},"end":{"line":104,"column":22}},"28":{"start":{"line":105,"column":4},"end":{"line":105,"column":22}},"29":{"start":{"line":106,"column":4},"end":{"line":106,"column":38}},"30":{"start":{"line":107,"column":4},"end":{"line":107,"column":17}},"31":{"start":{"line":110,"column":0},"end":{"line":120,"column":2}},"32":{"start":{"line":111,"column":4},"end":{"line":111,"column":20}},"33":{"start":{"line":113,"column":4},"end":{"line":113,"column":49}},"34":{"start":{"line":114,"column":4},"end":{"line":118,"column":5}},"35":{"start":{"line":115,"column":8},"end":{"line":115,"column":58}},"36":{"start":{"line":116,"column":11},"end":{"line":118,"column":5}},"37":{"start":{"line":117,"column":8},"end":{"line":117,"column":53}},"38":{"start":{"line":119,"column":4},"end":{"line":119,"column":19}},"39":{"start":{"line":122,"column":0},"end":{"line":137,"column":2}},"40":{"start":{"line":123,"column":4},"end":{"line":123,"column":20}},"41":{"start":{"line":125,"column":4},"end":{"line":127,"column":5}},"42":{"start":{"line":126,"column":8},"end":{"line":126,"column":32}},"43":{"start":{"line":129,"column":4},"end":{"line":129,"column":35}},"44":{"start":{"line":130,"column":4},"end":{"line":130,"column":34}},"45":{"start":{"line":131,"column":4},"end":{"line":131,"column":34}},"46":{"start":{"line":133,"column":4},"end":{"line":135,"column":5}},"47":{"start":{"line":134,"column":8},"end":{"line":134,"column":31}},"48":{"start":{"line":136,"column":4},"end":{"line":136,"column":25}},"49":{"start":{"line":139,"column":0},"end":{"line":149,"column":2}},"50":{"start":{"line":141,"column":4},"end":{"line":141,"column":20}},"51":{"start":{"line":143,"column":4},"end":{"line":145,"column":5}},"52":{"start":{"line":144,"column":8},"end":{"line":144,"column":15}},"53":{"start":{"line":147,"column":4},"end":{"line":147,"column":30}},"54":{"start":{"line":148,"column":4},"end":{"line":148,"column":41}},"55":{"start":{"line":151,"column":0},"end":{"line":165,"column":2}},"56":{"start":{"line":152,"column":4},"end":{"line":152,"column":20}},"57":{"start":{"line":154,"column":4},"end":{"line":156,"column":5}},"58":{"start":{"line":155,"column":8},"end":{"line":155,"column":45}},"59":{"start":{"line":158,"column":4},"end":{"line":158,"column":43}},"60":{"start":{"line":159,"column":4},"end":{"line":159,"column":60}},"61":{"start":{"line":161,"column":4},"end":{"line":164,"column":5}},"62":{"start":{"line":162,"column":8},"end":{"line":162,"column":37}},"63":{"start":{"line":163,"column":8},"end":{"line":163,"column":29}},"64":{"start":{"line":167,"column":0},"end":{"line":176,"column":2}},"65":{"start":{"line":168,"column":4},"end":{"line":168,"column":20}},"66":{"start":{"line":170,"column":4},"end":{"line":170,"column":22}},"67":{"start":{"line":171,"column":4},"end":{"line":171,"column":23}},"68":{"start":{"line":172,"column":4},"end":{"line":172,"column":27}},"69":{"start":{"line":173,"column":4},"end":{"line":175,"column":5}},"70":{"start":{"line":174,"column":8},"end":{"line":174,"column":31}},"71":{"start":{"line":178,"column":0},"end":{"line":204,"column":2}},"72":{"start":{"line":179,"column":4},"end":{"line":179,"column":20}},"73":{"start":{"line":181,"column":4},"end":{"line":183,"column":5}},"74":{"start":{"line":182,"column":8},"end":{"line":182,"column":15}},"75":{"start":{"line":185,"column":4},"end":{"line":185,"column":52}},"76":{"start":{"line":187,"column":4},"end":{"line":192,"column":5}},"77":{"start":{"line":188,"column":8},"end":{"line":188,"column":30}},"78":{"start":{"line":189,"column":8},"end":{"line":191,"column":9}},"79":{"start":{"line":190,"column":12},"end":{"line":190,"column":36}},"80":{"start":{"line":193,"column":4},"end":{"line":201,"column":5}},"81":{"start":{"line":200,"column":8},"end":{"line":200,"column":38}},"82":{"start":{"line":203,"column":4},"end":{"line":203,"column":24}},"83":{"start":{"line":206,"column":0},"end":{"line":213,"column":2}},"84":{"start":{"line":207,"column":4},"end":{"line":207,"column":20}},"85":{"start":{"line":209,"column":4},"end":{"line":212,"column":5}},"86":{"start":{"line":210,"column":8},"end":{"line":210,"column":40}},"87":{"start":{"line":211,"column":8},"end":{"line":211,"column":28}},"88":{"start":{"line":215,"column":0},"end":{"line":228,"column":2}},"89":{"start":{"line":216,"column":4},"end":{"line":216,"column":20}},"90":{"start":{"line":218,"column":4},"end":{"line":218,"column":21}},"91":{"start":{"line":219,"column":4},"end":{"line":222,"column":5}},"92":{"start":{"line":220,"column":8},"end":{"line":220,"column":30}},"93":{"start":{"line":221,"column":8},"end":{"line":221,"column":47}},"94":{"start":{"line":223,"column":4},"end":{"line":223,"column":27}},"95":{"start":{"line":224,"column":4},"end":{"line":224,"column":31}},"96":{"start":{"line":225,"column":4},"end":{"line":225,"column":19}},"97":{"start":{"line":226,"column":4},"end":{"line":226,"column":21}},"98":{"start":{"line":227,"column":4},"end":{"line":227,"column":26}},"99":{"start":{"line":230,"column":0},"end":{"line":246,"column":2}},"100":{"start":{"line":231,"column":4},"end":{"line":231,"column":20}},"101":{"start":{"line":233,"column":4},"end":{"line":235,"column":5}},"102":{"start":{"line":234,"column":8},"end":{"line":234,"column":20}},"103":{"start":{"line":237,"column":4},"end":{"line":237,"column":27}},"104":{"start":{"line":238,"column":4},"end":{"line":238,"column":15}},"105":{"start":{"line":239,"column":4},"end":{"line":239,"column":27}},"106":{"start":{"line":240,"column":4},"end":{"line":240,"column":21}},"107":{"start":{"line":242,"column":4},"end":{"line":242,"column":23}},"108":{"start":{"line":243,"column":4},"end":{"line":243,"column":22}},"109":{"start":{"line":244,"column":4},"end":{"line":244,"column":19}},"110":{"start":{"line":245,"column":4},"end":{"line":245,"column":16}},"111":{"start":{"line":248,"column":0},"end":{"line":272,"column":2}},"112":{"start":{"line":249,"column":4},"end":{"line":249,"column":20}},"113":{"start":{"line":251,"column":4},"end":{"line":271,"column":5}},"114":{"start":{"line":252,"column":8},"end":{"line":252,"column":31}},"115":{"start":{"line":253,"column":8},"end":{"line":253,"column":29}},"116":{"start":{"line":254,"column":8},"end":{"line":270,"column":9}},"117":{"start":{"line":256,"column":12},"end":{"line":263,"column":13}},"118":{"start":{"line":258,"column":16},"end":{"line":258,"column":36}},"119":{"start":{"line":259,"column":16},"end":{"line":259,"column":26}},"120":{"start":{"line":261,"column":16},"end":{"line":261,"column":35}},"121":{"start":{"line":262,"column":16},"end":{"line":262,"column":25}},"122":{"start":{"line":264,"column":15},"end":{"line":270,"column":9}},"123":{"start":{"line":266,"column":12},"end":{"line":266,"column":32}},"124":{"start":{"line":267,"column":12},"end":{"line":267,"column":22}},"125":{"start":{"line":269,"column":12},"end":{"line":269,"column":21}},"126":{"start":{"line":274,"column":0},"end":{"line":287,"column":2}},"127":{"start":{"line":275,"column":4},"end":{"line":275,"column":20}},"128":{"start":{"line":277,"column":4},"end":{"line":285,"column":5}},"129":{"start":{"line":278,"column":8},"end":{"line":278,"column":42}},"130":{"start":{"line":279,"column":8},"end":{"line":284,"column":9}},"131":{"start":{"line":280,"column":12},"end":{"line":280,"column":30}},"132":{"start":{"line":281,"column":12},"end":{"line":281,"column":20}},"133":{"start":{"line":283,"column":12},"end":{"line":283,"column":18}},"134":{"start":{"line":286,"column":4},"end":{"line":286,"column":13}},"135":{"start":{"line":289,"column":0},"end":{"line":295,"column":2}},"136":{"start":{"line":290,"column":4},"end":{"line":290,"column":20}},"137":{"start":{"line":292,"column":4},"end":{"line":292,"column":28}},"138":{"start":{"line":293,"column":4},"end":{"line":293,"column":34}},"139":{"start":{"line":294,"column":4},"end":{"line":294,"column":24}},"140":{"start":{"line":297,"column":0},"end":{"line":300,"column":1}},"141":{"start":{"line":298,"column":4},"end":{"line":298,"column":24}},"142":{"start":{"line":299,"column":4},"end":{"line":299,"column":21}},"143":{"start":{"line":302,"column":0},"end":{"line":304,"column":2}},"144":{"start":{"line":303,"column":4},"end":{"line":303,"column":21}}},"branchMap":{"1":{"line":75,"type":"binary-expr","locations":[{"start":{"line":75,"column":14},"end":{"line":75,"column":21}},{"start":{"line":75,"column":25},"end":{"line":75,"column":27}}]},"2":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":18},"end":{"line":77,"column":32}},{"start":{"line":77,"column":36},"end":{"line":77,"column":48}}]},"3":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":22},"end":{"line":78,"column":40}},{"start":{"line":78,"column":44},"end":{"line":78,"column":48}}]},"4":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"5":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":11},"end":{"line":116,"column":11}},{"start":{"line":116,"column":11},"end":{"line":116,"column":11}}]},"6":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":4},"end":{"line":125,"column":4}},{"start":{"line":125,"column":4},"end":{"line":125,"column":4}}]},"7":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":133,"column":4}},{"start":{"line":133,"column":4},"end":{"line":133,"column":4}}]},"8":{"line":133,"type":"binary-expr","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":19}},{"start":{"line":133,"column":23},"end":{"line":133,"column":30}}]},"9":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":4},"end":{"line":143,"column":4}},{"start":{"line":143,"column":4},"end":{"line":143,"column":4}}]},"10":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":4},"end":{"line":154,"column":4}},{"start":{"line":154,"column":4},"end":{"line":154,"column":4}}]},"11":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"12":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"13":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":11},"end":{"line":187,"column":19}},{"start":{"line":187,"column":23},"end":{"line":187,"column":54}}]},"14":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":8},"end":{"line":189,"column":8}},{"start":{"line":189,"column":8},"end":{"line":189,"column":8}}]},"15":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]},"16":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":4},"end":{"line":219,"column":4}},{"start":{"line":219,"column":4},"end":{"line":219,"column":4}}]},"17":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":4},"end":{"line":233,"column":4}},{"start":{"line":233,"column":4},"end":{"line":233,"column":4}}]},"18":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":8},"end":{"line":254,"column":8}},{"start":{"line":254,"column":8},"end":{"line":254,"column":8}}]},"19":{"line":254,"type":"binary-expr","locations":[{"start":{"line":254,"column":12},"end":{"line":254,"column":27}},{"start":{"line":255,"column":12},"end":{"line":255,"column":66}}]},"20":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":12},"end":{"line":256,"column":12}},{"start":{"line":256,"column":12},"end":{"line":256,"column":12}}]},"21":{"line":256,"type":"binary-expr","locations":[{"start":{"line":256,"column":16},"end":{"line":256,"column":32}},{"start":{"line":257,"column":16},"end":{"line":257,"column":74}}]},"22":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":15},"end":{"line":264,"column":15}},{"start":{"line":264,"column":15},"end":{"line":264,"column":15}}]},"23":{"line":264,"type":"binary-expr","locations":[{"start":{"line":264,"column":19},"end":{"line":264,"column":35}},{"start":{"line":265,"column":19},"end":{"line":265,"column":74}}]},"24":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":8},"end":{"line":279,"column":8}},{"start":{"line":279,"column":8},"end":{"line":279,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var setImmediate = require('timers').setImmediate;","","var DRAIN_LOOP_MAX_DURATION = 100; // ms","","module.exports = TimeHeap;","","var globalTimers = {","    setTimeout: require('timers').setTimeout,","    clearTimeout: require('timers').clearTimeout,","    now: Date.now","};","","/* A specialized min-time heap"," *"," * new TimeHeap({"," *   timer: {now, setTimeout, clearTimeout},"," *   minTimeout: Number | (now) -> Number"," * })"," *"," * The items on the heap must have two properties:"," * - item.timeout is ms timeout, relative to heap add time"," * - item.onTimeout is a callback which gets called once the item has expired;"," *   the callback is passed the current time in ms."," *"," * Overview:"," * - timeHeap.array is an array of TimeHeapElement objects"," *"," * - timeHeap.lastTime is the timestamp (ms) that all times in the heap are"," *   relative to"," *"," * - timeHeap.timer is the currently pending timer object or null"," *"," * - timeHeap.expired are any items pending having their .onTimeout called; this"," *   call is defered until next tick after a drain to avoid any heap"," *   interactions/changes while draining (if the callback adds something else"," *   to the heap)"," *"," * The primary public API is:"," *     timeHeap.update(item, ?now)"," *"," * Note the method is is intentionally not named something simple like \"add\" or"," * \"append\" since it does a bit more:"," * - pop any expired times, and defer a call to their .onTimeout"," * - push the new item and its expiration time onto the heap"," * - set a timer if there is none or the newly added item is the next to expire"," *"," * TODO: shrink array if end is << array.length/2 (trigger in pop and/or a"," * sweep on an interval)"," */","","function TimeHeap(options) {","    var self = this;","    options = options || {};","","    self.timers = options.timers || globalTimers;","    self.minTimeout = options.minTimeout || null;","    self.array = [];","    self.expired = [];","    self.lastTime = self.timers.now();","    self.timer = null;","    self.end = 0;","    self.lastRun = 0;","    self.drainUntil = 0;","","    self.scheduledDrain = null;","","    self.boundDrainExpired = boundDrainExpired;","","    function boundDrainExpired() {","        var now = self.scheduledDrain;","        self.scheduledDrain = null;","","        self.drainExpired(now);","    }","}","","TimeHeap.prototype.clear = function clear() {","    var self = this;","","    self.timers.clearTimeout(self.timer);","    self.array = [];","    self.expired = [];","    self.timer = null;","    self.lastTime = self.timers.now();","    self.end = 0;","};","","TimeHeap.prototype.getNextTimeout = function getNextTimeout(now) {","    var self = this;","","    var timeout = self.array[0].expireTime - now;","    if (typeof self.minTimeout === 'function') {","        timeout = Math.max(self.minTimeout(now), timeout);","    } else if (typeof self.minTimeout === 'number') {","        timeout = Math.max(self.minTimeout, timeout);","    }","    return timeout;","};","","TimeHeap.prototype.update = function update(item, now) {","    var self = this;","","    if (now === undefined) {","        now = self.timers.now();","    }","","    self.scheduleDrainExpired(now);","    var time = now + item.timeout;","    var i = self.push(item, time);","    // update timer if none, or the newly added item is the new root","    if (!self.timer || i === 0) {","        self.setNextTimer(now);","    }","    return self.array[i];","};","","TimeHeap.prototype.scheduleDrainExpired =","function scheduleDrainExpired(now) {","    var self = this;","","    if (self.scheduledDrain) {","        return;","    }","","    self.scheduledDrain = now;","    setImmediate(self.boundDrainExpired);","};","","TimeHeap.prototype.setNextTimer = function setNextTimer(now) {","    var self = this;","","    if (self.timer) {","        self.timers.clearTimeout(self.timer);","    }","","    var timeout = self.getNextTimeout(now);","    self.timer = self.timers.setTimeout(onTimeout, timeout);","","    function onTimeout() {","        var now2 = self.timers.now();","        self.onTimeout(now2);","    }","};","","TimeHeap.prototype.onTimeout = function onTimeout(now) {","    var self = this;","","    self.timer = null;","    self.lastRun = now;","    self.drainExpired(now);","    if (self.end) {","        self.setNextTimer(now);","    }","};","","TimeHeap.prototype.drainExpired = function drainExpired(now) {","    var self = this;","","    if (now < self.drainUntil) {","        return;","    }","","    self.drainUntil = now + DRAIN_LOOP_MAX_DURATION;","","    while (self.end && self.array[0].expireTime <= now) {","        var item = self.pop();","        if (item) {","            self.expired.push(item);","        }","    }","    if (self.expired.length) {","        // callExpiredTimeouts can re-enter drainExpired by calling popOutReq,","        // which in turn calls update, and then back to drainExpired.","        // The drainUntil shorts this recursive loop.","        // The solution uses a timer instead of a flag to ensure that drain","        // resumes even if an exception halts the loop prematurely without","        // incurring the cost of try/finally.","        self.callExpiredTimeouts(now);","    }","","    self.drainUntil = 0;","};","","TimeHeap.prototype.callExpiredTimeouts = function callExpiredTimeouts(now) {","    var self = this;","","    while (self.expired.length) {","        var item = self.expired.shift();","        item.onTimeout(now);","    }","};","","TimeHeap.prototype.push = function push(item, expireTime) {","    var self = this;","","    var i = self.end;","    if (i >= self.array.length) {","        i = self.array.length;","        self.array.push(new TimeHeapElement());","    }","    var el = self.array[i];","    el.expireTime = expireTime;","    el.item = item;","    self.end = i + 1;","    return self.siftup(i);","};","","TimeHeap.prototype.pop = function pop() {","    var self = this;","","    if (!self.end) {","        return null;","    }","","    var el = self.array[0];","    self.end--;","    self.swap(0, self.end);","    self.siftdown(0);","","    var item = el.item;","    el.expireTime = 0;","    el.item = null;","    return item;","};","","TimeHeap.prototype.siftdown = function siftdown(i) {","    var self = this;","","    for (;;) {","        var left = (2 * i) + 1;","        var right = left + 1;","        if (left < self.end &&","            self.array[left].expireTime < self.array[i].expireTime) {","            if (right < self.end &&","                self.array[right].expireTime < self.array[left].expireTime) {","                self.swap(i, right);","                i = right;","            } else {","                self.swap(i, left);","                i = left;","            }","        } else if (right < self.end &&","                   self.array[right].expireTime < self.array[i].expireTime) {","            self.swap(i, right);","            i = right;","        } else {","            return i;","        }","    }","};","","TimeHeap.prototype.siftup = function siftup(i) {","    var self = this;","","    while (i > 0) {","        var par = Math.floor((i - 1) / 2);","        if (self.array[i].expireTime < self.array[par].expireTime) {","            self.swap(i, par);","            i = par;","        } else {","            break;","        }","    }","    return i;","};","","TimeHeap.prototype.swap = function swap(i, j) {","    var self = this;","","    var tmp = self.array[i];","    self.array[i] = self.array[j];","    self.array[j] = tmp;","};","","function TimeHeapElement() {","    this.expireTime = 0;","    this.item = null;","}","","TimeHeapElement.prototype.cancel = function cancel() {","    this.item = null;","};",""],"l":{"23":1,"25":1,"27":1,"29":1,"73":1,"74":0,"75":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"87":0,"89":0,"91":1,"92":0,"93":0,"95":0,"99":1,"100":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"110":1,"111":0,"113":0,"114":0,"115":0,"116":0,"117":0,"119":0,"122":1,"123":0,"125":0,"126":0,"129":0,"130":0,"131":0,"133":0,"134":0,"136":0,"139":1,"141":0,"143":0,"144":0,"147":0,"148":0,"151":1,"152":0,"154":0,"155":0,"158":0,"159":0,"161":1,"162":0,"163":0,"167":1,"168":0,"170":0,"171":0,"172":0,"173":0,"174":0,"178":1,"179":0,"181":0,"182":0,"185":0,"187":0,"188":0,"189":0,"190":0,"193":0,"200":0,"203":0,"206":1,"207":0,"209":0,"210":0,"211":0,"215":1,"216":0,"218":0,"219":0,"220":0,"221":0,"223":0,"224":0,"225":0,"226":0,"227":0,"230":1,"231":0,"233":0,"234":0,"237":0,"238":0,"239":0,"240":0,"242":0,"243":0,"244":0,"245":0,"248":1,"249":0,"251":0,"252":0,"253":0,"254":0,"256":0,"258":0,"259":0,"261":0,"262":0,"264":0,"266":0,"267":0,"269":0,"274":1,"275":0,"277":0,"278":0,"279":0,"280":0,"281":0,"283":0,"286":0,"289":1,"290":0,"292":0,"293":0,"294":0,"297":1,"298":0,"299":0,"302":1,"303":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer-file-watcher.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/peer-file-watcher.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"PeerFileWatcher","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":40}}},"2":{"name":"_boundReload","line":44,"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":28}}},"3":{"name":"_validateFilePath","line":49,"loc":{"start":{"line":49,"column":46},"end":{"line":49,"column":75}}},"4":{"name":"_readPeerListFromFileSync","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":37}}},"5":{"name":"_establishFileWatcher","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":33}}},"6":{"name":"destroy","line":79,"loc":{"start":{"line":79,"column":36},"end":{"line":79,"column":55}}},"7":{"name":"reloadSync","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":22}}},"8":{"name":"reload","line":97,"loc":{"start":{"line":97,"column":0},"end":{"line":97,"column":18}}},"9":{"name":"onPeers","line":105,"loc":{"start":{"line":105,"column":4},"end":{"line":105,"column":36}}},"10":{"name":"_readPeerList","line":119,"loc":{"start":{"line":119,"column":0},"end":{"line":119,"column":27}}},"11":{"name":"onFile","line":122,"loc":{"start":{"line":122,"column":4},"end":{"line":122,"column":31}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":53}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":31}},"4":{"start":{"line":27,"column":0},"end":{"line":47,"column":1}},"5":{"start":{"line":28,"column":4},"end":{"line":28,"column":20}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":55}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":34}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":56}},"10":{"start":{"line":34,"column":4},"end":{"line":34,"column":33}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":37}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":29}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":33}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":22}},"15":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"16":{"start":{"line":45,"column":8},"end":{"line":45,"column":22}},"17":{"start":{"line":49,"column":0},"end":{"line":53,"column":2}},"18":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"19":{"start":{"line":51,"column":8},"end":{"line":51,"column":74}},"20":{"start":{"line":55,"column":0},"end":{"line":62,"column":2}},"21":{"start":{"line":57,"column":4},"end":{"line":57,"column":70}},"22":{"start":{"line":58,"column":4},"end":{"line":60,"column":5}},"23":{"start":{"line":59,"column":8},"end":{"line":59,"column":86}},"24":{"start":{"line":61,"column":4},"end":{"line":61,"column":20}},"25":{"start":{"line":64,"column":0},"end":{"line":77,"column":2}},"26":{"start":{"line":73,"column":4},"end":{"line":76,"column":26}},"27":{"start":{"line":79,"column":0},"end":{"line":81,"column":2}},"28":{"start":{"line":80,"column":4},"end":{"line":80,"column":53}},"29":{"start":{"line":86,"column":0},"end":{"line":94,"column":2}},"30":{"start":{"line":88,"column":4},"end":{"line":90,"column":7}},"31":{"start":{"line":92,"column":4},"end":{"line":92,"column":52}},"32":{"start":{"line":93,"column":4},"end":{"line":93,"column":39}},"33":{"start":{"line":96,"column":0},"end":{"line":116,"column":2}},"34":{"start":{"line":98,"column":4},"end":{"line":98,"column":20}},"35":{"start":{"line":99,"column":4},"end":{"line":101,"column":7}},"36":{"start":{"line":103,"column":4},"end":{"line":103,"column":32}},"37":{"start":{"line":105,"column":4},"end":{"line":115,"column":5}},"38":{"start":{"line":106,"column":8},"end":{"line":112,"column":9}},"39":{"start":{"line":107,"column":12},"end":{"line":110,"column":15}},"40":{"start":{"line":111,"column":12},"end":{"line":111,"column":19}},"41":{"start":{"line":114,"column":8},"end":{"line":114,"column":43}},"42":{"start":{"line":118,"column":0},"end":{"line":134,"column":2}},"43":{"start":{"line":120,"column":4},"end":{"line":120,"column":47}},"44":{"start":{"line":122,"column":4},"end":{"line":133,"column":5}},"45":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"46":{"start":{"line":124,"column":12},"end":{"line":124,"column":27}},"47":{"start":{"line":127,"column":8},"end":{"line":127,"column":40}},"48":{"start":{"line":128,"column":8},"end":{"line":130,"column":9}},"49":{"start":{"line":129,"column":12},"end":{"line":129,"column":32}},"50":{"start":{"line":132,"column":8},"end":{"line":132,"column":27}},"51":{"start":{"line":136,"column":0},"end":{"line":136,"column":33}}},"branchMap":{"1":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":27},"end":{"line":33,"column":47}},{"start":{"line":33,"column":51},"end":{"line":33,"column":55}}]},"2":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"3":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":58,"column":4}},{"start":{"line":58,"column":4},"end":{"line":58,"column":4}}]},"4":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"5":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":123,"column":8}},{"start":{"line":123,"column":8},"end":{"line":123,"column":8}}]},"6":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var safeJSONParse = require('safe-json-parse/tuple');","var fs = require('fs');","var assert = require('assert');","","function PeerFileWatcher(channel, opts) {","    var self = this;","","    assert(channel.topChannel, 'must be a subChannel');","    this.channel = channel;","    this.peerFile = opts.peerFile;","    this.refreshInterval = opts.refreshInterval || 5007;","    this.logger = channel.logger;","","    this._boundReload = _boundReload;","","    this._validateFilePath();","    this._establishFileWatcher();","","    // Trigger an initial load","    this.reloadSync();","","    function _boundReload() {","        self.reload();","    }","}","","PeerFileWatcher.prototype._validateFilePath = function _validateFilePath() {","    if (!fs.existsSync(this.peerFile)) {","        assert(false, 'Peer hosts file does not exist: ' + this.peerFile);","    }","};","","PeerFileWatcher.prototype._readPeerListFromFileSync =","function _readPeerListFromFileSync() {","    var tuple = safeJSONParse(fs.readFileSync(this.peerFile, 'utf8'));","    if (tuple[0]) {","        assert(false, 'Invalid JSON for TChannel peer host file at ' + this.peerFile);","    }","    return tuple[1];","};","","PeerFileWatcher.prototype._establishFileWatcher =","function _establishFileWatcher() {","    // Use watchFile instead of watch here. watch uses inotify events,","    // but since we're getting renames every 30 seconds and the inode is","    // changing we'd need to keep creating new watches for every file and","    // eventually exhaust the kernel's inotify watch limit.","    //","    // watchFile instead polls with stat. Not as performant as inotify, but","    // better than watches eventually failing.","    fs.watchFile(this.peerFile, {","        interval: this.refreshInterval,","        persistent: true","    }, this._boundReload);","};","","PeerFileWatcher.prototype.destroy = function destroy() {","    fs.unwatchFile(this.peerFile, this._boundReload);","};","","/**"," * Load hosts from a JSON file and update peers in TChannel."," */","PeerFileWatcher.prototype.reloadSync =","function reloadSync() {","    this.logger.info('PeerFileWatcher: Loading peer list from file sync', {","        peerFile: this.peerFile","    });","","    var newPeers = this._readPeerListFromFileSync();","    this.channel.updatePeers(newPeers);","};","","PeerFileWatcher.prototype.reload =","function reload() {","    var self = this;","    this.logger.info('PeerFileWatcher: Loading peer list from file async', {","        peerFile: this.peerFile","    });","","    this._readPeerList(onPeers);","","    function onPeers(err, newPeers) {","        if (err) {","            self.logger.error('PeerFileWatcher: Could not load peers file', {","                peerFile: self.peerFile,","                error: err","            });","            return;","        }","","        self.channel.updatePeers(newPeers);","    }","};","","PeerFileWatcher.prototype._readPeerList =","function _readPeerList(cb) {","    fs.readFile(this.peerFile, 'utf8', onFile);","","    function onFile(err, text) {","        if (err) {","            return cb(err);","        }","","        var tuple = safeJSONParse(text);","        if (tuple[0]) {","            return cb(tuple[0]);","        }","","        cb(null, tuple[1]);","    }","};","","module.exports = PeerFileWatcher;",""],"l":{"23":1,"24":1,"25":1,"27":1,"28":0,"30":0,"31":0,"32":0,"33":0,"34":0,"36":0,"38":0,"39":0,"42":0,"44":1,"45":0,"49":1,"50":0,"51":0,"55":1,"57":0,"58":0,"59":0,"61":0,"64":1,"73":0,"79":1,"80":0,"86":1,"88":0,"92":0,"93":0,"96":1,"98":0,"99":0,"103":0,"105":1,"106":0,"107":0,"111":0,"114":0,"118":1,"120":0,"122":1,"123":0,"124":0,"127":0,"128":0,"129":0,"132":0,"136":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/trace/agent.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/trace/agent.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"Agent","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":24}}},"2":{"name":"compareTracingIds","line":47,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":37}}},"3":{"name":"setupNewSpan","line":56,"loc":{"start":{"line":56,"column":31},"end":{"line":56,"column":62}}},"4":{"name":"report","line":114,"loc":{"start":{"line":114,"column":25},"end":{"line":114,"column":47}}},"5":{"name":"nullReporter","line":120,"loc":{"start":{"line":120,"column":27},"end":{"line":120,"column":51}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":37}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":23}},"4":{"start":{"line":28,"column":0},"end":{"line":45,"column":1}},"5":{"start":{"line":29,"column":4},"end":{"line":29,"column":28}},"6":{"start":{"line":31,"column":4},"end":{"line":31,"column":33}},"7":{"start":{"line":36,"column":4},"end":{"line":36,"column":50}},"8":{"start":{"line":40,"column":4},"end":{"line":40,"column":51}},"9":{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},"10":{"start":{"line":43,"column":8},"end":{"line":43,"column":41}},"11":{"start":{"line":47,"column":0},"end":{"line":52,"column":1}},"12":{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},"13":{"start":{"line":49,"column":8},"end":{"line":49,"column":21}},"14":{"start":{"line":51,"column":4},"end":{"line":51,"column":50}},"15":{"start":{"line":56,"column":0},"end":{"line":112,"column":2}},"16":{"start":{"line":57,"column":4},"end":{"line":57,"column":54}},"17":{"start":{"line":58,"column":4},"end":{"line":58,"column":32}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":46}},"19":{"start":{"line":61,"column":4},"end":{"line":61,"column":23}},"20":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"21":{"start":{"line":63,"column":8},"end":{"line":63,"column":32}},"22":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"23":{"start":{"line":67,"column":8},"end":{"line":67,"column":31}},"24":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"25":{"start":{"line":71,"column":8},"end":{"line":71,"column":30}},"26":{"start":{"line":74,"column":4},"end":{"line":89,"column":7}},"27":{"start":{"line":91,"column":4},"end":{"line":91,"column":40}},"28":{"start":{"line":92,"column":4},"end":{"line":98,"column":5}},"29":{"start":{"line":93,"column":8},"end":{"line":97,"column":11}},"30":{"start":{"line":100,"column":4},"end":{"line":109,"column":5}},"31":{"start":{"line":103,"column":8},"end":{"line":103,"column":42}},"32":{"start":{"line":104,"column":8},"end":{"line":104,"column":30}},"33":{"start":{"line":105,"column":11},"end":{"line":109,"column":5}},"34":{"start":{"line":108,"column":8},"end":{"line":108,"column":27}},"35":{"start":{"line":111,"column":4},"end":{"line":111,"column":16}},"36":{"start":{"line":114,"column":0},"end":{"line":118,"column":2}},"37":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"38":{"start":{"line":116,"column":8},"end":{"line":116,"column":28}},"39":{"start":{"line":120,"column":0},"end":{"line":120,"column":54}}},"branchMap":{"1":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":14},"end":{"line":29,"column":21}},{"start":{"line":29,"column":25},"end":{"line":29,"column":27}}]},"2":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":22},"end":{"line":36,"column":40}},{"start":{"line":36,"column":44},"end":{"line":36,"column":49}}]},"3":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":23},"end":{"line":40,"column":42}},{"start":{"line":40,"column":46},"end":{"line":40,"column":50}}]},"4":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":48,"column":4}},{"start":{"line":48,"column":4},"end":{"line":48,"column":4}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":12}},{"start":{"line":48,"column":16},"end":{"line":48,"column":20}}]},"7":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":11},"end":{"line":51,"column":28}},{"start":{"line":51,"column":32},"end":{"line":51,"column":49}}]},"8":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"9":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"10":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"11":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":12},"end":{"line":82,"column":28}},{"start":{"line":82,"column":32},"end":{"line":82,"column":51}}]},"12":{"line":88,"type":"cond-expr","locations":[{"start":{"line":88,"column":33},"end":{"line":88,"column":34}},{"start":{"line":88,"column":37},"end":{"line":88,"column":50}}]},"13":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":92,"column":4}},{"start":{"line":92,"column":4},"end":{"line":92,"column":4}}]},"14":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":8},"end":{"line":92,"column":24}},{"start":{"line":92,"column":28},"end":{"line":92,"column":39}},{"start":{"line":92,"column":43},"end":{"line":92,"column":63}}]},"15":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"16":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":18}},{"start":{"line":100,"column":23},"end":{"line":100,"column":40}},{"start":{"line":100,"column":44},"end":{"line":100,"column":60}}]},"17":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":11},"end":{"line":105,"column":11}},{"start":{"line":105,"column":11},"end":{"line":105,"column":11}}]},"18":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":15},"end":{"line":105,"column":26}},{"start":{"line":105,"column":31},"end":{"line":105,"column":47}},{"start":{"line":105,"column":51},"end":{"line":105,"column":66}}]},"19":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":4},"end":{"line":115,"column":4}},{"start":{"line":115,"column":4},"end":{"line":115,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var Span = require('./span');","var errors = require('../errors.js');","","module.exports = Agent;","","function Agent(options) {","    options = options || {};","","    this.logger = options.logger;","","    // If this is set to true in a call to Agent#configure, all incoming","    // requests will have their traceflags forced to 1. It's intended to be","    // set on the 'top level service'.","    this.forceTrace = options.forceTrace || false;","","    // 'our' service name that is used as the service name on spans for","    // incoming reuqests","    this.serviceName = options.serviceName || null;","","    if (options.reporter) {","        this.reporter = options.reporter;","    }","}","","function compareTracingIds(id1, id2) {","    if (!id1 || !id2) {","        return false;","    }","    return id1[0] === id2[0] && id1[1] === id2[1];","}","","// ## setupNewSpan","// Sets up a new span for an outgoing rpc","Agent.prototype.setupNewSpan = function setupNewSpan(options) {","    var hostPortParts = options.remoteName.split(':');","    var host = hostPortParts[0];","    var port = parseInt(hostPortParts[1], 10);","","    var empty = [0, 0];","    if (compareTracingIds(empty, options.parentid)) {","        options.parentid = null;","    }","","    if (compareTracingIds(empty, options.traceid)) {","        options.traceid = null;","    }","","    if (compareTracingIds(empty, options.spanid)) {","        options.spanid = null;","    }","","    var span = new Span({","        endpoint: new Span.Endpoint(","            host,","            port,","            // If a service hasn't been specified on the tracer, use the","            // service on the incoming request. This is to handle the","            // case of the service router, which has a different service name","            // than the one specified in the incoming request.","            this.serviceName || options.serviceName","        ),","        name: options.name,","        id: options.spanid,","        parentid: options.parentid,","        traceid: options.traceid,","        flags: this.forceTrace ? 1 : options.flags","    });","","    var parentSpan = options.parentSpan;","    if (options.outgoing && !parentSpan && !options.hasNoParent) {","        throw errors.ParentRequired({","            parentSpan: parentSpan,","            hasNoParent: options.hasNoParent,","            serviceName: options.serviceName","        });","    }","","    if (parentSpan && (!options.parentid && !options.traceid)) {","        // If there's a parentSpan and the parentid and traceid weren't","        // specified, we need to propagate the ids from the parent span.","        span.propagateIdsFrom(parentSpan);","        span.generateSpanid();","    } else if (!parentSpan && (!options.traceid && !options.spanid)) {","        // No ids were specified and there's no parent span. Generate a new","        // id and use it as the spanid and traceid.","        span.generateIds();","    }","","    return span;","};","","Agent.prototype.report = function report(span) {","    if (span.flags & 0x01) {","        this.reporter(span);","    }","};","","Agent.prototype.reporter = function nullReporter() {};","",""],"l":{"23":1,"24":1,"26":1,"28":1,"29":0,"31":0,"36":0,"40":0,"42":0,"43":0,"47":1,"48":0,"49":0,"51":0,"56":1,"57":0,"58":0,"59":0,"61":0,"62":0,"63":0,"66":0,"67":0,"70":0,"71":0,"74":0,"91":0,"92":0,"93":0,"100":0,"103":0,"104":0,"105":0,"108":0,"111":0,"114":1,"115":0,"116":0,"120":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/trace/span.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/trace/span.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":0,"28":1,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":1,"37":0,"38":0,"39":1,"40":0,"41":1,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"Span","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":23}}},"2":{"name":"toString","line":54,"loc":{"start":{"line":54,"column":26},"end":{"line":54,"column":46}}},"3":{"name":"eachAnn","line":55,"loc":{"start":{"line":55,"column":46},"end":{"line":55,"column":68}}},"4":{"name":"toJSON","line":65,"loc":{"start":{"line":65,"column":24},"end":{"line":65,"column":42}}},"5":{"name":"generateIds","line":78,"loc":{"start":{"line":78,"column":29},"end":{"line":78,"column":52}}},"6":{"name":"generateSpanid","line":83,"loc":{"start":{"line":83,"column":32},"end":{"line":83,"column":58}}},"7":{"name":"propagateIdsFrom","line":88,"loc":{"start":{"line":88,"column":34},"end":{"line":88,"column":66}}},"8":{"name":"getTracing","line":94,"loc":{"start":{"line":94,"column":28},"end":{"line":94,"column":50}}},"9":{"name":"annotate","line":103,"loc":{"start":{"line":103,"column":26},"end":{"line":103,"column":62}}},"10":{"name":"annotateBinary","line":109,"loc":{"start":{"line":109,"column":0},"end":{"line":109,"column":42}}},"11":{"name":"Endpoint","line":113,"loc":{"start":{"line":113,"column":0},"end":{"line":113,"column":43}}},"12":{"name":"Annotation","line":119,"loc":{"start":{"line":119,"column":0},"end":{"line":119,"column":44}}},"13":{"name":"BinaryAnnotation","line":126,"loc":{"start":{"line":126,"column":0},"end":{"line":126,"column":50}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":35}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":22}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":35}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":39}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":51}},"6":{"start":{"line":30,"column":0},"end":{"line":52,"column":1}},"7":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"8":{"start":{"line":34,"column":8},"end":{"line":34,"column":29}},"9":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"10":{"start":{"line":38,"column":8},"end":{"line":38,"column":39}},"11":{"start":{"line":41,"column":4},"end":{"line":41,"column":37}},"12":{"start":{"line":43,"column":4},"end":{"line":43,"column":29}},"13":{"start":{"line":44,"column":4},"end":{"line":44,"column":37}},"14":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"15":{"start":{"line":46,"column":8},"end":{"line":46,"column":31}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":26}},"17":{"start":{"line":49,"column":4},"end":{"line":49,"column":32}},"18":{"start":{"line":50,"column":4},"end":{"line":50,"column":43}},"19":{"start":{"line":51,"column":4},"end":{"line":51,"column":31}},"20":{"start":{"line":54,"column":0},"end":{"line":63,"column":2}},"21":{"start":{"line":55,"column":4},"end":{"line":57,"column":17}},"22":{"start":{"line":56,"column":8},"end":{"line":56,"column":59}},"23":{"start":{"line":58,"column":4},"end":{"line":62,"column":42}},"24":{"start":{"line":65,"column":0},"end":{"line":75,"column":2}},"25":{"start":{"line":66,"column":4},"end":{"line":74,"column":6}},"26":{"start":{"line":78,"column":0},"end":{"line":80,"column":2}},"27":{"start":{"line":79,"column":4},"end":{"line":79,"column":50}},"28":{"start":{"line":83,"column":0},"end":{"line":85,"column":2}},"29":{"start":{"line":84,"column":4},"end":{"line":84,"column":35}},"30":{"start":{"line":88,"column":0},"end":{"line":92,"column":2}},"31":{"start":{"line":89,"column":4},"end":{"line":89,"column":28}},"32":{"start":{"line":90,"column":4},"end":{"line":90,"column":32}},"33":{"start":{"line":91,"column":4},"end":{"line":91,"column":28}},"34":{"start":{"line":94,"column":0},"end":{"line":101,"column":2}},"35":{"start":{"line":95,"column":4},"end":{"line":100,"column":6}},"36":{"start":{"line":103,"column":0},"end":{"line":106,"column":2}},"37":{"start":{"line":104,"column":4},"end":{"line":104,"column":40}},"38":{"start":{"line":105,"column":4},"end":{"line":105,"column":75}},"39":{"start":{"line":108,"column":0},"end":{"line":111,"column":2}},"40":{"start":{"line":110,"column":4},"end":{"line":110,"column":87}},"41":{"start":{"line":113,"column":0},"end":{"line":117,"column":1}},"42":{"start":{"line":114,"column":4},"end":{"line":114,"column":21}},"43":{"start":{"line":115,"column":4},"end":{"line":115,"column":21}},"44":{"start":{"line":116,"column":4},"end":{"line":116,"column":35}},"45":{"start":{"line":119,"column":0},"end":{"line":124,"column":1}},"46":{"start":{"line":121,"column":4},"end":{"line":121,"column":23}},"47":{"start":{"line":122,"column":4},"end":{"line":122,"column":45}},"48":{"start":{"line":123,"column":4},"end":{"line":123,"column":21}},"49":{"start":{"line":126,"column":0},"end":{"line":132,"column":1}},"50":{"start":{"line":128,"column":4},"end":{"line":128,"column":19}},"51":{"start":{"line":129,"column":4},"end":{"line":129,"column":23}},"52":{"start":{"line":130,"column":4},"end":{"line":130,"column":43}},"53":{"start":{"line":131,"column":4},"end":{"line":131,"column":21}}},"branchMap":{"1":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"2":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":4}},{"start":{"line":37,"column":4},"end":{"line":37,"column":4}}]},"3":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"4":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":25}},{"start":{"line":104,"column":29},"end":{"line":104,"column":39}}]},"5":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":21},"end":{"line":122,"column":30}},{"start":{"line":122,"column":34},"end":{"line":122,"column":44}}]},"6":{"line":130,"type":"cond-expr","locations":[{"start":{"line":130,"column":23},"end":{"line":130,"column":27}},{"start":{"line":130,"column":30},"end":{"line":130,"column":42}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var xorshift = require('xorshift');","","module.exports = Span;","module.exports.Endpoint = Endpoint;","module.exports.Annotation = Annotation;","module.exports.BinaryAnnotation = BinaryAnnotation;","","function Span(options) {","    // TODO: options validation","","    if (options.id) {","        this.id = options.id;","    }","","    if (options.traceid) {","        this.traceid = options.traceid;","    }","","    this.endpoint = options.endpoint;","","    this.name = options.name;","    this.parentid = options.parentid;","    if (!options.parentid) {","        this.parentid = [0, 0];","    }","    this.annotations = [];","    this.binaryAnnotations = [];","    this.serviceName = options.serviceName;","    this.flags = options.flags;","}","","Span.prototype.toString = function toString() {","    var strAnnotations = this.annotations.map(function eachAnn(ann) {","        return '[' + ann.value + ' ' + ann.timestamp + ']';","    }).join(' ');","    return 'SPAN: traceid: ' + this.traceid.toString('hex') + ' spanid: ' +","        this.id.toString('hex') + ' parentid: ' +","        this.parentid.toString('hex') + ' name: ' + this.name +","        ' servicename: ' + this.endpoint.serviceName +","        ' annotations: ' + strAnnotations;","};","","Span.prototype.toJSON = function toJSON() {","    return {","        name: this.name,","        endpoint: this.endpoint,","        traceid: this.traceid,","        parentid: this.parentid,","        spanid: this.id,","        annotations: this.annotations,","        binaryAnnotations: this.binaryAnnotations","    };","};","","// Generate a trace/span id for this span","Span.prototype.generateIds = function generateIds() {","    this.id = this.traceid = xorshift.randomint();","};","","// Generate just a span id","Span.prototype.generateSpanid = function generateSpanid() {","    this.id = xorshift.randomint();","};","","// ##","Span.prototype.propagateIdsFrom = function propagateIdsFrom(span) {","    this.parentid = span.id;","    this.traceid = span.traceid;","    this.flags = span.flags;","};","","Span.prototype.getTracing = function getTracing() {","    return {","        spanid: this.id,","        traceid: this.traceid,","        parentid: this.parentid,","        flags: this.flags","    };","};","","Span.prototype.annotate = function annotate(value, timestamp) {","    timestamp = timestamp || Date.now();","    this.annotations.push(new Annotation(value, this.endpoint, timestamp));","};","","Span.prototype.annotateBinary =","function annotateBinary(key, value, type) {","    this.binaryAnnotations.push(new BinaryAnnotation(key, value, type, this.endpoint));","};","","function Endpoint(ipv4, port, serviceName) {","    this.ipv4 = ipv4;","    this.port = port;","    this.serviceName = serviceName;","}","","function Annotation(value, host, timestamp) {","    // TODO: validation","    this.value = value;","    this.timestamp = timestamp || Date.now();","    this.host = host;","}","","function BinaryAnnotation(key, value, type, host) {","    // TODO: validation","    this.key = key;","    this.value = value;","    this.type = type ? type : typeof value;","    this.host = host;","}",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"30":1,"33":0,"34":0,"37":0,"38":0,"41":0,"43":0,"44":0,"45":0,"46":0,"48":0,"49":0,"50":0,"51":0,"54":1,"55":0,"56":0,"58":0,"65":1,"66":0,"78":1,"79":0,"83":1,"84":0,"88":1,"89":0,"90":0,"91":0,"94":1,"95":0,"103":1,"104":0,"105":0,"108":1,"110":0,"113":1,"114":0,"115":0,"116":0,"119":1,"121":0,"122":0,"123":0,"126":1,"128":0,"129":0,"130":0,"131":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/hyperbahn-client.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/hyperbahn-client.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":1,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":1,"104":0,"105":0,"106":0,"107":0,"108":0,"109":1,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":1,"152":0,"153":0,"154":0,"155":0,"156":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":1,"164":0,"165":0,"166":1,"167":0,"168":0,"169":0,"170":0,"171":1,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":1,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":1,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":1,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":1,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"fnMap":{"1":{"name":"HyperbahnClient","line":88,"loc":{"start":{"line":88,"column":0},"end":{"line":88,"column":34}}},"2":{"name":"report","line":138,"loc":{"start":{"line":138,"column":36},"end":{"line":138,"column":58}}},"3":{"name":"setReportTracing","line":182,"loc":{"start":{"line":182,"column":45},"end":{"line":182,"column":77}}},"4":{"name":"getThriftSync","line":189,"loc":{"start":{"line":189,"column":0},"end":{"line":189,"column":32}}},"5":{"name":"getClientChannel","line":209,"loc":{"start":{"line":209,"column":0},"end":{"line":209,"column":35}}},"6":{"name":"advertisementTimeout","line":253,"loc":{"start":{"line":253,"column":0},"end":{"line":253,"column":32}}},"7":{"name":"advertisementFailure","line":274,"loc":{"start":{"line":274,"column":0},"end":{"line":274,"column":35}}},"8":{"name":"newRequest","line":288,"loc":{"start":{"line":288,"column":0},"end":{"line":288,"column":26}}},"9":{"name":"sendRequest","line":303,"loc":{"start":{"line":303,"column":0},"end":{"line":303,"column":41}}},"10":{"name":"advertise","line":324,"loc":{"start":{"line":324,"column":0},"end":{"line":324,"column":25}}},"11":{"name":"advertisementTimeoutTimer","line":342,"loc":{"start":{"line":342,"column":12},"end":{"line":342,"column":49}}},"12":{"name":"advertiseInternalCb","line":353,"loc":{"start":{"line":353,"column":4},"end":{"line":353,"column":46}}},"13":{"name":"unadvertise","line":411,"loc":{"start":{"line":411,"column":0},"end":{"line":411,"column":27}}},"14":{"name":"unadvertiseInternalCb","line":417,"loc":{"start":{"line":417,"column":4},"end":{"line":417,"column":50}}},"15":{"name":"getErrorRetryTime","line":431,"loc":{"start":{"line":431,"column":46},"end":{"line":431,"column":75}}},"16":{"name":"getHealthyRetryTime","line":438,"loc":{"start":{"line":438,"column":48},"end":{"line":438,"column":79}}},"17":{"name":"advertiseAgain","line":448,"loc":{"start":{"line":448,"column":0},"end":{"line":448,"column":31}}},"18":{"name":"advertiseTimeout","line":456,"loc":{"start":{"line":456,"column":8},"end":{"line":456,"column":36}}},"19":{"name":"discover","line":468,"loc":{"start":{"line":468,"column":0},"end":{"line":468,"column":28}}},"20":{"name":"discoverInternalCb","line":492,"loc":{"start":{"line":492,"column":4},"end":{"line":492,"column":42}}},"21":{"name":"destroy","line":531,"loc":{"start":{"line":531,"column":36},"end":{"line":531,"column":55}}},"22":{"name":"safeSyncRead","line":542,"loc":{"start":{"line":542,"column":0},"end":{"line":542,"column":32}}},"23":{"name":"convertHost","line":555,"loc":{"start":{"line":555,"column":0},"end":{"line":555,"column":27}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":31}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":44}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":31}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":27}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":50}},"8":{"start":{"line":30,"column":0},"end":{"line":30,"column":53}},"9":{"start":{"line":31,"column":0},"end":{"line":31,"column":27}},"10":{"start":{"line":33,"column":0},"end":{"line":33,"column":51}},"11":{"start":{"line":34,"column":0},"end":{"line":34,"column":43}},"12":{"start":{"line":35,"column":0},"end":{"line":35,"column":47}},"13":{"start":{"line":37,"column":0},"end":{"line":41,"column":3}},"14":{"start":{"line":43,"column":0},"end":{"line":48,"column":3}},"15":{"start":{"line":50,"column":0},"end":{"line":53,"column":2}},"16":{"start":{"line":54,"column":0},"end":{"line":54,"column":28}},"17":{"start":{"line":55,"column":0},"end":{"line":66,"column":2}},"18":{"start":{"line":67,"column":0},"end":{"line":67,"column":26}},"19":{"start":{"line":69,"column":0},"end":{"line":71,"column":12}},"20":{"start":{"line":73,"column":0},"end":{"line":73,"column":33}},"21":{"start":{"line":88,"column":0},"end":{"line":178,"column":1}},"22":{"start":{"line":90,"column":4},"end":{"line":92,"column":5}},"23":{"start":{"line":91,"column":8},"end":{"line":91,"column":44}},"24":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"25":{"start":{"line":96,"column":4},"end":{"line":96,"column":28}},"26":{"start":{"line":98,"column":4},"end":{"line":98,"column":67}},"27":{"start":{"line":99,"column":4},"end":{"line":100,"column":43}},"28":{"start":{"line":101,"column":4},"end":{"line":101,"column":75}},"29":{"start":{"line":102,"column":4},"end":{"line":102,"column":60}},"30":{"start":{"line":103,"column":4},"end":{"line":114,"column":5}},"31":{"start":{"line":104,"column":8},"end":{"line":104,"column":49}},"32":{"start":{"line":105,"column":11},"end":{"line":114,"column":5}},"33":{"start":{"line":106,"column":8},"end":{"line":106,"column":55}},"34":{"start":{"line":107,"column":8},"end":{"line":107,"column":73}},"35":{"start":{"line":108,"column":8},"end":{"line":108,"column":40}},"36":{"start":{"line":109,"column":8},"end":{"line":109,"column":74}},"37":{"start":{"line":110,"column":8},"end":{"line":110,"column":83}},"38":{"start":{"line":111,"column":8},"end":{"line":111,"column":37}},"39":{"start":{"line":113,"column":8},"end":{"line":113,"column":86}},"40":{"start":{"line":116,"column":4},"end":{"line":116,"column":43}},"41":{"start":{"line":117,"column":4},"end":{"line":117,"column":64}},"42":{"start":{"line":118,"column":4},"end":{"line":118,"column":37}},"43":{"start":{"line":119,"column":4},"end":{"line":120,"column":37}},"44":{"start":{"line":121,"column":4},"end":{"line":121,"column":39}},"45":{"start":{"line":122,"column":4},"end":{"line":122,"column":70}},"46":{"start":{"line":123,"column":4},"end":{"line":123,"column":46}},"47":{"start":{"line":124,"column":4},"end":{"line":124,"column":80}},"48":{"start":{"line":126,"column":4},"end":{"line":126,"column":57}},"49":{"start":{"line":127,"column":4},"end":{"line":127,"column":33}},"50":{"start":{"line":129,"column":4},"end":{"line":137,"column":7}},"51":{"start":{"line":138,"column":4},"end":{"line":142,"column":6}},"52":{"start":{"line":139,"column":8},"end":{"line":141,"column":9}},"53":{"start":{"line":140,"column":12},"end":{"line":140,"column":39}},"54":{"start":{"line":144,"column":4},"end":{"line":148,"column":5}},"55":{"start":{"line":145,"column":8},"end":{"line":147,"column":11}},"56":{"start":{"line":150,"column":4},"end":{"line":155,"column":11}},"57":{"start":{"line":156,"column":4},"end":{"line":156,"column":39}},"58":{"start":{"line":157,"column":4},"end":{"line":159,"column":7}},"59":{"start":{"line":161,"column":4},"end":{"line":161,"column":26}},"60":{"start":{"line":162,"column":4},"end":{"line":162,"column":42}},"61":{"start":{"line":163,"column":4},"end":{"line":163,"column":28}},"62":{"start":{"line":164,"column":4},"end":{"line":164,"column":37}},"63":{"start":{"line":165,"column":4},"end":{"line":165,"column":28}},"64":{"start":{"line":166,"column":4},"end":{"line":166,"column":68}},"65":{"start":{"line":168,"column":4},"end":{"line":169,"column":36}},"66":{"start":{"line":170,"column":4},"end":{"line":177,"column":5}},"67":{"start":{"line":171,"column":8},"end":{"line":171,"column":69}},"68":{"start":{"line":173,"column":8},"end":{"line":173,"column":42}},"69":{"start":{"line":174,"column":8},"end":{"line":176,"column":11}},"70":{"start":{"line":180,"column":0},"end":{"line":180,"column":45}},"71":{"start":{"line":182,"column":0},"end":{"line":186,"column":2}},"72":{"start":{"line":183,"column":4},"end":{"line":183,"column":20}},"73":{"start":{"line":185,"column":4},"end":{"line":185,"column":30}},"74":{"start":{"line":188,"column":0},"end":{"line":205,"column":2}},"75":{"start":{"line":190,"column":4},"end":{"line":190,"column":20}},"76":{"start":{"line":192,"column":4},"end":{"line":192,"column":68}},"77":{"start":{"line":193,"column":4},"end":{"line":193,"column":66}},"78":{"start":{"line":195,"column":4},"end":{"line":195,"column":49}},"79":{"start":{"line":197,"column":4},"end":{"line":204,"column":7}},"80":{"start":{"line":208,"column":0},"end":{"line":247,"column":2}},"81":{"start":{"line":210,"column":4},"end":{"line":210,"column":20}},"82":{"start":{"line":212,"column":4},"end":{"line":212,"column":68}},"83":{"start":{"line":214,"column":4},"end":{"line":219,"column":5}},"84":{"start":{"line":215,"column":8},"end":{"line":217,"column":12}},"85":{"start":{"line":218,"column":8},"end":{"line":218,"column":20}},"86":{"start":{"line":221,"column":4},"end":{"line":223,"column":5}},"87":{"start":{"line":222,"column":8},"end":{"line":222,"column":62}},"88":{"start":{"line":225,"column":4},"end":{"line":235,"column":6}},"89":{"start":{"line":236,"column":4},"end":{"line":238,"column":5}},"90":{"start":{"line":237,"column":8},"end":{"line":237,"column":45}},"91":{"start":{"line":239,"column":4},"end":{"line":241,"column":5}},"92":{"start":{"line":240,"column":8},"end":{"line":240,"column":65}},"93":{"start":{"line":242,"column":4},"end":{"line":244,"column":5}},"94":{"start":{"line":243,"column":8},"end":{"line":243,"column":71}},"95":{"start":{"line":246,"column":4},"end":{"line":246,"column":56}},"96":{"start":{"line":252,"column":0},"end":{"line":271,"column":2}},"97":{"start":{"line":254,"column":4},"end":{"line":254,"column":20}},"98":{"start":{"line":256,"column":4},"end":{"line":269,"column":5}},"99":{"start":{"line":257,"column":8},"end":{"line":258,"column":48}},"100":{"start":{"line":259,"column":8},"end":{"line":261,"column":11}},"101":{"start":{"line":263,"column":8},"end":{"line":266,"column":11}},"102":{"start":{"line":268,"column":8},"end":{"line":268,"column":39}},"103":{"start":{"line":273,"column":0},"end":{"line":285,"column":2}},"104":{"start":{"line":275,"column":4},"end":{"line":275,"column":20}},"105":{"start":{"line":277,"column":4},"end":{"line":277,"column":19}},"106":{"start":{"line":278,"column":4},"end":{"line":278,"column":28}},"107":{"start":{"line":280,"column":4},"end":{"line":284,"column":5}},"108":{"start":{"line":281,"column":8},"end":{"line":283,"column":10}},"109":{"start":{"line":287,"column":0},"end":{"line":300,"column":2}},"110":{"start":{"line":289,"column":4},"end":{"line":289,"column":20}},"111":{"start":{"line":290,"column":4},"end":{"line":299,"column":7}},"112":{"start":{"line":302,"column":0},"end":{"line":313,"column":2}},"113":{"start":{"line":304,"column":4},"end":{"line":304,"column":20}},"114":{"start":{"line":306,"column":4},"end":{"line":306,"column":32}},"115":{"start":{"line":307,"column":4},"end":{"line":312,"column":11}},"116":{"start":{"line":322,"column":0},"end":{"line":408,"column":2}},"117":{"start":{"line":325,"column":4},"end":{"line":325,"column":20}},"118":{"start":{"line":329,"column":4},"end":{"line":330,"column":58}},"119":{"start":{"line":332,"column":4},"end":{"line":337,"column":5}},"120":{"start":{"line":333,"column":8},"end":{"line":335,"column":12}},"121":{"start":{"line":336,"column":8},"end":{"line":336,"column":15}},"122":{"start":{"line":339,"column":4},"end":{"line":347,"column":5}},"123":{"start":{"line":341,"column":8},"end":{"line":346,"column":10}},"124":{"start":{"line":343,"column":16},"end":{"line":343,"column":44}},"125":{"start":{"line":349,"column":4},"end":{"line":349,"column":26}},"126":{"start":{"line":350,"column":4},"end":{"line":350,"column":54}},"127":{"start":{"line":351,"column":4},"end":{"line":351,"column":35}},"128":{"start":{"line":353,"column":4},"end":{"line":407,"column":5}},"129":{"start":{"line":354,"column":8},"end":{"line":366,"column":9}},"130":{"start":{"line":355,"column":12},"end":{"line":361,"column":15}},"131":{"start":{"line":362,"column":12},"end":{"line":362,"column":33}},"132":{"start":{"line":364,"column":12},"end":{"line":364,"column":58}},"133":{"start":{"line":365,"column":12},"end":{"line":365,"column":19}},"134":{"start":{"line":368,"column":8},"end":{"line":388,"column":9}},"135":{"start":{"line":369,"column":12},"end":{"line":369,"column":30}},"136":{"start":{"line":370,"column":12},"end":{"line":374,"column":14}},"137":{"start":{"line":376,"column":12},"end":{"line":379,"column":14}},"138":{"start":{"line":381,"column":12},"end":{"line":385,"column":13}},"139":{"start":{"line":382,"column":16},"end":{"line":382,"column":47}},"140":{"start":{"line":384,"column":16},"end":{"line":384,"column":62}},"141":{"start":{"line":387,"column":12},"end":{"line":387,"column":19}},"142":{"start":{"line":390,"column":8},"end":{"line":395,"column":9}},"143":{"start":{"line":391,"column":12},"end":{"line":394,"column":14}},"144":{"start":{"line":397,"column":8},"end":{"line":397,"column":48}},"145":{"start":{"line":398,"column":8},"end":{"line":398,"column":32}},"146":{"start":{"line":399,"column":8},"end":{"line":399,"column":39}},"147":{"start":{"line":400,"column":8},"end":{"line":400,"column":60}},"148":{"start":{"line":402,"column":8},"end":{"line":402,"column":56}},"149":{"start":{"line":405,"column":8},"end":{"line":405,"column":32}},"150":{"start":{"line":406,"column":8},"end":{"line":406,"column":32}},"151":{"start":{"line":410,"column":0},"end":{"line":429,"column":2}},"152":{"start":{"line":412,"column":4},"end":{"line":412,"column":20}},"153":{"start":{"line":413,"column":4},"end":{"line":413,"column":58}},"154":{"start":{"line":414,"column":4},"end":{"line":414,"column":50}},"155":{"start":{"line":415,"column":4},"end":{"line":415,"column":56}},"156":{"start":{"line":416,"column":4},"end":{"line":416,"column":42}},"157":{"start":{"line":417,"column":4},"end":{"line":428,"column":5}},"158":{"start":{"line":418,"column":8},"end":{"line":425,"column":9}},"159":{"start":{"line":419,"column":12},"end":{"line":423,"column":15}},"160":{"start":{"line":424,"column":12},"end":{"line":424,"column":19}},"161":{"start":{"line":426,"column":8},"end":{"line":426,"column":41}},"162":{"start":{"line":427,"column":8},"end":{"line":427,"column":34}},"163":{"start":{"line":431,"column":0},"end":{"line":436,"column":2}},"164":{"start":{"line":432,"column":4},"end":{"line":432,"column":20}},"165":{"start":{"line":434,"column":4},"end":{"line":435,"column":62}},"166":{"start":{"line":438,"column":0},"end":{"line":445,"column":2}},"167":{"start":{"line":439,"column":4},"end":{"line":439,"column":20}},"168":{"start":{"line":441,"column":4},"end":{"line":441,"column":32}},"169":{"start":{"line":442,"column":4},"end":{"line":442,"column":74}},"170":{"start":{"line":444,"column":4},"end":{"line":444,"column":42}},"171":{"start":{"line":447,"column":0},"end":{"line":463,"column":2}},"172":{"start":{"line":449,"column":4},"end":{"line":449,"column":20}},"173":{"start":{"line":451,"column":4},"end":{"line":453,"column":5}},"174":{"start":{"line":452,"column":8},"end":{"line":452,"column":15}},"175":{"start":{"line":455,"column":4},"end":{"line":462,"column":6}},"176":{"start":{"line":457,"column":12},"end":{"line":459,"column":13}},"177":{"start":{"line":458,"column":16},"end":{"line":458,"column":33}},"178":{"start":{"line":467,"column":0},"end":{"line":528,"column":2}},"179":{"start":{"line":469,"column":4},"end":{"line":469,"column":20}},"180":{"start":{"line":471,"column":4},"end":{"line":471,"column":22}},"181":{"start":{"line":473,"column":4},"end":{"line":474,"column":57}},"182":{"start":{"line":476,"column":4},"end":{"line":481,"column":5}},"183":{"start":{"line":477,"column":8},"end":{"line":479,"column":12}},"184":{"start":{"line":480,"column":8},"end":{"line":480,"column":15}},"185":{"start":{"line":483,"column":4},"end":{"line":483,"column":36}},"186":{"start":{"line":484,"column":4},"end":{"line":484,"column":59}},"187":{"start":{"line":486,"column":4},"end":{"line":490,"column":27}},"188":{"start":{"line":492,"column":4},"end":{"line":527,"column":5}},"189":{"start":{"line":493,"column":8},"end":{"line":501,"column":9}},"190":{"start":{"line":494,"column":12},"end":{"line":498,"column":15}},"191":{"start":{"line":499,"column":12},"end":{"line":499,"column":26}},"192":{"start":{"line":500,"column":12},"end":{"line":500,"column":19}},"193":{"start":{"line":503,"column":8},"end":{"line":503,"column":18}},"194":{"start":{"line":505,"column":8},"end":{"line":518,"column":9}},"195":{"start":{"line":506,"column":12},"end":{"line":506,"column":27}},"196":{"start":{"line":512,"column":12},"end":{"line":514,"column":13}},"197":{"start":{"line":513,"column":16},"end":{"line":513,"column":27}},"198":{"start":{"line":516,"column":12},"end":{"line":516,"column":27}},"199":{"start":{"line":517,"column":12},"end":{"line":517,"column":19}},"200":{"start":{"line":520,"column":8},"end":{"line":520,"column":19}},"201":{"start":{"line":521,"column":8},"end":{"line":523,"column":9}},"202":{"start":{"line":522,"column":12},"end":{"line":522,"column":55}},"203":{"start":{"line":525,"column":8},"end":{"line":525,"column":24}},"204":{"start":{"line":526,"column":8},"end":{"line":526,"column":15}},"205":{"start":{"line":531,"column":0},"end":{"line":540,"column":2}},"206":{"start":{"line":532,"column":4},"end":{"line":532,"column":20}},"207":{"start":{"line":533,"column":4},"end":{"line":535,"column":5}},"208":{"start":{"line":534,"column":8},"end":{"line":534,"column":15}},"209":{"start":{"line":537,"column":4},"end":{"line":537,"column":27}},"210":{"start":{"line":538,"column":4},"end":{"line":538,"column":50}},"211":{"start":{"line":539,"column":4},"end":{"line":539,"column":56}},"212":{"start":{"line":542,"column":0},"end":{"line":553,"column":1}},"213":{"start":{"line":543,"column":4},"end":{"line":543,"column":28}},"214":{"start":{"line":544,"column":4},"end":{"line":544,"column":14}},"215":{"start":{"line":546,"column":4},"end":{"line":550,"column":5}},"216":{"start":{"line":547,"column":8},"end":{"line":547,"column":57}},"217":{"start":{"line":549,"column":8},"end":{"line":549,"column":20}},"218":{"start":{"line":552,"column":4},"end":{"line":552,"column":33}},"219":{"start":{"line":555,"column":0},"end":{"line":562,"column":1}},"220":{"start":{"line":556,"column":4},"end":{"line":556,"column":17}},"221":{"start":{"line":557,"column":4},"end":{"line":557,"column":48}},"222":{"start":{"line":558,"column":4},"end":{"line":558,"column":48}},"223":{"start":{"line":559,"column":4},"end":{"line":559,"column":47}},"224":{"start":{"line":560,"column":4},"end":{"line":560,"column":33}},"225":{"start":{"line":561,"column":4},"end":{"line":561,"column":33}}},"branchMap":{"1":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},{"start":{"line":90,"column":4},"end":{"line":90,"column":4}}]},"2":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":11},"end":{"line":98,"column":18}},{"start":{"line":98,"column":22},"end":{"line":98,"column":38}}]},"3":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":11},"end":{"line":99,"column":18}},{"start":{"line":99,"column":22},"end":{"line":99,"column":38}},{"start":{"line":99,"column":42},"end":{"line":99,"column":70}}]},"4":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"5":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":11},"end":{"line":105,"column":11}},{"start":{"line":105,"column":11},"end":{"line":105,"column":11}}]},"6":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":22},"end":{"line":117,"column":40}},{"start":{"line":117,"column":44},"end":{"line":117,"column":63}}]},"7":{"line":119,"type":"cond-expr","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":29}},{"start":{"line":120,"column":32},"end":{"line":120,"column":36}}]},"8":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":29},"end":{"line":122,"column":54}},{"start":{"line":122,"column":58},"end":{"line":122,"column":69}}]},"9":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":27},"end":{"line":124,"column":50}},{"start":{"line":124,"column":54},"end":{"line":124,"column":79}}]},"10":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":18},"end":{"line":126,"column":32}},{"start":{"line":126,"column":36},"end":{"line":126,"column":56}}]},"11":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":8}},{"start":{"line":139,"column":8},"end":{"line":139,"column":8}}]},"12":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":4},"end":{"line":144,"column":4}},{"start":{"line":144,"column":4},"end":{"line":144,"column":4}}]},"13":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":28},"end":{"line":150,"column":63}},{"start":{"line":151,"column":8},"end":{"line":155,"column":10}}]},"14":{"line":166,"type":"binary-expr","locations":[{"start":{"line":166,"column":26},"end":{"line":166,"column":48}},{"start":{"line":166,"column":52},"end":{"line":166,"column":67}}]},"15":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":31},"end":{"line":168,"column":59}},{"start":{"line":169,"column":8},"end":{"line":169,"column":35}}]},"16":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":4},"end":{"line":170,"column":4}},{"start":{"line":170,"column":4},"end":{"line":170,"column":4}}]},"17":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":40},"end":{"line":171,"column":60}},{"start":{"line":171,"column":64},"end":{"line":171,"column":68}}]},"18":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":11},"end":{"line":192,"column":18}},{"start":{"line":192,"column":22},"end":{"line":192,"column":41}}]},"19":{"line":193,"type":"binary-expr","locations":[{"start":{"line":193,"column":11},"end":{"line":193,"column":18}},{"start":{"line":193,"column":22},"end":{"line":193,"column":40}}]},"20":{"line":212,"type":"binary-expr","locations":[{"start":{"line":212,"column":11},"end":{"line":212,"column":18}},{"start":{"line":212,"column":22},"end":{"line":212,"column":41}}]},"21":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":4},"end":{"line":214,"column":4}},{"start":{"line":214,"column":4},"end":{"line":214,"column":4}}]},"22":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":4},"end":{"line":221,"column":4}},{"start":{"line":221,"column":4},"end":{"line":221,"column":4}}]},"23":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":4},"end":{"line":236,"column":4}},{"start":{"line":236,"column":4},"end":{"line":236,"column":4}}]},"24":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":4},"end":{"line":239,"column":4}},{"start":{"line":239,"column":4},"end":{"line":239,"column":4}}]},"25":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":4},"end":{"line":242,"column":4}},{"start":{"line":242,"column":4},"end":{"line":242,"column":4}}]},"26":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":4},"end":{"line":256,"column":4}},{"start":{"line":256,"column":4},"end":{"line":256,"column":4}}]},"27":{"line":257,"type":"binary-expr","locations":[{"start":{"line":257,"column":24},"end":{"line":257,"column":38}},{"start":{"line":258,"column":12},"end":{"line":258,"column":47}}]},"28":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":4},"end":{"line":280,"column":4}},{"start":{"line":280,"column":4},"end":{"line":280,"column":4}}]},"29":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":18},"end":{"line":292,"column":22}},{"start":{"line":292,"column":26},"end":{"line":292,"column":38}},{"start":{"line":292,"column":43},"end":{"line":292,"column":62}}]},"30":{"line":332,"type":"if","locations":[{"start":{"line":332,"column":4},"end":{"line":332,"column":4}},{"start":{"line":332,"column":4},"end":{"line":332,"column":4}}]},"31":{"line":339,"type":"if","locations":[{"start":{"line":339,"column":4},"end":{"line":339,"column":4}},{"start":{"line":339,"column":4},"end":{"line":339,"column":4}}]},"32":{"line":354,"type":"if","locations":[{"start":{"line":354,"column":8},"end":{"line":354,"column":8}},{"start":{"line":354,"column":8},"end":{"line":354,"column":8}}]},"33":{"line":355,"type":"cond-expr","locations":[{"start":{"line":355,"column":40},"end":{"line":355,"column":47}},{"start":{"line":355,"column":50},"end":{"line":355,"column":56}}]},"34":{"line":368,"type":"if","locations":[{"start":{"line":368,"column":8},"end":{"line":368,"column":8}},{"start":{"line":368,"column":8},"end":{"line":368,"column":8}}]},"35":{"line":376,"type":"cond-expr","locations":[{"start":{"line":376,"column":40},"end":{"line":376,"column":47}},{"start":{"line":376,"column":50},"end":{"line":376,"column":56}}]},"36":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":12},"end":{"line":381,"column":12}},{"start":{"line":381,"column":12},"end":{"line":381,"column":12}}]},"37":{"line":390,"type":"if","locations":[{"start":{"line":390,"column":8},"end":{"line":390,"column":8}},{"start":{"line":390,"column":8},"end":{"line":390,"column":8}}]},"38":{"line":418,"type":"if","locations":[{"start":{"line":418,"column":8},"end":{"line":418,"column":8}},{"start":{"line":418,"column":8},"end":{"line":418,"column":8}}]},"39":{"line":434,"type":"binary-expr","locations":[{"start":{"line":434,"column":11},"end":{"line":434,"column":56}},{"start":{"line":435,"column":8},"end":{"line":435,"column":61}}]},"40":{"line":451,"type":"if","locations":[{"start":{"line":451,"column":4},"end":{"line":451,"column":4}},{"start":{"line":451,"column":4},"end":{"line":451,"column":4}}]},"41":{"line":457,"type":"if","locations":[{"start":{"line":457,"column":12},"end":{"line":457,"column":12}},{"start":{"line":457,"column":12},"end":{"line":457,"column":12}}]},"42":{"line":471,"type":"binary-expr","locations":[{"start":{"line":471,"column":11},"end":{"line":471,"column":15}},{"start":{"line":471,"column":19},"end":{"line":471,"column":21}}]},"43":{"line":476,"type":"if","locations":[{"start":{"line":476,"column":4},"end":{"line":476,"column":4}},{"start":{"line":476,"column":4},"end":{"line":476,"column":4}}]},"44":{"line":484,"type":"binary-expr","locations":[{"start":{"line":484,"column":22},"end":{"line":484,"column":38}},{"start":{"line":484,"column":42},"end":{"line":484,"column":58}}]},"45":{"line":493,"type":"if","locations":[{"start":{"line":493,"column":8},"end":{"line":493,"column":8}},{"start":{"line":493,"column":8},"end":{"line":493,"column":8}}]},"46":{"line":505,"type":"if","locations":[{"start":{"line":505,"column":8},"end":{"line":505,"column":8}},{"start":{"line":505,"column":8},"end":{"line":505,"column":8}}]},"47":{"line":512,"type":"if","locations":[{"start":{"line":512,"column":12},"end":{"line":512,"column":12}},{"start":{"line":512,"column":12},"end":{"line":512,"column":12}}]},"48":{"line":533,"type":"if","locations":[{"start":{"line":533,"column":4},"end":{"line":533,"column":4}},{"start":{"line":533,"column":4},"end":{"line":533,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var assert = require('assert');","var fs = require('fs');","var TypedError = require('error/typed');","var WrappedError = require('error/wrapped');","var timers = require('timers');","var util = require('util');","var EventEmitter = require('events').EventEmitter;","var safeJsonParse = require('safe-json-parse/tuple');","var path = require('path');","","var Reporter = require('./tcollector/reporter.js');","var TChannelJSON = require('./as/json.js');","var TChannelThrift = require('./as/thrift.js');","","var AdvertisementTimeoutError = WrappedError({","    type: 'hyperbahn-client.advertisement-timeout',","    message: 'Hyperbahn advertisement timed out after {time} ms!.\\n' +","        '{origMessage}.\\n'","});","","var AlreadyDestroyed = TypedError({","    type: 'hyperbahn-client.already-destroyed',","    message: 'HyperbahnClient was already destroyed.\\n' +","        'Cannot invoke {method}.',","    method: null","});","","var States = {","    UNADVERTISED: 'UNADVERTISED',","    ADVERTISED: 'ADVERTISED'","};","var DEFAULT_TTL = 60 * 1000;","var DEFAULT_ERROR_RETRY_TIMES = [","    200, // One fast retry","","    1000, // Fibonacci backoff","    1000,","    2000,","    3000,","    5000,","    8000,","","    10000 // Max out at 10 seconds","];","var DEFAULT_TIMEOUT = 500;","","var thriftSource = fs.readFileSync(","    path.join(__dirname, 'hyperbahn.thrift'),","    'utf8');","","module.exports = HyperbahnClient;","","// # HyperbahnClient","// options.","//   * (required) tchannel: tchannel instance","//   * (required) serviceName: string service name","//   * (required) hostPortList: array of initial hyperbahn nodes","//   * callerName: the caller name","//   * logger: logtron instance","//   * reportTracing: Whether to report tracing","//   * hardFail: boolean; default false; whether or not to fail hard when we","//     can't advertise or on unexpected hyperbahn errors","//   * registrationTimeout: deprecated","//   * advertisementTimeout: integer. In hardFail mode we default to 5000. If","//     not in hardFail mode we don't time out advertisements.","function HyperbahnClient(options) {","    /*eslint max-statements: [2, 50] complexity: [2, 20] */","    if (!(this instanceof HyperbahnClient)) {","        return new HyperbahnClient(options);","    }","","    var self = this;","","    EventEmitter.call(this);","","    assert(options && options.tchannel, 'Must pass in a tchannel');","    assert(options && options.tchannel && !options.tchannel.topChannel,","        'Must pass in top level tchannel');","    assert(options.tchannel.tracer, 'Top channel must have trace enabled');","    assert(options.serviceName, 'must pass in serviceName');","    if (Array.isArray(options.hostPortList)) {","        self.hostPortList = options.hostPortList;","    } else if (typeof options.hostPortFile === 'string') {","        var tuple = safeSyncRead(options.hostPortFile);","        assert(!tuple[0], 'Read host port list failed with ' + tuple[0]);","        tuple = safeJsonParse(tuple[1]);","        assert(!tuple[0], 'Parse host port list failed with ' + tuple[0]);","        assert(Array.isArray(tuple[1]), 'Host port list in the file is not array');","        self.hostPortList = tuple[1];","    } else {","        assert(false, 'Must pass in hostPortList as array or hostPortFile as string');","    }","","    self.serviceName = options.serviceName;","    self.callerName = options.callerName || options.serviceName;","    self.tchannel = options.tchannel;","    self.reportTracing = 'reportTracing' in options ?","        options.reportTracing : true;","    self.hardFail = !!options.hardFail;","    self.advertiseInterval = options.advertiseInterval || DEFAULT_TTL;","    self.timeoutFuzz = self.advertiseInterval;","    self.errorRetryTimes = options.errorRetryTimes || DEFAULT_ERROR_RETRY_TIMES;","","    self.logger = options.logger || self.tchannel.logger;","    self.statsd = options.statsd;","","    self.reporter = Reporter({","        channel: self.getClientChannel({","            serviceName: 'tcollector',","            trace: false","        }),","        logger: self.logger,","        callerName: self.callerName,","        logWarnings: options.logTraceWarnings","    });","    self.tchannel.tracer.reporter = function report(span) {","        if (self.reportTracing) {","            self.reporter.report(span);","        }","    };","","    if (!self.reportTracing) {","        self.logger.warn('HyperbahnClient tcollector tracing is OFF', {","            service: self.serviceName","        });","    }","","    self.hyperbahnChannel = self.tchannel.subChannels.hyperbahn ||","        self.tchannel.makeSubChannel({","            serviceName: 'hyperbahn',","            peers: self.hostPortList,","            preferConnectionDirection: 'in'","        });","    self.tchannelJSON = TChannelJSON();","    self.tchannelThrift = TChannelThrift({","        source: thriftSource","    });","","    self.lastError = null;","    self.latestAdvertisementResult = null;","    self.attemptCounter = 0;","    self.state = States.UNADVERTISED;","    self._destroyed = false;","    self.defaultTimeout = options.defaultTimeout || DEFAULT_TIMEOUT;","","    var advertisementTimeout = options.advertisementTimeout ||","        options.registrationTimeout;","    if (self.hardFail) {","        self.advertisementTimeoutTime = advertisementTimeout || 5000;","    } else {","        self.advertisementTimeoutTime = 0;","        self.logger.info('HyperbahnClient advertisement timeout disabled', {","            service: self.serviceName","        });","    }","}","","util.inherits(HyperbahnClient, EventEmitter);","","HyperbahnClient.prototype.setReportTracing = function setReportTracing(bool) {","    var self = this;","","    self.reportTracing = bool;","};","","HyperbahnClient.prototype.getThriftSync =","function getThriftSync(options) {","    var self = this;","","    assert(options && options.serviceName, 'must pass serviceName');","    assert(options && options.thriftFile, 'must pass thriftFile');","","    var channel = self.getClientChannel(options);","","    return channel.TChannelAsThrift({","        entryPoint: options.thriftFile,","        strict: options.strict,","        logger: options.logger,","        bossMode: options.bossMode,","        channel: channel,","        isHealthy: options.isHealthy","    });","};","","// Gets the subchannel for hitting a particular service.","HyperbahnClient.prototype.getClientChannel =","function getClientChannel(options) {","    var self = this;","","    assert(options && options.serviceName, 'must pass serviceName');","","    if (self._destroyed) {","        self.emit('error', AlreadyDestroyed({","            method: 'getClientChannel'","        }));","        return null;","    }","","    if (self.tchannel.subChannels[options.serviceName]) {","        return self.tchannel.subChannels[options.serviceName];","    }","","    var channelOptions = {","        peers: self.hostPortList,","        serviceName: options.serviceName,","        preferConnectionDirection: 'in',","        requestDefaults: {","            serviceName: options.serviceName,","            headers: {","                cn: self.callerName","            }","        }","    };","    if ('trace' in options) {","        channelOptions.trace = options.trace;","    }","    if ('timeout' in options) {","        channelOptions.requestDefaults.timeout = options.timeout;","    }","    if ('retryLimit' in options) {","        channelOptions.requestDefaults.retryLimit = options.retryLimit;","    }","","    return self.tchannel.makeSubChannel(channelOptions);","};","","// ## advertisementTimeout","// Called after a certain amount of time to have a fatal error when reg fails.","// Will not be called if options.advertisementTimeout isn't passed in","HyperbahnClient.prototype.advertisementTimeout =","function advertisementTimeout() {","    var self = this;","","    if (self.state === States.UNADVERTISED) {","        var lastError = self.lastError ||","            new Error('advertisement timeout!');","        var err = AdvertisementTimeoutError(lastError, {","            time: self.advertisementTimeoutTime","        });","","        self.logger.fatal('HyperbahnClient: advertisement timed out', {","            timeout: self.advertisementTimeout,","            error: err","        });","","        self.advertisementFailure(err);","    }","    // TODO else warn","};","","HyperbahnClient.prototype.advertisementFailure =","function advertisementFailure(err) {","    var self = this;","","    self.destroy();","    self.emit('error', err);","","    if (self.statsd) {","        self.statsd.increment(","            'hyperbahn-client.' + self.serviceName + '.advertisement.failure'","        );","    }","};","","HyperbahnClient.prototype.newRequest =","function newRequest(opts) {","    var self = this;","    return self.hyperbahnChannel.request({","        serviceName: 'hyperbahn',","        timeout: (opts && opts.timeout) || self.defaultTimeout,","        hasNoParent: true,","        trace: false,","        retryLimit: 1,","        headers: {","            cn: self.callerName","        }","    });","};","","HyperbahnClient.prototype.sendRequest =","function sendRequest(opts, endpoint, cb) {","    var self = this;","","    var req = self.newRequest();","    self.tchannelJSON.send(req, endpoint, null, {","        services: [{","            cost: 0,","            serviceName: self.serviceName","        }]","    }, cb);","};","","// ## advertise","// Advertise with Hyperbahn. If called with a callback, the callback will not be","// called until there has been a successful advertisement. This function","// attempts a advertise and retries until there are no healthy servers left; it","// will then repeatedly choose random servers to try until it finds one that","// works.","// register is **deprecated**","HyperbahnClient.prototype.register =","HyperbahnClient.prototype.advertise =","function advertise(opts) {","    var self = this;","    // Attempt a advertisement. If it succeeds, setTimeout to re-advertise with","    // the same server after the TTL.","","    assert(self.tchannel.hostPort,","        'must call tchannel.listen() before advertise()');","","    if (self._destroyed) {","        self.emit('error', AlreadyDestroyed({","            method: 'advertise'","        }));","        return;","    }","","    if (self.advertisementTimeoutTime) {","        // Start the timeout timer","        self.advertisementTimeoutTimer = timers.setTimeout(","            function advertisementTimeoutTimer() {","                self.advertisementTimeout();","            },","            self.advertisementTimeoutTime","        );","    }","","    self.attemptCounter++;","    self.sendRequest(opts, 'ad', advertiseInternalCb);","    self.emit('advertise-attempt');","","    function advertiseInternalCb(err, result) {","        if (err) {","            self.logger[self.hardFail ? 'error' : 'warn'](","                'HyperbahnClient: advertisement failure, ' +","                'marking server as sick', {","                error: err,","                serviceName: self.serviceName,","                hostPort: self.hostPort","            });","            self.lastError = err;","","            self.advertiseAgain(self.getErrorRetryTime());","            return;","        }","","        if (result.ok === false) {","            err = result.body;","            var errInfo2 = {","                error: err,","                serviceName: self.serviceName,","                hostPort: self.hostPort","            };","","            self.logger[self.hardFail ? 'fatal' : 'warn'](","                'HyperbahnClient: unexpected failure (from Hyperbahn)',","                errInfo2","            );","","            if (self.hardFail) {","                self.advertisementFailure(err);","            } else {","                self.advertiseAgain(self.getErrorRetryTime());","            }","","            return;","        }","","        if (self.statsd) {","            self.statsd.increment(","                'hyperbahn-client.' + self.serviceName +","                    '.advertisement.success'","            );","        }","","        self.latestAdvertisementResult = result;","        self.attemptCounter = 0;","        self.state = States.ADVERTISED;","        timers.clearTimeout(self.advertisementTimeoutTimer);","","        self.advertiseAgain(self.getHealthyRetryTime());","","        // registered event is deprecated","        self.emit('registered');","        self.emit('advertised');","    }","};","","HyperbahnClient.prototype.unadvertise =","function unadvertise(opts) {","    var self = this;","    self.sendRequest(opts, 'unad', unadvertiseInternalCb);","    timers.clearTimeout(self._advertisementTimer);","    timers.clearTimeout(self.advertisementTimeoutTimer);","    self.latestAdvertisementResult = null;","    function unadvertiseInternalCb(error, result) {","        if (error) {","            self.logger.warn('HyperbahnClient: unadvertisement failure', {","                error: error,","                serviceName: self.serviceName,","                hostPort: self.hostPort","            });","            return;","        }","        self.state = States.UNADVERTISED;","        self.emit('unadvertised');","    }","};","","HyperbahnClient.prototype.getErrorRetryTime = function getErrorRetryTime() {","    var self = this;","","    return self.errorRetryTimes[self.attemptCounter - 1] ||","        self.errorRetryTimes[self.errorRetryTimes.length - 1];","};","","HyperbahnClient.prototype.getHealthyRetryTime = function getHealthyRetryTime() {","    var self = this;","","    var fuzz = self.timeoutFuzz;","    var delay = Math.round(Math.floor(Math.random() * fuzz)) - (fuzz / 2);","","    return self.advertiseInterval + delay;","};","","HyperbahnClient.prototype.advertiseAgain =","function advertiseAgain(delay) {","    var self = this;","","    if (self._destroyed) {","        return;","    }","","    self._advertisementTimer = timers.setTimeout(","        function advertiseTimeout() {","            if (!self._destroyed) {","                self.advertise();","            }","        },","        delay","    );","};","","// ## discover","// Make a discover query to Hyperbahn to find peers of this instance's service.","HyperbahnClient.prototype.discover =","function discover(opts, cb) {","    var self = this;","","    opts = opts || {};","","    assert(self.tchannel.hostPort,","        'must call tchannel.listen() before discover()');","","    if (self._destroyed) {","        self.emit('error', AlreadyDestroyed({","            method: 'discover'","        }));","        return;","    }","","    var req = self.newRequest(opts);","    var serviceName = opts.serviceName || self.serviceName;","","    self.tchannelThrift.send(req, 'Hyperbahn::discover', null, {","        query: {","            serviceName: serviceName","        }","    }, discoverInternalCb);","","    function discoverInternalCb(err, res) {","        if (err) {","            self.logger.error('call to discovery API failed', {","                error: err,","                serviceName: serviceName,","                response: res","            });","            cb(err, null);","            return;","        }","","        var hosts;","","        if (res.ok === false) {","            err = res.body;","","            // If the response from Hyperbahn is that there are no peers","            // available, we callback with the error but also an empty host","            // list. Callers can then use the value of \"hosts\" to determine the","            // result without having to parse the error.","            if (res.typeName === 'noPeersAvailable') {","                hosts = [];","            }","","            cb(err, hosts);","            return;","        }","","        hosts = [];","        for (var i = 0; i < res.body.peers.length; i++) {","            hosts.push(convertHost(res.body.peers[i]));","        }","","        cb(null, hosts);","        return;","    }","};","","// ## destroy","HyperbahnClient.prototype.destroy = function destroy() {","    var self = this;","    if (self._destroyed) {","        return;","    }","","    self._destroyed = true;","    timers.clearTimeout(self._advertisementTimer);","    timers.clearTimeout(self.advertisementTimeoutTimer);","};","","function safeSyncRead(filePath) {","    var fileContents = null;","    var error;","","    try {","        fileContents = fs.readFileSync(filePath, 'utf8');","    } catch (err) {","        error = err;","    }","","    return [error, fileContents];","}","","function convertHost(host) {","    var res = '';","    res += ((host.ip.ipv4 >>> 24) & 0xff) + '.';","    res += ((host.ip.ipv4 >>> 16) & 0xff) + '.';","    res += ((host.ip.ipv4 >>> 8) & 0xff) + '.';","    res += (host.ip.ipv4 & 0xff);","    return res + ':' + host.port;","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"33":1,"34":1,"35":1,"37":1,"43":1,"50":1,"54":1,"55":1,"67":1,"69":1,"73":1,"88":1,"90":0,"91":0,"94":0,"96":0,"98":0,"99":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"116":0,"117":0,"118":0,"119":0,"121":0,"122":0,"123":0,"124":0,"126":0,"127":0,"129":0,"138":0,"139":0,"140":0,"144":0,"145":0,"150":0,"156":0,"157":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"168":0,"170":0,"171":0,"173":0,"174":0,"180":1,"182":1,"183":0,"185":0,"188":1,"190":0,"192":0,"193":0,"195":0,"197":0,"208":1,"210":0,"212":0,"214":0,"215":0,"218":0,"221":0,"222":0,"225":0,"236":0,"237":0,"239":0,"240":0,"242":0,"243":0,"246":0,"252":1,"254":0,"256":0,"257":0,"259":0,"263":0,"268":0,"273":1,"275":0,"277":0,"278":0,"280":0,"281":0,"287":1,"289":0,"290":0,"302":1,"304":0,"306":0,"307":0,"322":1,"325":0,"329":0,"332":0,"333":0,"336":0,"339":0,"341":0,"343":0,"349":0,"350":0,"351":0,"353":1,"354":0,"355":0,"362":0,"364":0,"365":0,"368":0,"369":0,"370":0,"376":0,"381":0,"382":0,"384":0,"387":0,"390":0,"391":0,"397":0,"398":0,"399":0,"400":0,"402":0,"405":0,"406":0,"410":1,"412":0,"413":0,"414":0,"415":0,"416":0,"417":1,"418":0,"419":0,"424":0,"426":0,"427":0,"431":1,"432":0,"434":0,"438":1,"439":0,"441":0,"442":0,"444":0,"447":1,"449":0,"451":0,"452":0,"455":0,"457":0,"458":0,"467":1,"469":0,"471":0,"473":0,"476":0,"477":0,"480":0,"483":0,"484":0,"486":0,"492":1,"493":0,"494":0,"499":0,"500":0,"503":0,"505":0,"506":0,"512":0,"513":0,"516":0,"517":0,"520":0,"521":0,"522":0,"525":0,"526":0,"531":1,"532":0,"533":0,"534":0,"537":0,"538":0,"539":0,"542":1,"543":0,"544":0,"546":0,"547":0,"549":0,"552":0,"555":1,"556":0,"557":0,"558":0,"559":0,"560":0,"561":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/tcollector/reporter.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/tcollector/reporter.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"TCollectorTraceReporter","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":42}}},"2":{"name":"ipToInt","line":58,"loc":{"start":{"line":58,"column":34},"end":{"line":58,"column":55}}},"3":{"name":"intIdToBuffer","line":68,"loc":{"start":{"line":68,"column":40},"end":{"line":68,"column":67}}},"4":{"name":"convertHost","line":75,"loc":{"start":{"line":75,"column":38},"end":{"line":75,"column":69}}},"5":{"name":"jsonSpanToThriftSpan","line":86,"loc":{"start":{"line":86,"column":0},"end":{"line":86,"column":36}}},"6":{"name":"fixAnnotation","line":87,"loc":{"start":{"line":87,"column":43},"end":{"line":87,"column":72}}},"7":{"name":"fixBinAnnotation","line":95,"loc":{"start":{"line":95,"column":35},"end":{"line":95,"column":67}}},"8":{"name":"report","line":137,"loc":{"start":{"line":137,"column":0},"end":{"line":137,"column":38}}},"9":{"name":"onResponse","line":165,"loc":{"start":{"line":165,"column":4},"end":{"line":165,"column":39}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":27}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":31}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":38}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":41}},"5":{"start":{"line":29,"column":0},"end":{"line":56,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":52}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":60}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":66}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":68}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":74}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":33}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":35}},"15":{"start":{"line":42,"column":4},"end":{"line":42,"column":41}},"16":{"start":{"line":43,"column":4},"end":{"line":44,"column":35}},"17":{"start":{"line":47,"column":4},"end":{"line":50,"column":5}},"18":{"start":{"line":49,"column":8},"end":{"line":49,"column":77},"skip":true},"19":{"start":{"line":52,"column":4},"end":{"line":55,"column":7}},"20":{"start":{"line":58,"column":0},"end":{"line":66,"column":2}},"21":{"start":{"line":59,"column":4},"end":{"line":59,"column":16}},"22":{"start":{"line":60,"column":4},"end":{"line":60,"column":30}},"23":{"start":{"line":61,"column":4},"end":{"line":64,"column":5}},"24":{"start":{"line":62,"column":8},"end":{"line":62,"column":18}},"25":{"start":{"line":63,"column":8},"end":{"line":63,"column":38}},"26":{"start":{"line":65,"column":4},"end":{"line":65,"column":23}},"27":{"start":{"line":68,"column":0},"end":{"line":73,"column":2}},"28":{"start":{"line":69,"column":4},"end":{"line":69,"column":28}},"29":{"start":{"line":70,"column":4},"end":{"line":70,"column":32}},"30":{"start":{"line":71,"column":4},"end":{"line":71,"column":32}},"31":{"start":{"line":72,"column":4},"end":{"line":72,"column":15}},"32":{"start":{"line":75,"column":0},"end":{"line":83,"column":2}},"33":{"start":{"line":76,"column":4},"end":{"line":82,"column":6}},"34":{"start":{"line":85,"column":0},"end":{"line":134,"column":2}},"35":{"start":{"line":87,"column":4},"end":{"line":92,"column":7}},"36":{"start":{"line":88,"column":8},"end":{"line":91,"column":10}},"37":{"start":{"line":94,"column":4},"end":{"line":118,"column":11}},"38":{"start":{"line":96,"column":12},"end":{"line":104,"column":14}},"39":{"start":{"line":106,"column":12},"end":{"line":115,"column":13}},"40":{"start":{"line":107,"column":16},"end":{"line":107,"column":44}},"41":{"start":{"line":108,"column":16},"end":{"line":108,"column":43}},"42":{"start":{"line":109,"column":19},"end":{"line":115,"column":13}},"43":{"start":{"line":110,"column":16},"end":{"line":110,"column":46}},"44":{"start":{"line":111,"column":16},"end":{"line":111,"column":45}},"45":{"start":{"line":113,"column":16},"end":{"line":113,"column":46}},"46":{"start":{"line":114,"column":16},"end":{"line":114,"column":53}},"47":{"start":{"line":117,"column":12},"end":{"line":117,"column":23}},"48":{"start":{"line":120,"column":4},"end":{"line":120,"column":61}},"49":{"start":{"line":121,"column":4},"end":{"line":121,"column":61}},"50":{"start":{"line":123,"column":4},"end":{"line":131,"column":6}},"51":{"start":{"line":133,"column":4},"end":{"line":133,"column":18}},"52":{"start":{"line":136,"column":0},"end":{"line":194,"column":2}},"53":{"start":{"line":138,"column":4},"end":{"line":138,"column":20}},"54":{"start":{"line":140,"column":4},"end":{"line":143,"column":5}},"55":{"start":{"line":141,"column":8},"end":{"line":141,"column":24}},"56":{"start":{"line":142,"column":8},"end":{"line":142,"column":20}},"57":{"start":{"line":145,"column":4},"end":{"line":155,"column":7}},"58":{"start":{"line":157,"column":4},"end":{"line":163,"column":6}},"59":{"start":{"line":165,"column":4},"end":{"line":193,"column":5}},"60":{"start":{"line":166,"column":8},"end":{"line":192,"column":9}},"61":{"start":{"line":167,"column":12},"end":{"line":172,"column":13}},"62":{"start":{"line":168,"column":16},"end":{"line":171,"column":19}},"63":{"start":{"line":174,"column":12},"end":{"line":176,"column":13}},"64":{"start":{"line":175,"column":16},"end":{"line":175,"column":30}},"65":{"start":{"line":178,"column":15},"end":{"line":192,"column":9}},"66":{"start":{"line":179,"column":12},"end":{"line":184,"column":13}},"67":{"start":{"line":180,"column":16},"end":{"line":183,"column":19}},"68":{"start":{"line":186,"column":12},"end":{"line":188,"column":13}},"69":{"start":{"line":187,"column":16},"end":{"line":187,"column":40}},"70":{"start":{"line":190,"column":15},"end":{"line":192,"column":9}},"71":{"start":{"line":191,"column":12},"end":{"line":191,"column":23}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":43,"type":"cond-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":27}},{"start":{"line":44,"column":30},"end":{"line":44,"column":34}}]},"3":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4},"skip":true},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"4":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":106,"column":12}},{"start":{"line":106,"column":12},"end":{"line":106,"column":12}}]},"5":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":19},"end":{"line":109,"column":19}},{"start":{"line":109,"column":19},"end":{"line":109,"column":19}}]},"6":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":19},"end":{"line":120,"column":32}},{"start":{"line":120,"column":36},"end":{"line":120,"column":60}}]},"7":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":140,"column":4}},{"start":{"line":140,"column":4},"end":{"line":140,"column":4}}]},"8":{"line":146,"type":"binary-expr","locations":[{"start":{"line":146,"column":18},"end":{"line":146,"column":22}},{"start":{"line":146,"column":26},"end":{"line":146,"column":38}},{"start":{"line":146,"column":43},"end":{"line":146,"column":46}}]},"9":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":8},"end":{"line":166,"column":8}},{"start":{"line":166,"column":8},"end":{"line":166,"column":8}}]},"10":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":12},"end":{"line":167,"column":12}},{"start":{"line":167,"column":12},"end":{"line":167,"column":12}}]},"11":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":12},"end":{"line":174,"column":12}},{"start":{"line":174,"column":12},"end":{"line":174,"column":12}}]},"12":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":15},"end":{"line":178,"column":15}},{"start":{"line":178,"column":15},"end":{"line":178,"column":15}}]},"13":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":12}},{"start":{"line":179,"column":12},"end":{"line":179,"column":12}}]},"14":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":186,"column":12}},{"start":{"line":186,"column":12},"end":{"line":186,"column":12}}]},"15":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":15},"end":{"line":190,"column":15}},{"start":{"line":190,"column":15},"end":{"line":190,"column":15}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var path = require('path');","var assert = require('assert');","var Buffer = require('buffer').Buffer;","","module.exports = TCollectorTraceReporter;","","function TCollectorTraceReporter(options) {","    if (!(this instanceof TCollectorTraceReporter)) {","        return new TCollectorTraceReporter(options);","    }","    var self = this;","","    assert(typeof options === 'object', 'options required');","    assert(typeof options.logger === 'object', 'logger required');","    assert(typeof options.channel === 'object', 'channel required');","    assert(typeof options.callerName === 'string', 'callerName required');","","    self.logger = options.logger;","    self.channel = options.channel;","    self.callerName = options.callerName;","    self.logWarnings = 'logWarnings' in options ?","        options.logWarnings : true;","","    /*istanbul ignore if*/","    if (!self.channel) {","        // TODO: typederror or vld","        throw new Error('TCollectorTraceReporter must be passed a tchannel');","    }","","    self.tchannelThrift = new self.channel.TChannelAsThrift({","        entryPoint: path.join(__dirname, 'tcollector.thrift'),","        strict: false","    });","}","","TCollectorTraceReporter.ipToInt = function ipToInt(ip) {","    var ipl = 0;","    var parts = ip.split('.');","    for (var i = 0; i < parts.length; i++) {","        ipl <<= 8;","        ipl += parseInt(parts[i], 10);","    }","    return (ipl >>> 0);","};","","TCollectorTraceReporter.intIdToBuffer = function intIdToBuffer(id) {","    var buf = new Buffer(8);","    buf.writeUInt32BE(id[0], 0);","    buf.writeUInt32BE(id[1], 4);","    return buf;","};","","TCollectorTraceReporter.convertHost = function convertHost(endpoint) {","    return {","        // the >> 0 here effectively casts the ip as a signed int since","        // thrift doesn't have unsigned types","        ipv4: TCollectorTraceReporter.ipToInt(endpoint.ipv4) >> 0,","        port: endpoint.port,","        serviceName: endpoint.serviceName","    };","};","","TCollectorTraceReporter.jsonSpanToThriftSpan =","function jsonSpanToThriftSpan(span) {","    var annotations = span.annotations.map(function fixAnnotation(item) {","        return {","            timestamp: item.timestamp,","            value: item.value","        };","    });","","    var binaryAnnotations =","        span.binaryAnnotations.map(function fixBinAnnotation(item) {","            var ret = {","                key: item.key,","                annotationType: null,","                boolValue: null,","                intValue: null,","                doubleValue: null,","                stringValue: null,","                bytesValue: null","            };","","            if (item.type === 'boolean') {","                ret.annotationType = 'BOOL';","                ret.boolValue = item.value;","            } else if (item.type === 'number') {","                ret.annotationType = 'DOUBLE';","                ret.doubleValue = item.value;","            } else {","                ret.annotationType = 'STRING';","                ret.stringValue = String(item.value);","            }","","            return ret;","        });","","    var endpoint = span.endpoint || span.annotations[0].host;","    var host = TCollectorTraceReporter.convertHost(endpoint);","","    var mapped = {","        name: span.name,","        traceId: TCollectorTraceReporter.intIdToBuffer(span.traceid),","        parentId: TCollectorTraceReporter.intIdToBuffer(span.parentid),","        id: TCollectorTraceReporter.intIdToBuffer(span.id),","        annotations: annotations,","        binaryAnnotations: binaryAnnotations,","        host: host","    };","","    return mapped;","};","","TCollectorTraceReporter.prototype.report =","function report(span, opts, callback) {","    var self = this;","","    if (typeof opts === 'function') {","        callback = opts;","        opts = null;","    }","","    var req = self.channel.request({","        timeout: (opts && opts.timeout) || 100,","        trace: false,","        hasNoParent: true,","        headers: {","            cn: self.callerName,","            shardKey: span.traceid.toString('base64')","        },","        serviceName: 'tcollector',","        retryFlags: {never: true}","    });","","    self.tchannelThrift.send(","        req,","        'TCollector::submit',","        null,","        {span: TCollectorTraceReporter.jsonSpanToThriftSpan(span)},","        onResponse","    );","","    function onResponse(err, response) {","        if (err) {","            if (self.logWarnings) {","                self.logger.warn('Zipkin span submit failed', {","                    error: err,","                    serviceName: 'tcollector'","                });","            }","","            if (callback) {","                callback(err);","            }","","        } else if (!response.ok) {","            if (self.logWarnings) {","                self.logger.warn('Zipkin span submit failed: not ok', {","                    error: response.body,","                    serviceName: 'tcollector'","                });","            }","","            if (callback) {","                callback(response.body);","            }","","        } else if (callback) {","            callback();","        }","    }","};","",""],"l":{"23":1,"24":1,"25":1,"27":1,"29":1,"30":0,"31":0,"33":0,"35":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"43":0,"47":0,"49":1,"52":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"65":0,"68":1,"69":0,"70":0,"71":0,"72":0,"75":1,"76":0,"85":1,"87":0,"88":0,"94":0,"96":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"114":0,"117":0,"120":0,"121":0,"123":0,"133":0,"136":1,"138":0,"140":0,"141":0,"142":0,"145":0,"157":0,"165":1,"166":0,"167":0,"168":0,"174":0,"175":0,"178":0,"179":0,"180":0,"186":0,"187":0,"190":0,"191":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lazy_relay.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lazy_relay.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1,"94":1,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":1,"142":0,"143":0,"144":1,"145":0,"146":0,"147":0,"148":0,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":1,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":1,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":1,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":1,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":1,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":1,"255":0,"256":0,"257":0,"258":1,"259":0,"260":0,"261":0,"262":1,"263":0,"264":0,"265":1,"266":0,"267":0,"268":0,"269":1,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":1,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":1,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":1,"312":1,"313":1,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":1,"322":0,"323":0,"324":0,"325":0,"326":0,"327":1,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":1,"339":0,"340":0,"341":1,"342":0,"343":0,"344":1,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":1,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":1,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":1,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":1,"413":0,"414":0,"415":0,"416":1,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"fnMap":{"1":{"name":"LazyRelayInReq","line":44,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":40}}},"2":{"name":"extendLogInfo","line":72,"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":33}}},"3":{"name":"onIdentified","line":76,"loc":{"start":{"line":76,"column":4},"end":{"line":76,"column":31}}},"4":{"name":"reset","line":89,"loc":{"start":{"line":89,"column":33},"end":{"line":89,"column":64}}},"5":{"name":"clear","line":114,"loc":{"start":{"line":114,"column":33},"end":{"line":114,"column":50}}},"6":{"name":"initRead","line":152,"loc":{"start":{"line":152,"column":0},"end":{"line":152,"column":20}}},"7":{"name":"extendLogInfo","line":221,"loc":{"start":{"line":221,"column":0},"end":{"line":221,"column":29}}},"8":{"name":"_extendLogInfo","line":238,"loc":{"start":{"line":238,"column":0},"end":{"line":238,"column":30}}},"9":{"name":"relayRequestlogError","line":257,"loc":{"start":{"line":257,"column":0},"end":{"line":257,"column":45}}},"10":{"name":"onTimeout","line":264,"loc":{"start":{"line":264,"column":0},"end":{"line":264,"column":24}}},"11":{"name":"createOutRequest","line":281,"loc":{"start":{"line":281,"column":0},"end":{"line":281,"column":28}}},"12":{"name":"onIdentified","line":298,"loc":{"start":{"line":298,"column":0},"end":{"line":298,"column":27}}},"13":{"name":"forwardTo","line":335,"loc":{"start":{"line":335,"column":0},"end":{"line":335,"column":25}}},"14":{"name":"updateTTL","line":369,"loc":{"start":{"line":369,"column":0},"end":{"line":369,"column":24}}},"15":{"name":"onReadError","line":406,"loc":{"start":{"line":406,"column":0},"end":{"line":406,"column":26}}},"16":{"name":"onError","line":426,"loc":{"start":{"line":426,"column":0},"end":{"line":426,"column":22}}},"17":{"name":"sendErrorFrame","line":458,"loc":{"start":{"line":458,"column":0},"end":{"line":458,"column":43}}},"18":{"name":"handleFrameLazily","line":473,"loc":{"start":{"line":473,"column":0},"end":{"line":473,"column":34}}},"19":{"name":"_observeCallReqOutFrame","line":511,"loc":{"start":{"line":511,"column":0},"end":{"line":511,"column":40}}},"20":{"name":"_observeInboundErrorFrame","line":538,"loc":{"start":{"line":538,"column":0},"end":{"line":538,"column":50}}},"21":{"name":"_observeCallReqFrame","line":566,"loc":{"start":{"line":566,"column":0},"end":{"line":566,"column":37}}},"22":{"name":"_observeCallReqContFrame","line":582,"loc":{"start":{"line":582,"column":0},"end":{"line":582,"column":41}}},"23":{"name":"LazyRelayOutReq","line":608,"loc":{"start":{"line":608,"column":0},"end":{"line":608,"column":38}}},"24":{"name":"reset","line":624,"loc":{"start":{"line":624,"column":34},"end":{"line":624,"column":62}}},"25":{"name":"clear","line":640,"loc":{"start":{"line":640,"column":34},"end":{"line":640,"column":51}}},"26":{"name":"extendLogInfo","line":661,"loc":{"start":{"line":661,"column":0},"end":{"line":661,"column":29}}},"27":{"name":"_extendLogInfo","line":678,"loc":{"start":{"line":678,"column":0},"end":{"line":678,"column":30}}},"28":{"name":"emitError","line":689,"loc":{"start":{"line":689,"column":0},"end":{"line":689,"column":24}}},"29":{"name":"deferInReqOnError","line":735,"loc":{"start":{"line":735,"column":4},"end":{"line":735,"column":33}}},"30":{"name":"relayRequestlogError","line":743,"loc":{"start":{"line":743,"column":0},"end":{"line":743,"column":45}}},"31":{"name":"onTimeout","line":750,"loc":{"start":{"line":750,"column":0},"end":{"line":750,"column":24}}},"32":{"name":"handleFrameLazily","line":774,"loc":{"start":{"line":774,"column":0},"end":{"line":774,"column":34}}},"33":{"name":"_observeErrorFrame","line":814,"loc":{"start":{"line":814,"column":0},"end":{"line":814,"column":43}}},"34":{"name":"_observeCallResFrame","line":870,"loc":{"start":{"line":870,"column":0},"end":{"line":870,"column":42}}},"35":{"name":"_observeCallResContFrame","line":985,"loc":{"start":{"line":985,"column":0},"end":{"line":985,"column":46}}},"36":{"name":"logError","line":1011,"loc":{"start":{"line":1011,"column":0},"end":{"line":1011,"column":56}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":33}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":25}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":37}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":46}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":45}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":47}},"8":{"start":{"line":31,"column":0},"end":{"line":31,"column":31}},"9":{"start":{"line":32,"column":0},"end":{"line":32,"column":33}},"10":{"start":{"line":34,"column":0},"end":{"line":38,"column":2}},"11":{"start":{"line":44,"column":0},"end":{"line":87,"column":1}},"12":{"start":{"line":45,"column":4},"end":{"line":45,"column":24}},"13":{"start":{"line":46,"column":4},"end":{"line":46,"column":21}},"14":{"start":{"line":47,"column":4},"end":{"line":47,"column":22}},"15":{"start":{"line":48,"column":4},"end":{"line":48,"column":27}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":23}},"17":{"start":{"line":50,"column":4},"end":{"line":50,"column":21}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":23}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":25}},"20":{"start":{"line":53,"column":4},"end":{"line":53,"column":19}},"21":{"start":{"line":54,"column":4},"end":{"line":54,"column":28}},"22":{"start":{"line":55,"column":4},"end":{"line":55,"column":27}},"23":{"start":{"line":56,"column":4},"end":{"line":56,"column":24}},"24":{"start":{"line":57,"column":4},"end":{"line":57,"column":22}},"25":{"start":{"line":58,"column":4},"end":{"line":58,"column":27}},"26":{"start":{"line":59,"column":4},"end":{"line":59,"column":31}},"27":{"start":{"line":60,"column":4},"end":{"line":60,"column":25}},"28":{"start":{"line":61,"column":4},"end":{"line":61,"column":22}},"29":{"start":{"line":62,"column":4},"end":{"line":62,"column":24}},"30":{"start":{"line":63,"column":4},"end":{"line":63,"column":28}},"31":{"start":{"line":64,"column":4},"end":{"line":64,"column":24}},"32":{"start":{"line":65,"column":4},"end":{"line":65,"column":33}},"33":{"start":{"line":67,"column":4},"end":{"line":67,"column":44}},"34":{"start":{"line":68,"column":4},"end":{"line":68,"column":42}},"35":{"start":{"line":70,"column":4},"end":{"line":70,"column":20}},"36":{"start":{"line":72,"column":4},"end":{"line":74,"column":5}},"37":{"start":{"line":73,"column":8},"end":{"line":73,"column":40}},"38":{"start":{"line":76,"column":4},"end":{"line":86,"column":5}},"39":{"start":{"line":79,"column":8},"end":{"line":79,"column":35}},"40":{"start":{"line":81,"column":8},"end":{"line":85,"column":9}},"41":{"start":{"line":82,"column":12},"end":{"line":82,"column":30}},"42":{"start":{"line":84,"column":12},"end":{"line":84,"column":32}},"43":{"start":{"line":89,"column":0},"end":{"line":112,"column":2}},"44":{"start":{"line":90,"column":4},"end":{"line":90,"column":32}},"45":{"start":{"line":91,"column":4},"end":{"line":91,"column":21}},"46":{"start":{"line":92,"column":4},"end":{"line":92,"column":35}},"47":{"start":{"line":93,"column":4},"end":{"line":93,"column":38}},"48":{"start":{"line":94,"column":4},"end":{"line":94,"column":30}},"49":{"start":{"line":95,"column":4},"end":{"line":95,"column":21}},"50":{"start":{"line":96,"column":4},"end":{"line":96,"column":23}},"51":{"start":{"line":97,"column":4},"end":{"line":97,"column":29}},"52":{"start":{"line":98,"column":4},"end":{"line":98,"column":31}},"53":{"start":{"line":99,"column":4},"end":{"line":99,"column":26}},"54":{"start":{"line":100,"column":4},"end":{"line":100,"column":25}},"55":{"start":{"line":101,"column":4},"end":{"line":101,"column":21}},"56":{"start":{"line":102,"column":4},"end":{"line":102,"column":22}},"57":{"start":{"line":103,"column":4},"end":{"line":103,"column":27}},"58":{"start":{"line":104,"column":4},"end":{"line":104,"column":31}},"59":{"start":{"line":105,"column":4},"end":{"line":105,"column":23}},"60":{"start":{"line":106,"column":4},"end":{"line":106,"column":22}},"61":{"start":{"line":107,"column":4},"end":{"line":107,"column":24}},"62":{"start":{"line":108,"column":4},"end":{"line":108,"column":34}},"63":{"start":{"line":109,"column":4},"end":{"line":109,"column":25}},"64":{"start":{"line":110,"column":4},"end":{"line":110,"column":36}},"65":{"start":{"line":111,"column":4},"end":{"line":111,"column":33}},"66":{"start":{"line":114,"column":0},"end":{"line":145,"column":2}},"67":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"68":{"start":{"line":116,"column":8},"end":{"line":116,"column":27}},"69":{"start":{"line":119,"column":4},"end":{"line":121,"column":5}},"70":{"start":{"line":120,"column":8},"end":{"line":120,"column":66}},"71":{"start":{"line":123,"column":4},"end":{"line":123,"column":24}},"72":{"start":{"line":124,"column":4},"end":{"line":124,"column":21}},"73":{"start":{"line":125,"column":4},"end":{"line":125,"column":22}},"74":{"start":{"line":126,"column":4},"end":{"line":126,"column":27}},"75":{"start":{"line":127,"column":4},"end":{"line":127,"column":23}},"76":{"start":{"line":128,"column":4},"end":{"line":128,"column":21}},"77":{"start":{"line":129,"column":4},"end":{"line":129,"column":23}},"78":{"start":{"line":130,"column":4},"end":{"line":130,"column":25}},"79":{"start":{"line":131,"column":4},"end":{"line":131,"column":19}},"80":{"start":{"line":132,"column":4},"end":{"line":132,"column":28}},"81":{"start":{"line":133,"column":4},"end":{"line":133,"column":27}},"82":{"start":{"line":134,"column":4},"end":{"line":134,"column":24}},"83":{"start":{"line":135,"column":4},"end":{"line":135,"column":22}},"84":{"start":{"line":136,"column":4},"end":{"line":136,"column":27}},"85":{"start":{"line":137,"column":4},"end":{"line":137,"column":31}},"86":{"start":{"line":138,"column":4},"end":{"line":138,"column":25}},"87":{"start":{"line":139,"column":4},"end":{"line":139,"column":22}},"88":{"start":{"line":140,"column":4},"end":{"line":140,"column":24}},"89":{"start":{"line":141,"column":4},"end":{"line":141,"column":34}},"90":{"start":{"line":142,"column":4},"end":{"line":142,"column":24}},"91":{"start":{"line":143,"column":4},"end":{"line":143,"column":24}},"92":{"start":{"line":144,"column":4},"end":{"line":144,"column":33}},"93":{"start":{"line":147,"column":0},"end":{"line":147,"column":55}},"94":{"start":{"line":149,"column":0},"end":{"line":149,"column":65}},"95":{"start":{"line":151,"column":0},"end":{"line":218,"column":2}},"96":{"start":{"line":153,"column":4},"end":{"line":153,"column":20}},"97":{"start":{"line":155,"column":4},"end":{"line":157,"column":5}},"98":{"start":{"line":156,"column":8},"end":{"line":156,"column":20}},"99":{"start":{"line":158,"column":4},"end":{"line":158,"column":24}},"100":{"start":{"line":162,"column":4},"end":{"line":162,"column":67}},"101":{"start":{"line":163,"column":4},"end":{"line":168,"column":5}},"102":{"start":{"line":164,"column":8},"end":{"line":167,"column":11}},"103":{"start":{"line":169,"column":4},"end":{"line":169,"column":27}},"104":{"start":{"line":171,"column":4},"end":{"line":172,"column":39}},"105":{"start":{"line":173,"column":4},"end":{"line":178,"column":5}},"106":{"start":{"line":174,"column":8},"end":{"line":177,"column":11}},"107":{"start":{"line":179,"column":4},"end":{"line":179,"column":35}},"108":{"start":{"line":181,"column":4},"end":{"line":182,"column":42}},"109":{"start":{"line":183,"column":4},"end":{"line":188,"column":5}},"110":{"start":{"line":184,"column":8},"end":{"line":187,"column":11}},"111":{"start":{"line":189,"column":4},"end":{"line":189,"column":33}},"112":{"start":{"line":191,"column":4},"end":{"line":192,"column":36}},"113":{"start":{"line":193,"column":4},"end":{"line":198,"column":5}},"114":{"start":{"line":194,"column":8},"end":{"line":197,"column":11}},"115":{"start":{"line":199,"column":4},"end":{"line":199,"column":29}},"116":{"start":{"line":201,"column":4},"end":{"line":202,"column":54}},"117":{"start":{"line":203,"column":4},"end":{"line":203,"column":54}},"118":{"start":{"line":205,"column":4},"end":{"line":214,"column":6}},"119":{"start":{"line":215,"column":4},"end":{"line":215,"column":45}},"120":{"start":{"line":217,"column":4},"end":{"line":217,"column":16}},"121":{"start":{"line":220,"column":0},"end":{"line":235,"column":2}},"122":{"start":{"line":222,"column":4},"end":{"line":222,"column":20}},"123":{"start":{"line":224,"column":4},"end":{"line":226,"column":5}},"124":{"start":{"line":225,"column":8},"end":{"line":225,"column":45}},"125":{"start":{"line":228,"column":4},"end":{"line":230,"column":5}},"126":{"start":{"line":229,"column":8},"end":{"line":229,"column":48}},"127":{"start":{"line":232,"column":4},"end":{"line":232,"column":37}},"128":{"start":{"line":234,"column":4},"end":{"line":234,"column":16}},"129":{"start":{"line":237,"column":0},"end":{"line":254,"column":2}},"130":{"start":{"line":239,"column":4},"end":{"line":239,"column":20}},"131":{"start":{"line":241,"column":4},"end":{"line":243,"column":5}},"132":{"start":{"line":242,"column":8},"end":{"line":242,"column":45}},"133":{"start":{"line":245,"column":4},"end":{"line":245,"column":35}},"134":{"start":{"line":246,"column":4},"end":{"line":246,"column":47}},"135":{"start":{"line":247,"column":4},"end":{"line":247,"column":31}},"136":{"start":{"line":248,"column":4},"end":{"line":248,"column":40}},"137":{"start":{"line":249,"column":4},"end":{"line":249,"column":38}},"138":{"start":{"line":250,"column":4},"end":{"line":250,"column":34}},"139":{"start":{"line":251,"column":4},"end":{"line":251,"column":35}},"140":{"start":{"line":253,"column":4},"end":{"line":253,"column":16}},"141":{"start":{"line":256,"column":0},"end":{"line":261,"column":2}},"142":{"start":{"line":258,"column":4},"end":{"line":258,"column":20}},"143":{"start":{"line":260,"column":4},"end":{"line":260,"column":71}},"144":{"start":{"line":263,"column":0},"end":{"line":278,"column":2}},"145":{"start":{"line":265,"column":4},"end":{"line":265,"column":20}},"146":{"start":{"line":268,"column":4},"end":{"line":270,"column":5}},"147":{"start":{"line":269,"column":8},"end":{"line":269,"column":15}},"148":{"start":{"line":272,"column":4},"end":{"line":277,"column":8}},"149":{"start":{"line":280,"column":0},"end":{"line":295,"column":2}},"150":{"start":{"line":282,"column":4},"end":{"line":282,"column":20}},"151":{"start":{"line":284,"column":4},"end":{"line":287,"column":5}},"152":{"start":{"line":285,"column":8},"end":{"line":285,"column":87}},"153":{"start":{"line":286,"column":8},"end":{"line":286,"column":15}},"154":{"start":{"line":289,"column":4},"end":{"line":289,"column":47}},"155":{"start":{"line":290,"column":4},"end":{"line":294,"column":5}},"156":{"start":{"line":291,"column":8},"end":{"line":291,"column":29}},"157":{"start":{"line":293,"column":8},"end":{"line":293,"column":84}},"158":{"start":{"line":297,"column":0},"end":{"line":332,"column":2}},"159":{"start":{"line":299,"column":4},"end":{"line":299,"column":20}},"160":{"start":{"line":301,"column":4},"end":{"line":304,"column":5}},"161":{"start":{"line":302,"column":8},"end":{"line":302,"column":26}},"162":{"start":{"line":303,"column":8},"end":{"line":303,"column":15}},"163":{"start":{"line":306,"column":4},"end":{"line":306,"column":47}},"164":{"start":{"line":307,"column":4},"end":{"line":314,"column":5}},"165":{"start":{"line":308,"column":8},"end":{"line":311,"column":10}},"166":{"start":{"line":312,"column":8},"end":{"line":312,"column":47}},"167":{"start":{"line":313,"column":8},"end":{"line":313,"column":15}},"168":{"start":{"line":316,"column":4},"end":{"line":322,"column":5}},"169":{"start":{"line":318,"column":8},"end":{"line":321,"column":10}},"170":{"start":{"line":323,"column":4},"end":{"line":329,"column":5}},"171":{"start":{"line":325,"column":8},"end":{"line":328,"column":10}},"172":{"start":{"line":331,"column":4},"end":{"line":331,"column":25}},"173":{"start":{"line":334,"column":0},"end":{"line":366,"column":2}},"174":{"start":{"line":336,"column":4},"end":{"line":336,"column":20}},"175":{"start":{"line":338,"column":4},"end":{"line":338,"column":42}},"176":{"start":{"line":339,"column":4},"end":{"line":339,"column":34}},"177":{"start":{"line":341,"column":4},"end":{"line":341,"column":48}},"178":{"start":{"line":342,"column":4},"end":{"line":345,"column":5}},"179":{"start":{"line":344,"column":8},"end":{"line":344,"column":15}},"180":{"start":{"line":347,"column":4},"end":{"line":347,"column":30}},"181":{"start":{"line":348,"column":4},"end":{"line":348,"column":36}},"182":{"start":{"line":349,"column":4},"end":{"line":349,"column":53}},"183":{"start":{"line":350,"column":4},"end":{"line":350,"column":42}},"184":{"start":{"line":351,"column":4},"end":{"line":351,"column":25}},"185":{"start":{"line":353,"column":4},"end":{"line":355,"column":5}},"186":{"start":{"line":354,"column":8},"end":{"line":354,"column":54}},"187":{"start":{"line":357,"column":4},"end":{"line":357,"column":34}},"188":{"start":{"line":359,"column":4},"end":{"line":359,"column":40}},"189":{"start":{"line":360,"column":4},"end":{"line":365,"column":6}},"190":{"start":{"line":368,"column":0},"end":{"line":403,"column":2}},"191":{"start":{"line":370,"column":4},"end":{"line":370,"column":20}},"192":{"start":{"line":372,"column":4},"end":{"line":372,"column":35}},"193":{"start":{"line":373,"column":4},"end":{"line":373,"column":41}},"194":{"start":{"line":375,"column":4},"end":{"line":379,"column":5}},"195":{"start":{"line":376,"column":8},"end":{"line":376,"column":60}},"196":{"start":{"line":378,"column":8},"end":{"line":378,"column":23}},"197":{"start":{"line":381,"column":4},"end":{"line":393,"column":5}},"198":{"start":{"line":384,"column":8},"end":{"line":390,"column":10}},"199":{"start":{"line":392,"column":8},"end":{"line":392,"column":47}},"200":{"start":{"line":395,"column":4},"end":{"line":395,"column":87}},"201":{"start":{"line":396,"column":4},"end":{"line":400,"column":5}},"202":{"start":{"line":398,"column":8},"end":{"line":398,"column":30}},"203":{"start":{"line":399,"column":8},"end":{"line":399,"column":19}},"204":{"start":{"line":402,"column":4},"end":{"line":402,"column":19}},"205":{"start":{"line":405,"column":0},"end":{"line":423,"column":2}},"206":{"start":{"line":407,"column":4},"end":{"line":407,"column":20}},"207":{"start":{"line":409,"column":4},"end":{"line":409,"column":45}},"208":{"start":{"line":410,"column":4},"end":{"line":417,"column":5}},"209":{"start":{"line":411,"column":8},"end":{"line":416,"column":10}},"210":{"start":{"line":419,"column":4},"end":{"line":419,"column":25}},"211":{"start":{"line":420,"column":4},"end":{"line":420,"column":22}},"212":{"start":{"line":422,"column":4},"end":{"line":422,"column":23}},"213":{"start":{"line":425,"column":0},"end":{"line":455,"column":2}},"214":{"start":{"line":427,"column":4},"end":{"line":427,"column":20}},"215":{"start":{"line":429,"column":4},"end":{"line":435,"column":5}},"216":{"start":{"line":430,"column":8},"end":{"line":432,"column":12}},"217":{"start":{"line":433,"column":8},"end":{"line":433,"column":20}},"218":{"start":{"line":434,"column":8},"end":{"line":434,"column":15}},"219":{"start":{"line":437,"column":4},"end":{"line":439,"column":5}},"220":{"start":{"line":438,"column":8},"end":{"line":438,"column":47}},"221":{"start":{"line":441,"column":4},"end":{"line":441,"column":21}},"222":{"start":{"line":442,"column":4},"end":{"line":442,"column":23}},"223":{"start":{"line":443,"column":4},"end":{"line":443,"column":61}},"224":{"start":{"line":444,"column":4},"end":{"line":444,"column":47}},"225":{"start":{"line":445,"column":4},"end":{"line":445,"column":33}},"226":{"start":{"line":447,"column":4},"end":{"line":450,"column":8}},"227":{"start":{"line":452,"column":4},"end":{"line":452,"column":34}},"228":{"start":{"line":454,"column":4},"end":{"line":454,"column":16}},"229":{"start":{"line":457,"column":0},"end":{"line":470,"column":2}},"230":{"start":{"line":459,"column":4},"end":{"line":459,"column":20}},"231":{"start":{"line":462,"column":4},"end":{"line":464,"column":5}},"232":{"start":{"line":463,"column":8},"end":{"line":463,"column":15}},"233":{"start":{"line":466,"column":4},"end":{"line":466,"column":40}},"234":{"start":{"line":467,"column":4},"end":{"line":467,"column":50}},"235":{"start":{"line":469,"column":4},"end":{"line":469,"column":75}},"236":{"start":{"line":472,"column":0},"end":{"line":508,"column":2}},"237":{"start":{"line":477,"column":4},"end":{"line":477,"column":20}},"238":{"start":{"line":479,"column":4},"end":{"line":483,"column":5}},"239":{"start":{"line":480,"column":8},"end":{"line":480,"column":91}},"240":{"start":{"line":481,"column":8},"end":{"line":481,"column":20}},"241":{"start":{"line":482,"column":8},"end":{"line":482,"column":15}},"242":{"start":{"line":487,"column":4},"end":{"line":490,"column":5}},"243":{"start":{"line":488,"column":8},"end":{"line":488,"column":39}},"244":{"start":{"line":489,"column":8},"end":{"line":489,"column":15}},"245":{"start":{"line":492,"column":4},"end":{"line":492,"column":32}},"246":{"start":{"line":493,"column":4},"end":{"line":493,"column":49}},"247":{"start":{"line":494,"column":4},"end":{"line":500,"column":5}},"248":{"start":{"line":495,"column":8},"end":{"line":495,"column":27}},"249":{"start":{"line":496,"column":8},"end":{"line":499,"column":12}},"250":{"start":{"line":502,"column":4},"end":{"line":507,"column":5}},"251":{"start":{"line":503,"column":8},"end":{"line":503,"column":44}},"252":{"start":{"line":504,"column":11},"end":{"line":507,"column":5}},"253":{"start":{"line":505,"column":8},"end":{"line":505,"column":45}},"254":{"start":{"line":510,"column":0},"end":{"line":535,"column":2}},"255":{"start":{"line":512,"column":4},"end":{"line":512,"column":20}},"256":{"start":{"line":514,"column":4},"end":{"line":523,"column":6}},"257":{"start":{"line":525,"column":4},"end":{"line":534,"column":6}},"258":{"start":{"line":537,"column":0},"end":{"line":563,"column":2}},"259":{"start":{"line":539,"column":4},"end":{"line":539,"column":20}},"260":{"start":{"line":541,"column":4},"end":{"line":550,"column":6}},"261":{"start":{"line":552,"column":4},"end":{"line":562,"column":6}},"262":{"start":{"line":565,"column":0},"end":{"line":579,"column":2}},"263":{"start":{"line":567,"column":4},"end":{"line":567,"column":20}},"264":{"start":{"line":569,"column":4},"end":{"line":578,"column":6}},"265":{"start":{"line":581,"column":0},"end":{"line":606,"column":2}},"266":{"start":{"line":583,"column":4},"end":{"line":583,"column":20}},"267":{"start":{"line":585,"column":4},"end":{"line":594,"column":6}},"268":{"start":{"line":596,"column":4},"end":{"line":605,"column":6}},"269":{"start":{"line":608,"column":0},"end":{"line":622,"column":1}},"270":{"start":{"line":609,"column":4},"end":{"line":609,"column":24}},"271":{"start":{"line":610,"column":4},"end":{"line":610,"column":21}},"272":{"start":{"line":611,"column":4},"end":{"line":611,"column":22}},"273":{"start":{"line":612,"column":4},"end":{"line":612,"column":27}},"274":{"start":{"line":613,"column":4},"end":{"line":613,"column":23}},"275":{"start":{"line":614,"column":4},"end":{"line":614,"column":22}},"276":{"start":{"line":615,"column":4},"end":{"line":615,"column":19}},"277":{"start":{"line":616,"column":4},"end":{"line":616,"column":28}},"278":{"start":{"line":617,"column":4},"end":{"line":617,"column":27}},"279":{"start":{"line":618,"column":4},"end":{"line":618,"column":24}},"280":{"start":{"line":619,"column":4},"end":{"line":619,"column":27}},"281":{"start":{"line":620,"column":4},"end":{"line":620,"column":31}},"282":{"start":{"line":621,"column":4},"end":{"line":621,"column":22}},"283":{"start":{"line":624,"column":0},"end":{"line":638,"column":2}},"284":{"start":{"line":625,"column":4},"end":{"line":625,"column":32}},"285":{"start":{"line":626,"column":4},"end":{"line":626,"column":21}},"286":{"start":{"line":627,"column":4},"end":{"line":627,"column":35}},"287":{"start":{"line":628,"column":4},"end":{"line":628,"column":38}},"288":{"start":{"line":629,"column":4},"end":{"line":629,"column":30}},"289":{"start":{"line":630,"column":4},"end":{"line":630,"column":23}},"290":{"start":{"line":631,"column":4},"end":{"line":631,"column":38}},"291":{"start":{"line":632,"column":4},"end":{"line":632,"column":46}},"292":{"start":{"line":633,"column":4},"end":{"line":633,"column":44}},"293":{"start":{"line":634,"column":4},"end":{"line":634,"column":21}},"294":{"start":{"line":635,"column":4},"end":{"line":635,"column":27}},"295":{"start":{"line":636,"column":4},"end":{"line":636,"column":31}},"296":{"start":{"line":637,"column":4},"end":{"line":637,"column":22}},"297":{"start":{"line":640,"column":0},"end":{"line":654,"column":2}},"298":{"start":{"line":641,"column":4},"end":{"line":641,"column":24}},"299":{"start":{"line":642,"column":4},"end":{"line":642,"column":21}},"300":{"start":{"line":643,"column":4},"end":{"line":643,"column":22}},"301":{"start":{"line":644,"column":4},"end":{"line":644,"column":27}},"302":{"start":{"line":645,"column":4},"end":{"line":645,"column":23}},"303":{"start":{"line":646,"column":4},"end":{"line":646,"column":22}},"304":{"start":{"line":647,"column":4},"end":{"line":647,"column":19}},"305":{"start":{"line":648,"column":4},"end":{"line":648,"column":28}},"306":{"start":{"line":649,"column":4},"end":{"line":649,"column":27}},"307":{"start":{"line":650,"column":4},"end":{"line":650,"column":24}},"308":{"start":{"line":651,"column":4},"end":{"line":651,"column":27}},"309":{"start":{"line":652,"column":4},"end":{"line":652,"column":31}},"310":{"start":{"line":653,"column":4},"end":{"line":653,"column":22}},"311":{"start":{"line":656,"column":0},"end":{"line":656,"column":56}},"312":{"start":{"line":658,"column":0},"end":{"line":658,"column":66}},"313":{"start":{"line":660,"column":0},"end":{"line":675,"column":2}},"314":{"start":{"line":662,"column":4},"end":{"line":662,"column":20}},"315":{"start":{"line":664,"column":4},"end":{"line":666,"column":5}},"316":{"start":{"line":665,"column":8},"end":{"line":665,"column":45}},"317":{"start":{"line":668,"column":4},"end":{"line":670,"column":5}},"318":{"start":{"line":669,"column":8},"end":{"line":669,"column":47}},"319":{"start":{"line":672,"column":4},"end":{"line":672,"column":37}},"320":{"start":{"line":674,"column":4},"end":{"line":674,"column":16}},"321":{"start":{"line":677,"column":0},"end":{"line":686,"column":2}},"322":{"start":{"line":679,"column":4},"end":{"line":679,"column":20}},"323":{"start":{"line":681,"column":4},"end":{"line":681,"column":33}},"324":{"start":{"line":682,"column":4},"end":{"line":682,"column":42}},"325":{"start":{"line":683,"column":4},"end":{"line":683,"column":32}},"326":{"start":{"line":685,"column":4},"end":{"line":685,"column":16}},"327":{"start":{"line":688,"column":0},"end":{"line":740,"column":2}},"328":{"start":{"line":690,"column":4},"end":{"line":690,"column":20}},"329":{"start":{"line":693,"column":4},"end":{"line":695,"column":5}},"330":{"start":{"line":694,"column":8},"end":{"line":694,"column":15}},"331":{"start":{"line":697,"column":4},"end":{"line":697,"column":40}},"332":{"start":{"line":698,"column":4},"end":{"line":698,"column":35}},"333":{"start":{"line":700,"column":4},"end":{"line":711,"column":6}},"334":{"start":{"line":713,"column":4},"end":{"line":724,"column":6}},"335":{"start":{"line":726,"column":4},"end":{"line":728,"column":5}},"336":{"start":{"line":727,"column":8},"end":{"line":727,"column":53}},"337":{"start":{"line":734,"column":4},"end":{"line":734,"column":40}},"338":{"start":{"line":735,"column":4},"end":{"line":739,"column":5}},"339":{"start":{"line":736,"column":8},"end":{"line":738,"column":9}},"340":{"start":{"line":737,"column":12},"end":{"line":737,"column":36}},"341":{"start":{"line":742,"column":0},"end":{"line":747,"column":2}},"342":{"start":{"line":744,"column":4},"end":{"line":744,"column":20}},"343":{"start":{"line":746,"column":4},"end":{"line":746,"column":39}},"344":{"start":{"line":749,"column":0},"end":{"line":771,"column":2}},"345":{"start":{"line":751,"column":4},"end":{"line":751,"column":20}},"346":{"start":{"line":754,"column":4},"end":{"line":756,"column":5}},"347":{"start":{"line":755,"column":8},"end":{"line":755,"column":15}},"348":{"start":{"line":758,"column":4},"end":{"line":758,"column":44}},"349":{"start":{"line":759,"column":4},"end":{"line":762,"column":8}},"350":{"start":{"line":763,"column":4},"end":{"line":763,"column":60}},"351":{"start":{"line":765,"column":4},"end":{"line":770,"column":8}},"352":{"start":{"line":773,"column":0},"end":{"line":811,"column":2}},"353":{"start":{"line":779,"column":4},"end":{"line":779,"column":20}},"354":{"start":{"line":782,"column":4},"end":{"line":784,"column":5}},"355":{"start":{"line":783,"column":8},"end":{"line":783,"column":15}},"356":{"start":{"line":786,"column":4},"end":{"line":786,"column":31}},"357":{"start":{"line":787,"column":4},"end":{"line":787,"column":48}},"358":{"start":{"line":788,"column":4},"end":{"line":795,"column":5}},"359":{"start":{"line":789,"column":8},"end":{"line":789,"column":27}},"360":{"start":{"line":790,"column":8},"end":{"line":793,"column":12}},"361":{"start":{"line":794,"column":8},"end":{"line":794,"column":72}},"362":{"start":{"line":797,"column":4},"end":{"line":797,"column":40}},"363":{"start":{"line":798,"column":4},"end":{"line":805,"column":5}},"364":{"start":{"line":799,"column":8},"end":{"line":799,"column":46}},"365":{"start":{"line":800,"column":11},"end":{"line":805,"column":5}},"366":{"start":{"line":801,"column":8},"end":{"line":801,"column":50}},"367":{"start":{"line":802,"column":11},"end":{"line":805,"column":5}},"368":{"start":{"line":803,"column":8},"end":{"line":803,"column":44}},"369":{"start":{"line":807,"column":4},"end":{"line":810,"column":5}},"370":{"start":{"line":809,"column":8},"end":{"line":809,"column":26}},"371":{"start":{"line":813,"column":0},"end":{"line":867,"column":2}},"372":{"start":{"line":815,"column":4},"end":{"line":815,"column":20}},"373":{"start":{"line":817,"column":4},"end":{"line":817,"column":54}},"374":{"start":{"line":818,"column":4},"end":{"line":823,"column":5}},"375":{"start":{"line":819,"column":8},"end":{"line":821,"column":12}},"376":{"start":{"line":822,"column":8},"end":{"line":822,"column":15}},"377":{"start":{"line":824,"column":4},"end":{"line":824,"column":25}},"378":{"start":{"line":825,"column":4},"end":{"line":825,"column":65}},"379":{"start":{"line":827,"column":4},"end":{"line":833,"column":5}},"380":{"start":{"line":828,"column":8},"end":{"line":832,"column":9}},"381":{"start":{"line":829,"column":12},"end":{"line":829,"column":58}},"382":{"start":{"line":831,"column":12},"end":{"line":831,"column":56}},"383":{"start":{"line":835,"column":4},"end":{"line":835,"column":56}},"384":{"start":{"line":837,"column":4},"end":{"line":848,"column":6}},"385":{"start":{"line":850,"column":4},"end":{"line":850,"column":53}},"386":{"start":{"line":851,"column":4},"end":{"line":856,"column":5}},"387":{"start":{"line":852,"column":8},"end":{"line":854,"column":12}},"388":{"start":{"line":855,"column":8},"end":{"line":855,"column":15}},"389":{"start":{"line":857,"column":4},"end":{"line":857,"column":28}},"390":{"start":{"line":861,"column":4},"end":{"line":861,"column":58}},"391":{"start":{"line":862,"column":4},"end":{"line":865,"column":7}},"392":{"start":{"line":866,"column":4},"end":{"line":866,"column":66}},"393":{"start":{"line":869,"column":0},"end":{"line":982,"column":2}},"394":{"start":{"line":871,"column":4},"end":{"line":871,"column":20}},"395":{"start":{"line":873,"column":4},"end":{"line":882,"column":6}},"396":{"start":{"line":884,"column":4},"end":{"line":893,"column":6}},"397":{"start":{"line":895,"column":4},"end":{"line":904,"column":6}},"398":{"start":{"line":906,"column":4},"end":{"line":917,"column":6}},"399":{"start":{"line":919,"column":4},"end":{"line":921,"column":5}},"400":{"start":{"line":920,"column":8},"end":{"line":920,"column":52}},"401":{"start":{"line":923,"column":4},"end":{"line":923,"column":61}},"402":{"start":{"line":924,"column":4},"end":{"line":929,"column":5}},"403":{"start":{"line":925,"column":8},"end":{"line":927,"column":12}},"404":{"start":{"line":928,"column":8},"end":{"line":928,"column":15}},"405":{"start":{"line":931,"column":4},"end":{"line":931,"column":25}},"406":{"start":{"line":932,"column":4},"end":{"line":932,"column":24}},"407":{"start":{"line":934,"column":4},"end":{"line":981,"column":5}},"408":{"start":{"line":935,"column":8},"end":{"line":944,"column":10}},"409":{"start":{"line":946,"column":8},"end":{"line":955,"column":10}},"410":{"start":{"line":957,"column":8},"end":{"line":967,"column":10}},"411":{"start":{"line":969,"column":8},"end":{"line":980,"column":10}},"412":{"start":{"line":984,"column":0},"end":{"line":1009,"column":2}},"413":{"start":{"line":986,"column":4},"end":{"line":986,"column":20}},"414":{"start":{"line":988,"column":4},"end":{"line":997,"column":6}},"415":{"start":{"line":999,"column":4},"end":{"line":1008,"column":6}},"416":{"start":{"line":1011,"column":0},"end":{"line":1032,"column":1}},"417":{"start":{"line":1012,"column":4},"end":{"line":1012,"column":47}},"418":{"start":{"line":1014,"column":4},"end":{"line":1017,"column":7}},"419":{"start":{"line":1019,"column":4},"end":{"line":1031,"column":5}},"420":{"start":{"line":1020,"column":8},"end":{"line":1024,"column":9}},"421":{"start":{"line":1021,"column":12},"end":{"line":1021,"column":56}},"422":{"start":{"line":1022,"column":15},"end":{"line":1024,"column":9}},"423":{"start":{"line":1023,"column":12},"end":{"line":1023,"column":65}},"424":{"start":{"line":1025,"column":11},"end":{"line":1031,"column":5}},"425":{"start":{"line":1026,"column":8},"end":{"line":1026,"column":64}},"426":{"start":{"line":1027,"column":11},"end":{"line":1031,"column":5}},"427":{"start":{"line":1028,"column":8},"end":{"line":1028,"column":52}},"428":{"start":{"line":1029,"column":11},"end":{"line":1031,"column":5}},"429":{"start":{"line":1030,"column":8},"end":{"line":1030,"column":61}}},"branchMap":{"1":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":8}},{"start":{"line":81,"column":8},"end":{"line":81,"column":8}}]},"2":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":4},"end":{"line":115,"column":4}},{"start":{"line":115,"column":4},"end":{"line":115,"column":4}}]},"3":{"line":115,"type":"binary-expr","locations":[{"start":{"line":115,"column":8},"end":{"line":115,"column":19}},{"start":{"line":115,"column":23},"end":{"line":115,"column":54}}]},"4":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"5":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":8},"end":{"line":119,"column":17}},{"start":{"line":119,"column":21},"end":{"line":119,"column":51}}]},"6":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]},"7":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":4},"end":{"line":163,"column":4}},{"start":{"line":163,"column":4},"end":{"line":163,"column":4}}]},"8":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"9":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":4},"end":{"line":183,"column":4}},{"start":{"line":183,"column":4},"end":{"line":183,"column":4}}]},"10":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]},"11":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":19},"end":{"line":203,"column":26}},{"start":{"line":203,"column":30},"end":{"line":203,"column":53}}]},"12":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":4},"end":{"line":224,"column":4}},{"start":{"line":224,"column":4},"end":{"line":224,"column":4}}]},"13":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":4},"end":{"line":228,"column":4}},{"start":{"line":228,"column":4},"end":{"line":228,"column":4}}]},"14":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":4},"end":{"line":241,"column":4}},{"start":{"line":241,"column":4},"end":{"line":241,"column":4}}]},"15":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":4},"end":{"line":268,"column":4}},{"start":{"line":268,"column":4},"end":{"line":268,"column":4}}]},"16":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":4},"end":{"line":284,"column":4}},{"start":{"line":284,"column":4},"end":{"line":284,"column":4}}]},"17":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":4},"end":{"line":290,"column":4}},{"start":{"line":290,"column":4},"end":{"line":290,"column":4}}]},"18":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":12}},{"start":{"line":290,"column":16},"end":{"line":290,"column":31}},{"start":{"line":290,"column":35},"end":{"line":290,"column":48}}]},"19":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":4},"end":{"line":301,"column":4}},{"start":{"line":301,"column":4},"end":{"line":301,"column":4}}]},"20":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":4}},{"start":{"line":307,"column":4},"end":{"line":307,"column":4}}]},"21":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":4},"end":{"line":316,"column":4}},{"start":{"line":316,"column":4},"end":{"line":316,"column":4}}]},"22":{"line":323,"type":"if","locations":[{"start":{"line":323,"column":4},"end":{"line":323,"column":4}},{"start":{"line":323,"column":4},"end":{"line":323,"column":4}}]},"23":{"line":342,"type":"if","locations":[{"start":{"line":342,"column":4},"end":{"line":342,"column":4}},{"start":{"line":342,"column":4},"end":{"line":342,"column":4}}]},"24":{"line":342,"type":"binary-expr","locations":[{"start":{"line":342,"column":8},"end":{"line":342,"column":12}},{"start":{"line":342,"column":16},"end":{"line":342,"column":23}}]},"25":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":4},"end":{"line":375,"column":4}},{"start":{"line":375,"column":4},"end":{"line":375,"column":4}}]},"26":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":4},"end":{"line":381,"column":4}},{"start":{"line":381,"column":4},"end":{"line":381,"column":4}}]},"27":{"line":381,"type":"binary-expr","locations":[{"start":{"line":381,"column":8},"end":{"line":381,"column":42}},{"start":{"line":382,"column":8},"end":{"line":382,"column":46}}]},"28":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":4},"end":{"line":396,"column":4}},{"start":{"line":396,"column":4},"end":{"line":396,"column":4}}]},"29":{"line":409,"type":"binary-expr","locations":[{"start":{"line":409,"column":19},"end":{"line":409,"column":30}},{"start":{"line":409,"column":34},"end":{"line":409,"column":44}}]},"30":{"line":410,"type":"if","locations":[{"start":{"line":410,"column":4},"end":{"line":410,"column":4}},{"start":{"line":410,"column":4},"end":{"line":410,"column":4}}]},"31":{"line":429,"type":"if","locations":[{"start":{"line":429,"column":4},"end":{"line":429,"column":4}},{"start":{"line":429,"column":4},"end":{"line":429,"column":4}}]},"32":{"line":429,"type":"binary-expr","locations":[{"start":{"line":429,"column":8},"end":{"line":429,"column":19}},{"start":{"line":429,"column":23},"end":{"line":429,"column":33}}]},"33":{"line":437,"type":"if","locations":[{"start":{"line":437,"column":4},"end":{"line":437,"column":4}},{"start":{"line":437,"column":4},"end":{"line":437,"column":4}}]},"34":{"line":443,"type":"binary-expr","locations":[{"start":{"line":443,"column":19},"end":{"line":443,"column":39}},{"start":{"line":443,"column":43},"end":{"line":443,"column":60}}]},"35":{"line":462,"type":"if","locations":[{"start":{"line":462,"column":4},"end":{"line":462,"column":4}},{"start":{"line":462,"column":4},"end":{"line":462,"column":4}}]},"36":{"line":479,"type":"if","locations":[{"start":{"line":479,"column":4},"end":{"line":479,"column":4}},{"start":{"line":479,"column":4},"end":{"line":479,"column":4}}]},"37":{"line":487,"type":"if","locations":[{"start":{"line":487,"column":4},"end":{"line":487,"column":4}},{"start":{"line":487,"column":4},"end":{"line":487,"column":4}}]},"38":{"line":487,"type":"binary-expr","locations":[{"start":{"line":487,"column":8},"end":{"line":487,"column":47}},{"start":{"line":487,"column":51},"end":{"line":487,"column":73}}]},"39":{"line":494,"type":"if","locations":[{"start":{"line":494,"column":4},"end":{"line":494,"column":4}},{"start":{"line":494,"column":4},"end":{"line":494,"column":4}}]},"40":{"line":502,"type":"if","locations":[{"start":{"line":502,"column":4},"end":{"line":502,"column":4}},{"start":{"line":502,"column":4},"end":{"line":502,"column":4}}]},"41":{"line":504,"type":"if","locations":[{"start":{"line":504,"column":11},"end":{"line":504,"column":11}},{"start":{"line":504,"column":11},"end":{"line":504,"column":11}}]},"42":{"line":664,"type":"if","locations":[{"start":{"line":664,"column":4},"end":{"line":664,"column":4}},{"start":{"line":664,"column":4},"end":{"line":664,"column":4}}]},"43":{"line":668,"type":"if","locations":[{"start":{"line":668,"column":4},"end":{"line":668,"column":4}},{"start":{"line":668,"column":4},"end":{"line":668,"column":4}}]},"44":{"line":693,"type":"if","locations":[{"start":{"line":693,"column":4},"end":{"line":693,"column":4}},{"start":{"line":693,"column":4},"end":{"line":693,"column":4}}]},"45":{"line":721,"type":"binary-expr","locations":[{"start":{"line":721,"column":12},"end":{"line":721,"column":20}},{"start":{"line":721,"column":24},"end":{"line":721,"column":33}}]},"46":{"line":726,"type":"if","locations":[{"start":{"line":726,"column":4},"end":{"line":726,"column":4}},{"start":{"line":726,"column":4},"end":{"line":726,"column":4}}]},"47":{"line":736,"type":"if","locations":[{"start":{"line":736,"column":8},"end":{"line":736,"column":8}},{"start":{"line":736,"column":8},"end":{"line":736,"column":8}}]},"48":{"line":754,"type":"if","locations":[{"start":{"line":754,"column":4},"end":{"line":754,"column":4}},{"start":{"line":754,"column":4},"end":{"line":754,"column":4}}]},"49":{"line":782,"type":"if","locations":[{"start":{"line":782,"column":4},"end":{"line":782,"column":4}},{"start":{"line":782,"column":4},"end":{"line":782,"column":4}}]},"50":{"line":788,"type":"if","locations":[{"start":{"line":788,"column":4},"end":{"line":788,"column":4}},{"start":{"line":788,"column":4},"end":{"line":788,"column":4}}]},"51":{"line":798,"type":"if","locations":[{"start":{"line":798,"column":4},"end":{"line":798,"column":4}},{"start":{"line":798,"column":4},"end":{"line":798,"column":4}}]},"52":{"line":800,"type":"if","locations":[{"start":{"line":800,"column":11},"end":{"line":800,"column":11}},{"start":{"line":800,"column":11},"end":{"line":800,"column":11}}]},"53":{"line":802,"type":"if","locations":[{"start":{"line":802,"column":11},"end":{"line":802,"column":11}},{"start":{"line":802,"column":11},"end":{"line":802,"column":11}}]},"54":{"line":807,"type":"if","locations":[{"start":{"line":807,"column":4},"end":{"line":807,"column":4}},{"start":{"line":807,"column":4},"end":{"line":807,"column":4}}]},"55":{"line":807,"type":"binary-expr","locations":[{"start":{"line":807,"column":8},"end":{"line":807,"column":19}},{"start":{"line":807,"column":23},"end":{"line":807,"column":40}}]},"56":{"line":818,"type":"if","locations":[{"start":{"line":818,"column":4},"end":{"line":818,"column":4}},{"start":{"line":818,"column":4},"end":{"line":818,"column":4}}]},"57":{"line":825,"type":"binary-expr","locations":[{"start":{"line":825,"column":19},"end":{"line":825,"column":51}},{"start":{"line":825,"column":55},"end":{"line":825,"column":64}}]},"58":{"line":827,"type":"if","locations":[{"start":{"line":827,"column":4},"end":{"line":827,"column":4}},{"start":{"line":827,"column":4},"end":{"line":827,"column":4}}]},"59":{"line":828,"type":"if","locations":[{"start":{"line":828,"column":8},"end":{"line":828,"column":8}},{"start":{"line":828,"column":8},"end":{"line":828,"column":8}}]},"60":{"line":851,"type":"if","locations":[{"start":{"line":851,"column":4},"end":{"line":851,"column":4}},{"start":{"line":851,"column":4},"end":{"line":851,"column":4}}]},"61":{"line":866,"type":"binary-expr","locations":[{"start":{"line":866,"column":23},"end":{"line":866,"column":43}},{"start":{"line":866,"column":47},"end":{"line":866,"column":64}}]},"62":{"line":919,"type":"if","locations":[{"start":{"line":919,"column":4},"end":{"line":919,"column":4}},{"start":{"line":919,"column":4},"end":{"line":919,"column":4}}]},"63":{"line":924,"type":"if","locations":[{"start":{"line":924,"column":4},"end":{"line":924,"column":4}},{"start":{"line":924,"column":4},"end":{"line":924,"column":4}}]},"64":{"line":934,"type":"if","locations":[{"start":{"line":934,"column":4},"end":{"line":934,"column":4}},{"start":{"line":934,"column":4},"end":{"line":934,"column":4}}]},"65":{"line":1019,"type":"if","locations":[{"start":{"line":1019,"column":4},"end":{"line":1019,"column":4}},{"start":{"line":1019,"column":4},"end":{"line":1019,"column":4}}]},"66":{"line":1020,"type":"if","locations":[{"start":{"line":1020,"column":8},"end":{"line":1020,"column":8}},{"start":{"line":1020,"column":8},"end":{"line":1020,"column":8}}]},"67":{"line":1022,"type":"if","locations":[{"start":{"line":1022,"column":15},"end":{"line":1022,"column":15}},{"start":{"line":1022,"column":15},"end":{"line":1022,"column":15}}]},"68":{"line":1025,"type":"if","locations":[{"start":{"line":1025,"column":11},"end":{"line":1025,"column":11}},{"start":{"line":1025,"column":11},"end":{"line":1025,"column":11}}]},"69":{"line":1027,"type":"if","locations":[{"start":{"line":1027,"column":11},"end":{"line":1027,"column":11}},{"start":{"line":1027,"column":11},"end":{"line":1027,"column":11}}]},"70":{"line":1029,"type":"if","locations":[{"start":{"line":1029,"column":11},"end":{"line":1029,"column":11}},{"start":{"line":1029,"column":11},"end":{"line":1029,"column":11}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = require('process');","var errors = require('./errors');","var v2 = require('./v2');","var stat = require('./stat-tags.js');","var ObjectPool = require('./lib/object_pool');","var ReadResult = require('bufrw').ReadResult;","var WriteResult = require('bufrw').WriteResult;","","var readRes = new ReadResult();","var writeRes = new WriteResult();","","module.exports = {","    LazyRelayInReq: LazyRelayInReq,","    LazyRelayOutReq: LazyRelayOutReq,","    logError: logError","};","","// TODO: lazy reqs","// - audit #extendLogInfo vs regular reqs","","/*eslint max-statements: [2, 40]*/","function LazyRelayInReq(conn, reqFrame) {","    this.channel = null;","    this.conn = null;","    this.start = null;","    this.remoteAddr = null;","    this.logger = null;","    this.peer = null;","    this.outreq = null;","    this.reqFrame = null;","    this.id = null;","    this.serviceName = null;","    this.callerName = null;","    this.timeout = null;","    this.alive = null;","    this.operations = null;","    this.timeHeapHandle = null;","    this.endpoint = null;","    this.error = null;","    this.tracing = null;","    this.reqContFrames = [];","    this.hasRead = null;","    this.waitForIdentSlot = null;","","    this.boundExtendLogInfo = extendLogInfo;","    this.boundOnIdentified = onIdentified;","","    var self = this;","","    function extendLogInfo(info) {","        return self.extendLogInfo(info);","    }","","    function onIdentified(err) {","        // The ident descriptor will be cleared out of the peer when the ident","        // comes back, so this slot id will be invalid once ident happens.","        self.waitForIdentSlot = -1;","","        if (err) {","            self.onError(err);","        } else {","            self.onIdentified();","        }","    }","}","","LazyRelayInReq.prototype.reset = function reset(conn, reqFrame) {","    this.channel = conn.channel;","    this.conn = conn;","    this.start = conn.timers.now();","    this.remoteAddr = conn.remoteName;","    this.logger = conn.logger;","    this.peer = null;","    this.outreq = null;","    this.reqFrame = reqFrame;","    this.id = this.reqFrame.id;","    this.serviceName = '';","    this.callerName = '';","    this.timeout = 0;","    this.alive = true;","    this.operations = null;","    this.timeHeapHandle = null;","    this.endpoint = '';","    this.error = null;","    this.tracing = null;","    this.reqContFrames.length = 0;","    this.hasRead = false;","    this.circuit = reqFrame.circuit;","    this.waitForIdentSlot = null;","};","","LazyRelayInReq.prototype.clear = function clear() {","    if (this.outreq && !this.outreq._objectPoolIsFreed) {","        this.outreq.free();","    }","","    if (this.peer && this.waitForIdentSlot !== null) {","        this.peer.stopWaitingForIdentified(this.waitForIdentSlot);","    }","","    this.channel = null;","    this.conn = null;","    this.start = null;","    this.remoteAddr = null;","    this.logger = null;","    this.peer = null;","    this.outreq = null;","    this.reqFrame = null;","    this.id = null;","    this.serviceName = null;","    this.callerName = null;","    this.timeout = null;","    this.alive = null;","    this.operations = null;","    this.timeHeapHandle = null;","    this.endpoint = null;","    this.error = null;","    this.tracing = null;","    this.reqContFrames.length = 0;","    this.hasRead = null;","    this.circuit = null;","    this.waitForIdentSlot = null;","};","","ObjectPool.setup({Type: LazyRelayInReq, maxSize: 200});","","LazyRelayInReq.prototype.type = 'tchannel.lazy.incoming-request';","","LazyRelayInReq.prototype.initRead =","function initRead() {","    var self = this;","","    if (self.hasRead) {","        return null;","    }","    self.hasRead = true;","","    // TODO: wrap errors in protocol read errors?","","    var timeout = self.reqFrame.bodyRW.lazy.readTTL(self.reqFrame);","    if (timeout <= 0) {","        return errors.InvalidTTL({","            ttl: timeout,","            isParseError: true","        });","    }","    self.timeout = timeout;","","    var serviceName = self.reqFrame.bodyRW.lazy","        .readServiceStr(self.reqFrame);","    if (!serviceName) {","        return errors.BadCallRequestFrameError({","            reason: 'Could not read service name',","            lastError: self.reqFrame.cache.lastError","        });","    }","    self.serviceName = serviceName;","","    var callerName = self.reqFrame.bodyRW.lazy","        .readCallerNameStr(self.reqFrame);","    if (!callerName) {","        return errors.BadCallRequestFrameError({","            reason: 'Could not read caller name',","            lastError: self.reqFrame.cache.lastError","        });","    }","    self.callerName = callerName;","","    var endpoint = self.reqFrame.bodyRW.lazy","        .readArg1Str(self.reqFrame);","    if (endpoint === null) {","        return errors.BadCallRequestFrameError({","            reason: 'Could not read arg1',","            lastError: self.reqFrame.cache.lastError","        });","    }","    self.endpoint = endpoint;","","    var tracing = self.reqFrame.bodyRW.lazy","        .poolReadTracingValue(readRes, self.reqFrame);","    self.tracing = tracing || v2.Tracing.emptyTracing;","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.recvd',","        'counter',","        1,","        new stat.InboundCallsRecvdTags(","            self.callerName,","            self.serviceName,","            self.endpoint","        )","    );","    self._observeCallReqFrame(self.reqFrame);","","    return null;","};","","LazyRelayInReq.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    if (self.conn) {","        info = self.conn.extendLogInfo(info);","    }","","    if (self.outreq) {","        info = self.outreq._extendLogInfo(info);","    }","","    info = self._extendLogInfo(info);","","    return info;","};","","LazyRelayInReq.prototype._extendLogInfo =","function _extendLogInfo(info) {","    var self = this;","","    if (self.conn) {","        info = self.conn.extendLogInfo(info);","    }","","    info.inRequestType = self.type;","    info.inRequestRemoteAddr = self.remoteAddr;","    info.inRequestId = self.id;","    info.serviceName = self.serviceName;","    info.callerName = self.callerName;","    info.endpoint = self.endpoint;","    info.inRequestErr = self.error;","","    return info;","};","","LazyRelayInReq.prototype.logError =","function relayRequestlogError(err, codeName) {","    var self = this;","","    logError(self.conn.logger, err, codeName, self.boundExtendLogInfo);","};","","LazyRelayInReq.prototype.onTimeout =","function onTimeout(now) {","    var self = this;","","    // ObjectPool weird free() issue; bail early","    if (!self.channel) {","        return;","    }","","    self.onError(errors.RequestTimeoutError({","        id: self.id,","        start: self.start,","        elapsed: now - self.start,","        timeout: self.timeout","    }));","};","","LazyRelayInReq.prototype.createOutRequest =","function createOutRequest() {","    var self = this;","","    if (self.outreq) {","        self.conn.logger.warn('relay request already started', self.extendLogInfo({}));","        return;","    }","","    var conn = self.peer.getInConnection(true);","    if (conn && conn.remoteName && !conn.closing) {","        self.forwardTo(conn);","    } else {","        self.waitForIdentSlot = self.peer.waitForIdentified(self.boundOnIdentified);","    }","};","","LazyRelayInReq.prototype.onIdentified =","function onIdentified(err) {","    var self = this;","","    if (err) {","        self.onError(err);","        return;","    }","","    var conn = self.peer.getInConnection(true);","    if (!conn) {","        self.logger.warn(","            'onIdentified called on non-existing connection',","            self.extendLogInfo(self.peer.extendLogInfo({}))","        );","        self.onError(errors.NoPeerAvailable());","        return;","    }","","    if (!conn.remoteName) {","        // we get the problem","        self.logger.warn(","            'onIdentified called on unidentified connection',","            self.extendLogInfo(self.peer.extendLogInfo({}))","        );","    }","    if (conn.closing) {","        // most likely","        self.logger.warn(","            'onIdentified called on closing connection',","            self.extendLogInfo(self.peer.extendLogInfo({}))","        );","    }","","    self.forwardTo(conn);","};","","LazyRelayInReq.prototype.forwardTo =","function forwardTo(conn) {","    var self = this;","","    self.outreq = LazyRelayOutReq.alloc();","    self.outreq.reset(conn, self);","","    var ttl = self.updateTTL(self.outreq.start);","    if (!ttl || ttl < 0) {","        // error or timeout, observability handled already by #updateTTL","        return;","    }","","    self.outreq.timeout = ttl;","    conn.ops.addOutReq(self.outreq);","    self.peer.invalidateScore('lazyInReq.forwardTo');","    self.handleFrameLazily(self.reqFrame);","    self.reqFrame = null;","","    for (var i = 0; i < self.reqContFrames.length; i++) {","        self.handleFrameLazily(self.reqContFrames[i]);","    }","","    self.reqContFrames.length = 0;","","    var now = self.channel.timers.now();","    self.channel.emitFastStat(","        'tchannel.relay.latency',","        'timing',","        now - self.start,","        new stat.RelayLatencyTags()","    );","};","","LazyRelayInReq.prototype.updateTTL =","function updateTTL(now) {","    var self = this;","","    var elapsed = now - self.start;","    var timeout = self.timeout - elapsed;","","    if (timeout <= 0) {","        self.sendErrorFrame('Timeout', 'relay ttl expired');","        // TODO: log/stat","        return timeout;","    }","","    if (self.channel.maximumRelayTTL !== 0 &&","        timeout > self.channel.maximumRelayTTL","    ) {","        self.logger.warn(","            'Clamping timeout to maximum ttl allowed',","            self.extendLogInfo({","                timeout: timeout,","                maximumTTL: self.channel.maximumRelayTTL","            })","        );","","        timeout = self.channel.maximumRelayTTL;","    }","","    var res = self.reqFrame.bodyRW.lazy.poolWriteTTL(writeRes, timeout, self.reqFrame);","    if (res.err) {","        // TODO: wrap? protocol write error?","        self.onError(res.err);","        return NaN;","    }","","    return timeout;","};","","LazyRelayInReq.prototype.onReadError =","function onReadError(err) {","    var self = this;","","    var hasError = !self.alive && self.error;","    if (hasError) {","        self.logger.warn(","            'dropping read error from dead relay request',","            self.extendLogInfo({","                error: err","            })","        );","    }","","    var conn = self.conn;","    self.onError(err);","","    conn.resetAll(err);","};","","LazyRelayInReq.prototype.onError =","function onError(err) {","    var self = this;","","    if (!self.alive && self.error) {","        self.logger.warn('dropping error from dead relay request', self.extendLogInfo({","            error: err","        }));","        self.free();","        return;","    }","","    if (self.circuit) {","        self.circuit.state.onRequestError(err);","    }","","    self.error = err;","    self.alive = false;","    var codeName = errors.classify(err) || 'UnexpectedError';","    self.sendErrorFrame(codeName, err.message);","    self.logError(err, codeName);","    // TODO: stat in some cases, e.g. declined / peer not available","    self.conn.ops.popInReq(self.id, self.extendLogInfo({","        info: 'lazy relay request error',","        relayDirection: 'in'","    }));","","    self.reqContFrames.length = 0;","","    self.free();","};","","LazyRelayInReq.prototype.sendErrorFrame =","function sendErrorFrame(codeName, message) {","    var self = this;","","    // ObjectPool weird free() issue; bail early","    if (!self.channel) {","        return;","    }","","    var now = self.channel.timers.now();","    self._observeInboundErrorFrame(now, codeName);","","    self.conn.sendLazyErrorFrame(self.id, self.tracing, codeName, message);","};","","LazyRelayInReq.prototype.handleFrameLazily =","function handleFrameLazily(frame) {","    // frame.type will be one of:","    // - v2.Types.CallRequest","    // - v2.Types.CallRequestCont","    var self = this;","","    if (!self.alive) {","        self.logger.warn('dropping frame from dead relay request', self.extendLogInfo({}));","        self.free();","        return;","    }","","    // We have not flushed the CallRequest yet.","    // Probably waiting for init req/res blocking on out request conn.","    if (frame.type === v2.Types.CallRequestCont && self.reqFrame !== null) {","        self.reqContFrames.push(frame);","        return;","    }","","    frame.setId(self.outreq.id);","    self.outreq.conn.writeToSocket(frame.buffer);","    if (frame.bodyRW.lazy.isFrameTerminal(frame)) {","        self.alive = false;","        self.conn.ops.popInReq(self.id, self.extendLogInfo({","            info: 'lazy relay request done',","            relayDirection: 'in'","        }));","    }","","    if (frame.type === v2.Types.CallRequest) {","        self._observeCallReqOutFrame(frame);","    } else if (frame.type === v2.Types.CallRequestCont) {","        self._observeCallReqContFrame(frame);","    // } else { TODO: log","    }","};","","LazyRelayInReq.prototype._observeCallReqOutFrame =","function _observeCallReqOutFrame(frame) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.outbound.request.size',","        'counter',","        frame.size,","        new stat.OutboundRequestSizeTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.sent',","        'counter',","        1,","        new stat.OutboundCallsSentTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","};","","LazyRelayInReq.prototype._observeInboundErrorFrame =","function _observeInboundErrorFrame(now, codeName) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.latency',","        'timing',","        now - self.start,","        new stat.InboundCallsLatencyTags(","            self.callerName,","            self.serviceName,","            self.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.system-errors',","        'counter',","        1,","        new stat.InboundCallsSystemErrorsTags(","            self.callerName,","            self.serviceName,","            self.endpoint,","            codeName","        )","    );","};","","LazyRelayInReq.prototype._observeCallReqFrame =","function _observeCallReqFrame(frame) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.request.size',","        'counter',","        frame.size,","        new stat.InboundRequestSizeTags(","            self.callerName,","            self.serviceName,","            self.endpoint","        )","    );","};","","LazyRelayInReq.prototype._observeCallReqContFrame =","function _observeCallReqContFrame(frame) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.request.size',","        'counter',","        frame.size,","        new stat.InboundRequestSizeTags(","            self.callerName,","            self.serviceName,","            self.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.request.size',","        'counter',","        frame.size,","        new stat.OutboundRequestSizeTags(","            self.serviceName,","            self.callerName,","            self.endpoint","        )","    );","};","","function LazyRelayOutReq(conn, inreq) {","    this.channel = null;","    this.conn = null;","    this.start = null;","    this.remoteAddr = null;","    this.logger = null;","    this.inreq = null;","    this.id = null;","    this.serviceName = null;","    this.callerName = null;","    this.timeout = null;","    this.operations = null;","    this.timeHeapHandle = null;","    this.alive = null;","}","","LazyRelayOutReq.prototype.reset = function reset(conn, inreq) {","    this.channel = conn.channel;","    this.conn = conn;","    this.start = conn.timers.now();","    this.remoteAddr = conn.remoteName;","    this.logger = conn.logger;","    this.inreq = inreq;","    this.id = this.conn.nextFrameId();","    this.serviceName = this.inreq.serviceName;","    this.callerName = this.inreq.callerName;","    this.timeout = 0;","    this.operations = null;","    this.timeHeapHandle = null;","    this.alive = true;","};","","LazyRelayOutReq.prototype.clear = function clear() {","    this.channel = null;","    this.conn = null;","    this.start = null;","    this.remoteAddr = null;","    this.logger = null;","    this.inreq = null;","    this.id = null;","    this.serviceName = null;","    this.callerName = null;","    this.timeout = null;","    this.operations = null;","    this.timeHeapHandle = null;","    this.alive = null;","};","","ObjectPool.setup({Type: LazyRelayOutReq, maxSize: 200});","","LazyRelayOutReq.prototype.type = 'tchannel.lazy.outgoing-request';","","LazyRelayOutReq.prototype.extendLogInfo =","function extendLogInfo(info) {","    var self = this;","","    if (self.conn) {","        info = self.conn.extendLogInfo(info);","    }","","    if (self.inreq) {","        info = self.inreq._extendLogInfo(info);","    }","","    info = self._extendLogInfo(info);","","    return info;","};","","LazyRelayOutReq.prototype._extendLogInfo =","function _extendLogInfo(info) {","    var self = this;","","    info.requestType = self.type;","    info.outRequestAddr = self.remoteAddr;","    info.outRequestId = self.id;","","    return info;","};","","LazyRelayOutReq.prototype.emitError =","function emitError(err) {","    var self = this;","","    // ObjectPool weird free() issue; bail early","    if (!self.channel) {","        return;","    }","","    var now = self.channel.timers.now();","    var elapsed = now - self.start;","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.per-attempt-latency',","        'timing',","        elapsed,","        new stat.OutboundCallsPerAttemptLatencyTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint,","            self.remoteAddr,","            0","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.per-attempt.operational-errors',","        'counter',","        1,","        new stat.OutboundCallsPerAttemptOperationalErrorsTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint,","            err.type || 'unknown',","            0","        )","    );","","    if (self.inreq.circuit) {","        self.inreq.circuit.state.onRequestError(err);","    }","","    // We need to defer the inreq onError work, because we might be","    // *syncronously* processing an error after an attempt to write to a","    // socket. Otherwise, we might end up freeing the in/outreq pair before a","    // handleFrameLazily has completed.","    process.nextTick(deferInReqOnError);","    function deferInReqOnError() {","        if (self.inreq) {","            self.inreq.onError(err);","        }","    }","};","","LazyRelayOutReq.prototype.logError =","function relayRequestlogError(err, codeName) {","    var self = this;","","    self.inreq.logError(err, codeName);","};","","LazyRelayOutReq.prototype.onTimeout =","function onTimeout(now) {","    var self = this;","","    // ObjectPool weird free() issue; bail early","    if (!self.conn) {","        return;","    }","","    self.conn.ops.checkLastTimeoutTime(now);","    self.conn.ops.popOutReq(self.id, self.extendLogInfo({","        info: 'lazy out request timed out',","        relayDirection: 'out'","    }));","    self.inreq.peer.invalidateScore('lazyOutReq.onTimeout');","","    self.emitError(errors.RequestTimeoutError({","        id: self.id,","        start: self.start,","        elapsed: now - self.start,","        timeout: self.timeout","    }));","};","","LazyRelayOutReq.prototype.handleFrameLazily =","function handleFrameLazily(frame) {","    // frame.type will be one of:","    // - v2.Types.CallResponse","    // - v2.Types.CallResponseCont","    // - v2.Types.ErrorResponse","    var self = this;","","    // ObjectPool weird free() issue; bail early","    if (!self.inreq) {","        return;","    }","","    frame.setId(self.inreq.id);","    self.inreq.conn.writeToSocket(frame.buffer);","    if (frame.bodyRW.lazy.isFrameTerminal(frame)) {","        self.alive = false;","        self.conn.ops.popOutReq(self.id, self.extendLogInfo({","            info: 'lazy relay request done',","            relayDirection: 'out'","        }));","        self.inreq.peer.invalidateScore('lazyOutReq.handleFrameLazily');","    }","","    var now = self.channel.timers.now();","    if (frame.type === v2.Types.CallResponse) {","        self._observeCallResFrame(frame, now);","    } else if (frame.type === v2.Types.CallResponseCont) {","        self._observeCallResContFrame(frame, now);","    } else if (frame.type === v2.Types.ErrorResponse) {","        self._observeErrorFrame(frame, now);","    // } else { TODO: log","    }","","    if (!self.alive && !self.inreq.alive) {","        // Implicitly frees this because inreq.clear will free outreq","        self.inreq.free();","    }","};","","LazyRelayOutReq.prototype._observeErrorFrame =","function _observeErrorFrame(errFrame, now) {","    var self = this;","","    var res = errFrame.bodyRW.lazy.readCode(errFrame);","    if (res.err) {","        self.logger.error('failed to read error frame code', self.extendLogInfo({","            error: res.err","        }));","        return;","    }","    var code = res.value;","    var codeName = v2.ErrorResponse.CodeNames[code] || 'unknown';","","    if (self.inreq.circuit) {","        if (errors.isUnhealthy(codeName)) {","            self.inreq.circuit.state.onRequestUnhealthy();","        } else {","            self.inreq.circuit.state.onRequestHealthy();","        }","    }","","    self.inreq._observeInboundErrorFrame(now, codeName);","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.system-errors',","        'counter',","        1,","        new stat.OutboundCallsSystemErrorsTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint,","            codeName,","            0","        )","    );","","    res = errFrame.bodyRW.lazy.readMessage(errFrame);","    if (res.err) {","        self.logger.error('failed to read error frame message', self.extendLogInfo({","            error: res.err","        }));","        return;","    }","    var message = res.value;","","    // TODO: thinner logErrorFrame that doesn't need to instantiate an error","    // just to log an error frame","    var CodeErrorType = v2.ErrorResponse.CodeErrors[code];","    var err = new CodeErrorType({","        originalId: errFrame.id,","        message: message","    });","    self.logError(err, errors.classify(err) || 'UnexpectedError');","};","","LazyRelayOutReq.prototype._observeCallResFrame =","function _observeCallResFrame(frame, now) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.response.size',","        'counter',","        frame.size,","        new stat.InboundResponseSizeTags(","            self.inreq.callerName,","            self.inreq.serviceName,","            self.inreq.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.response.size',","        'counter',","        frame.size,","        new stat.OutboundResponseSizeTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.inbound.calls.latency',","        'timing',","        now - self.inreq.start,","        new stat.InboundCallsLatencyTags(","            self.inreq.callerName,","            self.inreq.serviceName,","            self.inreq.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.calls.per-attempt-latency',","        'timing',","        now - self.start,","        new stat.OutboundCallsPerAttemptLatencyTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint,","            self.remoteAddr,","            0","        )","    );","","    if (self.inreq.circuit) {","        self.inreq.circuit.state.onRequestHealthy();","    }","","    var res = frame.bodyRW.lazy.poolReadCode(readRes, frame);","    if (res.err) {","        self.logger.error('failed to read error frame code', self.extendLogInfo({","            error: res.err","        }));","        return;","    }","","    var code = res.value;","    var ok = code === 0;","","    if (ok) {","        self.channel.emitFastStat(","            'tchannel.inbound.calls.success',","            'counter',","            1,","            new stat.InboundCallsSuccessTags(","                self.inreq.callerName,","                self.inreq.serviceName,","                self.inreq.endpoint","            )","        );","","        self.channel.emitFastStat(","            'tchannel.outbound.calls.success',","            'counter',","            1,","            new stat.OutboundCallsSuccessTags(","                self.inreq.serviceName,","                self.inreq.callerName,","                self.inreq.endpoint","            )","        );","    } else {","        self.channel.emitFastStat(","            'tchannel.inbound.calls.app-errors',","            'counter',","            1,","            new stat.InboundCallsAppErrorsTags(","                self.inreq.callerName,","                self.inreq.serviceName,","                self.inreq.endpoint,","                'unknown'","            )","        );","","        self.channel.emitFastStat(","            'tchannel.outbound.calls.per-attempt.app-errors',","            'counter',","            1,","            new stat.OutboundCallsPerAttemptAppErrorsTags(","                self.inreq.serviceName,","                self.inreq.callerName,","                self.inreq.endpoint,","                'unknown',","                0","            )","        );","    }","};","","LazyRelayOutReq.prototype._observeCallResContFrame =","function _observeCallResContFrame(frame, now) {","    var self = this;","","    self.channel.emitFastStat(","        'tchannel.inbound.response.size',","        'counter',","        frame.size,","        new stat.InboundResponseSizeTags(","            self.inreq.callerName,","            self.inreq.serviceName,","            self.inreq.endpoint","        )","    );","","    self.channel.emitFastStat(","        'tchannel.outbound.response.size',","        'counter',","        frame.size,","        new stat.OutboundResponseSizeTags(","            self.inreq.serviceName,","            self.inreq.callerName,","            self.inreq.endpoint","        )","    );","};","","function logError(logger, err, codeName, extendLogInfo) {","    var level = errors.logLevel(err, codeName);","","    var info = extendLogInfo({","        error: err,","        isErrorFrame: err.isErrorFrame","    });","","    if (err.isErrorFrame) {","        if (level === 'warn') {","            logger.warn('forwarding error frame', info);","        } else if (level === 'info') {","            logger.info('forwarding expected error frame', info);","        }","    } else if (level === 'error') {","        logger.error('unexpected error while forwarding', info);","    } else if (level === 'warn') {","        logger.warn('error while forwarding', info);","    } else if (level === 'info') {","        logger.info('expected error while forwarding', info);","    }","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"32":1,"34":1,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"67":0,"68":0,"70":0,"72":1,"73":0,"76":1,"79":0,"81":0,"82":0,"84":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"114":1,"115":0,"116":0,"119":0,"120":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"147":1,"149":1,"151":1,"153":0,"155":0,"156":0,"158":0,"162":0,"163":0,"164":0,"169":0,"171":0,"173":0,"174":0,"179":0,"181":0,"183":0,"184":0,"189":0,"191":0,"193":0,"194":0,"199":0,"201":0,"203":0,"205":0,"215":0,"217":0,"220":1,"222":0,"224":0,"225":0,"228":0,"229":0,"232":0,"234":0,"237":1,"239":0,"241":0,"242":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"253":0,"256":1,"258":0,"260":0,"263":1,"265":0,"268":0,"269":0,"272":0,"280":1,"282":0,"284":0,"285":0,"286":0,"289":0,"290":0,"291":0,"293":0,"297":1,"299":0,"301":0,"302":0,"303":0,"306":0,"307":0,"308":0,"312":0,"313":0,"316":0,"318":0,"323":0,"325":0,"331":0,"334":1,"336":0,"338":0,"339":0,"341":0,"342":0,"344":0,"347":0,"348":0,"349":0,"350":0,"351":0,"353":0,"354":0,"357":0,"359":0,"360":0,"368":1,"370":0,"372":0,"373":0,"375":0,"376":0,"378":0,"381":0,"384":0,"392":0,"395":0,"396":0,"398":0,"399":0,"402":0,"405":1,"407":0,"409":0,"410":0,"411":0,"419":0,"420":0,"422":0,"425":1,"427":0,"429":0,"430":0,"433":0,"434":0,"437":0,"438":0,"441":0,"442":0,"443":0,"444":0,"445":0,"447":0,"452":0,"454":0,"457":1,"459":0,"462":0,"463":0,"466":0,"467":0,"469":0,"472":1,"477":0,"479":0,"480":0,"481":0,"482":0,"487":0,"488":0,"489":0,"492":0,"493":0,"494":0,"495":0,"496":0,"502":0,"503":0,"504":0,"505":0,"510":1,"512":0,"514":0,"525":0,"537":1,"539":0,"541":0,"552":0,"565":1,"567":0,"569":0,"581":1,"583":0,"585":0,"596":0,"608":1,"609":0,"610":0,"611":0,"612":0,"613":0,"614":0,"615":0,"616":0,"617":0,"618":0,"619":0,"620":0,"621":0,"624":1,"625":0,"626":0,"627":0,"628":0,"629":0,"630":0,"631":0,"632":0,"633":0,"634":0,"635":0,"636":0,"637":0,"640":1,"641":0,"642":0,"643":0,"644":0,"645":0,"646":0,"647":0,"648":0,"649":0,"650":0,"651":0,"652":0,"653":0,"656":1,"658":1,"660":1,"662":0,"664":0,"665":0,"668":0,"669":0,"672":0,"674":0,"677":1,"679":0,"681":0,"682":0,"683":0,"685":0,"688":1,"690":0,"693":0,"694":0,"697":0,"698":0,"700":0,"713":0,"726":0,"727":0,"734":0,"735":1,"736":0,"737":0,"742":1,"744":0,"746":0,"749":1,"751":0,"754":0,"755":0,"758":0,"759":0,"763":0,"765":0,"773":1,"779":0,"782":0,"783":0,"786":0,"787":0,"788":0,"789":0,"790":0,"794":0,"797":0,"798":0,"799":0,"800":0,"801":0,"802":0,"803":0,"807":0,"809":0,"813":1,"815":0,"817":0,"818":0,"819":0,"822":0,"824":0,"825":0,"827":0,"828":0,"829":0,"831":0,"835":0,"837":0,"850":0,"851":0,"852":0,"855":0,"857":0,"861":0,"862":0,"866":0,"869":1,"871":0,"873":0,"884":0,"895":0,"906":0,"919":0,"920":0,"923":0,"924":0,"925":0,"928":0,"931":0,"932":0,"934":0,"935":0,"946":0,"957":0,"969":0,"984":1,"986":0,"988":0,"999":0,"1011":1,"1012":0,"1014":0,"1019":0,"1020":0,"1021":0,"1022":0,"1023":0,"1025":0,"1026":0,"1027":0,"1028":0,"1029":0,"1030":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/monitor.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/monitor.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":1,"57":1,"58":0,"59":0,"60":0,"61":1,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":1,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"ChanConnMonitor","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":43}}},"2":{"name":"summary","line":54,"loc":{"start":{"line":54,"column":36},"end":{"line":54,"column":55}}},"3":{"name":"run","line":57,"loc":{"start":{"line":57,"column":32},"end":{"line":57,"column":47}}},"4":{"name":"tickMe","line":67,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":22}}},"5":{"name":"tick","line":72,"loc":{"start":{"line":72,"column":33},"end":{"line":72,"column":49}}},"6":{"name":"eashServerConn","line":100,"loc":{"start":{"line":100,"column":4},"end":{"line":100,"column":34}}},"7":{"name":"eachPeer","line":112,"loc":{"start":{"line":112,"column":4},"end":{"line":112,"column":31}}},"8":{"name":"eachConn","line":114,"loc":{"start":{"line":114,"column":33},"end":{"line":114,"column":60}}},"9":{"name":"tockMe","line":126,"loc":{"start":{"line":126,"column":4},"end":{"line":126,"column":22}}},"10":{"name":"OpKindMonitor","line":133,"loc":{"start":{"line":133,"column":0},"end":{"line":133,"column":41}}},"11":{"name":"eachConn","line":141,"loc":{"start":{"line":141,"column":35},"end":{"line":141,"column":60}}},"12":{"name":"summary","line":164,"loc":{"start":{"line":164,"column":34},"end":{"line":164,"column":53}}},"13":{"name":"reduceByBucket","line":194,"loc":{"start":{"line":194,"column":0},"end":{"line":194,"column":30}}},"14":{"name":"reduceByTTL","line":224,"loc":{"start":{"line":224,"column":0},"end":{"line":224,"column":27}}},"15":{"name":"sumCounts","line":254,"loc":{"start":{"line":254,"column":0},"end":{"line":254,"column":25}}},"16":{"name":"eachB","line":255,"loc":{"start":{"line":255,"column":27},"end":{"line":255,"column":47}}},"17":{"name":"countConstructors","line":265,"loc":{"start":{"line":265,"column":0},"end":{"line":265,"column":32}}},"18":{"name":"each","line":267,"loc":{"start":{"line":267,"column":29},"end":{"line":267,"column":49}}},"19":{"name":"OpCount","line":278,"loc":{"start":{"line":278,"column":0},"end":{"line":278,"column":19}}},"20":{"name":"push","line":285,"loc":{"start":{"line":285,"column":25},"end":{"line":285,"column":46}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":36}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":40}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":49}},"5":{"start":{"line":29,"column":0},"end":{"line":48,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":30,"column":27}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":37}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":37}},"10":{"start":{"line":34,"column":4},"end":{"line":34,"column":31}},"11":{"start":{"line":35,"column":4},"end":{"line":35,"column":33}},"12":{"start":{"line":36,"column":4},"end":{"line":36,"column":22}},"13":{"start":{"line":37,"column":4},"end":{"line":37,"column":25}},"14":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"15":{"start":{"line":40,"column":8},"end":{"line":40,"column":41}},"16":{"start":{"line":42,"column":4},"end":{"line":44,"column":5}},"17":{"start":{"line":43,"column":8},"end":{"line":43,"column":39}},"18":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"19":{"start":{"line":46,"column":8},"end":{"line":46,"column":31}},"20":{"start":{"line":51,"column":0},"end":{"line":51,"column":44}},"21":{"start":{"line":54,"column":0},"end":{"line":55,"column":2}},"22":{"start":{"line":57,"column":0},"end":{"line":70,"column":2}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":20}},"24":{"start":{"line":60,"column":4},"end":{"line":62,"column":5}},"25":{"start":{"line":61,"column":8},"end":{"line":61,"column":15}},"26":{"start":{"line":64,"column":4},"end":{"line":64,"column":24}},"27":{"start":{"line":65,"column":4},"end":{"line":65,"column":63}},"28":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"29":{"start":{"line":68,"column":8},"end":{"line":68,"column":20}},"30":{"start":{"line":72,"column":0},"end":{"line":129,"column":2}},"31":{"start":{"line":73,"column":4},"end":{"line":73,"column":20}},"32":{"start":{"line":75,"column":4},"end":{"line":75,"column":41}},"33":{"start":{"line":76,"column":4},"end":{"line":76,"column":22}},"34":{"start":{"line":78,"column":4},"end":{"line":80,"column":5}},"35":{"start":{"line":79,"column":8},"end":{"line":79,"column":15}},"36":{"start":{"line":82,"column":4},"end":{"line":85,"column":5}},"37":{"start":{"line":83,"column":8},"end":{"line":83,"column":29}},"38":{"start":{"line":84,"column":8},"end":{"line":84,"column":15}},"39":{"start":{"line":87,"column":4},"end":{"line":92,"column":5}},"40":{"start":{"line":88,"column":8},"end":{"line":88,"column":54}},"41":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"42":{"start":{"line":90,"column":12},"end":{"line":90,"column":80}},"43":{"start":{"line":94,"column":4},"end":{"line":96,"column":7}},"44":{"start":{"line":98,"column":4},"end":{"line":98,"column":63}},"45":{"start":{"line":100,"column":4},"end":{"line":110,"column":5}},"46":{"start":{"line":101,"column":8},"end":{"line":101,"column":56}},"47":{"start":{"line":102,"column":8},"end":{"line":102,"column":54}},"48":{"start":{"line":103,"column":8},"end":{"line":109,"column":11}},"49":{"start":{"line":112,"column":4},"end":{"line":124,"column":5}},"50":{"start":{"line":113,"column":8},"end":{"line":113,"column":45}},"51":{"start":{"line":114,"column":8},"end":{"line":123,"column":11}},"52":{"start":{"line":115,"column":12},"end":{"line":115,"column":49}},"53":{"start":{"line":116,"column":12},"end":{"line":122,"column":15}},"54":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"55":{"start":{"line":127,"column":8},"end":{"line":127,"column":20}},"56":{"start":{"line":131,"column":0},"end":{"line":131,"column":45}},"57":{"start":{"line":133,"column":0},"end":{"line":137,"column":1}},"58":{"start":{"line":134,"column":4},"end":{"line":134,"column":49}},"59":{"start":{"line":135,"column":4},"end":{"line":135,"column":23}},"60":{"start":{"line":136,"column":4},"end":{"line":136,"column":24}},"61":{"start":{"line":139,"column":0},"end":{"line":139,"column":41}},"62":{"start":{"line":141,"column":0},"end":{"line":162,"column":2}},"63":{"start":{"line":142,"column":4},"end":{"line":142,"column":20}},"64":{"start":{"line":144,"column":4},"end":{"line":144,"column":26}},"65":{"start":{"line":145,"column":4},"end":{"line":145,"column":29}},"66":{"start":{"line":146,"column":4},"end":{"line":148,"column":5}},"67":{"start":{"line":147,"column":8},"end":{"line":147,"column":35}},"68":{"start":{"line":149,"column":4},"end":{"line":149,"column":63}},"69":{"start":{"line":151,"column":4},"end":{"line":151,"column":51}},"70":{"start":{"line":152,"column":4},"end":{"line":155,"column":5}},"71":{"start":{"line":153,"column":8},"end":{"line":153,"column":62}},"72":{"start":{"line":154,"column":8},"end":{"line":154,"column":36}},"73":{"start":{"line":157,"column":4},"end":{"line":157,"column":53}},"74":{"start":{"line":158,"column":4},"end":{"line":161,"column":5}},"75":{"start":{"line":159,"column":8},"end":{"line":159,"column":64}},"76":{"start":{"line":160,"column":8},"end":{"line":160,"column":38}},"77":{"start":{"line":164,"column":0},"end":{"line":192,"column":2}},"78":{"start":{"line":165,"column":4},"end":{"line":165,"column":20}},"79":{"start":{"line":167,"column":4},"end":{"line":172,"column":5}},"80":{"start":{"line":168,"column":8},"end":{"line":170,"column":57}},"81":{"start":{"line":171,"column":8},"end":{"line":171,"column":33}},"82":{"start":{"line":174,"column":4},"end":{"line":178,"column":5}},"83":{"start":{"line":175,"column":8},"end":{"line":177,"column":59}},"84":{"start":{"line":180,"column":4},"end":{"line":184,"column":5}},"85":{"start":{"line":181,"column":8},"end":{"line":183,"column":41}},"86":{"start":{"line":186,"column":4},"end":{"line":191,"column":5}},"87":{"start":{"line":187,"column":8},"end":{"line":189,"column":58}},"88":{"start":{"line":190,"column":8},"end":{"line":190,"column":34}},"89":{"start":{"line":194,"column":0},"end":{"line":222,"column":1}},"90":{"start":{"line":195,"column":4},"end":{"line":195,"column":18}},"91":{"start":{"line":197,"column":4},"end":{"line":219,"column":5}},"92":{"start":{"line":198,"column":8},"end":{"line":198,"column":30}},"93":{"start":{"line":200,"column":8},"end":{"line":200,"column":40}},"94":{"start":{"line":201,"column":8},"end":{"line":218,"column":9}},"95":{"start":{"line":202,"column":12},"end":{"line":202,"column":31}},"96":{"start":{"line":203,"column":12},"end":{"line":203,"column":43}},"97":{"start":{"line":205,"column":12},"end":{"line":207,"column":13}},"98":{"start":{"line":206,"column":16},"end":{"line":206,"column":32}},"99":{"start":{"line":209,"column":12},"end":{"line":209,"column":58}},"100":{"start":{"line":210,"column":12},"end":{"line":217,"column":13}},"101":{"start":{"line":211,"column":16},"end":{"line":211,"column":46}},"102":{"start":{"line":212,"column":16},"end":{"line":214,"column":17}},"103":{"start":{"line":213,"column":20},"end":{"line":213,"column":46}},"104":{"start":{"line":216,"column":16},"end":{"line":216,"column":75}},"105":{"start":{"line":221,"column":4},"end":{"line":221,"column":16}},"106":{"start":{"line":224,"column":0},"end":{"line":252,"column":1}},"107":{"start":{"line":225,"column":4},"end":{"line":225,"column":18}},"108":{"start":{"line":227,"column":4},"end":{"line":249,"column":5}},"109":{"start":{"line":228,"column":8},"end":{"line":228,"column":30}},"110":{"start":{"line":230,"column":8},"end":{"line":230,"column":40}},"111":{"start":{"line":231,"column":8},"end":{"line":248,"column":9}},"112":{"start":{"line":232,"column":12},"end":{"line":232,"column":31}},"113":{"start":{"line":233,"column":12},"end":{"line":233,"column":43}},"114":{"start":{"line":235,"column":12},"end":{"line":237,"column":13}},"115":{"start":{"line":236,"column":16},"end":{"line":236,"column":32}},"116":{"start":{"line":239,"column":12},"end":{"line":239,"column":60}},"117":{"start":{"line":240,"column":12},"end":{"line":247,"column":13}},"118":{"start":{"line":241,"column":16},"end":{"line":241,"column":48}},"119":{"start":{"line":242,"column":16},"end":{"line":244,"column":17}},"120":{"start":{"line":243,"column":20},"end":{"line":243,"column":47}},"121":{"start":{"line":246,"column":16},"end":{"line":246,"column":71}},"122":{"start":{"line":251,"column":4},"end":{"line":251,"column":16}},"123":{"start":{"line":254,"column":0},"end":{"line":263,"column":1}},"124":{"start":{"line":255,"column":4},"end":{"line":261,"column":7}},"125":{"start":{"line":256,"column":8},"end":{"line":258,"column":9}},"126":{"start":{"line":257,"column":12},"end":{"line":257,"column":23}},"127":{"start":{"line":260,"column":8},"end":{"line":260,"column":31}},"128":{"start":{"line":262,"column":4},"end":{"line":262,"column":13}},"129":{"start":{"line":265,"column":0},"end":{"line":276,"column":1}},"130":{"start":{"line":266,"column":4},"end":{"line":266,"column":20}},"131":{"start":{"line":267,"column":4},"end":{"line":274,"column":7}},"132":{"start":{"line":268,"column":8},"end":{"line":268,"column":46}},"133":{"start":{"line":269,"column":8},"end":{"line":271,"column":9}},"134":{"start":{"line":270,"column":12},"end":{"line":270,"column":41}},"135":{"start":{"line":273,"column":8},"end":{"line":273,"column":37}},"136":{"start":{"line":275,"column":4},"end":{"line":275,"column":18}},"137":{"start":{"line":278,"column":0},"end":{"line":283,"column":1}},"138":{"start":{"line":279,"column":4},"end":{"line":279,"column":19}},"139":{"start":{"line":280,"column":4},"end":{"line":280,"column":21}},"140":{"start":{"line":281,"column":4},"end":{"line":281,"column":22}},"141":{"start":{"line":282,"column":4},"end":{"line":282,"column":23}},"142":{"start":{"line":285,"column":0},"end":{"line":308,"column":2}},"143":{"start":{"line":286,"column":4},"end":{"line":286,"column":17}},"144":{"start":{"line":287,"column":4},"end":{"line":287,"column":28}},"145":{"start":{"line":289,"column":4},"end":{"line":297,"column":5}},"146":{"start":{"line":290,"column":8},"end":{"line":290,"column":52}},"147":{"start":{"line":292,"column":8},"end":{"line":292,"column":63}},"148":{"start":{"line":293,"column":8},"end":{"line":295,"column":9}},"149":{"start":{"line":294,"column":12},"end":{"line":294,"column":43}},"150":{"start":{"line":296,"column":8},"end":{"line":296,"column":46}},"151":{"start":{"line":299,"column":4},"end":{"line":307,"column":5}},"152":{"start":{"line":300,"column":8},"end":{"line":300,"column":32}},"153":{"start":{"line":302,"column":8},"end":{"line":304,"column":9}},"154":{"start":{"line":303,"column":12},"end":{"line":303,"column":35}},"155":{"start":{"line":306,"column":8},"end":{"line":306,"column":29}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"2":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]},"3":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"4":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"5":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"6":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"7":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"8":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"9":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"10":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":4},"end":{"line":152,"column":4}},{"start":{"line":152,"column":4},"end":{"line":152,"column":4}}]},"11":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":4},"end":{"line":158,"column":4}},{"start":{"line":158,"column":4},"end":{"line":158,"column":4}}]},"12":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"13":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":4},"end":{"line":174,"column":4}},{"start":{"line":174,"column":4},"end":{"line":174,"column":4}}]},"14":{"line":174,"type":"binary-expr","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":29}},{"start":{"line":174,"column":33},"end":{"line":174,"column":46}}]},"15":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":4}},{"start":{"line":180,"column":4},"end":{"line":180,"column":4}}]},"16":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":29}},{"start":{"line":180,"column":33},"end":{"line":180,"column":43}}]},"17":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":4},"end":{"line":186,"column":4}},{"start":{"line":186,"column":4},"end":{"line":186,"column":4}}]},"18":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":12},"end":{"line":205,"column":12}},{"start":{"line":205,"column":12},"end":{"line":205,"column":12}}]},"19":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":16},"end":{"line":212,"column":16}},{"start":{"line":212,"column":16},"end":{"line":212,"column":16}}]},"20":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":12},"end":{"line":235,"column":12}},{"start":{"line":235,"column":12},"end":{"line":235,"column":12}}]},"21":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":16},"end":{"line":242,"column":16}},{"start":{"line":242,"column":16},"end":{"line":242,"column":16}}]},"22":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":8},"end":{"line":256,"column":8}},{"start":{"line":256,"column":8},"end":{"line":256,"column":8}}]},"23":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"24":{"line":289,"type":"if","locations":[{"start":{"line":289,"column":4},"end":{"line":289,"column":4}},{"start":{"line":289,"column":4},"end":{"line":289,"column":4}}]},"25":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":8},"end":{"line":293,"column":8}},{"start":{"line":293,"column":8},"end":{"line":293,"column":8}}]},"26":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":4},"end":{"line":299,"column":4}},{"start":{"line":299,"column":4},"end":{"line":299,"column":4}}]},"27":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":8},"end":{"line":302,"column":8}},{"start":{"line":302,"column":8},"end":{"line":302,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var format = require('util').format;","var inherits = require('util').inherits;","var console = require('console');","","module.exports.ChanConnMonitor = ChanConnMonitor;","","function ChanConnMonitor(channel, options) {","    this.options = options;","    this.channel = channel;","    this.interval = options.interval;","    this.byBucket = options.byBucket;","    this.byTTL = options.byTTL;","    this.timers = channel.timers;","    this.timer = null;","    this.running = false;","","    if (options.eachConn) {","        this.eachConn = options.eachConn;","    }","    if (options.summary) {","        this.summary = options.summary;","    }","    if (options.log) {","        this.log = options.log;","    }","}","","/*eslint-disable no-console*/","ChanConnMonitor.prototype.log = console.log;","/*eslint-enable no-console*/","","ChanConnMonitor.prototype.summary = function summary() {","};","","ChanConnMonitor.prototype.run = function run() {","    var self = this;","","    if (self.channel.destroyed) {","        return;","    }","","    self.running = true;","    self.timer = self.timers.setTimeout(tickMe, self.interval);","","    function tickMe() {","        self.tick();","    }","};","","ChanConnMonitor.prototype.tick = function tick() {","    var self = this;","","    self.timers.clearTimeout(self.timer);","    self.timer = null;","","    if (!self.running) {","        return;","    }","","    if (self.channel.destroyed) {","        self.running = false;","        return;","    }","","    if (self.eachConn) {","        self.channel.peers.values().forEach(eachPeer);","        if (self.channel.serverConnections) {","            Object.keys(self.channel.serverConnections).forEach(eashServerConn);","        }","    }","","    self.summary({","        channel: self.channel","    });","","    self.timer = self.timers.setTimeout(tockMe, self.interval);","","    function eashServerConn(addr) {","        var conn = self.channel.serverConnections[addr];","        var connDesc = format('serverConn[%s]', addr);","        self.eachConn({","            channel: self.channel,","            peer: null,","            peerDesc: '',","            conn: conn,","            connDesc: connDesc","        });","    }","","    function eachPeer(peer, j) {","        var peerDesc = format('peer[%s]', j);","        peer.connections.forEach(function eachConn(conn, k) {","            var connDesc = format('conn[%s]', k);","            self.eachConn({","                channel: self.channel,","                peer: peer,","                peerDesc: peerDesc,","                conn: conn,","                connDesc: connDesc","            });","        });","    }","","    function tockMe() {","        self.tick();","    }","};","","module.exports.OpKindMonitor = OpKindMonitor;","","function OpKindMonitor(channel, options) {","    ChanConnMonitor.call(this, channel, options);","    this.inCounts = [];","    this.outCounts = [];","}","","inherits(OpKindMonitor, ChanConnMonitor);","","OpKindMonitor.prototype.eachConn = function eachConn(stuff) {","    var self = this;","","    var conn = stuff.conn;","    var desc = conn.connDesc;","    if (conn.peerDesc) {","        desc = conn.peerDesc + ' ';","    }","    desc = format('relay %s %s', stuff.channel.hostPort, desc);","","    var inKeys = Object.keys(conn.ops.requests.in);","    if (inKeys.length) {","        var inCount = countConstructors(conn.ops.requests.in);","        self.inCounts.push(inCount);","    }","","    var outKeys = Object.keys(conn.ops.requests.out);","    if (outKeys.length) {","        var outCount = countConstructors(conn.ops.requests.out);","        self.outCounts.push(outCount);","    }","};","","OpKindMonitor.prototype.summary = function summary() {","    var self = this;","","    if (self.inCounts.length) {","        self.log('= %s IN COUNTS: %j',","                    self.options.desc,","                    self.inCounts.reduce(sumCounts, {}));","        self.inCounts.length = 0;","    }","","    if (self.outCounts.length && self.byBucket) {","        self.log('= %s OUT COUNTS BY BUCKET: %j',","            self.options.desc,","            reduceByBucket(self.outCounts, self.byBucket));","    }","","    if (self.outCounts.length && self.byTTL) {","        self.log('= %s OUT COUNTS BY TTL: %j',","            self.options.desc,","            reduceByTTL(self.outCounts));","    }","","    if (self.outCounts.length) {","        self.log('= %s OUT COUNTS: %j',","                    self.options.desc,","                    self.outCounts.reduce(sumCounts, {}));","        self.outCounts.length = 0;","    }","};","","function reduceByBucket(list) {","    var info = {};","","    for (var i = 0; i < list.length; i++) {","        var constrs = list[i];","","        var keys = Object.keys(constrs);","        for (var j = 0; j < keys.length; j++) {","            var name = keys[j];","            var opCount = constrs[keys[j]];","","            if (!info[name]) {","                info[name] = {};","            }","","            var bucketKeys = Object.keys(opCount.buckets);","            for (var k = 0; k < bucketKeys.length; k++) {","                var bucketKey = bucketKeys[k];","                if (!info[name][bucketKey]) {","                    info[name][bucketKey] = 0;","                }","","                info[name][bucketKey] += opCount.buckets[bucketKey].length;","            }","        }","    }","","    return info;","}","","function reduceByTTL(list) {","    var info = {};","","    for (var i = 0; i < list.length; i++) {","        var constrs = list[i];","","        var keys = Object.keys(constrs);","        for (var j = 0; j < keys.length; j++) {","            var name = keys[j];","            var opCount = constrs[keys[j]];","","            if (!info[name]) {","                info[name] = {};","            }","","            var timeoutKeys = Object.keys(opCount.timeouts);","            for (var k = 0; k < timeoutKeys.length; k++) {","                var timeoutKey = timeoutKeys[k];","                if (!info[name][timeoutKey]) {","                    info[name][timeoutKey] = 0;","                }","","                info[name][timeoutKey] += opCount.timeouts[timeoutKey];","            }","        }","    }","","    return info;","}","","function sumCounts(a, b) {","    Object.keys(b).forEach(function eachB(key) {","        if (!a[key]) {","            a[key] = 0;","        }","","        a[key] += b[key].count;","    });","    return a;","}","","function countConstructors(obj) {","    var counts = {};","    Object.keys(obj).forEach(function each(prop) {","        var name = obj[prop].constructor.name;","        if (!counts[name]) {","            counts[name] = new OpCount();","        }","","        counts[name].push(obj[prop]);","    });","    return counts;","}","","function OpCount() {","    this.count = 0;","    this.values = [];","    this.buckets = {};","    this.timeouts = {};","}","","OpCount.prototype.push = function push(value) {","    this.count++;","    this.values.push(value);","","    if (value.type === 'tchannel.operation.tombstone') {","        var expireTime = value.time + value.timeout;","","        var bucketIndex = Math.floor(expireTime / 5000) * 5000;","        if (!this.buckets[bucketIndex]) {","            this.buckets[bucketIndex] = [];","        }","        this.buckets[bucketIndex].push(value);","    }","","    if (value.type === 'tchannel.operation.tombstone') {","        var ttl = value.timeout;","","        if (!this.timeouts[ttl]) {","            this.timeouts[ttl] = 0;","        }","","        this.timeouts[ttl]++;","    }","};",""],"l":{"23":1,"24":1,"25":1,"27":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"40":0,"42":0,"43":0,"45":0,"46":0,"51":1,"54":1,"57":1,"58":0,"60":0,"61":0,"64":0,"65":0,"67":1,"68":0,"72":1,"73":0,"75":0,"76":0,"78":0,"79":0,"82":0,"83":0,"84":0,"87":0,"88":0,"89":0,"90":0,"94":0,"98":0,"100":1,"101":0,"102":0,"103":0,"112":1,"113":0,"114":0,"115":0,"116":0,"126":1,"127":0,"131":1,"133":1,"134":0,"135":0,"136":0,"139":1,"141":1,"142":0,"144":0,"145":0,"146":0,"147":0,"149":0,"151":0,"152":0,"153":0,"154":0,"157":0,"158":0,"159":0,"160":0,"164":1,"165":0,"167":0,"168":0,"171":0,"174":0,"175":0,"180":0,"181":0,"186":0,"187":0,"190":0,"194":1,"195":0,"197":0,"198":0,"200":0,"201":0,"202":0,"203":0,"205":0,"206":0,"209":0,"210":0,"211":0,"212":0,"213":0,"216":0,"221":0,"224":1,"225":0,"227":0,"228":0,"230":0,"231":0,"232":0,"233":0,"235":0,"236":0,"239":0,"240":0,"241":0,"242":0,"243":0,"246":0,"251":0,"254":1,"255":0,"256":0,"257":0,"260":0,"262":0,"265":1,"266":0,"267":0,"268":0,"269":0,"270":0,"273":0,"275":0,"278":1,"279":0,"280":0,"281":0,"282":0,"285":1,"286":0,"287":0,"289":0,"290":0,"292":0,"293":0,"294":0,"296":0,"299":0,"300":0,"302":0,"303":0,"306":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/relay_handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/relay_handler.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":1,"60":0,"61":1,"62":0,"63":1,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":1,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":1,"127":0,"128":0,"129":0,"130":1,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"RelayHandler","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":41}}},"2":{"name":"handleLazily","line":42,"loc":{"start":{"line":42,"column":38},"end":{"line":42,"column":76}}},"3":{"name":"handleRequest","line":72,"loc":{"start":{"line":72,"column":39},"end":{"line":72,"column":77}}},"4":{"name":"RelayRequest","line":91,"loc":{"start":{"line":91,"column":0},"end":{"line":91,"column":54}}},"5":{"name":"onTimeout","line":109,"loc":{"start":{"line":109,"column":4},"end":{"line":109,"column":28}}},"6":{"name":"onError","line":113,"loc":{"start":{"line":113,"column":4},"end":{"line":113,"column":26}}},"7":{"name":"extendLogInfo","line":117,"loc":{"start":{"line":117,"column":4},"end":{"line":117,"column":33}}},"8":{"name":"onIdentified","line":121,"loc":{"start":{"line":121,"column":4},"end":{"line":121,"column":31}}},"9":{"name":"createOutRequest","line":130,"loc":{"start":{"line":130,"column":42},"end":{"line":130,"column":70}}},"10":{"name":"onIdentified","line":141,"loc":{"start":{"line":141,"column":38},"end":{"line":141,"column":62}}},"11":{"name":"onResponse","line":204,"loc":{"start":{"line":204,"column":4},"end":{"line":204,"column":29}}},"12":{"name":"createOutResponse","line":209,"loc":{"start":{"line":209,"column":43},"end":{"line":209,"column":79}}},"13":{"name":"onResponse","line":241,"loc":{"start":{"line":241,"column":36},"end":{"line":241,"column":61}}},"14":{"name":"onError","line":270,"loc":{"start":{"line":270,"column":33},"end":{"line":270,"column":55}}},"15":{"name":"onInRequestTimeout","line":291,"loc":{"start":{"line":291,"column":0},"end":{"line":291,"column":33}}},"16":{"name":"extendLogInfo","line":298,"loc":{"start":{"line":298,"column":39},"end":{"line":298,"column":68}}},"17":{"name":"relayRequestLogError","line":310,"loc":{"start":{"line":310,"column":34},"end":{"line":310,"column":79}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":37}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":63}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":51}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":41}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":30}},"7":{"start":{"line":33,"column":0},"end":{"line":38,"column":1}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":27}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":37}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":38}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":60}},"12":{"start":{"line":40,"column":0},"end":{"line":40,"column":55}},"13":{"start":{"line":42,"column":0},"end":{"line":70,"column":2}},"14":{"start":{"line":43,"column":4},"end":{"line":43,"column":20}},"15":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"16":{"start":{"line":46,"column":8},"end":{"line":46,"column":21}},"17":{"start":{"line":49,"column":4},"end":{"line":49,"column":39}},"18":{"start":{"line":50,"column":4},"end":{"line":50,"column":32}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":31}},"20":{"start":{"line":53,"column":4},"end":{"line":56,"column":5}},"21":{"start":{"line":54,"column":8},"end":{"line":54,"column":31}},"22":{"start":{"line":55,"column":8},"end":{"line":55,"column":20}},"23":{"start":{"line":58,"column":4},"end":{"line":58,"column":53}},"24":{"start":{"line":59,"column":4},"end":{"line":64,"column":5}},"25":{"start":{"line":60,"column":8},"end":{"line":60,"column":74}},"26":{"start":{"line":61,"column":8},"end":{"line":61,"column":77}},"27":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"28":{"start":{"line":63,"column":8},"end":{"line":63,"column":20}},"29":{"start":{"line":66,"column":4},"end":{"line":66,"column":29}},"30":{"start":{"line":67,"column":4},"end":{"line":67,"column":29}},"31":{"start":{"line":69,"column":4},"end":{"line":69,"column":16}},"32":{"start":{"line":72,"column":0},"end":{"line":89,"column":2}},"33":{"start":{"line":73,"column":4},"end":{"line":73,"column":20}},"34":{"start":{"line":75,"column":4},"end":{"line":75,"column":28}},"35":{"start":{"line":77,"column":4},"end":{"line":77,"column":51}},"36":{"start":{"line":78,"column":4},"end":{"line":85,"column":5}},"37":{"start":{"line":82,"column":8},"end":{"line":82,"column":74}},"38":{"start":{"line":83,"column":8},"end":{"line":83,"column":75}},"39":{"start":{"line":84,"column":8},"end":{"line":84,"column":15}},"40":{"start":{"line":87,"column":4},"end":{"line":87,"column":68}},"41":{"start":{"line":88,"column":4},"end":{"line":88,"column":29}},"42":{"start":{"line":91,"column":0},"end":{"line":128,"column":1}},"43":{"start":{"line":92,"column":4},"end":{"line":92,"column":27}},"44":{"start":{"line":93,"column":4},"end":{"line":93,"column":38}},"45":{"start":{"line":94,"column":4},"end":{"line":94,"column":23}},"46":{"start":{"line":95,"column":4},"end":{"line":95,"column":22}},"47":{"start":{"line":96,"column":4},"end":{"line":96,"column":23}},"48":{"start":{"line":97,"column":4},"end":{"line":97,"column":23}},"49":{"start":{"line":98,"column":4},"end":{"line":98,"column":29}},"50":{"start":{"line":99,"column":4},"end":{"line":99,"column":21}},"51":{"start":{"line":100,"column":4},"end":{"line":100,"column":22}},"52":{"start":{"line":102,"column":4},"end":{"line":102,"column":32}},"53":{"start":{"line":103,"column":4},"end":{"line":103,"column":44}},"54":{"start":{"line":104,"column":4},"end":{"line":104,"column":42}},"55":{"start":{"line":106,"column":4},"end":{"line":106,"column":20}},"56":{"start":{"line":107,"column":4},"end":{"line":107,"column":37}},"57":{"start":{"line":109,"column":4},"end":{"line":111,"column":5}},"58":{"start":{"line":110,"column":8},"end":{"line":110,"column":37}},"59":{"start":{"line":113,"column":4},"end":{"line":115,"column":5}},"60":{"start":{"line":114,"column":8},"end":{"line":114,"column":26}},"61":{"start":{"line":117,"column":4},"end":{"line":119,"column":5}},"62":{"start":{"line":118,"column":8},"end":{"line":118,"column":40}},"63":{"start":{"line":121,"column":4},"end":{"line":127,"column":5}},"64":{"start":{"line":122,"column":8},"end":{"line":126,"column":9}},"65":{"start":{"line":123,"column":12},"end":{"line":123,"column":30}},"66":{"start":{"line":125,"column":12},"end":{"line":125,"column":32}},"67":{"start":{"line":130,"column":0},"end":{"line":139,"column":2}},"68":{"start":{"line":131,"column":4},"end":{"line":131,"column":20}},"69":{"start":{"line":133,"column":4},"end":{"line":136,"column":5}},"70":{"start":{"line":134,"column":8},"end":{"line":134,"column":82}},"71":{"start":{"line":135,"column":8},"end":{"line":135,"column":15}},"72":{"start":{"line":138,"column":4},"end":{"line":138,"column":56}},"73":{"start":{"line":141,"column":0},"end":{"line":207,"column":2}},"74":{"start":{"line":142,"column":4},"end":{"line":142,"column":20}},"75":{"start":{"line":144,"column":4},"end":{"line":144,"column":47}},"76":{"start":{"line":145,"column":4},"end":{"line":150,"column":5}},"77":{"start":{"line":147,"column":8},"end":{"line":149,"column":11}},"78":{"start":{"line":151,"column":4},"end":{"line":156,"column":5}},"79":{"start":{"line":153,"column":8},"end":{"line":155,"column":11}},"80":{"start":{"line":158,"column":4},"end":{"line":158,"column":63}},"81":{"start":{"line":159,"column":4},"end":{"line":159,"column":60}},"82":{"start":{"line":161,"column":4},"end":{"line":173,"column":5}},"83":{"start":{"line":164,"column":8},"end":{"line":170,"column":10}},"84":{"start":{"line":172,"column":8},"end":{"line":172,"column":47}},"85":{"start":{"line":176,"column":4},"end":{"line":187,"column":7}},"86":{"start":{"line":188,"column":4},"end":{"line":188,"column":45}},"87":{"start":{"line":189,"column":4},"end":{"line":189,"column":49}},"88":{"start":{"line":191,"column":4},"end":{"line":195,"column":5}},"89":{"start":{"line":192,"column":8},"end":{"line":192,"column":83}},"90":{"start":{"line":194,"column":8},"end":{"line":194,"column":76}},"91":{"start":{"line":197,"column":4},"end":{"line":202,"column":6}},"92":{"start":{"line":204,"column":4},"end":{"line":206,"column":5}},"93":{"start":{"line":205,"column":8},"end":{"line":205,"column":29}},"94":{"start":{"line":209,"column":0},"end":{"line":239,"column":2}},"95":{"start":{"line":210,"column":4},"end":{"line":210,"column":20}},"96":{"start":{"line":211,"column":4},"end":{"line":217,"column":5}},"97":{"start":{"line":212,"column":8},"end":{"line":215,"column":12}},"98":{"start":{"line":216,"column":8},"end":{"line":216,"column":20}},"99":{"start":{"line":222,"column":4},"end":{"line":234,"column":5}},"100":{"start":{"line":223,"column":8},"end":{"line":232,"column":11}},"101":{"start":{"line":233,"column":8},"end":{"line":233,"column":20}},"102":{"start":{"line":236,"column":4},"end":{"line":236,"column":41}},"103":{"start":{"line":238,"column":4},"end":{"line":238,"column":23}},"104":{"start":{"line":241,"column":0},"end":{"line":268,"column":2}},"105":{"start":{"line":242,"column":4},"end":{"line":242,"column":20}},"106":{"start":{"line":244,"column":4},"end":{"line":251,"column":5}},"107":{"start":{"line":245,"column":8},"end":{"line":249,"column":11}},"108":{"start":{"line":250,"column":8},"end":{"line":250,"column":15}},"109":{"start":{"line":252,"column":4},"end":{"line":252,"column":21}},"110":{"start":{"line":254,"column":4},"end":{"line":260,"column":5}},"111":{"start":{"line":259,"column":8},"end":{"line":259,"column":15}},"112":{"start":{"line":262,"column":4},"end":{"line":267,"column":5}},"113":{"start":{"line":263,"column":8},"end":{"line":263,"column":47}},"114":{"start":{"line":264,"column":8},"end":{"line":264,"column":47}},"115":{"start":{"line":266,"column":8},"end":{"line":266,"column":59}},"116":{"start":{"line":270,"column":0},"end":{"line":288,"column":2}},"117":{"start":{"line":271,"column":4},"end":{"line":271,"column":20}},"118":{"start":{"line":273,"column":4},"end":{"line":278,"column":5}},"119":{"start":{"line":274,"column":8},"end":{"line":277,"column":12}},"120":{"start":{"line":279,"column":4},"end":{"line":279,"column":21}},"121":{"start":{"line":281,"column":4},"end":{"line":283,"column":5}},"122":{"start":{"line":282,"column":8},"end":{"line":282,"column":15}},"123":{"start":{"line":284,"column":4},"end":{"line":284,"column":61}},"124":{"start":{"line":286,"column":4},"end":{"line":286,"column":49}},"125":{"start":{"line":287,"column":4},"end":{"line":287,"column":33}},"126":{"start":{"line":290,"column":0},"end":{"line":296,"column":2}},"127":{"start":{"line":292,"column":4},"end":{"line":292,"column":20}},"128":{"start":{"line":294,"column":4},"end":{"line":294,"column":61}},"129":{"start":{"line":295,"column":4},"end":{"line":295,"column":33}},"130":{"start":{"line":298,"column":0},"end":{"line":308,"column":2}},"131":{"start":{"line":299,"column":4},"end":{"line":299,"column":20}},"132":{"start":{"line":304,"column":4},"end":{"line":304,"column":63}},"133":{"start":{"line":305,"column":4},"end":{"line":305,"column":42}},"134":{"start":{"line":307,"column":4},"end":{"line":307,"column":16}},"135":{"start":{"line":310,"column":0},"end":{"line":314,"column":2}},"136":{"start":{"line":311,"column":4},"end":{"line":311,"column":20}},"137":{"start":{"line":313,"column":4},"end":{"line":313,"column":66}}},"branchMap":{"1":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":20},"end":{"line":35,"column":28}},{"start":{"line":35,"column":32},"end":{"line":35,"column":36}}]},"2":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"3":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"4":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"5":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"6":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"7":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":133,"column":4}},{"start":{"line":133,"column":4},"end":{"line":133,"column":4}}]},"8":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":4},"end":{"line":145,"column":4}},{"start":{"line":145,"column":4},"end":{"line":145,"column":4}}]},"9":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":4},"end":{"line":151,"column":4}},{"start":{"line":151,"column":4},"end":{"line":151,"column":4}}]},"10":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"11":{"line":161,"type":"binary-expr","locations":[{"start":{"line":161,"column":8},"end":{"line":161,"column":42}},{"start":{"line":162,"column":8},"end":{"line":162,"column":46}}]},"12":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":4},"end":{"line":191,"column":4}},{"start":{"line":191,"column":4},"end":{"line":191,"column":4}}]},"13":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":4},"end":{"line":211,"column":4}},{"start":{"line":211,"column":4},"end":{"line":211,"column":4}}]},"14":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":4},"end":{"line":222,"column":4}},{"start":{"line":222,"column":4},"end":{"line":222,"column":4}}]},"15":{"line":222,"type":"binary-expr","locations":[{"start":{"line":222,"column":8},"end":{"line":222,"column":22}},{"start":{"line":222,"column":26},"end":{"line":222,"column":65}}]},"16":{"line":226,"type":"binary-expr","locations":[{"start":{"line":226,"column":25},"end":{"line":226,"column":36}},{"start":{"line":226,"column":40},"end":{"line":226,"column":63}}]},"17":{"line":227,"type":"binary-expr","locations":[{"start":{"line":227,"column":18},"end":{"line":227,"column":29}},{"start":{"line":227,"column":33},"end":{"line":227,"column":57}}]},"18":{"line":228,"type":"binary-expr","locations":[{"start":{"line":228,"column":27},"end":{"line":228,"column":38}},{"start":{"line":228,"column":42},"end":{"line":228,"column":64}}]},"19":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":4}},{"start":{"line":244,"column":4},"end":{"line":244,"column":4}}]},"20":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":4},"end":{"line":254,"column":4}},{"start":{"line":254,"column":4},"end":{"line":254,"column":4}}]},"21":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":4},"end":{"line":262,"column":4}},{"start":{"line":262,"column":4},"end":{"line":262,"column":4}}]},"22":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":4},"end":{"line":273,"column":4}},{"start":{"line":273,"column":4},"end":{"line":273,"column":4}}]},"23":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":4},"end":{"line":281,"column":4}},{"start":{"line":281,"column":4},"end":{"line":281,"column":4}}]},"24":{"line":284,"type":"binary-expr","locations":[{"start":{"line":284,"column":19},"end":{"line":284,"column":39}},{"start":{"line":284,"column":43},"end":{"line":284,"column":60}}]},"25":{"line":294,"type":"binary-expr","locations":[{"start":{"line":294,"column":19},"end":{"line":294,"column":39}},{"start":{"line":294,"column":43},"end":{"line":294,"column":60}}]},"26":{"line":304,"type":"binary-expr","locations":[{"start":{"line":304,"column":25},"end":{"line":304,"column":36}},{"start":{"line":304,"column":40},"end":{"line":304,"column":62}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var errors = require('./errors');","var stat = require('./stat-tags.js');","","var LazyRelayInReq = require('./lazy_relay.js').LazyRelayInReq;","var logError = require('./lazy_relay.js').logError;","","RelayHandler.RelayRequest = RelayRequest;","","module.exports = RelayHandler;","","function RelayHandler(channel, circuits) {","    this.channel = channel;","    this.circuits = circuits || null;","    this.logger = this.channel.logger;","    this.lazyEnabled = this.channel.options.useLazyRelaying;","}","","RelayHandler.prototype.type = 'tchannel.relay-handler';","","RelayHandler.prototype.handleLazily = function handleLazily(conn, reqFrame) {","    var self = this;","","    if (!self.lazyEnabled) {","        return false;","    }","","    var rereq = LazyRelayInReq.alloc();","    rereq.reset(conn, reqFrame);","","    var err = rereq.initRead();","    if (err) {","        rereq.onReadError(err);","        return true;","    }","","    rereq.peer = self.channel.peers.choosePeer(null);","    if (!rereq.peer) {","        rereq.sendErrorFrame('Declined', 'no peer available for request');","        self.logger.info('no relay peer available', rereq.extendLogInfo({}));","        rereq.free();","        return true;","    }","","    conn.ops.addInReq(rereq);","    rereq.createOutRequest();","","    return true;","};","","RelayHandler.prototype.handleRequest = function handleRequest(req, buildRes) {","    var self = this;","","    req.forwardTrace = true;","","    var peer = self.channel.peers.choosePeer(null);","    if (!peer) {","        // TODO: stat","        // TODO: allow for customization of this message so hyperbahn can","        // augment it with things like \"at entry node\", \"at exit node\", etc","        buildRes().sendError('Declined', 'no peer available for request');","        self.logger.info('no relay peer available', req.extendLogInfo({}));","        return;","    }","","    var rereq = new RelayRequest(self.channel, peer, req, buildRes);","    rereq.createOutRequest();","};","","function RelayRequest(channel, peer, inreq, buildRes) {","    this.channel = channel;","    this.logger = this.channel.logger;","    this.inreq = inreq;","    this.inres = null;","    this.outres = null;","    this.outreq = null;","    this.buildRes = buildRes;","    this.peer = peer;","    this.error = null;","","    this.boundOnError = onError;","    this.boundExtendLogInfo = extendLogInfo;","    this.boundOnIdentified = onIdentified;","","    var self = this;","    inreq.timeoutEvent.on(onTimeout);","","    function onTimeout(err) {","        self.onInRequestTimeout(err);","    }","","    function onError(err) {","        self.onError(err);","    }","","    function extendLogInfo(info) {","        return self.extendLogInfo(info);","    }","","    function onIdentified(err) {","        if (err) {","            self.onError(err);","        } else {","            self.onIdentified();","        }","    }","}","","RelayRequest.prototype.createOutRequest = function createOutRequest() {","    var self = this;","","    if (self.outreq) {","        self.logger.warn('relay request already started', self.extendLogInfo({}));","        return;","    }","","    self.peer.waitForIdentified(self.boundOnIdentified);","};","","RelayRequest.prototype.onIdentified = function onIdentified() {","    var self = this;","","    var conn = self.peer.getInConnection(true);","    if (!conn.remoteName) {","        // we get the problem","        self.logger.error('onIdentified called on no connection identified', {","            hostPort: self.peer.hostPort","        });","    }","    if (conn.closing) {","        // most likely","        self.logger.error('onIdentified called on connection closing', {","            hostPort: self.peer.hostPort","        });","    }","","    var elapsed = self.channel.timers.now() - self.inreq.start;","    var timeout = Math.max(self.inreq.timeout - elapsed, 1);","","    if (self.channel.maximumRelayTTL !== 0 &&","        timeout > self.channel.maximumRelayTTL","    ) {","        self.logger.warn(","            'Clamping timeout to maximum ttl allowed',","            self.extendLogInfo({","                timeout: timeout,","                maximumTTL: self.channel.maximumRelayTTL","            })","        );","","        timeout = self.channel.maximumRelayTTL;","    }","","    // TODO use a type for this literal","    self.outreq = self.channel.request({","        peer: self.peer,","        streamed: self.inreq.streamed,","        timeout: timeout,","        parent: self.inreq,","        tracing: self.inreq.tracing,","        checksum: self.inreq.checksum,","        forwardTrace: true,","        serviceName: self.inreq.serviceName,","        headers: self.inreq.headers,","        retryFlags: self.inreq.retryFlags","    });","    self.outreq.responseEvent.on(onResponse);","    self.outreq.errorEvent.on(self.boundOnError);","","    if (self.outreq.streamed) {","        self.outreq.sendStreams(self.inreq.arg1, self.inreq.arg2, self.inreq.arg3);","    } else {","        self.outreq.send(self.inreq.arg1, self.inreq.arg2, self.inreq.arg3);","    }","","    self.channel.emitFastStat(","        'tchannel.relay.latency',","        'timing',","        elapsed,","        new stat.RelayLatencyTags()","    );","","    function onResponse(res) {","        self.onResponse(res);","    }","};","","RelayRequest.prototype.createOutResponse = function createOutResponse(options) {","    var self = this;","    if (self.outres) {","        self.logger.warn('relay request already responded', self.extendLogInfo({","            error: self.error,","            options: options // TODO: seems like a Bad Idea ™","        }));","        return null;","    }","","    // It is possible that the inreq gets reaped with a timeout","    // It is also possible that the out request gets repead with a timeout","    // Both the in & out req try to create an outgoing response","    if (self.inreq.res && self.inreq.res.codeString === 'Timeout') {","        self.logger.debug('relay request already timed out', {","            codeString: self.inreq.res.codeString,","            responseMessage: self.inreq.res.message,","            serviceName: self.outreq && self.outreq.serviceName,","            arg1: self.outreq && String(self.outreq.arg1),","            outRemoteAddr: self.outreq && self.outreq.remoteAddr,","            inRemoteAddr: self.inreq.remoteAddr,","            inSocketRemoteAddr: self.inreq.connection.socketRemoteAddr,","            error: self.error","        });","        return null;","    }","","    self.outres = self.buildRes(options);","","    return self.outres;","};","","RelayRequest.prototype.onResponse = function onResponse(res) {","    var self = this;","","    if (self.inres) {","        self.logger.warn('relay request got more than one response callback', {","            // TODO: better context","            remoteAddr: res.remoteAddr,","            id: res.id","        });","        return;","    }","    self.inres = res;","","    if (!self.createOutResponse({","        streamed: self.inres.streamed,","        headers: self.inres.headers,","        code: self.inres.code","    })) {","        return;","    }","","    if (self.outres.streamed) {","        self.inres.arg2.pipe(self.outres.arg2);","        self.inres.arg3.pipe(self.outres.arg3);","    } else {","        self.outres.send(self.inres.arg2, self.inres.arg3);","    }","};","","RelayRequest.prototype.onError = function onError(err) {","    var self = this;","","    if (self.error) {","        self.logger.warn('Unexpected double onError', self.inreq.extendLogInfo({","            error: err,","            oldError: self.error","        }));","    }","    self.error = err;","","    if (!self.createOutResponse()) {","        return;","    }","    var codeName = errors.classify(err) || 'UnexpectedError';","","    self.outres.sendError(codeName, err.message);","    self.logError(err, codeName);","};","","RelayRequest.prototype.onInRequestTimeout =","function onInRequestTimeout(err) {","    var self = this;","","    var codeName = errors.classify(err) || 'UnexpectedError';","    self.logError(err, codeName);","};","","RelayRequest.prototype.extendLogInfo = function extendLogInfo(info) {","    var self = this;","","    // XXX does inreq give:","    // info.remoteAddr = self.inreq.remoteAddr;","    // info.id = self.inreq.id;","    info.outRemoteAddr = self.outreq && self.outreq.remoteAddr;","    info = self.inreq.extendLogInfo(info);","","    return info;","};","","RelayRequest.prototype.logError = function relayRequestLogError(err, codeName) {","    var self = this;","","    logError(self.logger, err, codeName, self.boundExtendLogInfo);","};",""],"l":{"23":1,"24":1,"26":1,"27":1,"29":1,"31":1,"33":1,"34":0,"35":0,"36":0,"37":0,"40":1,"42":1,"43":0,"45":0,"46":0,"49":0,"50":0,"52":0,"53":0,"54":0,"55":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"66":0,"67":0,"69":0,"72":1,"73":0,"75":0,"77":0,"78":0,"82":0,"83":0,"84":0,"87":0,"88":0,"91":1,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"102":0,"103":0,"104":0,"106":0,"107":0,"109":1,"110":0,"113":1,"114":0,"117":1,"118":0,"121":1,"122":0,"123":0,"125":0,"130":1,"131":0,"133":0,"134":0,"135":0,"138":0,"141":1,"142":0,"144":0,"145":0,"147":0,"151":0,"153":0,"158":0,"159":0,"161":0,"164":0,"172":0,"176":0,"188":0,"189":0,"191":0,"192":0,"194":0,"197":0,"204":1,"205":0,"209":1,"210":0,"211":0,"212":0,"216":0,"222":0,"223":0,"233":0,"236":0,"238":0,"241":1,"242":0,"244":0,"245":0,"250":0,"252":0,"254":0,"259":0,"262":0,"263":0,"264":0,"266":0,"270":1,"271":0,"273":0,"274":0,"279":0,"281":0,"282":0,"284":0,"286":0,"287":0,"290":1,"292":0,"294":0,"295":0,"298":1,"299":0,"304":0,"305":0,"307":0,"310":1,"311":0,"313":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/http.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/as/http.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":0,"110":1,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":1,"188":0,"189":0,"190":0,"191":0,"192":0,"193":1,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":1,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":1,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":1,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":1,"230":0,"231":0,"232":0,"233":0,"234":0,"235":1,"236":0,"237":0,"238":0,"239":0,"240":0,"241":1,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":1,"250":0,"251":0,"252":0,"253":0,"254":1,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":1,"272":0,"273":0,"274":1,"275":0,"276":0,"277":0,"278":0,"279":0,"280":1,"281":0,"282":0,"283":0,"284":0,"285":1,"286":0,"287":0,"288":0,"289":0,"290":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0,0,0,0,0,0,0,0,0,0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0,0,0,0,0,0,0,0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"fnMap":{"1":{"name":"HTTPReqArg2","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":47}}},"2":{"name":"HTTPResArg2","line":49,"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":55}}},"3":{"name":"getHeaders","line":66,"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":22}}},"4":{"name":"setHeaders","line":115,"loc":{"start":{"line":115,"column":0},"end":{"line":115,"column":29}}},"5":{"name":"TChannelHTTP","line":154,"loc":{"start":{"line":154,"column":0},"end":{"line":154,"column":31}}},"6":{"name":"send","line":165,"loc":{"start":{"line":165,"column":37},"end":{"line":165,"column":89}}},"7":{"name":"onRawBody","line":212,"loc":{"start":{"line":212,"column":4},"end":{"line":212,"column":34}}},"8":{"name":"onResponse","line":231,"loc":{"start":{"line":231,"column":4},"end":{"line":231,"column":47}}},"9":{"name":"onStreamResponse","line":240,"loc":{"start":{"line":240,"column":4},"end":{"line":240,"column":49}}},"10":{"name":"arg2Ready","line":249,"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":39}}},"11":{"name":"readArg2","line":258,"loc":{"start":{"line":258,"column":4},"end":{"line":258,"column":42}}},"12":{"name":"send","line":289,"loc":{"start":{"line":289,"column":38},"end":{"line":289,"column":99}}},"13":{"name":"register","line":339,"loc":{"start":{"line":339,"column":36},"end":{"line":339,"column":73}}},"14":{"name":"forwardToTChannel","line":347,"loc":{"start":{"line":347,"column":43},"end":{"line":347,"column":118}}},"15":{"name":"onIdentified","line":372,"loc":{"start":{"line":372,"column":4},"end":{"line":372,"column":31}}},"16":{"name":"forwarded","line":384,"loc":{"start":{"line":384,"column":4},"end":{"line":384,"column":55}}},"17":{"name":"onValue","line":398,"loc":{"start":{"line":398,"column":44},"end":{"line":398,"column":75}}},"18":{"name":"_sendHTTPError","line":417,"loc":{"start":{"line":417,"column":40},"end":{"line":417,"column":77}}},"19":{"name":"forwardToHTTP","line":426,"loc":{"start":{"line":426,"column":39},"end":{"line":426,"column":106}}},"20":{"name":"_forwardToLBPool","line":443,"loc":{"start":{"line":443,"column":42},"end":{"line":443,"column":102}}},"21":{"name":"onResponse","line":458,"loc":{"start":{"line":458,"column":4},"end":{"line":458,"column":40}}},"22":{"name":"_forwardToNodeHTTP","line":482,"loc":{"start":{"line":482,"column":44},"end":{"line":482,"column":106}}},"23":{"name":"onResponse","line":496,"loc":{"start":{"line":496,"column":4},"end":{"line":496,"column":31}}},"24":{"name":"onError","line":514,"loc":{"start":{"line":514,"column":4},"end":{"line":514,"column":26}}},"25":{"name":"AsHTTPHandler","line":526,"loc":{"start":{"line":526,"column":0},"end":{"line":526,"column":49}}},"26":{"name":"handleRequest","line":537,"loc":{"start":{"line":537,"column":40},"end":{"line":537,"column":83}}},"27":{"name":"onArg2","line":549,"loc":{"start":{"line":549,"column":4},"end":{"line":549,"column":31}}},"28":{"name":"onError","line":579,"loc":{"start":{"line":579,"column":4},"end":{"line":579,"column":26}}},"29":{"name":"handle","line":586,"loc":{"start":{"line":586,"column":4},"end":{"line":586,"column":22}}},"30":{"name":"sendResponse","line":609,"loc":{"start":{"line":609,"column":4},"end":{"line":609,"column":38}}},"31":{"name":"sendError","line":621,"loc":{"start":{"line":621,"column":4},"end":{"line":621,"column":28}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":30}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":42}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":37}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":38}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":37}},"8":{"start":{"line":31,"column":0},"end":{"line":32,"column":42}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":30}},"10":{"start":{"line":36,"column":0},"end":{"line":41,"column":1}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":31}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":25}},"14":{"start":{"line":40,"column":4},"end":{"line":40,"column":41}},"15":{"start":{"line":43,"column":0},"end":{"line":47,"column":3}},"16":{"start":{"line":49,"column":0},"end":{"line":54,"column":1}},"17":{"start":{"line":50,"column":4},"end":{"line":50,"column":20}},"18":{"start":{"line":51,"column":4},"end":{"line":51,"column":38}},"19":{"start":{"line":52,"column":4},"end":{"line":52,"column":33}},"20":{"start":{"line":53,"column":4},"end":{"line":53,"column":41}},"21":{"start":{"line":56,"column":0},"end":{"line":60,"column":3}},"22":{"start":{"line":64,"column":0},"end":{"line":110,"column":2}},"23":{"start":{"line":67,"column":4},"end":{"line":67,"column":20}},"24":{"start":{"line":68,"column":4},"end":{"line":68,"column":21}},"25":{"start":{"line":69,"column":4},"end":{"line":107,"column":5}},"26":{"start":{"line":70,"column":8},"end":{"line":70,"column":39}},"27":{"start":{"line":71,"column":8},"end":{"line":71,"column":26}},"28":{"start":{"line":72,"column":8},"end":{"line":72,"column":26}},"29":{"start":{"line":73,"column":8},"end":{"line":73,"column":32}},"30":{"start":{"line":74,"column":8},"end":{"line":106,"column":9}},"31":{"start":{"line":76,"column":16},"end":{"line":80,"column":17}},"32":{"start":{"line":77,"column":20},"end":{"line":77,"column":43}},"33":{"start":{"line":79,"column":20},"end":{"line":79,"column":41}},"34":{"start":{"line":81,"column":16},"end":{"line":81,"column":22}},"35":{"start":{"line":95,"column":16},"end":{"line":97,"column":17}},"36":{"start":{"line":96,"column":20},"end":{"line":96,"column":39}},"37":{"start":{"line":98,"column":16},"end":{"line":98,"column":22}},"38":{"start":{"line":101,"column":16},"end":{"line":105,"column":17}},"39":{"start":{"line":102,"column":20},"end":{"line":102,"column":47}},"40":{"start":{"line":104,"column":20},"end":{"line":104,"column":39}},"41":{"start":{"line":108,"column":4},"end":{"line":108,"column":19}},"42":{"start":{"line":113,"column":0},"end":{"line":151,"column":2}},"43":{"start":{"line":116,"column":4},"end":{"line":116,"column":20}},"44":{"start":{"line":117,"column":4},"end":{"line":117,"column":26}},"45":{"start":{"line":118,"column":4},"end":{"line":118,"column":36}},"46":{"start":{"line":119,"column":4},"end":{"line":150,"column":5}},"47":{"start":{"line":120,"column":8},"end":{"line":120,"column":26}},"48":{"start":{"line":121,"column":8},"end":{"line":121,"column":31}},"49":{"start":{"line":122,"column":8},"end":{"line":149,"column":9}},"50":{"start":{"line":124,"column":16},"end":{"line":126,"column":17}},"51":{"start":{"line":125,"column":20},"end":{"line":125,"column":57}},"52":{"start":{"line":127,"column":16},"end":{"line":127,"column":22}},"53":{"start":{"line":141,"column":16},"end":{"line":141,"column":50}},"54":{"start":{"line":142,"column":16},"end":{"line":142,"column":22}},"55":{"start":{"line":145,"column":16},"end":{"line":145,"column":38}},"56":{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},"57":{"start":{"line":147,"column":20},"end":{"line":147,"column":57}},"58":{"start":{"line":154,"column":0},"end":{"line":162,"column":1}},"59":{"start":{"line":155,"column":4},"end":{"line":157,"column":5}},"60":{"start":{"line":156,"column":8},"end":{"line":156,"column":41}},"61":{"start":{"line":158,"column":4},"end":{"line":158,"column":20}},"62":{"start":{"line":159,"column":4},"end":{"line":161,"column":5}},"63":{"start":{"line":160,"column":8},"end":{"line":160,"column":37}},"64":{"start":{"line":165,"column":0},"end":{"line":286,"column":2}},"65":{"start":{"line":166,"column":4},"end":{"line":166,"column":20}},"66":{"start":{"line":167,"column":4},"end":{"line":170,"column":5}},"67":{"start":{"line":168,"column":8},"end":{"line":168,"column":27}},"68":{"start":{"line":169,"column":8},"end":{"line":169,"column":23}},"69":{"start":{"line":172,"column":4},"end":{"line":172,"column":12}},"70":{"start":{"line":173,"column":4},"end":{"line":173,"column":16}},"71":{"start":{"line":175,"column":4},"end":{"line":175,"column":54}},"72":{"start":{"line":176,"column":4},"end":{"line":176,"column":34}},"73":{"start":{"line":178,"column":4},"end":{"line":178,"column":18}},"74":{"start":{"line":179,"column":4},"end":{"line":179,"column":57}},"75":{"start":{"line":180,"column":4},"end":{"line":189,"column":5}},"76":{"start":{"line":181,"column":8},"end":{"line":183,"column":11}},"77":{"start":{"line":184,"column":8},"end":{"line":186,"column":11}},"78":{"start":{"line":187,"column":8},"end":{"line":187,"column":42}},"79":{"start":{"line":188,"column":8},"end":{"line":188,"column":20}},"80":{"start":{"line":190,"column":4},"end":{"line":190,"column":29}},"81":{"start":{"line":192,"column":4},"end":{"line":192,"column":29}},"82":{"start":{"line":193,"column":4},"end":{"line":206,"column":5}},"83":{"start":{"line":194,"column":8},"end":{"line":194,"column":67}},"84":{"start":{"line":195,"column":8},"end":{"line":204,"column":10}},"85":{"start":{"line":205,"column":8},"end":{"line":205,"column":19}},"86":{"start":{"line":207,"column":4},"end":{"line":210,"column":18}},"87":{"start":{"line":212,"column":4},"end":{"line":229,"column":5}},"88":{"start":{"line":213,"column":8},"end":{"line":216,"column":9}},"89":{"start":{"line":214,"column":12},"end":{"line":214,"column":44}},"90":{"start":{"line":215,"column":12},"end":{"line":215,"column":23}},"91":{"start":{"line":217,"column":8},"end":{"line":217,"column":54}},"92":{"start":{"line":218,"column":8},"end":{"line":227,"column":10}},"93":{"start":{"line":228,"column":8},"end":{"line":228,"column":19}},"94":{"start":{"line":231,"column":4},"end":{"line":238,"column":5}},"95":{"start":{"line":232,"column":8},"end":{"line":232,"column":44}},"96":{"start":{"line":233,"column":8},"end":{"line":237,"column":9}},"97":{"start":{"line":234,"column":12},"end":{"line":234,"column":44}},"98":{"start":{"line":236,"column":12},"end":{"line":236,"column":38}},"99":{"start":{"line":240,"column":4},"end":{"line":256,"column":5}},"100":{"start":{"line":241,"column":8},"end":{"line":241,"column":44}},"101":{"start":{"line":242,"column":8},"end":{"line":248,"column":9}},"102":{"start":{"line":243,"column":12},"end":{"line":243,"column":45}},"103":{"start":{"line":244,"column":15},"end":{"line":248,"column":9}},"104":{"start":{"line":245,"column":12},"end":{"line":245,"column":46}},"105":{"start":{"line":247,"column":12},"end":{"line":247,"column":39}},"106":{"start":{"line":249,"column":8},"end":{"line":255,"column":9}},"107":{"start":{"line":250,"column":12},"end":{"line":254,"column":13}},"108":{"start":{"line":251,"column":16},"end":{"line":251,"column":49}},"109":{"start":{"line":253,"column":16},"end":{"line":253,"column":42}},"110":{"start":{"line":258,"column":4},"end":{"line":285,"column":5}},"111":{"start":{"line":259,"column":8},"end":{"line":259,"column":63}},"112":{"start":{"line":260,"column":8},"end":{"line":284,"column":9}},"113":{"start":{"line":261,"column":12},"end":{"line":263,"column":15}},"114":{"start":{"line":264,"column":12},"end":{"line":266,"column":15}},"115":{"start":{"line":267,"column":12},"end":{"line":267,"column":54}},"116":{"start":{"line":269,"column":12},"end":{"line":273,"column":13}},"117":{"start":{"line":270,"column":16},"end":{"line":270,"column":63}},"118":{"start":{"line":272,"column":16},"end":{"line":272,"column":63}},"119":{"start":{"line":274,"column":12},"end":{"line":283,"column":14}},"120":{"start":{"line":289,"column":0},"end":{"line":337,"column":2}},"121":{"start":{"line":291,"column":4},"end":{"line":291,"column":20}},"122":{"start":{"line":292,"column":4},"end":{"line":292,"column":42}},"123":{"start":{"line":293,"column":4},"end":{"line":293,"column":68}},"124":{"start":{"line":294,"column":4},"end":{"line":294,"column":34}},"125":{"start":{"line":295,"column":4},"end":{"line":295,"column":61}},"126":{"start":{"line":296,"column":4},"end":{"line":305,"column":5}},"127":{"start":{"line":297,"column":8},"end":{"line":299,"column":11}},"128":{"start":{"line":300,"column":8},"end":{"line":302,"column":11}},"129":{"start":{"line":303,"column":8},"end":{"line":303,"column":30}},"130":{"start":{"line":304,"column":8},"end":{"line":304,"column":20}},"131":{"start":{"line":306,"column":4},"end":{"line":306,"column":29}},"132":{"start":{"line":307,"column":4},"end":{"line":322,"column":5}},"133":{"start":{"line":308,"column":8},"end":{"line":313,"column":30}},"134":{"start":{"line":314,"column":8},"end":{"line":314,"column":23}},"135":{"start":{"line":315,"column":8},"end":{"line":320,"column":10}},"136":{"start":{"line":321,"column":8},"end":{"line":321,"column":20}},"137":{"start":{"line":324,"column":4},"end":{"line":329,"column":41}},"138":{"start":{"line":330,"column":4},"end":{"line":335,"column":6}},"139":{"start":{"line":336,"column":4},"end":{"line":336,"column":15}},"140":{"start":{"line":339,"column":0},"end":{"line":345,"column":2}},"141":{"start":{"line":340,"column":4},"end":{"line":340,"column":20}},"142":{"start":{"line":341,"column":4},"end":{"line":341,"column":34}},"143":{"start":{"line":342,"column":4},"end":{"line":342,"column":28}},"144":{"start":{"line":343,"column":4},"end":{"line":343,"column":66}},"145":{"start":{"line":344,"column":4},"end":{"line":344,"column":28}},"146":{"start":{"line":347,"column":0},"end":{"line":415,"column":2}},"147":{"start":{"line":348,"column":4},"end":{"line":348,"column":20}},"148":{"start":{"line":349,"column":4},"end":{"line":349,"column":44}},"149":{"start":{"line":350,"column":4},"end":{"line":350,"column":49}},"150":{"start":{"line":351,"column":4},"end":{"line":351,"column":42}},"151":{"start":{"line":352,"column":4},"end":{"line":352,"column":13}},"152":{"start":{"line":355,"column":4},"end":{"line":357,"column":24}},"153":{"start":{"line":359,"column":4},"end":{"line":362,"column":5}},"154":{"start":{"line":360,"column":8},"end":{"line":360,"column":41}},"155":{"start":{"line":361,"column":8},"end":{"line":361,"column":62}},"156":{"start":{"line":364,"column":4},"end":{"line":364,"column":47}},"157":{"start":{"line":365,"column":4},"end":{"line":369,"column":5}},"158":{"start":{"line":366,"column":8},"end":{"line":366,"column":60}},"159":{"start":{"line":367,"column":8},"end":{"line":367,"column":43}},"160":{"start":{"line":368,"column":8},"end":{"line":368,"column":20}},"161":{"start":{"line":371,"column":4},"end":{"line":371,"column":41}},"162":{"start":{"line":372,"column":4},"end":{"line":382,"column":5}},"163":{"start":{"line":373,"column":8},"end":{"line":377,"column":9}},"164":{"start":{"line":374,"column":12},"end":{"line":374,"column":43}},"165":{"start":{"line":375,"column":12},"end":{"line":375,"column":26}},"166":{"start":{"line":376,"column":12},"end":{"line":376,"column":24}},"167":{"start":{"line":379,"column":8},"end":{"line":379,"column":37}},"168":{"start":{"line":380,"column":8},"end":{"line":380,"column":41}},"169":{"start":{"line":381,"column":8},"end":{"line":381,"column":55}},"170":{"start":{"line":384,"column":4},"end":{"line":414,"column":5}},"171":{"start":{"line":385,"column":8},"end":{"line":412,"column":9}},"172":{"start":{"line":386,"column":12},"end":{"line":386,"column":43}},"173":{"start":{"line":388,"column":12},"end":{"line":388,"column":44}},"174":{"start":{"line":391,"column":12},"end":{"line":395,"column":13}},"175":{"start":{"line":392,"column":16},"end":{"line":392,"column":71}},"176":{"start":{"line":394,"column":16},"end":{"line":394,"column":57}},"177":{"start":{"line":396,"column":12},"end":{"line":411,"column":13}},"178":{"start":{"line":397,"column":16},"end":{"line":408,"column":17}},"179":{"start":{"line":398,"column":20},"end":{"line":405,"column":23}},"180":{"start":{"line":399,"column":24},"end":{"line":401,"column":25}},"181":{"start":{"line":400,"column":28},"end":{"line":400,"column":67}},"182":{"start":{"line":403,"column":24},"end":{"line":403,"column":43}},"183":{"start":{"line":404,"column":24},"end":{"line":404,"column":35}},"184":{"start":{"line":407,"column":20},"end":{"line":407,"column":42}},"185":{"start":{"line":410,"column":16},"end":{"line":410,"column":34}},"186":{"start":{"line":413,"column":8},"end":{"line":413,"column":22}},"187":{"start":{"line":417,"column":0},"end":{"line":424,"column":2}},"188":{"start":{"line":418,"column":4},"end":{"line":418,"column":49}},"189":{"start":{"line":419,"column":4},"end":{"line":419,"column":42}},"190":{"start":{"line":420,"column":4},"end":{"line":420,"column":47}},"191":{"start":{"line":422,"column":4},"end":{"line":422,"column":64}},"192":{"start":{"line":423,"column":4},"end":{"line":423,"column":28}},"193":{"start":{"line":426,"column":0},"end":{"line":441,"column":2}},"194":{"start":{"line":427,"column":4},"end":{"line":427,"column":20}},"195":{"start":{"line":428,"column":4},"end":{"line":428,"column":49}},"196":{"start":{"line":429,"column":4},"end":{"line":429,"column":42}},"197":{"start":{"line":430,"column":4},"end":{"line":435,"column":7}},"198":{"start":{"line":436,"column":4},"end":{"line":440,"column":5}},"199":{"start":{"line":437,"column":8},"end":{"line":437,"column":64}},"200":{"start":{"line":439,"column":8},"end":{"line":439,"column":66}},"201":{"start":{"line":443,"column":0},"end":{"line":480,"column":2}},"202":{"start":{"line":444,"column":4},"end":{"line":444,"column":20}},"203":{"start":{"line":445,"column":4},"end":{"line":445,"column":42}},"204":{"start":{"line":446,"column":4},"end":{"line":448,"column":5}},"205":{"start":{"line":447,"column":8},"end":{"line":447,"column":21}},"206":{"start":{"line":449,"column":4},"end":{"line":449,"column":28}},"207":{"start":{"line":450,"column":4},"end":{"line":450,"column":49}},"208":{"start":{"line":452,"column":4},"end":{"line":454,"column":5}},"209":{"start":{"line":453,"column":8},"end":{"line":453,"column":52}},"210":{"start":{"line":456,"column":4},"end":{"line":456,"column":51}},"211":{"start":{"line":458,"column":4},"end":{"line":479,"column":5}},"212":{"start":{"line":459,"column":8},"end":{"line":466,"column":9}},"213":{"start":{"line":460,"column":12},"end":{"line":462,"column":15}},"214":{"start":{"line":463,"column":12},"end":{"line":463,"column":34}},"215":{"start":{"line":464,"column":12},"end":{"line":464,"column":26}},"216":{"start":{"line":465,"column":12},"end":{"line":465,"column":19}},"217":{"start":{"line":467,"column":8},"end":{"line":467,"column":39}},"218":{"start":{"line":468,"column":8},"end":{"line":468,"column":23}},"219":{"start":{"line":469,"column":8},"end":{"line":478,"column":10}},"220":{"start":{"line":482,"column":0},"end":{"line":524,"column":2}},"221":{"start":{"line":483,"column":4},"end":{"line":483,"column":20}},"222":{"start":{"line":484,"column":4},"end":{"line":484,"column":42}},"223":{"start":{"line":485,"column":4},"end":{"line":485,"column":21}},"224":{"start":{"line":486,"column":4},"end":{"line":486,"column":51}},"225":{"start":{"line":487,"column":4},"end":{"line":487,"column":32}},"226":{"start":{"line":490,"column":4},"end":{"line":494,"column":5}},"227":{"start":{"line":491,"column":8},"end":{"line":491,"column":38}},"228":{"start":{"line":493,"column":8},"end":{"line":493,"column":34}},"229":{"start":{"line":496,"column":4},"end":{"line":512,"column":5}},"230":{"start":{"line":497,"column":8},"end":{"line":511,"column":9}},"231":{"start":{"line":498,"column":12},"end":{"line":498,"column":24}},"232":{"start":{"line":499,"column":12},"end":{"line":499,"column":39}},"233":{"start":{"line":500,"column":12},"end":{"line":500,"column":27}},"234":{"start":{"line":501,"column":12},"end":{"line":510,"column":14}},"235":{"start":{"line":514,"column":4},"end":{"line":523,"column":5}},"236":{"start":{"line":515,"column":8},"end":{"line":522,"column":9}},"237":{"start":{"line":516,"column":12},"end":{"line":516,"column":24}},"238":{"start":{"line":517,"column":12},"end":{"line":519,"column":15}},"239":{"start":{"line":520,"column":12},"end":{"line":520,"column":34}},"240":{"start":{"line":521,"column":12},"end":{"line":521,"column":26}},"241":{"start":{"line":526,"column":0},"end":{"line":535,"column":1}},"242":{"start":{"line":527,"column":4},"end":{"line":529,"column":5}},"243":{"start":{"line":528,"column":8},"end":{"line":528,"column":43}},"244":{"start":{"line":530,"column":4},"end":{"line":530,"column":20}},"245":{"start":{"line":531,"column":4},"end":{"line":531,"column":25}},"246":{"start":{"line":532,"column":4},"end":{"line":532,"column":27}},"247":{"start":{"line":533,"column":4},"end":{"line":533,"column":27}},"248":{"start":{"line":534,"column":4},"end":{"line":534,"column":38}},"249":{"start":{"line":537,"column":0},"end":{"line":632,"column":2}},"250":{"start":{"line":538,"column":4},"end":{"line":538,"column":20}},"251":{"start":{"line":539,"column":4},"end":{"line":539,"column":42}},"252":{"start":{"line":541,"column":4},"end":{"line":546,"column":6}},"253":{"start":{"line":547,"column":4},"end":{"line":547,"column":25}},"254":{"start":{"line":549,"column":4},"end":{"line":575,"column":5}},"255":{"start":{"line":550,"column":8},"end":{"line":553,"column":9}},"256":{"start":{"line":551,"column":12},"end":{"line":551,"column":27}},"257":{"start":{"line":552,"column":12},"end":{"line":552,"column":19}},"258":{"start":{"line":555,"column":8},"end":{"line":555,"column":67}},"259":{"start":{"line":556,"column":8},"end":{"line":565,"column":9}},"260":{"start":{"line":557,"column":12},"end":{"line":559,"column":15}},"261":{"start":{"line":560,"column":12},"end":{"line":562,"column":15}},"262":{"start":{"line":563,"column":12},"end":{"line":563,"column":37}},"263":{"start":{"line":564,"column":12},"end":{"line":564,"column":19}},"264":{"start":{"line":567,"column":8},"end":{"line":567,"column":34}},"265":{"start":{"line":568,"column":8},"end":{"line":572,"column":9}},"266":{"start":{"line":569,"column":12},"end":{"line":569,"column":39}},"267":{"start":{"line":571,"column":12},"end":{"line":571,"column":36}},"268":{"start":{"line":574,"column":8},"end":{"line":574,"column":17}},"269":{"start":{"line":577,"column":4},"end":{"line":577,"column":21}},"270":{"start":{"line":578,"column":4},"end":{"line":578,"column":31}},"271":{"start":{"line":579,"column":4},"end":{"line":584,"column":5}},"272":{"start":{"line":580,"column":8},"end":{"line":580,"column":20}},"273":{"start":{"line":581,"column":8},"end":{"line":583,"column":11}},"274":{"start":{"line":586,"column":4},"end":{"line":607,"column":5}},"275":{"start":{"line":588,"column":8},"end":{"line":592,"column":10}},"276":{"start":{"line":594,"column":8},"end":{"line":603,"column":10}},"277":{"start":{"line":604,"column":8},"end":{"line":604,"column":43}},"278":{"start":{"line":605,"column":8},"end":{"line":605,"column":41}},"279":{"start":{"line":606,"column":8},"end":{"line":606,"column":47}},"280":{"start":{"line":609,"column":4},"end":{"line":619,"column":5}},"281":{"start":{"line":610,"column":8},"end":{"line":618,"column":9}},"282":{"start":{"line":611,"column":12},"end":{"line":611,"column":24}},"283":{"start":{"line":612,"column":12},"end":{"line":616,"column":14}},"284":{"start":{"line":617,"column":12},"end":{"line":617,"column":85}},"285":{"start":{"line":621,"column":4},"end":{"line":631,"column":5}},"286":{"start":{"line":622,"column":8},"end":{"line":630,"column":9}},"287":{"start":{"line":623,"column":12},"end":{"line":623,"column":24}},"288":{"start":{"line":624,"column":12},"end":{"line":626,"column":15}},"289":{"start":{"line":627,"column":12},"end":{"line":627,"column":50}},"290":{"start":{"line":628,"column":12},"end":{"line":629,"column":74}}},"branchMap":{"1":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":18},"end":{"line":38,"column":24}},{"start":{"line":38,"column":28},"end":{"line":38,"column":30}}]},"2":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":15},"end":{"line":39,"column":18}},{"start":{"line":39,"column":22},"end":{"line":39,"column":24}}]},"3":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":23},"end":{"line":40,"column":34}},{"start":{"line":40,"column":38},"end":{"line":40,"column":40}}]},"4":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":22},"end":{"line":51,"column":32}},{"start":{"line":51,"column":36},"end":{"line":51,"column":37}}]},"5":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":19},"end":{"line":52,"column":26}},{"start":{"line":52,"column":30},"end":{"line":52,"column":32}}]},"6":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":23},"end":{"line":53,"column":34}},{"start":{"line":53,"column":38},"end":{"line":53,"column":40}}]},"7":{"line":74,"type":"switch","locations":[{"start":{"line":75,"column":12},"end":{"line":81,"column":22}},{"start":{"line":82,"column":12},"end":{"line":82,"column":32}},{"start":{"line":83,"column":12},"end":{"line":83,"column":34}},{"start":{"line":84,"column":12},"end":{"line":84,"column":30}},{"start":{"line":85,"column":12},"end":{"line":85,"column":27}},{"start":{"line":86,"column":12},"end":{"line":86,"column":24}},{"start":{"line":87,"column":12},"end":{"line":87,"column":33}},{"start":{"line":88,"column":12},"end":{"line":88,"column":39}},{"start":{"line":89,"column":12},"end":{"line":89,"column":37}},{"start":{"line":90,"column":12},"end":{"line":90,"column":39}},{"start":{"line":91,"column":12},"end":{"line":91,"column":24}},{"start":{"line":92,"column":12},"end":{"line":92,"column":28}},{"start":{"line":93,"column":12},"end":{"line":98,"column":22}},{"start":{"line":99,"column":12},"end":{"line":105,"column":17}}]},"8":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":16},"end":{"line":76,"column":16}},{"start":{"line":76,"column":16},"end":{"line":76,"column":16}}]},"9":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":16},"end":{"line":95,"column":16}},{"start":{"line":95,"column":16},"end":{"line":95,"column":16}}]},"10":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":16},"end":{"line":101,"column":16}},{"start":{"line":101,"column":16},"end":{"line":101,"column":16}}]},"11":{"line":122,"type":"switch","locations":[{"start":{"line":123,"column":12},"end":{"line":127,"column":22}},{"start":{"line":128,"column":12},"end":{"line":128,"column":32}},{"start":{"line":129,"column":12},"end":{"line":129,"column":34}},{"start":{"line":130,"column":12},"end":{"line":130,"column":30}},{"start":{"line":131,"column":12},"end":{"line":131,"column":27}},{"start":{"line":132,"column":12},"end":{"line":132,"column":24}},{"start":{"line":133,"column":12},"end":{"line":133,"column":33}},{"start":{"line":134,"column":12},"end":{"line":134,"column":39}},{"start":{"line":135,"column":12},"end":{"line":135,"column":37}},{"start":{"line":136,"column":12},"end":{"line":136,"column":39}},{"start":{"line":137,"column":12},"end":{"line":137,"column":24}},{"start":{"line":138,"column":12},"end":{"line":138,"column":28}},{"start":{"line":139,"column":12},"end":{"line":142,"column":22}},{"start":{"line":143,"column":12},"end":{"line":148,"column":17}}]},"12":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]},"13":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"14":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"15":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":4}},{"start":{"line":180,"column":4},"end":{"line":180,"column":4}}]},"16":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]},"17":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"18":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":8},"end":{"line":233,"column":8}},{"start":{"line":233,"column":8},"end":{"line":233,"column":8}}]},"19":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":8},"end":{"line":242,"column":8}},{"start":{"line":242,"column":8},"end":{"line":242,"column":8}}]},"20":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":15},"end":{"line":244,"column":15}},{"start":{"line":244,"column":15},"end":{"line":244,"column":15}}]},"21":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":12},"end":{"line":250,"column":12}},{"start":{"line":250,"column":12},"end":{"line":250,"column":12}}]},"22":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":8},"end":{"line":260,"column":8}},{"start":{"line":260,"column":8},"end":{"line":260,"column":8}}]},"23":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":12},"end":{"line":269,"column":12}},{"start":{"line":269,"column":12},"end":{"line":269,"column":12}}]},"24":{"line":296,"type":"if","locations":[{"start":{"line":296,"column":4},"end":{"line":296,"column":4}},{"start":{"line":296,"column":4},"end":{"line":296,"column":4}}]},"25":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":4}},{"start":{"line":307,"column":4},"end":{"line":307,"column":4}}]},"26":{"line":349,"type":"binary-expr","locations":[{"start":{"line":349,"column":19},"end":{"line":349,"column":31}},{"start":{"line":349,"column":35},"end":{"line":349,"column":43}}]},"27":{"line":350,"type":"binary-expr","locations":[{"start":{"line":350,"column":18},"end":{"line":350,"column":29}},{"start":{"line":350,"column":33},"end":{"line":350,"column":48}}]},"28":{"line":359,"type":"if","locations":[{"start":{"line":359,"column":4},"end":{"line":359,"column":4}},{"start":{"line":359,"column":4},"end":{"line":359,"column":4}}]},"29":{"line":365,"type":"if","locations":[{"start":{"line":365,"column":4},"end":{"line":365,"column":4}},{"start":{"line":365,"column":4},"end":{"line":365,"column":4}}]},"30":{"line":373,"type":"if","locations":[{"start":{"line":373,"column":8},"end":{"line":373,"column":8}},{"start":{"line":373,"column":8},"end":{"line":373,"column":8}}]},"31":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":8},"end":{"line":385,"column":8}},{"start":{"line":385,"column":8},"end":{"line":385,"column":8}}]},"32":{"line":391,"type":"if","locations":[{"start":{"line":391,"column":12},"end":{"line":391,"column":12}},{"start":{"line":391,"column":12},"end":{"line":391,"column":12}}]},"33":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":12},"end":{"line":396,"column":12}},{"start":{"line":396,"column":12},"end":{"line":396,"column":12}}]},"34":{"line":397,"type":"if","locations":[{"start":{"line":397,"column":16},"end":{"line":397,"column":16}},{"start":{"line":397,"column":16},"end":{"line":397,"column":16}}]},"35":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":24},"end":{"line":399,"column":24}},{"start":{"line":399,"column":24},"end":{"line":399,"column":24}}]},"36":{"line":428,"type":"binary-expr","locations":[{"start":{"line":428,"column":18},"end":{"line":428,"column":29}},{"start":{"line":428,"column":33},"end":{"line":428,"column":48}}]},"37":{"line":436,"type":"if","locations":[{"start":{"line":436,"column":4},"end":{"line":436,"column":4}},{"start":{"line":436,"column":4},"end":{"line":436,"column":4}}]},"38":{"line":446,"type":"if","locations":[{"start":{"line":446,"column":4},"end":{"line":446,"column":4}},{"start":{"line":446,"column":4},"end":{"line":446,"column":4}}]},"39":{"line":450,"type":"binary-expr","locations":[{"start":{"line":450,"column":15},"end":{"line":450,"column":31}},{"start":{"line":450,"column":35},"end":{"line":450,"column":48}}]},"40":{"line":452,"type":"if","locations":[{"start":{"line":452,"column":4},"end":{"line":452,"column":4}},{"start":{"line":452,"column":4},"end":{"line":452,"column":4}}]},"41":{"line":459,"type":"if","locations":[{"start":{"line":459,"column":8},"end":{"line":459,"column":8}},{"start":{"line":459,"column":8},"end":{"line":459,"column":8}}]},"42":{"line":490,"type":"if","locations":[{"start":{"line":490,"column":4},"end":{"line":490,"column":4}},{"start":{"line":490,"column":4},"end":{"line":490,"column":4}}]},"43":{"line":497,"type":"if","locations":[{"start":{"line":497,"column":8},"end":{"line":497,"column":8}},{"start":{"line":497,"column":8},"end":{"line":497,"column":8}}]},"44":{"line":515,"type":"if","locations":[{"start":{"line":515,"column":8},"end":{"line":515,"column":8}},{"start":{"line":515,"column":8},"end":{"line":515,"column":8}}]},"45":{"line":527,"type":"if","locations":[{"start":{"line":527,"column":4},"end":{"line":527,"column":4}},{"start":{"line":527,"column":4},"end":{"line":527,"column":4}}]},"46":{"line":550,"type":"if","locations":[{"start":{"line":550,"column":8},"end":{"line":550,"column":8}},{"start":{"line":550,"column":8},"end":{"line":550,"column":8}}]},"47":{"line":556,"type":"if","locations":[{"start":{"line":556,"column":8},"end":{"line":556,"column":8}},{"start":{"line":556,"column":8},"end":{"line":556,"column":8}}]},"48":{"line":568,"type":"if","locations":[{"start":{"line":568,"column":8},"end":{"line":568,"column":8}},{"start":{"line":568,"column":8},"end":{"line":568,"column":8}}]},"49":{"line":610,"type":"if","locations":[{"start":{"line":610,"column":8},"end":{"line":610,"column":8}},{"start":{"line":610,"column":8},"end":{"line":610,"column":8}}]},"50":{"line":615,"type":"cond-expr","locations":[{"start":{"line":615,"column":23},"end":{"line":615,"column":28}},{"start":{"line":615,"column":31},"end":{"line":615,"column":35}}]},"51":{"line":622,"type":"if","locations":[{"start":{"line":622,"column":8},"end":{"line":622,"column":8}},{"start":{"line":622,"column":8},"end":{"line":622,"column":8}}]},"52":{"line":629,"type":"cond-expr","locations":[{"start":{"line":629,"column":29},"end":{"line":629,"column":39}},{"start":{"line":629,"column":42},"end":{"line":629,"column":59}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var bufrw = require('bufrw');","var http = require('http');","var extend = require('xtend');","var extendInto = require('xtend/mutable');","var errors = require('../errors.js');","var stat = require('../stat-tags.js');","var getRawBody = require('raw-body');","","var headerRW = bufrw.Repeat(bufrw.UInt16BE,","    bufrw.Series(bufrw.str2, bufrw.str2));","","module.exports = TChannelHTTP;","","function HTTPReqArg2(method, url, headerPairs) {","    var self = this;","    self.method = method || '';","    self.url = url || '';","    self.headerPairs = headerPairs || [];","}","","HTTPReqArg2.RW = bufrw.Struct(HTTPReqArg2, {","    method: bufrw.str1,   // method~1","    url: bufrw.strn,      // url~N","    headerPairs: headerRW // numHeaders:2 (headerName~2 headerValue~2){numHeaders}","});","","function HTTPResArg2(statusCode, message, headerPairs) {","    var self = this;","    self.statusCode = statusCode || 0;","    self.message = message || '';","    self.headerPairs = headerPairs || [];","}","","HTTPResArg2.RW = bufrw.Struct(HTTPResArg2, {","    statusCode: bufrw.UInt16BE, // statusCode:2","    message: bufrw.strn,        // message~N","    headerPairs: headerRW       // numHeaders:2 (headerName~2 headerValue~2){numHeaders}","});","","// per RFC2616","/*eslint-disable complexity*/","HTTPReqArg2.prototype.getHeaders =","HTTPResArg2.prototype.getHeaders =","function getHeaders() {","    var self = this;","    var headers = {};","    for (var i = 0; i < self.headerPairs.length; i++) {","        var pair = self.headerPairs[i];","        var key = pair[0];","        var val = pair[1];","        key = key.toLowerCase();","        switch (key) {","            case 'set-cookie':","                if (headers[key] !== undefined) {","                    headers[key].push(val);","                } else {","                    headers[key] = [val];","                }","                break;","            case 'content-type':","            case 'content-length':","            case 'user-agent':","            case 'referer':","            case 'host':","            case 'authorization':","            case 'proxy-authorization':","            case 'if-modified-since':","            case 'if-unmodified-since':","            case 'from':","            case 'location':","            case 'max-forwards':","                // drop duplicates","                if (headers[key] === undefined) {","                    headers[key] = val;","                }","                break;","            default:","                // make comma-separated list","                if (headers[key] !== undefined) {","                    headers[key] += ', ' + val;","                } else {","                    headers[key] = val;","                }","        }","    }","    return headers;","    /*eslint-enable complexity*/","};","","/*eslint-disable complexity*/","HTTPReqArg2.prototype.setHeaders =","HTTPResArg2.prototype.setHeaders =","function setHeaders(headers) {","    var self = this;","    self.headerPairs = [];","    var keys = Object.keys(headers);","    for (var i = 0; i < keys.length; i++) {","        var key = keys[i];","        var val = headers[key];","        switch (key) {","            case 'set-cookie':","                for (var j = 0; j < val.length; j++) {","                    self.headerPairs.push([key, val[j]]);","                }","                break;","            case 'content-type':","            case 'content-length':","            case 'user-agent':","            case 'referer':","            case 'host':","            case 'authorization':","            case 'proxy-authorization':","            case 'if-modified-since':","            case 'if-unmodified-since':","            case 'from':","            case 'location':","            case 'max-forwards':","                // no duplicates","                self.headerPairs.push([key, val]);","                break;","            default:","                // prase comma-separated list","                val = val.split(', ');","                for (var k = 0; k < val.length; k++) {","                    self.headerPairs.push([key, val[k]]);","                }","        }","    }","};","/*eslint-enable complexity*/","","function TChannelHTTP(options) {","    if (!(this instanceof TChannelHTTP)) {","        return new TChannelHTTP(options);","    }","    var self = this;","    if (options) {","        self.lbpool = options.lbpool;","    }","}","","/*eslint-disable max-statements*/","TChannelHTTP.prototype.sendRequest = function send(treq, hreq, start, options, callback) {","    var self = this;","    if (typeof options === 'function') {","        callback = options;","        options = null;","    }","","    var req;","    var arg2res;","","    var head = new HTTPReqArg2(hreq.method, hreq.url);","    head.setHeaders(hreq.headers);","","    var arg1 = ''; // TODO: left empty for now, could compute circuit names heuristically","    arg2res = bufrw.toBufferResult(HTTPReqArg2.RW, head);","    if (arg2res.err) {","        self.logger.error('Buffer write for arg2 failed', {","            error: arg2res.err","        });","        var toBufferErr = errors.HTTPReqArg2toBufferError(arg2res.err, {","            head: head","        });","        callback(toBufferErr, null, null);","        return null;","    }","    var arg2 = arg2res.value;","","    treq.headers.as = 'http';","    if (treq.streamed) {","        req = treq.sendStreams(arg1, arg2, hreq, onStreamResponse);","        self.channel.emitFastStat(","            'tchannel.http-handler.egress.request-build-latency',","            'timing',","            self.channel.timers.now() - start,","            new stat.HTTPHanlderBuildLatencyTags(","                treq.serviceName,","                treq.callerName,","                treq.streamed","            )","        );","        return req;","    }","    getRawBody(hreq, {","        length: hreq.headers['content-length'],","        limit: '20mb'","    }, onRawBody);","","    function onRawBody(err, body) {","        if (err) {","            callback(err, null, null, null);","            return err;","        }","        req = treq.send(arg1, arg2, body, onResponse);","        self.channel.emitFastStat(","            'tchannel.http-handler.egress.request-build-latency',","            'timing',","            self.channel.timers.now() - start,","            new stat.HTTPHanlderBuildLatencyTags(","                treq.serviceName,","                treq.callerName,","                treq.streamed","            )","        );","        return req;","    }","","    function onResponse(err, tres, res1, res2) {","        var now = self.channel.timers.now();","        if (err) {","            callback(err, null, null, null);","        } else {","            readArg2(tres, res1, now);","        }","    }","","    function onStreamResponse(err1, treq2, tres) {","        var now = self.channel.timers.now();","        if (err1) {","            callback(err1, null, null, null);","        } else if (tres.streamed) {","            tres.arg2.onValueReady(arg2Ready);","        } else {","            arg2Ready(null, tres.arg2);","        }","        function arg2Ready(err2, res1) {","            if (err2) {","                callback(err2, null, null, null);","            } else {","                readArg2(tres, res1, now);","            }","        }","    }","","    function readArg2(tres, res1, start2) {","        arg2res = bufrw.fromBufferResult(HTTPResArg2.RW, res1);","        if (arg2res.err) {","            self.logger.error('Buffer read for arg2 failed', {","                error: arg2res.err","            });","            var fromBufferErr = errors.HTTPReqArg2fromBufferError(arg2res.err, {","                arg2: res1","            });","            callback(fromBufferErr, null, null, null);","        } else {","            if (tres.streamed) {","                callback(null, arg2res.value, tres.arg3, null);","            } else {","                callback(null, arg2res.value, null, tres.arg3);","            }","            self.channel.emitFastStat(","                'tchannel.http-handler.egress.response-build-latency',","                'timing',","                self.channel.timers.now() - start2,","                new stat.HTTPHanlderBuildLatencyTags(","                    treq.serviceName,","                    treq.callerName,","                    treq.streamed","                )","            );","        }","    }","};","/*eslint-enable max-statements*/","","TChannelHTTP.prototype.sendResponse = function send(buildResponse, hres, body, statTags, callback) {","    // TODO: map http response codes onto error frames and application errors","    var self = this;","    var start = self.channel.timers.now();","    var head = new HTTPResArg2(hres.statusCode, hres.statusMessage);","    head.setHeaders(hres.headers);","    var arg2res = bufrw.toBufferResult(HTTPResArg2.RW, head);","    if (arg2res.err) {","        self.logger.error('Buffer write for arg2 failed', {","            error: arg2res.err","        });","        var toBufferErr = errors.HTTPResArg2toBufferError(arg2res.err, {","            head: head","        });","        callback(toBufferErr);","        return null;","    }","    var arg2 = arg2res.value;","    if (body) {","        buildResponse({","            streamed: false,","            headers: {","                as: 'http'","            }","        }).sendOk(arg2, body);","        callback(null);","        self.channel.emitFastStat(","            'tchannel.http-handler.ingress.response-build-latency',","            'timing',","            self.channel.timers.now() - start,","            statTags","        );","        return null;","    }","","    var res = buildResponse({","        streamed: true,","        headers: {","            as: 'http'","        }","    }).sendStreams(arg2, hres, callback);","    self.channel.emitFastStat(","        'tchannel.http-handler.ingress.response-build-latency',","        'timing',","        self.channel.timers.now() - start,","        statTags","    );","    return res;","};","","TChannelHTTP.prototype.setHandler = function register(tchannel, handler) {","    var self = this;","    self.logger = tchannel.logger;","    self.channel = tchannel;","    tchannel.handler = new AsHTTPHandler(self, tchannel, handler);","    return tchannel.handler;","};","","TChannelHTTP.prototype.forwardToTChannel = function forwardToTChannel(tchannel, hreq, hres, requestOptions, callback) {","    var self = this;","    self.channel = self.channel || tchannel;","    self.logger = self.logger || tchannel.logger;","    var start = self.channel.timers.now();","    var treq;","    // TODO: more http state machine integration","","    var options = tchannel.requestOptions(extendInto({","        hasNoParent: true","    }, requestOptions));","","    if (!options.streamed) {","        treq = tchannel.request(options);","        return self.sendRequest(treq, hreq, start, forwarded);","    }","","    var peer = tchannel.peers.choosePeer(null);","    if (!peer) {","        self._sendHTTPError(hres, errors.NoPeerAvailable());","        callback(errors.NoPeerAvailable());","        return null;","    }","","    peer.waitForIdentified(onIdentified);","    function onIdentified(err) {","        if (err) {","            self._sendHTTPError(hres, err);","            callback(err);","            return null;","        }","","        options.host = peer.hostPort;","        treq = tchannel.request(options);","        self.sendRequest(treq, hreq, start, forwarded);","    }","","    function forwarded(err, head, bodyStream, bodyArg) {","        if (err) {","            self._sendHTTPError(hres, err);","        } else {","            var headers = head.getHeaders();","            // work-arround a node issue where default statusMessage is missing","            // from the client side when server side set as optional parameter","            if (head.message) {","                hres.writeHead(head.statusCode, head.message, headers);","            } else {","                hres.writeHead(head.statusCode, headers);","            }","            if (bodyStream !== null) {","                if (bodyStream._readableState.ended) {","                    bodyStream.onValueReady(function onValue(err2, buffer) {","                        if (err2) {","                            return self._sendHTTPError(hres, err2);","                        }","","                        hres.write(buffer);","                        hres.end();","                    });","                } else {","                    bodyStream.pipe(hres);","                }","            } else {","                hres.end(bodyArg);","            }","        }","        callback(err);","    }","};","","TChannelHTTP.prototype._sendHTTPError = function _sendHTTPError(hres, error) {","    hres.setHeader('Content-Type', 'text/plain');","    var codeName = errors.classify(error);","    var httpInfo = errors.toHTTPCode(codeName);","","    hres.writeHead(httpInfo.statusCode, httpInfo.statusMessage);","    hres.end(error.message);","};","","TChannelHTTP.prototype.forwardToHTTP = function forwardToHTTP(tchannel, options, inreq, outres, callback) {","    var self = this;","    self.logger = self.logger || tchannel.logger;","    var headers = inreq.head.getHeaders();","    options = extend(options, {","        method: inreq.head.method,","        path: inreq.head.url,","        headers: headers,","        keepAlive: true","    });","    if (self.lbpool) {","        self._forwardToLBPool(options, inreq, outres, callback);","    } else {","        self._forwardToNodeHTTP(options, inreq, outres, callback);","    }","};","","TChannelHTTP.prototype._forwardToLBPool = function _forwardToLBPool(options, inreq, outres, callback) {","    var self = this;","    var start = self.channel.timers.now();","    if (!options) {","        options = {};","    }","    options.encoding = null;","    var data = inreq.bodyStream || inreq.bodyArg; // lb_pool likes polymorphism","","    if (inreq.bodyArg) {","        delete options.headers['transfer-encoding'];","    }","","    self.lbpool.request(options, data, onResponse);","","    function onResponse(err, res, body) {","        if (err) {","            self.logger.warn('Forwarding to LBPool failed', {","                error: err","            });","            outres.sendError(err);","            callback(err);","            return;","        }","        outres.sendResponse(res, body);","        callback(null);","        self.channel.emitFastStat(","            'tchannel.http-handler.ingress.service-call-latency',","            'timing',","            self.channel.timers.now() - start,","            new stat.HTTPHanlderBuildLatencyTags(","                inreq.serviceName,","                inreq.callerName,","                false","            )","        );","    }","};","","TChannelHTTP.prototype._forwardToNodeHTTP = function _forwardToNodeHTTP(options, inreq, outres, callback) {","    var self = this;","    var start = self.channel.timers.now();","    var sent = false;","    var outreq = http.request(options, onResponse);","    outreq.on('error', onError);","    // TODO: more http state machine integration","","    if (inreq.bodyStream !== null) {","        inreq.bodyStream.pipe(outreq);","    } else {","        outreq.end(inreq.bodyArg);","    }","","    function onResponse(inres) {","        if (!sent) {","            sent = true;","            outres.sendResponse(inres);","            callback(null);","            self.channel.emitFastStat(","                'tchannel.http-handler.ingress.service-call-latency',","                'timing',","                self.channel.timers.now() - start,","                new stat.HTTPHanlderBuildLatencyTags(","                    inreq.serviceName,","                    inreq.callerName,","                    true","                )","            );","        }","    }","","    function onError(err) {","        if (!sent) {","            sent = true;","            self.logger.warn('Forwarding to HTTP failed', {","                error: err","            });","            outres.sendError(err);","            callback(err);","        }","    }","};","","function AsHTTPHandler(asHTTP, channel, handler) {","    if (typeof handler === 'function') {","        handler = {handleRequest: handler}; // TODO: explicate type?","    }","    var self = this;","    self.asHTTP = asHTTP;","    self.channel = channel;","    self.handler = handler;","    self.logger = self.channel.logger;","}","","AsHTTPHandler.prototype.handleRequest = function handleRequest(req, buildResponse) {","    var self = this;","    var start = self.channel.timers.now();","    // TODO: explicate type","    var hreq = {","        url: req.arg1,","        head: null,","        bodyArg: null,","        bodyStream: null","    };","    req.withArg2(onArg2);","","    function onArg2(err, arg2) {","        if (err) {","            sendError(err);","            return;","        }","","        var arg2res = bufrw.fromBufferResult(HTTPReqArg2.RW, arg2);","        if (arg2res.err) {","            self.logger.error('Buffer read for arg2 failed', {","                error: arg2res.err","            });","            var fromBufferErr = errors.HTTPResArg2fromBufferError(arg2res.err, {","                arg2: arg2","            });","            sendError(fromBufferErr);","            return;","        }","","        hreq.head = arg2res.value;","        if (req.streamed) {","            hreq.bodyStream = req.arg3;","        } else {","            hreq.bodyArg = req.arg3;","        }","","        handle();","    }","","    var sent = false;","    req.errorEvent.on(onError);","    function onError(err) {","        sent = true;","        self.logger.warn('Handling request failed', {","            error: err","        });","    }","","    function handle() {","        // TODO: explicate type","        var hres = {","            head: new HTTPResArg2(200, 'Ok'),","            sendError: sendError,","            sendResponse: sendResponse","        };","","        self.channel.emitFastStat(","            'tchannel.http-handler.ingress.request-build-latency',","            'timing',","            self.channel.timers.now() - start,","            new stat.HTTPHanlderBuildLatencyTags(","                req.serviceName,","                req.callerName,","                req.streamed","            )","        );","        hreq.serviceName = req.serviceName;","        hreq.callerName = req.callerName;","        self.handler.handleRequest(hreq, hres);","    }","","    function sendResponse(hres, body) {","        if (!sent) {","            sent = true;","            var statsTag = new stat.HTTPHanlderBuildLatencyTags(","                req.serviceName,","                req.callerName,","                body ? false : true","            );","            self.asHTTP.sendResponse(buildResponse, hres, body, statsTag, sendError);","        }","    }","","    function sendError(err) {","        if (!sent) {","            sent = true;","            self.logger.warn('Handling request failed', {","                error: err","            });","            var codeString = errors.classify(err);","            buildResponse().sendError(","                codeString ? codeString : 'UnexpectedError', err.message);","        }","    }","};",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"31":1,"34":1,"36":1,"37":0,"38":0,"39":0,"40":0,"43":1,"49":1,"50":0,"51":0,"52":0,"53":0,"56":1,"64":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"76":0,"77":0,"79":0,"81":0,"95":0,"96":0,"98":0,"101":0,"102":0,"104":0,"108":0,"113":1,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"125":0,"127":0,"141":0,"142":0,"145":0,"146":0,"147":0,"154":1,"155":0,"156":0,"158":0,"159":0,"160":0,"165":1,"166":0,"167":0,"168":0,"169":0,"172":0,"173":0,"175":0,"176":0,"178":0,"179":0,"180":0,"181":0,"184":0,"187":0,"188":0,"190":0,"192":0,"193":0,"194":0,"195":0,"205":0,"207":0,"212":1,"213":0,"214":0,"215":0,"217":0,"218":0,"228":0,"231":1,"232":0,"233":0,"234":0,"236":0,"240":1,"241":0,"242":0,"243":0,"244":0,"245":0,"247":0,"249":1,"250":0,"251":0,"253":0,"258":1,"259":0,"260":0,"261":0,"264":0,"267":0,"269":0,"270":0,"272":0,"274":0,"289":1,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"300":0,"303":0,"304":0,"306":0,"307":0,"308":0,"314":0,"315":0,"321":0,"324":0,"330":0,"336":0,"339":1,"340":0,"341":0,"342":0,"343":0,"344":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":0,"355":0,"359":0,"360":0,"361":0,"364":0,"365":0,"366":0,"367":0,"368":0,"371":0,"372":1,"373":0,"374":0,"375":0,"376":0,"379":0,"380":0,"381":0,"384":1,"385":0,"386":0,"388":0,"391":0,"392":0,"394":0,"396":0,"397":0,"398":0,"399":0,"400":0,"403":0,"404":0,"407":0,"410":0,"413":0,"417":1,"418":0,"419":0,"420":0,"422":0,"423":0,"426":1,"427":0,"428":0,"429":0,"430":0,"436":0,"437":0,"439":0,"443":1,"444":0,"445":0,"446":0,"447":0,"449":0,"450":0,"452":0,"453":0,"456":0,"458":1,"459":0,"460":0,"463":0,"464":0,"465":0,"467":0,"468":0,"469":0,"482":1,"483":0,"484":0,"485":0,"486":0,"487":0,"490":0,"491":0,"493":0,"496":1,"497":0,"498":0,"499":0,"500":0,"501":0,"514":1,"515":0,"516":0,"517":0,"520":0,"521":0,"526":1,"527":0,"528":0,"530":0,"531":0,"532":0,"533":0,"534":0,"537":1,"538":0,"539":0,"541":0,"547":0,"549":1,"550":0,"551":0,"552":0,"555":0,"556":0,"557":0,"560":0,"563":0,"564":0,"567":0,"568":0,"569":0,"571":0,"574":0,"577":0,"578":0,"579":1,"580":0,"581":0,"586":1,"588":0,"594":0,"604":0,"605":0,"606":0,"609":1,"610":0,"611":0,"612":0,"617":0,"621":1,"622":0,"623":0,"624":0,"627":0,"628":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/bench_server.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/bench_server.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":1,"86":0,"87":1,"88":0,"89":0,"90":1,"91":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"BenchServer","line":61,"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":27}}},"2":{"name":"setupReporter","line":97,"loc":{"start":{"line":97,"column":38},"end":{"line":97,"column":63}}},"3":{"name":"report","line":109,"loc":{"start":{"line":109,"column":34},"end":{"line":109,"column":56}}},"4":{"name":"registerEndpoints","line":116,"loc":{"start":{"line":116,"column":42},"end":{"line":116,"column":71}}},"5":{"name":"onSet","line":140,"loc":{"start":{"line":140,"column":4},"end":{"line":140,"column":41}}},"6":{"name":"onGet","line":148,"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":41}}},"7":{"name":"onPing","line":160,"loc":{"start":{"line":160,"column":0},"end":{"line":160,"column":26}}},"8":{"name":"onBad","line":165,"loc":{"start":{"line":165,"column":0},"end":{"line":165,"column":37}}},"9":{"name":"listen","line":170,"loc":{"start":{"line":170,"column":31},"end":{"line":170,"column":49}}},"10":{"name":"parseOverhead","line":183,"loc":{"start":{"line":183,"column":0},"end":{"line":183,"column":28}}},"11":{"name":"withDelay","line":191,"loc":{"start":{"line":191,"column":0},"end":{"line":191,"column":35}}},"12":{"name":"delayedHandler","line":194,"loc":{"start":{"line":194,"column":4},"end":{"line":194,"column":50}}},"13":{"name":"runHandler","line":197,"loc":{"start":{"line":197,"column":8},"end":{"line":197,"column":30}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":49}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":56}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":31}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":43}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":46}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":52}},"8":{"start":{"line":32,"column":0},"end":{"line":32,"column":37}},"9":{"start":{"line":33,"column":0},"end":{"line":33,"column":49}},"10":{"start":{"line":35,"column":0},"end":{"line":41,"column":3}},"11":{"start":{"line":43,"column":0},"end":{"line":43,"column":30}},"12":{"start":{"line":45,"column":0},"end":{"line":45,"column":33}},"13":{"start":{"line":46,"column":0},"end":{"line":46,"column":43}},"14":{"start":{"line":48,"column":0},"end":{"line":48,"column":18}},"15":{"start":{"line":49,"column":0},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":0},"end":{"line":50,"column":47}},"17":{"start":{"line":51,"column":0},"end":{"line":51,"column":47}},"18":{"start":{"line":53,"column":0},"end":{"line":53,"column":47}},"19":{"start":{"line":54,"column":0},"end":{"line":56,"column":1}},"20":{"start":{"line":55,"column":4},"end":{"line":55,"column":65}},"21":{"start":{"line":58,"column":0},"end":{"line":58,"column":45}},"22":{"start":{"line":59,"column":0},"end":{"line":59,"column":47}},"23":{"start":{"line":61,"column":0},"end":{"line":95,"column":1}},"24":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"25":{"start":{"line":63,"column":8},"end":{"line":63,"column":37}},"26":{"start":{"line":66,"column":4},"end":{"line":66,"column":20}},"27":{"start":{"line":68,"column":4},"end":{"line":68,"column":21}},"28":{"start":{"line":69,"column":4},"end":{"line":81,"column":7}},"29":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"30":{"start":{"line":84,"column":8},"end":{"line":84,"column":29}},"31":{"start":{"line":87,"column":4},"end":{"line":90,"column":7}},"32":{"start":{"line":92,"column":4},"end":{"line":92,"column":19}},"33":{"start":{"line":94,"column":4},"end":{"line":94,"column":29}},"34":{"start":{"line":97,"column":0},"end":{"line":114,"column":2}},"35":{"start":{"line":98,"column":4},"end":{"line":98,"column":20}},"36":{"start":{"line":100,"column":4},"end":{"line":107,"column":7}},"37":{"start":{"line":109,"column":4},"end":{"line":113,"column":6}},"38":{"start":{"line":110,"column":8},"end":{"line":112,"column":11}},"39":{"start":{"line":116,"column":0},"end":{"line":158,"column":2}},"40":{"start":{"line":117,"column":4},"end":{"line":117,"column":20}},"41":{"start":{"line":119,"column":4},"end":{"line":119,"column":30}},"42":{"start":{"line":120,"column":4},"end":{"line":120,"column":28}},"43":{"start":{"line":121,"column":4},"end":{"line":121,"column":28}},"44":{"start":{"line":123,"column":4},"end":{"line":125,"column":5}},"45":{"start":{"line":124,"column":8},"end":{"line":124,"column":56}},"46":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"47":{"start":{"line":127,"column":8},"end":{"line":127,"column":53}},"48":{"start":{"line":129,"column":4},"end":{"line":131,"column":5}},"49":{"start":{"line":130,"column":8},"end":{"line":130,"column":53}},"50":{"start":{"line":133,"column":4},"end":{"line":133,"column":51}},"51":{"start":{"line":134,"column":4},"end":{"line":134,"column":49}},"52":{"start":{"line":135,"column":4},"end":{"line":135,"column":49}},"53":{"start":{"line":137,"column":4},"end":{"line":137,"column":47}},"54":{"start":{"line":138,"column":4},"end":{"line":138,"column":47}},"55":{"start":{"line":140,"column":4},"end":{"line":146,"column":5}},"56":{"start":{"line":141,"column":8},"end":{"line":141,"column":40}},"57":{"start":{"line":142,"column":8},"end":{"line":142,"column":40}},"58":{"start":{"line":143,"column":8},"end":{"line":143,"column":29}},"59":{"start":{"line":144,"column":8},"end":{"line":144,"column":31}},"60":{"start":{"line":145,"column":8},"end":{"line":145,"column":38}},"61":{"start":{"line":148,"column":4},"end":{"line":157,"column":5}},"62":{"start":{"line":149,"column":8},"end":{"line":149,"column":40}},"63":{"start":{"line":150,"column":8},"end":{"line":150,"column":31}},"64":{"start":{"line":151,"column":8},"end":{"line":156,"column":9}},"65":{"start":{"line":152,"column":12},"end":{"line":152,"column":37}},"66":{"start":{"line":153,"column":12},"end":{"line":153,"column":53}},"67":{"start":{"line":155,"column":12},"end":{"line":155,"column":48}},"68":{"start":{"line":160,"column":0},"end":{"line":163,"column":1}},"69":{"start":{"line":161,"column":4},"end":{"line":161,"column":27}},"70":{"start":{"line":162,"column":4},"end":{"line":162,"column":29}},"71":{"start":{"line":165,"column":0},"end":{"line":168,"column":1}},"72":{"start":{"line":166,"column":4},"end":{"line":166,"column":27}},"73":{"start":{"line":167,"column":4},"end":{"line":167,"column":47}},"74":{"start":{"line":170,"column":0},"end":{"line":174,"column":2}},"75":{"start":{"line":171,"column":4},"end":{"line":171,"column":20}},"76":{"start":{"line":173,"column":4},"end":{"line":173,"column":47}},"77":{"start":{"line":176,"column":0},"end":{"line":181,"column":1}},"78":{"start":{"line":177,"column":4},"end":{"line":177,"column":43}},"79":{"start":{"line":179,"column":4},"end":{"line":179,"column":40}},"80":{"start":{"line":180,"column":4},"end":{"line":180,"column":25}},"81":{"start":{"line":183,"column":0},"end":{"line":189,"column":1}},"82":{"start":{"line":184,"column":4},"end":{"line":188,"column":5}},"83":{"start":{"line":185,"column":8},"end":{"line":185,"column":20}},"84":{"start":{"line":187,"column":8},"end":{"line":187,"column":44}},"85":{"start":{"line":191,"column":0},"end":{"line":201,"column":1}},"86":{"start":{"line":192,"column":4},"end":{"line":192,"column":26}},"87":{"start":{"line":194,"column":4},"end":{"line":200,"column":5}},"88":{"start":{"line":195,"column":8},"end":{"line":195,"column":24}},"89":{"start":{"line":196,"column":8},"end":{"line":196,"column":34}},"90":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"91":{"start":{"line":198,"column":12},"end":{"line":198,"column":42}}},"branchMap":{"1":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":0},"end":{"line":54,"column":0}},{"start":{"line":54,"column":0},"end":{"line":54,"column":0}}]},"2":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"3":{"line":75,"type":"cond-expr","locations":[{"start":{"line":75,"column":34},"end":{"line":75,"column":35}},{"start":{"line":75,"column":38},"end":{"line":75,"column":42}}]},"4":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"5":{"line":88,"type":"cond-expr","locations":[{"start":{"line":88,"column":34},"end":{"line":88,"column":35}},{"start":{"line":88,"column":38},"end":{"line":88,"column":42}}]},"6":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":4},"end":{"line":123,"column":4}},{"start":{"line":123,"column":4},"end":{"line":123,"column":4}}]},"7":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"8":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"9":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":8},"end":{"line":151,"column":8}},{"start":{"line":151,"column":8},"end":{"line":151,"column":8}}]},"10":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":4},"end":{"line":184,"column":4}},{"start":{"line":184,"column":4},"end":{"line":184,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = require('process');","process.title = 'nodejs-benchmarks-bench_server';","","var readBenchConfig = require('./read-bench-config.js');","var assert = require('assert');","var Statsd = require('uber-statsd-client');","var setTimeout = require('timers').setTimeout;","","var Reporter = require('../tcollector/reporter.js');","var TChannel = require('../channel');","var RandomSample = require('./random_sample.js');","","var argv = readBenchConfig({","    boolean: ['trace']","}, {","    pingOverhead: 'none',","    setOverhead: 'none',","    getOverhead: 'none'","});","","var SERVER_HOST = '127.0.0.1';","","assert(argv.port, 'port needed');","assert(argv.instances, 'instances needed');","","var overhead = {};","overhead.ping = parseOverhead(argv.pingOverhead);","overhead.set = parseOverhead(argv.setOverhead);","overhead.get = parseOverhead(argv.getOverhead);","","assert('trace' in argv, 'trace option needed');","if (argv.trace) {","    assert(argv.traceRelayHostPort, 'traceRelayHostPort needed');","}","","var INSTANCES = parseInt(argv.instances, 10);","var STATS_PORT = parseInt(argv.statsdPort, 10);","","function BenchServer(port) {","    if (!(this instanceof BenchServer)) {","        return new BenchServer(port);","    }","","    var self = this;","","    self.port = port;","    self.server = TChannel({","        statTags: {","            app: 'my-server'","        },","        trace: true,","        logger: require('debug-logtron')('server'),","        traceSample: argv.trace ? 1 : 0.01,","        emitConnectionMetrics: false,","        statsd: new Statsd({","            host: '127.0.0.1',","            port: STATS_PORT","        })","    });","","    if (argv.trace) {","        self.setupReporter();","    }","","    self.serverChan = self.server.makeSubChannel({","        traceSample: argv.trace ? 1 : 0.01,","        serviceName: 'benchmark'","    });","","    self.keys = {};","","    self.registerEndpoints();","}","","BenchServer.prototype.setupReporter = function setupReporter() {","    var self = this;","","    var reporter = Reporter({","        channel: self.server.makeSubChannel({","            serviceName: 'tcollector',","            peers: [argv.traceRelayHostPort]","        }),","        logger: self.server.logger,","        callerName: 'my-server'","    });","","    self.server.tracer.reporter = function report(span) {","        reporter.report(span, {","            timeout: 10 * 1000","        });","    };","};","","BenchServer.prototype.registerEndpoints = function registerEndpoints() {","    var self = this;","","    var pingEndpoint = onPing;","    var setEndpoint = onSet;","    var getEndpoint = onGet;","","    if (overhead.ping) {","        pingEndpoint = withDelay(onPing, overhead.ping);","    }","    if (overhead.set) {","        setEndpoint = withDelay(onSet, overhead.set);","    }","    if (overhead.get) {","        getEndpoint = withDelay(onGet, overhead.get);","    }","","    self.serverChan.register('ping', pingEndpoint);","    self.serverChan.register('set', setEndpoint);","    self.serverChan.register('get', getEndpoint);","","    self.serverChan.register('bad_set', onBad);","    self.serverChan.register('bad_get', onBad);","","    function onSet(req, res, arg2, arg3) {","        var key = arg2.toString('utf8');","        var val = arg3.toString('utf8');","        self.keys[key] = val;","        res.headers.as = 'raw';","        res.sendOk('ok', 'really ok');","    }","","    function onGet(req, res, arg2, arg3) {","        var key = arg2.toString('utf8');","        res.headers.as = 'raw';","        if (self.keys[key] !== undefined) {","            var val = self.keys[key];","            res.sendOk(val.length.toString(10), val);","        } else {","            res.sendNotOk('key not found', key);","        }","    }","};","","function onPing(req, res) {","    res.headers.as = 'raw';","    res.sendOk('pong', null);","}","","function onBad(req, res, arg2, arg3) {","    res.headers.as = 'raw';","    res.sendError('BadRequest', 'parse error');","}","","BenchServer.prototype.listen = function listen() {","    var self = this;","","    self.server.listen(self.port, SERVER_HOST);","};","","for (var i = 0; i < INSTANCES; i++) {","    var port = parseInt(argv.port, 10) + i;","","    var benchServer = BenchServer(port);","    benchServer.listen();","}","","function parseOverhead(str) {","    if (str === 'none') {","        return null;","    } else {","        return RandomSample.fromString(str);","    }","}","","function withDelay(handler, delay) {","    return delayedHandler;","","    function delayedHandler(req, res, arg2, arg3) {","        var t = delay();","        setTimeout(runHandler, t);","        function runHandler() {","            handler(req, res, arg2, arg3);","        }","    }","}","","// setInterval(function () {","//  Object.keys(keys).forEach(function (key) {","//      console.log(key + '=' + keys[key].length + ' bytes');","//  });","// }, 1000);",""],"l":{"23":2,"24":2,"26":2,"27":2,"28":2,"29":0,"31":0,"32":0,"33":0,"35":0,"43":0,"45":0,"46":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"58":0,"59":0,"61":1,"62":0,"63":0,"66":0,"68":0,"69":0,"83":0,"84":0,"87":0,"92":0,"94":0,"97":0,"98":0,"100":0,"109":0,"110":0,"116":0,"117":0,"119":0,"120":0,"121":0,"123":0,"124":0,"126":0,"127":0,"129":0,"130":0,"133":0,"134":0,"135":0,"137":0,"138":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"155":0,"160":1,"161":0,"162":0,"165":1,"166":0,"167":0,"170":0,"171":0,"173":0,"176":0,"177":0,"179":0,"180":0,"183":1,"184":0,"185":0,"187":0,"191":1,"192":0,"194":1,"195":0,"196":0,"197":1,"198":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/read-bench-config.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/read-bench-config.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"readBenchConfig","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":49}}},"2":{"name":"loadConfigParts","line":63,"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":32}}},"3":{"name":"loadConfigPart","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":30}}},"4":{"name":"mergeConfig","line":82,"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":27}}},"5":{"name":"mergeRemoteConfig","line":94,"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":33}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":23}},"2":{"start":{"line":26,"column":0},"end":{"line":26,"column":36}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":27}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":71}},"6":{"start":{"line":32,"column":0},"end":{"line":32,"column":33}},"7":{"start":{"line":45,"column":0},"end":{"line":61,"column":1}},"8":{"start":{"line":46,"column":4},"end":{"line":46,"column":30}},"9":{"start":{"line":47,"column":4},"end":{"line":50,"column":5}},"10":{"start":{"line":48,"column":8},"end":{"line":48,"column":69}},"11":{"start":{"line":49,"column":8},"end":{"line":49,"column":69}},"12":{"start":{"line":51,"column":4},"end":{"line":58,"column":5}},"13":{"start":{"line":52,"column":8},"end":{"line":52,"column":72}},"14":{"start":{"line":53,"column":8},"end":{"line":56,"column":9}},"15":{"start":{"line":54,"column":12},"end":{"line":54,"column":46}},"16":{"start":{"line":55,"column":12},"end":{"line":55,"column":79}},"17":{"start":{"line":57,"column":8},"end":{"line":57,"column":36}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":77}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":16}},"20":{"start":{"line":63,"column":0},"end":{"line":71,"column":1}},"21":{"start":{"line":64,"column":4},"end":{"line":64,"column":18}},"22":{"start":{"line":65,"column":4},"end":{"line":69,"column":5}},"23":{"start":{"line":66,"column":8},"end":{"line":66,"column":28}},"24":{"start":{"line":67,"column":8},"end":{"line":67,"column":42}},"25":{"start":{"line":68,"column":8},"end":{"line":68,"column":59}},"26":{"start":{"line":70,"column":4},"end":{"line":70,"column":16}},"27":{"start":{"line":73,"column":0},"end":{"line":80,"column":1}},"28":{"start":{"line":74,"column":4},"end":{"line":74,"column":49}},"29":{"start":{"line":75,"column":4},"end":{"line":78,"column":5}},"30":{"start":{"line":76,"column":8},"end":{"line":76,"column":74}},"31":{"start":{"line":77,"column":8},"end":{"line":77,"column":62}},"32":{"start":{"line":79,"column":4},"end":{"line":79,"column":16}},"33":{"start":{"line":82,"column":0},"end":{"line":92,"column":1}},"34":{"start":{"line":83,"column":4},"end":{"line":83,"column":71}},"35":{"start":{"line":84,"column":4},"end":{"line":90,"column":5}},"36":{"start":{"line":85,"column":8},"end":{"line":89,"column":9}},"37":{"start":{"line":86,"column":12},"end":{"line":88,"column":13}},"38":{"start":{"line":87,"column":16},"end":{"line":87,"column":32}},"39":{"start":{"line":91,"column":4},"end":{"line":91,"column":13}},"40":{"start":{"line":94,"column":0},"end":{"line":125,"column":1}},"41":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"42":{"start":{"line":96,"column":8},"end":{"line":96,"column":23}},"43":{"start":{"line":99,"column":4},"end":{"line":101,"column":5}},"44":{"start":{"line":100,"column":8},"end":{"line":100,"column":17}},"45":{"start":{"line":103,"column":4},"end":{"line":103,"column":15}},"46":{"start":{"line":104,"column":4},"end":{"line":104,"column":10}},"47":{"start":{"line":105,"column":4},"end":{"line":105,"column":13}},"48":{"start":{"line":106,"column":4},"end":{"line":106,"column":18}},"49":{"start":{"line":108,"column":4},"end":{"line":114,"column":5}},"50":{"start":{"line":109,"column":8},"end":{"line":109,"column":20}},"51":{"start":{"line":110,"column":8},"end":{"line":113,"column":9}},"52":{"start":{"line":111,"column":12},"end":{"line":111,"column":34}},"53":{"start":{"line":112,"column":12},"end":{"line":112,"column":25}},"54":{"start":{"line":116,"column":4},"end":{"line":122,"column":5}},"55":{"start":{"line":117,"column":8},"end":{"line":117,"column":20}},"56":{"start":{"line":118,"column":8},"end":{"line":121,"column":9}},"57":{"start":{"line":119,"column":12},"end":{"line":119,"column":34}},"58":{"start":{"line":120,"column":12},"end":{"line":120,"column":25}},"59":{"start":{"line":124,"column":4},"end":{"line":124,"column":13}}},"branchMap":{"1":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":15},"end":{"line":46,"column":23}},{"start":{"line":46,"column":27},"end":{"line":46,"column":29}}]},"2":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"3":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":51,"column":4}},{"start":{"line":51,"column":4},"end":{"line":51,"column":4}}]},"4":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":20}},{"start":{"line":51,"column":24},"end":{"line":51,"column":44}}]},"5":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":18},"end":{"line":52,"column":39}},{"start":{"line":52,"column":44},"end":{"line":52,"column":70}}]},"6":{"line":55,"type":"cond-expr","locations":[{"start":{"line":55,"column":49},"end":{"line":55,"column":66}},{"start":{"line":55,"column":69},"end":{"line":55,"column":78}}]},"7":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":49},"end":{"line":55,"column":57}},{"start":{"line":55,"column":61},"end":{"line":55,"column":66}}]},"8":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"9":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"10":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":86,"column":12}},{"start":{"line":86,"column":12},"end":{"line":86,"column":12}}]},"11":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"12":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":10}},{"start":{"line":95,"column":14},"end":{"line":95,"column":23}}]},"13":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":15},"end":{"line":96,"column":16}},{"start":{"line":96,"column":20},"end":{"line":96,"column":22}}]},"14":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"15":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":10}},{"start":{"line":99,"column":14},"end":{"line":99,"column":23}}]},"16":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":110,"column":8}},{"start":{"line":110,"column":8},"end":{"line":110,"column":8}}]},"17":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* eslint-disable no-console, no-process-env */","","var fs = require('fs');","var parseArgs = require('minimist');","var path = require('path');","var process = require('process');","","var extractPartsList = require('../lib/part-list.js').extractPartsList;","","module.exports = readBenchConfig;","","// TODO: use a topo-sorter to correctly resolve merge order, due to cases like:","//","// A extends C","// B extends C","//","// now say C sets foo => 1","//         A sets foo => 2","//","// then the order \"A,B\" will have the incorrect foo value of 1 since B","// inherited its parent, and then merged into A overriding it.","","function readBenchConfig(minimistOpts, defaults) {","    var opts = defaults || {};","    if (process.env.BENCH_CONFIG) {","        var configParts = extractPartsList(process.env.BENCH_CONFIG);","        opts = mergeConfig(opts, loadConfigParts(configParts.all()));","    }","    if (minimistOpts && minimistOpts.boolean) {","        var def = minimistOpts.defaults || (minimistOpts.defaults = {});","        for (var i = 0; i < minimistOpts.boolean.length; i++) {","            var key = minimistOpts.boolean[i];","            def[key] = opts[key] === undefined ? def[key] || false : opts[key];","        }","        delete minimistOpts.boolean;","    }","    opts = mergeConfig(opts, parseArgs(process.argv.slice(2), minimistOpts));","    return opts;","}","","function loadConfigParts(parts) {","    var opts = {};","    for (var i = 0; i < parts.length; i++) {","        var part = parts[i];","        var partPath = path.resolve(part);","        opts = mergeConfig(opts, loadConfigPart(partPath));","    }","    return opts;","}","","function loadConfigPart(part) {","    var data = JSON.parse(fs.readFileSync(part));","    if (data._extends) {","        var extendsPath = path.resolve(path.dirname(part), data._extends);","        data = mergeConfig(loadConfigPart(extendsPath), data);","    }","    return data;","}","","function mergeConfig(a, b) {","    a.remoteConfig = mergeRemoteConfig(a.remoteConfig, b.remoteConfig);","    for (var key in b) {","        if (b.hasOwnProperty(key)) {","            if (key !== 'remoteConfig') {","                a[key] = b[key];","            }","        }","    }","    return a;","}","","function mergeRemoteConfig(a, b) {","    if (!a || !a.length) {","        return b || [];","    }","","    if (!b || !b.length) {","        return a;","    }","","    var r = [];","    var i;","    var item;","    var seen = {};","","    for (i = 0; i < b.length; i++) {","        item = b[i];","        if (!seen[item.key]) {","            seen[item.key] = true;","            r.push(item);","        }","    }","","    for (i = 0; i < a.length; i++) {","        item = a[i];","        if (!seen[item.key]) {","            seen[item.key] = true;","            r.push(item);","        }","    }","","    return r;","}",""],"l":{"25":1,"26":1,"27":1,"28":1,"30":1,"32":1,"45":1,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"54":0,"55":0,"57":0,"59":0,"60":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"70":0,"73":1,"74":0,"75":0,"76":0,"77":0,"79":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"91":0,"94":1,"95":0,"96":0,"99":0,"100":0,"103":0,"104":0,"105":0,"106":0,"108":0,"109":0,"110":0,"111":0,"112":0,"116":0,"117":0,"118":0,"119":0,"120":0,"124":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/part-list.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/part-list.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":1,"46":0,"47":1,"48":0,"49":0,"50":1,"51":0,"52":1,"53":0,"54":1,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":1,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":1,"77":0,"78":0,"79":0,"80":0},"b":{"1":[0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"extractParts","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":27}}},"2":{"name":"eachPart","line":28,"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":45}}},"3":{"name":"extractPartsList","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":31}}},"4":{"name":"eachComponent","line":36,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":62}}},"5":{"name":"forEachSubstr","line":43,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":39}}},"6":{"name":"forEachPart","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":32}}},"7":{"name":"PartsList","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":25}}},"8":{"name":"partsListToString","line":93,"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":29}}},"9":{"name":"each","line":98,"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":18}}},"10":{"name":"Parts","line":104,"loc":{"start":{"line":104,"column":0},"end":{"line":104,"column":22}}},"11":{"name":"partsToString","line":110,"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":25}}},"12":{"name":"each","line":115,"loc":{"start":{"line":115,"column":0},"end":{"line":115,"column":18}}},"13":{"name":"buildPart","line":120,"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":40}}},"14":{"name":"eachSubPart","line":126,"loc":{"start":{"line":126,"column":18},"end":{"line":126,"column":44}}},"15":{"name":"Part","line":132,"loc":{"start":{"line":132,"column":0},"end":{"line":132,"column":30}}},"16":{"name":"partToString","line":139,"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":24}}},"17":{"name":"each","line":144,"loc":{"start":{"line":144,"column":0},"end":{"line":144,"column":18}}},"18":{"name":"allEach","line":159,"loc":{"start":{"line":159,"column":0},"end":{"line":159,"column":19}}},"19":{"name":"each","line":161,"loc":{"start":{"line":161,"column":14},"end":{"line":161,"column":34}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":43}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":51}},"3":{"start":{"line":26,"column":0},"end":{"line":32,"column":1}},"4":{"start":{"line":27,"column":4},"end":{"line":27,"column":19}},"5":{"start":{"line":28,"column":4},"end":{"line":30,"column":7}},"6":{"start":{"line":29,"column":8},"end":{"line":29,"column":25}},"7":{"start":{"line":31,"column":4},"end":{"line":31,"column":28}},"8":{"start":{"line":34,"column":0},"end":{"line":41,"column":1}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":18}},"10":{"start":{"line":36,"column":4},"end":{"line":39,"column":7}},"11":{"start":{"line":37,"column":8},"end":{"line":37,"column":44}},"12":{"start":{"line":38,"column":8},"end":{"line":38,"column":25}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":31}},"14":{"start":{"line":43,"column":0},"end":{"line":70,"column":1}},"15":{"start":{"line":44,"column":4},"end":{"line":44,"column":18}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":18}},"17":{"start":{"line":46,"column":4},"end":{"line":66,"column":5}},"18":{"start":{"line":47,"column":8},"end":{"line":65,"column":9}},"19":{"start":{"line":49,"column":16},"end":{"line":49,"column":24}},"20":{"start":{"line":50,"column":16},"end":{"line":50,"column":22}},"21":{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},"22":{"start":{"line":53,"column":20},"end":{"line":53,"column":30}},"23":{"start":{"line":55,"column":16},"end":{"line":55,"column":22}},"24":{"start":{"line":57,"column":16},"end":{"line":62,"column":17}},"25":{"start":{"line":58,"column":20},"end":{"line":60,"column":21}},"26":{"start":{"line":59,"column":24},"end":{"line":59,"column":50}},"27":{"start":{"line":61,"column":20},"end":{"line":61,"column":34}},"28":{"start":{"line":63,"column":16},"end":{"line":63,"column":22}},"29":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"30":{"start":{"line":68,"column":8},"end":{"line":68,"column":31}},"31":{"start":{"line":72,"column":0},"end":{"line":85,"column":1}},"32":{"start":{"line":73,"column":4},"end":{"line":73,"column":14}},"33":{"start":{"line":74,"column":4},"end":{"line":74,"column":27}},"34":{"start":{"line":75,"column":4},"end":{"line":75,"column":30}},"35":{"start":{"line":76,"column":4},"end":{"line":83,"column":5}},"36":{"start":{"line":77,"column":8},"end":{"line":77,"column":28}},"37":{"start":{"line":78,"column":8},"end":{"line":78,"column":37}},"38":{"start":{"line":79,"column":8},"end":{"line":79,"column":41}},"39":{"start":{"line":80,"column":8},"end":{"line":80,"column":39}},"40":{"start":{"line":81,"column":8},"end":{"line":81,"column":32}},"41":{"start":{"line":82,"column":8},"end":{"line":82,"column":30}},"42":{"start":{"line":84,"column":4},"end":{"line":84,"column":39}},"43":{"start":{"line":87,"column":0},"end":{"line":89,"column":1}},"44":{"start":{"line":88,"column":4},"end":{"line":88,"column":21}},"45":{"start":{"line":91,"column":0},"end":{"line":95,"column":2}},"46":{"start":{"line":94,"column":4},"end":{"line":94,"column":53}},"47":{"start":{"line":97,"column":0},"end":{"line":102,"column":2}},"48":{"start":{"line":99,"column":4},"end":{"line":101,"column":5}},"49":{"start":{"line":100,"column":8},"end":{"line":100,"column":30}},"50":{"start":{"line":104,"column":0},"end":{"line":106,"column":1}},"51":{"start":{"line":105,"column":4},"end":{"line":105,"column":23}},"52":{"start":{"line":108,"column":0},"end":{"line":112,"column":2}},"53":{"start":{"line":111,"column":4},"end":{"line":111,"column":50}},"54":{"start":{"line":114,"column":0},"end":{"line":130,"column":2}},"55":{"start":{"line":116,"column":4},"end":{"line":116,"column":20}},"56":{"start":{"line":118,"column":4},"end":{"line":118,"column":25}},"57":{"start":{"line":120,"column":4},"end":{"line":129,"column":5}},"58":{"start":{"line":121,"column":8},"end":{"line":121,"column":33}},"59":{"start":{"line":122,"column":8},"end":{"line":125,"column":9}},"60":{"start":{"line":123,"column":12},"end":{"line":123,"column":25}},"61":{"start":{"line":124,"column":12},"end":{"line":124,"column":19}},"62":{"start":{"line":126,"column":8},"end":{"line":128,"column":11}},"63":{"start":{"line":127,"column":12},"end":{"line":127,"column":49}},"64":{"start":{"line":132,"column":0},"end":{"line":135,"column":1}},"65":{"start":{"line":133,"column":4},"end":{"line":133,"column":31}},"66":{"start":{"line":134,"column":4},"end":{"line":134,"column":33}},"67":{"start":{"line":137,"column":0},"end":{"line":141,"column":2}},"68":{"start":{"line":140,"column":4},"end":{"line":140,"column":60}},"69":{"start":{"line":143,"column":0},"end":{"line":152,"column":2}},"70":{"start":{"line":145,"column":4},"end":{"line":148,"column":5}},"71":{"start":{"line":146,"column":8},"end":{"line":146,"column":24}},"72":{"start":{"line":147,"column":8},"end":{"line":147,"column":15}},"73":{"start":{"line":149,"column":4},"end":{"line":151,"column":5}},"74":{"start":{"line":150,"column":8},"end":{"line":150,"column":41}},"75":{"start":{"line":154,"column":0},"end":{"line":157,"column":8}},"76":{"start":{"line":159,"column":0},"end":{"line":165,"column":1}},"77":{"start":{"line":160,"column":4},"end":{"line":160,"column":19}},"78":{"start":{"line":161,"column":4},"end":{"line":163,"column":7}},"79":{"start":{"line":162,"column":8},"end":{"line":162,"column":25}},"80":{"start":{"line":164,"column":4},"end":{"line":164,"column":17}}},"branchMap":{"1":{"line":47,"type":"switch","locations":[{"start":{"line":48,"column":12},"end":{"line":50,"column":22}},{"start":{"line":51,"column":12},"end":{"line":55,"column":22}},{"start":{"line":56,"column":12},"end":{"line":63,"column":22}},{"start":{"line":64,"column":12},"end":{"line":64,"column":20}}]},"2":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":16},"end":{"line":52,"column":16}},{"start":{"line":52,"column":16},"end":{"line":52,"column":16}}]},"3":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":16},"end":{"line":57,"column":16}},{"start":{"line":57,"column":16},"end":{"line":57,"column":16}}]},"4":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":20},"end":{"line":58,"column":20}},{"start":{"line":58,"column":20},"end":{"line":58,"column":20}}]},"5":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"6":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"7":{"line":133,"type":"binary-expr","locations":[{"start":{"line":133,"column":18},"end":{"line":133,"column":24}},{"start":{"line":133,"column":28},"end":{"line":133,"column":30}}]},"8":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":18},"end":{"line":134,"column":24}},{"start":{"line":134,"column":28},"end":{"line":134,"column":32}}]},"9":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":4},"end":{"line":145,"column":4}},{"start":{"line":145,"column":4},"end":{"line":145,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports.extractParts = extractParts;","module.exports.extractPartsList = extractPartsList;","","function extractParts(str) {","    var parts = [];","    forEachPart(str, function eachPart(part) {","        parts.push(part);","    });","    return new Parts(parts);","}","","function extractPartsList(str) {","    var list = [];","    forEachSubstr(',', str, function eachComponent(component) {","        var parts = extractParts(component);","        list.push(parts);","    });","    return new PartsList(list);","}","","function forEachSubstr(sep, str, each) {","    var start = 0;","    var level = 0;","    for (var i = 0; i < str.length; i++) {","        switch (str[i]) {","            case '{':","                level++;","                break;","            case '}':","                if (--level < 0) {","                    level = 0;","                }","                break;","            case sep:","                if (level === 0) {","                    if (i > start) {","                        each(str.slice(start, i));","                    }","                    start = i + 1;","                }","                break;","            default:","        }","    }","    if (start < str.length) {","        each(str.slice(start));","    }","}","","function forEachPart(str, each) {","    var i = 0;","    var pat = /\\{(.+?)\\}/g;","    var match = pat.exec(str);","    while (match) {","        var j = match.index;","        var string = str.slice(i, j);","        var choice = match[1].split(',');","        each(new Part(string, choice));","        i = j + match[0].length;","        match = pat.exec(str);","    }","    each(new Part(str.slice(i), null));","}","","function PartsList(list) {","    this.list = list;","}","","PartsList.prototype.inspect =","PartsList.prototype.toString =","function partsListToString() {","    return 'PartsList(' + this.list.toString() + ')';","};","","PartsList.prototype.each =","function each(it) {","    for (var i = 0; i < this.list.length; i++) {","        this.list[i].each(it);","    }","};","","function Parts(parts) {","    this.parts = parts;","}","","Parts.prototype.inspect =","Parts.prototype.toString =","function partsToString() {","    return 'Parts(' + this.parts.toString() + ')';","};","","Parts.prototype.each =","function each(it) {","    var self = this;","","    buildPart('', 0, it);","","    function buildPart(prefix, i, emit) {","        var part = self.parts[i];","        if (!part) {","            emit(prefix);","            return;","        }","        part.each(function eachSubPart(str) {","            buildPart(prefix + str, i + 1, emit);","        });","    }","};","","function Part(string, choice) {","    this.string = string || '';","    this.choice = choice || null;","}","","Part.prototype.inspect =","Part.prototype.toString =","function partToString() {","    return 'Part(' + this.string + ', ' + this.choice + ')';","};","","Part.prototype.each =","function each(it) {","    if (!this.choice) {","        it(this.string);","        return;","    }","    for (var i = 0; i < this.choice.length; i++) {","        it(this.string + this.choice[i]);","    }","};","","PartsList.prototype.all =","Parts.prototype.all =","Part.prototype.all =","allEach;","","function allEach() {","    var items = [];","    this.each(function each(item) {","        items.push(item);","    });","    return items;","}",""],"l":{"23":1,"24":1,"26":1,"27":0,"28":0,"29":0,"31":0,"34":1,"35":0,"36":0,"37":0,"38":0,"40":0,"43":1,"44":0,"45":0,"46":0,"47":0,"49":0,"50":0,"52":0,"53":0,"55":0,"57":0,"58":0,"59":0,"61":0,"63":0,"67":0,"68":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"84":0,"87":1,"88":0,"91":1,"94":0,"97":1,"99":0,"100":0,"104":1,"105":0,"108":1,"111":0,"114":1,"116":0,"118":0,"120":1,"121":0,"122":0,"123":0,"124":0,"126":0,"127":0,"132":1,"133":0,"134":0,"137":1,"140":0,"143":1,"145":0,"146":0,"147":0,"149":0,"150":0,"154":1,"159":1,"160":0,"161":0,"162":0,"164":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/compare.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/compare.js","s":{"1":2,"2":2,"3":2,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"onSamples","line":46,"loc":{"start":{"line":46,"column":20},"end":{"line":46,"column":53}}},"2":{"name":"forSample","line":53,"loc":{"start":{"line":53,"column":20},"end":{"line":53,"column":47}}},"3":{"name":"forSampleKey","line":54,"loc":{"start":{"line":54,"column":36},"end":{"line":54,"column":63}}},"4":{"name":"compareSample","line":62,"loc":{"start":{"line":62,"column":37},"end":{"line":62,"column":65}}},"5":{"name":"descStats","line":108,"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":27}}},"6":{"name":"sortOrder","line":110,"loc":{"start":{"line":110,"column":11},"end":{"line":110,"column":36}}},"7":{"name":"readSamples","line":140,"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":38}}},"8":{"name":"forEachFile","line":141,"loc":{"start":{"line":141,"column":23},"end":{"line":141,"column":50}}},"9":{"name":"thunk","line":142,"loc":{"start":{"line":142,"column":15},"end":{"line":142,"column":36}}},"10":{"name":"finish","line":150,"loc":{"start":{"line":150,"column":12},"end":{"line":150,"column":33}}},"11":{"name":"combineSamples","line":159,"loc":{"start":{"line":159,"column":0},"end":{"line":159,"column":32}}},"12":{"name":"storeResultInto","line":198,"loc":{"start":{"line":198,"column":0},"end":{"line":198,"column":33}}},"13":{"name":"storeResult","line":199,"loc":{"start":{"line":199,"column":11},"end":{"line":199,"column":40}}},"14":{"name":"lpad","line":218,"loc":{"start":{"line":218,"column":0},"end":{"line":218,"column":31}}},"15":{"name":"rpad","line":227,"loc":{"start":{"line":227,"column":0},"end":{"line":227,"column":31}}},"16":{"name":"extractDim","line":236,"loc":{"start":{"line":236,"column":0},"end":{"line":236,"column":34}}},"17":{"name":"forSample","line":238,"loc":{"start":{"line":238,"column":26},"end":{"line":238,"column":51}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":36}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":35}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":39}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":27}},"6":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"7":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}},"8":{"start":{"line":33,"column":0},"end":{"line":37,"column":3}},"9":{"start":{"line":39,"column":0},"end":{"line":44,"column":1}},"10":{"start":{"line":40,"column":4},"end":{"line":40,"column":53}},"11":{"start":{"line":42,"column":4},"end":{"line":42,"column":20}},"12":{"start":{"line":46,"column":0},"end":{"line":105,"column":3}},"13":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"14":{"start":{"line":48,"column":8},"end":{"line":48,"column":18}},"15":{"start":{"line":51,"column":4},"end":{"line":51,"column":18}},"16":{"start":{"line":52,"column":4},"end":{"line":52,"column":22}},"17":{"start":{"line":53,"column":4},"end":{"line":58,"column":7}},"18":{"start":{"line":54,"column":8},"end":{"line":57,"column":11}},"19":{"start":{"line":55,"column":12},"end":{"line":55,"column":56}},"20":{"start":{"line":56,"column":12},"end":{"line":56,"column":29}},"21":{"start":{"line":60,"column":4},"end":{"line":60,"column":29}},"22":{"start":{"line":61,"column":4},"end":{"line":61,"column":29}},"23":{"start":{"line":62,"column":4},"end":{"line":104,"column":7}},"24":{"start":{"line":63,"column":8},"end":{"line":63,"column":33}},"25":{"start":{"line":64,"column":8},"end":{"line":64,"column":33}},"26":{"start":{"line":65,"column":8},"end":{"line":68,"column":9}},"27":{"start":{"line":66,"column":12},"end":{"line":66,"column":79}},"28":{"start":{"line":67,"column":12},"end":{"line":67,"column":19}},"29":{"start":{"line":69,"column":8},"end":{"line":72,"column":9}},"30":{"start":{"line":70,"column":12},"end":{"line":70,"column":79}},"31":{"start":{"line":71,"column":12},"end":{"line":71,"column":19}},"32":{"start":{"line":74,"column":8},"end":{"line":74,"column":45}},"33":{"start":{"line":75,"column":8},"end":{"line":80,"column":9}},"34":{"start":{"line":76,"column":12},"end":{"line":78,"column":48}},"35":{"start":{"line":79,"column":12},"end":{"line":79,"column":19}},"36":{"start":{"line":81,"column":8},"end":{"line":81,"column":27}},"37":{"start":{"line":83,"column":8},"end":{"line":83,"column":45}},"38":{"start":{"line":84,"column":8},"end":{"line":89,"column":9}},"39":{"start":{"line":85,"column":12},"end":{"line":87,"column":48}},"40":{"start":{"line":88,"column":12},"end":{"line":88,"column":19}},"41":{"start":{"line":90,"column":8},"end":{"line":90,"column":27}},"42":{"start":{"line":93,"column":8},"end":{"line":93,"column":38}},"43":{"start":{"line":94,"column":8},"end":{"line":94,"column":38}},"44":{"start":{"line":95,"column":8},"end":{"line":95,"column":43}},"45":{"start":{"line":96,"column":8},"end":{"line":96,"column":40}},"46":{"start":{"line":97,"column":8},"end":{"line":103,"column":11}},"47":{"start":{"line":108,"column":0},"end":{"line":138,"column":1}},"48":{"start":{"line":109,"column":4},"end":{"line":109,"column":30}},"49":{"start":{"line":110,"column":4},"end":{"line":112,"column":7}},"50":{"start":{"line":111,"column":8},"end":{"line":111,"column":21}},"51":{"start":{"line":113,"column":4},"end":{"line":113,"column":21}},"52":{"start":{"line":114,"column":4},"end":{"line":114,"column":37}},"53":{"start":{"line":115,"column":4},"end":{"line":115,"column":37}},"54":{"start":{"line":116,"column":4},"end":{"line":116,"column":37}},"55":{"start":{"line":117,"column":4},"end":{"line":117,"column":22}},"56":{"start":{"line":118,"column":4},"end":{"line":118,"column":26}},"57":{"start":{"line":119,"column":4},"end":{"line":119,"column":22}},"58":{"start":{"line":120,"column":4},"end":{"line":120,"column":21}},"59":{"start":{"line":121,"column":4},"end":{"line":125,"column":5}},"60":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"61":{"start":{"line":123,"column":12},"end":{"line":123,"column":18}},"62":{"start":{"line":126,"column":4},"end":{"line":126,"column":36}},"63":{"start":{"line":127,"column":4},"end":{"line":127,"column":26}},"64":{"start":{"line":128,"column":4},"end":{"line":137,"column":6}},"65":{"start":{"line":140,"column":0},"end":{"line":157,"column":1}},"66":{"start":{"line":141,"column":4},"end":{"line":156,"column":18}},"67":{"start":{"line":142,"column":8},"end":{"line":155,"column":10}},"68":{"start":{"line":143,"column":12},"end":{"line":143,"column":28}},"69":{"start":{"line":144,"column":12},"end":{"line":148,"column":35}},"70":{"start":{"line":150,"column":12},"end":{"line":154,"column":13}},"71":{"start":{"line":151,"column":16},"end":{"line":151,"column":48}},"72":{"start":{"line":153,"column":16},"end":{"line":153,"column":34}},"73":{"start":{"line":159,"column":0},"end":{"line":196,"column":1}},"74":{"start":{"line":160,"column":4},"end":{"line":160,"column":35}},"75":{"start":{"line":163,"column":4},"end":{"line":193,"column":5}},"76":{"start":{"line":164,"column":8},"end":{"line":164,"column":44}},"77":{"start":{"line":165,"column":8},"end":{"line":165,"column":25}},"78":{"start":{"line":168,"column":8},"end":{"line":168,"column":49}},"79":{"start":{"line":169,"column":8},"end":{"line":190,"column":9}},"80":{"start":{"line":170,"column":12},"end":{"line":170,"column":50}},"81":{"start":{"line":173,"column":12},"end":{"line":189,"column":13}},"82":{"start":{"line":174,"column":16},"end":{"line":174,"column":39}},"83":{"start":{"line":176,"column":16},"end":{"line":188,"column":17}},"84":{"start":{"line":177,"column":20},"end":{"line":181,"column":22}},"85":{"start":{"line":183,"column":20},"end":{"line":183,"column":66}},"86":{"start":{"line":184,"column":20},"end":{"line":186,"column":22}},"87":{"start":{"line":187,"column":20},"end":{"line":187,"column":91}},"88":{"start":{"line":192,"column":8},"end":{"line":192,"column":34}},"89":{"start":{"line":195,"column":4},"end":{"line":195,"column":18}},"90":{"start":{"line":198,"column":0},"end":{"line":216,"column":1}},"91":{"start":{"line":199,"column":4},"end":{"line":215,"column":6}},"92":{"start":{"line":200,"column":8},"end":{"line":202,"column":10}},"93":{"start":{"line":204,"column":8},"end":{"line":204,"column":34}},"94":{"start":{"line":205,"column":8},"end":{"line":207,"column":9}},"95":{"start":{"line":206,"column":12},"end":{"line":206,"column":39}},"96":{"start":{"line":209,"column":8},"end":{"line":209,"column":59}},"97":{"start":{"line":210,"column":8},"end":{"line":212,"column":9}},"98":{"start":{"line":211,"column":12},"end":{"line":211,"column":64}},"99":{"start":{"line":214,"column":8},"end":{"line":214,"column":35}},"100":{"start":{"line":218,"column":0},"end":{"line":225,"column":1}},"101":{"start":{"line":219,"column":4},"end":{"line":219,"column":31}},"102":{"start":{"line":220,"column":4},"end":{"line":220,"column":21}},"103":{"start":{"line":221,"column":4},"end":{"line":223,"column":5}},"104":{"start":{"line":222,"column":8},"end":{"line":222,"column":24}},"105":{"start":{"line":224,"column":4},"end":{"line":224,"column":15}},"106":{"start":{"line":227,"column":0},"end":{"line":234,"column":1}},"107":{"start":{"line":228,"column":4},"end":{"line":228,"column":31}},"108":{"start":{"line":229,"column":4},"end":{"line":229,"column":21}},"109":{"start":{"line":230,"column":4},"end":{"line":232,"column":5}},"110":{"start":{"line":231,"column":8},"end":{"line":231,"column":24}},"111":{"start":{"line":233,"column":4},"end":{"line":233,"column":15}},"112":{"start":{"line":236,"column":0},"end":{"line":249,"column":1}},"113":{"start":{"line":237,"column":4},"end":{"line":237,"column":20}},"114":{"start":{"line":238,"column":4},"end":{"line":244,"column":7}},"115":{"start":{"line":239,"column":8},"end":{"line":239,"column":27}},"116":{"start":{"line":240,"column":8},"end":{"line":242,"column":9}},"117":{"start":{"line":241,"column":12},"end":{"line":241,"column":22}},"118":{"start":{"line":243,"column":8},"end":{"line":243,"column":17}},"119":{"start":{"line":245,"column":4},"end":{"line":248,"column":6}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":0},"end":{"line":39,"column":0}},{"start":{"line":39,"column":0},"end":{"line":39,"column":0}}]},"2":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":8}},{"start":{"line":65,"column":8},"end":{"line":65,"column":8}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"5":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"6":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"7":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"8":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":16},"end":{"line":176,"column":16}},{"start":{"line":176,"column":16},"end":{"line":176,"column":16}}]},"9":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":8},"end":{"line":205,"column":8}},{"start":{"line":205,"column":8},"end":{"line":205,"column":8}}]},"10":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":8},"end":{"line":210,"column":8}},{"start":{"line":210,"column":8},"end":{"line":210,"column":8}}]},"11":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":10},"end":{"line":220,"column":13}},{"start":{"line":220,"column":17},"end":{"line":220,"column":20}}]},"12":{"line":229,"type":"binary-expr","locations":[{"start":{"line":229,"column":10},"end":{"line":229,"column":13}},{"start":{"line":229,"column":17},"end":{"line":229,"column":20}}]},"13":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":240,"column":8}},{"start":{"line":240,"column":8},"end":{"line":240,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var parseArgs = require('minimist');","var fs = require('fs');","var ldj = require('ldjson-stream');","var parallel = require('run-parallel');","var util = require('util');","var process = require('process');","var console = require('console');","","/*eslint no-console: 0*/","","var argv = parseArgs(process.argv.slice(2), {","    default: {","         stat: 'rate'","    }","});","","if (argv._.length !== 2) {","    console.error('usage: compare.js a.json b.json');","    /*eslint-disable no-process-exit*/","    process.exit(1);","    /*eslint-enable no-process-exit*/","}","","readSamples(argv._, function onSamples(err, samples) {","    if (err) {","        throw err;","    }","","    var keys = {};","    var maxKeyLen = 0;","    samples.forEach(function forSample(sample) {","        Object.keys(sample).forEach(function forSampleKey(key) {","            maxKeyLen = Math.max(maxKeyLen, key.length);","            keys[key] = true;","        });","    });","","    var sampleA = samples[0];","    var sampleB = samples[1];","    Object.keys(keys).sort().forEach(function compareSample(key) {","        var aData = sampleA[key];","        var bData = sampleB[key];","        if (aData === undefined) {","            console.error(util.format('sampleA data missing for key %j', key));","            return;","        }","        if (bData === undefined) {","            console.error(util.format('sampleB data missing for key %j', key));","            return;","        }","","        aData = extractDim(argv.stat, aData);","        if (aData.missing) {","            console.error(util.format(","                'sampleA data missing %s values for stat %s for key %j',","                aData.missing, argv.stat, key));","            return;","        }","        aData = aData.data;","","        bData = extractDim(argv.stat, bData);","        if (bData.missing) {","            console.error(util.format(","                'sampleB data missing %s values for stat %s for key %j',","                bData.missing, argv.stat, key));","            return;","        }","        bData = bData.data;","","        // TODO: improve on this","        var aStats = descStats(aData);","        var bStats = descStats(bData);","        var diff = bStats.whi - aStats.whi;","        var diffPct = diff / aStats.whi;","        console.log(util.format(","            '%s %s: hi-diff: %s (%s%%)',","            rpad(key, maxKeyLen),","            argv.stat,","            lpad(diff.toFixed(2), 9),","            lpad((100 * diffPct).toFixed(1), 5)","        ));","    });","});","","// return basic descriptive stats of some numerical sample","function descStats(sample) {","    var S = [].concat(sample);","    S.sort(function sortOrder(a, b) {","        return a - b;","    });","    var N = S.length;","    var q1 = S[Math.floor(0.25 * N)];","    var q2 = S[Math.floor(0.50 * N)];","    var q3 = S[Math.floor(0.70 * N)];","    var iqr = q3 - q1;","    var tol = 3 * iqr / 2;","    var hi = q3 + tol;","    var whiIndex = N;","    while (--whiIndex > 0) {","        if (S[whiIndex] <= hi) {","            break;","        }","    }","    var whiPct = (whiIndex + 1) / N;","    var whi = S[whiIndex];","    return {","        min: S[0],","        max: S[N - 1],","        q1: q1,","        q2: q2,","        q3: q3,","        hi: hi,","        whi: whi,","        whiPct: whiPct","    };","}","","function readSamples(files, callback) {","    parallel(files.map(function forEachFile(file) {","        return function thunk(done) {","            var sample = {};","            fs.createReadStream(file)","                .pipe(ldj.parse())","                .on('data', storeResultInto(sample))","                .on('error', finish)","                .on('end', finish);","","            function finish(err) {","                sample = combineSamples(sample);","","                done(err, sample);","            }","        };","    }), callback);","}","","function combineSamples(sample) {","    var keys = Object.keys(sample);","","    // For each type of test","    for (var i = 0; i < keys.length; i++) {","        var instancesData = sample[keys[i]];","        var results = [];","","        // For each child process","        var subKeys = Object.keys(instancesData);","        for (var j = 0; j < subKeys.length; j++) {","            var value = instancesData[subKeys[j]];","","            // For each run of that test","            for (var k = 0; k < value.length; k++) {","                var statObj = value[k];","","                if (!results[k]) {","                    results[k] = {","                        numRequests: statObj.numRequests,","                        elapsed: statObj.elapsed,","                        rate: statObj.numRequests / (statObj.elapsed / 1000)","                    };","                } else {","                    results[k].numRequests += statObj.numRequests;","                    results[k].elapsed = Math.min(","                        results[k].elapsed, statObj.elapsed","                    );","                    results[k].rate = results[k].numRequests / (results[k].elapsed / 1000);","                }","            }","        }","","        sample[keys[i]] = results;","    }","","    return sample;","}","","function storeResultInto(sample) {","    return function storeResult(result) {","        var key = util.format('%s, %s/%s',","            result.descr, result.pipeline, result.numClients","        );","","        var results = sample[key];","        if (!results) {","            results = sample[key] = {};","        }","","        var instanceArray = results[result.instanceNumber];","        if (!instanceArray) {","            instanceArray = results[result.instanceNumber] = [];","        }","","        instanceArray.push(result);","    };","}","","function lpad(input, len, chr) {","    var str = input.toString();","    chr = chr || ' ';","    while (str.length < len) {","        str = chr + str;","    }","    return str;","}","","function rpad(input, len, chr) {","    var str = input.toString();","    chr = chr || ' ';","    while (str.length < len) {","        str = str + chr;","    }","    return str;","}","","function extractDim(name, sample) {","    var missing = 0;","    var data = sample.map(function forSample(item) {","        var d = item[name];","        if (d === undefined) {","            ++missing;","        }","        return d;","    });","    return {","        missing: missing,","        data: data","    };","}",""],"l":{"23":2,"24":2,"25":2,"26":0,"27":0,"28":0,"29":0,"33":0,"39":0,"40":0,"42":0,"46":0,"47":0,"48":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"69":0,"70":0,"71":0,"74":0,"75":0,"76":0,"79":0,"81":0,"83":0,"84":0,"85":0,"88":0,"90":0,"93":0,"94":0,"95":0,"96":0,"97":0,"108":1,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"126":0,"127":0,"128":0,"140":1,"141":0,"142":0,"143":0,"144":0,"150":1,"151":0,"153":0,"159":1,"160":0,"163":0,"164":0,"165":0,"168":0,"169":0,"170":0,"173":0,"174":0,"176":0,"177":0,"183":0,"184":0,"187":0,"192":0,"195":0,"198":1,"199":0,"200":0,"204":0,"205":0,"206":0,"209":0,"210":0,"211":0,"214":0,"218":1,"219":0,"220":0,"221":0,"222":0,"224":0,"227":1,"228":0,"229":0,"230":0,"231":0,"233":0,"236":1,"237":0,"238":0,"239":0,"240":0,"241":0,"243":0,"245":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/d8_peer_heap.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/d8_peer_heap.js","s":{"1":1,"2":0,"3":0,"4":0,"5":2,"6":0,"7":0,"8":0,"9":0,"10":2,"11":0,"12":0,"13":2,"14":1,"15":0,"16":0,"17":0,"18":0,"19":2,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":2,"54":0,"55":0,"56":0,"57":0,"58":2,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":2,"69":0,"70":0,"71":0,"72":0,"73":0,"74":2,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":2,"82":0,"83":0,"84":0,"85":0,"86":0,"87":2,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":2,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":2,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":2,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":2,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":2,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":2,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":1,"179":0,"180":1,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":2,"189":0,"190":0,"191":2,"192":0,"193":0,"194":0,"195":0,"196":2,"197":0,"198":0,"199":0,"200":0,"201":1,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":1,"224":0,"225":2},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"fnMap":{"1":{"name":"Range","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":23}}},"2":{"name":"multiply","line":31,"loc":{"start":{"line":31,"column":27},"end":{"line":31,"column":52}}},"3":{"name":"toString","line":41,"loc":{"start":{"line":41,"column":27},"end":{"line":41,"column":47}}},"4":{"name":"PeerHeap","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":20}}},"5":{"name":"chooseWeightedRandom","line":61,"loc":{"start":{"line":61,"column":42},"end":{"line":61,"column":91}}},"6":{"name":"choose","line":116,"loc":{"start":{"line":116,"column":28},"end":{"line":116,"column":63}}},"7":{"name":"clear","line":126,"loc":{"start":{"line":126,"column":27},"end":{"line":126,"column":44}}},"8":{"name":"add","line":140,"loc":{"start":{"line":140,"column":25},"end":{"line":140,"column":44}}},"9":{"name":"rescore","line":149,"loc":{"start":{"line":149,"column":29},"end":{"line":149,"column":48}}},"10":{"name":"heapify","line":160,"loc":{"start":{"line":160,"column":29},"end":{"line":160,"column":48}}},"11":{"name":"remove","line":172,"loc":{"start":{"line":172,"column":28},"end":{"line":172,"column":47}}},"12":{"name":"push","line":195,"loc":{"start":{"line":195,"column":26},"end":{"line":195,"column":53}}},"13":{"name":"pop","line":208,"loc":{"start":{"line":208,"column":25},"end":{"line":208,"column":40}}},"14":{"name":"siftdown","line":228,"loc":{"start":{"line":228,"column":30},"end":{"line":228,"column":51}}},"15":{"name":"siftup","line":257,"loc":{"start":{"line":257,"column":28},"end":{"line":257,"column":47}}},"16":{"name":"swap","line":278,"loc":{"start":{"line":278,"column":26},"end":{"line":278,"column":46}}},"17":{"name":"PeerHeapElement","line":290,"loc":{"start":{"line":290,"column":0},"end":{"line":290,"column":31}}},"18":{"name":"rescore","line":300,"loc":{"start":{"line":300,"column":36},"end":{"line":300,"column":60}}},"19":{"name":"rand","line":318,"loc":{"start":{"line":318,"column":0},"end":{"line":318,"column":22}}},"20":{"name":"Peer","line":323,"loc":{"start":{"line":323,"column":0},"end":{"line":323,"column":16}}},"21":{"name":"getScoreRange","line":335,"loc":{"start":{"line":335,"column":31},"end":{"line":335,"column":56}}},"22":{"name":"randPending","line":341,"loc":{"start":{"line":341,"column":29},"end":{"line":341,"column":52}}},"23":{"name":"getScore","line":353,"loc":{"start":{"line":353,"column":26},"end":{"line":353,"column":46}}},"24":{"name":"benchmark","line":361,"loc":{"start":{"line":361,"column":0},"end":{"line":361,"column":41}}},"25":{"name":"noop","line":394,"loc":{"start":{"line":394,"column":0},"end":{"line":394,"column":17}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":28,"column":1}},"2":{"start":{"line":24,"column":4},"end":{"line":24,"column":20}},"3":{"start":{"line":26,"column":4},"end":{"line":26,"column":17}},"4":{"start":{"line":27,"column":4},"end":{"line":27,"column":17}},"5":{"start":{"line":31,"column":0},"end":{"line":38,"column":2}},"6":{"start":{"line":32,"column":4},"end":{"line":32,"column":20}},"7":{"start":{"line":34,"column":4},"end":{"line":34,"column":33}},"8":{"start":{"line":36,"column":4},"end":{"line":36,"column":42}},"9":{"start":{"line":37,"column":4},"end":{"line":37,"column":33}},"10":{"start":{"line":40,"column":0},"end":{"line":45,"column":2}},"11":{"start":{"line":42,"column":4},"end":{"line":42,"column":20}},"12":{"start":{"line":44,"column":4},"end":{"line":44,"column":53}},"13":{"start":{"line":51,"column":0},"end":{"line":51,"column":25}},"14":{"start":{"line":53,"column":0},"end":{"line":59,"column":1}},"15":{"start":{"line":54,"column":4},"end":{"line":54,"column":20}},"16":{"start":{"line":56,"column":4},"end":{"line":56,"column":20}},"17":{"start":{"line":57,"column":4},"end":{"line":57,"column":23}},"18":{"start":{"line":58,"column":4},"end":{"line":58,"column":23}},"19":{"start":{"line":61,"column":0},"end":{"line":114,"column":2}},"20":{"start":{"line":62,"column":4},"end":{"line":62,"column":20}},"21":{"start":{"line":64,"column":4},"end":{"line":64,"column":26}},"22":{"start":{"line":65,"column":4},"end":{"line":65,"column":47}},"23":{"start":{"line":66,"column":4},"end":{"line":66,"column":31}},"24":{"start":{"line":67,"column":4},"end":{"line":67,"column":51}},"25":{"start":{"line":68,"column":4},"end":{"line":68,"column":23}},"26":{"start":{"line":69,"column":4},"end":{"line":69,"column":21}},"27":{"start":{"line":71,"column":4},"end":{"line":76,"column":5}},"28":{"start":{"line":72,"column":8},"end":{"line":72,"column":40}},"29":{"start":{"line":73,"column":8},"end":{"line":73,"column":40}},"30":{"start":{"line":74,"column":8},"end":{"line":74,"column":23}},"31":{"start":{"line":75,"column":8},"end":{"line":75,"column":21}},"32":{"start":{"line":78,"column":4},"end":{"line":111,"column":5}},"33":{"start":{"line":79,"column":8},"end":{"line":79,"column":37}},"34":{"start":{"line":80,"column":8},"end":{"line":80,"column":21}},"35":{"start":{"line":82,"column":8},"end":{"line":82,"column":31}},"36":{"start":{"line":84,"column":8},"end":{"line":101,"column":9}},"37":{"start":{"line":89,"column":12},"end":{"line":89,"column":21}},"38":{"start":{"line":90,"column":15},"end":{"line":101,"column":9}},"39":{"start":{"line":91,"column":12},"end":{"line":91,"column":70}},"40":{"start":{"line":93,"column":12},"end":{"line":93,"column":38}},"41":{"start":{"line":94,"column":12},"end":{"line":94,"column":38}},"42":{"start":{"line":95,"column":12},"end":{"line":95,"column":63}},"43":{"start":{"line":97,"column":12},"end":{"line":100,"column":13}},"44":{"start":{"line":98,"column":16},"end":{"line":98,"column":49}},"45":{"start":{"line":99,"column":16},"end":{"line":99,"column":37}},"46":{"start":{"line":103,"column":8},"end":{"line":103,"column":29}},"47":{"start":{"line":104,"column":8},"end":{"line":104,"column":29}},"48":{"start":{"line":105,"column":8},"end":{"line":110,"column":9}},"49":{"start":{"line":106,"column":12},"end":{"line":106,"column":40}},"50":{"start":{"line":107,"column":12},"end":{"line":109,"column":13}},"51":{"start":{"line":108,"column":16},"end":{"line":108,"column":45}},"52":{"start":{"line":113,"column":4},"end":{"line":113,"column":22}},"53":{"start":{"line":116,"column":0},"end":{"line":124,"column":2}},"54":{"start":{"line":117,"column":4},"end":{"line":117,"column":20}},"55":{"start":{"line":119,"column":4},"end":{"line":121,"column":5}},"56":{"start":{"line":120,"column":8},"end":{"line":120,"column":20}},"57":{"start":{"line":123,"column":4},"end":{"line":123,"column":56}},"58":{"start":{"line":126,"column":0},"end":{"line":138,"column":2}},"59":{"start":{"line":127,"column":4},"end":{"line":127,"column":20}},"60":{"start":{"line":129,"column":4},"end":{"line":136,"column":5}},"61":{"start":{"line":130,"column":8},"end":{"line":130,"column":31}},"62":{"start":{"line":131,"column":8},"end":{"line":131,"column":23}},"63":{"start":{"line":132,"column":8},"end":{"line":132,"column":23}},"64":{"start":{"line":133,"column":8},"end":{"line":133,"column":21}},"65":{"start":{"line":134,"column":8},"end":{"line":134,"column":21}},"66":{"start":{"line":135,"column":8},"end":{"line":135,"column":24}},"67":{"start":{"line":137,"column":4},"end":{"line":137,"column":26}},"68":{"start":{"line":140,"column":0},"end":{"line":147,"column":2}},"69":{"start":{"line":141,"column":4},"end":{"line":141,"column":20}},"70":{"start":{"line":143,"column":4},"end":{"line":143,"column":32}},"71":{"start":{"line":144,"column":4},"end":{"line":144,"column":35}},"72":{"start":{"line":145,"column":4},"end":{"line":145,"column":27}},"73":{"start":{"line":146,"column":4},"end":{"line":146,"column":14}},"74":{"start":{"line":149,"column":0},"end":{"line":158,"column":2}},"75":{"start":{"line":150,"column":4},"end":{"line":150,"column":20}},"76":{"start":{"line":152,"column":4},"end":{"line":156,"column":5}},"77":{"start":{"line":153,"column":8},"end":{"line":153,"column":31}},"78":{"start":{"line":154,"column":8},"end":{"line":154,"column":43}},"79":{"start":{"line":155,"column":8},"end":{"line":155,"column":31}},"80":{"start":{"line":157,"column":4},"end":{"line":157,"column":19}},"81":{"start":{"line":160,"column":0},"end":{"line":170,"column":2}},"82":{"start":{"line":161,"column":4},"end":{"line":161,"column":20}},"83":{"start":{"line":163,"column":4},"end":{"line":165,"column":5}},"84":{"start":{"line":164,"column":8},"end":{"line":164,"column":15}},"85":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"86":{"start":{"line":168,"column":8},"end":{"line":168,"column":25}},"87":{"start":{"line":172,"column":0},"end":{"line":193,"column":2}},"88":{"start":{"line":173,"column":4},"end":{"line":173,"column":20}},"89":{"start":{"line":175,"column":4},"end":{"line":177,"column":5}},"90":{"start":{"line":176,"column":8},"end":{"line":176,"column":15}},"91":{"start":{"line":179,"column":4},"end":{"line":182,"column":5}},"92":{"start":{"line":180,"column":8},"end":{"line":180,"column":25}},"93":{"start":{"line":181,"column":8},"end":{"line":181,"column":15}},"94":{"start":{"line":184,"column":4},"end":{"line":184,"column":34}},"95":{"start":{"line":185,"column":4},"end":{"line":188,"column":5}},"96":{"start":{"line":186,"column":8},"end":{"line":186,"column":25}},"97":{"start":{"line":187,"column":8},"end":{"line":187,"column":15}},"98":{"start":{"line":190,"column":4},"end":{"line":190,"column":20}},"99":{"start":{"line":191,"column":4},"end":{"line":191,"column":21}},"100":{"start":{"line":192,"column":4},"end":{"line":192,"column":19}},"101":{"start":{"line":195,"column":0},"end":{"line":206,"column":2}},"102":{"start":{"line":196,"column":4},"end":{"line":196,"column":20}},"103":{"start":{"line":198,"column":4},"end":{"line":198,"column":39}},"104":{"start":{"line":199,"column":4},"end":{"line":199,"column":19}},"105":{"start":{"line":200,"column":4},"end":{"line":200,"column":21}},"106":{"start":{"line":201,"column":4},"end":{"line":201,"column":24}},"107":{"start":{"line":202,"column":4},"end":{"line":202,"column":33}},"108":{"start":{"line":204,"column":4},"end":{"line":204,"column":24}},"109":{"start":{"line":205,"column":4},"end":{"line":205,"column":33}},"110":{"start":{"line":208,"column":0},"end":{"line":226,"column":2}},"111":{"start":{"line":209,"column":4},"end":{"line":209,"column":20}},"112":{"start":{"line":210,"column":4},"end":{"line":210,"column":20}},"113":{"start":{"line":212,"column":4},"end":{"line":214,"column":5}},"114":{"start":{"line":213,"column":8},"end":{"line":213,"column":20}},"115":{"start":{"line":216,"column":4},"end":{"line":219,"column":5}},"116":{"start":{"line":217,"column":8},"end":{"line":217,"column":32}},"117":{"start":{"line":218,"column":8},"end":{"line":218,"column":20}},"118":{"start":{"line":221,"column":4},"end":{"line":221,"column":30}},"119":{"start":{"line":222,"column":4},"end":{"line":222,"column":37}},"120":{"start":{"line":223,"column":4},"end":{"line":223,"column":21}},"121":{"start":{"line":225,"column":4},"end":{"line":225,"column":16}},"122":{"start":{"line":228,"column":0},"end":{"line":255,"column":2}},"123":{"start":{"line":229,"column":4},"end":{"line":229,"column":20}},"124":{"start":{"line":231,"column":4},"end":{"line":254,"column":5}},"125":{"start":{"line":232,"column":8},"end":{"line":232,"column":31}},"126":{"start":{"line":233,"column":8},"end":{"line":237,"column":9}},"127":{"start":{"line":234,"column":12},"end":{"line":234,"column":54}},"128":{"start":{"line":235,"column":12},"end":{"line":235,"column":54}},"129":{"start":{"line":236,"column":12},"end":{"line":236,"column":21}},"130":{"start":{"line":239,"column":8},"end":{"line":239,"column":29}},"131":{"start":{"line":240,"column":8},"end":{"line":240,"column":25}},"132":{"start":{"line":241,"column":8},"end":{"line":244,"column":9}},"133":{"start":{"line":243,"column":12},"end":{"line":243,"column":26}},"134":{"start":{"line":246,"column":8},"end":{"line":253,"column":9}},"135":{"start":{"line":247,"column":12},"end":{"line":247,"column":32}},"136":{"start":{"line":248,"column":12},"end":{"line":248,"column":22}},"137":{"start":{"line":250,"column":12},"end":{"line":250,"column":54}},"138":{"start":{"line":251,"column":12},"end":{"line":251,"column":54}},"139":{"start":{"line":252,"column":12},"end":{"line":252,"column":21}},"140":{"start":{"line":257,"column":0},"end":{"line":276,"column":2}},"141":{"start":{"line":258,"column":4},"end":{"line":258,"column":20}},"142":{"start":{"line":260,"column":4},"end":{"line":270,"column":5}},"143":{"start":{"line":261,"column":8},"end":{"line":261,"column":42}},"144":{"start":{"line":262,"column":8},"end":{"line":269,"column":9}},"145":{"start":{"line":263,"column":12},"end":{"line":263,"column":30}},"146":{"start":{"line":264,"column":12},"end":{"line":264,"column":20}},"147":{"start":{"line":266,"column":12},"end":{"line":266,"column":54}},"148":{"start":{"line":267,"column":12},"end":{"line":267,"column":54}},"149":{"start":{"line":268,"column":12},"end":{"line":268,"column":21}},"150":{"start":{"line":272,"column":4},"end":{"line":272,"column":46}},"151":{"start":{"line":273,"column":4},"end":{"line":273,"column":46}},"152":{"start":{"line":275,"column":4},"end":{"line":275,"column":13}},"153":{"start":{"line":278,"column":0},"end":{"line":288,"column":2}},"154":{"start":{"line":279,"column":4},"end":{"line":279,"column":20}},"155":{"start":{"line":281,"column":4},"end":{"line":281,"column":26}},"156":{"start":{"line":282,"column":4},"end":{"line":282,"column":26}},"157":{"start":{"line":284,"column":4},"end":{"line":284,"column":22}},"158":{"start":{"line":285,"column":4},"end":{"line":285,"column":22}},"159":{"start":{"line":286,"column":4},"end":{"line":286,"column":16}},"160":{"start":{"line":287,"column":4},"end":{"line":287,"column":16}},"161":{"start":{"line":290,"column":0},"end":{"line":298,"column":1}},"162":{"start":{"line":291,"column":4},"end":{"line":291,"column":20}},"163":{"start":{"line":293,"column":4},"end":{"line":293,"column":21}},"164":{"start":{"line":294,"column":4},"end":{"line":294,"column":21}},"165":{"start":{"line":295,"column":4},"end":{"line":295,"column":19}},"166":{"start":{"line":296,"column":4},"end":{"line":296,"column":19}},"167":{"start":{"line":297,"column":4},"end":{"line":297,"column":22}},"168":{"start":{"line":300,"column":0},"end":{"line":316,"column":2}},"169":{"start":{"line":301,"column":4},"end":{"line":301,"column":20}},"170":{"start":{"line":303,"column":4},"end":{"line":305,"column":5}},"171":{"start":{"line":304,"column":8},"end":{"line":304,"column":15}},"172":{"start":{"line":307,"column":4},"end":{"line":311,"column":5}},"173":{"start":{"line":308,"column":8},"end":{"line":308,"column":42}},"174":{"start":{"line":310,"column":8},"end":{"line":310,"column":27}},"175":{"start":{"line":313,"column":4},"end":{"line":313,"column":31}},"176":{"start":{"line":314,"column":4},"end":{"line":314,"column":46}},"177":{"start":{"line":315,"column":4},"end":{"line":315,"column":48}},"178":{"start":{"line":318,"column":0},"end":{"line":321,"column":1}},"179":{"start":{"line":319,"column":4},"end":{"line":319,"column":58}},"180":{"start":{"line":323,"column":0},"end":{"line":333,"column":1}},"181":{"start":{"line":324,"column":4},"end":{"line":326,"column":5}},"182":{"start":{"line":325,"column":8},"end":{"line":325,"column":26}},"183":{"start":{"line":327,"column":4},"end":{"line":327,"column":20}},"184":{"start":{"line":329,"column":4},"end":{"line":329,"column":27}},"185":{"start":{"line":330,"column":4},"end":{"line":330,"column":26}},"186":{"start":{"line":331,"column":4},"end":{"line":331,"column":23}},"187":{"start":{"line":332,"column":4},"end":{"line":332,"column":19}},"188":{"start":{"line":335,"column":0},"end":{"line":339,"column":2}},"189":{"start":{"line":336,"column":4},"end":{"line":336,"column":20}},"190":{"start":{"line":338,"column":4},"end":{"line":338,"column":27}},"191":{"start":{"line":341,"column":0},"end":{"line":351,"column":2}},"192":{"start":{"line":342,"column":4},"end":{"line":342,"column":20}},"193":{"start":{"line":344,"column":4},"end":{"line":344,"column":36}},"194":{"start":{"line":346,"column":4},"end":{"line":346,"column":46}},"195":{"start":{"line":347,"column":4},"end":{"line":350,"column":6}},"196":{"start":{"line":353,"column":0},"end":{"line":359,"column":2}},"197":{"start":{"line":354,"column":4},"end":{"line":354,"column":20}},"198":{"start":{"line":355,"column":4},"end":{"line":355,"column":55}},"199":{"start":{"line":357,"column":4},"end":{"line":357,"column":58}},"200":{"start":{"line":358,"column":4},"end":{"line":358,"column":17}},"201":{"start":{"line":361,"column":0},"end":{"line":392,"column":1}},"202":{"start":{"line":362,"column":4},"end":{"line":362,"column":30}},"203":{"start":{"line":363,"column":4},"end":{"line":363,"column":10}},"204":{"start":{"line":364,"column":4},"end":{"line":364,"column":19}},"205":{"start":{"line":365,"column":4},"end":{"line":365,"column":21}},"206":{"start":{"line":366,"column":4},"end":{"line":366,"column":16}},"207":{"start":{"line":367,"column":4},"end":{"line":367,"column":11}},"208":{"start":{"line":369,"column":4},"end":{"line":375,"column":5}},"209":{"start":{"line":370,"column":8},"end":{"line":370,"column":29}},"210":{"start":{"line":371,"column":8},"end":{"line":371,"column":31}},"211":{"start":{"line":372,"column":8},"end":{"line":372,"column":25}},"212":{"start":{"line":373,"column":8},"end":{"line":373,"column":24}},"213":{"start":{"line":374,"column":8},"end":{"line":374,"column":28}},"214":{"start":{"line":377,"column":4},"end":{"line":377,"column":27}},"215":{"start":{"line":379,"column":4},"end":{"line":387,"column":5}},"216":{"start":{"line":380,"column":8},"end":{"line":380,"column":42}},"217":{"start":{"line":381,"column":8},"end":{"line":386,"column":9}},"218":{"start":{"line":382,"column":12},"end":{"line":382,"column":33}},"219":{"start":{"line":383,"column":12},"end":{"line":383,"column":32}},"220":{"start":{"line":385,"column":12},"end":{"line":385,"column":32}},"221":{"start":{"line":389,"column":4},"end":{"line":389,"column":34}},"222":{"start":{"line":391,"column":4},"end":{"line":391,"column":16}},"223":{"start":{"line":394,"column":0},"end":{"line":394,"column":33}},"224":{"start":{"line":394,"column":19},"end":{"line":394,"column":31}},"225":{"start":{"line":397,"column":4},"end":{"line":397,"column":63}}},"branchMap":{"1":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"2":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":30}},{"start":{"line":71,"column":35},"end":{"line":71,"column":42}},{"start":{"line":71,"column":46},"end":{"line":71,"column":72}}]},"3":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"4":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":15},"end":{"line":90,"column":15}},{"start":{"line":90,"column":15},"end":{"line":90,"column":15}}]},"5":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":19},"end":{"line":90,"column":26}},{"start":{"line":90,"column":30},"end":{"line":90,"column":45}}]},"6":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":12},"end":{"line":97,"column":12}},{"start":{"line":97,"column":12},"end":{"line":97,"column":12}}]},"7":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":17},"end":{"line":97,"column":49}},{"start":{"line":97,"column":55},"end":{"line":97,"column":78}}]},"8":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"9":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":12}},{"start":{"line":107,"column":12},"end":{"line":107,"column":12}}]},"10":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"11":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":4},"end":{"line":163,"column":4}},{"start":{"line":163,"column":4},"end":{"line":163,"column":4}}]},"12":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":4},"end":{"line":175,"column":4}},{"start":{"line":175,"column":4},"end":{"line":175,"column":4}}]},"13":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":4},"end":{"line":179,"column":4}},{"start":{"line":179,"column":4},"end":{"line":179,"column":4}}]},"14":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":4},"end":{"line":185,"column":4}},{"start":{"line":185,"column":4},"end":{"line":185,"column":4}}]},"15":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":4},"end":{"line":212,"column":4}},{"start":{"line":212,"column":4},"end":{"line":212,"column":4}}]},"16":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":4},"end":{"line":216,"column":4}},{"start":{"line":216,"column":4},"end":{"line":216,"column":4}}]},"17":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":8},"end":{"line":233,"column":8}},{"start":{"line":233,"column":8},"end":{"line":233,"column":8}}]},"18":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":8},"end":{"line":241,"column":8}},{"start":{"line":241,"column":8},"end":{"line":241,"column":8}}]},"19":{"line":241,"type":"binary-expr","locations":[{"start":{"line":241,"column":12},"end":{"line":241,"column":37}},{"start":{"line":242,"column":12},"end":{"line":242,"column":60}}]},"20":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"21":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":8},"end":{"line":262,"column":8}},{"start":{"line":262,"column":8},"end":{"line":262,"column":8}}]},"22":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":4},"end":{"line":303,"column":4}},{"start":{"line":303,"column":4},"end":{"line":303,"column":4}}]},"23":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":4},"end":{"line":307,"column":4}},{"start":{"line":307,"column":4},"end":{"line":307,"column":4}}]},"24":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":4},"end":{"line":324,"column":4}},{"start":{"line":324,"column":4},"end":{"line":324,"column":4}}]},"25":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":8},"end":{"line":381,"column":8}},{"start":{"line":381,"column":8},"end":{"line":381,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","function Range(lo, hi) {","    var self = this;","","    self.lo = lo;","    self.hi = hi;","}","","// Scale this range by another range","Range.prototype.multiply = function multiply(range) {","    var self = this;","","    var diff = self.hi - self.lo;","","    self.hi = self.lo + (range.hi * diff);","    self.lo += (range.lo * diff);","};","","Range.prototype.inspect = ","Range.prototype.toString = function toString() {","    var self = this;","","    return \"Range(\" + self.lo + \", \" + self.hi + \")\";","};","","// A max-score (pre-computed) for peer selection","","// This is used for every DFS. It will end up being the size of the largest","// peer list.","var dfsStack = [0, 1, 2];","","function PeerHeap() {","    var self = this;","","    self.array = [];","    self.rangehis = [];","    self.rangelos = [];","}","","PeerHeap.prototype.chooseWeightedRandom = function chooseWeightedRandom(threshold, filter) {","    var self = this;","","    var chosenPeer = null;","    var maxRangeStart = self.array[0].range.lo;","    var highestProbability = 0;","    var firstScore = self.array[0].peer.getScore();","    var stackBegin = 0;","    var stackEnd = 0;","","    if (firstScore > threshold && (!filter || filter(self.array[0].peer))) {","        chosenPeer = self.array[0].peer;","        highestProbability = firstScore;","        stackBegin = 1;","        stackEnd = 2;","    } ","","    while (stackBegin <= stackEnd) {","        var i = dfsStack[stackBegin];","        stackBegin++;","","        var el = self.array[i];","","        if (self.rangehis[i] <= maxRangeStart) {","            // This range ends before the range with the largest start begins,","            // so it can't possibly be chosen over any of the ranges we've","            // seen. All ranges below this one have a smaller end, so this","            // range and any below it can't be chosen.","            continue;","        } else if (!filter || filter(el.peer)) {","            maxRangeStart = Math.max(maxRangeStart, self.rangelos[i]);","","            var lo = self.rangelos[i];","            var hi = self.rangehis[i];","            var probability = lo + ((hi - lo) * Math.random());","","            if ((probability > highestProbability) && (probability > threshold)) {","                highestProbability = probability;","                chosenPeer = el.peer;","            }","        }","","        var left = 2 * i + 1;","        var right = left + 1;","        if (left < self.array.length) {","            dfsStack[++stackEnd] = left;","            if (right < self.array.length) {","                dfsStack[++stackEnd] = right;","            }","        }","    }","","    return chosenPeer;","};","","PeerHeap.prototype.choose = function choose(threshold, filter) {","    var self = this;","","    if (!self.array.length) {","        return null;","    }","","    return self.chooseWeightedRandom(threshold, filter);","};","","PeerHeap.prototype.clear = function clear() {","    var self = this;","","    for (var i = 0; i < self.array.length; i++) {","        var el = self.array[i];","        el.heap = null;","        el.peer = null;","        el.score = 0;","        el.index = 0;","        el.range = null;","    }","    self.array.length = 0;","};","","PeerHeap.prototype.add = function add(peer) {","    var self = this;","","    var range = peer.scoreRange;","    var i = self.push(peer, range);","    var el = self.array[i];","    return el;","};","","PeerHeap.prototype.rescore = function rescore() {","    var self = this;","","    for (var i = 0; i < self.array.length; i++) {","        var el = self.array[i];","        el.range = el.peer.getScoreRange();","        el.score = el.range.hi;","    }","    self.heapify();","};","","PeerHeap.prototype.heapify = function heapify() {","    var self = this;","","    if (self.array.length <= 1) {","        return;","    }","","    for (var i = Math.floor(self.array.length / 2 - 1); i >= 0; i--) {","        self.siftdown(i);","    }","};","","PeerHeap.prototype.remove = function remove(i) {","    var self = this;","","    if (i >= self.array.length) {","        return;","    }","","    if (self.array.length === 1) {","        self.array.pop();","        return;","    }","","    var j = self.array.length - 1;","    if (i === j) {","        self.array.pop();","        return;","    }","","    self.swap(i, j);","    self.array.pop();","    self.siftup(i);","};","","PeerHeap.prototype.push = function push(peer, range) {","    var self = this;","","    var el = new PeerHeapElement(self);","    el.peer = peer;","    el.range = range;","    el.score = range.hi;","    el.index = self.array.length;","","    self.array.push(el);","    return self.siftup(el.index);","};","","PeerHeap.prototype.pop = function pop() {","    var self = this;","    var peer = null;","","    if (!self.array.length) {","        return peer;","    }","","    if (self.array.length === 1) {","        peer = self.array.pop();","        return peer;","    }","","    peer = self.array[0].peer;","    self.array[0] = self.array.pop();","    self.siftdown(0);","","    return peer;","};","","PeerHeap.prototype.siftdown = function siftdown(i) {","    var self = this;","","    while (true) {","        var left = (2 * i) + 1;","        if (left >= self.array.length) {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            return i;","        }","","        var right = left + 1;","        var child = left;","        if (right < self.array.length &&","            self.array[right].score > self.array[left].score) {","            child = right;","        }","","        if (self.array[child].score > self.array[i].score) {","            self.swap(i, child);","            i = child;","        } else {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            return i;","        }","    }","};","","PeerHeap.prototype.siftup = function siftup(i) {","    var self = this;","","    while (i > 0) {","        var par = Math.floor((i - 1) / 2);","        if (self.array[i].score > self.array[par].score) {","            self.swap(i, par);","            i = par;","        } else {","            self.rangehis[i] = self.array[i].range.hi;","            self.rangelos[i] = self.array[i].range.lo;","            return i;","        }","    }","","    self.rangehis[0] = self.array[0].range.hi;","    self.rangelos[0] = self.array[0].range.lo;","","    return 0;","};","","PeerHeap.prototype.swap = function swap(i, j) {","    var self = this;","","    var a = self.array[i];","    var b = self.array[j];","","    self.array[i] = b;","    self.array[j] = a;","    b.index = i;","    a.index = j;","};","","function PeerHeapElement(heap) {","    var self = this;","","    self.heap = heap;","    self.peer = null;","    self.score = 0;","    self.index = 0;","    self.range = null;","}","","PeerHeapElement.prototype.rescore = function rescore(range) {","    var self = this;","","    if (!self.heap) {","        return;","    }","","    if (!range) {","        self.range = self.peer.scoreRange;","    } else {","        self.range = range;","    }","","    self.score = self.range.hi;","    self.index = self.heap.siftup(self.index);","    self.index = self.heap.siftdown(self.index);","};","","function rand(lo, hi) {","    return Math.floor(Math.random() * (hi - lo + 1) + lo);","    //return (lcg.rand() % (hi - lo + 1)) + lo;","}","","function Peer() {","    if (!(this instanceof Peer)) {","        return new Peer();","    }","    var self = this;","","    self.scoreRange = null;","    self.pendingCount = 0;","    self.randPending();","    self.el = null;","}","","Peer.prototype.getScoreRange = function getScoreRange() {","    var self = this;","","    return self.scoreRange;","};","","Peer.prototype.randPending = function randPending() {","    var self = this;","","    self.pendingCount = rand(0, 10);","    //var nums = [rand(0, 100), rand(0, 100)];","    var nums = [Math.random(), Math.random()];","    self.scoreRange = new Range(","        Math.min(nums[0], nums[1]),","        Math.max(nums[0], nums[1])","    );","};","","Peer.prototype.getScore = function getScore() {","    var self = this;","    var diff = self.scoreRange.hi - self.scoreRange.lo;","    //var num = rand(self.scoreRange.lo, self.scoreRange.hi);","    var score = self.scoreRange.lo + diff * Math.random();","    return score;","};","","function benchmark(numPeers, numChoices) {","    var heap = new PeerHeap();","    var i;","    var peers = [];","    var heapEls = [];","    var newPeer;","    var el;","","    for (i = 0; i < numPeers; i++) {","        newPeer = new Peer();","        el = heap.add(newPeer);","        heapEls.push(el);","        newPeer.el = el;","        peers.push(newPeer);","    }","","    var start = Date.now();","","    for (i = 0; i < numChoices; i++) {","        var choice = heap.choose(0, noop);","        if (choice) {","            choice.randPending();","            choice.el.rescore();","        } else {","            print(\"no choice!\");","        }","    }","","    var time = Date.now() - start;","","    return time;","}","","function noop () { return true; }","","//while (true) {","    print(\"benchmark(1000, 50000):\", benchmark(1000, 1000000));","//}","//print(\"benchmark(1000, 10000000):\", benchmark(1000, 1000000000));","",""],"l":{"23":1,"24":0,"26":0,"27":0,"31":2,"32":0,"34":0,"36":0,"37":0,"40":2,"42":0,"44":0,"51":2,"53":1,"54":0,"56":0,"57":0,"58":0,"61":2,"62":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"71":0,"72":0,"73":0,"74":0,"75":0,"78":0,"79":0,"80":0,"82":0,"84":0,"89":0,"90":0,"91":0,"93":0,"94":0,"95":0,"97":0,"98":0,"99":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"113":0,"116":2,"117":0,"119":0,"120":0,"123":0,"126":2,"127":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"137":0,"140":2,"141":0,"143":0,"144":0,"145":0,"146":0,"149":2,"150":0,"152":0,"153":0,"154":0,"155":0,"157":0,"160":2,"161":0,"163":0,"164":0,"167":0,"168":0,"172":2,"173":0,"175":0,"176":0,"179":0,"180":0,"181":0,"184":0,"185":0,"186":0,"187":0,"190":0,"191":0,"192":0,"195":2,"196":0,"198":0,"199":0,"200":0,"201":0,"202":0,"204":0,"205":0,"208":2,"209":0,"210":0,"212":0,"213":0,"216":0,"217":0,"218":0,"221":0,"222":0,"223":0,"225":0,"228":2,"229":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"239":0,"240":0,"241":0,"243":0,"246":0,"247":0,"248":0,"250":0,"251":0,"252":0,"257":2,"258":0,"260":0,"261":0,"262":0,"263":0,"264":0,"266":0,"267":0,"268":0,"272":0,"273":0,"275":0,"278":2,"279":0,"281":0,"282":0,"284":0,"285":0,"286":0,"287":0,"290":1,"291":0,"293":0,"294":0,"295":0,"296":0,"297":0,"300":2,"301":0,"303":0,"304":0,"307":0,"308":0,"310":0,"313":0,"314":0,"315":0,"318":1,"319":0,"323":1,"324":0,"325":0,"327":0,"329":0,"330":0,"331":0,"332":0,"335":2,"336":0,"338":0,"341":2,"342":0,"344":0,"346":0,"347":0,"353":2,"354":0,"355":0,"357":0,"358":0,"361":1,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"377":0,"379":0,"380":0,"381":0,"382":0,"383":0,"385":0,"389":0,"391":0,"394":1,"397":2}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/multi_bench.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/multi_bench.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":1,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":1,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":1,"161":0,"162":0,"163":1,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":1,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":1,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"fnMap":{"1":{"name":"Test","line":85,"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":20}}},"2":{"name":"copy","line":109,"loc":{"start":{"line":109,"column":22},"end":{"line":109,"column":38}}},"3":{"name":"run","line":113,"loc":{"start":{"line":113,"column":21},"end":{"line":113,"column":44}}},"4":{"name":"onReady","line":124,"loc":{"start":{"line":124,"column":4},"end":{"line":124,"column":26}}},"5":{"name":"newClient","line":138,"loc":{"start":{"line":138,"column":27},"end":{"line":138,"column":60}}},"6":{"name":"report","line":173,"loc":{"start":{"line":173,"column":37},"end":{"line":173,"column":59}}},"7":{"name":"listened","line":196,"loc":{"start":{"line":196,"column":41},"end":{"line":196,"column":64}}},"8":{"name":"pinged","line":212,"loc":{"start":{"line":212,"column":38},"end":{"line":212,"column":60}}},"9":{"name":"start","line":223,"loc":{"start":{"line":223,"column":23},"end":{"line":223,"column":48}}},"10":{"name":"fillPipeline","line":228,"loc":{"start":{"line":228,"column":30},"end":{"line":228,"column":62}}},"11":{"name":"stopClients","line":243,"loc":{"start":{"line":243,"column":29},"end":{"line":243,"column":60}}},"12":{"name":"delayCloseByFudgeFactor","line":248,"loc":{"start":{"line":248,"column":15},"end":{"line":248,"column":50}}},"13":{"name":"each","line":249,"loc":{"start":{"line":249,"column":29},"end":{"line":249,"column":51}}},"14":{"name":"closed","line":256,"loc":{"start":{"line":256,"column":4},"end":{"line":256,"column":22}}},"15":{"name":"sendNext","line":263,"loc":{"start":{"line":263,"column":26},"end":{"line":263,"column":46}}},"16":{"name":"done","line":282,"loc":{"start":{"line":282,"column":4},"end":{"line":282,"column":28}}},"17":{"name":"getStats","line":295,"loc":{"start":{"line":295,"column":26},"end":{"line":295,"column":46}}},"18":{"name":"printStats","line":307,"loc":{"start":{"line":307,"column":28},"end":{"line":307,"column":50}}},"19":{"name":"each","line":317,"loc":{"start":{"line":317,"column":26},"end":{"line":317,"column":50}}},"20":{"name":"each","line":332,"loc":{"start":{"line":332,"column":19},"end":{"line":332,"column":39}}},"21":{"name":"eachLine","line":349,"loc":{"start":{"line":349,"column":21},"end":{"line":349,"column":48}}},"22":{"name":"eachPipe","line":357,"loc":{"start":{"line":357,"column":26},"end":{"line":357,"column":54}}},"23":{"name":"expectedError","line":375,"loc":{"start":{"line":375,"column":4},"end":{"line":375,"column":32}}},"24":{"name":"next","line":381,"loc":{"start":{"line":381,"column":0},"end":{"line":381,"column":26}}},"25":{"name":"runit","line":390,"loc":{"start":{"line":390,"column":13},"end":{"line":390,"column":33}}},"26":{"name":"delayNext","line":395,"loc":{"start":{"line":395,"column":19},"end":{"line":395,"column":40}}},"27":{"name":"onRageQuit","line":401,"loc":{"start":{"line":401,"column":0},"end":{"line":401,"column":25}}},"28":{"name":"finish","line":408,"loc":{"start":{"line":408,"column":11},"end":{"line":408,"column":32}}},"29":{"name":"parseIntList","line":416,"loc":{"start":{"line":416,"column":0},"end":{"line":416,"column":27}}},"30":{"name":"each","line":425,"loc":{"start":{"line":425,"column":13},"end":{"line":425,"column":33}}}},"statementMap":{"1":{"start":{"line":24,"column":0},"end":{"line":24,"column":43}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":46}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":38}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":48}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":56}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":37}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":52}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":41}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":50}},"13":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}},"14":{"start":{"line":42,"column":0},"end":{"line":57,"column":3}},"15":{"start":{"line":59,"column":0},"end":{"line":59,"column":51}},"16":{"start":{"line":60,"column":0},"end":{"line":60,"column":47}},"17":{"start":{"line":61,"column":0},"end":{"line":61,"column":49}},"18":{"start":{"line":62,"column":0},"end":{"line":62,"column":44}},"19":{"start":{"line":63,"column":0},"end":{"line":63,"column":38}},"20":{"start":{"line":65,"column":0},"end":{"line":65,"column":23}},"21":{"start":{"line":66,"column":0},"end":{"line":66,"column":21}},"22":{"start":{"line":67,"column":0},"end":{"line":67,"column":17}},"23":{"start":{"line":68,"column":0},"end":{"line":68,"column":34}},"24":{"start":{"line":69,"column":0},"end":{"line":69,"column":18}},"25":{"start":{"line":71,"column":0},"end":{"line":77,"column":1}},"26":{"start":{"line":72,"column":4},"end":{"line":72,"column":61}},"27":{"start":{"line":74,"column":4},"end":{"line":74,"column":55}},"28":{"start":{"line":75,"column":4},"end":{"line":75,"column":38}},"29":{"start":{"line":76,"column":4},"end":{"line":76,"column":45}},"30":{"start":{"line":79,"column":0},"end":{"line":81,"column":1}},"31":{"start":{"line":80,"column":4},"end":{"line":80,"column":36}},"32":{"start":{"line":85,"column":0},"end":{"line":107,"column":1}},"33":{"start":{"line":86,"column":4},"end":{"line":86,"column":21}},"34":{"start":{"line":88,"column":4},"end":{"line":88,"column":41}},"35":{"start":{"line":89,"column":4},"end":{"line":89,"column":34}},"36":{"start":{"line":90,"column":4},"end":{"line":90,"column":34}},"37":{"start":{"line":92,"column":4},"end":{"line":92,"column":25}},"38":{"start":{"line":93,"column":4},"end":{"line":93,"column":22}},"39":{"start":{"line":94,"column":4},"end":{"line":94,"column":26}},"40":{"start":{"line":95,"column":4},"end":{"line":95,"column":26}},"41":{"start":{"line":96,"column":4},"end":{"line":96,"column":31}},"42":{"start":{"line":97,"column":4},"end":{"line":97,"column":57}},"43":{"start":{"line":98,"column":4},"end":{"line":100,"column":6}},"44":{"start":{"line":102,"column":4},"end":{"line":102,"column":50}},"45":{"start":{"line":103,"column":4},"end":{"line":103,"column":48}},"46":{"start":{"line":104,"column":4},"end":{"line":104,"column":50}},"47":{"start":{"line":106,"column":4},"end":{"line":106,"column":44}},"48":{"start":{"line":109,"column":0},"end":{"line":111,"column":2}},"49":{"start":{"line":110,"column":4},"end":{"line":110,"column":31}},"50":{"start":{"line":113,"column":0},"end":{"line":136,"column":2}},"51":{"start":{"line":114,"column":4},"end":{"line":114,"column":20}},"52":{"start":{"line":115,"column":4},"end":{"line":115,"column":10}},"53":{"start":{"line":117,"column":4},"end":{"line":117,"column":29}},"54":{"start":{"line":119,"column":4},"end":{"line":119,"column":29}},"55":{"start":{"line":120,"column":4},"end":{"line":122,"column":5}},"56":{"start":{"line":121,"column":8},"end":{"line":121,"column":35}},"57":{"start":{"line":124,"column":4},"end":{"line":135,"column":5}},"58":{"start":{"line":125,"column":8},"end":{"line":129,"column":9}},"59":{"start":{"line":127,"column":12},"end":{"line":127,"column":26}},"60":{"start":{"line":128,"column":12},"end":{"line":128,"column":19}},"61":{"start":{"line":131,"column":8},"end":{"line":131,"column":18}},"62":{"start":{"line":132,"column":8},"end":{"line":134,"column":9}},"63":{"start":{"line":133,"column":12},"end":{"line":133,"column":33}},"64":{"start":{"line":138,"column":0},"end":{"line":221,"column":2}},"65":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"66":{"start":{"line":140,"column":4},"end":{"line":140,"column":32}},"67":{"start":{"line":141,"column":4},"end":{"line":153,"column":7}},"68":{"start":{"line":163,"column":4},"end":{"line":178,"column":5}},"69":{"start":{"line":164,"column":8},"end":{"line":171,"column":11}},"70":{"start":{"line":173,"column":8},"end":{"line":177,"column":10}},"71":{"start":{"line":174,"column":12},"end":{"line":176,"column":15}},"72":{"start":{"line":180,"column":4},"end":{"line":180,"column":37}},"73":{"start":{"line":181,"column":4},"end":{"line":187,"column":5}},"74":{"start":{"line":182,"column":8},"end":{"line":182,"column":19}},"75":{"start":{"line":183,"column":8},"end":{"line":183,"column":40}},"76":{"start":{"line":184,"column":8},"end":{"line":186,"column":9}},"77":{"start":{"line":185,"column":12},"end":{"line":185,"column":54}},"78":{"start":{"line":189,"column":4},"end":{"line":194,"column":7}},"79":{"start":{"line":195,"column":4},"end":{"line":195,"column":35}},"80":{"start":{"line":196,"column":4},"end":{"line":220,"column":7}},"81":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"82":{"start":{"line":198,"column":12},"end":{"line":198,"column":33}},"83":{"start":{"line":200,"column":8},"end":{"line":200,"column":34}},"84":{"start":{"line":202,"column":8},"end":{"line":219,"column":15}},"85":{"start":{"line":213,"column":16},"end":{"line":215,"column":17}},"86":{"start":{"line":214,"column":20},"end":{"line":214,"column":42}},"87":{"start":{"line":216,"column":16},"end":{"line":216,"column":75}},"88":{"start":{"line":217,"column":16},"end":{"line":217,"column":73}},"89":{"start":{"line":218,"column":16},"end":{"line":218,"column":27}},"90":{"start":{"line":223,"column":0},"end":{"line":226,"column":2}},"91":{"start":{"line":224,"column":4},"end":{"line":224,"column":32}},"92":{"start":{"line":225,"column":4},"end":{"line":225,"column":32}},"93":{"start":{"line":228,"column":0},"end":{"line":241,"column":2}},"94":{"start":{"line":229,"column":4},"end":{"line":229,"column":62}},"95":{"start":{"line":231,"column":4},"end":{"line":235,"column":5}},"96":{"start":{"line":232,"column":8},"end":{"line":232,"column":28}},"97":{"start":{"line":233,"column":8},"end":{"line":233,"column":19}},"98":{"start":{"line":234,"column":8},"end":{"line":234,"column":24}},"99":{"start":{"line":237,"column":4},"end":{"line":240,"column":5}},"100":{"start":{"line":238,"column":8},"end":{"line":238,"column":26}},"101":{"start":{"line":239,"column":8},"end":{"line":239,"column":35}},"102":{"start":{"line":243,"column":0},"end":{"line":261,"column":2}},"103":{"start":{"line":244,"column":4},"end":{"line":244,"column":20}},"104":{"start":{"line":246,"column":4},"end":{"line":246,"column":18}},"105":{"start":{"line":248,"column":4},"end":{"line":254,"column":13}},"106":{"start":{"line":249,"column":8},"end":{"line":252,"column":11}},"107":{"start":{"line":250,"column":12},"end":{"line":250,"column":20}},"108":{"start":{"line":251,"column":12},"end":{"line":251,"column":55}},"109":{"start":{"line":253,"column":8},"end":{"line":253,"column":17}},"110":{"start":{"line":256,"column":4},"end":{"line":260,"column":5}},"111":{"start":{"line":257,"column":8},"end":{"line":259,"column":9}},"112":{"start":{"line":258,"column":12},"end":{"line":258,"column":32}},"113":{"start":{"line":263,"column":0},"end":{"line":293,"column":2}},"114":{"start":{"line":264,"column":4},"end":{"line":264,"column":20}},"115":{"start":{"line":265,"column":4},"end":{"line":265,"column":60}},"116":{"start":{"line":266,"column":4},"end":{"line":266,"column":27}},"117":{"start":{"line":268,"column":4},"end":{"line":279,"column":7}},"118":{"start":{"line":280,"column":4},"end":{"line":280,"column":52}},"119":{"start":{"line":282,"column":4},"end":{"line":292,"column":5}},"120":{"start":{"line":283,"column":8},"end":{"line":288,"column":9}},"121":{"start":{"line":284,"column":12},"end":{"line":287,"column":13}},"122":{"start":{"line":286,"column":16},"end":{"line":286,"column":26}},"123":{"start":{"line":289,"column":8},"end":{"line":289,"column":33}},"124":{"start":{"line":290,"column":8},"end":{"line":290,"column":55}},"125":{"start":{"line":291,"column":8},"end":{"line":291,"column":38}},"126":{"start":{"line":295,"column":0},"end":{"line":305,"column":2}},"127":{"start":{"line":296,"column":4},"end":{"line":296,"column":45}},"128":{"start":{"line":297,"column":4},"end":{"line":297,"column":32}},"129":{"start":{"line":298,"column":4},"end":{"line":298,"column":45}},"130":{"start":{"line":299,"column":4},"end":{"line":299,"column":38}},"131":{"start":{"line":300,"column":4},"end":{"line":300,"column":39}},"132":{"start":{"line":301,"column":4},"end":{"line":301,"column":46}},"133":{"start":{"line":302,"column":4},"end":{"line":302,"column":34}},"134":{"start":{"line":303,"column":4},"end":{"line":303,"column":50}},"135":{"start":{"line":304,"column":4},"end":{"line":304,"column":15}},"136":{"start":{"line":307,"column":0},"end":{"line":310,"column":2}},"137":{"start":{"line":308,"column":4},"end":{"line":308,"column":30}},"138":{"start":{"line":309,"column":4},"end":{"line":309,"column":53}},"139":{"start":{"line":314,"column":0},"end":{"line":314,"column":15}},"140":{"start":{"line":316,"column":0},"end":{"line":325,"column":1}},"141":{"start":{"line":317,"column":4},"end":{"line":324,"column":7}},"142":{"start":{"line":318,"column":8},"end":{"line":323,"column":12}},"143":{"start":{"line":327,"column":0},"end":{"line":330,"column":3}},"144":{"start":{"line":332,"column":0},"end":{"line":379,"column":3}},"145":{"start":{"line":333,"column":4},"end":{"line":333,"column":43}},"146":{"start":{"line":334,"column":4},"end":{"line":334,"column":37}},"147":{"start":{"line":337,"column":4},"end":{"line":337,"column":54}},"148":{"start":{"line":338,"column":4},"end":{"line":340,"column":5}},"149":{"start":{"line":339,"column":8},"end":{"line":339,"column":56}},"150":{"start":{"line":343,"column":4},"end":{"line":343,"column":52}},"151":{"start":{"line":345,"column":4},"end":{"line":345,"column":32}},"152":{"start":{"line":346,"column":4},"end":{"line":352,"column":5}},"153":{"start":{"line":347,"column":8},"end":{"line":351,"column":15}},"154":{"start":{"line":350,"column":16},"end":{"line":350,"column":51}},"155":{"start":{"line":353,"column":4},"end":{"line":355,"column":5}},"156":{"start":{"line":354,"column":8},"end":{"line":354,"column":45}},"157":{"start":{"line":357,"column":4},"end":{"line":373,"column":7}},"158":{"start":{"line":358,"column":8},"end":{"line":365,"column":12}},"159":{"start":{"line":366,"column":8},"end":{"line":372,"column":12}},"160":{"start":{"line":375,"column":4},"end":{"line":378,"column":5}},"161":{"start":{"line":376,"column":8},"end":{"line":376,"column":52}},"162":{"start":{"line":377,"column":8},"end":{"line":377,"column":49}},"163":{"start":{"line":381,"column":0},"end":{"line":399,"column":1}},"164":{"start":{"line":382,"column":4},"end":{"line":384,"column":5}},"165":{"start":{"line":383,"column":8},"end":{"line":383,"column":26}},"166":{"start":{"line":385,"column":4},"end":{"line":387,"column":5}},"167":{"start":{"line":386,"column":8},"end":{"line":386,"column":36}},"168":{"start":{"line":389,"column":4},"end":{"line":389,"column":31}},"169":{"start":{"line":390,"column":4},"end":{"line":398,"column":7}},"170":{"start":{"line":391,"column":8},"end":{"line":394,"column":9}},"171":{"start":{"line":392,"column":12},"end":{"line":392,"column":22}},"172":{"start":{"line":393,"column":12},"end":{"line":393,"column":19}},"173":{"start":{"line":395,"column":8},"end":{"line":397,"column":17}},"174":{"start":{"line":396,"column":12},"end":{"line":396,"column":33}},"175":{"start":{"line":401,"column":0},"end":{"line":406,"column":1}},"176":{"start":{"line":402,"column":4},"end":{"line":405,"column":5}},"177":{"start":{"line":403,"column":8},"end":{"line":403,"column":27}},"178":{"start":{"line":404,"column":8},"end":{"line":404,"column":24}},"179":{"start":{"line":408,"column":0},"end":{"line":414,"column":3}},"180":{"start":{"line":409,"column":4},"end":{"line":412,"column":5}},"181":{"start":{"line":410,"column":8},"end":{"line":410,"column":27}},"182":{"start":{"line":411,"column":8},"end":{"line":411,"column":24}},"183":{"start":{"line":413,"column":4},"end":{"line":413,"column":20}},"184":{"start":{"line":416,"column":0},"end":{"line":428,"column":1}},"185":{"start":{"line":417,"column":4},"end":{"line":419,"column":5}},"186":{"start":{"line":418,"column":8},"end":{"line":418,"column":21}},"187":{"start":{"line":420,"column":4},"end":{"line":422,"column":5}},"188":{"start":{"line":421,"column":8},"end":{"line":421,"column":19}},"189":{"start":{"line":423,"column":4},"end":{"line":427,"column":11}},"190":{"start":{"line":426,"column":12},"end":{"line":426,"column":38}}},"branchMap":{"1":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":0},"end":{"line":71,"column":0}},{"start":{"line":71,"column":0},"end":{"line":71,"column":0}}]},"2":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":0},"end":{"line":79,"column":0}},{"start":{"line":79,"column":0},"end":{"line":79,"column":0}}]},"3":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":16},"end":{"line":89,"column":25}},{"start":{"line":89,"column":29},"end":{"line":89,"column":33}}]},"4":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":16},"end":{"line":90,"column":25}},{"start":{"line":90,"column":29},"end":{"line":90,"column":33}}]},"5":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":23},"end":{"line":97,"column":41}},{"start":{"line":97,"column":45},"end":{"line":97,"column":56}}]},"6":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":25},"end":{"line":98,"column":43}},{"start":{"line":98,"column":47},"end":{"line":100,"column":5}}]},"7":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"8":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":8},"end":{"line":132,"column":8}},{"start":{"line":132,"column":8},"end":{"line":132,"column":8}}]},"9":{"line":148,"type":"cond-expr","locations":[{"start":{"line":148,"column":34},"end":{"line":148,"column":35}},{"start":{"line":148,"column":38},"end":{"line":148,"column":42}}]},"10":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":4},"end":{"line":163,"column":4}},{"start":{"line":163,"column":4},"end":{"line":163,"column":4}}]},"11":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"12":{"line":192,"type":"cond-expr","locations":[{"start":{"line":192,"column":34},"end":{"line":192,"column":35}},{"start":{"line":192,"column":38},"end":{"line":192,"column":42}}]},"13":{"line":193,"type":"cond-expr","locations":[{"start":{"line":193,"column":40},"end":{"line":193,"column":42}},{"start":{"line":193,"column":45},"end":{"line":193,"column":46}}]},"14":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"15":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":16},"end":{"line":213,"column":16}},{"start":{"line":213,"column":16},"end":{"line":213,"column":16}}]},"16":{"line":231,"type":"binary-expr","locations":[{"start":{"line":231,"column":11},"end":{"line":231,"column":42}},{"start":{"line":231,"column":46},"end":{"line":231,"column":73}}]},"17":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":4}},{"start":{"line":237,"column":4},"end":{"line":237,"column":4}}]},"18":{"line":251,"type":"binary-expr","locations":[{"start":{"line":251,"column":13},"end":{"line":251,"column":30}},{"start":{"line":251,"column":34},"end":{"line":251,"column":40}}]},"19":{"line":257,"type":"if","locations":[{"start":{"line":257,"column":8},"end":{"line":257,"column":8}},{"start":{"line":257,"column":8},"end":{"line":257,"column":8}}]},"20":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":8},"end":{"line":283,"column":8}},{"start":{"line":283,"column":8},"end":{"line":283,"column":8}}]},"21":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":12},"end":{"line":284,"column":12}},{"start":{"line":284,"column":12},"end":{"line":284,"column":12}}]},"22":{"line":284,"type":"binary-expr","locations":[{"start":{"line":284,"column":16},"end":{"line":284,"column":35}},{"start":{"line":285,"column":16},"end":{"line":285,"column":50}}]},"23":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":0},"end":{"line":316,"column":0}},{"start":{"line":316,"column":0},"end":{"line":316,"column":0}}]},"24":{"line":338,"type":"if","locations":[{"start":{"line":338,"column":4},"end":{"line":338,"column":4}},{"start":{"line":338,"column":4},"end":{"line":338,"column":4}}]},"25":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":4},"end":{"line":346,"column":4}},{"start":{"line":346,"column":4},"end":{"line":346,"column":4}}]},"26":{"line":353,"type":"if","locations":[{"start":{"line":353,"column":4},"end":{"line":353,"column":4}},{"start":{"line":353,"column":4},"end":{"line":353,"column":4}}]},"27":{"line":360,"type":"cond-expr","locations":[{"start":{"line":360,"column":41},"end":{"line":360,"column":47}},{"start":{"line":360,"column":50},"end":{"line":360,"column":52}}]},"28":{"line":368,"type":"cond-expr","locations":[{"start":{"line":368,"column":41},"end":{"line":368,"column":47}},{"start":{"line":368,"column":50},"end":{"line":368,"column":52}}]},"29":{"line":376,"type":"binary-expr","locations":[{"start":{"line":376,"column":19},"end":{"line":376,"column":39}},{"start":{"line":376,"column":43},"end":{"line":376,"column":51}}]},"30":{"line":377,"type":"binary-expr","locations":[{"start":{"line":377,"column":15},"end":{"line":377,"column":39}},{"start":{"line":377,"column":43},"end":{"line":377,"column":48}}]},"31":{"line":382,"type":"if","locations":[{"start":{"line":382,"column":4},"end":{"line":382,"column":4}},{"start":{"line":382,"column":4},"end":{"line":382,"column":4}}]},"32":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":4},"end":{"line":385,"column":4}},{"start":{"line":385,"column":4},"end":{"line":385,"column":4}}]},"33":{"line":391,"type":"if","locations":[{"start":{"line":391,"column":8},"end":{"line":391,"column":8}},{"start":{"line":391,"column":8},"end":{"line":391,"column":8}}]},"34":{"line":402,"type":"if","locations":[{"start":{"line":402,"column":4},"end":{"line":402,"column":4}},{"start":{"line":402,"column":4},"end":{"line":402,"column":4}}]},"35":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":4},"end":{"line":409,"column":4}},{"start":{"line":409,"column":4},"end":{"line":409,"column":4}}]},"36":{"line":417,"type":"if","locations":[{"start":{"line":417,"column":4},"end":{"line":417,"column":4}},{"start":{"line":417,"column":4},"end":{"line":417,"column":4}}]},"37":{"line":420,"type":"if","locations":[{"start":{"line":420,"column":4},"end":{"line":420,"column":4}},{"start":{"line":420,"column":4},"end":{"line":420,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","/* eslint no-console:0 no-process-exit:0 */","","var Statsd = require('uber-statsd-client');","var metrics = require('metrics');","var process = require('process');","var setTimeout = require('timers').setTimeout;","var Buffer = require('buffer').Buffer;","var console = require('console');","","process.title = 'nodejs-benchmarks-multi_bench';","","var readBenchConfig = require('./read-bench-config.js');","var TChannel = require('../channel');","var Reporter = require('../tcollector/reporter.js');","var base2 = require('../test/lib/base2');","var LCGStream = require('../test/lib/rng_stream');","var errors = require('../errors.js');","","// TODO: disentangle the global closure of numClients and numRequestss and move","// these after the harness class declaration","var argv = readBenchConfig({","    alias: {","        m: 'multiplicity',","        c: 'numClients',","        r: 'numRequests',","        p: 'pipeline',","        s: 'sizes'","    },","    boolean: ['relay', 'trace', 'bad']","}, {","    multiplicity: 1,","    numClients: 5,","    numRequests: 20000,","    pipeline: '10,100,1000,20000',","    sizes: '4,4096'","});","","var multiplicity = parseInt(argv.multiplicity, 10);","var numClients = parseInt(argv.numClients, 10);","var numRequests = parseInt(argv.numRequests, 10);","argv.pipeline = parseIntList(argv.pipeline);","argv.sizes = parseIntList(argv.sizes);","","var DESTINATION_SERVER;","var DESTINATION_PORT;","var TRACE_SERVER;","var CLIENT_PORT = argv.clientPort;","var INSTANCES = 0;","","if (argv.relay) {","    DESTINATION_SERVER = '127.0.0.1:' + argv.relayServerPort;","} else {","    DESTINATION_SERVER = '127.0.0.1:' + argv.benchPort;","    DESTINATION_PORT = argv.benchPort;","    INSTANCES = parseInt(argv.instances, 10);","}","","if (argv.trace) {","    TRACE_SERVER = '127.0.0.1:7037';","}","","// -- test harness","","function Test(args) {","    this.args = args;","","    this.arg1 = new Buffer(args.command);","    this.arg2 = args.arg2 || null;","    this.arg3 = args.arg3 || null;","","    this.callback = null;","    this.clients = [];","    this.clientsReady = 0;","    this.commandsSent = 0;","    this.commandsCompleted = 0;","    this.maxPipeline = this.args.pipeline || numRequests;","    this.clientOptions = args.clientOptions || {","        returnBuffers: false","    };","","    this.connectLatency = new metrics.Histogram();","    this.readyLatency = new metrics.Histogram();","    this.commandLatency = new metrics.Histogram();","","    this.expectedError = args.expectedError;","}","","Test.prototype.copy = function copy() {","    return new Test(this.args);","};","","Test.prototype.run = function run(callback) {","    var self = this;","    var i;","","    this.callback = callback;","","    var counter = numClients;","    for (i = 0; i < numClients; i++) {","        self.newClient(i, onReady);","    }","","    function onReady(err) {","        if (err) {","            // TODO: wrap error \"failed to setup clients\"","            callback(err);","            return;","        }","","        counter--;","        if (counter === 0) {","            self.start(callback);","        }","    }","};","","Test.prototype.newClient = function newClient(id, callback) {","    var self = this;","    var port = CLIENT_PORT + id;","    var clientChan = TChannel({","        statTags: {","            app: 'my-client'","        },","        logger: require('debug-logtron')('client'),","        emitConnectionMetrics: false,","        trace: true,","        traceSample: argv.trace ? 1 : 0.01,","        statsd: new Statsd({","            host: '127.0.0.1',","            port: 7036","        })","    });","","    // // useful for demonstrating (lack of) tombstone leak","    // var OpKindMonitor = require('../monitor').OpKindMonitor;","    // (new OpKindMonitor(clientChan, {","    //     log: console.error,","    //     desc: 'client:' + id,","    //     interval: 5000,","    // })).run();","","    if (argv.trace) {","        var reporter = Reporter({","            channel: clientChan.makeSubChannel({","                serviceName: 'tcollector',","                peers: [TRACE_SERVER]","            }),","            logger: clientChan.logger,","            callerName: 'my-client'","        });","","        clientChan.tracer.reporter = function report(span) {","            reporter.report(span, {","                timeout: 10 * 1000","            });","        };","    }","","    var peers = [DESTINATION_SERVER];","    if (INSTANCES > 0) {","        peers = [];","        var basePort = DESTINATION_PORT;","        for (var i = 0; i < INSTANCES; i++) {","            peers.push('127.0.0.1:' + (basePort + i));","        }","    }","","    var client = clientChan.makeSubChannel({","        serviceName: 'benchmark',","        peers: peers,","        traceSample: argv.trace ? 1 : 0.01,","        minConnections: INSTANCES > 0 ? 10 : 1","    });","    client.createTime = Date.now();","    clientChan.listen(port, '127.0.0.1', function listened(err) {","        if (err) {","            return callback(err);","        }","        self.clients[id] = client;","        // sending a ping to pre-connect the socket","        client","            .request({","                serviceName: 'benchmark',","                hasNoParent: true,","                timeout: 30 * 1000,","                headers: {","                    as: 'raw',","                    cn: 'multi_bench'","                }","            })","            .send('ping', null, null, function pinged(err2) {","                if (err2) {","                    return callback(err2);","                }","                self.connectLatency.update(Date.now() - client.createTime);","                self.readyLatency.update(Date.now() - client.createTime);","                callback();","            });","    });","};","","Test.prototype.start = function start(callback) {","    this.testStart = Date.now();","    this.fillPipeline(callback);","};","","Test.prototype.fillPipeline = function fillPipeline(callback) {","    var pipeline = this.commandsSent - this.commandsCompleted;","","    while (this.commandsSent < numRequests && pipeline < this.maxPipeline) {","        this.commandsSent++;","        pipeline++;","        this.sendNext();","    }","","    if (this.commandsCompleted === numRequests) {","        this.printStats();","        this.stopClients(callback);","    }","};","","Test.prototype.stopClients = function stopClients(callback) {","    var self = this;","","    var count = 1;","","    setTimeout(function delayCloseByFudgeFactor() {","        self.clients.forEach(function each(client) {","            count++;","            (client.topChannel || client).quit(closed);","        });","        closed();","    }, 1000);","","    function closed() {","        if (--count <= 0) {","            self.callback(null);","        }","    }","};","","Test.prototype.sendNext = function sendNext() {","    var self = this;","    var curClient = this.commandsSent % this.clients.length;","    var start = Date.now();","","    var req = this.clients[curClient].request({","        serviceName: 'benchmark',","        hasNoParent: true,","        timeout: 30000,","        headers: {","            as: 'raw',","            cn: 'multi_bench',","            benchHeader1: 'bench value one',","            benchHeader2: 'bench value two',","            benchHeader3: 'bench value three'","        }","    });","    req.send(this.arg1, this.arg2, this.arg3, done);","","    function done(err, res) {","        if (err) {","            if (!self.expectedError ||","                !self.expectedError(err, req, res)) {","                throw err;","            }","        }","        self.commandsCompleted++;","        self.commandLatency.update(Date.now() - start);","        self.fillPipeline(onRageQuit);","    }","};","","Test.prototype.getStats = function getStats() {","    var obj = this.commandLatency.printObj();","    obj.descr = this.args.descr;","    obj.instanceNumber = argv.instanceNumber;","    obj.pipeline = this.args.pipeline;","    obj.numClients = this.clientsReady;","    obj.elapsed = Date.now() - this.testStart;","    obj.numRequests = numRequests;","    obj.rate = numRequests / (obj.elapsed / 1000);","    return obj;","};","","Test.prototype.printStats = function printStats() {","    var obj = this.getStats();","    process.stdout.write(JSON.stringify(obj) + '\\n');","};","","// -- define tests","","var tests = [];","","if (!argv.skipPing) {","    argv.pipeline.forEach(function each(pipeline) {","        tests.push(new Test({","            descr: 'PING',","            command: 'ping',","            args: null,","            pipeline: pipeline","        }));","    });","}","","var randBytes = new LCGStream({","    seed: 1234,","    limit: Infinity","});","","argv.sizes.forEach(function each(size) {","    var sizeDesc = base2.pretty(size, 'B');","    var key = 'foo_rand000000000000';","","    // 4 base64 encoded bytes per 3 raw bytes","    var buf = randBytes.read(Math.ceil(size / 4 * 3));","    if (!buf) {","        throw new Error('can\\'t have size ' + sizeDesc);","    }","","    // chop off any \"==\" trailer","    var str = buf.toString('base64').slice(0, size);","","    var expectedErrorTypes = {};","    if (argv.expectedError) {","        argv.expectedError","            .split(/,\\s*/)","            .forEach(function eachLine(errType) {","                expectedErrorTypes[errType] = true;","            });","    }","    if (argv.bad) {","        expectedErrorTypes.BadRequest = true;","    }","","    argv.pipeline.forEach(function eachPipe(pipeline) {","        tests.push(new Test({","            descr: 'SET ' + sizeDesc,","            command: 'set' + (argv.bad ? '_bad' : ''),","            arg2: key,","            arg3: str,","            pipeline: pipeline,","            expectedError: expectedError","        }));","        tests.push(new Test({","            descr: 'GET ' + sizeDesc,","            command: 'get' + (argv.bad ? '_bad' : ''),","            arg2: key,","            pipeline: pipeline,","            expectedError: expectedError","        }));","    });","","    function expectedError(err) {","        var type = errors.classify(err) || err.type;","        return expectedErrorTypes[type] || false;","    }","});","","function next(i, j, done) {","    if (i >= tests.length) {","        return done(null);","    }","    if (j >= multiplicity) {","        return next(i + 1, 0, done);","    }","","    var test = tests[i].copy();","    test.run(function runit(err) {","        if (err) {","            done(err);","            return;","        }","        setTimeout(function delayNext() {","            next(i, j + 1, done);","        }, 1000);","    });","}","","function onRageQuit(err) {","    if (err) {","        console.error(err);","        process.exit(1);","    }","}","","next(0, 0, function finish(err) {","    if (err) {","        console.error(err);","        process.exit(1);","    }","    process.exit(0);","});","","function parseIntList(str) {","    if (typeof str === 'number') {","        return [str];","    }","    if (Array.isArray(str)) {","        return str;","    }","    return str","        .split(/\\s*,\\s*/)","        .map(function each(part) {","            return parseInt(part, 10);","        });","}",""],"l":{"24":2,"25":0,"26":0,"27":0,"28":0,"29":0,"31":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"42":0,"59":0,"60":0,"61":0,"62":0,"63":0,"65":0,"66":0,"67":0,"68":0,"69":0,"71":0,"72":0,"74":0,"75":0,"76":0,"79":0,"80":0,"85":1,"86":0,"88":0,"89":0,"90":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"102":0,"103":0,"104":0,"106":0,"109":0,"110":0,"113":0,"114":0,"115":0,"117":0,"119":0,"120":0,"121":0,"124":1,"125":0,"127":0,"128":0,"131":0,"132":0,"133":0,"138":0,"139":0,"140":0,"141":0,"163":0,"164":0,"173":0,"174":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"189":0,"195":0,"196":0,"197":0,"198":0,"200":0,"202":0,"213":0,"214":0,"216":0,"217":0,"218":0,"223":0,"224":0,"225":0,"228":0,"229":0,"231":0,"232":0,"233":0,"234":0,"237":0,"238":0,"239":0,"243":0,"244":0,"246":0,"248":0,"249":0,"250":0,"251":0,"253":0,"256":1,"257":0,"258":0,"263":0,"264":0,"265":0,"266":0,"268":0,"280":0,"282":1,"283":0,"284":0,"286":0,"289":0,"290":0,"291":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"307":0,"308":0,"309":0,"314":0,"316":0,"317":0,"318":0,"327":0,"332":0,"333":0,"334":0,"337":0,"338":0,"339":0,"343":0,"345":0,"346":0,"347":0,"350":0,"353":0,"354":0,"357":0,"358":0,"366":0,"375":1,"376":0,"377":0,"381":1,"382":0,"383":0,"385":0,"386":0,"389":0,"390":0,"391":0,"392":0,"393":0,"395":0,"396":0,"401":1,"402":0,"403":0,"404":0,"408":0,"409":0,"410":0,"411":0,"413":0,"416":1,"417":0,"418":0,"420":0,"421":0,"423":0,"426":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/random_sample.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/random_sample.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"normalvariate","line":28,"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":70}}},"2":{"name":"sampleNormalRandom","line":30,"loc":{"start":{"line":30,"column":11},"end":{"line":30,"column":41}}},"3":{"name":"expovariate","line":43,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":61}}},"4":{"name":"sampleExponentialRandom","line":44,"loc":{"start":{"line":44,"column":11},"end":{"line":44,"column":46}}},"5":{"name":"fromString","line":49,"loc":{"start":{"line":49,"column":26},"end":{"line":49,"column":59}}}},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":25,"column":34}},"2":{"start":{"line":26,"column":0},"end":{"line":26,"column":26}},"3":{"start":{"line":28,"column":0},"end":{"line":41,"column":2}},"4":{"start":{"line":29,"column":4},"end":{"line":29,"column":59}},"5":{"start":{"line":30,"column":4},"end":{"line":40,"column":6}},"6":{"start":{"line":31,"column":8},"end":{"line":39,"column":9}},"7":{"start":{"line":32,"column":12},"end":{"line":32,"column":30}},"8":{"start":{"line":33,"column":12},"end":{"line":33,"column":36}},"9":{"start":{"line":34,"column":12},"end":{"line":34,"column":51}},"10":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"11":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"12":{"start":{"line":37,"column":16},"end":{"line":37,"column":38}},"13":{"start":{"line":43,"column":0},"end":{"line":47,"column":2}},"14":{"start":{"line":44,"column":4},"end":{"line":46,"column":6}},"15":{"start":{"line":45,"column":8},"end":{"line":45,"column":44}},"16":{"start":{"line":49,"column":0},"end":{"line":83,"column":2}},"17":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"18":{"start":{"line":51,"column":8},"end":{"line":51,"column":29}},"19":{"start":{"line":56,"column":4},"end":{"line":56,"column":41}},"20":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"21":{"start":{"line":58,"column":8},"end":{"line":58,"column":87}},"22":{"start":{"line":60,"column":4},"end":{"line":60,"column":24}},"23":{"start":{"line":61,"column":4},"end":{"line":61,"column":19}},"24":{"start":{"line":63,"column":4},"end":{"line":63,"column":45}},"25":{"start":{"line":64,"column":4},"end":{"line":66,"column":5}},"26":{"start":{"line":65,"column":8},"end":{"line":65,"column":62}},"27":{"start":{"line":68,"column":4},"end":{"line":68,"column":30}},"28":{"start":{"line":69,"column":4},"end":{"line":71,"column":5}},"29":{"start":{"line":70,"column":8},"end":{"line":70,"column":79}},"30":{"start":{"line":73,"column":4},"end":{"line":79,"column":5}},"31":{"start":{"line":74,"column":8},"end":{"line":74,"column":36}},"32":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"33":{"start":{"line":76,"column":12},"end":{"line":76,"column":74}},"34":{"start":{"line":78,"column":8},"end":{"line":78,"column":20}},"35":{"start":{"line":81,"column":4},"end":{"line":81,"column":22}},"36":{"start":{"line":82,"column":4},"end":{"line":82,"column":37}}},"branchMap":{"1":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":12}},{"start":{"line":36,"column":12},"end":{"line":36,"column":12}}]},"2":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"3":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"4":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"5":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"6":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","// Random sampling functions borrowed from python standard library","","var RandomSample = module.exports;","RandomSample.variate = {};","","RandomSample.variate.norm = function normalvariate(mu, sigma, random) {","    var nvMagicConst = 4 * Math.exp(-0.5) / Math.sqrt(2.0);","    return function sampleNormalRandom() {","        for (;;) {","            var u1 = random();","            var u2 = 1.0 - random();","            var z = nvMagicConst * (u1 - 0.5) / u2;","            var zz = z * z / 4.0;","            if (zz <= -Math.log(u2)) {","                return mu + z * sigma;","            }","        }","    };","};","","RandomSample.variate.expo = function expovariate(mu, random) {","    return function sampleExponentialRandom() {","        return -Math.log(1 - random()) * mu;","    };","};","","RandomSample.fromString = function fromString(str, random) {","    if (!random) {","        random = Math.random;","    }","","    // norm:mu,sigma","    // expo:mu","    var match = /^(\\w+):(.+)$/.exec(str);","    if (!match) {","        throw new Error('invalid random sample spec, expected \"kind:arg[,arg[,...]]\"');","    }","    var kind = match[1];","    str = match[2];","","    var variate = RandomSample.variate[kind];","    if (!variate) {","        throw new Error('invalid random sample kind ' + kind);","    }","","    var args = str.split(',');","    if (args.length !== variate.length - 1) {","        throw new Error('wrong number of args for random sample kind ' + kind);","    }","","    for (var i = 0; i < args.length; i++) {","        var n = parseFloat(args[i]);","        if (isNaN(n)) {","            throw new Error('invalid argument, not a number: ' + args[i]);","        }","        args[i] = n;","    }","","    args.push(random);","    return variate.apply(null, args);","};",""],"l":{"25":1,"26":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"43":1,"44":0,"45":0,"49":1,"50":0,"51":0,"56":0,"57":0,"58":0,"60":0,"61":0,"63":0,"64":0,"65":0,"68":0,"69":0,"70":0,"73":0,"74":0,"75":0,"76":0,"78":0,"81":0,"82":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/relay_server.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/relay_server.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"RelayServer","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":27}}},"2":{"name":"onListen","line":125,"loc":{"start":{"line":125,"column":4},"end":{"line":125,"column":24}}},"3":{"name":"connect","line":130,"loc":{"start":{"line":130,"column":32},"end":{"line":130,"column":51}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":43}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":56}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":31}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"6":{"start":{"line":29,"column":0},"end":{"line":29,"column":50}},"7":{"start":{"line":31,"column":0},"end":{"line":31,"column":23}},"8":{"start":{"line":33,"column":0},"end":{"line":35,"column":3}},"9":{"start":{"line":37,"column":0},"end":{"line":41,"column":1}},"10":{"start":{"line":38,"column":4},"end":{"line":38,"column":59}},"11":{"start":{"line":39,"column":7},"end":{"line":41,"column":1}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":59}},"13":{"start":{"line":43,"column":0},"end":{"line":43,"column":18}},"14":{"start":{"line":45,"column":0},"end":{"line":128,"column":1}},"15":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"16":{"start":{"line":48,"column":8},"end":{"line":48,"column":37}},"17":{"start":{"line":51,"column":4},"end":{"line":51,"column":20}},"18":{"start":{"line":53,"column":4},"end":{"line":53,"column":49}},"19":{"start":{"line":54,"column":4},"end":{"line":54,"column":59}},"20":{"start":{"line":55,"column":4},"end":{"line":55,"column":49}},"21":{"start":{"line":56,"column":4},"end":{"line":56,"column":59}},"22":{"start":{"line":57,"column":4},"end":{"line":60,"column":6}},"23":{"start":{"line":61,"column":4},"end":{"line":61,"column":59}},"24":{"start":{"line":62,"column":4},"end":{"line":62,"column":59}},"25":{"start":{"line":67,"column":4},"end":{"line":79,"column":7}},"26":{"start":{"line":81,"column":4},"end":{"line":81,"column":43}},"27":{"start":{"line":82,"column":4},"end":{"line":82,"column":37}},"28":{"start":{"line":83,"column":4},"end":{"line":83,"column":37}},"29":{"start":{"line":105,"column":4},"end":{"line":107,"column":18}},"30":{"start":{"line":108,"column":4},"end":{"line":110,"column":13}},"31":{"start":{"line":111,"column":4},"end":{"line":113,"column":13}},"32":{"start":{"line":115,"column":4},"end":{"line":117,"column":7}},"33":{"start":{"line":118,"column":4},"end":{"line":118,"column":68}},"34":{"start":{"line":120,"column":4},"end":{"line":120,"column":26}},"35":{"start":{"line":121,"column":4},"end":{"line":121,"column":36}},"36":{"start":{"line":123,"column":4},"end":{"line":123,"column":56}},"37":{"start":{"line":125,"column":4},"end":{"line":127,"column":5}},"38":{"start":{"line":126,"column":8},"end":{"line":126,"column":23}},"39":{"start":{"line":130,"column":0},"end":{"line":144,"column":2}},"40":{"start":{"line":131,"column":4},"end":{"line":131,"column":20}},"41":{"start":{"line":133,"column":4},"end":{"line":133,"column":49}},"42":{"start":{"line":135,"column":4},"end":{"line":143,"column":5}},"43":{"start":{"line":136,"column":8},"end":{"line":136,"column":59}},"44":{"start":{"line":141,"column":8},"end":{"line":141,"column":63}},"45":{"start":{"line":142,"column":8},"end":{"line":142,"column":23}}},"branchMap":{"1":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":0},"end":{"line":37,"column":0}},{"start":{"line":37,"column":0},"end":{"line":37,"column":0}}]},"2":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":7},"end":{"line":39,"column":7}},{"start":{"line":39,"column":7},"end":{"line":39,"column":7}}]},"3":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"4":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":35}},{"start":{"line":58,"column":39},"end":{"line":58,"column":66}}]},"5":{"line":105,"type":"cond-expr","locations":[{"start":{"line":105,"column":53},"end":{"line":105,"column":64}},{"start":{"line":106,"column":8},"end":{"line":107,"column":17}}]},"6":{"line":106,"type":"cond-expr","locations":[{"start":{"line":106,"column":38},"end":{"line":106,"column":50}},{"start":{"line":107,"column":8},"end":{"line":107,"column":17}}]},"7":{"line":108,"type":"cond-expr","locations":[{"start":{"line":108,"column":46},"end":{"line":108,"column":65}},{"start":{"line":109,"column":8},"end":{"line":110,"column":12}}]},"8":{"line":109,"type":"cond-expr","locations":[{"start":{"line":109,"column":38},"end":{"line":109,"column":57}},{"start":{"line":110,"column":8},"end":{"line":110,"column":12}}]},"9":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":52},"end":{"line":111,"column":66}},{"start":{"line":112,"column":8},"end":{"line":113,"column":12}}]},"10":{"line":112,"type":"cond-expr","locations":[{"start":{"line":112,"column":38},"end":{"line":112,"column":52}},{"start":{"line":113,"column":8},"end":{"line":113,"column":12}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var Statsd = require('uber-statsd-client');","var readBenchConfig = require('./read-bench-config.js');","var process = require('process');","var assert = require('assert');","","var TChannel = require('../channel.js');","var RelayHandler = require('../relay_handler.js');","","var STATSD_PORT = 7036;","","var argv = readBenchConfig({","    boolean: ['trace']","});","","if (argv.type === 'bench-relay') {","    process.title = 'nodejs-benchmarks-relay_bench_server';","} else if (argv.type === 'trace-relay') {","    process.title = 'nodejs-benchmarks-relay_trace_server';","}","","RelayServer(argv);","","function RelayServer(opts) {","    /*eslint max-statements: [2, 25]*/","    if (!(this instanceof RelayServer)) {","        return new RelayServer(opts);","    }","","    var self = this;","","    assert(opts.benchPort, 'benchPort required');","    assert(opts.benchRelayPort, 'benchRelayPort required');","    assert(opts.tracePort, 'tracePort required');","    assert(opts.traceRelayPort, 'traceRelayPort required');","    assert(","        opts.type === 'bench-relay' || opts.type === 'trace-relay',","        'a valid type required'","    );","    assert('trace' in opts, 'trace is a required options');","    assert('debug' in opts, 'debug is a required options');","","    // var benchRelayHostPort = '127.0.0.1:' + opts.benchRelayPort;","    // var traceRelayHostPort = '127.0.0.1:' + opts.traceRelayPort;","","    self.relay = TChannel({","        statTags: {","            app: 'relay-server'","        },","        emitConnectionMetrics: false,","        logger: require('debug-logtron')('relay'),","        trace: false,","        statsd: new Statsd({","            host: '127.0.0.1',","            port: STATSD_PORT","        }),","        choosePeerWithHeap: true","    });","","    self.relay.setChoosePeerWithHeap(true);","    self.relay.setLazyRelaying(true);","    self.relay.setLazyHandling(true);","","    // // useful for demonstrating tombstone leak","    // var OpKindMonitor = require('../monitor').OpKindMonitor;","    // (new OpKindMonitor(self.relay, {","    //     desc: 'relay',","    //     interval: 5000,","    // })).run();","","    // self.relay.handler = ServiceProxy({","    //     channel: self.relay,","    //     egressNodes: FakeEgressNodes({","    //         hostPort: opts.type === 'bench-relay' ?","    //             benchRelayHostPort : opts.type === 'trace-relay' ?","    //             traceRelayHostPort : null,","    //         topology: {","    //             'benchmark': [benchRelayHostPort],","    //             'tcollector': [traceRelayHostPort]","    //         }","    //     })","    // });","","    self.serviceName = opts.type === 'bench-relay' ? 'benchmark' :","        opts.type === 'trace-relay' ? 'tcollector' :","        'unknown';","    self.port = opts.type === 'bench-relay' ? opts.benchRelayPort :","        opts.type === 'trace-relay' ? opts.traceRelayPort :","        null;","    self.targetPort = opts.type === 'bench-relay' ? opts.benchPort :","        opts.type === 'trace-relay' ? opts.tracePort :","        null;","","    self.relaySubChan = self.relay.makeSubChannel({","        serviceName: self.serviceName","    });","    self.relaySubChan.handler = new RelayHandler(self.relaySubChan);","","    self.type = opts.type;","    self.instances = opts.instances;","","    self.relay.listen(self.port, '127.0.0.1', onListen);","","    function onListen() {","        self.connect();","    }","}","","RelayServer.prototype.connect = function connect() {","    var self = this;","","    var basePort = parseInt(self.targetPort, 10);","","    for (var i = 0; i < self.instances; i++) {","        var targetHostPort = '127.0.0.1:' + (basePort + i);","","        // var peer = self.relay.handler.getServicePeer(","        //     self.serviceName, targetHostPort","        // );","        var peer = self.relaySubChan.peers.add(targetHostPort);","        peer.connect();","    }","};",""],"l":{"23":2,"24":0,"25":0,"26":0,"28":0,"29":0,"31":0,"33":0,"37":0,"38":0,"39":0,"40":0,"43":0,"45":1,"47":0,"48":0,"51":0,"53":0,"54":0,"55":0,"56":0,"57":0,"61":0,"62":0,"67":0,"81":0,"82":0,"83":0,"105":0,"108":0,"111":0,"115":0,"118":0,"120":0,"121":0,"123":0,"125":1,"126":0,"130":0,"131":0,"133":0,"135":0,"136":0,"141":0,"142":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/trace_server.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/trace_server.js","s":{"1":2,"2":2,"3":2,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"onSubmit","line":51,"loc":{"start":{"line":51,"column":46},"end":{"line":51,"column":74}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":33}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":49}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":43}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":29}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":23}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":37}},"8":{"start":{"line":33,"column":0},"end":{"line":43,"column":3}},"9":{"start":{"line":45,"column":0},"end":{"line":47,"column":3}},"10":{"start":{"line":49,"column":0},"end":{"line":49,"column":46}},"11":{"start":{"line":51,"column":0},"end":{"line":62,"column":3}},"12":{"start":{"line":52,"column":4},"end":{"line":52,"column":40}},"13":{"start":{"line":54,"column":4},"end":{"line":58,"column":7}},"14":{"start":{"line":60,"column":4},"end":{"line":60,"column":27}},"15":{"start":{"line":61,"column":4},"end":{"line":61,"column":27}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = require('process');","process.title = 'nodejs-benchmarks-trace_server';","","var Statsd = require('uber-statsd-client');","var Buffer = require('buffer').Buffer;","","var TRACE_SERVER_PORT = 7039;","var STATSD_PORT = 7036;","","var TChannel = require('../channel');","var server = TChannel({","    statTags: {","        app: 'tcollector'","    },","    emitConnectionMetrics: false,","    trace: false,","    statsd: new Statsd({","        host: '127.0.0.1',","        port: STATSD_PORT","    })","});","","var tcollectorChan = server.makeSubChannel({","    serviceName: 'tcollector'","});","","server.listen(TRACE_SERVER_PORT, '127.0.0.1');","","tcollectorChan.register('TCollector::submit', function onSubmit(req, res) {","    var arg2 = new Buffer([0x00, 0x00]);","    // 0c00 0002 0001 0100 00","    var arg3 = new Buffer([","        0x0c, 0x00, 0x00, 0x02,","        0x00, 0x01, 0x01, 0x00,","        0x00","    ]);","","    res.headers.as = 'raw';","    res.sendOk(arg2, arg3);","});",""],"l":{"23":2,"24":2,"26":2,"27":0,"29":0,"30":0,"32":0,"33":0,"45":0,"49":0,"51":0,"52":0,"54":0,"60":0,"61":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/bin/adhoc.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/bin/adhoc.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},"b":{"1":[0,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"main","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":16}}},"2":{"name":"echo","line":60,"loc":{"start":{"line":60,"column":24},"end":{"line":60,"column":60}}},"3":{"name":"onListen","line":79,"loc":{"start":{"line":79,"column":32},"end":{"line":79,"column":55}}},"4":{"name":"onAdvertised","line":87,"loc":{"start":{"line":87,"column":41},"end":{"line":87,"column":69}}},"5":{"name":"getHost","line":98,"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":19}}}},"statementMap":{"1":{"start":{"line":29,"column":0},"end":{"line":29,"column":23}},"2":{"start":{"line":30,"column":0},"end":{"line":30,"column":33}},"3":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}},"4":{"start":{"line":33,"column":0},"end":{"line":33,"column":47}},"5":{"start":{"line":35,"column":0},"end":{"line":37,"column":1}},"6":{"start":{"line":36,"column":4},"end":{"line":36,"column":11}},"7":{"start":{"line":39,"column":0},"end":{"line":96,"column":1}},"8":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"9":{"start":{"line":41,"column":8},"end":{"line":41,"column":44}},"10":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"11":{"start":{"line":44,"column":8},"end":{"line":44,"column":39}},"12":{"start":{"line":48,"column":4},"end":{"line":48,"column":38}},"13":{"start":{"line":49,"column":4},"end":{"line":49,"column":32}},"14":{"start":{"line":50,"column":4},"end":{"line":50,"column":44}},"15":{"start":{"line":51,"column":4},"end":{"line":51,"column":29}},"16":{"start":{"line":52,"column":4},"end":{"line":52,"column":28}},"17":{"start":{"line":54,"column":4},"end":{"line":54,"column":36}},"18":{"start":{"line":56,"column":4},"end":{"line":56,"column":34}},"19":{"start":{"line":58,"column":4},"end":{"line":63,"column":7}},"20":{"start":{"line":61,"column":8},"end":{"line":61,"column":31}},"21":{"start":{"line":62,"column":8},"end":{"line":62,"column":31}},"22":{"start":{"line":65,"column":4},"end":{"line":75,"column":7}},"23":{"start":{"line":77,"column":4},"end":{"line":77,"column":54}},"24":{"start":{"line":79,"column":4},"end":{"line":95,"column":7}},"25":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"26":{"start":{"line":81,"column":12},"end":{"line":81,"column":22}},"27":{"start":{"line":84,"column":8},"end":{"line":84,"column":53}},"28":{"start":{"line":85,"column":8},"end":{"line":85,"column":63}},"29":{"start":{"line":87,"column":8},"end":{"line":93,"column":11}},"30":{"start":{"line":88,"column":12},"end":{"line":90,"column":13}},"31":{"start":{"line":89,"column":16},"end":{"line":89,"column":27}},"32":{"start":{"line":92,"column":12},"end":{"line":92,"column":38}},"33":{"start":{"line":94,"column":8},"end":{"line":94,"column":36}},"34":{"start":{"line":98,"column":0},"end":{"line":111,"column":1}},"35":{"start":{"line":99,"column":4},"end":{"line":99,"column":40}},"36":{"start":{"line":100,"column":4},"end":{"line":100,"column":41}},"37":{"start":{"line":101,"column":4},"end":{"line":110,"column":5}},"38":{"start":{"line":102,"column":8},"end":{"line":102,"column":42}},"39":{"start":{"line":103,"column":8},"end":{"line":103,"column":38}},"40":{"start":{"line":104,"column":8},"end":{"line":109,"column":9}},"41":{"start":{"line":105,"column":12},"end":{"line":105,"column":40}},"42":{"start":{"line":106,"column":12},"end":{"line":108,"column":13}},"43":{"start":{"line":107,"column":16},"end":{"line":107,"column":36}}},"branchMap":{"1":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":0},"end":{"line":35,"column":0}},{"start":{"line":35,"column":0},"end":{"line":35,"column":0}}]},"2":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"3":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"4":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":15},"end":{"line":50,"column":30}},{"start":{"line":50,"column":34},"end":{"line":50,"column":43}}]},"5":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"6":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":12}},{"start":{"line":88,"column":12},"end":{"line":88,"column":12}}]},"7":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":106,"column":12}},{"start":{"line":106,"column":12},"end":{"line":106,"column":12}}]},"8":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":16},"end":{"line":106,"column":30}},{"start":{"line":106,"column":34},"end":{"line":106,"column":56}}]}},"code":["//#!/usr/bin/env node","// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/*global process */","","// Usage: node bin/adhoc.js <serviceName> <port> <host>","// Creates a service on localhost, connected to Autobahn on localhost.","","var os = require('os');","var console = require('console');","","var TChannel = require('../');","var HyperbahnClient = require('../hyperbahn/');","","if (require.main === module) {","    main();","}","","function main() {","    if (!process.argv[2]) {","        throw new Error('need serviceName');","    }","    if (!process.argv[3]) {","        throw new Error('need a port');","    }","","    /*eslint no-console: 0*/","    var serviceName = process.argv[2];","    var port = +process.argv[3];","    var host = process.argv[4] || getHost();","    var autobahnPort = 21300;","    var autobahnHost = host;","","    var tchannel = new TChannel({});","","    var logtron = tchannel.logger;","","    tchannel.makeSubChannel({","        serviceName: serviceName","    }).register('echo', function echo(req, res, arg2, arg3) {","        res.headers.as = 'raw';","        res.sendOk(arg2, arg3);","    });","","    var hyperbahnClient = new HyperbahnClient({","        tchannel: tchannel,","        serviceName: serviceName,","        hostPortList: [","            autobahnHost + ':' + autobahnPort","        ],","        forwardRetries: 5,","        checkForwardListInterval: 60000,","        advertisementTimeout: 5000,","        logger: logtron","    });","","    console.log('service', serviceName, 'port', port);","","    tchannel.listen(port, host, function onListen(err) {","        if (err) {","            throw err;","        }","","        console.log('listening', tchannel.address());","        console.log('advertising', autobahnHost, autobahnPort);","","        hyperbahnClient.on('advertised', function onAdvertised(err2) {","            if (err2) {","                throw err2;","            }","","            console.log('advertised');","        });","        hyperbahnClient.advertise();","    });","}","","function getHost() {","    var ifaces = os.networkInterfaces();","    var ifaceNames = Object.keys(ifaces);","    for (var index = 0; index < ifaceNames.length; index++) {","        var ifaceName = ifaceNames[index];","        var ports = ifaces[ifaceName];","        for (var portIndex = 0; portIndex < ports.length; portIndex++) {","            var port = ports[portIndex];","            if (!port.internal && port.family === 'IPv4') {","                return port.address;","            }","        }","    }","}",""],"l":{"29":1,"30":1,"32":1,"33":1,"35":1,"36":0,"39":1,"40":0,"41":0,"43":0,"44":0,"48":0,"49":0,"50":0,"51":0,"52":0,"54":0,"56":0,"58":0,"61":0,"62":0,"65":0,"77":0,"79":0,"80":0,"81":0,"84":0,"85":0,"87":0,"88":0,"89":0,"92":0,"94":0,"98":1,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/hyperbahn/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/hyperbahn/index.js","s":{"1":1,"2":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":56}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var HyperbahnClient = require('../hyperbahn-client.js');","","module.exports = HyperbahnClient;",""],"l":{"23":1,"25":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/bin/adhoc-multi.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/bin/adhoc-multi.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":1,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"main","line":51,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":16}}},"2":{"name":"start","line":77,"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":29}}},"3":{"name":"onListen","line":87,"loc":{"start":{"line":87,"column":21},"end":{"line":87,"column":41}}},"4":{"name":"onAdvertised","line":94,"loc":{"start":{"line":94,"column":24},"end":{"line":94,"column":48}}},"5":{"name":"onRes","line":113,"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":37}}},"6":{"name":"createChannel","line":124,"loc":{"start":{"line":124,"column":0},"end":{"line":124,"column":32}}},"7":{"name":"createClient","line":134,"loc":{"start":{"line":134,"column":0},"end":{"line":134,"column":31}}},"8":{"name":"onListen","line":168,"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":27}}},"9":{"name":"enumerated","line":177,"loc":{"start":{"line":177,"column":4},"end":{"line":177,"column":37}}},"10":{"name":"forwardChannel","line":182,"loc":{"start":{"line":182,"column":4},"end":{"line":182,"column":55}}},"11":{"name":"onRet","line":201,"loc":{"start":{"line":201,"column":12},"end":{"line":201,"column":33}}},"12":{"name":"finish","line":214,"loc":{"start":{"line":214,"column":4},"end":{"line":214,"column":47}}},"13":{"name":"advertise","line":222,"loc":{"start":{"line":222,"column":0},"end":{"line":222,"column":34}}},"14":{"name":"onAdvertised","line":228,"loc":{"start":{"line":228,"column":4},"end":{"line":228,"column":32}}},"15":{"name":"getAutobahnHost","line":237,"loc":{"start":{"line":237,"column":0},"end":{"line":237,"column":27}}},"16":{"name":"getHost","line":251,"loc":{"start":{"line":251,"column":0},"end":{"line":251,"column":19}}}},"statementMap":{"1":{"start":{"line":34,"column":0},"end":{"line":34,"column":23}},"2":{"start":{"line":35,"column":0},"end":{"line":35,"column":33}},"3":{"start":{"line":36,"column":0},"end":{"line":36,"column":23}},"4":{"start":{"line":37,"column":0},"end":{"line":37,"column":27}},"5":{"start":{"line":38,"column":0},"end":{"line":38,"column":57}},"6":{"start":{"line":40,"column":0},"end":{"line":40,"column":30}},"7":{"start":{"line":41,"column":0},"end":{"line":41,"column":47}},"8":{"start":{"line":42,"column":0},"end":{"line":42,"column":47}},"9":{"start":{"line":43,"column":0},"end":{"line":43,"column":43}},"10":{"start":{"line":45,"column":0},"end":{"line":47,"column":1}},"11":{"start":{"line":46,"column":4},"end":{"line":46,"column":11}},"12":{"start":{"line":49,"column":0},"end":{"line":49,"column":12}},"13":{"start":{"line":51,"column":0},"end":{"line":75,"column":1}},"14":{"start":{"line":52,"column":4},"end":{"line":55,"column":5}},"15":{"start":{"line":53,"column":8},"end":{"line":53,"column":70}},"16":{"start":{"line":54,"column":8},"end":{"line":54,"column":15}},"17":{"start":{"line":58,"column":4},"end":{"line":58,"column":48}},"18":{"start":{"line":59,"column":4},"end":{"line":59,"column":18}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":50}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":53}},"21":{"start":{"line":62,"column":4},"end":{"line":62,"column":52}},"22":{"start":{"line":63,"column":4},"end":{"line":63,"column":41}},"23":{"start":{"line":64,"column":4},"end":{"line":64,"column":26}},"24":{"start":{"line":65,"column":4},"end":{"line":65,"column":42}},"25":{"start":{"line":66,"column":4},"end":{"line":66,"column":44}},"26":{"start":{"line":67,"column":4},"end":{"line":67,"column":83}},"27":{"start":{"line":68,"column":4},"end":{"line":68,"column":21}},"28":{"start":{"line":69,"column":4},"end":{"line":69,"column":23}},"29":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"30":{"start":{"line":71,"column":8},"end":{"line":71,"column":101}},"31":{"start":{"line":74,"column":4},"end":{"line":74,"column":24}},"32":{"start":{"line":77,"column":0},"end":{"line":122,"column":1}},"33":{"start":{"line":78,"column":4},"end":{"line":78,"column":21}},"34":{"start":{"line":79,"column":4},"end":{"line":85,"column":5}},"35":{"start":{"line":80,"column":8},"end":{"line":80,"column":19}},"36":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"37":{"start":{"line":82,"column":12},"end":{"line":82,"column":31}},"38":{"start":{"line":84,"column":8},"end":{"line":84,"column":41}},"39":{"start":{"line":87,"column":4},"end":{"line":92,"column":7}},"40":{"start":{"line":88,"column":8},"end":{"line":88,"column":51}},"41":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"42":{"start":{"line":90,"column":12},"end":{"line":90,"column":40}},"43":{"start":{"line":94,"column":4},"end":{"line":121,"column":7}},"44":{"start":{"line":95,"column":8},"end":{"line":95,"column":47}},"45":{"start":{"line":96,"column":8},"end":{"line":96,"column":39}},"46":{"start":{"line":97,"column":8},"end":{"line":97,"column":46}},"47":{"start":{"line":98,"column":8},"end":{"line":107,"column":11}},"48":{"start":{"line":108,"column":8},"end":{"line":120,"column":10}},"49":{"start":{"line":114,"column":16},"end":{"line":118,"column":17}},"50":{"start":{"line":115,"column":20},"end":{"line":115,"column":37}},"51":{"start":{"line":117,"column":20},"end":{"line":117,"column":50}},"52":{"start":{"line":124,"column":0},"end":{"line":132,"column":1}},"53":{"start":{"line":125,"column":4},"end":{"line":129,"column":7}},"54":{"start":{"line":131,"column":4},"end":{"line":131,"column":20}},"55":{"start":{"line":134,"column":0},"end":{"line":220,"column":1}},"56":{"start":{"line":135,"column":4},"end":{"line":135,"column":42}},"57":{"start":{"line":136,"column":4},"end":{"line":136,"column":62}},"58":{"start":{"line":137,"column":4},"end":{"line":137,"column":26}},"59":{"start":{"line":139,"column":4},"end":{"line":139,"column":54}},"60":{"start":{"line":140,"column":4},"end":{"line":147,"column":6}},"61":{"start":{"line":149,"column":4},"end":{"line":158,"column":7}},"62":{"start":{"line":160,"column":4},"end":{"line":161,"column":59}},"63":{"start":{"line":162,"column":4},"end":{"line":162,"column":66}},"64":{"start":{"line":163,"column":4},"end":{"line":166,"column":6}},"65":{"start":{"line":168,"column":4},"end":{"line":175,"column":5}},"66":{"start":{"line":169,"column":8},"end":{"line":171,"column":9}},"67":{"start":{"line":170,"column":12},"end":{"line":170,"column":22}},"68":{"start":{"line":173,"column":8},"end":{"line":173,"column":53}},"69":{"start":{"line":174,"column":8},"end":{"line":174,"column":37}},"70":{"start":{"line":177,"column":4},"end":{"line":180,"column":5}},"71":{"start":{"line":178,"column":8},"end":{"line":178,"column":31}},"72":{"start":{"line":179,"column":8},"end":{"line":179,"column":34}},"73":{"start":{"line":182,"column":4},"end":{"line":212,"column":5}},"74":{"start":{"line":183,"column":8},"end":{"line":183,"column":43}},"75":{"start":{"line":184,"column":8},"end":{"line":184,"column":65}},"76":{"start":{"line":186,"column":8},"end":{"line":195,"column":11}},"77":{"start":{"line":196,"column":8},"end":{"line":211,"column":10}},"78":{"start":{"line":202,"column":16},"end":{"line":209,"column":17}},"79":{"start":{"line":203,"column":20},"end":{"line":203,"column":35}},"80":{"start":{"line":205,"column":20},"end":{"line":208,"column":23}},"81":{"start":{"line":214,"column":4},"end":{"line":219,"column":5}},"82":{"start":{"line":215,"column":8},"end":{"line":218,"column":11}},"83":{"start":{"line":222,"column":0},"end":{"line":235,"column":1}},"84":{"start":{"line":223,"column":4},"end":{"line":223,"column":38}},"85":{"start":{"line":224,"column":4},"end":{"line":224,"column":77}},"86":{"start":{"line":226,"column":4},"end":{"line":226,"column":51}},"87":{"start":{"line":227,"column":4},"end":{"line":227,"column":32}},"88":{"start":{"line":228,"column":4},"end":{"line":234,"column":5}},"89":{"start":{"line":229,"column":8},"end":{"line":231,"column":9}},"90":{"start":{"line":230,"column":12},"end":{"line":230,"column":23}},"91":{"start":{"line":232,"column":8},"end":{"line":232,"column":80}},"92":{"start":{"line":233,"column":8},"end":{"line":233,"column":40}},"93":{"start":{"line":237,"column":0},"end":{"line":249,"column":1}},"94":{"start":{"line":238,"column":4},"end":{"line":248,"column":5}},"95":{"start":{"line":239,"column":8},"end":{"line":240,"column":70}},"96":{"start":{"line":241,"column":8},"end":{"line":241,"column":46}},"97":{"start":{"line":243,"column":8},"end":{"line":245,"column":9}},"98":{"start":{"line":244,"column":12},"end":{"line":244,"column":22}},"99":{"start":{"line":246,"column":8},"end":{"line":246,"column":29}},"100":{"start":{"line":247,"column":8},"end":{"line":247,"column":50}},"101":{"start":{"line":251,"column":0},"end":{"line":264,"column":1}},"102":{"start":{"line":252,"column":4},"end":{"line":252,"column":40}},"103":{"start":{"line":253,"column":4},"end":{"line":253,"column":41}},"104":{"start":{"line":254,"column":4},"end":{"line":263,"column":5}},"105":{"start":{"line":255,"column":8},"end":{"line":255,"column":42}},"106":{"start":{"line":256,"column":8},"end":{"line":256,"column":38}},"107":{"start":{"line":257,"column":8},"end":{"line":262,"column":9}},"108":{"start":{"line":258,"column":12},"end":{"line":258,"column":40}},"109":{"start":{"line":259,"column":12},"end":{"line":261,"column":13}},"110":{"start":{"line":260,"column":16},"end":{"line":260,"column":36}}},"branchMap":{"1":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":0},"end":{"line":45,"column":0}},{"start":{"line":45,"column":0},"end":{"line":45,"column":0}}]},"2":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"3":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":32}},{"start":{"line":52,"column":36},"end":{"line":52,"column":64}}]},"4":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":26},"end":{"line":58,"column":41}},{"start":{"line":58,"column":45},"end":{"line":58,"column":46}}]},"5":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":23},"end":{"line":62,"column":38}},{"start":{"line":62,"column":42},"end":{"line":62,"column":51}}]},"6":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":16},"end":{"line":63,"column":32}},{"start":{"line":63,"column":36},"end":{"line":63,"column":40}}]},"7":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":8}},{"start":{"line":81,"column":8},"end":{"line":81,"column":8}}]},"8":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":16},"end":{"line":114,"column":16}},{"start":{"line":114,"column":16},"end":{"line":114,"column":16}}]},"9":{"line":136,"type":"cond-expr","locations":[{"start":{"line":136,"column":38},"end":{"line":136,"column":44}},{"start":{"line":136,"column":47},"end":{"line":136,"column":61}}]},"10":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":8},"end":{"line":169,"column":8}},{"start":{"line":169,"column":8},"end":{"line":169,"column":8}}]},"11":{"line":178,"type":"binary-expr","locations":[{"start":{"line":178,"column":16},"end":{"line":178,"column":21}},{"start":{"line":178,"column":25},"end":{"line":178,"column":30}}]},"12":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":16},"end":{"line":202,"column":16}},{"start":{"line":202,"column":16},"end":{"line":202,"column":16}}]},"13":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":8},"end":{"line":229,"column":8}},{"start":{"line":229,"column":8},"end":{"line":229,"column":8}}]},"14":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":8},"end":{"line":243,"column":8}},{"start":{"line":243,"column":8},"end":{"line":243,"column":8}}]},"15":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":12},"end":{"line":259,"column":12}},{"start":{"line":259,"column":12},"end":{"line":259,"column":12}}]},"16":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":16},"end":{"line":259,"column":30}},{"start":{"line":259,"column":34},"end":{"line":259,"column":56}}]}},"code":["//#!/usr/bin/env node","// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","// require('format-stack').set({","//   traces: 'short' // 'long' works too, maybe.. ;)","// });","","/*global process */","","// Usage: node bin/adhoc_multi.js <relay_count> <serviceName> <port>","// Creates relay_count services on localhost, connected to Autobahn on","// localhost. The services call each other to do echo.","","var os = require('os');","var console = require('console');","var fs = require('fs');","var path = require('path');","var CountedReadySignal = require('ready-signal/counted');","","var TChannel = require('../');","var TChannelAsThrift = require('../as/thrift');","var HyperbahnClient = require('../hyperbahn/');","var DebugLogger = require('debug-logtron');","","if (require.main === module) {","    main();","}","","var EP_NAME;","","function main() {","    if (process.argv[2] === '-h' || process.argv[2] === '--help') {","        console.log('adhoc_multi [relay_count] [serviceName] [port]');","        return;","    }","","    /*eslint no-console: 0*/","    var rcount = Math.abs(process.argv[2] || 1);","    var opts = {};","    opts.listenReady = CountedReadySignal(rcount);","    opts.advertiseReady = CountedReadySignal(rcount);","    opts.serviceName = process.argv[3] || 'service';","    opts.port = +process.argv[4] || 6000;","    opts.host = getHost();","    opts.autobahnList = getAutobahnHost();","    opts.logger = DebugLogger('adhocMulti');","    var spec = fs.readFileSync(path.join(__dirname, 'adhoc-multi.thrift'), 'utf8');","    EP_NAME = 'echo';","    opts.asThrift = [];","    for (var i = 0; i < rcount; i++) {","        opts.asThrift.push(new TChannelAsThrift({source: spec.replace(EP_NAME, EP_NAME + '_' + i)}));","    }","","    start(opts, rcount);","}","","function start(opts, rcount) {","    var clients = [];","    for (var i = 0; i < rcount; i++) {","        opts.i = i;","        if (i === rcount - 1) {","            opts.isLast = true;","        }","        clients.push(createClient(opts));","    }","","    opts.listenReady(function onListen() {","        console.log('All channel listen started.');","        for (i = 0; i < rcount; i++) {","            advertise(opts, clients[i]);","        }","    });","","    opts.advertiseReady(function onAdvertised() {","        console.log('All clients advertised.');","        var chan = createChannel(opts);","        var service = opts.serviceName + '_0';","        var req = chan.makeSubChannel({","            serviceName: service,","            peers: opts.autobahnList","        }).request({","            headers: {","                cn: opts.serviceName","            },","            hasNoParent: true,","            serviceName: service","        });","        opts.asThrift[0].send(","            req,","            'AdhocMulti::' + EP_NAME + '_0',","            null,","            {value: 'hello'},","            function onRes(err, res) {","                if (err) {","                    console.log(err);","                } else {","                    console.log(String(res.body));","                }","            }","        );","    });","}","","function createChannel(options) {","    var tchannel = new TChannel({","        trace: true,","        logger: options.logger,","        traceSample: 1","    });","","    return tchannel;","}","","function createClient(options) {","    var tchannel = createChannel(options);","    var onResponse = options.isLast ? finish : forwardChannel;","    var count = options.i;","","    console.log('advertising ' + enumerated(EP_NAME));","    options.asThrift[count].register(","        tchannel.makeSubChannel({","            serviceName: enumerated(options.serviceName)","        }),","        enumerated('AdhocMulti::' + EP_NAME),","        options,","        onResponse","    );","","    var hyperbahnClient = new HyperbahnClient({","        tchannel: tchannel,","        serviceName: enumerated(options.serviceName),","        callerName: enumerated(options.serviceName, count - 1),","        hostPortList: options.autobahnList,","        forwardRetries: 5,","        checkForwardListInterval: 60000,","        adverisementTimeout: 5000,","        logger: options.logger","    });","","    console.log('Starting to listen service',","        options.serviceName, 'port', options.port + count);","    tchannel.listen(options.port + count, options.host, onListen);","    return {","        channel: tchannel,","        client: hyperbahnClient","    };","","    function onListen(err) {","        if (err) {","            throw err;","        }","","        console.log('listening', tchannel.address());","        options.listenReady.signal();","    }","","    function enumerated(name, index) {","        index = index || count;","        return name + '_' + index;","    }","","    function forwardChannel(opts, req, head, body, cb) {","        var fchan = createChannel(options);","        var service = enumerated(options.serviceName, count + 1);","","        var request = fchan.makeSubChannel({","            serviceName: service,","            peers: options.autobahnList","        }).request({","            headers: {","                cn: enumerated(options.serviceName, count)","            },","            serviceName: service,","            parent: req","        });","        opts.asThrift[count + 1].send(","            request,","            enumerated('AdhocMulti::' + EP_NAME, count + 1),","            null,","            body,","            function onRet(e, r) {","                if (e) {","                    console.log(e);","                } else {","                    return cb(null, {","                        ok: true,","                        body: enumerated(options.serviceName) + ' says \"' + String(r.body) + '\"'","                    });","                }","            }","        );","    }","","    function finish(opts, req, head, body, cb) {","        return cb(null, {","            ok: true,","            body: enumerated(options.serviceName) + ' says \"' + String(body.value) + '\"'","        });","    }","}","","function advertise(options, pair) {","    var hyperbahnClient = pair.client;","    console.log('Advertising at Hyperbahn', hyperbahnClient.hostPortList[0]);","","    hyperbahnClient.on('advertised', onAdvertised);","    hyperbahnClient.advertise();","    function onAdvertised(err2) {","        if (err2) {","            throw err2;","        }","        console.log('Advertised at Hyperbahn', hyperbahnClient.hostPortList[0]);","        options.advertiseReady.signal();","    }","}","","function getAutobahnHost() {","    try {","        var hostPortListString =","        fs.readFileSync('/etc/uber/autobahn/ringpop-v2.json', 'utf8');","        return JSON.parse(hostPortListString);","    } catch (err) {","        if (err.code !== 'ENOENT') {","            throw err;","        }","        var host = getHost();","        return [host + ':21300', host + ':21301'];","    }","}","","function getHost() {","    var ifaces = os.networkInterfaces();","    var ifaceNames = Object.keys(ifaces);","    for (var index = 0; index < ifaceNames.length; index++) {","        var ifaceName = ifaceNames[index];","        var ports = ifaces[ifaceName];","        for (var portIndex = 0; portIndex < ports.length; portIndex++) {","            var port = ports[portIndex];","            if (!port.internal && port.family === 'IPv4') {","                return port.address;","            }","        }","    }","}",""],"l":{"34":2,"35":2,"36":2,"37":2,"38":2,"40":2,"41":2,"42":2,"43":2,"45":0,"46":0,"49":0,"51":1,"52":0,"53":0,"54":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"74":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"84":0,"87":0,"88":0,"89":0,"90":0,"94":0,"95":0,"96":0,"97":0,"98":0,"108":0,"114":0,"115":0,"117":0,"124":1,"125":0,"131":0,"134":1,"135":0,"136":0,"137":0,"139":0,"140":0,"149":0,"160":0,"162":0,"163":0,"168":1,"169":0,"170":0,"173":0,"174":0,"177":1,"178":0,"179":0,"182":1,"183":0,"184":0,"186":0,"196":0,"202":0,"203":0,"205":0,"214":1,"215":0,"222":1,"223":0,"224":0,"226":0,"227":0,"228":1,"229":0,"230":0,"232":0,"233":0,"237":1,"238":0,"239":0,"241":0,"243":0,"244":0,"246":0,"247":0,"251":1,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/lcg.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/lcg.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"LCG","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":19}}},"2":{"name":"rand","line":40,"loc":{"start":{"line":40,"column":21},"end":{"line":40,"column":37}}},"3":{"name":"rand64","line":46,"loc":{"start":{"line":46,"column":23},"end":{"line":46,"column":41}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":38}},"2":{"start":{"line":28,"column":0},"end":{"line":38,"column":1}},"3":{"start":{"line":29,"column":4},"end":{"line":29,"column":20}},"4":{"start":{"line":30,"column":4},"end":{"line":34,"column":5}},"5":{"start":{"line":31,"column":8},"end":{"line":31,"column":25}},"6":{"start":{"line":33,"column":8},"end":{"line":33,"column":64}},"7":{"start":{"line":35,"column":4},"end":{"line":35,"column":31}},"8":{"start":{"line":36,"column":4},"end":{"line":36,"column":22}},"9":{"start":{"line":37,"column":4},"end":{"line":37,"column":22}},"10":{"start":{"line":40,"column":0},"end":{"line":44,"column":2}},"11":{"start":{"line":41,"column":4},"end":{"line":41,"column":20}},"12":{"start":{"line":42,"column":4},"end":{"line":42,"column":61}},"13":{"start":{"line":43,"column":4},"end":{"line":43,"column":21}},"14":{"start":{"line":46,"column":0},"end":{"line":52,"column":2}},"15":{"start":{"line":47,"column":4},"end":{"line":47,"column":20}},"16":{"start":{"line":48,"column":4},"end":{"line":48,"column":28}},"17":{"start":{"line":49,"column":4},"end":{"line":49,"column":38}},"18":{"start":{"line":50,"column":4},"end":{"line":50,"column":38}},"19":{"start":{"line":51,"column":4},"end":{"line":51,"column":15}},"20":{"start":{"line":54,"column":0},"end":{"line":54,"column":21}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var Buffer = require('buffer').Buffer;","","// NOTE: this RNG is not suitable for real usage, it exists only for a","// predictable test/benchmark fixture.","","function LCG(seed) {","    var self = this;","    if (typeof seed === 'number') {","        self.last = seed;","    } else {","        self.last = Math.floor(Math.pow(2, 32) * Math.random());","    }","    self.mod = Math.pow(2, 32);","    self.mul = 214013;","    self.add = 253101;","}","","LCG.prototype.rand = function rand() {","    var self = this;","    self.last = (self.mul * self.last + self.add) % self.mod;","    return self.last;","};","","LCG.prototype.rand64 = function rand64() {","    var self = this;","    var ret = new Buffer(8);","    ret.writeUInt32BE(self.rand(), 0);","    ret.writeUInt32BE(self.rand(), 4);","    return ret;","};","","module.exports = LCG;",""],"l":{"23":1,"28":1,"29":0,"30":0,"31":0,"33":0,"35":0,"36":0,"37":0,"40":1,"41":0,"42":0,"43":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"54":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/multicast_ctl.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/lib/multicast_ctl.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":1,"30":1,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"checksumLength","line":71,"loc":{"start":{"line":71,"column":16},"end":{"line":71,"column":42}}},"2":{"name":"writePriorChecksum","line":74,"loc":{"start":{"line":74,"column":15},"end":{"line":74,"column":64}}},"3":{"name":"readPriorChecksum","line":78,"loc":{"start":{"line":78,"column":14},"end":{"line":78,"column":62}}},"4":{"name":"MultiCTL","line":93,"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":46}}},"5":{"name":"onBound","line":110,"loc":{"start":{"line":110,"column":27},"end":{"line":110,"column":46}}},"6":{"name":"onMessage","line":115,"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":35}}},"7":{"name":"close","line":121,"loc":{"start":{"line":121,"column":27},"end":{"line":121,"column":52}}},"8":{"name":"onMessage","line":126,"loc":{"start":{"line":126,"column":31},"end":{"line":126,"column":62}}},"9":{"name":"parsed","line":128,"loc":{"start":{"line":128,"column":57},"end":{"line":128,"column":85}}},"10":{"name":"send","line":137,"loc":{"start":{"line":137,"column":26},"end":{"line":137,"column":52}}},"11":{"name":"wrote","line":144,"loc":{"start":{"line":144,"column":57},"end":{"line":144,"column":82}}}},"statementMap":{"1":{"start":{"line":63,"column":0},"end":{"line":63,"column":45}},"2":{"start":{"line":64,"column":0},"end":{"line":64,"column":50}},"3":{"start":{"line":65,"column":0},"end":{"line":65,"column":29}},"4":{"start":{"line":66,"column":0},"end":{"line":66,"column":29}},"5":{"start":{"line":67,"column":0},"end":{"line":67,"column":40}},"6":{"start":{"line":70,"column":0},"end":{"line":91,"column":2}},"7":{"start":{"line":72,"column":8},"end":{"line":72,"column":43}},"8":{"start":{"line":75,"column":8},"end":{"line":75,"column":55}},"9":{"start":{"line":76,"column":8},"end":{"line":76,"column":66}},"10":{"start":{"line":79,"column":8},"end":{"line":79,"column":58}},"11":{"start":{"line":80,"column":8},"end":{"line":88,"column":9}},"12":{"start":{"line":81,"column":12},"end":{"line":81,"column":37}},"13":{"start":{"line":82,"column":12},"end":{"line":82,"column":54}},"14":{"start":{"line":83,"column":12},"end":{"line":87,"column":13}},"15":{"start":{"line":84,"column":16},"end":{"line":86,"column":39}},"16":{"start":{"line":89,"column":8},"end":{"line":89,"column":19}},"17":{"start":{"line":93,"column":0},"end":{"line":118,"column":1}},"18":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"19":{"start":{"line":95,"column":4},"end":{"line":95,"column":28}},"20":{"start":{"line":98,"column":4},"end":{"line":105,"column":7}},"21":{"start":{"line":107,"column":4},"end":{"line":107,"column":21}},"22":{"start":{"line":108,"column":4},"end":{"line":108,"column":31}},"23":{"start":{"line":109,"column":4},"end":{"line":109,"column":56}},"24":{"start":{"line":110,"column":4},"end":{"line":114,"column":7}},"25":{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},"26":{"start":{"line":112,"column":12},"end":{"line":112,"column":57}},"27":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"28":{"start":{"line":116,"column":8},"end":{"line":116,"column":35}},"29":{"start":{"line":119,"column":0},"end":{"line":119,"column":33}},"30":{"start":{"line":121,"column":0},"end":{"line":124,"column":2}},"31":{"start":{"line":122,"column":4},"end":{"line":122,"column":20}},"32":{"start":{"line":123,"column":4},"end":{"line":123,"column":32}},"33":{"start":{"line":126,"column":0},"end":{"line":135,"column":2}},"34":{"start":{"line":127,"column":4},"end":{"line":127,"column":20}},"35":{"start":{"line":128,"column":4},"end":{"line":134,"column":7}},"36":{"start":{"line":129,"column":8},"end":{"line":132,"column":9}},"37":{"start":{"line":130,"column":12},"end":{"line":130,"column":36}},"38":{"start":{"line":131,"column":12},"end":{"line":131,"column":19}},"39":{"start":{"line":133,"column":8},"end":{"line":133,"column":58}},"40":{"start":{"line":137,"column":0},"end":{"line":153,"column":2}},"41":{"start":{"line":138,"column":4},"end":{"line":138,"column":20}},"42":{"start":{"line":139,"column":4},"end":{"line":143,"column":6}},"43":{"start":{"line":144,"column":4},"end":{"line":152,"column":7}},"44":{"start":{"line":145,"column":8},"end":{"line":148,"column":9}},"45":{"start":{"line":146,"column":12},"end":{"line":146,"column":36}},"46":{"start":{"line":147,"column":12},"end":{"line":147,"column":19}},"47":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"48":{"start":{"line":150,"column":12},"end":{"line":150,"column":79}},"49":{"start":{"line":155,"column":0},"end":{"line":155,"column":26}}},"branchMap":{"1":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"2":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":12}},{"start":{"line":83,"column":12},"end":{"line":83,"column":12}}]},"3":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"4":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":8},"end":{"line":145,"column":8}},{"start":{"line":145,"column":8},"end":{"line":145,"column":8}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","/* Provides a class for sending and handling multicast UDP messages of one or"," * more caller specified types (maximum 256)."," *"," * The format on the wire is:"," *     type:1 {body} checksum:4"," * - body is arbitrary and read/written by the specified body RW corresponding"," *   to the type."," * - checksum is the CRC32-C checksum of all prior bytes (type + body"," *"," * Example \"chat\" application:"," *"," *     var bufrw = require('bufrw');"," *"," *     var myid = Math.floor(Math.random() * 0xffffffff);"," *"," *     var ctl = new MultiCTL({"," *         1: bufrw.Struct({"," *             id: bufrw.UInt32BE,"," *             msg: bufrw.str2"," *         }),"," *     }, 12345, ['239.0.0.1']);"," *     ctl.send(1, {id: myid, msg: '(joins)'});"," *"," *     ctl.on('frame', function onFrame(type, body) {"," *         if (body.id !== myid) {"," *             console.log('%s> %s', body.id, body.msg);"," *         }"," *     });"," *"," *     var lines = process.stdin.pipe(require('split2')());"," *     lines.on('data', function onLine(line) {"," *         ctl.send(1, {id: myid, msg: line});"," *     });"," *     lines.on('end', function onEnd() {"," *         ctl.send(1, {id: myid, msg: '(leaves)'});"," *         ctl.close();"," *     });"," *"," */","","var CRC32C = require('sse4_crc32').calculate;","var EventEmitter = require('events').EventEmitter;","var bufrw = require('bufrw');","var dgram = require('dgram');","var inherits = require('util').inherits;","","// note assumes that buffer being read is rooted @0","var ChecksumPrior = {","    byteLength: function checksumLength() {","        return bufrw.UInt32BE.byteLength();","    },","    writeInto: function writePriorChecksum(obj, buffer, offset) {","        var checksum = CRC32C(buffer.slice(0, offset));","        return bufrw.UInt32BE.writeInto(checksum, buffer, offset);","    },","    readFrom: function readPriorChecksum(obj, buffer, offset) {","        var res = bufrw.UInt32BE.readFrom(buffer, offset);","        if (!res.err) {","            var expected = res.value;","            var got = CRC32C(buffer.slice(0, offset));","            if (got !== expected) {","                return bufrw.ReadResult.rangedError(new Error(","                    'checksum mismatch, expected ' + expected + ' got ' + got","                ), offset, res.offset);","            }","        }","        return res;","    }","};","","function MultiCTL(bodyCases, port, addresses) {","    var self = this;","    EventEmitter.call(self);","","    // type:1 {body} checksum:4","    self.frameRW = bufrw.Struct([","        {call: bufrw.Switch(bufrw.UInt8, bodyCases, {","            valKey: 'type',","            dataKey: 'body',","            structMode: true","        })},","        {name: 'checksum', call: ChecksumPrior}","    ]);","","    self.port = port;","    self.addresses = addresses;","    self.socket = dgram.createSocket('udp4', onMessage);","    self.socket.bind(port, function onBound() {","        for (var i = 0; i < self.addresses.length; i++) {","            self.socket.addMembership(self.addresses[i]);","        }","    });","    function onMessage(buf, rinfo) {","        self.onMessage(buf, rinfo);","    }","}","inherits(MultiCTL, EventEmitter);","","MultiCTL.prototype.close = function close(callback) {","    var self = this;","    self.socket.close(callback);","};","","MultiCTL.prototype.onMessage = function onMessage(buf, rinfo) {","    var self = this;","    bufrw.fromBufferResult(self.frameRW, buf).toCallback(function parsed(err, frame) {","        if (err) {","            self.emit('error', err);","            return;","        }","        self.emit('frame', frame.type, frame.body, rinfo);","    });","};","","MultiCTL.prototype.send = function send(type, body) {","    var self = this;","    var frame = {","        type: type,","        body: body,","        checksum: 0","    };","    bufrw.toBufferResult(self.frameRW, frame).toCallback(function wrote(err, buf) {","        if (err) {","            self.emit('error', err);","            return;","        }","        for (var i = 0; i < self.addresses.length; i++) {","            self.socket.send(buf, 0, buf.length, self.port, self.addresses[i]);","        }","    });","};","","module.exports = MultiCTL;",""],"l":{"63":1,"64":1,"65":1,"66":1,"67":1,"70":1,"72":0,"75":0,"76":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"89":0,"93":1,"94":0,"95":0,"98":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"115":1,"116":0,"119":1,"121":1,"122":0,"123":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"133":0,"137":1,"138":0,"139":0,"144":0,"145":0,"146":0,"147":0,"149":0,"150":0,"155":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/frame.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/frame.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"TChannelFrame","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":25}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":30},"end":{"line":39,"column":58}}},"3":{"name":"(anonymous_3)","line":81,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":47}}},"4":{"name":"(anonymous_4)","line":92,"loc":{"start":{"line":92,"column":41},"end":{"line":92,"column":53}}},"5":{"name":"(anonymous_5)","line":105,"loc":{"start":{"line":105,"column":35},"end":{"line":105,"column":47}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":35}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":33}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":28}},"4":{"start":{"line":28,"column":0},"end":{"line":28,"column":31}},"5":{"start":{"line":30,"column":0},"end":{"line":37,"column":1}},"6":{"start":{"line":31,"column":4},"end":{"line":31,"column":31}},"7":{"start":{"line":33,"column":4},"end":{"line":33,"column":24}},"8":{"start":{"line":34,"column":4},"end":{"line":34,"column":21}},"9":{"start":{"line":35,"column":4},"end":{"line":35,"column":21}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":21}},"11":{"start":{"line":39,"column":0},"end":{"line":79,"column":2}},"12":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"13":{"start":{"line":41,"column":8},"end":{"line":41,"column":18}},"14":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"15":{"start":{"line":44,"column":8},"end":{"line":44,"column":18}},"16":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"17":{"start":{"line":47,"column":8},"end":{"line":47,"column":18}},"18":{"start":{"line":50,"column":4},"end":{"line":54,"column":5}},"19":{"start":{"line":51,"column":8},"end":{"line":51,"column":25}},"20":{"start":{"line":53,"column":8},"end":{"line":53,"column":48}},"21":{"start":{"line":55,"column":4},"end":{"line":55,"column":43}},"22":{"start":{"line":57,"column":4},"end":{"line":65,"column":5}},"23":{"start":{"line":58,"column":8},"end":{"line":58,"column":25}},"24":{"start":{"line":59,"column":11},"end":{"line":65,"column":5}},"25":{"start":{"line":60,"column":8},"end":{"line":60,"column":37}},"26":{"start":{"line":61,"column":11},"end":{"line":65,"column":5}},"27":{"start":{"line":62,"column":8},"end":{"line":62,"column":32}},"28":{"start":{"line":64,"column":8},"end":{"line":64,"column":59}},"29":{"start":{"line":66,"column":4},"end":{"line":66,"column":43}},"30":{"start":{"line":68,"column":4},"end":{"line":76,"column":5}},"31":{"start":{"line":69,"column":8},"end":{"line":69,"column":25}},"32":{"start":{"line":70,"column":11},"end":{"line":76,"column":5}},"33":{"start":{"line":71,"column":8},"end":{"line":71,"column":37}},"34":{"start":{"line":72,"column":11},"end":{"line":76,"column":5}},"35":{"start":{"line":73,"column":8},"end":{"line":73,"column":32}},"36":{"start":{"line":75,"column":8},"end":{"line":75,"column":59}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":43}},"38":{"start":{"line":78,"column":4},"end":{"line":78,"column":39}},"39":{"start":{"line":81,"column":0},"end":{"line":90,"column":2}},"40":{"start":{"line":82,"column":4},"end":{"line":82,"column":42}},"41":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"42":{"start":{"line":84,"column":8},"end":{"line":84,"column":56}},"43":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"44":{"start":{"line":87,"column":8},"end":{"line":87,"column":56}},"45":{"start":{"line":89,"column":4},"end":{"line":89,"column":16}},"46":{"start":{"line":92,"column":0},"end":{"line":103,"column":2}},"47":{"start":{"line":93,"column":4},"end":{"line":93,"column":20}},"48":{"start":{"line":94,"column":4},"end":{"line":94,"column":19}},"49":{"start":{"line":95,"column":4},"end":{"line":95,"column":33}},"50":{"start":{"line":96,"column":4},"end":{"line":96,"column":36}},"51":{"start":{"line":97,"column":4},"end":{"line":101,"column":5}},"52":{"start":{"line":98,"column":8},"end":{"line":98,"column":63}},"53":{"start":{"line":99,"column":8},"end":{"line":99,"column":28}},"54":{"start":{"line":100,"column":8},"end":{"line":100,"column":32}},"55":{"start":{"line":102,"column":4},"end":{"line":102,"column":15}},"56":{"start":{"line":105,"column":0},"end":{"line":133,"column":2}},"57":{"start":{"line":106,"column":4},"end":{"line":106,"column":29}},"58":{"start":{"line":107,"column":4},"end":{"line":107,"column":80}},"59":{"start":{"line":108,"column":4},"end":{"line":108,"column":19}},"60":{"start":{"line":110,"column":4},"end":{"line":110,"column":46}},"61":{"start":{"line":111,"column":4},"end":{"line":111,"column":16}},"62":{"start":{"line":112,"column":4},"end":{"line":112,"column":47}},"63":{"start":{"line":113,"column":4},"end":{"line":113,"column":16}},"64":{"start":{"line":114,"column":4},"end":{"line":114,"column":48}},"65":{"start":{"line":115,"column":4},"end":{"line":115,"column":16}},"66":{"start":{"line":116,"column":4},"end":{"line":116,"column":52}},"67":{"start":{"line":117,"column":4},"end":{"line":117,"column":16}},"68":{"start":{"line":118,"column":4},"end":{"line":118,"column":52}},"69":{"start":{"line":119,"column":4},"end":{"line":119,"column":16}},"70":{"start":{"line":120,"column":4},"end":{"line":120,"column":52}},"71":{"start":{"line":121,"column":4},"end":{"line":121,"column":16}},"72":{"start":{"line":122,"column":4},"end":{"line":122,"column":49}},"73":{"start":{"line":123,"column":4},"end":{"line":123,"column":16}},"74":{"start":{"line":125,"column":4},"end":{"line":125,"column":32}},"75":{"start":{"line":126,"column":4},"end":{"line":126,"column":31}},"76":{"start":{"line":127,"column":4},"end":{"line":127,"column":32}},"77":{"start":{"line":128,"column":4},"end":{"line":128,"column":31}},"78":{"start":{"line":129,"column":4},"end":{"line":129,"column":32}},"79":{"start":{"line":130,"column":4},"end":{"line":130,"column":31}},"80":{"start":{"line":132,"column":4},"end":{"line":132,"column":15}}},"branchMap":{"1":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"2":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":26}},{"start":{"line":40,"column":30},"end":{"line":40,"column":43}}]},"3":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"4":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":26}},{"start":{"line":43,"column":30},"end":{"line":43,"column":43}}]},"5":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"6":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":26}},{"start":{"line":46,"column":30},"end":{"line":46,"column":43}}]},"7":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"8":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"9":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":11},"end":{"line":59,"column":11}},{"start":{"line":59,"column":11},"end":{"line":59,"column":11}}]},"10":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":11},"end":{"line":61,"column":11}},{"start":{"line":61,"column":11},"end":{"line":61,"column":11}}]},"11":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":15},"end":{"line":61,"column":28}},{"start":{"line":61,"column":32},"end":{"line":61,"column":50}}]},"12":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"13":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":11},"end":{"line":70,"column":11}},{"start":{"line":70,"column":11},"end":{"line":70,"column":11}}]},"14":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":11},"end":{"line":72,"column":11}},{"start":{"line":72,"column":11},"end":{"line":72,"column":11}}]},"15":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":15},"end":{"line":72,"column":28}},{"start":{"line":72,"column":32},"end":{"line":72,"column":50}}]},"16":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"17":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"18":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":97,"column":4}},{"start":{"line":97,"column":4},"end":{"line":97,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var farmhash = require('farmhash');","var Header = require('./header');","","var emptyBuffer = Buffer(0);","","module.exports = TChannelFrame;","","function TChannelFrame() {","    this.header = new Header();","    // TODO this field is unused. It should be removed.","    this.options = null;","    this.arg1 = null;","    this.arg2 = null;","    this.arg3 = null;","}","","TChannelFrame.prototype.set = function (arg1, arg2, arg3) {","    if (arg1 === undefined || arg1 === null) {","        arg1 = '';","    }","    if (arg2 === undefined || arg2 === null) {","        arg2 = '';","    }","    if (arg3 === undefined || arg3 === null) {","        arg3 = '';","    }","","    if (Buffer.isBuffer(arg1)) {","        this.arg1 = arg1;","    } else {","        this.arg1 = new Buffer(arg1.toString());","    }","    this.header.arg1len = this.arg1.length;","","    if (Buffer.isBuffer(arg2)) {","        this.arg2 = arg2;","    } else if (typeof arg2 === 'string') {","        this.arg2 = new Buffer(arg2);","    } else if (arg2 === null || arg2 === undefined) {","        this.arg2 = emptyBuffer;","    } else {","        throw new Error('arg2 must be a buffer or string');","    }","    this.header.arg2len = this.arg2.length;","","    if (Buffer.isBuffer(arg3)) {","        this.arg3 = arg3;","    } else if (typeof arg3 === 'string') {","        this.arg3 = new Buffer(arg3);","    } else if (arg3 === null || arg3 === undefined) {","        this.arg3 = emptyBuffer;","    } else {","        throw new Error('arg3 must be a buffer or string');","    }","    this.header.arg3len = this.arg3.length;","    this.header.csum = this.checksum();","};","","TChannelFrame.prototype.checksum = function () {","    var csum = farmhash.hash32(this.arg1);","    if (this.arg2.length > 0) {","        csum = farmhash.hash32WithSeed(this.arg2, csum);","    }","    if (this.arg3.length > 0) {","        csum = farmhash.hash32WithSeed(this.arg3, csum);","    }","    return csum;","};","","TChannelFrame.prototype.verifyChecksum = function () {","    var self = this;","    var err = null;","    var actual = self.checksum();","    var expected = self.header.csum;","    if (expected !== actual) {","        err = new Error('tchannel checksum validation failed');","        err.actual = actual;","        err.expected = expected;","    }","    return err;","};","","TChannelFrame.prototype.toBuffer = function () {","    var header = this.header;","    var buf = new Buffer(25 + header.arg1len + header.arg2len + header.arg3len);","    var offset = 0;","","    buf.writeUInt8(header.type, offset, true);","    offset += 1;","    buf.writeUInt32BE(header.id, offset, true);","    offset += 4;","    buf.writeUInt32BE(header.seq, offset, true);","    offset += 4;","    buf.writeUInt32BE(header.arg1len, offset, true);","    offset += 4;","    buf.writeUInt32BE(header.arg2len, offset, true);","    offset += 4;","    buf.writeUInt32BE(header.arg3len, offset, true);","    offset += 4;","    buf.writeUInt32BE(header.csum, offset, true);","    offset += 4;","","    this.arg1.copy(buf, offset);","    offset += this.arg1.length;","    this.arg2.copy(buf, offset);","    offset += this.arg2.length;","    this.arg3.copy(buf, offset);","    offset += this.arg3.length;","","    return buf;","};",""],"l":{"23":1,"24":1,"26":1,"28":1,"30":1,"31":0,"33":0,"34":0,"35":0,"36":0,"39":1,"40":0,"41":0,"43":0,"44":0,"46":0,"47":0,"50":0,"51":0,"53":0,"55":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"66":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"75":0,"77":0,"78":0,"81":1,"82":0,"83":0,"84":0,"86":0,"87":0,"89":0,"92":1,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"102":0,"105":1,"106":0,"107":0,"108":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"132":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/header.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/header.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"TChannelHeader","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":26}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":32}},"2":{"start":{"line":25,"column":0},"end":{"line":33,"column":1}},"3":{"start":{"line":26,"column":4},"end":{"line":26,"column":21}},"4":{"start":{"line":27,"column":4},"end":{"line":27,"column":19}},"5":{"start":{"line":28,"column":4},"end":{"line":28,"column":20}},"6":{"start":{"line":29,"column":4},"end":{"line":29,"column":24}},"7":{"start":{"line":30,"column":4},"end":{"line":30,"column":24}},"8":{"start":{"line":31,"column":4},"end":{"line":31,"column":24}},"9":{"start":{"line":32,"column":4},"end":{"line":32,"column":21}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = TChannelHeader;","","function TChannelHeader() {","    this.type = null;","    this.id = null;","    this.seq = null;","    this.arg1len = null;","    this.arg2len = null;","    this.arg3len = null;","    this.csum = null;","}",""],"l":{"23":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/handler.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/handler.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":0},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"TChannelHandler","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":43}}},"2":{"name":"nextFrameId","line":48,"loc":{"start":{"line":48,"column":40},"end":{"line":48,"column":63}}},"3":{"name":"handleFrame","line":54,"loc":{"start":{"line":54,"column":40},"end":{"line":54,"column":68}}},"4":{"name":"handleInitRequest","line":70,"loc":{"start":{"line":70,"column":46},"end":{"line":70,"column":83}}},"5":{"name":"handleInitResponse","line":82,"loc":{"start":{"line":82,"column":47},"end":{"line":82,"column":85}}},"6":{"name":"handleCallRequest","line":93,"loc":{"start":{"line":93,"column":46},"end":{"line":93,"column":83}}},"7":{"name":"sendResponseFrame","line":114,"loc":{"start":{"line":114,"column":7},"end":{"line":114,"column":61}}},"8":{"name":"handleCallResponse","line":119,"loc":{"start":{"line":119,"column":47},"end":{"line":119,"column":85}}},"9":{"name":"handleError","line":138,"loc":{"start":{"line":138,"column":40},"end":{"line":138,"column":71}}},"10":{"name":"sendInitRequest","line":146,"loc":{"start":{"line":146,"column":44},"end":{"line":146,"column":71}}},"11":{"name":"sendInitResponse","line":157,"loc":{"start":{"line":157,"column":45},"end":{"line":157,"column":81}}},"12":{"name":"sendRequestFrame","line":169,"loc":{"start":{"line":169,"column":45},"end":{"line":169,"column":108}}},"13":{"name":"sendResponseFrame","line":181,"loc":{"start":{"line":181,"column":46},"end":{"line":181,"column":110}}},"14":{"name":"isError","line":201,"loc":{"start":{"line":201,"column":0},"end":{"line":201,"column":22}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":28}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}},"5":{"start":{"line":29,"column":0},"end":{"line":44,"column":1}},"6":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"7":{"start":{"line":31,"column":8},"end":{"line":31,"column":53}},"8":{"start":{"line":33,"column":4},"end":{"line":33,"column":28}},"9":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":27}},"11":{"start":{"line":36,"column":4},"end":{"line":36,"column":41}},"12":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"13":{"start":{"line":41,"column":4},"end":{"line":41,"column":47}},"14":{"start":{"line":42,"column":4},"end":{"line":42,"column":27}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":29}},"16":{"start":{"line":46,"column":0},"end":{"line":46,"column":45}},"17":{"start":{"line":48,"column":0},"end":{"line":52,"column":2}},"18":{"start":{"line":49,"column":4},"end":{"line":49,"column":20}},"19":{"start":{"line":50,"column":4},"end":{"line":50,"column":67}},"20":{"start":{"line":51,"column":4},"end":{"line":51,"column":32}},"21":{"start":{"line":54,"column":0},"end":{"line":68,"column":2}},"22":{"start":{"line":55,"column":4},"end":{"line":55,"column":20}},"23":{"start":{"line":56,"column":4},"end":{"line":67,"column":5}},"24":{"start":{"line":58,"column":12},"end":{"line":58,"column":49}},"25":{"start":{"line":60,"column":12},"end":{"line":60,"column":50}},"26":{"start":{"line":62,"column":12},"end":{"line":62,"column":43}},"27":{"start":{"line":64,"column":12},"end":{"line":66,"column":15}},"28":{"start":{"line":70,"column":0},"end":{"line":80,"column":2}},"29":{"start":{"line":71,"column":4},"end":{"line":71,"column":20}},"30":{"start":{"line":72,"column":4},"end":{"line":75,"column":5}},"31":{"start":{"line":73,"column":8},"end":{"line":73,"column":64}},"32":{"start":{"line":74,"column":8},"end":{"line":74,"column":15}},"33":{"start":{"line":76,"column":4},"end":{"line":76,"column":44}},"34":{"start":{"line":77,"column":4},"end":{"line":77,"column":31}},"35":{"start":{"line":78,"column":4},"end":{"line":78,"column":39}},"36":{"start":{"line":79,"column":4},"end":{"line":79,"column":36}},"37":{"start":{"line":82,"column":0},"end":{"line":91,"column":2}},"38":{"start":{"line":83,"column":4},"end":{"line":83,"column":20}},"39":{"start":{"line":84,"column":4},"end":{"line":87,"column":5}},"40":{"start":{"line":85,"column":8},"end":{"line":85,"column":65}},"41":{"start":{"line":86,"column":8},"end":{"line":86,"column":15}},"42":{"start":{"line":88,"column":4},"end":{"line":88,"column":39}},"43":{"start":{"line":89,"column":4},"end":{"line":89,"column":29}},"44":{"start":{"line":90,"column":4},"end":{"line":90,"column":38}},"45":{"start":{"line":93,"column":0},"end":{"line":117,"column":2}},"46":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"47":{"start":{"line":95,"column":4},"end":{"line":95,"column":32}},"48":{"start":{"line":96,"column":4},"end":{"line":96,"column":40}},"49":{"start":{"line":98,"column":4},"end":{"line":101,"column":5}},"50":{"start":{"line":99,"column":8},"end":{"line":99,"column":41}},"51":{"start":{"line":100,"column":8},"end":{"line":100,"column":15}},"52":{"start":{"line":103,"column":4},"end":{"line":106,"column":5}},"53":{"start":{"line":104,"column":8},"end":{"line":104,"column":74}},"54":{"start":{"line":105,"column":8},"end":{"line":105,"column":15}},"55":{"start":{"line":108,"column":4},"end":{"line":108,"column":56}},"56":{"start":{"line":109,"column":4},"end":{"line":116,"column":7}},"57":{"start":{"line":115,"column":8},"end":{"line":115,"column":68}},"58":{"start":{"line":119,"column":0},"end":{"line":136,"column":2}},"59":{"start":{"line":120,"column":4},"end":{"line":120,"column":20}},"60":{"start":{"line":122,"column":4},"end":{"line":125,"column":5}},"61":{"start":{"line":123,"column":8},"end":{"line":123,"column":42}},"62":{"start":{"line":124,"column":8},"end":{"line":124,"column":15}},"63":{"start":{"line":127,"column":4},"end":{"line":130,"column":5}},"64":{"start":{"line":128,"column":8},"end":{"line":128,"column":76}},"65":{"start":{"line":129,"column":8},"end":{"line":129,"column":15}},"66":{"start":{"line":132,"column":4},"end":{"line":132,"column":32}},"67":{"start":{"line":133,"column":4},"end":{"line":133,"column":29}},"68":{"start":{"line":134,"column":4},"end":{"line":134,"column":29}},"69":{"start":{"line":135,"column":4},"end":{"line":135,"column":45}},"70":{"start":{"line":138,"column":0},"end":{"line":144,"column":2}},"71":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"72":{"start":{"line":140,"column":4},"end":{"line":140,"column":32}},"73":{"start":{"line":141,"column":4},"end":{"line":141,"column":32}},"74":{"start":{"line":142,"column":4},"end":{"line":142,"column":33}},"75":{"start":{"line":143,"column":4},"end":{"line":143,"column":44}},"76":{"start":{"line":146,"column":0},"end":{"line":155,"column":2}},"77":{"start":{"line":147,"column":4},"end":{"line":147,"column":20}},"78":{"start":{"line":148,"column":4},"end":{"line":148,"column":34}},"79":{"start":{"line":149,"column":4},"end":{"line":149,"column":32}},"80":{"start":{"line":150,"column":4},"end":{"line":150,"column":28}},"81":{"start":{"line":151,"column":4},"end":{"line":151,"column":28}},"82":{"start":{"line":152,"column":4},"end":{"line":152,"column":67}},"83":{"start":{"line":153,"column":4},"end":{"line":153,"column":55}},"84":{"start":{"line":154,"column":4},"end":{"line":154,"column":30}},"85":{"start":{"line":157,"column":0},"end":{"line":167,"column":2}},"86":{"start":{"line":158,"column":4},"end":{"line":158,"column":20}},"87":{"start":{"line":159,"column":4},"end":{"line":159,"column":32}},"88":{"start":{"line":160,"column":4},"end":{"line":160,"column":29}},"89":{"start":{"line":161,"column":4},"end":{"line":161,"column":34}},"90":{"start":{"line":162,"column":4},"end":{"line":162,"column":28}},"91":{"start":{"line":163,"column":4},"end":{"line":163,"column":28}},"92":{"start":{"line":164,"column":4},"end":{"line":164,"column":52}},"93":{"start":{"line":165,"column":4},"end":{"line":165,"column":55}},"94":{"start":{"line":166,"column":4},"end":{"line":166,"column":30}},"95":{"start":{"line":169,"column":0},"end":{"line":179,"column":2}},"96":{"start":{"line":170,"column":4},"end":{"line":170,"column":20}},"97":{"start":{"line":171,"column":4},"end":{"line":171,"column":32}},"98":{"start":{"line":172,"column":4},"end":{"line":172,"column":34}},"99":{"start":{"line":173,"column":4},"end":{"line":173,"column":28}},"100":{"start":{"line":174,"column":4},"end":{"line":174,"column":28}},"101":{"start":{"line":175,"column":4},"end":{"line":175,"column":35}},"102":{"start":{"line":176,"column":4},"end":{"line":176,"column":55}},"103":{"start":{"line":177,"column":4},"end":{"line":177,"column":40}},"104":{"start":{"line":178,"column":4},"end":{"line":178,"column":14}},"105":{"start":{"line":181,"column":0},"end":{"line":199,"column":2}},"106":{"start":{"line":182,"column":4},"end":{"line":182,"column":20}},"107":{"start":{"line":183,"column":4},"end":{"line":183,"column":34}},"108":{"start":{"line":184,"column":4},"end":{"line":184,"column":32}},"109":{"start":{"line":185,"column":4},"end":{"line":185,"column":40}},"110":{"start":{"line":186,"column":4},"end":{"line":186,"column":28}},"111":{"start":{"line":187,"column":4},"end":{"line":187,"column":28}},"112":{"start":{"line":188,"column":4},"end":{"line":197,"column":5}},"113":{"start":{"line":192,"column":8},"end":{"line":192,"column":67}},"114":{"start":{"line":193,"column":8},"end":{"line":193,"column":49}},"115":{"start":{"line":195,"column":8},"end":{"line":195,"column":39}},"116":{"start":{"line":196,"column":8},"end":{"line":196,"column":59}},"117":{"start":{"line":198,"column":4},"end":{"line":198,"column":40}},"118":{"start":{"line":201,"column":0},"end":{"line":205,"column":1}},"119":{"start":{"line":202,"column":4},"end":{"line":204,"column":30}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":56,"type":"switch","locations":[{"start":{"line":57,"column":8},"end":{"line":58,"column":49}},{"start":{"line":59,"column":8},"end":{"line":60,"column":50}},{"start":{"line":61,"column":8},"end":{"line":62,"column":43}},{"start":{"line":63,"column":8},"end":{"line":66,"column":15}}]},"3":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"4":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"5":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"6":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"7":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"8":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":4},"end":{"line":127,"column":4}},{"start":{"line":127,"column":4},"end":{"line":127,"column":4}}]},"9":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":4},"end":{"line":188,"column":4}},{"start":{"line":188,"column":4},"end":{"line":188,"column":4}}]},"10":{"line":192,"type":"cond-expr","locations":[{"start":{"line":192,"column":36},"end":{"line":192,"column":47}},{"start":{"line":192,"column":50},"end":{"line":192,"column":53}}]},"11":{"line":202,"type":"binary-expr","locations":[{"start":{"line":202,"column":11},"end":{"line":202,"column":34}},{"start":{"line":203,"column":8},"end":{"line":203,"column":64}},{"start":{"line":204,"column":8},"end":{"line":204,"column":28}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var EventEmitter = require('events').EventEmitter;","var util = require('util');","","var v1 = require('./index');","module.exports = TChannelHandler;","","function TChannelHandler(channel, options) {","    if (!(this instanceof TChannelHandler)) {","        return new TChannelHandler(channel, options);","    }","    EventEmitter.call(this);","    var self = this;","    self.channel = channel;","    self.writeFrame = options.writeFrame;","    // TODO: may be better suited to pull out an operation collection","    // abstraction and then encapsulate through that rather than this","    // run/complete approach","    self.runInOp = options.runInOp;","    self.completeOutOp = options.completeOutOp;","    self.remoteName = null; // filled in by identify message","    self.lastSentFrameId = 0;","}","","util.inherits(TChannelHandler, EventEmitter);","","TChannelHandler.prototype.nextFrameId = function nextFrameId() {","    var self = this;","    self.lastSentFrameId = (self.lastSentFrameId + 1) % 0xffffffff;","    return self.lastSentFrameId;","};","","TChannelHandler.prototype.handleFrame = function handleFrame(frame) {","    var self = this;","    switch (frame.header.type) {","        case v1.Types.reqCompleteMessage:","            return self.handleCallRequest(frame);","        case v1.Types.resCompleteMessage:","            return self.handleCallResponse(frame);","        case v1.Types.resError:","            return self.handleError(frame);","        default:","            self.logger.error('unhandled frame type', {","                type: frame.header.type","            });","    }","};","","TChannelHandler.prototype.handleInitRequest = function handleInitRequest(reqFrame) {","    var self = this;","    if (self.remoteName !== null) {","        self.emit('error', new Error('duplicate init request'));","        return;","    }","    var hostPort = reqFrame.arg2.toString();","    self.remoteName = hostPort;","    self.emit('identify.in', hostPort);","    self.sendInitResponse(reqFrame);","};","","TChannelHandler.prototype.handleInitResponse = function handleInitResponse(resFrame) {","    var self = this;","    if (self.remoteName !== null) {","        self.emit('error', new Error('duplicate init response'));","        return;","    }","    var remote = String(resFrame.arg2);","    self.remoteName = remote;","    self.emit('identify.out', remote);","};","","TChannelHandler.prototype.handleCallRequest = function handleCallRequest(reqFrame) {","    var self = this;","    var id = reqFrame.header.id;","    var name = reqFrame.arg1.toString();","","    if (name === 'TChannel identify') {","        self.handleInitRequest(reqFrame);","        return;","    }","","    if (self.remoteName === null) {","        self.emit('error', new Error('call request before init request'));","        return;","    }","","    var handler = self.channel.getEndpointHandler(name);","    self.runInOp(handler, {","        id: id,","        arg1: reqFrame.arg1,","        arg2: reqFrame.arg2,","        arg3: reqFrame.arg3,","    }, function sendResponseFrame(err, res1, res2, callback) {","        self.sendResponseFrame(reqFrame, err, res1, res2, callback);","    });","};","","TChannelHandler.prototype.handleCallResponse = function handleCallResponse(resFrame) {","    var self = this;","","    if (String(resFrame.arg1) === 'TChannel identify') {","        self.handleInitResponse(resFrame);","        return;","    }","","    if (self.remoteName === null) {","        self.emit('error', new Error('call response before init response'));","        return;","    }","","    var id = resFrame.header.id;","    var arg2 = resFrame.arg2;","    var arg3 = resFrame.arg3;","    self.completeOutOp(null, id, arg2, arg3);","};","","TChannelHandler.prototype.handleError = function handleError(errFrame) {","    var self = this;","    var id = errFrame.header.id;","    var message = errFrame.arg1;","    var err = new Error(message);","    self.completeOutOp(err, id, null, null);","};","","TChannelHandler.prototype.sendInitRequest = function sendInitRequest() {","    var self = this;","    var reqFrame = new v1.Frame();","    var id = self.nextFrameId();","    reqFrame.header.id = id;","    reqFrame.header.seq = 0;","    reqFrame.set('TChannel identify', self.channel.hostPort, null);","    reqFrame.header.type = v1.Types.reqCompleteMessage;","    self.writeFrame(reqFrame);","};","","TChannelHandler.prototype.sendInitResponse = function sendInitResponse(reqFrame) {","    var self = this;","    var id = reqFrame.header.id;","    var arg1 = reqFrame.arg1;","    var resFrame = new v1.Frame();","    resFrame.header.id = id;","    resFrame.header.seq = 0;","    resFrame.set(arg1, self.channel.hostPort, null);","    resFrame.header.type = v1.Types.resCompleteMessage;","    self.writeFrame(resFrame);","};","","TChannelHandler.prototype.sendRequestFrame = function sendRequestFrame(options, arg1, arg2, arg3, callback) {","    var self = this;","    var id = self.nextFrameId();","    var reqFrame = new v1.Frame();","    reqFrame.header.id = id;","    reqFrame.header.seq = 0;","    reqFrame.set(arg1, arg2, arg3);","    reqFrame.header.type = v1.Types.reqCompleteMessage;","    self.writeFrame(reqFrame, callback);","    return id;","};","","TChannelHandler.prototype.sendResponseFrame = function sendResponseFrame(reqFrame, err, res1, res2, callback) {","    var self = this;","    var resFrame = new v1.Frame();","    var id = reqFrame.header.id;","    var name = reqFrame.arg1.toString();","    resFrame.header.id = id;","    resFrame.header.seq = 0;","    if (err) {","        // TODO should the error response contain a head ?","        // Is there any value in sending meta data along with","        // the error.","        resFrame.set(isError(err) ? err.message : err, null, null);","        resFrame.header.type = v1.Types.resError;","    } else {","        resFrame.set(name, res1, res2);","        resFrame.header.type = v1.Types.resCompleteMessage;","    }","    self.writeFrame(resFrame, callback);","};","","function isError(obj) {","    return typeof obj === 'object' && (","        Object.prototype.toString.call(obj) === '[object Error]' ||","        obj instanceof Error);","}",""],"l":{"23":1,"24":1,"26":1,"27":1,"29":1,"30":0,"31":0,"33":0,"34":0,"35":0,"36":0,"40":0,"41":0,"42":0,"43":0,"46":1,"48":1,"49":0,"50":0,"51":0,"54":1,"55":0,"56":0,"58":0,"60":0,"62":0,"64":0,"70":1,"71":0,"72":0,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"82":1,"83":0,"84":0,"85":0,"86":0,"88":0,"89":0,"90":0,"93":1,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"103":0,"104":0,"105":0,"108":0,"109":0,"115":0,"119":1,"120":0,"122":0,"123":0,"124":0,"127":0,"128":0,"129":0,"132":0,"133":0,"134":0,"135":0,"138":1,"139":0,"140":0,"141":0,"142":0,"143":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"169":1,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"181":1,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"192":0,"193":0,"195":0,"196":0,"198":0,"201":1,"202":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":27}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":42}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":44}},"4":{"start":{"line":27,"column":0},"end":{"line":27,"column":44}},"5":{"start":{"line":28,"column":0},"end":{"line":28,"column":46}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":38}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":61}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":61}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":55}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":61}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":61}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":55}},"13":{"start":{"line":38,"column":0},"end":{"line":38,"column":40}}},"branchMap":{},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports.VERSION = 1;","","module.exports.Frame = require('./frame');","module.exports.Header = require('./header');","module.exports.Parser = require('./parser');","module.exports.Handler = require('./handler');","","","var types = module.exports.Types = {};","types.reqCompleteMessage = types.req_complete_message = 0x01;","types.reqMessageFragment = types.req_message_fragment = 0x02;","types.reqLastFragment = types.req_last_fragment = 0x03;","types.resCompleteMessage = types.res_complete_message = 0x80;","types.resMessageFragment = types.res_message_fragment = 0x81;","types.resLastFragment = types.res_last_fragment = 0x82;","types.resError = types.res_error = 0xC0;","",""],"l":{"23":1,"25":1,"26":1,"27":1,"28":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/parser.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/v1/parser.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"TChannelParser","line":42,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":36}}},"2":{"name":"(anonymous_2)","line":60,"loc":{"start":{"line":60,"column":38},"end":{"line":60,"column":52}}},"3":{"name":"(anonymous_3)","line":67,"loc":{"start":{"line":67,"column":36},"end":{"line":67,"column":48}}},"4":{"name":"(anonymous_4)","line":73,"loc":{"start":{"line":73,"column":35},"end":{"line":73,"column":47}}},"5":{"name":"(anonymous_5)","line":88,"loc":{"start":{"line":88,"column":35},"end":{"line":88,"column":50}}},"6":{"name":"(anonymous_6)","line":108,"loc":{"start":{"line":108,"column":35},"end":{"line":108,"column":52}}},"7":{"name":"(anonymous_7)","line":197,"loc":{"start":{"line":197,"column":40},"end":{"line":197,"column":52}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":32}},"2":{"start":{"line":25,"column":0},"end":{"line":25,"column":32}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":39}},"4":{"start":{"line":29,"column":0},"end":{"line":29,"column":40}},"5":{"start":{"line":30,"column":0},"end":{"line":30,"column":20}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":18}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":19}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":23}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":23}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":23}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":20}},"12":{"start":{"line":37,"column":0},"end":{"line":37,"column":20}},"13":{"start":{"line":38,"column":0},"end":{"line":38,"column":20}},"14":{"start":{"line":39,"column":0},"end":{"line":39,"column":21}},"15":{"start":{"line":40,"column":0},"end":{"line":40,"column":19}},"16":{"start":{"line":42,"column":0},"end":{"line":56,"column":1}},"17":{"start":{"line":43,"column":4},"end":{"line":43,"column":40}},"18":{"start":{"line":45,"column":4},"end":{"line":45,"column":36}},"19":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"20":{"start":{"line":48,"column":4},"end":{"line":48,"column":23}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":35}},"22":{"start":{"line":50,"column":4},"end":{"line":50,"column":23}},"23":{"start":{"line":51,"column":4},"end":{"line":51,"column":23}},"24":{"start":{"line":52,"column":4},"end":{"line":52,"column":23}},"25":{"start":{"line":54,"column":4},"end":{"line":54,"column":20}},"26":{"start":{"line":55,"column":4},"end":{"line":55,"column":22}},"27":{"start":{"line":58,"column":0},"end":{"line":58,"column":73}},"28":{"start":{"line":60,"column":0},"end":{"line":65,"column":2}},"29":{"start":{"line":61,"column":4},"end":{"line":61,"column":39}},"30":{"start":{"line":62,"column":4},"end":{"line":62,"column":45}},"31":{"start":{"line":63,"column":4},"end":{"line":63,"column":33}},"32":{"start":{"line":64,"column":4},"end":{"line":64,"column":30}},"33":{"start":{"line":67,"column":0},"end":{"line":71,"column":2}},"34":{"start":{"line":68,"column":4},"end":{"line":68,"column":41}},"35":{"start":{"line":69,"column":4},"end":{"line":69,"column":31}},"36":{"start":{"line":70,"column":4},"end":{"line":70,"column":40}},"37":{"start":{"line":73,"column":0},"end":{"line":86,"column":2}},"38":{"start":{"line":74,"column":4},"end":{"line":78,"column":5}},"39":{"start":{"line":75,"column":8},"end":{"line":75,"column":62}},"40":{"start":{"line":76,"column":8},"end":{"line":76,"column":22}},"41":{"start":{"line":77,"column":8},"end":{"line":77,"column":15}},"42":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"43":{"start":{"line":80,"column":8},"end":{"line":80,"column":66}},"44":{"start":{"line":82,"column":4},"end":{"line":85,"column":5}},"45":{"start":{"line":83,"column":8},"end":{"line":83,"column":59}},"46":{"start":{"line":84,"column":8},"end":{"line":84,"column":27}},"47":{"start":{"line":88,"column":0},"end":{"line":106,"column":2}},"48":{"start":{"line":89,"column":4},"end":{"line":105,"column":5}},"49":{"start":{"line":90,"column":8},"end":{"line":99,"column":9}},"50":{"start":{"line":91,"column":12},"end":{"line":91,"column":69}},"51":{"start":{"line":92,"column":12},"end":{"line":92,"column":28}},"52":{"start":{"line":93,"column":12},"end":{"line":93,"column":33}},"53":{"start":{"line":95,"column":12},"end":{"line":95,"column":42}},"54":{"start":{"line":96,"column":12},"end":{"line":96,"column":73}},"55":{"start":{"line":97,"column":12},"end":{"line":97,"column":58}},"56":{"start":{"line":98,"column":12},"end":{"line":98,"column":55}},"57":{"start":{"line":101,"column":8},"end":{"line":101,"column":78}},"58":{"start":{"line":102,"column":8},"end":{"line":102,"column":87}},"59":{"start":{"line":103,"column":8},"end":{"line":103,"column":38}},"60":{"start":{"line":104,"column":8},"end":{"line":104,"column":32}},"61":{"start":{"line":108,"column":0},"end":{"line":195,"column":2}},"62":{"start":{"line":109,"column":4},"end":{"line":109,"column":17}},"63":{"start":{"line":110,"column":4},"end":{"line":110,"column":23}},"64":{"start":{"line":111,"column":4},"end":{"line":111,"column":38}},"65":{"start":{"line":113,"column":4},"end":{"line":194,"column":5}},"66":{"start":{"line":114,"column":8},"end":{"line":193,"column":9}},"67":{"start":{"line":115,"column":12},"end":{"line":115,"column":28}},"68":{"start":{"line":116,"column":15},"end":{"line":193,"column":9}},"69":{"start":{"line":117,"column":12},"end":{"line":117,"column":27}},"70":{"start":{"line":118,"column":12},"end":{"line":122,"column":13}},"71":{"start":{"line":119,"column":16},"end":{"line":119,"column":40}},"72":{"start":{"line":120,"column":16},"end":{"line":120,"column":35}},"73":{"start":{"line":121,"column":16},"end":{"line":121,"column":44}},"74":{"start":{"line":123,"column":15},"end":{"line":193,"column":9}},"75":{"start":{"line":124,"column":12},"end":{"line":124,"column":27}},"76":{"start":{"line":125,"column":12},"end":{"line":129,"column":13}},"77":{"start":{"line":126,"column":16},"end":{"line":126,"column":41}},"78":{"start":{"line":127,"column":16},"end":{"line":127,"column":35}},"79":{"start":{"line":128,"column":16},"end":{"line":128,"column":48}},"80":{"start":{"line":130,"column":15},"end":{"line":193,"column":9}},"81":{"start":{"line":131,"column":12},"end":{"line":131,"column":27}},"82":{"start":{"line":132,"column":12},"end":{"line":136,"column":13}},"83":{"start":{"line":133,"column":16},"end":{"line":133,"column":45}},"84":{"start":{"line":134,"column":16},"end":{"line":134,"column":35}},"85":{"start":{"line":135,"column":16},"end":{"line":135,"column":48}},"86":{"start":{"line":137,"column":15},"end":{"line":193,"column":9}},"87":{"start":{"line":138,"column":12},"end":{"line":138,"column":27}},"88":{"start":{"line":139,"column":12},"end":{"line":143,"column":13}},"89":{"start":{"line":140,"column":16},"end":{"line":140,"column":45}},"90":{"start":{"line":141,"column":16},"end":{"line":141,"column":35}},"91":{"start":{"line":142,"column":16},"end":{"line":142,"column":48}},"92":{"start":{"line":144,"column":15},"end":{"line":193,"column":9}},"93":{"start":{"line":145,"column":12},"end":{"line":145,"column":27}},"94":{"start":{"line":146,"column":12},"end":{"line":150,"column":13}},"95":{"start":{"line":147,"column":16},"end":{"line":147,"column":45}},"96":{"start":{"line":148,"column":16},"end":{"line":148,"column":35}},"97":{"start":{"line":149,"column":16},"end":{"line":149,"column":45}},"98":{"start":{"line":151,"column":15},"end":{"line":193,"column":9}},"99":{"start":{"line":152,"column":12},"end":{"line":152,"column":27}},"100":{"start":{"line":153,"column":12},"end":{"line":157,"column":13}},"101":{"start":{"line":154,"column":16},"end":{"line":154,"column":42}},"102":{"start":{"line":155,"column":16},"end":{"line":155,"column":35}},"103":{"start":{"line":156,"column":16},"end":{"line":156,"column":45}},"104":{"start":{"line":158,"column":15},"end":{"line":193,"column":9}},"105":{"start":{"line":159,"column":12},"end":{"line":159,"column":41}},"106":{"start":{"line":160,"column":12},"end":{"line":170,"column":13}},"107":{"start":{"line":161,"column":16},"end":{"line":161,"column":49}},"108":{"start":{"line":162,"column":16},"end":{"line":162,"column":35}},"109":{"start":{"line":163,"column":16},"end":{"line":163,"column":35}},"110":{"start":{"line":164,"column":16},"end":{"line":169,"column":17}},"111":{"start":{"line":165,"column":20},"end":{"line":165,"column":40}},"112":{"start":{"line":166,"column":20},"end":{"line":166,"column":50}},"113":{"start":{"line":168,"column":20},"end":{"line":168,"column":49}},"114":{"start":{"line":171,"column":15},"end":{"line":193,"column":9}},"115":{"start":{"line":172,"column":12},"end":{"line":172,"column":41}},"116":{"start":{"line":173,"column":12},"end":{"line":183,"column":13}},"117":{"start":{"line":174,"column":16},"end":{"line":174,"column":49}},"118":{"start":{"line":175,"column":16},"end":{"line":175,"column":35}},"119":{"start":{"line":176,"column":16},"end":{"line":176,"column":35}},"120":{"start":{"line":177,"column":16},"end":{"line":182,"column":17}},"121":{"start":{"line":178,"column":20},"end":{"line":178,"column":40}},"122":{"start":{"line":179,"column":20},"end":{"line":179,"column":50}},"123":{"start":{"line":181,"column":20},"end":{"line":181,"column":49}},"124":{"start":{"line":184,"column":15},"end":{"line":193,"column":9}},"125":{"start":{"line":185,"column":12},"end":{"line":185,"column":41}},"126":{"start":{"line":186,"column":12},"end":{"line":190,"column":13}},"127":{"start":{"line":187,"column":16},"end":{"line":187,"column":49}},"128":{"start":{"line":188,"column":16},"end":{"line":188,"column":36}},"129":{"start":{"line":189,"column":16},"end":{"line":189,"column":46}},"130":{"start":{"line":191,"column":15},"end":{"line":193,"column":9}},"131":{"start":{"line":192,"column":12},"end":{"line":192,"column":59}},"132":{"start":{"line":197,"column":0},"end":{"line":215,"column":2}},"133":{"start":{"line":198,"column":4},"end":{"line":198,"column":23}},"134":{"start":{"line":199,"column":4},"end":{"line":199,"column":23}},"135":{"start":{"line":200,"column":4},"end":{"line":202,"column":5}},"136":{"start":{"line":201,"column":8},"end":{"line":201,"column":41}},"137":{"start":{"line":203,"column":4},"end":{"line":205,"column":5}},"138":{"start":{"line":204,"column":8},"end":{"line":204,"column":41}},"139":{"start":{"line":206,"column":4},"end":{"line":206,"column":45}},"140":{"start":{"line":207,"column":4},"end":{"line":210,"column":5}},"141":{"start":{"line":208,"column":8},"end":{"line":208,"column":32}},"142":{"start":{"line":209,"column":8},"end":{"line":209,"column":15}},"143":{"start":{"line":211,"column":4},"end":{"line":211,"column":38}},"144":{"start":{"line":212,"column":4},"end":{"line":212,"column":40}},"145":{"start":{"line":213,"column":4},"end":{"line":213,"column":33}},"146":{"start":{"line":214,"column":4},"end":{"line":214,"column":22}}},"branchMap":{"1":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"2":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":28}},{"start":{"line":74,"column":32},"end":{"line":74,"column":65}}]},"3":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":11},"end":{"line":79,"column":29}},{"start":{"line":79,"column":33},"end":{"line":79,"column":61}}]},"4":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"5":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":4},"end":{"line":89,"column":4}},{"start":{"line":89,"column":4},"end":{"line":89,"column":4}}]},"6":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":90,"column":8}},{"start":{"line":90,"column":8},"end":{"line":90,"column":8}}]},"7":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":114,"column":8}},{"start":{"line":114,"column":8},"end":{"line":114,"column":8}}]},"8":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":15},"end":{"line":116,"column":15}},{"start":{"line":116,"column":15},"end":{"line":116,"column":15}}]},"9":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":118,"column":12}},{"start":{"line":118,"column":12},"end":{"line":118,"column":12}}]},"10":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":15},"end":{"line":123,"column":15}},{"start":{"line":123,"column":15},"end":{"line":123,"column":15}}]},"11":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":12},"end":{"line":125,"column":12}},{"start":{"line":125,"column":12},"end":{"line":125,"column":12}}]},"12":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":15},"end":{"line":130,"column":15}},{"start":{"line":130,"column":15},"end":{"line":130,"column":15}}]},"13":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":12},"end":{"line":132,"column":12}},{"start":{"line":132,"column":12},"end":{"line":132,"column":12}}]},"14":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":15},"end":{"line":137,"column":15}},{"start":{"line":137,"column":15},"end":{"line":137,"column":15}}]},"15":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":12},"end":{"line":139,"column":12}},{"start":{"line":139,"column":12},"end":{"line":139,"column":12}}]},"16":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":15},"end":{"line":144,"column":15}},{"start":{"line":144,"column":15},"end":{"line":144,"column":15}}]},"17":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":146,"column":12}},{"start":{"line":146,"column":12},"end":{"line":146,"column":12}}]},"18":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":15},"end":{"line":151,"column":15}},{"start":{"line":151,"column":15},"end":{"line":151,"column":15}}]},"19":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":12},"end":{"line":153,"column":12}},{"start":{"line":153,"column":12},"end":{"line":153,"column":12}}]},"20":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":15},"end":{"line":158,"column":15}},{"start":{"line":158,"column":15},"end":{"line":158,"column":15}}]},"21":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":12},"end":{"line":160,"column":12}},{"start":{"line":160,"column":12},"end":{"line":160,"column":12}}]},"22":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":16},"end":{"line":164,"column":16}},{"start":{"line":164,"column":16},"end":{"line":164,"column":16}}]},"23":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":20},"end":{"line":164,"column":40}},{"start":{"line":164,"column":44},"end":{"line":164,"column":64}}]},"24":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":15},"end":{"line":171,"column":15}},{"start":{"line":171,"column":15},"end":{"line":171,"column":15}}]},"25":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":12},"end":{"line":173,"column":12}},{"start":{"line":173,"column":12},"end":{"line":173,"column":12}}]},"26":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":16},"end":{"line":177,"column":16}},{"start":{"line":177,"column":16},"end":{"line":177,"column":16}}]},"27":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":15},"end":{"line":184,"column":15}},{"start":{"line":184,"column":15},"end":{"line":184,"column":15}}]},"28":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":186,"column":12}},{"start":{"line":186,"column":12},"end":{"line":186,"column":12}}]},"29":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":15},"end":{"line":191,"column":15}},{"start":{"line":191,"column":15},"end":{"line":191,"column":15}}]},"30":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":4},"end":{"line":200,"column":4}},{"start":{"line":200,"column":4},"end":{"line":200,"column":4}}]},"31":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":4},"end":{"line":203,"column":4}},{"start":{"line":203,"column":4},"end":{"line":203,"column":4}}]},"32":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":4},"end":{"line":207,"column":4}},{"start":{"line":207,"column":4},"end":{"line":207,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","module.exports = TChannelParser;","","var emptyBuffer = new Buffer(0);","","var TChannelFrame = require('./frame');","","var states = TChannelParser.States = {};","states.readType = 1;","states.readId = 2;","states.readSeq = 3;","states.readArg1len = 4;","states.readArg2len = 5;","states.readArg3len = 6;","states.readCsum = 7;","states.readArg1 = 8;","states.readArg2 = 9;","states.readArg3 = 10;","states.error = 255;","","function TChannelParser(connection) {","    this.newFrame = new TChannelFrame();","","    this.logger = connection.logger;","    this.state = states.readType;","","    this.tmpInt = null;","    this.tmpIntBuf = new Buffer(4);","    this.tmpIntPos = 0;","    this.tmpStr = null;","    this.tmpStrPos = 0;","","    this.pos = null;","    this.chunk = null;","}","","require('util').inherits(TChannelParser, require('events').EventEmitter);","","TChannelParser.prototype.parseError = function(msg) {","    this.emit('error', new Error(msg));","    this.logger.error('parse error: ' + msg);","    this.pos = this.chunk.length;","    this.state = states.error;","};","","TChannelParser.prototype.readType = function () {","    var newType = this.chunk[this.pos++];","    this.state = states.readId;","    this.newFrame.header.type = newType;","};","","TChannelParser.prototype.readInt = function () {","    if (this.tmpIntPos === 0 && this.chunk.length >= this.pos + 4) {","        this.tmpInt = this.chunk.readUInt32BE(this.pos, true);","        this.pos += 4;","        return;","    }","    while (this.tmpIntPos < 4 && this.pos < this.chunk.length) {","        this.tmpIntBuf[this.tmpIntPos++] = this.chunk[this.pos++];","    }","    if (this.tmpIntPos === 4) {","        this.tmpInt = this.tmpIntBuf.readUInt32BE(0, true);","        this.tmpIntPos = 0;","    }","};","","TChannelParser.prototype.readStr = function (len) {","    if (this.tmpStr === null) {","        if ((this.chunk.length - this.pos) >= len) {","            this.tmpStr = this.chunk.slice(this.pos, this.pos + len);","            this.pos += len;","            this.tmpStrPos = len;","        } else {","            this.tmpStr = new Buffer(len);","            this.chunk.copy(this.tmpStr, 0, this.pos, this.chunk.length);","            this.tmpStrPos = this.chunk.length - this.pos;","            this.pos += (this.chunk.length - this.pos);","        }","    } else {","        var bytesToCopy = Math.min(this.chunk.length, (len - this.tmpStrPos));","        this.chunk.copy(this.tmpStr, this.tmpStrPos, this.pos, this.pos + bytesToCopy);","        this.tmpStrPos += bytesToCopy;","        this.pos += bytesToCopy;","    }","};","","TChannelParser.prototype.execute = function (chunk) {","    this.pos = 0;","    this.chunk = chunk;","    var header = this.newFrame.header;","","    while (this.pos < chunk.length) {","        if (this.state === states.readType) {","            this.readType();","        } else if (this.state === states.readId) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.id = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readSeq;","            }","        } else if (this.state === states.readSeq) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.seq = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readArg1len;","            }","        } else if (this.state === states.readArg1len) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.arg1len = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readArg2len;","            }","        } else if (this.state === states.readArg2len) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.arg2len = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readArg3len;","            }","        } else if (this.state === states.readArg3len) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.arg3len = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readCsum;","            }","        } else if (this.state === states.readCsum) {","            this.readInt();","            if (typeof this.tmpInt === 'number') {","                header.csum = this.tmpInt;","                this.tmpInt = null;","                this.state = states.readArg1;","            }","        } else if (this.state === states.readArg1) {","            this.readStr(header.arg1len);","            if (this.tmpStrPos === header.arg1len) {","                this.newFrame.arg1 = this.tmpStr;","                this.tmpStr = null;","                this.tmpStrPos = 0;","                if (header.arg2len === 0 && header.arg3len === 0) {","                    this.emitAndReset();","                    header = this.newFrame.header;","                } else {","                    this.state = states.readArg2;","                }","            }","        } else if (this.state === states.readArg2) {","            this.readStr(header.arg2len);","            if (this.tmpStrPos === header.arg2len) {","                this.newFrame.arg2 = this.tmpStr;","                this.tmpStr = null;","                this.tmpStrPos = 0;","                if (header.arg3len === 0) {","                    this.emitAndReset();","                    header = this.newFrame.header;","                } else {","                    this.state = states.readArg3;","                }","            }","        } else if (this.state === states.readArg3) {","            this.readStr(header.arg3len);","            if (this.tmpStrPos === header.arg3len) {","                this.newFrame.arg3 = this.tmpStr;","                this.emitAndReset();","                header = this.newFrame.header;","            }","        } else if (this.state !== states.error) {","            throw new Error('unknown state ' + this.state);","        }","    }","};","","TChannelParser.prototype.emitAndReset = function () {","    this.tmpStr = null;","    this.tmpStrPos = 0;","    if (this.newFrame.header.arg2len === 0) {","        this.newFrame.arg2 = emptyBuffer;","    }","    if (this.newFrame.header.arg3len === 0) {","        this.newFrame.arg3 = emptyBuffer;","    }","    var err = this.newFrame.verifyChecksum();","    if (err) {","        this.emit('error', err);","        return;","    }","    this.emit('frame', this.newFrame);","    this.newFrame = new TChannelFrame();","    this.state = states.readType;","    this.chunk = null;","};",""],"l":{"23":1,"25":1,"27":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"42":1,"43":0,"45":0,"46":0,"48":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"58":1,"60":1,"61":0,"62":0,"63":0,"64":0,"67":1,"68":0,"69":0,"70":0,"73":1,"74":0,"75":0,"76":0,"77":0,"79":0,"80":0,"82":0,"83":0,"84":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"95":0,"96":0,"97":0,"98":0,"101":0,"102":0,"103":0,"104":0,"108":1,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"168":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"181":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"191":0,"192":0,"197":1,"198":0,"199":0,"200":0,"201":0,"203":0,"204":0,"206":0,"207":0,"208":0,"209":0,"211":0,"212":0,"213":0,"214":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-all-important-fields.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-all-important-fields.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"main","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":26}}},"2":{"name":"pastWarmup","line":63,"loc":{"start":{"line":63,"column":4},"end":{"line":63,"column":26}}},"3":{"name":"runLoop","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":34}}},"4":{"name":"runDefaultLoop","line":82,"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":35}}},"5":{"name":"runOptimizedLoop","line":116,"loc":{"start":{"line":116,"column":0},"end":{"line":116,"column":37}}},"6":{"name":"FrameData","line":145,"loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":71}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":38}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":20}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":22}},"11":{"start":{"line":36,"column":0},"end":{"line":36,"column":21}},"12":{"start":{"line":37,"column":0},"end":{"line":39,"column":2}},"13":{"start":{"line":41,"column":0},"end":{"line":54,"column":2}},"14":{"start":{"line":56,"column":0},"end":{"line":70,"column":1}},"15":{"start":{"line":57,"column":4},"end":{"line":57,"column":49}},"16":{"start":{"line":59,"column":4},"end":{"line":59,"column":29}},"17":{"start":{"line":60,"column":4},"end":{"line":60,"column":31}},"18":{"start":{"line":61,"column":4},"end":{"line":61,"column":32}},"19":{"start":{"line":63,"column":4},"end":{"line":69,"column":5}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":50}},"21":{"start":{"line":65,"column":8},"end":{"line":65,"column":31}},"22":{"start":{"line":66,"column":8},"end":{"line":66,"column":33}},"23":{"start":{"line":67,"column":8},"end":{"line":67,"column":29}},"24":{"start":{"line":68,"column":8},"end":{"line":68,"column":50}},"25":{"start":{"line":72,"column":0},"end":{"line":80,"column":1}},"26":{"start":{"line":73,"column":4},"end":{"line":79,"column":5}},"27":{"start":{"line":74,"column":8},"end":{"line":74,"column":36}},"28":{"start":{"line":75,"column":11},"end":{"line":79,"column":5}},"29":{"start":{"line":76,"column":8},"end":{"line":76,"column":34}},"30":{"start":{"line":78,"column":8},"end":{"line":78,"column":29}},"31":{"start":{"line":82,"column":0},"end":{"line":114,"column":1}},"32":{"start":{"line":83,"column":4},"end":{"line":83,"column":31}},"33":{"start":{"line":84,"column":4},"end":{"line":84,"column":59}},"34":{"start":{"line":86,"column":4},"end":{"line":113,"column":5}},"35":{"start":{"line":87,"column":8},"end":{"line":87,"column":63}},"36":{"start":{"line":88,"column":8},"end":{"line":88,"column":36}},"37":{"start":{"line":90,"column":8},"end":{"line":90,"column":59}},"38":{"start":{"line":91,"column":8},"end":{"line":91,"column":32}},"39":{"start":{"line":92,"column":8},"end":{"line":92,"column":61}},"40":{"start":{"line":93,"column":8},"end":{"line":93,"column":58}},"41":{"start":{"line":95,"column":8},"end":{"line":95,"column":65}},"42":{"start":{"line":96,"column":8},"end":{"line":96,"column":41}},"43":{"start":{"line":98,"column":8},"end":{"line":100,"column":10}},"44":{"start":{"line":103,"column":8},"end":{"line":103,"column":42}},"45":{"start":{"line":104,"column":8},"end":{"line":104,"column":45}},"46":{"start":{"line":105,"column":8},"end":{"line":105,"column":50}},"47":{"start":{"line":106,"column":8},"end":{"line":106,"column":39}},"48":{"start":{"line":108,"column":8},"end":{"line":108,"column":49}},"49":{"start":{"line":109,"column":8},"end":{"line":109,"column":47}},"50":{"start":{"line":111,"column":8},"end":{"line":111,"column":45}},"51":{"start":{"line":112,"column":8},"end":{"line":112,"column":45}},"52":{"start":{"line":116,"column":0},"end":{"line":143,"column":1}},"53":{"start":{"line":117,"column":4},"end":{"line":117,"column":31}},"54":{"start":{"line":118,"column":4},"end":{"line":118,"column":59}},"55":{"start":{"line":120,"column":4},"end":{"line":142,"column":5}},"56":{"start":{"line":121,"column":8},"end":{"line":121,"column":74}},"57":{"start":{"line":122,"column":8},"end":{"line":122,"column":76}},"58":{"start":{"line":123,"column":8},"end":{"line":124,"column":47}},"59":{"start":{"line":125,"column":8},"end":{"line":125,"column":68}},"60":{"start":{"line":127,"column":8},"end":{"line":129,"column":10}},"61":{"start":{"line":132,"column":8},"end":{"line":132,"column":42}},"62":{"start":{"line":133,"column":8},"end":{"line":133,"column":45}},"63":{"start":{"line":134,"column":8},"end":{"line":134,"column":50}},"64":{"start":{"line":135,"column":8},"end":{"line":135,"column":39}},"65":{"start":{"line":137,"column":8},"end":{"line":137,"column":49}},"66":{"start":{"line":138,"column":8},"end":{"line":138,"column":47}},"67":{"start":{"line":140,"column":8},"end":{"line":140,"column":45}},"68":{"start":{"line":141,"column":8},"end":{"line":141,"column":45}},"69":{"start":{"line":145,"column":0},"end":{"line":150,"column":1}},"70":{"start":{"line":146,"column":4},"end":{"line":146,"column":35}},"71":{"start":{"line":147,"column":4},"end":{"line":147,"column":33}},"72":{"start":{"line":148,"column":4},"end":{"line":148,"column":43}},"73":{"start":{"line":149,"column":4},"end":{"line":149,"column":29}},"74":{"start":{"line":152,"column":0},"end":{"line":161,"column":1}},"75":{"start":{"line":153,"column":4},"end":{"line":153,"column":30}},"76":{"start":{"line":154,"column":4},"end":{"line":154,"column":46}},"77":{"start":{"line":155,"column":4},"end":{"line":155,"column":37}},"78":{"start":{"line":156,"column":4},"end":{"line":158,"column":5}},"79":{"start":{"line":157,"column":8},"end":{"line":157,"column":57}},"80":{"start":{"line":160,"column":4},"end":{"line":160,"column":27}}},"branchMap":{"1":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"2":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":11},"end":{"line":75,"column":11}},{"start":{"line":75,"column":11},"end":{"line":75,"column":11}}]},"3":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":0},"end":{"line":152,"column":0}},{"start":{"line":152,"column":0},"end":{"line":152,"column":0}}]},"4":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":15},"end":{"line":154,"column":30}},{"start":{"line":154,"column":34},"end":{"line":154,"column":45}}]},"5":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":4},"end":{"line":156,"column":4}},{"start":{"line":156,"column":4},"end":{"line":156,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = global.process;","var bufrw = require('bufrw');","var setTimeout = require('timers').setTimeout;","var console = require('console');","var Buffer = require('buffer').Buffer;","","/*eslint no-console: 0*/","var v2 = require('../../v2/index.js');","","var spanId = [0, 1];","var CN_BUFFER = new Buffer('cn');","var RD_BUFFER = new Buffer('rd');","var parentId = [2, 3];","var traceId = [4, 5];","var tracing = new v2.Tracing(","    spanId, parentId, traceId",");","","var frame = new v2.Frame(24,    // frame id","    new v2.CallRequest(","        42,                     // flags","        99,                     // ttl","        tracing,                // tracing","        'castle',               // service","        {                       // headers","            'cn': 'mario',      // headers.cn","            'as': 'plumber'     // headers.as","        },                      //","        v2.Checksum.Types.None, // csum","        ['door', 'key', 'turn'] // args","    )",");","","function main(mode, ITER) {","    var buf = bufrw.toBuffer(v2.Frame.RW, frame);","","    runLoop(buf, mode, 1000);","    console.log('done warmup');","    setTimeout(pastWarmup, 250);","","    function pastWarmup() {","        console.log('running bench', process.pid);","        var start = Date.now();","        runLoop(buf, mode, ITER);","        var end = Date.now();","        console.log('finised bench', end - start);","    }","}","","function runLoop(buf, mode, ITER) {","    if (mode === 'optimized') {","        runOptimizedLoop(buf, ITER);","    } else if (mode === 'default') {","        runDefaultLoop(buf, ITER);","    } else {","        console.warn('noop');","    }","}","","function runDefaultLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var res = lazyFrame.bodyRW.lazy.readService(lazyFrame);","        var serviceName = res.value;","","        res = lazyFrame.bodyRW.lazy.readHeaders(lazyFrame);","        var headers = res.value;","        var callerName = String(headers.getValue(CN_BUFFER));","        var routingDelegate = headers.getValue(RD_BUFFER);","","        res = lazyFrame.bodyRW.lazy.readArg1(lazyFrame, headers);","        var endpoint = String(res.value);","","        resArr[i % 10] = new FrameData(","            serviceName, callerName, routingDelegate, endpoint","        );","","        // Naughty; reset cache","        lazyFrame.cache.serviceStr = null;","        lazyFrame.cache.callerNameStr = null;","        lazyFrame.cache.routingDelegateStr = null;","        lazyFrame.cache.arg1Str = null;","","        lazyFrame.cache.headerStartOffset = null;","        lazyFrame.cache.csumStartOffset = null;","","        lazyFrame.cache.cnValueOffset = null;","        lazyFrame.cache.rdValueOffset = null;","    }","}","","function runOptimizedLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var serviceName = lazyFrame.bodyRW.lazy.readServiceStr(lazyFrame);","        var callerName = lazyFrame.bodyRW.lazy.readCallerNameStr(lazyFrame);","        var routingDelegate = lazyFrame.bodyRW.lazy","            .readRoutingDelegateStr(lazyFrame);","        var endpoint = lazyFrame.bodyRW.lazy.readArg1Str(lazyFrame);","","        resArr[i % 10] = new FrameData(","            serviceName, callerName, routingDelegate, endpoint","        );","","        // Naughty; reset cache","        lazyFrame.cache.serviceStr = null;","        lazyFrame.cache.callerNameStr = null;","        lazyFrame.cache.routingDelegateStr = null;","        lazyFrame.cache.arg1Str = null;","","        lazyFrame.cache.headerStartOffset = null;","        lazyFrame.cache.csumStartOffset = null;","","        lazyFrame.cache.cnValueOffset = null;","        lazyFrame.cache.rdValueOffset = null;","    }","}","","function FrameData(serviceName, callerName, routingDelegate, endpoint) {","    this.serviceName = serviceName;","    this.callerName = callerName;","    this.routingDelegate = routingDelegate;","    this.endpoint = endpoint;","}","","if (require.main === module) {","    var arg = process.argv[2];","    var mode = process.argv[3] || 'optimized';","    var ITERATIONS = 1000 * 1000 * 1;","    if (arg) {","        ITERATIONS = 1000 * 1000 * 1 * parseInt(arg, 10);","    }","","    main(mode, ITERATIONS);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"30":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"41":1,"56":1,"57":0,"59":0,"60":0,"61":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"72":1,"73":0,"74":0,"75":0,"76":0,"78":0,"82":1,"83":0,"84":0,"86":0,"87":0,"88":0,"90":0,"91":0,"92":0,"93":0,"95":0,"96":0,"98":0,"103":0,"104":0,"105":0,"106":0,"108":0,"109":0,"111":0,"112":0,"116":1,"117":0,"118":0,"120":0,"121":0,"122":0,"123":0,"125":0,"127":0,"132":0,"133":0,"134":0,"135":0,"137":0,"138":0,"140":0,"141":0,"145":1,"146":0,"147":0,"148":0,"149":0,"152":1,"153":0,"154":0,"155":0,"156":0,"157":0,"160":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-arg1-str.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-arg1-str.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"main","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":26}}},"2":{"name":"pastWarmup","line":60,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":26}}},"3":{"name":"runLoop","line":69,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":34}}},"4":{"name":"runDefaultLoop","line":79,"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":35}}},"5":{"name":"runOptimizedLoop","line":95,"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":37}}},"6":{"name":"FrameData","line":110,"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":29}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":38}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":20}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":22}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":21}},"9":{"start":{"line":34,"column":0},"end":{"line":36,"column":2}},"10":{"start":{"line":38,"column":0},"end":{"line":51,"column":2}},"11":{"start":{"line":53,"column":0},"end":{"line":67,"column":1}},"12":{"start":{"line":54,"column":4},"end":{"line":54,"column":49}},"13":{"start":{"line":56,"column":4},"end":{"line":56,"column":29}},"14":{"start":{"line":57,"column":4},"end":{"line":57,"column":31}},"15":{"start":{"line":58,"column":4},"end":{"line":58,"column":32}},"16":{"start":{"line":60,"column":4},"end":{"line":66,"column":5}},"17":{"start":{"line":61,"column":8},"end":{"line":61,"column":50}},"18":{"start":{"line":62,"column":8},"end":{"line":62,"column":31}},"19":{"start":{"line":63,"column":8},"end":{"line":63,"column":33}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":29}},"21":{"start":{"line":65,"column":8},"end":{"line":65,"column":50}},"22":{"start":{"line":69,"column":0},"end":{"line":77,"column":1}},"23":{"start":{"line":70,"column":4},"end":{"line":76,"column":5}},"24":{"start":{"line":71,"column":8},"end":{"line":71,"column":36}},"25":{"start":{"line":72,"column":11},"end":{"line":76,"column":5}},"26":{"start":{"line":73,"column":8},"end":{"line":73,"column":34}},"27":{"start":{"line":75,"column":8},"end":{"line":75,"column":29}},"28":{"start":{"line":79,"column":0},"end":{"line":93,"column":1}},"29":{"start":{"line":80,"column":4},"end":{"line":80,"column":31}},"30":{"start":{"line":81,"column":4},"end":{"line":81,"column":59}},"31":{"start":{"line":83,"column":4},"end":{"line":92,"column":5}},"32":{"start":{"line":84,"column":8},"end":{"line":84,"column":60}},"33":{"start":{"line":85,"column":8},"end":{"line":85,"column":33}},"34":{"start":{"line":87,"column":8},"end":{"line":87,"column":57}},"35":{"start":{"line":90,"column":8},"end":{"line":90,"column":39}},"36":{"start":{"line":91,"column":8},"end":{"line":91,"column":47}},"37":{"start":{"line":95,"column":0},"end":{"line":108,"column":1}},"38":{"start":{"line":96,"column":4},"end":{"line":96,"column":31}},"39":{"start":{"line":97,"column":4},"end":{"line":97,"column":59}},"40":{"start":{"line":99,"column":4},"end":{"line":107,"column":5}},"41":{"start":{"line":100,"column":8},"end":{"line":100,"column":68}},"42":{"start":{"line":102,"column":8},"end":{"line":102,"column":49}},"43":{"start":{"line":105,"column":8},"end":{"line":105,"column":39}},"44":{"start":{"line":106,"column":8},"end":{"line":106,"column":47}},"45":{"start":{"line":110,"column":0},"end":{"line":112,"column":1}},"46":{"start":{"line":111,"column":4},"end":{"line":111,"column":29}},"47":{"start":{"line":114,"column":0},"end":{"line":123,"column":1}},"48":{"start":{"line":115,"column":4},"end":{"line":115,"column":30}},"49":{"start":{"line":116,"column":4},"end":{"line":116,"column":46}},"50":{"start":{"line":117,"column":4},"end":{"line":117,"column":37}},"51":{"start":{"line":118,"column":4},"end":{"line":120,"column":5}},"52":{"start":{"line":119,"column":8},"end":{"line":119,"column":57}},"53":{"start":{"line":122,"column":4},"end":{"line":122,"column":27}}},"branchMap":{"1":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"2":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":11},"end":{"line":72,"column":11}},{"start":{"line":72,"column":11},"end":{"line":72,"column":11}}]},"3":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":0},"end":{"line":114,"column":0}},{"start":{"line":114,"column":0},"end":{"line":114,"column":0}}]},"4":{"line":116,"type":"binary-expr","locations":[{"start":{"line":116,"column":15},"end":{"line":116,"column":30}},{"start":{"line":116,"column":34},"end":{"line":116,"column":45}}]},"5":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = global.process;","var bufrw = require('bufrw');","var setTimeout = require('timers').setTimeout;","var console = require('console');","","/*eslint no-console: 0*/","var v2 = require('../../v2/index.js');","","var spanId = [0, 1];","var parentId = [2, 3];","var traceId = [4, 5];","var tracing = new v2.Tracing(","    spanId, parentId, traceId",");","","var frame = new v2.Frame(24,    // frame id","    new v2.CallRequest(","        42,                     // flags","        99,                     // ttl","        tracing,                // tracing","        'castle',               // service","        {                       // headers","            'cn': 'mario',      // headers.cn","            'as': 'plumber'     // headers.as","        },                      //","        v2.Checksum.Types.None, // csum","        ['door', 'key', 'turn'] // args","    )",");","","function main(mode, ITER) {","    var buf = bufrw.toBuffer(v2.Frame.RW, frame);","","    runLoop(buf, mode, 1000);","    console.log('done warmup');","    setTimeout(pastWarmup, 250);","","    function pastWarmup() {","        console.log('running bench', process.pid);","        var start = Date.now();","        runLoop(buf, mode, ITER);","        var end = Date.now();","        console.log('finised bench', end - start);","    }","}","","function runLoop(buf, mode, ITER) {","    if (mode === 'optimized') {","        runOptimizedLoop(buf, ITER);","    } else if (mode === 'default') {","        runDefaultLoop(buf, ITER);","    } else {","        console.warn('noop');","    }","}","","function runDefaultLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var res = lazyFrame.bodyRW.lazy.readArg1(lazyFrame);","        var endpoint = res.value;","","        resArr[i % 10] = new FrameData(String(endpoint));","","        // Naughty; reset cache","        lazyFrame.cache.arg1Str = null;","        lazyFrame.cache.csumStartOffset = null;","    }","}","","function runOptimizedLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var endpoint = lazyFrame.bodyRW.lazy.readArg1Str(lazyFrame);","","        resArr[i % 10] = new FrameData(endpoint);","","        // Naughty; reset cache","        lazyFrame.cache.arg1Str = null;","        lazyFrame.cache.csumStartOffset = null;","    }","}","","function FrameData(endpoint) {","    this.endpoint = endpoint;","}","","if (require.main === module) {","    var arg = process.argv[2];","    var mode = process.argv[3] || 'optimized';","    var ITERATIONS = 1000 * 1000 * 2;","    if (arg) {","        ITERATIONS = 1000 * 1000 * 2 * parseInt(arg, 10);","    }","","    main(mode, ITERATIONS);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"29":1,"31":1,"32":1,"33":1,"34":1,"38":1,"53":1,"54":0,"56":0,"57":0,"58":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"69":1,"70":0,"71":0,"72":0,"73":0,"75":0,"79":1,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"90":0,"91":0,"95":1,"96":0,"97":0,"99":0,"100":0,"102":0,"105":0,"106":0,"110":1,"111":0,"114":1,"115":0,"116":0,"117":0,"118":0,"119":0,"122":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-caller-name-str.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-caller-name-str.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"main","line":55,"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":26}}},"2":{"name":"pastWarmup","line":62,"loc":{"start":{"line":62,"column":4},"end":{"line":62,"column":26}}},"3":{"name":"runLoop","line":71,"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":34}}},"4":{"name":"runDefaultLoop","line":81,"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":35}}},"5":{"name":"runOptimizedLoop","line":101,"loc":{"start":{"line":101,"column":0},"end":{"line":101,"column":37}}},"6":{"name":"FrameData","line":118,"loc":{"start":{"line":118,"column":0},"end":{"line":118,"column":31}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"6":{"start":{"line":30,"column":0},"end":{"line":30,"column":38}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":20}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":33}},"9":{"start":{"line":34,"column":0},"end":{"line":34,"column":22}},"10":{"start":{"line":35,"column":0},"end":{"line":35,"column":21}},"11":{"start":{"line":36,"column":0},"end":{"line":38,"column":2}},"12":{"start":{"line":40,"column":0},"end":{"line":53,"column":2}},"13":{"start":{"line":55,"column":0},"end":{"line":69,"column":1}},"14":{"start":{"line":56,"column":4},"end":{"line":56,"column":49}},"15":{"start":{"line":58,"column":4},"end":{"line":58,"column":29}},"16":{"start":{"line":59,"column":4},"end":{"line":59,"column":31}},"17":{"start":{"line":60,"column":4},"end":{"line":60,"column":32}},"18":{"start":{"line":62,"column":4},"end":{"line":68,"column":5}},"19":{"start":{"line":63,"column":8},"end":{"line":63,"column":50}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":31}},"21":{"start":{"line":65,"column":8},"end":{"line":65,"column":33}},"22":{"start":{"line":66,"column":8},"end":{"line":66,"column":29}},"23":{"start":{"line":67,"column":8},"end":{"line":67,"column":50}},"24":{"start":{"line":71,"column":0},"end":{"line":79,"column":1}},"25":{"start":{"line":72,"column":4},"end":{"line":78,"column":5}},"26":{"start":{"line":73,"column":8},"end":{"line":73,"column":36}},"27":{"start":{"line":74,"column":11},"end":{"line":78,"column":5}},"28":{"start":{"line":75,"column":8},"end":{"line":75,"column":34}},"29":{"start":{"line":77,"column":8},"end":{"line":77,"column":29}},"30":{"start":{"line":81,"column":0},"end":{"line":99,"column":1}},"31":{"start":{"line":82,"column":4},"end":{"line":82,"column":31}},"32":{"start":{"line":83,"column":4},"end":{"line":83,"column":59}},"33":{"start":{"line":85,"column":4},"end":{"line":98,"column":5}},"34":{"start":{"line":86,"column":8},"end":{"line":86,"column":63}},"35":{"start":{"line":87,"column":8},"end":{"line":87,"column":32}},"36":{"start":{"line":89,"column":8},"end":{"line":91,"column":10}},"37":{"start":{"line":94,"column":8},"end":{"line":94,"column":45}},"38":{"start":{"line":95,"column":8},"end":{"line":95,"column":49}},"39":{"start":{"line":96,"column":8},"end":{"line":96,"column":47}},"40":{"start":{"line":97,"column":8},"end":{"line":97,"column":45}},"41":{"start":{"line":101,"column":0},"end":{"line":116,"column":1}},"42":{"start":{"line":102,"column":4},"end":{"line":102,"column":31}},"43":{"start":{"line":103,"column":4},"end":{"line":103,"column":59}},"44":{"start":{"line":105,"column":4},"end":{"line":115,"column":5}},"45":{"start":{"line":106,"column":8},"end":{"line":106,"column":76}},"46":{"start":{"line":108,"column":8},"end":{"line":108,"column":51}},"47":{"start":{"line":111,"column":8},"end":{"line":111,"column":45}},"48":{"start":{"line":112,"column":8},"end":{"line":112,"column":49}},"49":{"start":{"line":113,"column":8},"end":{"line":113,"column":47}},"50":{"start":{"line":114,"column":8},"end":{"line":114,"column":45}},"51":{"start":{"line":118,"column":0},"end":{"line":120,"column":1}},"52":{"start":{"line":119,"column":4},"end":{"line":119,"column":33}},"53":{"start":{"line":122,"column":0},"end":{"line":131,"column":1}},"54":{"start":{"line":123,"column":4},"end":{"line":123,"column":30}},"55":{"start":{"line":124,"column":4},"end":{"line":124,"column":46}},"56":{"start":{"line":125,"column":4},"end":{"line":125,"column":37}},"57":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"58":{"start":{"line":127,"column":8},"end":{"line":127,"column":57}},"59":{"start":{"line":130,"column":4},"end":{"line":130,"column":27}}},"branchMap":{"1":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"2":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":11},"end":{"line":74,"column":11}},{"start":{"line":74,"column":11},"end":{"line":74,"column":11}}]},"3":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":0},"end":{"line":122,"column":0}},{"start":{"line":122,"column":0},"end":{"line":122,"column":0}}]},"4":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":15},"end":{"line":124,"column":30}},{"start":{"line":124,"column":34},"end":{"line":124,"column":45}}]},"5":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = global.process;","var bufrw = require('bufrw');","var setTimeout = require('timers').setTimeout;","var console = require('console');","var Buffer = require('buffer').Buffer;","","/*eslint no-console: 0*/","var v2 = require('../../v2/index.js');","","var spanId = [0, 1];","var CN_BUFFER = new Buffer('cn');","var parentId = [2, 3];","var traceId = [4, 5];","var tracing = new v2.Tracing(","    spanId, parentId, traceId",");","","var frame = new v2.Frame(24,    // frame id","    new v2.CallRequest(","        42,                     // flags","        99,                     // ttl","        tracing,                // tracing","        'castle',               // service","        {                       // headers","            'cn': 'mario',      // headers.cn","            'as': 'plumber'     // headers.as","        },                      //","        v2.Checksum.Types.None, // csum","        ['door', 'key', 'turn'] // args","    )",");","","function main(mode, ITER) {","    var buf = bufrw.toBuffer(v2.Frame.RW, frame);","","    runLoop(buf, mode, 1000);","    console.log('done warmup');","    setTimeout(pastWarmup, 250);","","    function pastWarmup() {","        console.log('running bench', process.pid);","        var start = Date.now();","        runLoop(buf, mode, ITER);","        var end = Date.now();","        console.log('finised bench', end - start);","    }","}","","function runLoop(buf, mode, ITER) {","    if (mode === 'optimized') {","        runOptimizedLoop(buf, ITER);","    } else if (mode === 'default') {","        runDefaultLoop(buf, ITER);","    } else {","        console.warn('noop');","    }","}","","function runDefaultLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var res = lazyFrame.bodyRW.lazy.readHeaders(lazyFrame);","        var headers = res.value;","","        resArr[i % 10] = new FrameData(","            String(headers.getValue(CN_BUFFER))","        );","","        // Naughty; reset cache","        lazyFrame.cache.callerNameStr = null;","        lazyFrame.cache.headerStartOffset = null;","        lazyFrame.cache.csumStartOffset = null;","        lazyFrame.cache.cnValueOffset = null;","    }","}","","function runOptimizedLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var callerName = lazyFrame.bodyRW.lazy.readCallerNameStr(lazyFrame);","","        resArr[i % 10] = new FrameData(callerName);","","        // Naughty; reset cache","        lazyFrame.cache.callerNameStr = null;","        lazyFrame.cache.headerStartOffset = null;","        lazyFrame.cache.csumStartOffset = null;","        lazyFrame.cache.cnValueOffset = null;","    }","}","","function FrameData(callerName) {","    this.callerName = callerName;","}","","if (require.main === module) {","    var arg = process.argv[2];","    var mode = process.argv[3] || 'optimized';","    var ITERATIONS = 1000 * 1000 * 2;","    if (arg) {","        ITERATIONS = 1000 * 1000 * 2 * parseInt(arg, 10);","    }","","    main(mode, ITERATIONS);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"27":1,"30":1,"32":1,"33":1,"34":1,"35":1,"36":1,"40":1,"55":1,"56":0,"58":0,"59":0,"60":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"71":1,"72":0,"73":0,"74":0,"75":0,"77":0,"81":1,"82":0,"83":0,"85":0,"86":0,"87":0,"89":0,"94":0,"95":0,"96":0,"97":0,"101":1,"102":0,"103":0,"105":0,"106":0,"108":0,"111":0,"112":0,"113":0,"114":0,"118":1,"119":0,"122":1,"123":0,"124":0,"125":0,"126":0,"127":0,"130":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-service-name-str.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-service-name-str.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"main","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":26}}},"2":{"name":"pastWarmup","line":60,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":26}}},"3":{"name":"runLoop","line":69,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":34}}},"4":{"name":"runDefaultLoop","line":79,"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":35}}},"5":{"name":"runOptimizedLoop","line":94,"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":37}}},"6":{"name":"FrameData","line":109,"loc":{"start":{"line":109,"column":0},"end":{"line":109,"column":32}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":38}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":20}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":22}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":21}},"9":{"start":{"line":34,"column":0},"end":{"line":36,"column":2}},"10":{"start":{"line":38,"column":0},"end":{"line":51,"column":2}},"11":{"start":{"line":53,"column":0},"end":{"line":67,"column":1}},"12":{"start":{"line":54,"column":4},"end":{"line":54,"column":49}},"13":{"start":{"line":56,"column":4},"end":{"line":56,"column":29}},"14":{"start":{"line":57,"column":4},"end":{"line":57,"column":31}},"15":{"start":{"line":58,"column":4},"end":{"line":58,"column":32}},"16":{"start":{"line":60,"column":4},"end":{"line":66,"column":5}},"17":{"start":{"line":61,"column":8},"end":{"line":61,"column":50}},"18":{"start":{"line":62,"column":8},"end":{"line":62,"column":31}},"19":{"start":{"line":63,"column":8},"end":{"line":63,"column":33}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":29}},"21":{"start":{"line":65,"column":8},"end":{"line":65,"column":50}},"22":{"start":{"line":69,"column":0},"end":{"line":77,"column":1}},"23":{"start":{"line":70,"column":4},"end":{"line":76,"column":5}},"24":{"start":{"line":71,"column":8},"end":{"line":71,"column":36}},"25":{"start":{"line":72,"column":11},"end":{"line":76,"column":5}},"26":{"start":{"line":73,"column":8},"end":{"line":73,"column":34}},"27":{"start":{"line":75,"column":8},"end":{"line":75,"column":29}},"28":{"start":{"line":79,"column":0},"end":{"line":92,"column":1}},"29":{"start":{"line":80,"column":4},"end":{"line":80,"column":31}},"30":{"start":{"line":81,"column":4},"end":{"line":81,"column":59}},"31":{"start":{"line":83,"column":4},"end":{"line":91,"column":5}},"32":{"start":{"line":84,"column":8},"end":{"line":84,"column":63}},"33":{"start":{"line":86,"column":8},"end":{"line":86,"column":50}},"34":{"start":{"line":89,"column":8},"end":{"line":89,"column":42}},"35":{"start":{"line":90,"column":8},"end":{"line":90,"column":49}},"36":{"start":{"line":94,"column":0},"end":{"line":107,"column":1}},"37":{"start":{"line":95,"column":4},"end":{"line":95,"column":31}},"38":{"start":{"line":96,"column":4},"end":{"line":96,"column":59}},"39":{"start":{"line":98,"column":4},"end":{"line":106,"column":5}},"40":{"start":{"line":99,"column":8},"end":{"line":99,"column":74}},"41":{"start":{"line":101,"column":8},"end":{"line":101,"column":52}},"42":{"start":{"line":104,"column":8},"end":{"line":104,"column":42}},"43":{"start":{"line":105,"column":8},"end":{"line":105,"column":49}},"44":{"start":{"line":109,"column":0},"end":{"line":111,"column":1}},"45":{"start":{"line":110,"column":4},"end":{"line":110,"column":35}},"46":{"start":{"line":113,"column":0},"end":{"line":122,"column":1}},"47":{"start":{"line":114,"column":4},"end":{"line":114,"column":30}},"48":{"start":{"line":115,"column":4},"end":{"line":115,"column":46}},"49":{"start":{"line":116,"column":4},"end":{"line":116,"column":37}},"50":{"start":{"line":117,"column":4},"end":{"line":119,"column":5}},"51":{"start":{"line":118,"column":8},"end":{"line":118,"column":57}},"52":{"start":{"line":121,"column":4},"end":{"line":121,"column":27}}},"branchMap":{"1":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"2":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":11},"end":{"line":72,"column":11}},{"start":{"line":72,"column":11},"end":{"line":72,"column":11}}]},"3":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":0},"end":{"line":113,"column":0}},{"start":{"line":113,"column":0},"end":{"line":113,"column":0}}]},"4":{"line":115,"type":"binary-expr","locations":[{"start":{"line":115,"column":15},"end":{"line":115,"column":30}},{"start":{"line":115,"column":34},"end":{"line":115,"column":45}}]},"5":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":117,"column":4}},{"start":{"line":117,"column":4},"end":{"line":117,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = global.process;","var bufrw = require('bufrw');","var setTimeout = require('timers').setTimeout;","var console = require('console');","","/*eslint no-console: 0*/","var v2 = require('../../v2/index.js');","","var spanId = [0, 1];","var parentId = [2, 3];","var traceId = [4, 5];","var tracing = new v2.Tracing(","    spanId, parentId, traceId",");","","var frame = new v2.Frame(24,    // frame id","    new v2.CallRequest(","        42,                     // flags","        99,                     // ttl","        tracing,                // tracing","        'castle',               // service","        {                       // headers","            'cn': 'mario',      // headers.cn","            'as': 'plumber'     // headers.as","        },                      //","        v2.Checksum.Types.None, // csum","        ['door', 'key', 'turn'] // args","    )",");","","function main(mode, ITER) {","    var buf = bufrw.toBuffer(v2.Frame.RW, frame);","","    runLoop(buf, mode, 1000);","    console.log('done warmup');","    setTimeout(pastWarmup, 250);","","    function pastWarmup() {","        console.log('running bench', process.pid);","        var start = Date.now();","        runLoop(buf, mode, ITER);","        var end = Date.now();","        console.log('finised bench', end - start);","    }","}","","function runLoop(buf, mode, ITER) {","    if (mode === 'optimized') {","        runOptimizedLoop(buf, ITER);","    } else if (mode === 'default') {","        runDefaultLoop(buf, ITER);","    } else {","        console.warn('noop');","    }","}","","function runDefaultLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var res = lazyFrame.bodyRW.lazy.readService(lazyFrame);","","        resArr[i % 10] = new FrameData(res.value);","","        // Naughty; reset cache","        lazyFrame.cache.serviceStr = null;","        lazyFrame.cache.headerStartOffset = null;","    }","}","","function runOptimizedLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var serviceName = lazyFrame.bodyRW.lazy.readServiceStr(lazyFrame);","","        resArr[i % 10] = new FrameData(serviceName);","","        // Naughty; reset cache","        lazyFrame.cache.serviceStr = null;","        lazyFrame.cache.headerStartOffset = null;","    }","}","","function FrameData(serviceName) {","    this.serviceName = serviceName;","}","","if (require.main === module) {","    var arg = process.argv[2];","    var mode = process.argv[3] || 'optimized';","    var ITERATIONS = 1000 * 1000 * 5;","    if (arg) {","        ITERATIONS = 1000 * 1000 * 5 * parseInt(arg, 10);","    }","","    main(mode, ITERATIONS);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"29":1,"31":1,"32":1,"33":1,"34":1,"38":1,"53":1,"54":0,"56":0,"57":0,"58":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"69":1,"70":0,"71":0,"72":0,"73":0,"75":0,"79":1,"80":0,"81":0,"83":0,"84":0,"86":0,"89":0,"90":0,"94":1,"95":0,"96":0,"98":0,"99":0,"101":0,"104":0,"105":0,"109":1,"110":0,"113":1,"114":0,"115":0,"116":0,"117":0,"118":0,"121":0}},"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-tracing-value.js":{"path":"/home/travis/build/npmtest/node-npmtest-tchannel/node_modules/tchannel/benchmarks/micro/reading-tracing-value.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"main","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":26}}},"2":{"name":"pastWarmup","line":60,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":26}}},"3":{"name":"runLoop","line":69,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":34}}},"4":{"name":"runDefaultLoop","line":79,"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":35}}},"5":{"name":"runOptimizedLoop","line":94,"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":37}}},"6":{"name":"FrameData","line":108,"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":28}}}},"statementMap":{"1":{"start":{"line":23,"column":0},"end":{"line":23,"column":29}},"2":{"start":{"line":24,"column":0},"end":{"line":24,"column":29}},"3":{"start":{"line":25,"column":0},"end":{"line":25,"column":46}},"4":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}},"5":{"start":{"line":29,"column":0},"end":{"line":29,"column":38}},"6":{"start":{"line":31,"column":0},"end":{"line":31,"column":20}},"7":{"start":{"line":32,"column":0},"end":{"line":32,"column":22}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":21}},"9":{"start":{"line":34,"column":0},"end":{"line":36,"column":2}},"10":{"start":{"line":38,"column":0},"end":{"line":51,"column":2}},"11":{"start":{"line":53,"column":0},"end":{"line":67,"column":1}},"12":{"start":{"line":54,"column":4},"end":{"line":54,"column":49}},"13":{"start":{"line":56,"column":4},"end":{"line":56,"column":29}},"14":{"start":{"line":57,"column":4},"end":{"line":57,"column":31}},"15":{"start":{"line":58,"column":4},"end":{"line":58,"column":32}},"16":{"start":{"line":60,"column":4},"end":{"line":66,"column":5}},"17":{"start":{"line":61,"column":8},"end":{"line":61,"column":50}},"18":{"start":{"line":62,"column":8},"end":{"line":62,"column":31}},"19":{"start":{"line":63,"column":8},"end":{"line":63,"column":33}},"20":{"start":{"line":64,"column":8},"end":{"line":64,"column":29}},"21":{"start":{"line":65,"column":8},"end":{"line":65,"column":50}},"22":{"start":{"line":69,"column":0},"end":{"line":77,"column":1}},"23":{"start":{"line":70,"column":4},"end":{"line":76,"column":5}},"24":{"start":{"line":71,"column":8},"end":{"line":71,"column":36}},"25":{"start":{"line":72,"column":11},"end":{"line":76,"column":5}},"26":{"start":{"line":73,"column":8},"end":{"line":73,"column":34}},"27":{"start":{"line":75,"column":8},"end":{"line":75,"column":29}},"28":{"start":{"line":79,"column":0},"end":{"line":92,"column":1}},"29":{"start":{"line":80,"column":4},"end":{"line":80,"column":31}},"30":{"start":{"line":81,"column":4},"end":{"line":81,"column":59}},"31":{"start":{"line":83,"column":4},"end":{"line":91,"column":5}},"32":{"start":{"line":84,"column":8},"end":{"line":84,"column":63}},"33":{"start":{"line":85,"column":8},"end":{"line":85,"column":32}},"34":{"start":{"line":87,"column":8},"end":{"line":87,"column":56}},"35":{"start":{"line":90,"column":8},"end":{"line":90,"column":44}},"36":{"start":{"line":94,"column":0},"end":{"line":106,"column":1}},"37":{"start":{"line":95,"column":4},"end":{"line":95,"column":31}},"38":{"start":{"line":96,"column":4},"end":{"line":96,"column":59}},"39":{"start":{"line":98,"column":4},"end":{"line":105,"column":5}},"40":{"start":{"line":99,"column":8},"end":{"line":99,"column":72}},"41":{"start":{"line":101,"column":8},"end":{"line":101,"column":48}},"42":{"start":{"line":104,"column":8},"end":{"line":104,"column":44}},"43":{"start":{"line":108,"column":0},"end":{"line":110,"column":1}},"44":{"start":{"line":109,"column":4},"end":{"line":109,"column":27}},"45":{"start":{"line":112,"column":0},"end":{"line":121,"column":1}},"46":{"start":{"line":113,"column":4},"end":{"line":113,"column":30}},"47":{"start":{"line":114,"column":4},"end":{"line":114,"column":46}},"48":{"start":{"line":115,"column":4},"end":{"line":115,"column":37}},"49":{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},"50":{"start":{"line":117,"column":8},"end":{"line":117,"column":57}},"51":{"start":{"line":120,"column":4},"end":{"line":120,"column":27}}},"branchMap":{"1":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"2":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":11},"end":{"line":72,"column":11}},{"start":{"line":72,"column":11},"end":{"line":72,"column":11}}]},"3":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":0},"end":{"line":112,"column":0}},{"start":{"line":112,"column":0},"end":{"line":112,"column":0}}]},"4":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":15},"end":{"line":114,"column":30}},{"start":{"line":114,"column":34},"end":{"line":114,"column":45}}]},"5":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":4},"end":{"line":116,"column":4}},{"start":{"line":116,"column":4},"end":{"line":116,"column":4}}]}},"code":["// Copyright (c) 2017 Uber Technologies, Inc.","//","// Permission is hereby granted, free of charge, to any person obtaining a copy","// of this software and associated documentation files (the \"Software\"), to deal","// in the Software without restriction, including without limitation the rights","// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","// copies of the Software, and to permit persons to whom the Software is","// furnished to do so, subject to the following conditions:","//","// The above copyright notice and this permission notice shall be included in","// all copies or substantial portions of the Software.","//","// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","// THE SOFTWARE.","","'use strict';","","var process = global.process;","var bufrw = require('bufrw');","var setTimeout = require('timers').setTimeout;","var console = require('console');","","/*eslint no-console: 0*/","var v2 = require('../../v2/index.js');","","var spanId = [0, 1];","var parentId = [2, 3];","var traceId = [4, 5];","var _tracing = new v2.Tracing(","    spanId, parentId, traceId",");","","var frame = new v2.Frame(24,    // frame id","    new v2.CallRequest(","        42,                     // flags","        99,                     // ttl","        _tracing,                // tracing","        'castle',               // service","        {                       // headers","            'cn': 'mario',      // headers.cn","            'as': 'plumber'     // headers.as","        },                      //","        v2.Checksum.Types.None, // csum","        ['door', 'key', 'turn'] // args","    )",");","","function main(mode, ITER) {","    var buf = bufrw.toBuffer(v2.Frame.RW, frame);","","    runLoop(buf, mode, 1000);","    console.log('done warmup');","    setTimeout(pastWarmup, 250);","","    function pastWarmup() {","        console.log('running bench', process.pid);","        var start = Date.now();","        runLoop(buf, mode, ITER);","        var end = Date.now();","        console.log('finised bench', end - start);","    }","}","","function runLoop(buf, mode, ITER) {","    if (mode === 'optimized') {","        runOptimizedLoop(buf, ITER);","    } else if (mode === 'default') {","        runDefaultLoop(buf, ITER);","    } else {","        console.warn('noop');","    }","}","","function runDefaultLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var res = lazyFrame.bodyRW.lazy.readTracing(lazyFrame);","        var tracing = res.value;","","        resArr[i % 10] = new FrameData(String(tracing));","","        // Naughty; reset cache","        lazyFrame.cache.tracingValue = null;","    }","}","","function runOptimizedLoop(buf, ITER) {","    var resArr = new Array(10);","    var lazyFrame = bufrw.fromBuffer(v2.LazyFrame.RW, buf);","","    for (var i = 0; i < ITER; i++) {","        var tracing = lazyFrame.bodyRW.lazy.readTracingValue(lazyFrame);","","        resArr[i % 10] = new FrameData(tracing);","","        // Naughty; reset cache","        lazyFrame.cache.tracingValue = null;","    }","}","","function FrameData(tracing) {","    this.tracing = tracing;","}","","if (require.main === module) {","    var arg = process.argv[2];","    var mode = process.argv[3] || 'optimized';","    var ITERATIONS = 1000 * 1000 * 2;","    if (arg) {","        ITERATIONS = 1000 * 1000 * 2 * parseInt(arg, 10);","    }","","    main(mode, ITERATIONS);","}",""],"l":{"23":1,"24":1,"25":1,"26":1,"29":1,"31":1,"32":1,"33":1,"34":1,"38":1,"53":1,"54":0,"56":0,"57":0,"58":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"69":1,"70":0,"71":0,"72":0,"73":0,"75":0,"79":1,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"90":0,"94":1,"95":0,"96":0,"98":0,"99":0,"101":0,"104":0,"108":1,"109":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"120":0}}}